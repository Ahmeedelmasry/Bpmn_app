/*!
*  filename: ej2-vue-diagrams.min.js
*  version : 21.1.39
*  Copyright Syncfusion Inc. 2001 - 2020. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
var ej=function(t){"use strict";function e(t,e){var i=e;return i.unshift(void 0),new(Function.prototype.bind.apply(t,i))}function i(t){var e,i=new Uint16Array(5);(window.msCrypto||window.crypto).getRandomValues(i);var n="ej2"+function(t){for(var e="",i=0;i<5;i++)e+=(i?",":"")+t[parseInt(i.toString(),10)];return e}(i),r=function(i){i.source===window&&"string"==typeof i.data&&i.data.length<=32&&i.data===n&&(t(),e())};return window.addEventListener("message",r,!1),window.postMessage(n,"*"),e=function(){window.removeEventListener("message",r),t=r=n=void 0}}function n(t,e){for(var i=e,n=t.replace(/\[/g,".").replace(/\]/g,"").split("."),r=0;r<n.length&&!c(i);r++)i=i[n[parseInt(r.toString(),10)]];return i}function r(t,e,i){var n,r,o=t.replace(/\[/g,".").replace(/\]/g,"").split("."),s=i||{},a=s,l=o.length;for(n=0;n<l;n++)r=o[parseInt(n.toString(),10)],n+1===l?a[""+r]=void 0===e?{}:e:h(a[""+r])&&(a[""+r]={}),a=a[""+r];return s}function o(t,e){delete t[""+e]}function s(t){return!h(t)&&t.constructor==={}.constructor}function a(t,e){if(!h(e))for(var i=t,n=e,r=0,o=Object.keys(e);r<o.length;r++){var a=o[r];h(i.deepMerge)||-1===i.deepMerge.indexOf(a)||!s(n[""+a])&&!Array.isArray(n[""+a])?i[""+a]=n[""+a]:l(i[""+a],i[""+a],n[""+a],!0)}}function l(t,e,i,n){var r=t&&"object"==typeof t?t:{},o=arguments.length;n&&(o-=1);for(var a=function(t){if(!h[t])return"continue";var e=h[t];Object.keys(e).forEach(function(t){var i,o=r[""+t],a=e[""+t],h=Array.isArray(a)&&Array.isArray(o)&&a.length!==o.length,c=!f()||!(o instanceof Event||h);n&&c&&(s(a)||Array.isArray(a))?s(a)?(i=o||{},Array.isArray(i)&&i.hasOwnProperty("isComplexArray")?l(i,{},a,n):r[""+t]=l(i,{},a,n)):(i=f()?o&&Object.keys(a).length:o||[],r[""+t]=l([],i,a,i&&i.length||a&&a.length)):r[""+t]=a})},h=arguments,c=1;c<o;c++)a(c);return r}function h(t){return void 0===t||null===t}function c(t){return void 0===t}function d(t){return t+"_"+Ad++}function p(t,e){var i;return function(){var n=this,r=arguments;clearTimeout(i),i=setTimeout(function(){return i=null,t.apply(n,r)},e)}}function u(t,e){var i=t;return i===e||!(i===document||!i)&&u(i.parentNode,e)}function g(t){try{throw new Error(t)}catch(t){throw t.message+"\n"+t.stack}}function m(t){var e=t+"";return e.match(/auto|cm|mm|in|px|pt|pc|%|em|ex|ch|rem|vw|vh|vmin|vmax/)?e:e+"px"}function f(){return zd}function v(t){return t instanceof Node||!f()||h(t.xPath)?t:document.evaluate(t.xPath,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}function y(t,e){var i="string"==typeof t?document.querySelector(t):t;if(i[""+Ld])for(var n=0,r=i[""+Ld];n<r.length;n++){var o=r[n];if(o instanceof e)return o}return null}function b(){if("undefined"!=typeof window){var t=new Uint16Array(5);return(window.msCrypto||window.crypto).getRandomValues(t)}}function S(t,e){var i=Ud.getDependables(op,t,"",!0)[lp[0]],r=Ud.getDependables(op,t,"")[lp[1]],o=n("defaultNumberingSystem",i),s=f()?n("numberSymbols",i):n("symbols-numberSystem-"+o,i),a=Ud.getSymbolPattern(e||"decimal",o,i,!1);return l(s,Ud.getFormatData(a,!0,"",!0),{dateSeparator:Ud.getDateSeparator(r)})}function w(t,e){var i=Dp.test(t)?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t);return void 0===e?i:(i.innerHTML=e.innerHTML?e.innerHTML:"",void 0!==e.className&&(i.className=e.className),void 0!==e.id&&(i.id=e.id),void 0!==e.styles&&i.setAttribute("style",e.styles),void 0!==e.attrs&&L(i,e.attrs),i)}function I(t,e){for(var i=M(e),o=RegExp,a=0,l=t;a<l.length;a++)for(var c=l[a],d=0,p=i;d<p.length;d++){var u=p[d];if(s(c)){var g=n("attributes.className",c);h(g)?r("attributes.className",u,c):new o("\\b"+u+"\\b","i").test(g)||r("attributes.className",g+" "+u,c)}else c.classList.contains(u)||c.classList.add(u)}return t}function x(t,e){for(var i=M(e),o=0,a=t;o<a.length;o++){var l=a[o],h=s(l);if(h?n("attributes.className",l):""!==l.className)for(var c=0,d=i;c<d.length;c++){var p=d[c];if(h){var u=n("attributes.className",l).split(" "),g=u.indexOf(p);-1!==g&&u.splice(g,1),r("attributes.className",u.join(" "),l)}else l.classList.remove(p)}}return t}function M(t){var e=[];return"string"==typeof t?e.push(t):e=t,e}function C(t){var e=t;return""===e.style.visibility&&e.offsetWidth>0}function N(t,e,i){for(var n=document.createDocumentFragment(),r=0,o=t;r<o.length;r++){var s=o[r];n.appendChild(s)}return e.insertBefore(n,e.firstElementChild),i&&D(e),t}function E(t,e,i){var n=document.createDocumentFragment();if(t instanceof NodeList)for(;t.length>0;)n.appendChild(t[0]);else for(var r=0,o=t;r<o.length;r++){var s=o[r];n.appendChild(s)}return e.appendChild(n),i&&D(e),t}function D(t){t.querySelectorAll("script").forEach(function(t){var e=document.createElement("script");e.text=t.innerHTML,document.head.appendChild(e),T(e)})}function T(t){var e=t.parentNode;if(e)return e.removeChild(t)}function O(t){var e=t.parentNode;Ep.clearEvents(t),e.removeChild(t)}function L(t,e){for(var i=t,n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];if(s(i)){var a=o;"tabindex"===o&&(a="tabIndex"),i.attributes[""+a]=e[""+o]}else i.setAttribute(o,e[""+o])}return i}function A(t,e,i){return void 0===e&&(e=document),t=k(t),e.querySelector(t)}function z(t,e,i){void 0===e&&(e=document),t=k(t);return e.querySelectorAll(t)}function k(t){var e=/(!|"|\$|%|&|'|\(|\)|\*|\/|:|;|<|=|\?|@|\]|\^|`|{|}|\||\+|~)/g;if(t.match(/#[0-9]/g)||t.match(e)){for(var i=t.split(","),n=0;n<i.length;n++){for(var r=i[parseInt(n.toString(),10)].split(" "),o=0;o<r.length;o++)if(r[parseInt(o.toString(),10)].indexOf("#")>-1&&!r[parseInt(o.toString(),10)].match(/\[.*\]/)){var s=r[parseInt(o.toString(),10)].split("#");if(s[1].match(/^\d/)||s[1].match(e)){var a=r[parseInt(o.toString(),10)].split(".");a[0]=a[0].replace(/#/,"[id='")+"']",r[parseInt(o.toString(),10)]=a.join(".")}}i[parseInt(n.toString(),10)]=r.join(" ")}return i.join(",")}return t}function j(t,e){var i=t;if("function"==typeof i.closest)return i.closest(e);for(;i&&1===i.nodeType;){if(B(i,e))return i;i=i.parentNode}return null}function P(t,e){void 0!==e&&Object.keys(e).forEach(function(i){t.style[i]=e[i]})}function R(t,e,i){I([t],e),x([t],i)}function B(t,e){var i=t.matches||t.msMatchesSelector||t.webkitMatchesSelector;return i?i.call(t,e):-1!==[].indexOf.call(document.querySelectorAll(e),t)}function H(t,e){var i,n,r="string"==typeof t?document.getElementById(t):t;for(n=0;n<r.ej2_instances.length;n++)if(i=r.ej2_instances[parseInt(n.toString(),10)],"string"==typeof e){if(e===i.getModuleName())return i}else if(i instanceof e)return i}function U(t,i,n,r){return t.properties.hasOwnProperty(i)&&t.properties[i]instanceof r||(t.properties[""+i]=e(r,[t,i,n])),t.properties[""+i]}function V(t,i,n,r,o,s){for(var a=[],l=n?n.length:0,h=0;h<l;h++){var c=r;if(s&&(c=r(n[parseInt(h.toString(),10)],t)),o){var d=e(c,[t,i,{},!0]);d.setProperties(n[parseInt(h.toString(),10)],!0),a.push(d)}else a.push(e(c,[t,i,n[parseInt(h.toString(),10)],!1]))}return a}function _(t,e){return function(){return this.properties.hasOwnProperty(e)||(this.properties[""+e]=t),this.properties[""+e]}}function F(t,e,i){return function(){var n=this;if(!this.properties.hasOwnProperty(e)){var r=V(this,e,t,i,!1);this.properties[""+e]=r}var o=void 0!==this.controlParent&&this.controlParent.ignoreCollectionWatch||this.ignoreCollectionWatch;return this.properties[e].hasOwnProperty("push")||o||["push","pop"].forEach(function(t){var i={value:function(t,e,i,n){return function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];var o=this.propName?this.getParentKey()+"."+e+"-":e+"-";switch(t){case"push":for(var s=0;s<i.length;s++){Array.prototype[""+t].apply(n,[i[parseInt(s.toString(),10)]]);var a=Y(o+(n.length-1),i[parseInt(s.toString(),10)],!this.controlParent,t);this.serverDataBind(a,i[parseInt(s.toString(),10)],!1,t)}break;case"pop":Array.prototype[""+t].apply(n);var l=Y(o+n.length,null,!this.controlParent,t);this.serverDataBind(l,{ejsAction:"pop"},!1,t)}return n}}(t,e,0,n.properties[""+e]).bind(n),configurable:!0};Object.defineProperty(n.properties[""+e],t,i)}),this.properties[e].hasOwnProperty("isComplexArray")||Object.defineProperty(this.properties[""+e],"isComplexArray",{value:!0}),this.properties[""+e]}}function Y(t,e,i,n){var r=t;if(i&&(r={},r[""+t]=e,e&&"object"==typeof e)){r[""+t].ejsAction=n}return r}function W(t){return function(e,i){var n={set:function(t,e){return function(i){if(this.properties[""+e]!==i){var n=this.properties.hasOwnProperty(e)?this.properties[e]:t;this.saveChanges(e,i,n),this.properties[""+e]=i}}}(t,i),get:_(t,i),enumerable:!0,configurable:!0};Object.defineProperty(e,i,n),K(e,i,"prop",t)}}function Q(t,e){return function(i,n){var r={set:function(t,e,i){return function(n){U(this,e,t,i).setProperties(n)}}(t,n,e),get:function(t,e,i){return function(){return U(this,e,t,i)}}(t,n,e),enumerable:!0,configurable:!0};Object.defineProperty(i,n,r),K(i,n,"complexProp",t,e)}}function X(t){return function(e,i){var n={set:function(t,e,i){return function(n){var r=i(n,this);U(this,e,t,r).setProperties(n)}}({},i,t),get:function(t,e,i){return function(){var n=i({});return this.properties.hasOwnProperty(e)?this.properties[""+e]:U(this,e,t,n)}}({},i,t),enumerable:!0,configurable:!0};Object.defineProperty(e,i,n),K(e,i,"complexProp",{},t)}}function q(t,e){return function(i,n){var r={set:function(t,e,i){return function(n){this.isComplexArraySetter=!0;var r=V(this,e,t,i,!1),o=V(this,e,n,i,!0);this.isComplexArraySetter=!1,this.saveChanges(e,o,r),this.properties[""+e]=o}}(t,n,e),get:F(t,n,e),enumerable:!0,configurable:!0};Object.defineProperty(i,n,r),K(i,n,"colProp",t,e)}}function G(t){return function(e,i){var n={set:function(t,e,i){return function(n){var r=this.properties.hasOwnProperty(e)?this.properties[e]:t,o=V(this,e,n,i,!0,!0);this.saveChanges(e,o,r),this.properties[""+e]=o}}([],i,t),get:function(t,e,i){return function(){var n=i({});if(!this.properties.hasOwnProperty(e)){var r=V(this,e,t,n,!1);this.properties[""+e]=r}return this.properties[""+e]}}([],i,t),enumerable:!0,configurable:!0};Object.defineProperty(e,i,n),K(e,i,"colProp",{},t)}}function Z(){return function(t,e){var i={set:function(t){var i=this.properties[""+e];if(i!==t){var n=tt(this,e);!1===c(i)&&n.context.removeEventListener(n.prefix,i),n.context.addEventListener(n.prefix,t),this.properties[""+e]=t}},get:_(void 0,e),enumerable:!0,configurable:!0};Object.defineProperty(t,e,i),K(t,e,"event")}}function $(t){}function K(t,e,i,n,r){c(t.propList)&&(t.propList={props:[],complexProps:[],colProps:[],events:[],propNames:[],complexPropNames:[],colPropNames:[],eventNames:[]}),t.propList[i+"s"].push({propertyName:e,defaultValue:n,type:r}),t.propList[i+"Names"].push(e)}function J(t){if(c(t.prototype.builderObject)){t.prototype.builderObject={properties:{},propCollections:[],add:function(){this.isPropertyArray=!0,this.propCollections.push(l({},this.properties,{}))}};for(var e=/complex/,i=0,n=Object.keys(t.prototype.propList);i<n.length;i++)for(var r=n[i],o=function(i){e.test(r)?t.prototype.builderObject[i.propertyName]=function(t){var e={};a(e,J(i.type)),t(e);var n;return n=e.isPropertyArray?e.propCollections:l({},e.properties,{}),this.properties[i.propertyName]=n,e.properties={},e.propCollections=[],e.isPropertyArray=!1,this}:t.prototype.builderObject[i.propertyName]=function(t){return this.properties[i.propertyName]=t,this}},s=0,h=t.prototype.propList[""+r];s<h.length;s++){o(h[s])}}return t.prototype.builderObject}function tt(t,e){if(!1===t.hasOwnProperty("parentObj"))return{context:t,prefix:e};var i=n("propName",t);return i&&(e=i+"-"+e),tt(n("parentObj",t),e)}function et(t,e,i){var n=function(t){return{selector:t&&t.selector?t.selector:null,ignore:t&&t.ignore?t.ignore:null,rippleFlag:t&&t.rippleFlag,isCenterRipple:t&&t.isCenterRipple,duration:t&&t.duration?t.duration:350}}(e);return!1===n.rippleFlag||void 0===n.rippleFlag&&!kp?function(){}:(t.setAttribute("data-ripple","true"),Ep.add(t,"mousedown",it,{parent:t,rippleOptions:n}),Ep.add(t,"mouseup",nt,{parent:t,rippleOptions:n,done:i}),Ep.add(t,"mouseleave",rt,{parent:t,rippleOptions:n}),Np.isPointer&&Ep.add(t,"transitionend",rt,{parent:t,rippleOptions:n}),function(){t.removeAttribute("data-ripple"),Ep.remove(t,"mousedown",it),Ep.remove(t,"mouseup",nt),Ep.remove(t,"mouseleave",rt),Ep.remove(t,"transitionend",rt)})}function it(t){var e=t.target,i=this.rippleOptions.selector,n=i?j(e,i):e;if(!(!n||this.rippleOptions&&j(e,this.rippleOptions.ignore))){var r=n.getBoundingClientRect(),o=t.pageX-document.body.scrollLeft,s=t.pageY-(!document.body.scrollTop&&document.documentElement?document.documentElement.scrollTop:document.body.scrollTop),a=Math.max(Math.abs(o-r.left),Math.abs(o-r.right)),l=Math.max(Math.abs(s-r.top),Math.abs(s-r.bottom)),h=Math.sqrt(a*a+l*l),c=2*h+"px",d=o-r.left-h,p=s-r.top-h;this.rippleOptions&&this.rippleOptions.isCenterRipple&&(d=0,p=0,c="100%"),n.classList.add("e-ripple");var u=w("div",{className:"e-ripple-element",styles:"width: "+c+";height: "+c+";left: "+d+"px;top: "+p+"px;transition-duration: "+this.rippleOptions.duration.toString()+"ms;"});n.appendChild(u),window.getComputedStyle(u).getPropertyValue("opacity"),u.style.transform="scale(1)",n!==this.parent&&Ep.add(n,"mouseleave",rt,{parent:this.parent,rippleOptions:this.rippleOptions})}}function nt(t){ot(t,this)}function rt(t){ot(t,this)}function ot(t,e){var i=e.rippleOptions.duration,n=t.target,r=e.rippleOptions.selector,o=r?j(n,r):n;if(o&&(!o||-1!==o.className.indexOf("e-ripple"))){var s=z(".e-ripple-element",o),a=s[s.length-1];a&&(a.style.opacity="0.5"),e.parent!==o&&Ep.remove(o,"mouseleave",rt),setTimeout(function(){a&&a.parentNode&&a.parentNode.removeChild(a),o.getElementsByClassName("e-ripple-element").length||o.classList.remove("e-ripple"),e.done&&e.done(t)},i)}}function st(t){for(var e="",i=0,n=t;i<n.length;i++){var r=n[i];e+=String.fromCharCode(r)}return e}function at(t){Vp=new Up(t)}function lt(t,e,i){var n='var str="'+function(t,e,i,n){var r=0,o=[],s=t.match(/class="([^"]+|)\s{2}/g),a="";s&&s.forEach(function(e){a=e.replace(/\s\s+/g," "),t=t.replace(e,a)});return t.replace(bu,"").replace(Tu,"'$1'").replace(Lu,function(t,s,a,l){var h=s.match(Nu);if(h){var c=h[1];if(Iu.test(s))s='";} '+s.replace(h[1],c.replace(Du,function(t){return t=t.trim(),ht(t,!Su.test(t)&&-1===o.indexOf(t),e,o,n)}))+'{ \n str = str + "';else if(wu.test(s))s='"; '+s.replace(h[1],c.replace(Ou,function(t){return pt(t,e,o,n)}))+'{ \n str = str + "';else if(Mu.test(s)){var d=h[1].split(" of ");s='"; '+s.replace(h[1],function(t){return o.push(d[0]),o.push(d[0]+"Index"),"var i"+(r+=1)+"=0; i"+r+" < "+ht(d[1],!0,e,o,n)+".length; i"+r+"++"})+"{ \n "+d[0]+"= "+ht(d[1],!0,e,o,n)+"[i"+r+"]; \n var "+d[0]+"Index=i"+r+'; \n str = str + "'}else{var p=s.split("("),u=i&&i.hasOwnProperty(p[0])?"this.":"global";u=/\./.test(p[0])?"":u;var g=h[1].split(",");0===h[1].length||/data/.test(g[0])||/window./.test(g[0])||(h[1]="global"===u?e+"."+h[1]:h[1]);if(Pu.test(s)&&/\]\./gm.test(s)||/@|\$|#/gm.test(s)){/@|\$|#|\]\./gm.test(s)&&(s='"+ '+("global"===u?"":u)+s.replace(h[1],c.replace(ju,function(t){return pt(t,e,o,n)}))+'+ "')}else s='" + '+("global"===u?"":u)+s.replace(c,ht(h[1].replace(/,( |)data.|,/gi,","+e+".").replace(/,( |)data.window/gi,",window"),"global"!==u,e,o,n))+'+"'}}else xu.test(s)?s='"; '+s.replace(xu,'} else { \n str = str + "'):s.match(Cu)?s=s.replace(Cu,'"; \n } \n str = str + "'):/@|#|\$/gm.test(s)?(s.match(zu)&&(s=dt(s)),s='"+'+ct(s,-1===o.indexOf(s),e,o)+'"]+"'):s=s.match(zu)?'"+'+ct(s=dt(s),-1===o.indexOf(s),e,o)+'"]+"':""!==s?'"+'+ht(s.replace(/,/gi,"+"+e+"."),-1===o.indexOf(s),e,o,n)+'+"':" ";return s})}(t,"data",e,i)+"\";var valueRegEx = (/value=\\'([A-Za-z0-9 _]*)((.)([\\w)(!-;?-■\\s]+)['])/g);\n    var hrefRegex = (/(?:href)([\\s='\"./]+)([\\w-./?=&\\\\#\"]+)((.)([\\w)(!-;/?-■\\s]+)['])/g);\n    if(str.match(valueRegEx)){\n        var check = str.match(valueRegEx);\n        var str1 = str;\n        for (var i=0; i < check.length; i++) {\n            var check1 = str.match(valueRegEx)[i].split('value=')[1];\n            var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '\"') : check1;\n            change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'\"') : change;\n            str1 = str1.replace(check1, change);\n        }\n        str = str.replace(str, str1);\n    }\n    else if (str.match(/(?:href='')/) === null) {\n        if(str.match(hrefRegex)) {\n            var check = str.match(hrefRegex);\n            var str1 = str;\n            for (var i=0; i < check.length; i++) {\n                var check1 = str.match(hrefRegex)[i].split('href=')[1];\n                if (check1) {\n                    var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '\"') : check1;\n                    change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'\"') : change;\n                    str1 = str1.replace(check1, change);\n                }\n            }\n            str = str.replace(str, str1);\n        }\n    }\n     return str;";return new Function("data",n).bind(e)}function ht(t,e,i,n,r){return!e||Eu.test(t)||-1!==n.indexOf(t.split(".")[0])||r?t:i+"."+t}function ct(t,e,i,n){return e&&!Eu.test(t)&&-1===n.indexOf(t.split(".")[0])?i+'["'+t:t}function dt(t){return t=t.match(ku)?t:t.replace(zu,"\\\\")}function pt(t,e,i,n){t=t.trim();if(/\window\./gm.test(t))return t;var r=/'|"/gm;return/@|\$|#/gm.test(t)&&(t=ct(t,-1===i.indexOf(t),e,i)+'"]'),Au.test(t)?function(t,e,i,n){return!e||Eu.test(t)||-1!==n.indexOf(t.split(".")[0])||/^\..*/gm.test(t)?t:i+"."+t}(t,!r.test(t)&&-1===i.indexOf(t),e,i):ht(t,!r.test(t)&&-1===i.indexOf(t),e,i,n)}function ut(){return"-"+Math.random().toString(36).substr(2,5)}function gt(t,e,i){var n=Uu.compile(t,e,i);return function(t,e,i,r,o,s,a,l){var c=n(t,e,i,a,l),d="BlazorTemplateId";if(f()&&!o){var p=r+ut();if(Hu[""+r]||(Hu[""+r]=[]),h(s))t[""+d]=p,Hu[""+r].push(t);else for(var u=0,g=Object.keys(Hu[""+r][parseInt(s.toString(),10)]);u<g.length;u++){var m=g[u];m!==d&&t[""+m]&&(Hu[""+r][parseInt(s.toString(),10)][""+m]=t[""+m]),m===d&&(p=Hu[""+r][parseInt(s.toString(),10)][""+m])}return"rowTemplate"===i?[w("tr",{id:p,className:"e-blazor-template"})]:[w("div",{id:p,className:"e-blazor-template"})]}if("string"==typeof c){if(Bu.test(c)){return w("svg",{innerHTML:c}).childNodes}return w(Ru.test(c)?"table":"div",{innerHTML:c}).childNodes}return c}}function mt(t,e,i,n,r){if(f()){window.sfBlazor.updateTemplate(e,Hu[""+t],t,i,r),!1!==n&&(Hu[""+t]=[])}}function ft(t,e,i){var n=document.getElementById(t);if(n)for(var r=n.getElementsByClassName("blazor-inner-template"),o=0;o<r.length;o++){var s=" ";s=h(i)?r[parseInt(o.toString(),10)].getAttribute("data-templateId"):r[parseInt(i.toString(),10)].getAttribute("data-templateId");var a=document.getElementById(s);if(a)for(var l=a.childNodes.length,c=0;c<l;c++)h(i)?r[parseInt(o.toString(),10)].appendChild(a.childNodes[0]):(r[parseInt(i.toString(),10)].appendChild(a.childNodes[0]),o=r.length)}}function vt(t){Uu.compile=t.compile}function yt(){return Uu.compile}function bt(t){var e,i=[],n=St(t);if(n.length>0)for(var r=0;r<n.length;r++){var o=n[parseInt(r.toString(),10)],s="";switch((s=o[0]).toLowerCase()){case"m":for(e=1;e<o.length;e++)i.push({command:s,x:o[parseInt(e.toString(),10)],y:o[e+1]}),e+=1,"m"===s?s="l":"M"===s&&(s="L");break;case"l":case"t":for(e=1;e<o.length;e++)i.push({command:s,x:o[parseInt(e.toString(),10)],y:o[e+1]}),e+=1;break;case"h":for(e=1;e<o.length;e++)i.push({command:s,x:o[parseInt(e.toString(),10)]});break;case"v":for(e=1;e<o.length;e++)i.push({command:s,y:o[parseInt(e.toString(),10)]});break;case"z":i.push({command:s});break;case"c":for(e=1;e<o.length;e++)i.push({command:s,x1:o[parseInt(e.toString(),10)],y1:o[e+1],x2:o[e+2],y2:o[e+3],x:o[e+4],y:o[e+5]}),e+=5;break;case"s":for(e=1;e<o.length;e++)i.push({command:s,x2:o[parseInt(e.toString(),10)],y2:o[e+1],x:o[e+2],y:o[e+3]}),e+=3;break;case"q":for(e=1;e<o.length;e++)i.push({command:s,x1:o[parseInt(e.toString(),10)],y1:o[e+1],x:o[e+2],y:o[e+3]}),e+=3;break;case"a":for(e=1;e<o.length;e++)i.push({command:s,r1:o[parseInt(e.toString(),10)],r2:o[e+1],angle:o[e+2],largeArc:o[e+3],sweep:o[e+4],x:o[e+5],y:o[e+6]}),e+=6}}return i}function St(t){var e=/([a-z]+)|([+-]?(?:\d+\.?\d*|\.\d+))/gi,i=[],n=[],r={};e.lastIndex=0;var o=!1;for(r=e.exec(t);r;)"e"===r[1]?o=!0:r[1]?("zm"===r[1].toLowerCase()?(i.length&&n.push(i),n.push(["Z"]),i=[r[1].substring(1,2)]):(i.length&&n.push(i),i=[r[1]]),o=!1):(i.length||(i=[]),o||i.push(Number(r[2])),o=!1),r=e.exec(t);return i.length&&n.push(i),n}function wt(t,e,i){var n,r,o="",s=[{x:0+t,y:0},{x:0+i-t,y:0},{x:0+i,y:0+t},{x:0+i,y:0+e-t},{x:0+i-t,y:0+e},{x:0+t,y:0+e},{x:0,y:0+e-t},{x:0,y:0+t}],a=[{x:0+i,y:0},{x:0+i,y:0+e},{x:0,y:0+e},{x:0,y:0}],l=0;o="M"+s[0].x+" "+s[0].y;var h;for(h=0;h<s.length;h+=2)o+="L"+(n=s[h+1]).x+" "+n.y,r=s[h+2]||s[0],o+="Q"+a[parseInt(l.toString(),10)].x+" "+a[parseInt(l.toString(),10)].y+" "+r.x+" "+r.y,l++;return o}function It(t){var e,i="";i="M"+t[0].x+" "+t[0].y;var n;for(n=1;n<t.length;n++)i+="L"+(e=t[parseInt(n.toString(),10)]).x+" "+e.y;return i+="Z"}function xt(t){var e;for(e=0;e<t.length;e++)t[parseInt(e.toString(),10)].x=Math.round(t[parseInt(e.toString(),10)].x),t[parseInt(e.toString(),10)].y=Math.round(t[parseInt(e.toString(),10)].y);var i,n="";n="M"+t[0].x+" "+t[0].y;var r;for(r=1;r<t.length;r++)n+="L"+(i=t[parseInt(r.toString(),10)]).x+" "+i.y;return n}function Mt(t){var e,i,n,r,o,s,a,l,h,c,d=[];for(a=0,l=0,c=0,h=t.length;c<h;++c){var p=t[c],u="";u=p.command,"y1"in p&&(r=p.y1),"y2"in p&&(s=p.y2),"x1"in p&&(n=p.x1),"x2"in p&&(o=p.x2),"x"in p&&(a=p.x),"y"in p&&(l=p.y);var g=d[d.length-1];switch(u){case"M":d.push({command:"M",x:a,y:l});break;case"L":d.push({command:"L",x0:e,y0:i,x:a,y:l});break;case"H":d.push({command:"L",x0:e,y0:i,x:a,y:i});break;case"V":d.push({command:"L",x0:e,y0:i,x:e,y:l});break;case"C":d.push({command:"C",x0:e,y0:i,x1:n,y1:r,x2:o,y2:s,x:a,y:l});break;case"S":if(g){var m=void 0,f={x:2*e-(m="C"===g.command||"S"===g.command?{x:g.x2,y:g.y2}:{x:e,y:i}).x,y:2*i-m.y};d.push({command:"C",x0:e,y0:i,x1:f.x,y1:f.y,x2:o,y2:s,x:a,y:l})}break;case"Q":d.push({command:"Q",x0:e,y0:i,x1:n,y1:r,x:a,y:l});break;case"T":if(g){m=void 0,f={x:2*e-(m="Q"===g.command?{x:g.x1,y:g.y1}:{x:e,y:i}).x,y:2*i-m.y};d.push({command:"Q",x0:e,y0:i,x1:f.x,y1:f.y,x:a,y:l})}break;case"A":var v=p;v.command="A",d.push(v);break;case"Z":case"z":d.push({command:"Z"}),a=e,l=i}e=a,i=l}return d}function Ct(t,e,i,n,r,o,s,a){var l,h,c,d,p,u,g,m,f;for(p=0,u=0,m=0,g=t.length;m<g;++m){var v=t[m],y=v.command;"x"in v&&(p=v.x),"y"in v&&(u=v.y),"y1"in v&&(h=v.y1),"y2"in v&&(d=v.y2),"x1"in v&&(l=v.x1),"x2"in v&&(c=v.x2),n?(void 0!==p&&(p=Et(p,e,r,s)),void 0!==u&&(u=Et(u,i,o,a)),void 0!==l&&(l=Et(l,e,r,s)),void 0!==h&&(h=Et(h,i,o,a)),void 0!==c&&(c=Et(c,e,r,s)),void 0!==d&&(d=Et(d,i,o,a))):(void 0!==p&&(p=Number((p+e).toFixed(2))),void 0!==u&&(u=Number((u+i).toFixed(2))),void 0!==l&&(l=Number((l+e).toFixed(2))),void 0!==h&&(h=Number((h+i).toFixed(2))),void 0!==c&&(c=Number((c+e).toFixed(2))),void 0!==d&&(d=Number((d+i).toFixed(2))));(f=Nt(v,y,{x:p,y:u,x1:l,y1:h,x2:c,y2:d,r1:v.r1,r2:v.r2},n,e,i))&&(t[m]=f)}return Tt(t)}function Nt(t,e,i,n,r,o){switch(e){case"M":case"L":t.x=i.x,t.y=i.y;break;case"H":t.x=i.x;break;case"V":t.y=i.y;break;case"C":t.x=i.x,t.y=i.y,t.x1=i.x1,t.y1=i.y1,t.x2=i.x2,t.y2=i.y2;break;case"S":t.x=i.x,t.y=i.y,t.x2=i.x2,t.y2=i.y2;break;case"Q":t.x=i.x,t.y=i.y,t.x1=i.x1,t.y1=i.y1;break;case"T":t.x=i.x,t.y=i.y;break;case"A":var s=i.r1,a=i.r2;n&&(i.r1=s*=r,i.r2=a*=o),t.x=i.x,t.y=i.y,t.r1=i.r1,t.r2=i.r2;break;case"z":case"Z":t={command:"Z"}}return t}function Et(t,e,i,n){return t!==i?t=n!==i?t*e-(Number(i)*e-Number(i))+(n-Number(i)):Number(t)*e-(Number(i)*e-Number(i)):n!==i&&(t=n),Number(t.toFixed(2))}function Dt(t){var e,i,n,r,o,s,a,l,h,c;for(a=0,l=0,c=0,h=t.length;c<h;++c){var d=t[parseInt(c.toString(),10)],p=d.command;if(/[MLHVCSQTA]/.test(p))"x"in d&&(d.x=a=d.x),"y"in d&&(d.y=l=d.y);else{"x1"in d&&(d.x1=n=a+d.x1),"x2"in d&&(d.x2=o=a+d.x2),"y1"in d&&(d.y1=r=l+d.y1),"y2"in d&&(d.y2=s=l+d.y2),"x"in d&&(d.x=a+=d.x),"y"in d&&(d.y=l+=d.y);var u=void 0;switch(p){case"m":case"M":u={command:"M",x:a,y:l};break;case"l":case"L":u={command:"L",x:a,y:l};break;case"h":case"H":u={command:"H",x:a};break;case"v":case"V":u={command:"V",y:l};break;case"c":case"C":u={command:"C",x:a,y:l,x1:n,y1:r,x2:o,y2:s};break;case"s":case"S":u={command:"S",x:a,y:l,x2:o,y2:s};break;case"q":case"Q":u={command:"Q",x:a,y:l,x1:n,y1:r};break;case"t":case"T":u={command:"T",x:a,y:l};break;case"a":case"A":(u={command:"A",x:a,y:l}).r1=d.r1,u.r2=d.r2,u.angle=d.angle,u.largeArc=d.largeArc,u.sweep=d.sweep;break;case"z":case"Z":u={command:"Z"},a=e,l=i,u=t[parseInt(c.toString(),10)]}u&&(t[parseInt(c.toString(),10)]=u)}"M"!==p&&"m"!==p||(e=a,i=l)}return t}function Tt(t){var e,i="";for(e=0;e<t.length;e++)i+=0===e?Ot(t[parseInt(e.toString(),10)]):" "+Ot(t[parseInt(e.toString(),10)]);return i}function Ot(t){var e="";switch(t.command){case"Z":case"z":e=t.command;break;case"M":case"m":case"L":case"l":e=t.command+" "+t.x+" "+t.y;break;case"C":case"c":e=t.command+" "+t.x1+" "+t.y1+" "+t.x2+" "+t.y2+" "+t.x+" "+t.y;break;case"Q":case"q":e=t.command+" "+t.x1+" "+t.y1+" "+t.x+" "+t.y;break;case"A":case"a":var i=t.command,n=t.angle,r=t.largeArc?"1":"0",o=t.sweep?"1":"0";e=i+" "+t.r1+" "+t.r2+" "+n+" "+r+" "+o+" "+t.x+" "+t.y;break;case"H":case"h":e=t.command+" "+t.x;break;case"V":case"v":e=t.command+" "+t.y;break;case"S":case"s":e=t.command+" "+t.x2+" "+t.y2+" "+t.x+" "+t.y;break;case"T":case"t":e=t.command+" "+t.x+" "+t.y}return e}function Lt(){return new Ku(1,0,0,1,0,0,Jp.Identity)}function At(t,e){var i=function(t,e,i){switch(t.type){case Jp.Identity:break;case Jp.Translation:e+=t.offsetX,i+=t.offsetY;break;case Jp.Scaling:e*=t.m11,i*=t.m22;break;case Jp.Translation|Jp.Scaling:e*=t.m11,e+=t.offsetX,i*=t.m22,i+=t.offsetY;break;default:var n=i*t.m21+t.offsetX,r=e*t.m12+t.offsetY;e*=t.m11,e+=n,i*=t.m22,i+=r}return{x:e,y:i}}(t,e.x,e.y);return{x:Math.round(100*i.x)/100,y:Math.round(100*i.y)/100}}function zt(t,e){for(var i=[],n=0,r=e;n<r.length;n++){var o=r[n];i.push(At(t,o))}return i}function kt(t,e,i,n){Rt(t,function(t,e,i){var n=Lt(),r=Math.sin(t),o=Math.cos(t),s=e*(1-o)+i*r,a=i*(1-o)-e*r;return n.type=Jp.Unknown,Bt(n,o,r,-r,o,s,a),n}(.017453292519943295*(e%=360),i||0,n||0))}function jt(t,e,i,n,r){void 0===n&&(n=0),void 0===r&&(r=0),Rt(t,function(t,e,i,n){var r=Lt();return r.type=i||n?Jp.Scaling|Jp.Translation:Jp.Scaling,Bt(r,t,0,0,e,i-t*i,n-e*n),r}(e,i,n,r))}function Pt(t,e,i){return t.type&Jp.Identity?(t.type=Jp.Translation,void Bt(t,1,0,0,1,e,i)):t.type&Jp.Unknown?(t.offsetX+=e,void(t.offsetY+=i)):(t.offsetX+=e,t.offsetY+=i,void(t.type|=Jp.Translation))}function Rt(t,e){var i=t.type,n=e.type;if(n!==Jp.Identity){if(i===Jp.Identity)return Ht(t,e),void(t.type=e.type);if(n===Jp.Translation)return t.offsetX+=e.offsetX,t.offsetY+=e.offsetY,void(i!==Jp.Unknown&&(t.type|=Jp.Translation));if(i!==Jp.Translation){var r=i<<4|n;switch(r){case 34:return t.m11*=e.m11,void(t.m22*=e.m22);case 35:return t.m11*=e.m11,t.m22*=e.m22,t.offsetX=e.offsetX,t.offsetY=e.offsetY,void(t.type=Jp.Translation|Jp.Scaling);case 36:break;default:switch(r){case 50:return t.m11*=e.m11,t.m22*=e.m22,t.offsetX*=e.m11,void(t.offsetY*=e.m22);case 51:return t.m11*=e.m11,t.m22*=e.m22,t.offsetX=e.m11*t.offsetX+e.offsetX,void(t.offsetY=e.m22*t.offsetY+e.offsetY);case 52:break;default:switch(r){case 66:case 67:case 68:break;default:return}}}var o=Lt();return Bt(o,t.m11*e.m11+t.m12*e.m21,t.m11*e.m12+t.m12*e.m22,t.m21*e.m11+t.m22*e.m21,t.m21*e.m12+t.m22*e.m22,t.offsetX*e.m11+t.offsetY*e.m21+e.offsetX,t.offsetX*e.m12+t.offsetY*e.m22+e.offsetY),o.m21||o.m12?o.type=Jp.Unknown:((o.m11&&1!==o.m11||o.m22&&1!==o.m22)&&(o.type=Jp.Scaling),(o.offsetX||o.offsetY)&&(o.type|=Jp.Translation),(o.type&(Jp.Translation|Jp.Scaling))===Jp.Identity&&(o.type=Jp.Identity),o.type=Jp.Scaling|Jp.Translation),Ht(t,o),void(t.type=o.type)}var s=t.offsetX,a=t.offsetY;t.offsetX=s*e.m11+a*e.m21+e.offsetX,t.offsetY=s*e.m12+a*e.m22+e.offsetY,n!==Jp.Unknown?t.type=Jp.Translation|Jp.Scaling:t.type=Jp.Unknown}}function Bt(t,e,i,n,r,o,s){t.m11=e,t.m12=i,t.m21=n,t.m22=r,t.offsetX=o,t.offsetY=s}function Ht(t,e){t.m11=e.m11,t.m12=e.m12,t.m21=e.m21,t.m22=e.m22,t.offsetX=e.offsetX,t.offsetY=e.offsetY,t.type=e.type}function Ut(t){return im[t.toString()]}function Vt(t){return bm[t.toString()]}function _t(t,e){return"Custom"===t?e.pathData:Sm[""+t]}function Ft(t){return wm[""+t]}function Yt(t){return Im[""+t]}function Wt(t){var e;switch(t.shape){case"Minus":e="M0,50 L100,50";break;case"Plus":e="M0,-50 L0,50 M-50,0 L50,0";break;case"ArrowUp":e="M0,100 L50,0 L100,100 Z";break;case"ArrowDown":e="M0,0 L50,100 L100,0 Z";break;case"Path":e=t.pathData}return e}function Qt(t){return xm[t.toString()]}function Xt(t,e,i){var n=function(t,e,i,n,r){var o,s,a=t.sourceWrapper,l=t.targetWrapper,h=t.sourcePortWrapper,c=t.targetPortWrapper,d=[],p=ue(t),u={corners:void 0,point:e,direction:void 0,margin:{left:5,right:5,bottom:5,top:5}},g={corners:void 0,point:i,direction:void 0,margin:{left:5,right:5,bottom:5,top:5}};void 0!==a&&void 0!==l&&(o=ga(a),s=ga(l),u.corners=a.corners,g.corners=l.corners);if(void 0!==h){var m={x:h.offsetX,y:h.offsetY};u.direction=Ae(m,o,a.bounds,!1)}if(void 0!==c){var f={x:c.offsetX,y:c.offsetY};g.direction=Ae(f,s,l.bounds,!1)}if("Bezier"===t.type&&!t.isBezierEditing&&t.segments.length>0)for(var v=t.segments.length-1;v>=0;){var y=t.segments[parseInt(v.toString(),10)];y.isInternalSegment&&t.segments.pop(),v--}if(void 0!==a&&void 0!==l)return void 0!==u.direction&&void 0!==g.direction||(n?function(t,e,i){"LeftToRight"===i?(t.direction=t.direction?t.direction:"Right",e.direction=e.direction?e.direction:"Left"):"RightToLeft"===i?(t.direction=t.direction?t.direction:"Left",e.direction=e.direction?e.direction:"Right"):"TopToBottom"===i?(t.direction=t.direction?t.direction:"Bottom",e.direction=e.direction?e.direction:"Top"):"BottomToTop"===i&&(t.direction=t.direction?t.direction:"Top",e.direction=e.direction?e.direction:"Bottom")}(u,g,n):u.corners.top>g.corners.bottom&&Math.abs(u.corners.top-g.corners.bottom)>p?(u.direction=u.direction?u.direction:"Top",g.direction=g.direction?g.direction:"Bottom"):u.corners.bottom<g.corners.top&&Math.abs(u.corners.bottom-g.corners.top)>p?(u.direction=u.direction?u.direction:"Bottom",g.direction=g.direction?g.direction:"Top"):u.corners.right<g.corners.left&&Math.abs(u.corners.right-g.corners.left)>p||u.corners.right+p<g.corners.left||g.corners.right>=u.corners.left-p&&u.corners.left>g.corners.left?(u.direction=u.direction?u.direction:"Right",g.direction=g.direction?g.direction:"Left"):u.corners.left>g.corners.right&&Math.abs(u.corners.left-g.corners.right)>u.margin.left+u.margin.right||g.corners.right+p<u.corners.left||u.corners.right>=g.corners.left-p&&u.corners.left<g.corners.left?(u.direction=u.direction?u.direction:"Left",g.direction=g.direction?g.direction:"Right"):a.id!==l.id&&!o.equals(o,s)&&s.containsPoint(o.topCenter,u.margin.top)?(u.direction=u.direction?u.direction:"Bottom",g.direction=g.direction?g.direction:"Top"):(u.direction=u.direction?u.direction:"Top",g.direction=g.direction?g.direction:"Bottom")),function(t,e,i,n,r,o){var s,a=t.sourceWrapper,l=t.targetWrapper,h=t.sourcePortWrapper,c=t.targetPortWrapper,d=[],p=a.corners,u=l.corners,g=(u.center,{corners:p,point:n,direction:e,margin:{left:5,right:5,bottom:5,top:5}}),m={corners:u,point:r,direction:i,margin:{left:5,right:5,bottom:5,top:5}},f=ne(a,p,t.sourceWrapper.bounds),v=ne(l,u,t.targetWrapper.bounds),y=!1;t.sourceWrapper&&t.targetWrapper&&(y=function(t,e,i){for(var n=ie(t,i.sourcePadding),r=ie(e,i.targetPadding),o=0;o<n.length-1;o++)for(var s=n[parseInt(o.toString(),10)],a=0;a<r.length-1;a++){var l=r[parseInt(a.toString(),10)];if(To(s,l).enabled)return!0}return!1}(t.sourceWrapper,t.targetWrapper,t));if(void 0!==h){switch(g.point={x:h.offsetX,y:h.offsetY},g.direction){case"Bottom":case"Top":g.point.y=g.point.y;break;case"Left":case"Right":g.point.x=g.point.x}t.sourcePadding&&!y&&(c&&(m.point={x:c.offsetX,y:c.offsetY}),g.point=ee(t,g,m,!1))}else"Orthogonal"===t.type||"Bezier"===t.type?(t.segments&&t.segments.length>0&&t.segments[0].direction&&(g.direction=t.segments[0].direction),g.point=me(f,g.direction),s=me(f,ke(g.direction)),g.point=ve(t,a,g.point,s,!1)):g.point=a.corners.center;if(void 0!==c){switch(m.point={x:c.offsetX,y:c.offsetY},m.direction){case"Bottom":case"Top":m.point.y=m.point.y;break;case"Left":case"Right":m.point.x=m.point.x}t.targetPadding&&!y&&(m.point=ee(t,g,m,!0))}else"Orthogonal"===t.type||"Bezier"===t.type?(m.point=me(v,m.direction),s=me(v,ke(m.direction)),m.point=ve(t,l,m.point,s,!0)):m.point=l.corners.center;if("Orthogonal"!==t.type){var b=void 0,S=void 0;if("Bezier"===t.type){if(t.bezierSettings.allowSegmentsReset||0===t.segments.length||!Gu.isEmptyPoint(t.segments[t.segments.length-1].point))return d=pe(t,g,m,void 0,o),d=re(t,g,m);se(t)}else se(t);if(void 0===t.sourcePortWrapper){g.point=g.corners.center,t.segments&&t.segments.length>0&&(S=t.segments[0],b=Gu.isEmptyPoint(S.point)?void 0:S);var w=void 0!==b?b.point:m.point;if("Bezier"===t.type&&t.segments.length>0&&t.segments[0].vector1.angle&&t.segments[0].vector1.distance){var I=Math.max(g.corners.width,g.corners.height);w=Gu.transform(g.point,t.segments[0].vector1.angle,I/2)}g.point=y?t.sourceWrapper.bounds.center:ve(t,a,g.point,w,!1)}if(void 0===t.targetPortWrapper){m.point=m.corners.center,t.segments&&t.segments.length>1&&(S=t.segments[t.segments.length-2],b=Gu.isEmptyPoint(S.point)?void 0:S);var x=b?b.point:g.point;if("Bezier"===t.type&&t.segments.length>0&&t.segments[t.segments.length-1].vector2.angle&&t.segments[t.segments.length-1].vector2.distance){var I=Math.max(g.corners.width,g.corners.height);x=Gu.transform(m.point,t.segments[0].vector2.angle,I/2)}m.point=y?t.targetWrapper.bounds.center:ve(t,l,x,m.point,!0)}d=re(t,g,m)}else if("Orthogonal"===t.type&&t.segments&&t.segments.length>0&&null!==t.segments[0].direction)d=function(t,e,i,n,r,o,s){var a,l,h,c;se(t);for(var d=0;d<t.segments.length;d++){if(l=t.segments[parseInt(d.toString(),10)],n&&e.direction===ke(l.direction)&&(l.direction=e.direction),d>0&&t.segments[d-1].direction===l.direction)d=ae(t,d,e);else if(l.direction)e.point=qt(e,t.segments[parseInt(d.toString(),10)]);else{var p=t.segments[d-1];e.point=p.points[p.points.length-1]}if(d===t.segments.length-1)if(he(t,e),a=void 0===r?le(t,e,i):Kt(t,e,i),te(a,t,e),l.points=[],a.length>=2)for(h=0;h<a.length;h++)if(t.selectedSegmentIndex)if(h===a.length-1&&a.length>2&&t.segments.length>2){var u=void 0;u={x:a[parseInt(h.toString(),10)].x,y:e.point.y},l.points=[],l.points.push(a[parseInt(h.toString(),10)]),l.points.push(u);var p=t.segments[d-1];p.points[1]=l.points[1]}else l.points.push(a[parseInt(h.toString(),10)]);else l.points.push(a[parseInt(h.toString(),10)]);else c=d;if(void 0===c||t.selectedSegmentIndex||(c===t.segments.length-1&&(t.segments[c-1].direction=null,t.segments[c-1].length=null),t.segments.splice(c,1)),n&&0===d){var g=Jt(t,n,o);g&&(e.point=g)}}return ce(t,[])}(t,g,m,h,c,a);else{if(!t.segments[0]){var b=new wS(t,"segments",{type:"Orthogonal"},!0);t.segments.push(b)}t.segments[0].points=d=pe(t,g,m,void 0,o)}return d}(t,u.direction,g.direction,u.point,g.point,r);se(t),(t.sourceWrapper||t.targetWrapper)&&function(t,e,i){var n,r=t.sourcePortWrapper,o=t.targetPortWrapper,s=t.sourceWrapper,a=e.point,l={left:0,right:0,top:0,bottom:0},h={x:0,y:0},c="Top";s?(a=i.point,l=e.margin):(s=t.targetWrapper,l=i.margin);if("Orthogonal"===t.type)if(t.segments&&t.segments.length>0&&t.sourceWrapper&&t.segments[0].direction)e.direction=t.segments[0].direction,h=me(s.corners,e.direction),n=me(s.corners,ke(e.direction)),h=ve(t,s,h,n,!1);else{var d={corners:null,direction:null,point:a,margin:l},p={corners:null,direction:null,point:null,margin:null};de(s,d,p,t),h=p.point,c=p.direction}else{var u=void 0;t.segments&&t.segments.length>1&&(u=s===t.sourceWrapper?t.segments[0].point:t.segments[t.segments.length-2].point),h=ve(t,s,s.bounds.center,t.segments&&t.segments.length>1?u:a,s===t.targetWrapper)}s===t.sourceWrapper?(e.direction=e.direction||c,e.point=h,t.sourcePortWrapper&&(e.point={x:r.offsetX,y:r.offsetY},t.sourcePadding&&(e.point=ee(t,e,i,!1)))):(i.direction=i.direction||c,i.point=h,t.targetPortWrapper&&(i.point={x:o.offsetX,y:o.offsetY},t.targetPadding&&(i.point=ee(t,e,i,!0))))}(t,u,g);if("Straight"===t.type||"Bezier"===t.type)d=re(t,u,g);else if("Orthogonal"===t.type&&t.segments&&t.segments.length>0&&null!==t.segments[0].length&&null!==t.segments[0].direction)d=function(t,e,i,n,r,o,s){var a,l,h,c,d=[];se(t);var p;if(t.segments.length>0){for(var u=0;u<t.segments.length;u++){var g=t.segments[parseInt(u.toString(),10)];if(0===u&&void 0!==t.sourcePortWrapper&&(c={x:o.offsetX,y:o.offsetY},h=Ae(c,ga(n),n.bounds,!1),g.direction===ke(h)&&(g.direction=h)),u>0&&t.segments[u-1].direction===g.direction)u=ae(t,u,e);else{var m=t.segments[u-1];e.point=g.direction?qt(e,g):m.points[m.points.length-1]}if(u===t.segments.length-1&&(s||r?t.targetWrapper&&void 0===t.targetPortWrapper?(he(t,e),l=Zt(t,e,i)):l=Kt(t,e,i):l=Gt(t,e,i),l))if(te(l,t,e),g.points=[],l.length>=2)for(a=0;a<l.length;a++)g.points.push(l[parseInt(a.toString(),10)]);else p=u;if(o&&0===u){var f=Jt(t,o,n);f&&(e.point=f)}}void 0!==p&&(p===t.segments.length-1&&(t.segments[p-1].direction=null,t.segments[p-1].length=null),t.segments.splice(p,1)),d=ce(t,d)}return d}(t,u,g,a,l,h,c);else{var b=void 0;u.direction?b=Ie(a.bounds,u,20):u.direction=g.direction?void 0!==t.targetPortWrapper?g.direction:ke(g.direction):Gu.direction(u.point,g.point),t.segments[0].points=d=Me(t,u,g,b)}return d}(t,"Straight"!==t.type&&t.sourceWrapper?t.sourceWrapper.corners.center:function(t){var e;if(t.sourcePortWrapper){var i=t.sourcePortWrapper,n={x:i.offsetX,y:i.offsetY};e=n}else if(t.sourceID&&t.sourceWrapper)if(t.targetWrapper){var r=t.sourceWrapper.corners.center,o=t.targetWrapper.corners.center;e=ve(t,t.sourceWrapper,r,o,!1)}else e=t.sourcePoint;else e=t.sourcePoint;return e}(t),t.targetPoint,e,i);return ye(t,n[0],!1),ye(t,n[n.length-1],!0),n}function qt(t,e){t.direction=e.direction,e.points=[],e.points.push(t.point);var i="Left"===e.direction||"Top"===e.direction?-e.length:e.length,n="Left"===e.direction||"Right"===e.direction?0:90,r=fe(t.point,i,n);return e.points.push(r),r}function Gt(t,e,i){var n,r,o;if(e.corners=t.sourceWrapper?t.sourceWrapper.corners:void 0,t.sourcePortWrapper){o=Ae({x:t.sourcePortWrapper.offsetX,y:t.sourcePortWrapper.offsetY},ga(t.sourceWrapper),t.sourceWrapper.bounds,!1),!e.corners||"Bottom"!==e.direction&&"Top"!==e.direction?!e.corners||"Left"!==e.direction&&"Right"!==e.direction||i.point.y>e.corners.top&&i.point.y<e.corners.bottom&&(r=e.point.x>i.point.x?"Left":"Right"):i.point.x>e.corners.left&&i.point.x<e.corners.right&&(r=e.point.y>i.point.y?"Top":"Bottom")}if(t.sourcePortWrapper&&o===ke(r)){var s;("Left"===o||"Right"===o)&&e.point.y>=e.corners.top&&e.point.y<=e.corners.center.y&&i.point.y>=e.corners.top&&i.point.y<=e.corners.center.y?(e.direction="Top",s=e.point.y-e.corners.top+20):("Left"===o||"Right"===o)&&e.point.y>e.corners.center.y&&e.point.y<=e.corners.bottom&&i.point.y>e.corners.center.y&&i.point.y<=e.corners.bottom?(e.direction="Bottom",s=e.corners.bottom-e.point.y+20):("Top"===o||"Bottom"===o)&&e.point.x>=e.corners.left&&e.point.x<=e.corners.center.x&&i.point.x>=e.corners.left&&i.point.x<=e.corners.center.x?(e.direction="Left",s=e.point.x-e.corners.left+20):("Top"===o||"Bottom"===o)&&e.point.x<=e.corners.right&&e.point.x>e.corners.center.x&&i.point.x<=e.corners.right&&i.point.x<e.corners.center.x&&(e.direction="Right",s=e.corners.right-e.point.x+20),e.direction&&s&&(n=Me(t,e,i,s,!0))}else e.direction=r||oe(e.direction,e.point,i.point),n=xe(e,i);return n}function Zt(t,e,i){var n;i.corners=t.targetWrapper.corners,de(t.targetWrapper,e,i,t);var r=oe(i.direction,e.point,i.point);if(e.direction!==i.direction||"Left"!==e.direction&&"Right"!==e.direction)e.direction=r,n=xe(e,i);else{e.direction=r,n=Me(t,e,i,t.targetWrapper.width/2+20);e.point=n[1],de(t.targetWrapper,e,i,t),n=Me(t,e,i)}return n}function $t(t,e,i){i.corners=t.targetWrapper.corners;var n,r;"Left"!==e.direction&&"Right"!==e.direction?i.corners.center.y!==e.point.y||i.corners.left<=e.point.x&&e.point.x<=i.corners.right?i.corners.center.y===e.point.y&&"Bottom"===t.segments[t.segments.length-2].direction||i.corners.center.y>e.point.y&&e.point.y>=i.corners.top?(n="Top",r=e.point.y-i.corners.top+20):i.corners.center.y===e.point.y&&"Top"===t.segments[t.segments.length-2].direction||i.corners.center.y<e.point.y&&e.point.y<=i.corners.bottom?(n="Bottom",r=i.corners.bottom-e.point.y+20):void 0!==t.sourcePortWrapper&&void 0!==t.targetPortWrapper&&e.corners.top<=e.point.y&&e.point.y<=e.corners.bottom&&(n=e.direction,r=e.point.y>i.point.y?e.point.y-e.corners.top+20:e.corners.bottom-e.point.y+20):(n="Top",r=i.corners.height/2+20):i.corners.center.x!==e.point.x||i.corners.top<e.point.y&&e.point.y<=i.corners.bottom?i.corners.center.x===e.point.x&&"Right"===t.segments[t.segments.length-2].direction||i.corners.center.x>e.point.x&&e.point.x>=i.corners.left?(n="Left",r=e.point.x-i.corners.left+20):i.corners.center.x===e.point.x&&"Left"===t.segments[t.segments.length-2].direction||i.corners.center.x<=e.point.x&&e.point.x<=i.corners.right?(n="Right",r=i.corners.right-e.point.x+20):void 0!==t.sourcePortWrapper&&void 0!==t.targetPortWrapper&&e.corners.left<=e.point.x&&e.point.x<=e.corners.right&&(n=e.direction,r=e.point.x>i.point.x?e.point.x-e.corners.left+20:e.corners.right-e.point.x+20):(n="Left",r=i.corners.width/2+20);var o="Left"===n||"Top"===n?-r:r,s="Left"===n||"Right"===n?0:90,a=e.point;e.point=fe(e.point,o,s),e.direction=Gu.direction(e.point,i.point),void 0===t.sourcePortWrapper||void 0===t.targetPortWrapper||e.corners.center.x!==i.corners.center.x&&e.corners.center.y!==i.corners.center.y||(e.direction=i.direction);var l=Me(t,e,i);return l.splice(0,0,a),l}function Kt(t,e,i){var n;i.corners=t.targetWrapper.corners;var r;if(void 0!==t.sourcePortWrapper){r=Ae({x:t.sourcePortWrapper.offsetX,y:t.sourcePortWrapper.offsetY},ga(t.sourceWrapper),t.sourceWrapper.bounds,!1)}var o=function(t,e,i,n){var r=!1;switch(i.direction){case"Left":void 0!==t.sourcePortWrapper&&void 0!==t.targetPortWrapper&&"Right"===n&&e.point.x>i.point.x&&e.point.y>=e.corners.top&&e.point.y<=e.corners.bottom||("Bottom"===n&&e.point.y>i.point.y||"Top"===n&&e.point.y<i.point.y)&&e.point.x>=e.corners.left&&e.point.x<=e.corners.right?(e.direction="Right"===n?e.point.y>i.point.y?"Top":"Bottom":e.point.x<i.point.x?"Right":"Left",r=!0):e.point.x>i.point.x&&(e.point.y>i.point.y||e.point.y<i.point.y)&&!(i.corners.top>e.point.y&&i.corners.bottom<e.point.y)?e.direction="Left":e.point.x<i.point.x&&e.point.y>i.point.y||e.point.x>i.point.x&&e.point.y<=i.point.y&&i.corners.top<e.point.y&&i.corners.center.y>=e.point.y?e.direction="Top":e.point.x<i.point.x&&e.point.y<i.point.y||e.point.x>i.point.x&&e.point.y>i.point.y&&i.corners.bottom<e.point.y&&i.corners.center.y>e.point.y?e.direction="Bottom":e.point.y===i.point.y&&e.point.x<i.point.x&&(e.direction="Right");break;case"Right":void 0!==t.sourcePortWrapper&&void 0!==t.targetPortWrapper&&("Bottom"===n&&e.point.y>i.point.y||"Top"===n&&e.point.y<i.point.y)&&e.point.x>i.point.x&&e.point.x>=e.corners.left&&e.point.x<=e.corners.right?(e.direction=e.point.x>i.point.x?"Left":"Right",r=!0):void 0!==t.sourcePortWrapper&&void 0!==t.targetPortWrapper&&"Left"===n&&e.point.x<i.point.x&&e.point.y>=e.corners.top&&e.point.y<=e.corners.bottom?(e.direction=e.point.y>i.point.y?"Top":"Bottom",r=!0):e.point.x<i.point.x&&i.corners.top<=e.point.y&&i.corners.bottom>=e.point.y&&e.point.y===i.point.y?e.direction="Top":e.point.y>i.point.y&&e.point.x>i.point.x?e.direction="Top":e.point.y<i.point.y&&e.point.x>i.point.x?e.direction="Bottom":e.point.x<i.point.x&&(e.point.y>i.point.y||e.point.y<i.point.y)?e.direction="Right":e.point.y===i.point.y&&e.point.x>i.point.x&&(e.direction="Left");break;case"Top":void 0!==t.sourcePortWrapper&&void 0!==t.targetPortWrapper&&"Bottom"===n&&e.point.y>i.point.y&&e.point.x>=e.corners.left&&e.point.x<=e.corners.right||("Right"===n&&e.point.x>i.point.x||"Left"===n&&i.point.y>e.point.y&&i.point.x>e.point.x)&&e.point.y>=e.corners.top&&e.point.y<=e.corners.bottom?(e.direction="Bottom"===n?e.point.x>i.point.x?"Left":"Right":e.point.y<i.point.y?"Bottom":"Top",r=!0):e.point.x===i.point.x&&e.point.y<i.point.y?e.direction="Bottom":e.point.y>i.point.y&&e.point.x>i.corners.left&&e.point.x<i.corners.right?e.direction="Left":e.point.y>=i.point.y?e.direction="Top":e.point.y<i.point.y&&e.point.x>i.point.x?e.direction="Left":e.point.y<i.point.y&&e.point.x<i.point.x&&(e.direction="Right");break;case"Bottom":void 0!==t.sourcePortWrapper&&void 0!==t.targetPortWrapper&&(("Right"===n||"Left"===n&&i.point.x>e.point.x)&&e.point.y>i.point.y&&e.point.y>=e.corners.top&&e.point.y<=e.corners.bottom||"Top"===n&&e.point.y<i.point.y&&e.point.x>=e.corners.left&&e.point.x<=e.corners.right)?(e.direction="Right"===n||"Left"===n?e.point.y>i.point.y?"Top":"Bottom":e.point.x>i.point.x?"Left":"Right",r=!0):e.point.y<i.point.y&&e.point.x>i.corners.left&&i.corners.right>e.point.x?e.point.y<i.point.y&&e.point.x>i.corners.left&&i.corners.center.x>=e.point.x?e.direction="Left":e.point.y<i.point.y&&e.point.x<i.corners.right&&i.corners.center.x<e.point.x&&(e.direction="Right"):e.point.y>i.point.y&&e.point.x>i.point.x?e.direction="Left":e.point.y>i.point.y&&e.point.x<i.point.x?e.direction="Right":e.point.y<=i.point.y&&(e.point.x>i.point.x||i.point.x>e.point.x)&&(e.direction="Bottom")}return r}(t,e,i,r);return!t.selectedSegmentIndex&&void 0!==t.sourcePortWrapper&&void 0!==t.targetPortWrapper&&i.direction===ke(r)&&(("Left"===i.direction&&e.point.x>i.point.x||"Right"===i.direction&&e.point.x<i.point.x)&&e.point.y>=e.corners.top&&e.point.y<=e.corners.bottom||"Bottom"===i.direction&&e.point.y<i.point.y&&e.point.x>=e.corners.left&&e.point.x<=e.corners.right)?n=$t(t,e,i):t.selectedSegmentIndex||e.direction!==i.direction?!t.selectedSegmentIndex&&("Left"===i.direction&&e.point.x>i.point.x||"Right"===i.direction&&e.point.x<i.point.x)&&("Top"===e.direction||"Bottom"===e.direction)&&e.point.y<=i.point.y&&i.corners.top<=e.point.y&&i.corners.bottom>=e.point.y||"Top"===i.direction&&e.point.y>i.point.y||"Bottom"===i.direction&&e.point.y<i.point.y&&i.corners.left<=e.point.x&&i.corners.right>=e.point.x?n=t.selectedSegmentIndex?xe(e,i):$t(t,e,i):!t.selectedSegmentIndex&&void 0!==t.sourceWrapper&&void 0!==t.targetWrapper&&void 0!==t.targetPortWrapper&&("Left"===e.direction||"Right"===e.direction)&&e.point.y>=e.corners.top&&e.point.y<=e.corners.bottom&&("Top"===i.direction||"Bottom"===i.direction)&&i.corners.center.x===e.corners.center.x?(e.direction="Top"===i.direction?"Bottom":"Top",n=Me(t,e,i,"Top"===i.direction?e.corners.bottom-e.point.y+20:e.point.y-e.corners.top+20)):!t.selectedSegmentIndex&&void 0!==t.sourceWrapper&&void 0!==t.targetWrapper&&void 0!==t.targetPortWrapper&&("Top"===e.direction||"Bottom"===e.direction)&&e.point.x>=e.corners.left&&e.point.x<=e.corners.right&&("Left"===i.direction||"Right"===i.direction)&&i.corners.center.y===e.corners.center.y?(e.direction="Left"===i.direction?"Right":"Left",n=Me(t,e,i,"Left"===i.direction?e.corners.right-e.point.x+20:e.point.x-e.corners.left+20)):n=o?Me(t,e,i,"Left"===e.direction||"Right"===e.direction?"Left"===e.direction?e.point.x-e.corners.left+20:e.corners.right-e.point.x+20:"Top"===e.direction?e.point.y-e.corners.top+20:e.corners.bottom-e.point.y+20):xe(e,i):n=Me(t,e,i),n}function Jt(t,e,i){var n,r={x:e.offsetX,y:e.offsetY},o=ga(i),s=Ae(r,o,i.bounds,!1),a=t.segments[0];return a.direction!==s&&(!function(t,e,i,n,r,o){var s,a,l=[];l.push(n);n.y===r.y&&("Left"===e&&r.x<n.x||"Right"===e&&r.x>n.x)||n.x===r.x&&("Top"===e&&r.y<n.y||"Bottom"===e&&r.y>n.y)||("Top"===e||"Bottom"===e?"Top"===e&&r.y<n.y&&r.y>n.y-13||"Bottom"===e&&r.y>n.y&&r.y<n.y+13?(a="Top"===e?i.top-13:i.bottom+13,l.push({x:n.x,y:a}),l.push({x:n.x+(r.x-n.x)/2,y:a}),l.push({x:n.x+(r.x-n.x)/2,y:r.y})):Math.abs(n.x-r.x)>13&&("Top"===e&&r.y<n.y||"Bottom"===e&&r.y>n.y)?l.push({x:n.x,y:r.y}):(a="Top"===e?i.top-13:i.bottom+13,s=r.x<n.x?i.left-13:i.right+13,l.push({x:n.x,y:a}),l.push({x:r.x,y:a})):"Left"===e&&r.x<n.x&&r.x>n.x-13||"right"===e&&r.x>n.x&&r.x<n.x+13?(s="Left"===e?i.left-13:i.right+13,l.push({x:s,y:n.y}),l.push({x:s,y:n.y+(r.y-n.y)/2}),l.push({x:r.x,y:n.y+(r.y-n.y)/2})):Math.abs(n.y-r.y)>13&&("Left"===e&&r.x<n.x||"Right"===e&&r.x>n.x)?l.push({x:r.x,y:n.y}):(s="Left"===e?i.left-13:i.right+13,l.push({x:s,y:n.y}),l.push({x:s,y:r.y})),o&&(l.push(t.points[0]),l.reverse()),t.points=l)}(a,s,o,a.points[0],a.points[a.points.length-1],!1),n=a.points[a.points.length-1],a.direction=Gu.direction(a.points[a.points.length-2],a.points[a.points.length-1])),n}function te(t,e,i){var n,r=e.segments[e.segments.length-2],o=r.points[r.points.length-1];("Top"!==r.direction&&"Bottom"!==r.direction||o.x!==t[1].x)&&("Left"!==r.direction&&"Right"!==r.direction||o.y!==t[1].y)||(r.points[r.points.length-1]=t[1],n=Gu.direction(r.points[0],r.points[r.points.length-1]),void 0!==e.sourceWrapper&&void 0===e.sourcePortWrapper&&n===ke(r.direction)&&("Left"===r.direction||"Right"===r.direction?r.points[0].x="Right"===r.direction?r.points[0].x-e.sourceWrapper.corners.width:r.points[0].x+e.sourceWrapper.corners.width:r.points[0].y="Bottom"===r.direction?r.points[0].y-e.sourceWrapper.corners.height:r.points[0].y+e.sourceWrapper.corners.height),r.direction=n,r.length=Gu.distancePoints(r.points[0],r.points[r.points.length-1]),t.splice(0,1))}function ee(t,e,i,n){var r=t.sourcePortWrapper,o=t.targetPortWrapper,s=n?t.targetPadding:t.sourcePadding,a=n?o:r,l=new Zu(a.bounds.x-s,a.bounds.y-s,a.actualSize.width+2*s,a.actualSize.height+2*s),h=[l.topLeft,l.topRight,l.bottomRight,l.bottomLeft];h[h.length]=h[0];var c={x1:e.point.x,y1:e.point.y,x2:i.point.x,y2:i.point.y},d=n?i.point:e.point;return be(c,h,!0,d)||d}function ie(t,e){var i=[],n=Ao(t,t.corners,e);n.push(n[0]);for(var r=0;r<n.length-1;r++)i.push(function(t,e){return{x1:t.x,y1:t.y,x2:e.x,y2:e.y}}(n[parseInt(r.toString(),10)],n[r+1]));return i}function ne(t,e,i){var n,r=t.rotateAngle+t.parentTransform;if(r){if(r<45)return e;if(r<=135)n={width:e.width,height:e.height,topLeft:e.bottomLeft,topCenter:e.middleLeft,topRight:e.topLeft,middleLeft:e.bottomCenter,center:i.center,middleRight:e.topCenter,bottomLeft:e.bottomRight,bottomCenter:e.middleRight,bottomRight:e.topRight,left:i.left,right:i.right,top:i.top,bottom:i.bottom};else if(r<=225)n={width:e.width,height:e.height,topLeft:e.bottomLeft,topCenter:e.bottomCenter,topRight:e.bottomRight,middleLeft:e.middleRight,center:i.center,middleRight:e.middleLeft,bottomLeft:e.topLeft,bottomCenter:e.topCenter,bottomRight:e.topRight,left:i.left,right:i.right,top:i.top,bottom:i.bottom};else{if(!(r<=315))return e;n={width:e.width,height:e.height,topLeft:e.topRight,topCenter:e.middleRight,topRight:e.bottomRight,middleLeft:e.topCenter,center:i.center,middleRight:e.bottomCenter,bottomLeft:e.topLeft,bottomCenter:e.middleLeft,bottomRight:e.bottomLeft,left:i.left,right:i.right,top:i.top,bottom:i.bottom}}return n}return e}function re(t,e,i){var n=[];if(t.segments&&t.segments.length>0){var r=void 0,o=[],s=e.point;for(r=0;r<t.segments.length;r++){var a=t.segments[parseInt(r.toString(),10)];if((o=[]).push(s),r!==t.segments.length-1?(o.push(a.point),s=a.point):o.push(i.point),t.segments[parseInt(r.toString(),10)].points=o,t.segments.length>1&&Gu.equals(a.points[0],a.points[1])&&t.segments.splice(r,1),a)for(var l=0;l<a.points.length;l++)(l>0||0===r)&&n.push(a.points[parseInt(l.toString(),10)])}}return n}function oe(t,e,i){return"Top"===t||"Bottom"===t?i.x>e.x?"Right":"Left":i.y>e.y?"Bottom":"Top"}function se(t){if("Straight"===t.type||"Bezier"===t.type){if(0===t.segments.length||t.segments.length>0&&!Gu.isEmptyPoint(t.segments[t.segments.length-1].point))if("Bezier"===t.type){var e=new SS(t,"segments",{type:"Bezier",isInternalSegment:!0},!0);t.segments.push(e)}else{e=new bS(t,"segments",{type:"Straight"},!0);t.segments.push(e)}}else if(0===t.segments.length||t.segments[t.segments.length-1].direction){e=new wS(t,"segments",{type:"Orthogonal"},!0);t.segments.push(e)}}function ae(t,e,i){var n=t.segments[parseInt(e.toString(),10)],r="Left"===n.direction||"Top"===n.direction?-n.length:n.length,o="Left"===n.direction||"Right"===n.direction?0:90,s=fe(i.point,r,o);return t.segments[e-1].length+=n.length,t.segments[e-1].points[1]=i.point=s,t.segments.splice(e,1),--e}function le(t,e,i){var n,r;if(t.sourcePortWrapper){r=Ae({x:t.sourcePortWrapper.offsetX,y:t.sourcePortWrapper.offsetY},ga(t.sourceWrapper),t.sourceWrapper.bounds,!1)}de(t.targetWrapper,e,i,t);var o=oe(i.direction,e.point,i.point);if(void 0===t.sourcePortWrapper||e.direction!==i.direction||("Top"!==e.direction&&"Bottom"!==e.direction||e.corners.center.x!==i.corners.center.x)&&("Left"!==e.direction&&"Right"!==e.direction||e.corners.center.y!==i.corners.center.y))if(i.point.x>=e.corners.left&&i.point.x<=e.corners.right&&e.point.y>=e.corners.top&&e.point.y<=e.corners.bottom){e.direction=i.point.y>e.point.y?"Bottom":"Top";n=Me(t,e,i,"Top"===e.direction?e.point.y-e.corners.top+20:e.corners.bottom-e.point.y+20)}else if(t.sourcePortWrapper&&r===ke(o)){var s;("Left"===r||"Right"===r)&&e.point.y>=e.corners.top&&e.point.y<=e.corners.bottom?(e.direction=i.point.y>e.point.y?"Bottom":"Top",s=e.corners.height/2+20):("Top"===r||"Bottom"===r)&&e.point.x>=e.corners.left&&e.point.x<=e.corners.right&&(e.direction=i.point.x>e.point.x?"Right":"Left",s=e.corners.width/2+20),e.direction&&s?n=Me(t,e,i,s,!0):(e.direction=o,n=xe(e,i))}else if(!t.sourcePortWrapper||r!==i.direction||"Top"!==r&&"Bottom"!==r||e.corners.center.x!==i.corners.center.x)e.direction=o,n=xe(e,i);else{e.direction=i.point.y>e.point.y?"Bottom":"Top";n=Me(t,e,i,"Bottom"===e.direction?e.corners.bottom-e.point.y+20:e.point.y-e.corners.top+20)}else{e.direction=o,n=Me(t,e,i,"Top"===o||"Bottom"===o?t.sourceWrapper.height/2+20:t.sourceWrapper.width/2+20);e.point=n[1],"Left"===o||"Right"===o?(i.direction=o,i.point="Left"===o?i.corners.middleLeft:i.corners.middleRight):de(t.targetWrapper,e,i,t),n=Me(t,e,i)}return n}function he(t,e){if(void 0!==t.targetWrapper&&void 0===t.targetPortWrapper){if(ga(t.targetWrapper).containsPoint(e.point,1)){var i=t.targetWrapper,n=t.segments[t.segments.length-2],r=n.points[n.points.length-1],o=ke(n.direction);"Bottom"===o?r.y<i.corners.bottom+1&&(n.points[n.points.length-1].y=i.corners.bottom+20,n.length=Gu.distancePoints(n.points[0],n.points[n.points.length-1])):"Top"===o?r.y>i.corners.top-1&&(n.points[n.points.length-1].y=i.corners.top-20,n.length=Gu.distancePoints(n.points[0],n.points[n.points.length-1])):"Left"===o?r.x>i.corners.left-1&&(n.points[n.points.length-1].x=i.corners.left-20,n.length=Gu.distancePoints(n.points[0],n.points[n.points.length-1])):"Right"===o&&r.x<i.corners.right+1&&(n.points[n.points.length-1].x=i.corners.right+20,n.length=Gu.distancePoints(n.points[0],n.points[n.points.length-1])),e.point=n.points[n.points.length-1]}}}function ce(t,e){for(var i=0;i<t.segments.length;i++)for(var n=t.segments[parseInt(i.toString(),10)],r=0;r<n.points.length;r++)(r>0||0===i)&&e.push(n.points[parseInt(r.toString(),10)]);return e}function de(t,e,i,n){var r,o={x:0,y:0},s=ne(t,t.corners,t.bounds),a=e.margin,l=e.point;if(s.bottomCenter.y+a.bottom<l.y)r="Bottom",o=s.bottomCenter;else if(s.topCenter.y-a.top>l.y)r="Top",o=s.topCenter;else if(s.middleLeft.x-a.left>l.x)r="Left",o=s.middleLeft;else if(s.middleRight.x+a.right<l.x)r="Right",o=s.middleRight;else{var h=Math.abs(l.y-s.topCenter.y),c=Math.abs(l.x-s.middleRight.x),d=Math.abs(l.y-s.bottomCenter.y),p=Math.abs(l.x-s.middleLeft.x),u=Number.MAX_VALUE;u=h,r="Top",o=s.topCenter,u>c&&(u=c,r="Right",o=s.middleRight),u>d&&(u=d,r="Bottom",o=s.bottomCenter),u>p&&(r="Left",o=s.middleLeft)}i.point=o,i.direction=r;var g=me(s,ke(i.direction));i.point=ve(n,t,i.point,g,t===n.targetWrapper)}function pe(t,e,i,n,r){var o,s=!1,a=[];if((s=function(t,e){var i=!1;switch(t){case"Left":switch(e){case"Right":case"Bottom":i=!0}break;case"Top":switch(e){case"Left":case"Right":case"Bottom":i=!0}break;case"Bottom":switch(e){case"Right":i=!0}}return i}(e.direction,i.direction))&&Le(e,i),"Right"===e.direction&&"Left"===i.direction)o=function(t,e,i,n){var r,o=t.sourcePortWrapper,s=Math.round(Math.abs(e.point.y-i.point.y)),a={x:Math.max(e.point.x,e.corners.right),y:e.point.y},l={x:Math.min(i.point.x,i.corners.left),y:i.point.y},h=ue(t);if(n){var c=l;l=a,a=c}e.corners.bottom+h<i.corners.top-h||e.corners.top-h>i.corners.bottom+h||("Bezier"!==t.type?h=0:i.corners.left-e.corners.right<=2*h&&i.corners.left-e.corners.right>=5&&(h=0));e.margin={left:h,right:h,top:h,bottom:h},i.margin={left:h,right:h,top:h,bottom:h},r=0===s&&(e.corners.right<i.corners.left||n&&e.corners.right<i.corners.left)?kg.One:e.point.x+e.margin.right<i.point.x-i.margin.left?kg.Three:t.sourceWrapper!==t.targetWrapper&&(ga(t.sourceWrapper).containsPoint(l)||ga(t.targetWrapper).containsPoint(a))?kg.Three:e.corners.bottom<=i.corners.top?kg.Five:e.corners.top>=i.corners.top?kg.Five:void 0!==o&&o.offsetY<=i.corners.top||void 0===o&&e.corners.right<=i.corners.top?kg.Five:(void 0!==o&&o.offsetY>=i.corners.bottom||void 0===o&&(e.corners.right,i.corners.bottom),kg.Five);return r}(t,e,i,s);else if("Right"===e.direction&&"Right"===i.direction)o=function(t,e,i){var n,r=t.sourcePortWrapper,o=t.targetPortWrapper,s=e.point.x-i.point.x,a=e.point.y-i.point.y,l=ue(t);i.margin={left:l,right:l,top:l,bottom:l},e.margin={left:l,right:l,top:l,bottom:l},n=e.corners.right>=i.corners.right?void 0!==r&&(r.offsetY<i.corners.top-i.margin.top||r.offsetY>i.corners.bottom+i.margin.bottom)||void 0===r&&e.corners.middleRight.y<i.corners.top?kg.Three:void 0!==r&&r.offsetY>i.corners.bottom+i.margin.bottom&&e.corners.top>i.corners.bottom||void 0===r&&e.corners.middleRight.y>i.corners.bottom?kg.Three:void 0!==r&&r.offsetY<i.corners.top-i.margin.top&&e.corners.bottom>i.corners.top||void 0===r&&e.corners.middleRight.y>i.corners.bottom?kg.Three:e.corners.right<i.corners.left||i.corners.right<e.corners.left?kg.Five:0===s||0===a?kg.One:kg.Three:void 0!==o&&e.corners.bottom<o.offsetY-i.margin.top||void 0===o&&e.corners.bottom<i.corners.middleRight.y?kg.Three:void 0!==o&&e.corners.top>o.offsetY+i.margin.right||void 0===o&&e.corners.top>i.corners.middleRight.y?kg.Three:void 0!==o&&(void 0!==r&&r.offsetX<i.corners.left&&r.offsetX!==o.offsetX&&Math.abs(e.corners.right-i.corners.left)<=20||void 0===r&&e.corners.right<i.corners.left&&e.corners.center.x!==i.corners.center.x&&e.corners.center.y!==i.corners.center.y)?kg.Three:e.corners.right<i.corners.left?kg.Five:0===s||0===a?kg.One:kg.Three;return n}(t,e,i);else if("Right"===e.direction&&"Top"===i.direction)o=function(t,e,i,n){var r,o=t.targetPortWrapper,s=t.sourcePortWrapper,a={x:Math.max(e.point.x,e.corners.right),y:e.point.y},l={x:i.point.x,y:Math.min(i.point.y,i.corners.top)},h=ue(t);if(i.margin={left:h,right:h,top:h,bottom:h},e.margin={top:h,bottom:h,left:h,right:h},n){var c=s;s=o,o=c;var d=a;a=l,l=d}r=void 0!==s&&s.offsetY<i.corners.top-i.margin.top||void 0===s&&e.corners.bottom<i.corners.top-i.margin.top?e.corners.bottom<i.corners.top?void 0!==o&&e.corners.right+e.margin.right<o.offsetX||void 0===o&&e.corners.right+e.margin.right<i.corners.topCenter.x?kg.Two:kg.Four:void 0!==o&&e.corners.left>o.offsetX||void 0===o&&e.corners.left>i.corners.topCenter.x?kg.Four:kg.Two:void 0!==s&&Math.abs(e.corners.right-i.corners.left)<=5&&Math.abs(s.offsetY-i.corners.top)<=5?kg.Two:void 0!==o&&e.corners.right<i.corners.left&&Math.abs(o.offsetX-e.corners.topCenter.x)>=25&&e.corners.middleRight.y+e.margin.right<o.offsetY?kg.Two:e.corners.right<i.corners.left?kg.Four:t.sourceWrapper!==t.targetWrapper&&(ga(t.sourceWrapper).containsPoint(l)||ga(t.targetWrapper).containsPoint(a))?kg.Two:kg.Four;return r}(t,e,i,s);else if("Right"===e.direction&&"Bottom"===i.direction)o=function(t,e,i,n){var r=ue(t);e.margin={left:r,right:r,top:r,bottom:r},i.margin={left:r,right:r,top:r,bottom:r};var o,s=t.sourcePortWrapper,a=t.targetPortWrapper;if(n){var l=s;s=a,a=l}o=void 0!==s&&s.offsetY>i.corners.bottom+i.margin.bottom||void 0===s&&e.corners.middleRight.y>i.corners.bottom+i.margin.bottom?e.corners.top>i.corners.bottom?void 0!==a&&e.corners.right+e.margin.right<a.offsetX||void 0===a&&e.corners.right+e.margin.right<i.corners.bottomCenter.x?kg.Two:kg.Four:void 0!==a&&e.corners.left>a.offsetX||void 0===a&&e.corners.left>i.corners.bottomCenter.x?kg.Four:kg.Two:void 0!==s&&Math.abs(e.corners.right-i.corners.left)<=25&&Math.abs(s.offsetY-i.corners.bottom)<=25?kg.Two:(e.corners.right,i.corners.left,kg.Four);return o}(t,e,i,s);else if("Bottom"===e.direction&&"Top"===i.direction)o=function(t,e,i){var n,r=e.point.x-i.point.x,o=ue(t);e.corners.right+o<i.corners.left-o||e.corners.left-o>i.corners.right+o||("Bezier"!==t.type?o=0:i.corners.top-e.corners.bottom<=2*o&&i.corners.top-e.corners.bottom>=5&&(o=0));e.margin={left:o,right:o,top:o,bottom:o},i.margin={left:o,right:o,top:o,bottom:o},n=0===r&&e.corners.bottom<i.corners.top?kg.One:e.corners.bottom+e.margin.bottom<i.corners.top-i.margin.top?kg.Three:e.corners.right+e.margin.right<i.corners.left-i.margin.left?kg.Five:(e.corners.left,e.margin.left,i.corners.right,i.margin.right,kg.Five);return n}(t,e,i);else if("Bottom"===e.direction&&"Bottom"===i.direction){var l=ue(t);e.margin={left:l,right:l,top:l,bottom:l},i.margin={left:l,right:l,top:l,bottom:l},o=function(t,e,i){var n,r=t.sourcePortWrapper,o=t.targetPortWrapper,s=Math.round(Math.abs(e.point.x-i.point.x)),a=Math.round(Math.abs(i.point.y-i.point.y));n=e.corners.bottom<i.corners.bottom?void 0!==r&&r.offsetX<i.corners.left-i.margin.left||void 0===r&&e.corners.bottomCenter.x<i.corners.left-i.margin.left?kg.Three:void 0!==r&&r.offsetX>i.corners.right+i.margin.right||void 0===r&&e.corners.bottomCenter.x>i.corners.right+i.margin.right?kg.Three:e.corners.bottom<i.corners.top?kg.Five:0===s||0===a?kg.One:kg.Three:void 0!==o&&e.corners.left-e.margin.left>o.offsetX||void 0===o&&e.corners.left>i.corners.left?kg.Three:void 0!==o&&e.corners.right+e.margin.right<o.offsetX||void 0===o&&e.corners.right<i.corners.right?kg.Three:e.corners.top>i.corners.bottom?kg.Five:0===s||0===a?kg.One:kg.Three;return n}(t,e,i)}else"Bottom"===e.direction&&"Left"===i.direction?o=function(t,e,i,n){var r=t.sourcePortWrapper,o=t.targetPortWrapper,s=ue(t);i.margin={left:s,right:s,top:s,bottom:s},e.margin={top:s,bottom:s,left:s,right:s};var a;if(n){var l=r;r=o,o=l}a=void 0!==r&&r.offsetX<i.corners.left-i.margin.left||void 0===r&&e.corners.bottomCenter.x<i.corners.bottomLeft.x-i.margin.left?e.corners.right<i.corners.left?void 0!==o&&e.corners.bottom+e.margin.bottom<o.offsetY||void 0===o&&e.corners.bottom+e.margin.bottom<i.corners.middleLeft.y?kg.Two:kg.Four:void 0!==o&&e.corners.top>o.offsetY||void 0===o&&e.corners.top>i.corners.middleLeft.y?kg.Four:kg.Two:void 0!==o&&Math.abs(e.corners.right-i.corners.left)<=25&&Math.abs(o.offsetY-e.corners.bottom)<=25?kg.Two:kg.Four;return a}(t,e,i,s):"Left"===e.direction&&"Left"===i.direction?o=function(t,e,i){var n=t.sourcePortWrapper,r=t.targetPortWrapper,o=ue(t);e.margin={left:o,right:o,top:o,bottom:o},i.margin={left:o,right:o,top:o,bottom:o};var s,a=Math.round(Math.abs(e.point.x-i.point.x)),l=Math.round(Math.abs(e.point.y-i.point.y));s=e.corners.left<i.corners.left?void 0!==r&&e.corners.bottom+e.margin.bottom<r.offsetY||void 0===r&&e.corners.bottom+e.margin.bottom<i.corners.middleLeft.y?kg.Three:void 0!==r&&e.corners.top-e.margin.top>r.offsetY||void 0===r&&e.corners.top-e.margin.top>i.corners.middleLeft.y?kg.Three:e.corners.right<i.corners.left||i.corners.right<e.corners.left?kg.Five:0===a||0===l?kg.One:kg.Three:void 0!==n&&n.offsetY<i.corners.top-i.margin.top||void 0===n&&e.corners.middleLeft.y<i.corners.top?kg.Three:void 0!==n&&n.offsetY>i.corners.bottom+i.margin.bottom||void 0===n&&e.corners.middleLeft.y>i.corners.bottom+i.margin.bottom?kg.Three:e.corners.left>i.corners.right?kg.Five:0===a||0===l?kg.One:kg.Three;return s}(t,e,i):"Left"===e.direction&&"Top"===i.direction?o=function(t,e,i,n){var r,o=t.sourcePortWrapper,s=ue(t);i.margin={left:s,right:s,top:s,bottom:s},e.margin={top:s,bottom:s,left:s,right:s};var a=t.targetPortWrapper,l={x:Math.min(e.point.x,e.corners.left),y:e.point.y},h={x:i.point.x,y:Math.min(i.point.y,i.corners.top)};if(n){var c=o;o=a,a=c;var d=l;l=h,h=d}r=void 0!==o&&o.offsetY<i.corners.top-i.margin.top||void 0===o&&(e.corners.bottom<i.corners.top-i.margin.top||e.corners.middleLeft.y<i.corners.top-i.margin.top)?e.corners.bottom<i.corners.top?void 0!==a&&e.corners.left-e.margin.left>a.offsetX||void 0===a&&e.corners.left-e.margin.left>i.corners.topCenter.x?kg.Two:kg.Four:void 0!==a&&e.corners.right<a.offsetX||void 0===a&&e.corners.right<i.corners.topCenter.x?kg.Four:kg.Two:void 0!==o&&Math.abs(e.corners.left-i.corners.right)<=25&&Math.abs(o.offsetY-i.corners.top)<=25?kg.Two:t.sourceWrapper!==t.targetWrapper&&(ga(t.sourceWrapper).containsPoint(h)||ga(t.targetWrapper).containsPoint(l))?kg.Two:(e.corners.left,i.corners.right,kg.Four);return r}(t,e,i,s):"Top"===e.direction&&"Top"===i.direction&&(o=function(t,e,i){var n=t.sourcePortWrapper,r=t.targetPortWrapper,o=Math.round(Math.abs(e.point.x-i.point.x)),s=Math.round(Math.abs(e.point.y-i.point.y)),a=ue(t);i.margin={left:a,right:a,top:a,bottom:a},e.margin={top:a,bottom:a,left:a,right:a};var l;l=e.corners.top<i.corners.top?void 0!==r&&e.corners.left-e.margin.left>r.offsetX||void 0===r&&e.corners.left>i.corners.left?kg.Three:void 0!==r&&e.corners.right+e.margin.right<r.offsetX||void 0===r&&e.corners.right<i.corners.right?kg.Three:e.corners.bottom<i.corners.top?kg.Five:0===o||0===s?kg.One:kg.Three:void 0!==n&&n.offsetX>i.corners.right+i.margin.right||void 0===n&&e.corners.left>i.corners.right?kg.Three:void 0!==n&&n.offsetX<i.corners.left-i.margin.left||void 0===n&&e.corners.bottomRight.x<i.corners.left?kg.Three:e.corners.top>i.corners.bottom?kg.Five:0===o||0===s?kg.One:kg.Three;return l}(t,e,i));return s&&Le(e,i),a=function(t,e,i,n,r,o){var s,a,l=t.sourceWrapper,h=t.targetWrapper,c=l.corners,d=h.corners,p=20,u={corners:i.corners,point:i.point,direction:i.direction,margin:i.margin},g={corners:n.corners,point:n.point,direction:n.direction,margin:n.margin};if(!(u.direction===g.direction&&e!==kg.Five||u.direction!==ke(g.direction)&&e!==kg.Three))switch(u.direction){case"Left":c.middleLeft.x>d.middleRight.x&&(a=(c.middleLeft.x-d.middleRight.x)/2,p=o?a:Math.min(p,a));break;case"Right":c.middleRight.x<d.middleLeft.x&&(a=(d.middleLeft.x-c.middleRight.x)/2,p=o?a:Math.min(p,a));break;case"Top":c.topCenter.y>d.bottomCenter.y&&(a=(c.topCenter.y-d.bottomCenter.y)/2,p=o?a:Math.min(p,a));break;case"Bottom":c.bottomCenter.y<d.topCenter.y&&(a=(d.topCenter.y-c.bottomCenter.y)/2,p=o?a:Math.min(p,a))}p=Ie(c,u,p);var m="Bezier"===t.type;r&&(p=Math.max(p,r));e===kg.One&&(s=[u.point,g.point]);e===kg.Two&&(s=xe(u,g));e===kg.Three&&(s=Me(t,u,g,p,void 0,m));if(e===kg.Four){var f=void 0;s=Ce(u,g,f,s,p,m)}e===kg.Five&&(s=function(t,e,i,n){void 0===i&&(i=20);void 0===n&&(n=!1);n&&(i=20);var r,o,s=i,a=t.corners.left-t.margin.left,l=t.corners.right+t.margin.right,h=t.corners.bottom+t.margin.bottom,c=t.corners.top-t.margin.top,d=e.corners.left-e.margin.left,p=e.corners.right+e.margin.right,u=e.corners.bottom+e.margin.bottom,g=e.corners.top-e.margin.top;switch(t.direction){case"Left":(c>g&&c<u||h<u&&h>g)&&a>d&&a<=p&&i>=20&&(s=t.point.x-e.corners.left+s),n&&t.direction==e.direction&&t.corners.left>e.corners.left&&t.corners.left-e.corners.right>=20&&(s=(t.corners.left-e.corners.right)/2),o=fe(t.point,s,180);break;case"Top":(a>d&&a<p||l<p&&l>d)&&c>g&&c<=u&&i>=20&&(s=t.point.y-e.corners.top+s),n&&t.direction==e.direction&&t.corners.top>e.corners.top&&t.corners.top-e.corners.bottom>=20&&(s=(t.corners.top-e.corners.bottom)/2),o=fe(t.point,s,270);break;case"Right":(c>g&&c<u||h<u&&h>g)&&l<p&&l>=d&&i>=20&&(s=e.corners.right-t.point.x+s),n&&t.direction==e.direction&&t.corners.right<e.corners.right&&e.corners.left-t.corners.right>=20&&(s=(e.corners.left-t.corners.right)/2),o=fe(t.point,s,0);break;case"Bottom":(a>d&&a<p||l<p&&l>d)&&h<u&&h>=g&&i>=20&&(s=e.corners.bottom-t.point.y+s),n&&t.direction==e.direction&&t.corners.bottom<e.corners.bottom&&e.corners.top-t.corners.bottom>=20&&(s=(e.corners.top-t.corners.bottom)/2),o=fe(t.point,s,90)}r=[t.point,o];var m=void 0;if("Top"===t.direction||"Bottom"===t.direction){var f=t.direction;t.direction=o.x>e.point.x?"Left":"Right",t.point=o,m=n?.5*Math.abs(o.x-e.point.x):m,r=Ce(t,e,f,r,m,n)}else{var f=t.direction;t.direction=o.y>e.point.y?"Top":"Bottom",t.point=o,m=n?.5*Math.abs(o.y-e.point.y):m,r=Ce(t,e,f,r,m,n)}return r}(u,g,p,m));return s}(t,o,e,i,n,r),"Bezier"===t.type&&function(t,e,i){if("Bezier"===t.type)if(0===t.segments.length){var n=i[0],r=i[i.length-1];if(e===kg.One){var o=Math.min(20,.5*Gu.findLength(n,r)),s={angle:ge(n,r),distance:o},a={angle:ge(r,n),distance:o},l=Gu.direction(n,r),h="Left"==l||"Right"==l?"Horizontal":"Vertical",c=new SS(t,"segments",{type:"Bezier",isInternalSegment:!0,vector1:s,vector2:a,orientation:h},!0);t.segments.push(c)}else if(e===kg.Two){var d=i[1],s={angle:ge(n,d),distance:.5*Gu.findLength(n,d)},a={angle:ge(r,d),distance:.5*Gu.findLength(r,d)},l=Gu.direction(n,d),h="Left"==l||"Right"==l?"Horizontal":"Vertical",c=new SS(t,"segments",{type:"Bezier",isInternalSegment:!0,vector1:s,vector2:a,orientation:h},!0);t.segments.push(c)}else if(e===kg.Three){var p=i[1],u=i[i.length-2],d={x:.5*(p.x+u.x),y:.5*(p.y+u.y)},s={angle:ge(n,p),distance:.5*Gu.findLength(n,p)},a={angle:ge(d,p),distance:.5*Gu.findLength(d,p)},g=Gu.direction(n,p),m="Left"==g||"Right"==g?"Horizontal":"Vertical",f=new SS(t,"segments",{type:"Bezier",isInternalSegment:!0,vector1:s,vector2:a,point:d,orientation:m},!0);t.segments.push(f);var v={angle:ge(d,u),distance:.5*Gu.findLength(d,u)},y={angle:ge(r,u),distance:.5*Gu.findLength(r,u)},b=Gu.direction(d,u),S="Left"==b||"Right"==b?"Horizontal":"Vertical",w=new SS(t,"segments",{type:"Bezier",isInternalSegment:!0,vector1:v,vector2:y,orientation:S},!0);t.segments.push(w)}else if(e===kg.Four){var p=i[1],u=i[2],I=i[3],x={x:.5*(p.x+u.x),y:.5*(p.y+u.y)},M={x:.5*(u.x+I.x),y:.5*(u.y+I.y)},s={angle:ge(n,p),distance:.5*Gu.findLength(n,p)},a={angle:ge(x,p),distance:.5*Gu.findLength(x,p)},g=Gu.direction(n,p),m="Left"==g||"Right"==g?"Horizontal":"Vertical",f=new SS(t,"segments",{type:"Bezier",isInternalSegment:!0,vector1:s,vector2:a,point:x,orientation:m},!0);t.segments.push(f);var v={angle:ge(x,u),distance:.5*Gu.findLength(x,u)},y={angle:ge(M,u),distance:.5*Gu.findLength(M,u)},b=Gu.direction(x,u),S="Left"==b||"Right"==b?"Horizontal":"Vertical",w=new SS(t,"segments",{type:"Bezier",isInternalSegment:!0,vector1:v,vector2:y,point:M,orientation:S},!0);t.segments.push(w);var C={angle:ge(M,I),distance:.5*Gu.findLength(M,I)},N={angle:ge(r,I),distance:.5*Gu.findLength(r,I)},E=Gu.direction(M,I),D="Left"==E||"Right"==E?"Horizontal":"Vertical",T=new SS(t,"segments",{type:"Bezier",isInternalSegment:!0,vector1:C,vector2:N,orientation:D},!0);t.segments.push(T)}else if(e===kg.Five){var p=i[1],u=i[2],I=i[3],O=i[4],x={x:.5*(p.x+u.x),y:.5*(p.y+u.y)},M={x:.5*(u.x+I.x),y:.5*(u.y+I.y)},L={x:.5*(I.x+O.x),y:.5*(I.y+O.y)},s={angle:ge(n,p),distance:.5*Gu.findLength(n,p)},a={angle:ge(x,p),distance:.5*Gu.findLength(x,p)},g=Gu.direction(n,p),m="Left"==g||"Right"==g?"Horizontal":"Vertical",f=new SS(t,"segments",{type:"Bezier",isInternalSegment:!0,vector1:s,vector2:a,point:x,orientation:m},!0);t.segments.push(f);var v={angle:ge(x,u),distance:.5*Gu.findLength(x,u)},y={angle:ge(M,u),distance:.5*Gu.findLength(M,u)},b=Gu.direction(x,u),S="Left"==b||"Right"==b?"Horizontal":"Vertical",w=new SS(t,"segments",{type:"Bezier",isInternalSegment:!0,vector1:v,vector2:y,point:M,orientation:S},!0);t.segments.push(w);var C={angle:ge(M,I),distance:.5*Gu.findLength(M,I)},N={angle:ge(L,I),distance:.5*Gu.findLength(L,I)},E=Gu.direction(M,I),D="Left"==E||"Right"==E?"Horizontal":"Vertical",T=new SS(t,"segments",{type:"Bezier",isInternalSegment:!0,vector1:C,vector2:N,point:L,orientation:D},!0);t.segments.push(T);var A={angle:ge(L,O),distance:.5*Gu.findLength(L,O)},z={angle:ge(r,O),distance:.5*Gu.findLength(r,O)},k=Gu.direction(L,O),j="Left"==k||"Right"==k?"Horizontal":"Vertical",P=new SS(t,"segments",{type:"Bezier",isInternalSegment:!0,vector1:A,vector2:z,orientation:j},!0);t.segments.push(P)}else{var c=new SS(t,"segments",{type:"Bezier"},!0);t.segments.push(c)}}else for(var R=0;R<t.segments.length;R++)t.bezierSettings.allowSegmentsReset&&(t.segments[parseInt(R.toString(),10)].isInternalSegment=!0)}(t,o,a),a}function ue(t){return t.connectorSpacing>=13?13:t.connectorSpacing<=1?1:t.connectorSpacing}function ge(t,e){var i={x:e.x,y:t.y},n=Gu.findLength(i,e),r=Gu.findLength(e,t),o=Math.asin(n/r);return o=180*o/Math.PI,t.x<e.x?t.y>e.y&&(o=360-o):o=t.y<e.y?180-o:180+o,o}function me(t,e){var i;switch(e){case"Left":i=t.middleLeft;break;case"Top":i=t.topCenter;break;case"Right":i=t.middleRight;break;case"Bottom":i=t.bottomCenter}return i}function fe(t,e,i){return Gu.transform(t,i,e)}function ve(t,e,i,n,r){i={x:i.x,y:i.y},n={x:n.x,y:n.y};var o,s,a=r?t.targetWrapper:t.sourceWrapper,l=r?t.targetPadding:t.sourcePadding,h=r||"Orthogonal"===t.type||"Bezier"===t.type?i:n,c=a,d=Da(-a.parentTransform,a.offsetX,a.offsetY,i),p=Da(-a.parentTransform,a.offsetX,a.offsetY,n);if("Orthogonal"===t.type||"Bezier"===t.type){d.x===p.x&&(d.y<p.y?d.y-=5:d.y+=5),d.y===p.y&&(d.x<p.x?d.x-=5:d.x+=5),i=Da(a.parentTransform,a.offsetX,a.offsetY,d)}else if(r){var u=Gu.findAngle(i,n);n=Gu.transform({x:n.x,y:n.y},u,Math.max(a.actualSize.width,a.actualSize.height))}else{u=Gu.findAngle(n,i);i=Gu.transform({x:i.x,y:i.y},u,Math.max(a.actualSize.width,a.actualSize.height))}(t.sourcePadding||t.targetPadding)&&(o=new Zu(a.bounds.x-l,a.bounds.y-l,a.actualSize.width+2*l,a.actualSize.height+2*l)),a instanceof rm&&a.data?(s=o?[o.topLeft,o.topRight,o.bottomRight,o.bottomLeft]:c.getPoints(),c.data.split("m").length-1+(c.data.split("M").length-1)==1&&(s[s.length]=s[0])):(s=o?[o.topLeft,o.topRight,o.bottomRight,o.bottomLeft]:Ao(a,a.corners))[s.length]=s[0];return be({x1:i.x,y1:i.y,x2:n.x,y2:n.y},s,!0,h)||i}function ye(t,e,i){return e.x=Math.round(100*e.x)/100,e.y=Math.round(100*e.y)/100,i?t.targetPoint=e:t.sourcePoint=e,e}function be(t,e,i,n){var r,o=e.length,s={x1:e[0].x,y1:e[0].y,x2:e[1].x,y2:e[1].y},a=Se(t,s);if(a&&(r=Gu.distancePoints(a,n)),isNaN(r)||r>0)for(var l=1;l<o-1;l++){var h=Se(t,s={x1:e[parseInt(l.toString(),10)].x,y1:e[parseInt(l.toString(),10)].y,x2:e[l+1].x,y2:e[l+1].y});if(h){var c=Gu.distancePoints(h,n);if((isNaN(r)||r>c)&&(r=c,a=h),r>=0&&r<=1)break}}return a}function Se(t,e){var i,n,r,o,s,a,l,h,c,d,p,u,g,m,f=t.x1,v=t.y1,y=t.x2,b=t.y2,S=e.x1,w=e.y1,I=e.x2,x=e.y2;if(i=b-v,r=f-y,s=y*v-f*b,p=i*S+r*w+s,u=i*I+r*x+s,0!==p&&0!==u&&we(p,u))return null;if(n=x-w,o=S-I,a=I*w-S*x,c=n*f+o*v+a,d=n*y+o*b+a,0!==c&&0!==d&&we(c,d))return null;var M=i*o-n*r;return 0===M?null:(g=M<0?-M/2:M/2,g=0,m=r*a-o*s,l=m<0?(m-g)/M:(m+g)/M,m=n*s-i*a,h=m<0?(m-g)/M:(m+g)/M,{x:l,y:h})}function we(t,e){return t*e>=0}function Ie(t,e,i){switch(e.direction){case"Left":e.point.x>t.left&&(i=e.point.x-t.left>i?e.point.x-t.left+i:i);break;case"Right":e.point.x<t.right&&(i=t.right-e.point.x>i?t.right-e.point.x+i:i);break;case"Top":e.point.y>t.top&&(i=e.point.y-t.top>i?e.point.y-t.top+i:i);break;case"Bottom":e.point.y<t.bottom&&(i=t.bottom-e.point.y>i?t.bottom-e.point.y+i:i)}return i}function xe(t,e){var i;switch(t.direction){case"Left":case"Right":var n={x:e.point.x,y:t.point.y};i=Gu.equals(t.point,n)||Gu.equals(e.point,n)?[t.point,e.point]:[t.point,n,e.point];break;case"Top":case"Bottom":var r={x:t.point.x,y:e.point.y};i=Gu.equals(t.point,r)||Gu.equals(e.point,r)?[t.point,e.point]:[t.point,r,e.point]}return i}function Me(t,e,i,n,r,o){void 0===o&&(o=!1),n||(n=20),o&&e.direction!==i.direction&&(n="Left"===e.direction||"Right"===e.direction?Math.floor(.5*Math.abs(e.point.x-i.point.x)):Math.floor(.5*Math.abs(e.point.y-i.point.y)));var s,a,l,h=t.sourcePortWrapper,c=i.point.x-e.point.x,d=i.point.y-e.point.y;if(!r&&(Math.abs(c)<.001||Math.abs(d)<.001)&&void 0===i.direction)return[e.point,i.point];if(void 0===t.targetWrapper&&Math.abs(c)<=31&&Math.abs(d)<=31){if("Left"===e.direction||"Right"===e.direction?Math.abs(d)<12&&(e.direction=e.point.y>i.point.y?"Top":"Bottom"):Math.abs(c)<12&&(e.direction=e.point.x>i.point.x?"Left":"Right"),Math.abs(c)>12||Math.abs(d)>12)return xe(e,i);n+=5}return"Left"===e.direction||"Right"===e.direction?("Right"===e.direction?(void 0!==i.direction&&"Right"===i.direction&&(n=Math.max(e.point.x,i.point.x)-e.point.x+n),e.point.x>i.point.x&&void 0===h&&(n=-n)):(void 0!==i.direction&&"Left"===i.direction&&(n=e.point.x-Math.min(e.point.x,i.point.x)+n),(e.point.x>i.point.x||void 0!==h||"Left"===e.direction)&&(n=-n)),l=i.point.y-e.point.y,s=fe(e.point,n,0),0!==(l=i.point.y-s.y)&&(a=fe(s,i.point.y-s.y,90))):"Top"!==e.direction&&"Bottom"!==e.direction||("Bottom"===e.direction?void 0!==i.direction&&"Bottom"===i.direction&&(n=Math.max(e.point.y,i.point.y)-e.point.y+n):(void 0!==i.direction&&"Top"===i.direction&&(n=e.point.y-Math.min(e.point.y,i.point.y)+n),(e.point.y>i.point.y||void 0!==h||"Top"===e.direction)&&(n=-n)),l=i.point.x-e.point.x,s=(e.direction,fe(e.point,n,90)),0!==(l=i.point.x-s.x)&&(a=fe(s,i.point.x-s.x,0))),0===l?[e.point,i.point]:[e.point,s,a,i.point]}function Ce(t,e,i,n,r,o){void 0===r&&(r=20),void 0===o&&(o=!1);var s;switch(void 0===i?(t.margin={left:2,right:2,top:2,bottom:2},e.margin={left:0,right:5,top:0,bottom:5},o&&(t.margin={left:10,right:10,top:10,bottom:10},e.margin={left:10,right:10,top:10,bottom:10},"Left"===t.direction?(r=De(t,e,i,r),t.corners.left-e.corners.right>=5&&(r=Math.abs(t.point.x-t.corners.left)+.5*Math.floor(t.corners.left-e.corners.right))):"Right"===t.direction?(r=Te(t,e,r,i),e.corners.left-t.corners.right>=5&&(r=Math.abs(t.point.x-t.corners.right)+.5*Math.floor(e.corners.left-t.corners.right))):"Top"===t.direction?(r=Ee(t,e,i,r),t.corners.top-e.corners.bottom>=5&&(r=Math.abs(t.point.y-t.corners.top)+.5*Math.floor(t.corners.top-e.corners.bottom))):"Bottom"===t.direction&&(r=Oe(t,e,r,i),e.corners.top-t.corners.bottom>=5&&(r=Math.abs(t.point.y-t.corners.bottom)+.5*Math.floor(e.corners.top-t.corners.bottom))))):("Bottom"===t.direction?o?e.corners.top-t.corners.bottom<20&&(r=e.corners.bottom-t.point.y+25):e.corners.top>t.corners.bottom&&e.corners.top-t.corners.bottom<20&&(r=(e.corners.top-t.corners.bottom)/2):"Top"===t.direction?o?t.corners.top-e.corners.bottom<20&&(r=t.point.y-e.corners.top+25):e.corners.bottom<t.corners.top&&t.corners.top-e.corners.bottom<20&&(r=(t.corners.top-e.corners.bottom)/2):"Right"===t.direction?o?e.corners.left-t.corners.right<20&&(r=e.corners.right-t.point.x+25):e.corners.left>t.corners.right&&e.corners.left-t.corners.right<20&&(r=(e.corners.left-t.corners.right)/2):"Left"===t.direction&&(o?t.corners.left-e.corners.right<20&&(r=t.point.x-e.corners.left+25):e.corners.right<t.corners.left&&t.corners.left-e.corners.right<20&&(r=(t.corners.left-e.corners.right)/2)),i==e.direction&&o&&("Bottom"==e.direction&&t.point.y>e.point.y||"Top"==e.direction&&t.point.y<e.point.y?"Left"==t.direction?r=De(t,e,i,20):"Right"==t.direction&&(r=Te(t,e,20,i)):("Right"==e.direction&&t.point.x>e.point.x||"Left"==e.direction&&t.point.x<e.point.x)&&("Top"==t.direction?r=Ee(t,e,i,20):"Bottom"==t.direction&&(r=Oe(t,e,20,i))))),t.direction){case"Left":r=o?r:De(t,e,i,r),s=fe(t.point,r,180);break;case"Right":r=o?r:Te(t,e,r,i),s=fe(t.point,r,0);break;case"Top":r=o?r:Ee(t,e,i,r),s=fe(t.point,r,270);break;case"Bottom":r=o?r:Oe(t,e,r,i),s=fe(t.point,r,90)}return void 0!==n?n.push(s):n=[t.point,s],"Top"===t.direction||"Bottom"===t.direction?Ne(s,"horizontal",t,e,n,o):"Right"!==t.direction&&"Left"!==t.direction||Ne(s,"vertical",t,e,n,o),n}function Ne(t,e,i,n,r,o){var s,a,l;"horizontal"===e?(i.margin={left:0,right:10,top:0,bottom:10},n.margin={left:0,right:10,top:0,bottom:10}):"vertical"===e&&(i.margin={left:10,right:0,top:10,bottom:0},n.margin={left:10,right:0,top:10,bottom:0});var h=20;if("horizontal"===e){switch(n.direction){case"Left":if(i.corners.right+i.margin.right<n.corners.left-n.margin.left&&(n.corners.left-i.margin.right-i.corners.right>h||i.corners.top-i.margin.top<=n.point.y&&i.corners.bottom+i.margin.bottom>=n.point.y))if(!o||"Top"!==i.direction&&"Bottom"!==i.direction){c=Math.min(Math.abs(n.corners.left-i.corners.right)/2,20);h=i.corners.right-t.x+c}else{var c=Math.abs(n.corners.left-i.corners.right)/2;h=i.corners.right-t.x+c}else h="Top"===i.direction&&t.y>n.point.y||"Bottom"===i.direction&&t.y<n.point.y?Math.min(n.corners.left,t.x)-t.x-20:t.x>=i.corners.left-i.margin.left&&t.x<=i.corners.right+i.margin.right?Math.min(n.corners.left,i.corners.left)-t.x-20:n.corners.left-t.x-20;break;case"Right":if(i.corners.left-i.margin.left>n.corners.right+n.margin.right&&(i.corners.left-i.margin.right-n.corners.right>h||i.corners.top-i.margin.top<=n.point.y&&i.corners.bottom+i.margin.bottom>=n.point.y))if(!o||"Top"!==i.direction&&"Bottom"!==i.direction){c=Math.min(Math.abs(i.corners.left-n.corners.right)/2,20);h=i.corners.left-t.x-c}else{var c=Math.abs(i.corners.left-n.corners.right)/2;h=i.corners.left-t.x-c}else h="Top"===i.direction&&t.y>n.point.y||"Bottom"===i.direction&&t.y<n.point.y?Math.max(n.corners.right,t.x)-t.x+20:t.x>=i.corners.left-i.margin.left&&t.x<=i.corners.right+i.margin.right?Math.max(n.corners.right,i.corners.right)-t.x+20:n.corners.right-t.x+20}a=fe(s=fe(t,h,0),n.point.y-t.y,90),l=n.point}else if("vertical"===e){switch(n.direction){case"Top":if(i.corners.bottom+i.margin.bottom<n.corners.top-n.margin.top&&(n.corners.top-i.margin.top-i.corners.bottom>h||i.corners.left-i.margin.left<=n.point.x&&i.corners.right+i.margin.right>=n.point.x))if(!o||"Right"!==i.direction&&"Left"!==i.direction){c=Math.min(Math.abs(n.corners.top-i.corners.bottom)/2,20);h=i.corners.bottom-t.y+c}else{c=Math.abs(n.corners.top-i.corners.bottom)/2;h=i.corners.bottom-t.y+c}else h="Left"===i.direction&&t.x>n.point.x||"Right"===i.direction&&t.x<n.point.x?Math.min(n.corners.top,t.y)-t.y-20:t.y>=i.corners.top-i.margin.top&&t.y<=i.corners.bottom+i.margin.bottom?Math.min(n.corners.top,i.corners.top)-t.y-20:n.corners.top-t.y-20;break;case"Bottom":if(i.corners.top-i.margin.top>n.corners.bottom+n.margin.bottom&&(i.corners.top-i.margin.top-n.corners.bottom>h||i.corners.left-i.margin.left<=n.point.x&&i.corners.right+i.margin.right>=n.point.x))if(!o||"Right"!==i.direction&&"Left"!==i.direction){c=Math.min(Math.abs(i.corners.top-n.corners.bottom)/2,20);h=i.corners.top-t.y-c}else{c=Math.abs(i.corners.top-n.corners.bottom)/2;h=i.corners.top-t.y-c}else h="Left"===i.direction&&t.x>n.point.x||"Right"===i.direction&&t.x<n.point.x?Math.max(n.corners.bottom,t.y)-t.y+20:t.y>=i.corners.top-i.margin.top&&t.y<=i.corners.bottom+i.margin.bottom?Math.max(n.corners.bottom,i.corners.bottom)-t.y+20:n.corners.bottom-t.y+20}a=fe(s=fe(t,h,90),n.point.x-t.x,0),l=n.point}r.push(s),r.push(a),r.push(l)}function Ee(t,e,i,n){return t.corners.top-t.margin.top>e.corners.top+e.margin.top&&t.corners.top-t.margin.top<=e.corners.bottom+e.margin.bottom?("Right"===e.direction&&t.point.x<e.point.x?n+=t.corners.top-e.corners.top:"Left"===e.direction&&t.point.x>e.point.x&&(n+=t.corners.top-e.corners.top),n+=t.point.y-t.corners.top):void 0!==i&&"Left"!==i&&"Right"===e.direction&&t.point.x<e.point.x?n+=Math.abs(t.point.y-e.corners.bottom):void 0!==i&&"Right"!==i&&"Left"===e.direction&&e.point.x<t.point.x?n+=Math.abs(t.point.y-e.corners.bottom):n+=t.point.y-t.corners.top,n}function De(t,e,i,n){return t.corners.left-t.margin.left>e.corners.left-e.margin.left&&t.corners.left-t.margin.left<=e.corners.right+e.margin.right?("Bottom"===e.direction&&t.point.y<e.point.y?n+=t.corners.left-e.corners.left:"Top"===e.direction&&t.point.y>e.point.y&&(n+=t.corners.left-e.corners.left),n+=t.point.x-t.corners.left):void 0!==i&&"Top"!==i&&"Bottom"===e.direction&&t.point.y<e.point.y?n+=Math.abs(t.point.x-e.corners.right):void 0!==i&&"Bottom"!==i&&"Top"===e.direction&&e.point.y<t.point.y?n+=Math.abs(t.point.x-e.corners.right):n+=t.point.x-t.corners.left,n}function Te(t,e,i,n){return t.corners.right+t.margin.right<e.corners.right+e.margin.right&&t.corners.right+t.margin.right>=e.corners.left-e.margin.left?("Bottom"===e.direction&&t.point.y<e.point.y?i+=e.corners.right-t.corners.right:"Top"===e.direction&&t.point.y>e.point.y&&(i+=e.corners.right-t.corners.right),i+=t.corners.right-t.point.x):void 0!==n&&"Top"!==n&&"Bottom"===e.direction&&t.point.y<e.point.y?i+=Math.abs(t.point.x-e.corners.right):void 0!==n&&"Bottom"!==n&&"Top"===e.direction&&e.point.y<t.point.y?i+=Math.abs(t.point.x-e.corners.right):i+=t.corners.right-t.point.x,i}function Oe(t,e,i,n){return t.corners.bottom+t.margin.bottom<e.corners.bottom+e.margin.bottom&&t.corners.bottom+t.margin.bottom>=e.corners.top-e.margin.top?("Right"===e.direction&&t.point.x<e.point.x?i+=e.corners.bottom-t.corners.bottom:"Left"===e.direction&&t.point.x>e.point.x&&(i+=e.corners.bottom-t.corners.bottom),i+=t.corners.bottom-t.point.y):void 0!==n&&"Left"!==n&&"Right"===e.direction&&t.point.x<e.point.x?i+=Math.abs(t.point.y-e.corners.bottom):void 0!==n&&"Right"!==n&&"Left"===e.direction&&e.point.x<t.point.x?i+=Math.abs(t.point.y-e.corners.bottom):i+=t.corners.bottom-t.point.y,i}function Le(t,e){var i=t.direction;t.direction=e.direction,e.direction=i;var n=t.point;t.point=e.point,e.point=n;var r=t.corners;t.corners=e.corners,e.corners=r}function Ae(t,e,i,n){var r=void 0===e?i:e,o=r.topLeft,s=r.topRight,a=r.bottomRight,l=r.bottomLeft,h=r.center,c=ge(h,t),d=ge(h,a),p=ge(h,l),u=ge(h,o),g=ge(h,s);return c>u&&c<g?"Top":c>=d&&c<p?"Bottom":c>=p&&c<=u?"Left":"Right"}function ze(t){var e=t.wrapper.children[0].bounds;return"None"!==t.sourceDecorator.shape&&e.uniteRect(t.wrapper.children[1].bounds),"None"!==t.targetDecorator.shape&&e.uniteRect(t.wrapper.children[2].bounds),e}function ke(t){switch(t){case"Top":return"Bottom";case"Bottom":return"Top";case"Left":return"Right";case"Right":return"Left"}return"auto"}function je(t,e,i,n,r){if(Fg=void 0,Fg=r,Mm=!!n,!t)return{left:0,top:0};e||(e="left"),i||(i="top"),Wg=t.ownerDocument,Yg=t;return function(t,e,i){switch(_g=Yg.getBoundingClientRect(),e+t){case"topcenter":Pe(We(),i),Re(_e(),i);break;case"topright":Pe(Ye(),i),Re(_e(),i);break;case"centercenter":Pe(We(),i),Re(Ve(),i);break;case"centerright":Pe(Ye(),i),Re(Ve(),i);break;case"centerleft":Pe(Fe(),i),Re(Ve(),i);break;case"bottomcenter":Pe(We(),i),Re(Ue(),i);break;case"bottomright":Pe(Ye(),i),Re(Ue(),i);break;case"bottomleft":Pe(Fe(),i),Re(Ue(),i);break;default:case"topleft":Pe(Fe(),i),Re(_e(),i)}return Yg=null,i}(e.toLowerCase(),i.toLowerCase(),{left:0,top:0})}function Pe(t,e){e.left=t}function Re(t,e){e.top=t}function Be(){return Wg.documentElement.scrollTop||Wg.body.scrollTop}function He(){return Wg.documentElement.scrollLeft||Wg.body.scrollLeft}function Ue(){return Mm?_g.bottom:_g.bottom+Be()}function Ve(){return _e()+_g.height/2}function _e(){return Mm?_g.top:_g.top+Be()}function Fe(){return _g.left+He()}function Ye(){var t=Yg&&Yg.classList.contains("e-date-range-wrapper")?Fg?Fg.width:0:Fg&&_g.width>=Fg.width?Fg.width:0;return _g.right+He()-t}function We(){return Fe()+_g.width/2}function Qe(t,e,i,n){if(void 0===e&&(e=null),void 0===i&&(i={X:!1,Y:!1}),!i.Y&&!i.X)return{left:0,top:0};var r=t.getBoundingClientRect();if(Xg=e,Qg=t.ownerDocument,n||(n=je(t,"left","top")),i.X){var o=Xg?ti():di(),s=oi(),a=si(),l=s-n.left,h=n.left+r.width-a;r.width>o?n.left=l>0&&h<=0?a-r.width:h>0&&l<=0?s:l>h?a-r.width:s:l>0?n.left+=l:h>0&&(n.left-=h)}if(i.Y){var c=Xg?ei():ci(),d=ri(),p=ai(),u=d-n.top,g=n.top+r.height-p;r.height>c?n.top=u>0&&g<=0?p-r.height:g>0&&u<=0?d:u>g?p-r.height:d:u>0?n.top+=u:g>0&&(n.top-=g)}return n}function Xe(t,e,i,n){void 0===e&&(e=null);var r=je(t,"left","top");i&&(r.left=i),n&&(r.top=n);var o=[];Xg=e,Qg=t.ownerDocument;var s=t.getBoundingClientRect(),a=r.top,l=r.left,h=r.left+s.width,c=Je(a,r.top+s.height),d=Ze(l,h);return c.topSide&&o.push("top"),d.rightSide&&o.push("right"),d.leftSide&&o.push("left"),c.bottomSide&&o.push("bottom"),o}function qe(t,e,i,n,r,o,s,a,l){if(void 0===s&&(s=null),void 0===a&&(a={X:!0,Y:!0}),e&&t&&r&&o&&(a.X||a.Y)){var h,c={TL:null,TR:null,BL:null,BR:null},d={TL:null,TR:null,BL:null,BR:null};if("none"===window.getComputedStyle(t).display){var p=t.style.visibility;t.style.visibility="hidden",t.style.display="block",h=t.getBoundingClientRect(),t.style.removeProperty("display"),t.style.visibility=p}else h=t.getBoundingClientRect();var u={posX:r,posY:o,offsetX:i,offsetY:n,position:{left:0,top:0}};Xg=s,Qg=e.ownerDocument,function(t,e,i,n,r){i.position=je(t,i.posX,i.posY,n,r),e.TL=je(t,"left","top",n,r),e.TR=je(t,"right","top",n,r),e.BR=je(t,"left","bottom",n,r),e.BL=je(t,"right","bottom",n,r)}(e,c,u,l,h),Ge(d,u,h),a.X&&$e(e,d,c,u,h,!0),a.Y&&c.TL.top>-1&&Ke(e,d,c,u,h,!0),function(t,e,i){var n=0,r=0;if(null!=t.offsetParent&&("absolute"===getComputedStyle(t.offsetParent).position||"relative"===getComputedStyle(t.offsetParent).position)){var o=je(t.offsetParent,"left","top",!1,i);n=o.left,r=o.top}t.style.top=e.position.top+e.offsetY-r+"px",t.style.left=e.position.left+e.offsetX-n+"px"}(t,u,h)}}function Ge(t,e,i){t.TL={top:e.position.top+e.offsetY,left:e.position.left+e.offsetX},t.TR={top:t.TL.top,left:t.TL.left+i.width},t.BL={top:t.TL.top+i.height,left:t.TL.left},t.BR={top:t.TL.top+i.height,left:t.TL.left+i.width}}function Ze(t,e){var i=!1,n=!1;return t-hi()<oi()&&(i=!0),e>si()&&(n=!0),{leftSide:i,rightSide:n}}function $e(t,e,i,n,r,o){var s=Ze(e.TL.left,e.TR.left);i.TL.left-hi()<=oi()&&(s.leftSide=!1),i.TR.left>si()&&(s.rightSide=!1),(s.leftSide&&!s.rightSide||!s.leftSide&&s.rightSide)&&("right"===n.posX?n.posX="left":n.posX="right",n.offsetX=n.offsetX+r.width,n.offsetX=-1*n.offsetX,n.position=je(t,n.posX,n.posY,!1),Ge(e,n,r),o&&$e(t,e,i,n,r,!1))}function Ke(t,e,i,n,r,o){var s=Je(e.TL.top,e.BL.top);i.TL.top-li()<=ri()&&(s.topSide=!1),i.BL.top>=ai()&&t.getBoundingClientRect().bottom<window.innerHeight&&(s.bottomSide=!1),(s.topSide&&!s.bottomSide||!s.topSide&&s.bottomSide)&&("top"===n.posY?n.posY="bottom":n.posY="top",n.offsetY=n.offsetY+r.height,n.offsetY=-1*n.offsetY,n.position=je(t,n.posX,n.posY,!1,r),Ge(e,n,r),o&&Ke(t,e,i,n,r,!1))}function Je(t,e){var i=!1,n=!1;return t-li()<ri()&&(i=!0),e>ai()&&(n=!0),{topSide:i,bottomSide:n}}function ti(){return Xg.getBoundingClientRect().width}function ei(){return Xg.getBoundingClientRect().height}function ii(){return Xg.getBoundingClientRect().left}function ni(){return Xg.getBoundingClientRect().top}function ri(){return Xg?ni():0}function oi(){return Xg?ii():0}function si(){return Xg?hi()+ii()+ti():hi()+di()}function ai(){return Xg?li()+ni()+ei():li()+ci()}function li(){return Qg.documentElement.scrollTop||Qg.body.scrollTop}function hi(){return Qg.documentElement.scrollLeft||Qg.body.scrollLeft}function ci(){return window.innerHeight}function di(){var t=window.innerWidth,e=document.documentElement.getBoundingClientRect();return t-(t-(h(document.documentElement)?0:e.width))}function pi(t,e){for(var i=getComputedStyle(t),n=[],r=/(auto|scroll)/,o=t.parentElement;o&&"HTML"!==o.tagName;){var s=getComputedStyle(o);"absolute"===i.position&&"static"===s.position||!r.test(s.overflow+s.overflowY+s.overflowX)||n.push(o),o=o.parentElement}return e||n.push(document),n}function ui(t){for(var e=t.parentElement,i=[];e&&"BODY"!==e.tagName;){var n=document.defaultView.getComputedStyle(e,null).getPropertyValue("z-index"),r=document.defaultView.getComputedStyle(e,null).getPropertyValue("position");"auto"!==n&&"static"!==r&&i.push(n),e=e.parentElement}for(var o=[],s=0;s<document.body.children.length;s++)if(!t.isEqualNode(document.body.children[s])){n=document.defaultView.getComputedStyle(document.body.children[s],null).getPropertyValue("z-index"),r=document.defaultView.getComputedStyle(document.body.children[s],null).getPropertyValue("position");"auto"!==n&&"static"!==r&&o.push(n)}o.push("999");var a=[];if(!h(t.parentElement)&&"BODY"!==t.parentElement.tagName){var l=[].slice.call(t.parentElement.children);for(s=0;s<l.length;s++)if(!t.isEqualNode(l[s])){n=document.defaultView.getComputedStyle(l[s],null).getPropertyValue("z-index"),r=document.defaultView.getComputedStyle(l[s],null).getPropertyValue("position");"auto"!==n&&"static"!==r&&a.push(n)}}var c=i.concat(o,a),d=Math.max.apply(Math,c)+1;return d>2147483647?2147483647:d}function gi(t,e,i,s,a,l){var h=s;if(s.tagName===e){var c=n("ej2_instances",s);h=t("input",{attrs:{type:i}});for(var d=["change","cssClass","label","labelPosition","id"],p=0,u=s.attributes.length;p<u;p++)-1===d.indexOf(s.attributes[p].nodeName)&&h.setAttribute(s.attributes[p].nodeName,s.attributes[p].nodeValue);L(s,{class:a}),s.appendChild(h),r("ej2_instances",c,h),o(s,"ej2_instances")}return h}function mi(t){for(var e,i=t.childNodes,n=0;n<i.length;n++)if(3===(e=i[n]).nodeType)return e;return null}function fi(t,e,i){void 0===e&&(e=!1),void 0===i&&(i={});var n=t("div",{className:"e-checkbox-wrapper e-css"});if(i.cssClass&&I([n],i.cssClass.split(" ")),i.enableRtl&&n.classList.add("e-rtl"),e){var r=t("span",{className:"e-ripple-container"});et(r,{isCenterRipple:!0,duration:400}),n.appendChild(r)}var o=t("span",{className:"e-frame e-icons"});if(i.checked&&o.classList.add("e-check"),n.appendChild(o),i.label){var s=t("span",{className:"e-label"});i.disableHtmlEncode?s.textContent=i.label:s.innerHTML=i.label,n.appendChild(s)}return n}function vi(t,e){if(e){var i=document.createEvent("MouseEvents");i.initEvent(t.type,!1,!0),e.dispatchEvent(i)}}function yi(t,e){t.element.getAttribute("ejs-for")&&e.appendChild(t.createElement("input",{attrs:{name:t.name||t.element.name,value:"false",type:"hidden"}}))}function bi(t){zv=t.resizeBegin,kv=t.resizing,jv=t.resizeComplete,av=Si(t.element),uv=Si(t.boundary);for(var e=t.direction.split(" "),i=0;i<e.length;i++)if(Nv.indexOf(e[i])>=0&&e[i])!function(t){Ci();var e=w("span",{attrs:{unselectable:"on",contenteditable:"false"}});e.setAttribute("class","e-dialog-border-resize e-"+t),"south"===t&&(e.style.height="2px",e.style.width="100%",e.style.bottom="0px",e.style.left="0px");"north"===t&&(e.style.height="2px",e.style.width="100%",e.style.top="0px",e.style.left="0px");"east"===t&&(e.style.height="100%",e.style.width="2px",e.style.right="0px",e.style.top="0px");"west"===t&&(e.style.height="100%",e.style.width="2px",e.style.left="0px",e.style.top="0px");av.appendChild(e)}(e[i]);else if(""!==e[i].trim()){var n=w("div",{className:"e-icons "+wv+" e-"+e[i]});av.appendChild(n)}hv=t.minHeight,dv=t.minWidth,pv=t.maxWidth,cv=t.maxHeight,t.proxy&&t.proxy.element&&t.proxy.element.classList.contains("e-dialog")?wi(t.proxy):wi()}function Si(t){var e;return h(t)||(e="string"==typeof t?document.querySelector(t):t),e}function wi(t){h(t)&&(t=this);for(var e=av.querySelectorAll("."+wv),i=0;i<e.length;i++){lv=e[i],Ep.add(lv,"mousedown",xi,t);var n="msie"===Np.info.name?"pointerdown":"touchstart";Ep.add(lv,n,Ni,t)}var r=av.querySelectorAll(".e-dialog-border-resize");if(!h(r))for(i=0;i<r.length;i++){lv=r[i],Ep.add(lv,"mousedown",xi,t);n="msie"===Np.info.name?"pointerdown":"touchstart";Ep.add(lv,n,Ni,t)}}function Ii(t){return t.indexOf("mouse")>-1?"mouse":"touch"}function xi(t){if(t.preventDefault(),av=t.target.parentElement,Ci(),Lv=t.pageX,Av=t.pageY,t.target.classList.add(Iv),h(zv)||(mv=this,!0!==zv(t,mv))){this.targetEle&&av&&av.querySelector("."+xv)&&(uv="body"===this.target?null:this.targetEle,pv=this.targetEle.clientWidth,cv=this.targetEle.clientHeight);var e=h(uv)?document:uv;Ep.add(e,"mousemove",Ei,this),Ep.add(document,"mouseup",Mi,this);for(var i=0;i<Mv.length;i++)Pv=!av.classList.contains(Mv[i])}}function Mi(t){var e="msie"===Np.info.name?"pointermove":"touchmove",i="msie"===Np.info.name?"pointerup":"touchend",n=h(uv)?document:uv,r="msie"===Np.info.name?"pointerdown":"touchstart";Ep.remove(n,"mousemove",Ei),Ep.remove(n,e,Ei),Ep.remove(n,r,Ei),h(document.body.querySelector("."+Iv))||document.body.querySelector("."+Iv).classList.remove(Iv),h(jv)||jv(t,mv=this),Ep.remove(document,"mouseup",Mi),Ep.remove(document,i,Mi)}function Ci(){Ev=parseFloat(getComputedStyle(av,null).getPropertyValue("width").replace("px","")),Dv=parseFloat(getComputedStyle(av,null).getPropertyValue("height").replace("px","")),Tv=av.getBoundingClientRect().left,Ov=av.getBoundingClientRect().top}function Ni(t){av=t.target.parentElement,Ci();var e=av.classList.contains("e-dialog");(t.target.classList.contains(wv)||t.target.classList.contains("e-dialog-border-resize"))&&e&&t.target.classList.add(Iv);var i=t.touches?t.changedTouches[0]:t;if(Lv=i.pageX,Av=i.pageY,h(zv)||(mv=this,!0!==zv(t,mv))){var n="msie"===Np.info.name?"pointermove":"touchmove",r="msie"===Np.info.name?"pointerup":"touchend",o=h(uv)?document:uv;Ep.add(o,n,Ei,this),Ep.add(document,r,Mi,this)}}function Ei(t){if(t.target.classList.contains(wv)&&t.target.classList.contains(Iv)?lv=t.target:h(document.body.querySelector("."+Iv))||(lv=document.body.querySelector("."+Iv)),!h(lv)){for(var e="",i=0;i<Sv.length;i++)lv.classList.contains("e-"+Sv[i])&&(e=Sv[i]);switch(h(kv)||kv(t,mv=this),e){case"south":Ti(t);break;case"north":Oi(t);break;case"west":Li(t);break;case"east":Ai(t);break;case"south-east":Ti(t),Ai(t);break;case"south-west":Ti(t),Li(t);break;case"north-east":Oi(t),Ai(t);break;case"north-west":Oi(t),Li(t)}}}function Di(t){return t.getBoundingClientRect()}function Ti(t){var e,i=document.documentElement.clientHeight,n=!1,r=(t.touches?t.changedTouches[0]:t).pageY,o=Di(av);h(uv)||(e=Di(uv)),h(uv)?h(uv)&&(i-r>=0||o.top<0)&&(n=!0):n=!0;var s=Dv+(r-Av);s=s>hv?s:hv;var a=0;h(uv)||(a=e.top);var l=h(uv)?0:uv.offsetHeight-uv.clientHeight,c=o.top-a-l/2;if(c=c<0?0:c,o.top>0&&c+s>cv){if(n=!1,av.classList.contains(Cv))return;av.style.height=cv-parseInt(c.toString(),10)+"px"}else{var d=0;if(n){o.top<0&&i+(o.height+o.top)>0&&s+(d=o.top)<=30&&(s=o.height-(o.height+o.top)+30),s+o.top>=cv&&(av.style.height=o.height+(i-(o.height+o.top))+"px");var p=h(uv)?d:c;s>=hv&&s+p<=cv&&(av.style.height=s+"px")}}}function Oi(t){var e,i=!1,n="mouse"===Ii(t.type)?t.pageY:t.touches[0].pageY,r=Di(av);h(uv)||(e=Di(uv)),!h(uv)&&r.top-e.top>0?i=!0:h(uv)&&n>0&&(i=!0);var o=Dv-(n-Av);if(i&&o>=hv&&o<=cv){var s=0;h(uv)||(s=e.top);var a=Ov-s+(n-Av);a=a>0?a:1,av.style.height=o+"px",av.style.top=a+"px"}}function Li(t){var e,i=document.documentElement.clientWidth,n=!1;h(uv)||(e=Di(uv));var r="mouse"===Ii(t.type)?t.pageX:t.touches[0].pageX,o=Di(av),s=h(uv)?0:uv.offsetWidth-uv.clientWidth,a=h(uv)?0:e.left,l=h(uv)?0:e.width;h(gv)&&(h(uv)?gv=i:(gv=o.left-a-s/2+o.width,gv+=l-s-gv)),!h(uv)&&Math.floor(o.left-e.left+o.width+(e.right-o.right))-s<=pv?n=!0:h(uv)&&r>=0&&(n=!0);var c=Ev-(r-Lv);if(Pv&&(c=c>gv?gv:c),n&&c>=dv&&c<=pv){var d=0;h(uv)||(d=e.left);var p=Tv-d+(r-Lv);p=p>0?p:1,c!==Rv&&Bv&&(av.style.width=c+"px"),Pv&&(av.style.left=p+"px",Bv=1!==p)}Rv=c}function Ai(t){var e,i=document.documentElement.clientWidth,n=!1;h(uv)||(e=Di(uv));var r=(t.touches?t.changedTouches[0]:t).pageX,o=Di(av);!h(uv)&&(o.left-e.left+o.width<=pv||o.right-e.left>=o.width)?n=!0:h(uv)&&i-r>0&&(n=!0);var s=Ev+(r-Lv),a=0;if(h(uv)||(a=e.left),o.left-a+s>pv){if(n=!1,av.classList.contains(Cv))return;av.style.width=pv-(o.left-a)+"px"}n&&s>=dv&&s<=pv&&(av.style.width=s+"px")}function zi(){for(var t=av.querySelectorAll("."+wv),e=0;e<t.length;e++)T(t[e]);var i=av.querySelectorAll(".e-dialog-border-resize");if(!h(i))for(e=0;e<i.length;e++)T(i[e])}function ki(t,e){if(t.target){var i,n=h(e)?w:e,r=function(t,e){var i=e("div",{}),n=e("div",{});return i.classList.add(Qy),n.classList.add(Xy),t.appendChild(i),i.appendChild(n),{wrap:i,inner_wrap:n}}(t.target,n);if(h(t.cssClass)||r.wrap.classList.add(t.cssClass),h(t.template)&&h(Ky)){var o=h(t.type)?function(t){return window.getComputedStyle(t,":after").getPropertyValue("content").replace(/['"]+/g,"")}(r.wrap):t.type;i=function(t,e){var i;switch(e){case"Material":i=Dy;break;case"Material3":i=Ty;break;case"Fabric":i=Oy;break;case"Tailwind":case"Tailwind-dark":i=Oy;break;case"Fluent":i=Ly;break;case"Bootstrap4":i=zy;break;case"Bootstrap5":i=ky;break;default:i=Ay}return t=t?parseFloat(t+""):i,"Bootstrap"===e?t:t/2}(h(t.width)?void 0:t.width,o),function(t,e,i,n){var r=e.querySelector("."+Xy),o=r.querySelector("svg");h(o)||r.removeChild(o);switch(t){case"Material":!function(t,e,i){var n=Pi();Ey[""+n]={timeOut:0,type:"Material",radius:e},Bi(t,n,i,Ry),Ui(e,t,"Material",Ry)}(r,i,n);break;case"Material3":!function(t,e,i){var n=Pi();Ey[""+n]={timeOut:0,type:"Material3",radius:e},Bi(t,n,i,By),Ui(e,t,"Material3",By)}(r,i,n);break;case"Fabric":!function(t,e,i){var n=Pi();Ey[""+n]={timeOut:0,type:"Fabric",radius:e},Ri(t,n,Hy,i),Yi(e,t,Hy)}(r,i,n);break;case"Fluent":!function(t,e,i){var n=Pi();Ey[""+n]={timeOut:0,type:"Fluent",radius:e},Ri(t,n,Uy,i),Yi(e,t,Uy)}(r,i,n);break;case"Bootstrap":!function(t,e,i){var n=Pi();Ey[""+n]={timeOut:0,type:"Bootstrap",radius:e},function(t,e,i){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("id",e),n.setAttribute("class",_y),n.setAttribute("viewBox","0 0 64 64"),t.insertBefore(n,t.firstChild);for(var r=0;r<=7;r++){var o=document.createElementNS("http://www.w3.org/2000/svg","circle");o.setAttribute("class",qy+"_"+r),o.setAttribute("r","2"),o.setAttribute("transform","translate(32,32)"),n.appendChild(o)}}(t,n),function(t,e){var i=t.querySelector("svg.e-spin-bootstrap");i.style.width=i.style.height=e+"px";for(var n=90,r=0;r<=7;r++){var o=Wi(0,0,24,n),s=i.querySelector("."+qy+"_"+r);s.setAttribute("cx",o.x+""),s.setAttribute("cy",o.y+""),n=n>=360?0:n,n+=45}}(t,e)}(r,i);break;case"HighContrast":!function(t,e,i){var n=Pi();Ey[""+n]={timeOut:0,type:"HighContrast",radius:e},Ri(t,n,Wy,i),Yi(e,t,Wy)}(r,i,n);break;case"Bootstrap4":!function(t,e,i){var n=Pi();Ey[""+n]={timeOut:0,type:"Bootstrap4",radius:e},Bi(t,n,i,Fy),Ui(e,t,"Bootstrap4",Fy)}(r,i,n);break;case"Bootstrap5":!function(t,e,i){var n=Pi();Ey[""+n]={timeOut:0,type:"Bootstrap5",radius:e},Bi(t,n,i,Yy),Ui(e,t,"Bootstrap5",Yy)}(r,i,n);break;case"Tailwind":case"Tailwind-dark":!function(t,e,i){var n=Pi();Ey[""+n]={timeOut:0,type:"Tailwind",radius:e},Ri(t,n,Vy,i),Yi(e,t,Vy)}(r,i,n)}}(o,r.wrap,i,n),h(t.label)||function(t,e,i){var n=i("div",{});n.classList.add(Zy),n.innerHTML=e,t.appendChild(n)}(r.inner_wrap,t.label,n)}else{var s=h(t.template)?Ky:t.template;r.wrap.classList.add($y),function(t,e,i){h(i)||t.classList.add(i);t.querySelector(".e-spinner-inner").innerHTML=e}(r.wrap,s,Jy)}r.wrap.classList.add(Py),r=null}}function ji(t,e){function i(t){n.push(t),t===o&&1!==a||(t<=r&&t>1&&!s?t=parseFloat((t-.2).toFixed(2)):1===t?(t=7,t=parseFloat((t+.2).toFixed(2)),s=!0):t<8&&s?8===(t=parseFloat((t+.2).toFixed(2)))&&(s=!1):t<=8&&!s&&(t=parseFloat((t-.2).toFixed(2))),++a,i(t))}var n=[],r=t,o=e,s=!1,a=1;return i(r),n}function Pi(){for(var t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<5;i++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}function Ri(t,e,i,n){var r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("id",e),r.setAttribute("class",i);var o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("class",qy);var s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("class",Gy),t.insertBefore(r,t.firstChild),r.appendChild(o),r.appendChild(s)}function Bi(t,e,i,n){var r=document.createElementNS("http://www.w3.org/2000/svg","svg"),o=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("class",n),r.setAttribute("id",e),o.setAttribute("class",qy),t.insertBefore(r,t.firstChild),r.appendChild(o)}function Hi(t){!function(t,e,i,n,r,o,s){function a(e){var r=Math.max(0,Math.min((new Date).getTime()-c,n));!function(t,e){if(!h(e.querySelector("svg.e-spin-material"))||!h(e.querySelector("svg.e-spin-material3"))){var i=void 0;if(h(e.querySelector("svg.e-spin-material"))||h(e.querySelector("svg.e-spin-material").querySelector("path.e-path-circle"))?h(e.querySelector("svg.e-spin-material3"))||h(e.querySelector("svg.e-spin-material3").querySelector("path.e-path-circle"))||(i=e.querySelector("svg.e-spin-material3")):i=e.querySelector("svg.e-spin-material"),!h(i)){var n=i.querySelector("path.e-path-circle");n.setAttribute("stroke-dashoffset",_i(p,u,t,o)+""),n.setAttribute("transform","rotate("+g+" "+p/2+" "+p/2+")")}}}(i(r,t,d,n),e.container),l===e.globalInfo[e.uniqueID].previousId&&r<n?Ey[e.uniqueID].timeOut=setTimeout(a.bind(null,e),1):Hi(e)}var l=++s.globalInfo[s.uniqueID].previousId,c=(new Date).getTime(),d=e-t,p=function(t){return parseFloat(t)}(2*s.globalInfo[s.uniqueID].radius+""),u=Vi(p),g=-90*(s.globalInfo[s.uniqueID].count||0);a(s)}(1,149,Fi,1333,t.globalInfo[t.uniqueID].count,75,t),t.globalInfo[t.uniqueID].count=++t.globalInfo[t.uniqueID].count%4}function Ui(t,e,i,n){var r=2*t,o=e.querySelector("svg."+n),s=o.querySelector("path.e-path-circle"),a=Vi(r),l=r/2+"px";o.setAttribute("viewBox","0 0 "+r+" "+r),o.style.width=o.style.height=r+"px",o.style.transformOrigin=l+" "+l+" "+l,s.setAttribute("d",function(t,e){var i=t/2,n=e/2;return"M"+i+","+n+"A"+(i-n)+","+(i-n)+" 0 1 1 "+n+","+i}(r,a)),"Material"!==i&&"Material3"!==i||(s.setAttribute("stroke-width",a+""),s.setAttribute("stroke-dasharray",(r-a)*Math.PI*.75+""),s.setAttribute("stroke-dashoffset",_i(r,a,1,75)+""))}function Vi(t){return.1*t}function _i(t,e,i,n){return(t-e)*Math.PI*(3*n/100-i/100)}function Fi(t,e,i,n){var r=(t/=n)*t,o=r*t;return e+i*(6*o*r+-15*r*r+10*o)}function Yi(t,e,i){var n=t,r=t,o=2*t,s=e.querySelector("."+i),a=s.querySelector(".e-path-circle"),l=s.querySelector(".e-path-arc"),h=o/2+"px";a.setAttribute("d",function(t,e,i){return["M",t,e,"m",-i,0,"a",i,i,0,1,0,2*i,0,"a",i,i,0,1,0,2*-i,0].join(" ")}(n,r,t)),l.setAttribute("d",function(t,e,i,n,r){var o=Wi(t,e,i,r),s=Wi(t,e,i,n);return["M",o.x,o.y,"A",i,i,0,0,0,s.x,s.y].join(" ")}(n,r,t,315,45)),s.setAttribute("viewBox","0 0 "+o+" "+o),s.style.transformOrigin=h+" "+h+" "+h,s.style.width=s.style.height=o+"px"}function Wi(t,e,i,n){var r=(n-90)*Math.PI/180;return{x:t+i*Math.cos(r),y:e+i*Math.sin(r)}}function Qi(t){Xi(t,!1),t=null}function Xi(t,e){var i;if(t&&(i=t.classList.contains(Qy)?t:t.querySelector("."+Qy)),t&&i){var n=i.querySelector("."+Xy);if(e?!i.classList.contains($y)&&!i.classList.contains(Py):!i.classList.contains($y)&&!i.classList.contains(jy)){var r=i.querySelector("svg");if(h(r))return;var o=r.getAttribute("id");switch(Ey[""+o].isAnimate=!e,Ey[""+o].type){case"Material":case"Material3":e?clearTimeout(Ey[o].timeOut):function(t,e,i){var n={};Ey[""+e].timeOut=0,n[""+e]=function(t,e,i,n){return{radius:e,count:i,previousId:n}}(0,i,0,0),Hi({uniqueID:e,container:t,globalInfo:n,timeOutVar:0})}(n,o,Ey[o].radius);break;case"Bootstrap":e?clearTimeout(Ey[o].timeOut):function(t){for(var e=t.querySelector("svg.e-spin-bootstrap").getAttribute("id"),i=1;i<=8;i++)!function(t,e,i,n,r){function o(e){Ey[""+r].isAnimate&&(++s,t.setAttribute("r",e+""),s>=n.length&&(s=0),Ey[r].timeOut=setTimeout(o.bind(null,n[s]),18))}var s=0;o(e)}(t.getElementsByClassName("e-path-circle_"+(8===i?0:i))[0],i,0,ji(i,i),e)}(n)}}e?R(i,[Py],[jy]):R(i,[jy],[Py]),t=null}}function qi(t){Xi(t,!0),t=null}function Gi(t,e,i,n,r){if(ly=i+e==="topright"?void 0:r,ly=r,tb=!!n,!t)return{left:0,top:0};e||(e="left"),i||(i="top"),cy=t.ownerDocument,hy=t;return function(t,e,i){switch(ay=hy.getBoundingClientRect(),e+t){case"topcenter":Zi(sn(),i),$i(nn(),i);break;case"topright":Zi(on(),i),$i(nn(),i);break;case"centercenter":Zi(sn(),i),$i(en(),i);break;case"centerright":Zi(on(),i),$i(en(),i);break;case"centerleft":Zi(rn(),i),$i(en(),i);break;case"bottomcenter":Zi(sn(),i),$i(tn(),i);break;case"bottomright":Zi(on(),i),$i(tn(),i);break;case"bottomleft":Zi(rn(),i),$i(tn(),i);break;default:case"topleft":Zi(rn(),i),$i(nn(),i)}return i}(e.toLowerCase(),i.toLowerCase(),{left:0,top:0})}function Zi(t,e){e.left=t}function $i(t,e){e.top=t}function Ki(){return cy.documentElement.scrollTop||cy.body.scrollTop}function Ji(){return cy.documentElement.scrollLeft||cy.body.scrollLeft}function tn(){return tb?ay.bottom:ay.bottom+Ki()}function en(){return nn()+ay.height/2}function nn(){return tb?ay.top:ay.top+Ki()}function rn(){return ay.left+Ji()}function on(){return ay.right+Ji()-(ly?ly.width:0)}function sn(){return rn()+ay.width/2}function an(t,e,i,n){void 0===e&&(e=null);var r=Gi(t,"left","top");i&&(r.left=i),n&&(r.top=n);var o=[];py=e,dy=t.ownerDocument;var s=t.getBoundingClientRect(),a=r.top,l=r.left,h=r.left+s.width,c=function(t,e){var i=!1,n=!1;t-fn()<pn()&&(i=!0);e>mn()&&(n=!0);return{topSide:i,bottomSide:n}}(a,r.top+s.height),d=function(t,e){var i=!1,n=!1;t-vn()<un()&&(i=!0);e>gn()&&(n=!0);return{leftSide:i,rightSide:n}}(l,h);return c.topSide&&o.push("top"),d.rightSide&&o.push("right"),d.leftSide&&o.push("left"),c.bottomSide&&o.push("bottom"),o}function ln(){return py.getBoundingClientRect().width}function hn(){return py.getBoundingClientRect().height}function cn(){return py.getBoundingClientRect().left}function dn(){return py.getBoundingClientRect().top}function pn(){return py?dn():0}function un(){return py?cn():0}function gn(){return py?vn()+cn()+ln():vn()+bn()}function mn(){return py?fn()+dn()+hn():fn()+yn()}function fn(){return dy.documentElement.scrollTop||dy.body.scrollTop}function vn(){return dy.documentElement.scrollLeft||dy.body.scrollLeft}function yn(){return window.innerHeight}function bn(){var t=window.innerWidth;return t-(t-(h(document.documentElement)?0:document.documentElement.offsetWidth))}function Sn(t){var e;if(f())e=new ub(t),e=Mn(t.tooltip,e);else{var i=new Ny;i=Mn(t.tooltip,i),(e=new Ny(i)).beforeCollision=In,e.beforeOpen=wn,e.cssClass="e-diagram-tooltip",e.opensOn="custom",e.appendTo("#"+t.element.id),e.close()}return e}function wn(t){""!==this.content&&void 0!==this.content||(t.element.style.display="none")}function In(t){t.collidedPosition&&t.collidedPosition!==this.position&&(t.element.style.display="none")}function xn(t,e){var i=t.tooltipObject;return Mn(e?e.tooltip:t.tooltip,i),i}function Mn(t,e){return t.content?(e.content=t.content,e.position=t.position,e.showTipPointer=t.showTipPointer,e.width=t.width,e.height=t.height,t.animation?e.animation=t.animation:e.animation={close:{effect:"None"}}):e.close(),e}function Cn(t){if(t){return t instanceof vm||t instanceof ym?t.constraints&Sg.Select:t instanceof ES?t.constraints&bg.Select:t.constraints&wg.Select}return 1}function Nn(t){if(t){return t instanceof vm||t instanceof ym?t.constraints&Sg.Drag:t instanceof ES?t.constraints&bg.Drag:t instanceof _w?1:t.constraints&wg.Drag}return 1}function En(t,e){return t instanceof ES?t.constraints&bg.PointerEvents:t.constraints&wg.PointerEvents}function Dn(t){return t instanceof ES?t.constraints&bg.Delete:t.constraints&wg.Delete}function Tn(t){return t.constraints&bg.DragSourceEnd}function On(t){return t.constraints&bg.DragTargetEnd}function Ln(t){return t.constraints&bg.DragSegmentThumb}function An(t){return t instanceof vm||t instanceof ym?t.constraints&Sg.Rotate:t.constraints&wg.Rotate}function zn(t){return t.constraints&wg.Shadow}function kn(t){return t instanceof Pw&&t.constraints&wg.InConnect?t.constraints&wg.InConnect:0}function jn(t){return t&&t.constraints&&!(t.constraints&Pg.None)&&t.constraints&Pg.InConnect?t.constraints&Pg.InConnect:0}function Pn(t){return t instanceof Pw&&t.constraints&wg.OutConnect?t.constraints&wg.OutConnect:0}function Rn(t){return t&&t.constraints&&!(t.constraints&Pg.None)&&t.constraints&Pg.OutConnect?t.constraints&Pg.OutConnect:0}function Bn(t,e){var i=0;return t instanceof vm||t instanceof ym?i=t.constraints&Sg.Resize:t&&("SouthEast"===e?i=t.constraints&wg.ResizeSouthEast:"East"===e?i=t.constraints&wg.ResizeEast:"NorthEast"===e?i=t.constraints&wg.ResizeNorthEast:"South"===e?i=t.constraints&wg.ResizeSouth:"North"===e?i=t.constraints&wg.ResizeNorth:"SouthWest"===e?i=t.constraints&wg.ResizeSouthWest:"West"===e?i=t.constraints&wg.ResizeWest:"NorthWest"===e&&(i=t.constraints&wg.ResizeNorthWest)),i}function Hn(t){return t instanceof ES?t.constraints&bg.AllowDrop:t.constraints&wg.AllowDrop}function Un(t){return t.constraints&Mg.Virtualization}function Vn(t){return t.tool&Cg.SingleSelect}function _n(t){return t.tool&Cg.MultipleSelect}function Fn(t){return t.tool&Cg.ZoomPan}function Yn(t){return t.tool&Cg.ContinuousDraw}function Wn(t){return t.tool&Cg.DrawOnce}function Qn(t){return t.tool&Cg.SingleSelect||t.tool&Cg.MultipleSelect}function Xn(t){return t.constraints&Mg.UserInteraction}function qn(t){return t.constraints&Mg.ZoomTextEdit}function Gn(t){return function(t){return t.constraints&Mg.ApiUpdate}(t)||t.diagramActions&Og.ToolAction}function Zn(t,e){return t.constraints&Pg.Draw}function $n(t,e){return t.constraints&Pg.Drag}function Kn(t){return!(t&Lg.DrawSelectorBorder)}function Jn(t){return!!(t&Lg.PreventRenderSelector)}function tr(t,e,i){i.width||0!==i.shape.phases.length||(i.width=100);var n=[],r=[],o=0,s=i.shape,a="Horizontal"===s.orientation;if(s.header&&s.hasHeader&&rr(n,s.header.height),function(t,e,i){var n,r=0,o=i.shape;if(t.length>0)for(var s=0;s<t.length;s++)r+=t[parseInt(s.toString(),10)].height;if(e){if(o.phases.length>0&&o.phaseSize&&(r+=o.phaseSize,rr(t,o.phaseSize)),o.lanes.length>0)for(var s=0;s<o.lanes.length;s++)n=o.lanes[parseInt(s.toString(),10)].height,r+=n,s===o.lanes.length-1&&r<i.height&&(n+=i.height-r),rr(t,n)}else if(o.phases.length>0)for(var a=0,s=0;s<o.phases.length;s++){var l=o.phases[parseInt(s.toString(),10)].offset;a+=0===s?l:l-=a,r+=n=l,s===o.phases.length-1&&r<i.height&&(n+=i.height-r),rr(t,n)}else rr(t,i.height)}(n,a,i),function(t,e,i){var n,r,o,s,a=0,l=i.shape;if(l.phases.length>0&&"Horizontal"===l.orientation)for(s=0;s<l.phases.length;s++)n=l.phases[parseInt(s.toString(),10)].offset,a+=0===s?n:n-=a,r=or(n),s===l.phases.length-1&&a<i.width&&(r.width+=i.width-a),t.push(r);else if(e)r=or(i.width),t.push(r);else{for(l.phaseSize&&l.phases.length>0?l.lanes.length+1:l.lanes.length,l.phaseSize&&l.phases.length>0&&(a+=l.phaseSize,r=or(l.phaseSize),t.push(r)),o=0;o<l.lanes.length;o++)a+=l.lanes[parseInt(o.toString(),10)].width,r=or(l.lanes[parseInt(o.toString(),10)].width),o===l.lanes.length-1&&a<i.width&&(r.width+=i.width-a),t.push(r);0===l.phases.length&&0===l.lanes.length&&(r=or(i.width),t.push(r))}}(r,a,i),t.setDefinitions(n,r),s.header&&s.hasHeader&&(!function(t,e,i){for(var n=0,r=t.columnDefinitions(),o=i.shape,s=0;s<r.length;s++)n+=r[parseInt(s.toString(),10)].width;o.header.id=o.header.id||da();var a={id:i.id+o.header.id,annotations:[fa(o.header.annotation)],style:o.header.style?o.header.style:void 0,offsetX:i.offsetX,offsetY:i.offsetY,rowIndex:0,columnIndex:0,maxWidth:n,container:{type:"Canvas",orientation:"Horizontal"}};Cn(i)||(a.constraints&=~wg.Select);var l=er(e,t,i,a,!0);t.addObject(l,0,0,1,t.columnDefinitions().length)}(t,e,i),o++),s.phases.length>0&&s.phaseSize){for(var l=0;l<s.phases.length;l++)""===s.phases[parseInt(l.toString(),10)].id&&(s.phases[parseInt(l.toString(),10)].id=da()),ir(t,e,i,o,a,l);o++}if(s.lanes.length>0)for(l=0;l<s.lanes.length;l++)""===s.lanes[parseInt(l.toString(),10)].id&&(s.lanes[parseInt(l.toString(),10)].id=da()),nr(t,e,i,o,l,a),o++}function er(t,e,i,n,r,o,s,a){var l=new Pw(t,"nodes",n,!0);l.parentId=i.id,l.isHeader=!!r,l.isPhase=!!o,l.isLane=!!s;if(a&&(l[""+(o?"PhaseHeaderParent":"LaneHeaderParent")]=a),l.constraints&=~(wg.InConnect|wg.OutConnect),l.constraints|=wg.HideThumbs,t.initObject(l),t.nodes.push(l),l.wrapper.children.length>0){for(var h=0;h<l.wrapper.children.length;h++){var c=l.wrapper.children[parseInt(h.toString(),10)];c instanceof Gg&&(c.isCalculateDesiredSize=!1),c instanceof Jg&&(c.canConsiderBounds=!1,(!r&&"Vertical"===i.shape.orientation&&o||"Vertical"!==i.shape.orientation&&s)&&(c.isLaneOrientation=!0,c.refreshTextElement()))}l.wrapper.measure(new Qu(void 0,void 0)),l.wrapper.arrange(l.wrapper.desiredSize)}return l.wrapper}function ir(t,e,i,n,r,o){var s,a=0,l=0,h=i.shape;r?(l=o,a=n,s=t.columnDefinitions()[parseInt(o.toString(),10)].width):a=h.header&&h.hasHeader?o+1:o;var c={annotations:[fa(h.phases[parseInt(o.toString(),10)].header.annotation)],maxWidth:s,id:i.id+h.phases[parseInt(o.toString(),10)].id+"_header",addInfo:h.phases[parseInt(o.toString(),10)].addInfo,offsetX:i.offsetX,offsetY:i.offsetY,style:h.phases[parseInt(o.toString(),10)].style,rowIndex:a,columnIndex:l,container:{type:"Canvas",orientation:r?"Horizontal":"Vertical"}};c.annotations[0].rotateAngle=r?0:270,Cn(i)||(c.constraints&=~wg.Select),h.phases[parseInt(o.toString(),10)].header.id=c.id;var d=er(e,0,i,c,!1,!0,!1,h.phases[parseInt(o.toString(),10)].id);t.addObject(d,a,l)}function nr(t,e,i,n,r,o){for(var s,a,l,h,c,d=i.shape,p=d.phases.length||1,u=d.header&&d.hasHeader?1:0,g=o?n:u,m=d.phaseSize&&d.phases.length>0?1:0,f=0;f<p;f++){var v=o?f:r+m;l=t.rows[parseInt(g.toString(),10)].cells[parseInt(v.toString(),10)],h={id:i.id+d.lanes[parseInt(r.toString(),10)].id+f,rowIndex:g,columnIndex:v,width:l.minWidth,height:l.minHeight,offsetX:i.offsetX,offsetY:i.offsetY,style:d.lanes[parseInt(r.toString(),10)].style,addInfo:d.lanes[parseInt(r.toString(),10)].addInfo,constraints:wg.Default|wg.ReadOnly|wg.AllowDrop,container:{type:"Canvas",orientation:o?"Horizontal":"Vertical"}},Cn(i)||(h.constraints&=~wg.Select),(a=er(e,0,i,h,!1,!1,!0)).children[0].isCalculateDesiredSize=!1,0===f&&((s={id:i.id+d.lanes[parseInt(r.toString(),10)].id+"_"+f+"_header",style:d.lanes[parseInt(r.toString(),10)].header.style,annotations:[fa(d.lanes[parseInt(r.toString(),10)].header.annotation)],offsetX:i.offsetX,offsetY:i.offsetY,rowIndex:g,columnIndex:v,container:{type:"Canvas",orientation:o?"Horizontal":"Vertical"}}).annotations[0].rotateAngle=o?270:0,d.lanes[parseInt(r.toString(),10)].header.id=s.id,o?s.width=d.lanes[r].header.width:s.height=d.lanes[parseInt(r.toString(),10)].header.height,Cn(i)||(s.constraints&=~wg.Select),c=er(e,0,i,s,!1,!1,!0,d.lanes[parseInt(r.toString(),10)].id),o&&(c.children[0].elementActions=c.children[0].elementActions|Ig.HorizontalLaneHeader),a.children.push(c)),t.addObject(a,g,v),o||g++,v=o?f:r+1}}function rr(t,e){var i=new zb;i.height=e,t.push(i)}function or(t){var e=new kb;return e.width=t,e}function sr(t,e,i,n){for(var r,o,s,a,l,h,c,d=[],p=0,u=e.rowDefinitions().length,g=0;g<u;g++)for(h=e.rows[parseInt(g.toString(),10)],a=0;a<h.cells.length;a++)if((l=h.cells[parseInt(a.toString(),10)].children[0])&&l.children&&l.children.length)for(s=1;s<l.children.length;s++)if(r=l.children[parseInt(s.toString(),10)],(o=t.getObject(r.id))&&(o.inEdges.length>0||o.outEdges.length>0))for(c=o.inEdges.concat(o.outEdges),p=0;p<c.length;p++)-1===d.indexOf(c[parseInt(p.toString(),10)])&&d.push(c[parseInt(p.toString(),10)]);return d}function ar(t){var e=t.wrapper;if(e.measure(new Qu(t.width,t.height)),e.children[0]instanceof Ab){var i=e.children[0],n=!1;i.width&&i.width<i.desiredSize.width&&(n=!0,i.width=i.desiredSize.width),i.height&&i.height<i.desiredSize.height&&(n=!0,i.height=i.desiredSize.height),n&&i.measure(new Qu(i.width,i.height))}e.arrange(e.desiredSize)}function lr(t,e,i){var n,r,o,s,a,l,h,c,d=e.wrapper.children[0];for(n=i;n<d.rows.length;n++)for(l=d.rows[parseInt(n.toString(),10)],r=0;r<l.cells.length;r++)if((h=l.cells[parseInt(r.toString(),10)]).children&&h.children.length>0)for(o=0;o<h.children.length;o++)c=h.children[parseInt(o.toString(),10)],(s=t.nameTable[c.id]).isLane&&c.children.length>1&&(a=t.nameTable[c.children[1].id])&&a.isLane&&(a.rowIndex=n,a.columnIndex=r),s.rowIndex=n,s.columnIndex=r}function hr(t,e){var i,n,r,o,s,a,l,h,c=e.wrapper.children[0],d=e.shape,p=d.padding,u=d.lanes,g=c.bounds.y,m=d.phaseSize>0?d.phases.length:0,f="Horizontal"===d.orientation,v=f?d.phases.length||1:u.length+1,y=f?(d.header&&d.hasHeader?1:0)+(d.phases.length>0?1:0)+d.lanes.length:(d.header&&d.hasHeader?1:0)+d.phases.length;if(0===m&&!f&&d.lanes.length&&(y+=1),f?(i=(d.header&&d.hasHeader?1:0)+(m>0?1:0),n=0):(i=d.header&&d.hasHeader?1:0,n=m>0?1:0),u.length>0)for(g+=d.header&&d.hasHeader?d.header.height:0,a=0;a<u.length;a++){for(l=0;l<u[parseInt(a.toString(),10)].children.length;l++)if(r=u[parseInt(a.toString(),10)].children[parseInt(l.toString(),10)],r.offsetX=u[parseInt(a.toString(),10)].width,r.offsetY=u[parseInt(a.toString(),10)].height,t.initObject(r),t.nodes.push(r),"Bpmn"===r.shape.type&&r.shape.annotations&&r.shape.annotations.length>0&&(e.isTextNode=!0),o=r.wrapper,f){for(h=n;h<v;h++)if(s=c.rows[parseInt(i.toString(),10)].cells[parseInt(h.toString(),10)],o.margin.left<s.bounds.right-c.bounds.x){r.parentId=s.children[0].id,h>n?o.margin.left=o.margin.left-(s.bounds.left-c.bounds.left):s.children[0].children[1].actualSize.width+p>=o.margin.left&&(o.margin.left=s.children[0].children[1].actualSize.width+p),o.margin.left<p&&(o.margin.left=p),o.margin.top<p&&(o.margin.top=p),cr(o,r,t);break}}else for(var b=i;b<y;b++)if(s=c.rows[parseInt(b.toString(),10)].cells[parseInt(n.toString(),10)],o.margin.top<s.bounds.bottom-g){r.parentId=s.children[0].id,b>i?o.margin.top=o.margin.top-(s.bounds.top-g):s.children[0].children[1].actualSize.height+p>=o.margin.top&&(o.margin.top=s.children[0].children[1].actualSize.height+p),o.margin.left<p&&(o.margin.left=p),o.margin.top<p&&(o.margin.top=p),cr(o,r,t);break}f?i++:n++}c.measure(new Qu(e.width,e.height)),c.arrange(c.desiredSize),function(t,e){var i,n,r,o,s,a,l=t.columnDefinitions(),h=t.rowDefinitions(),c=vr(e);"Vertical"===e.shape.orientation&&0===c&&(c=e.shape.header&&e.shape.hasHeader?1:0);var d=e.shape.padding;for(i=0;i<l.length;i++)t.updateColumnWidth(i,l[parseInt(i.toString(),10)].width,!0,d);for(i=c;i<h.length;i++)t.updateRowHeight(i,h[parseInt(i.toString(),10)].height,!0,d);for(n=0;n<h.length;n++)for(a=t.rows[parseInt(n.toString(),10)],i=0;i<l.length;i++)if((o=a.cells[parseInt(i.toString(),10)]).children&&o.children.length>0)for(r=0;r<o.children.length;r++)(s=o.children[parseInt(r.toString(),10)]).maxWidth&&(s.maxWidth=o.actualSize.width),s.maxHeight&&(s.maxHeight=o.actualSize.height)}(c,e),e.width=e.wrapper.width=c.width,e.height=e.wrapper.height=c.height,br(t,e),e.wrapper.measure(new Qu(e.width,e.height)),e.wrapper.arrange(c.desiredSize),function(t){if("SwimLane"===t.shape.type)for(var e=t.shape.lanes,i=void 0,n=void 0,r=0;r<e.length;r++){i=e[parseInt(r.toString(),10)];for(var o=0;o<i.children.length;o++)(n=i.children[parseInt(o.toString(),10)]).offsetX=n.wrapper.offsetX,n.offsetY=n.wrapper.offsetY}}(e),pr(e,t),dr(e)}function cr(t,e,i){t.measure(new Qu(e.width,e.height)),t.arrange(t.desiredSize);var n=i.getObject(e.parentId);i.addChild(n,e.id)}function dr(t){if("SwimLane"===t.shape.type&&!t.shape.isLane&&!t.shape.isPhase){var e=void 0,i=void 0,n=void 0,r=t.shape.lanes,o=vr(t),s=t.wrapper.children[0].rowDefinitions();for(i=0;i<r.length;i++,o++)e=r[parseInt(i.toString(),10)],"Horizontal"===t.shape.orientation?(n=s[parseInt(o.toString(),10)].height,e.height!==n&&(e.height=n)):(n=t.wrapper.children[0].columnDefinitions()[parseInt(o.toString(),10)].width,e.width!==n&&(e.width=n))}}function pr(t,e){var i,n,r,o,s=t.shape,a=s.phases,l=s.header&&s.hasHeader?1:0,h=t.wrapper.children[0],c=h.bounds.y+(s.header&&s.hasHeader?s.header.height:0);if("SwimLane"===t.shape.type&&(t=e.getObject(t.id)||t,a.length>0))if(h=t.wrapper.children[0],"Horizontal"===s.orientation)for(r=s.header&&s.hasHeader?h.rows[1]:h.rows[0],i=0;i<a.length;i++)n=(o=r.cells[parseInt(i.toString(),10)].children[0]).bounds.right-h.bounds.x,a[parseInt(i.toString(),10)].offset!==n&&(a[parseInt(i.toString(),10)].offset=n),e.nameTable[o.id].maxWidth=o.maxWidth;else for(i=0;i<a.length;i++)n=(o=h.rows[l+i].cells[0].children[0]).bounds.bottom-c,a[parseInt(i.toString(),10)].offset!==n&&(a[parseInt(i.toString(),10)].offset=n),e.nameTable[o.id].maxWidth=o.maxWidth}function ur(t,e){if(t&&t.length>0){var i=void 0;e.lineRoutingModule&&e.constraints&Mg.LineRouting&&e.lineRoutingModule.renderVirtualRegion(e,!0);for(var n=0;n<t.length;n++)i=e.getObject(t[parseInt(n.toString(),10)]),e.lineRoutingModule&&e.constraints&Mg.LineRouting&&"Orthogonal"===i.type?e.lineRoutingModule.refreshConnectorSegments(e,i,!0):e.connectorPropertyChange(i,{},{sourceID:i.sourceID,targetID:i.targetID})}}function gr(t,e,i,n){var r,o,s,a,l,h,c,d,p=t.getObject(e.parentId),u=p.shape,g=p.wrapper.children[0],m=u.lanes,f=sr(t,g,e.rowIndex);if("Horizontal"===u.orientation&&e.rowIndex!==i.rowIndex||"Vertical"===u.orientation&&e.columnIndex!==i.columnIndex){if("Horizontal"===u.orientation)a=e.rowIndex,l=i.rowIndex,r=(u.header&&u.hasHeader?1:0)+(u.phases.length&&u.phaseSize?1:0),c=e.rowIndex-r,d=i.rowIndex-r,m[parseInt(c.toString(),10)].canMove&&(c<d?n&&i.wrapper.offsetY>n.y&&(l+=d>0?-1:1,d+=d>0?-1:1):n&&i.wrapper.offsetY<n.y&&(l+=1,d+=1),a!==l&&g.updateRowIndex(a,l));else if(a=e.columnIndex,l=i.columnIndex,r=u.phases.length&&u.phaseSize?1:0,c=e.columnIndex-r,d=i.columnIndex-r,u.header&&u.hasHeader?1:0,m[parseInt(c.toString(),10)].canMove&&(c<d?n&&i.wrapper.offsetX>n.x&&(l+=d>0?-1:1,d+=d>0?-1:1):n&&i.wrapper.offsetX<n.x&&(l+=1,d+=1),a!==l)){if(!(0!==u.phaseSize&&0!==u.phases.length||0!==l&&0!==a)&&u.header&&u.hasHeader){var v=0===l?a:l;g.rows[0].cells[parseInt(v.toString(),10)].children=g.rows[0].cells[0].children,g.rows[0].cells[parseInt(v.toString(),10)].columnSpan=g.rows[0].cells[0].columnSpan,g.rows[0].cells[0].children=[]}g.updateColumnIndex(0,a,l)}a!==l&&(h=m[parseInt(c.toString(),10)]).canMove&&(o={target:fa(i),source:fa(e)},h=m[parseInt(c.toString(),10)],m.splice(c,1),m.splice(d,0,h),s={type:"LanePositionChanged",redoObject:{target:fa(o.source),source:fa(o.target)},undoObject:o,category:"Internal"},t.diagramActions&Og.UndoRedo||t.commandHandler.addHistoryEntry(s),lr(t,p,0),ur(f,t),function(t,e){for(var i,n,r=0;r<t.length;r++){i=t[parseInt(r.toString(),10)];for(var o=0;o<i.children.length;o++)(n=e.nameTable[i.children[parseInt(o.toString(),10)].id]).offsetX=n.wrapper.offsetX,n.offsetY=n.wrapper.offsetY}}(m,t),p.wrapper.measure(new Qu(p.width,p.height)),p.wrapper.arrange(p.wrapper.desiredSize),t.updateDiagramObject(p))}t.updateDiagramElementQuad()}function mr(t,e,i,n){var r=t.getObject(i.id),o=r.shape,s=o.header&&o.hasHeader?1:0,a=o.lanes,l=o.phases,h=n.wrapper.actualSize.width,c=n.wrapper.actualSize.height,d=e.wrapper.actualSize.width,p=e.wrapper.actualSize.height;"SwimLane"===r.shape.type&&("Horizontal"===o.orientation?e.isPhase?l[e.columnIndex].offset+=h-d:(s=o.phaseSize&&o.phases.length>0?s+1:s,a[e.rowIndex-s].height+=c-p):e.isPhase?l[e.rowIndex-s].offset+=c-p:(s=o.phaseSize&&o.phases.length>0?1:0,a[e.columnIndex-s].width+=h-d))}function fr(t,e){var i,n=t.shape,r=n.header&&n.hasHeader?1:0;return"Horizontal"===n.orientation?(r+=n.phases.length>0?1:0,i=e.rowIndex-r):i=e.columnIndex-(n.phaseSize&&n.phases.length>0?1:0),i}function vr(t){var e=0,i=t.shape;return"Horizontal"===i.orientation&&(e=i.header&&i.hasHeader?1:0),i.phases.length>0&&i.phaseSize&&(e+=1),e}function yr(t,e,i,n){var r=t.shape;if(r.phases.length>0){var o=e.nameTable[r.phases[parseInt(n.toString(),10)].header.id];o&&o.maxWidth<i.outerBounds.width&&(o.maxWidth=i.outerBounds.width,o.wrapper.maxWidth=i.outerBounds.width)}}function br(t,e){if(e.shape.header&&e.shape.hasHeader){var i=e.wrapper.children[0].rows[0].cells[0].children[0].id,n=t.nameTable[""+i];n&&n.isHeader&&n.maxWidth<e.width&&(n.maxWidth=e.width,n.wrapper.maxWidth=e.width)}}function Sr(t,e,i,n){var r,o=t.nameTable[e.id];if("SwimLane"===o.shape.type){t.protectPropertyChange(!0);var s=o.wrapper.children[0],a=s.bounds,l=o.shape,h=void 0,c=!1,d=void 0,p=void 0,u=void 0,g=void 0,m=void 0,f=void 0,v=void 0,y=void 0,b=new Bw(l,"lanes",i,!0);p=l.header&&l.hasHeader?1:0,"Horizontal"===l.orientation&&(c=!0,p=l.phases.length>0?p+1:p);var S=sr(t,s),w=void 0!==n?n:l.lanes.length;if(p+=w,r={element:b,cause:t.diagramActions,diagramAction:t.getDiagramAction(t.diagramActions),state:"Changing",type:"Addition",cancel:!1,laneIndex:w},t.triggerEvent(jg.collectionChange,r),!r.cancel){if(c){var I=new zb;I.height=i.height,s.addRow(p,I,!1),o.height=void 0!==o.height?o.height+i.height:o.height,o.wrapper.height=s.height=o.height}else{var x=new kb;x.width=i.width,s.addColumn(w+1,x,!1),o.width&&(o.width+=i.width,o.wrapper.width=s.width=o.width),t.diagramActions&Og.UndoRedo||(s.rows[0].cells[0].columnSpan+=1)}t.diagramActions&Og.UndoRedo||(b.id=""===b.id?da():b.id),void 0!==n?l.lanes.splice(n,0,b):l.lanes.push(b),r={element:b,cause:t.diagramActions,diagramAction:t.getDiagramAction(t.diagramActions),state:"Changed",type:"Addition",cancel:!1,laneIndex:w},t.triggerEvent(jg.collectionChange,r),nr(s,t,o,p,w,c),h="Horizontal"===l.orientation?t.nameTable[s.rows[parseInt(p.toString(),10)].cells[0].children[0].id]:l.header&&l.hasHeader?t.nameTable[s.rows[1].cells[parseInt(p.toString(),10)].children[0].id]:t.nameTable[s.rows[0].cells[parseInt(p.toString(),10)].children[0].id],t.diagramActions&Og.UndoRedo||(d={type:"LaneCollectionChanged",changeType:"Insert",undoObject:fa(b),redoObject:fa(h),category:"Internal"},t.addHistoryEntry(d));if(lr(t,o,"Horizontal"===l.orientation?p:l.header&&l.hasHeader?1:0),ar(o),br(t,o),(u=i.children)&&u.length>0)for(g=0;g<u.length;g++)if(v=u[parseInt(g.toString(),10)],y={x:v.wrapper.offsetX,y:v.wrapper.offsetY},"Horizontal"===l.orientation)for(s.rows[parseInt(p.toString(),10)].cells[parseInt(m.toString(),10)],m=0;m<s.rows[parseInt(p.toString(),10)].cells.length;m++)wr(t,s.rows[parseInt(p.toString(),10)].cells[parseInt(m.toString(),10)],y,v);else for(f=0;f<s.rows.length;f++)wr(t,s.rows[parseInt(f.toString(),10)].cells[parseInt(p.toString(),10)],y,v);ur(S,t),t.drag(o,a.x-s.bounds.x,a.y-s.bounds.y)}t.protectPropertyChange(!1)}}function wr(t,e,i,n){if(e.children&&e.children.length>0){var r=e.children[0],o=t.nameTable[r.id];r.bounds.containsPoint(i)&&t.addChild(o,n)}}function Ir(t,e,i){if("SwimLane"===e.shape.type){var n=void 0,r=void 0,o=void 0,s=void 0,a=void 0,l=void 0,h=void 0,c=e.wrapper.bounds.x,d=e.wrapper.bounds.y,p=e.shape,u=p.padding,g=p.phases,m=void 0,f=e.wrapper.children[0],v="Horizontal"===p.orientation;n=p.header&&p.hasHeader?0:-1,p.phases.length>0&&(n+=1);var y=v?p.lanes[0].header.width:p.lanes[0].header.height;if(i.offset>y){for(h=0;h<g.length;h++)if(o=g[parseInt(h.toString(),10)],s=h>0?g[h-1]:o,o.offset>i.offset){if(m=h>0?i.offset-s.offset:i.offset,v){var b=f.columnDefinitions()[parseInt(h.toString(),10)];b.width-=m,(a=t.nameTable[p.phases[parseInt(h.toString(),10)].header.id]).maxWidth=a.wrapper.maxWidth=b.width,f.updateColumnWidth(h,b.width,!1);var S=new kb;S.width=m,l=h,f.addColumn(h,S,!1);break}var w=f.rowDefinitions()[h+n];w.height-=m,a=t.nameTable[p.phases[parseInt(h.toString(),10)].header.id],f.updateRowHeight(h+n,w.height,!1);var I=new zb;I.height=m,l=h,f.addRow(h+n,I,!1);break}if(t.diagramActions&Og.UndoRedo&&void 0===l){(O=t.historyManager.currentEntry.next).isLastPhase&&function(t,e,i,n,r,o){var s=e.shape.phases[t-2],a=i.previousPhase.offset;if(r){var l=n.columnDefinitions()[t-1],h=new kb;t>1?(h.width=l.width-(a-s.offset),l.width=a-s.offset):(h.width=l.width-a,l.width=a),n.updateColumnWidth(t-1,l.width,!1),n.addColumn(t,h,!1)}else{var l=n.rowDefinitions()[parseInt(t.toString(),10)],c=new zb;t>1?(c.height=i.undoObject.offset-a,l.height=a-s.offset):(c.height=l.height-a,l.height=a),n.updateRowHeight(t,l.height,!1),n.addRow(1+t,c,!1)}}(l=g.length,e,O,f,v)}var x=new Hw(e.shape,"phases",i,!0);if(t.diagramActions&Og.UndoRedo||(x.id+=da()),p.phases.splice(l,0,x),ir(f,t,e,n,v,l),v){if(r=t.nameTable[f.rows[parseInt(n.toString(),10)].cells[parseInt(l.toString(),10)].children[0].id],0===l&&p.header&&p.hasHeader){f.rows[0].cells[0].children=f.rows[0].cells[1].children,f.rows[0].cells[1].children=[];for(var M=f.rows[0],C=0;C<M.cells.length;C++)M.cells[parseInt(C.toString(),10)].minWidth=void 0,M.cells[parseInt(C.toString(),10)].columnSpan=0===C?f.rows[0].cells.length:1}!function(t,e,i,n,r){var o,s,a,l,h,c=e.shape,d=vr(e);c.header&&c.hasHeader&&(i.rows[0].cells[0].columnSpan=i.rows[0].cells.length);for(s=d;s<i.rows.length;s++)h=i.rows[parseInt(s.toString(),10)],a=h.cells[n-1],l=h.cells[parseInt(n.toString(),10)],o=h.cells[n+1],xr(t,e,a,l,o,s,n);lr(t,e,1)}(t,e,f,l);var N=f.columnDefinitions();if(f.updateColumnWidth(l,N[parseInt(l.toString(),10)].width,!0,u),r.maxWidth=r.wrapper.maxWidth=N[parseInt(l.toString(),10)].width,N.length>l+1){var E=t.nameTable[f.rows[parseInt(n.toString(),10)].cells[l+1].children[0].id];f.updateColumnWidth(l+1,N[l+1].width,!0,u),E.maxWidth=E.wrapper.maxWidth=N[l+1].width}e.width=e.wrapper.width=e.wrapper.children[0].width=f.width}else{r=t.nameTable[f.rows[n+l].cells[0].children[0].id];var D=f.rowDefinitions(),T=D[n+l].height;!function(t,e,i,n,r){for(var o,s,a,l=i.rows[parseInt(n.toString(),10)],h=i.rows[n+1],c=i.rows[n-1],d=1;d<l.cells.length;d++)s=l.cells[parseInt(d.toString(),10)],a=h?h.cells[parseInt(d.toString(),10)]:void 0,o=c.cells[parseInt(d.toString(),10)],xr(t,e,o,s,a,n,d);lr(t,e,1)}(t,e,f,n+l),f.updateRowHeight(n+l,T,!0,u),D.length>n+l+1&&(T=D[n+l+1].height,f.updateRowHeight(n+l+1,T,!0,u)),e.height=e.wrapper.height=e.wrapper.children[0].height=f.actualSize.height}if(ar(e),e.width=e.wrapper.actualSize.width,br(t,e),t.drag(e,c-e.wrapper.bounds.x,d-e.wrapper.bounds.y),pr(e,t),!(t.diagramActions&Og.UndoRedo)){var O={type:"PhaseCollectionChanged",changeType:"Insert",undoObject:fa(x),redoObject:fa(r),category:"Internal"};t.addHistoryEntry(O)}t.updateDiagramObject(e)}}}function xr(t,e,i,n,r,o,s){var a,l,h,c=e.shape,d="Horizontal"===c.orientation,p=e.wrapper.children[0],u=n.desiredCellWidth,g=n.desiredCellHeight,m=d?o:s;i?(a=d?i.bounds.x+i.bounds.width:i.bounds.x,l=d?i.bounds.y:i.bounds.y+i.bounds.height):(a=p.bounds.x,l=r.bounds.y);var f=new Zu(a,l,u,g),v=er(t,0,e,{id:e.id+(d?c.lanes[m-2]:c.lanes[m-1]).id+da()[0],rowIndex:o,columnIndex:s,width:n.minWidth,height:n.minHeight,style:(d?c.lanes[m-2]:c.lanes[m-1]).style,constraints:wg.Default|wg.AllowDrop,container:{type:"Canvas",orientation:d?"Horizontal":"Vertical"}},!1,!1,!0);if(v.children[0].isCalculateDesiredSize=!1,p.addObject(v,o,s),r&&r.children&&r.children.length)for(h=0;h<r.children.length;h++)d?t.nameTable[r.children[parseInt(h.toString(),10)].id].columnIndex+=1:t.nameTable[r.children[parseInt(h.toString(),10)].id].rowIndex+=1;!function(t,e,i,n,r,o,s){var a,l,h,c=t.nameTable[r.id],d=e||s,p=t.nameTable[c.parentId].shape.padding;if(d.children&&d.children[0].children.length>1)for(var u=1;u<d.children[0].children.length;u++)a=d.children[0].children[parseInt(u.toString(),10)],h=t.nameTable[a.id],l=o?{x:a.bounds.x,y:a.bounds.center.y}:{x:a.bounds.center.x,y:a.bounds.top},n.containsPoint(l)?(i.children[0].children.push(a),d.children[0].children.splice(u,1),u--,t.deleteChild(h),h.isLane||(h.parentId=r.id),c.children||(c.children=[]),e||(o?h.margin.left=h.wrapper.bounds.x-d.children[0].bounds.right:h.margin.top=h.wrapper.bounds.y-d.children[0].bounds.bottom),c.children.push(a.id),h.zIndex=c.zIndex+1,t.removeElements(h)):e&&(o?(h.margin.left-=i.desiredCellWidth,p>h.margin.left&&(h.margin.left=p)):(h.margin.top-=i.desiredCellHeight,p>h.margin.top&&(h.margin.top=p)))}(t,r,n,f,v,d,i)}function Mr(t,e,i){if("SwimLane"===e.shape.type&&("ResizeSouth"===i||"ResizeEast"===i)){var n=e.shape,r=e.wrapper.children[0],o=void 0,s=void 0;"ResizeSouth"===i?"Vertical"===n.orientation?o=r.rows[r.rows.length-1].cells[0]:(s=r.rows.length-1,o=r.rows[parseInt(s.toString(),10)].cells[r.rows[parseInt(s.toString(),10)].cells.length-1]):(s=n.header&&n.hasHeader?1:0,o=r.rows[parseInt(s.toString(),10)].cells[r.rows[parseInt(s.toString(),10)].cells.length-1]),t.commandHandler.select(t.nameTable[o.children[0].id])}}function Cr(t,e,i,n,r,o){var s,a,l,h,c,d,p,u=da(),g=t.shape,m=g.phases,f=t.offsetX-t.wrapper.actualSize.width/2,v=t.offsetY-t.wrapper.actualSize.height/2;if("Vertical"===g.orientation&&(v+=g.header&&g.hasHeader?g.header.height:0),!o)for(r||(t.id+=u,g&&g.header&&g.hasHeader?g.header.id+=u:g.header=void 0),s=0;m&&s<m.length;s++)m[parseInt(s.toString(),10)].id+=u;var y=r?[i.childTable[n.id]]:g.lanes;for(s=0;y&&s<y.length;s++)for(l=y[parseInt(s.toString(),10)],o||(l.id+=u),a=0;l.children&&a<l.children.length;a++)d=(h=l.children[parseInt(a.toString(),10)]).wrapper.offsetX-h.width/2,p=h.wrapper.offsetY-h.height/2,h.zIndex=-1,h.inEdges=h.outEdges=[],(o||i&&(1===i.pasteIndex||0===i.pasteIndex))&&("Vertical"===g.orientation?h.margin.top=p-v:h.margin.left=d-f),o||(h.id+=u);if(!o){if(r){c={shape:{lanes:y,phases:m,phaseSize:g.phaseSize,type:"SwimLane",orientation:g.orientation,header:{annotation:{content:"Title"},height:50}}},"Horizontal"===g.orientation?(c.width=t.wrapper.actualSize.width,c.height=n.wrapper.actualSize.height+g.header.height+g.phaseSize,c.offsetX=t.wrapper.offsetX+10*i.pasteIndex,c.offsetY=n.wrapper.offsetY+10*i.pasteIndex):(c.width=n.wrapper.actualSize.width,c.height=t.wrapper.actualSize.height,c.offsetX=n.wrapper.offsetX+10*i.pasteIndex,c.offsetY=t.wrapper.offsetY+10*i.pasteIndex),t=c}if(0!==i.pasteIndex&&(t.offsetX+=10,t.offsetY+=10),t.zIndex=-1,t=e.add(t),!r)for(var b=0,S=Object.keys(i.childTable);b<S.length;b++){var w=S[b],I=i.childTable[""+w];I.id+=u,I.sourceID+=u,I.targetID+=u,I.zIndex=-1,e.add(I)}"SVG"!==e.mode&&e.refreshDiagramLayer(),e.select([t])}return t}function Nr(t,e,i,n){var r,o=e.nodes[0];if(n||Ur(t,o,!0)){var s=void 0,a=void 0,l=void 0,h=new Gg;i&&(l=t.nameTable[""+i].parentId,s=o=t.nameTable[""+i]);var c=i?s.wrapper:o.wrapper,d=t.nameTable[l||o.parentId];d&&"Grid"===d.container.type&&((r=new em).children=[],!n&&o.isHeader||("Horizontal"===d.container.orientation&&o.isPhase||"Vertical"===d.container.orientation&&(o.rowIndex>0&&o.columnIndex>0||o.isLane)?(a=Rr(d,s?s.columnIndex:o.columnIndex,!(!d.shape.header||!d.shape.hasHeader)),r.offsetX=a.center.x,r.offsetY=a.center.y,h.width=a.width,h.height=a.height):(r.offsetX=d.offsetX,r.offsetY=c.offsetY,h.width=d.wrapper.actualSize.width,h.height=c.actualSize.height)),r.children.push(h),r.measure(new Qu),r.arrange(r.desiredSize))}return r}function Er(t,e,i,n,r){r=void 0!==r?r:fr(e,i);for(var o=!1,s=e.shape.lanes[parseInt(r.toString(),10)],a=s.children.length-1;a>=0;a--)n?n.id===s.children[parseInt(a.toString(),10)].id&&s.children.splice(a,1):(t.removeDependentConnector(s.children[parseInt(a.toString(),10)]),t.diagramActions&Og.UndoRedo||(t.diagramActions=t.diagramActions|Og.UndoRedo,o=!0),t.remove(s.children[parseInt(a.toString(),10)]),s.children.splice(a,1),o&&(t.diagramActions=t.diagramActions&~Og.UndoRedo))}function Dr(t){return t.children[0]}function Tr(t,e){t.nodes.splice(t.nodes.indexOf(e),1),t.removeFromAQuad(e),t.removeObjectsFromLayer(e),delete t.nameTable[e.id],t.removeElements(e)}function Or(t,e,i,n){var r;if("SwimLane"===i.shape.type){var o=i.shape,s=void 0;if(1===o.lanes.length)t.remove(i);else{var a=i.wrapper.bounds.x,l=i.wrapper.bounds.y,h=void 0,c=void 0,d=void 0,p=void 0,u=i.wrapper.children[0];if(s=n?o.lanes.indexOf(n):fr(i,e),r={element:e,cause:t.diagramActions,diagramAction:t.getDiagramAction(t.diagramActions),state:"Changing",type:"Removal",cancel:!1,laneIndex:s},t.triggerEvent(jg.collectionChange,r),!r.cancel){var g=fa(o.lanes[parseInt(s.toString(),10)]);if(Er(t,i,e,void 0,s),!(t.diagramActions&Og.UndoRedo)){var m={type:"LaneCollectionChanged",changeType:"Remove",undoObject:g,redoObject:fa(e),category:"Internal"};t.addHistoryEntry(m)}o.lanes.splice(s,1);var f=e?"Horizontal"===o.orientation?e.rowIndex:e.columnIndex:vr(i)+s;if("Horizontal"===o.orientation){for(h=u.rows[parseInt(f.toString(),10)],c=0;c<h.cells.length;c++)if((d=h.cells[parseInt(c.toString(),10)])&&d.children.length>0)for(p=0;p<d.children.length;p++)Lr(t,d.children[parseInt(p.toString(),10)]);u.removeRow(f)}else{for(i.width=void 0!==i.width?i.width-u.rows[0].cells[parseInt(f.toString(),10)].actualSize.width:i.width,c=0;c<u.rows.length;c++)if((d=u.rows[parseInt(c.toString(),10)].cells[parseInt(f.toString(),10)])&&d.children.length>0)for(p=0;p<d.children.length;p++)Lr(t,d.children[parseInt(p.toString(),10)]);u.removeColumn(f)}r={element:e,cause:t.diagramActions,diagramAction:t.getDiagramAction(t.diagramActions),state:"Changed",type:"Removal",cancel:!1,laneIndex:s},t.triggerEvent(jg.collectionChange,r),i.width=i.wrapper.width=u.width,i.height=i.wrapper.height=u.height,ar(i),"Vertical"===i.shape.orientation&&(f=0),lr(t,i,f),t.drag(i,a-i.wrapper.bounds.x,l-i.wrapper.bounds.y),t.updateDiagramObject(i)}}}}function Lr(t,e){var i;if(e instanceof em){if(e.children.length>0)for(i=0;i<e.children.length;i++)e.children[parseInt(i.toString(),10)]instanceof em&&Lr(t,e.children[parseInt(i.toString(),10)]);Tr(t,t.getObject(e.id))}}function Ar(t,e,i,n){t.protectPropertyChange(!0);i.wrapper.bounds.x,i.wrapper.bounds.y;var r,o=!1,s=i.shape,a=i.wrapper.children[0],l=n?s.phases.indexOf(n):function(t,e){var i=e.shape,n=i.header&&i.hasHeader?1:0;return"Horizontal"===i.orientation?t.columnIndex:t.rowIndex-n}(e,i),h=s.phases.length;if(s.phases.length>1){l===h-1&&(o=!0,r=fa(s.phases[l-1]));var c=fa(s.phases[parseInt(l.toString(),10)]);if(s.phases.splice(l,1),!(t.diagramActions&Og.UndoRedo)){var d={type:"PhaseCollectionChanged",changeType:"Remove",undoObject:c,previousPhase:r,redoObject:fa(e),category:"Internal",isLastPhase:o};t.addHistoryEntry(d)}"Horizontal"===s.orientation?function(t,e,i,n){var r,o,s,a,l,h;n=void 0!==n?n:i.columnIndex;var c,d,p,u,g,m;for(c=0;c<e.rows.length;c++)if((r=e.rows[parseInt(c.toString(),10)]).cells.length>1&&(o=r.cells[parseInt(n.toString(),10)],s=r.cells.length-1===n?r.cells[n-1]:r.cells[n+1],l=s.children[0],o.children.length>0))if(a=o.children[0],g=t.nameTable[a.id],0===s.children.length&&o.children.length>0)s.children=o.children,s.columnSpan=o.columnSpan-1;else{for(d=0;d<a.children.length;d++){if((u=a.children[parseInt(d.toString(),10)])instanceof em){if((m=t.nameTable[u.id]).isLane||(m.parentId=l.id),r.cells.length-1===n&&(m.margin.left=m.wrapper.bounds.x-l.bounds.x,u.margin.left=m.wrapper.bounds.x-l.bounds.x),l.children.push(u),t.nameTable[l.id]){var f=t.nameTable[l.id];f.children||(f.children=[]),f.children.push(u.id)}a.children.splice(d,1),d--,g&&g.children&&-1!==g.children.indexOf(m.id)&&g.children.splice(g.children.indexOf(m.id),1)}if(r.cells.length-1!==n)for(p=0;p<l.children.length;p++){var v=l.children[parseInt(p.toString(),10)];if(v instanceof em){var y=t.nameTable[v.id];y.margin.left=y.wrapper.bounds.x-a.bounds.x,v.margin.left=y.wrapper.bounds.x-a.bounds.x}}}if(g&&g.isPhase){var b=t.nameTable[l.id];b&&(l.maxWidth=b.wrapper.maxWidth=b.wrapper.maxWidth+=g.wrapper.maxWidth)}Tr(t,g)}var S=e.columnDefinitions()[parseInt(n.toString(),10)].width;e.removeColumn(n),n<e.columnDefinitions().length?(h=e.columnDefinitions()[parseInt(n.toString(),10)].width,h+=S,e.updateColumnWidth(n,h,!0)):(h=e.columnDefinitions()[n-1].width,h+=S,e.updateColumnWidth(n-1,h,!0))}(t,a,e,l):function(t,e,i,n,r){var o,s,a,l,h,c,d,p,u,g=r.shape,m=void 0!==n?g.header?n+1:n:i.rowIndex,f=e.rows[parseInt(m.toString(),10)],v=r.wrapper.bounds.y,y=g.phases.length;void 0!==g.header&&g.hasHeader&&(v+=e.rowDefinitions()[0].height);var b=n===y?e.rows[m-1]:e.rows[m+1];for(a=0;a<f.cells.length;a++)if(o=f.cells[parseInt(a.toString(),10)],c=b.cells[parseInt(a.toString(),10)],d=c.children[0],o.children.length>0){var S=o.children[0],w=t.nameTable[S.id];if(n<y)for(h=0;h<d.children.length;h++)(p=d.children[parseInt(h.toString(),10)])instanceof em&&((u=t.nameTable[p.id]).margin.top=u.wrapper.bounds.y-(0===n?v:S.bounds.y),p.margin.top=u.wrapper.bounds.y-(0===n?v:S.bounds.y));for(l=0;l<S.children.length;l++)(p=S.children[parseInt(l.toString(),10)])instanceof em&&((u=t.nameTable[p.id]).parentId=d.id,n===y&&(u.margin.top=u.wrapper.bounds.y-(0===n?v:d.bounds.y),p.margin.top=u.wrapper.bounds.y-(0===n?v:d.bounds.y)),d.children.push(p),S.children.splice(l,1),l--,w.children&&-1!==w.children.indexOf(u.id)&&w.children.splice(w.children.indexOf(u.id),1));Tr(t,w)}var I=e.rowDefinitions()[parseInt(m.toString(),10)].height;e.removeRow(m),m<e.rowDefinitions().length?(s=e.rowDefinitions()[parseInt(m.toString(),10)].height,s+=I,e.updateRowHeight(m,s,!0)):(s=e.rowDefinitions()[m-1].height,s+=I,e.updateRowHeight(m-1,s,!0))}(t,a,e,l,i),br(t,i),lr(t,i,1),pr(i,t),t.protectPropertyChange(!1),t.updateDiagramObject(i)}}function zr(t,e){var i;if(t.isLane){var n=e.getObject(t.parentId);if(n&&"SwimLane"===n.shape.type&&t.isLane){var r=fr(n,t);i=n.shape.lanes[parseInt(r.toString(),10)]}}return i}function kr(t,e){if(t.isLane){var i=zr(t,e);if(e.eventHandler.action.includes("Resize")||i.canMove)return!0}return!1}function jr(t,e,i,n){var r,o=!1;if(Ur(t,e,!0)){t.protectPropertyChange(!0);var s=(r=t.nameTable[e.parentId]).wrapper;if(r&&"Canvas"===r.container.type){if(n||s.bounds.x<=i.x&&s.bounds.right>=i.x&&s.bounds.y<=i.y&&s.bounds.bottom>=i.y){var a=void 0,l=s.bounds.y,h=s.bounds.x,c=t.nameTable[r.parentId]||r;if("SwimLane"===c.shape.type)o=Wr(r,c,e,t,!0);else{var d=t.nameTable[r.parentId]||r,p=d.shape;a=d.wrapper,s.actualSize.width<s.outerBounds.width&&!(s.bounds.x>s.outerBounds.x)&&(void 0!==r.rowIndex?(a.updateColumnWidth(r.columnIndex,s.outerBounds.width,!0),"Horizontal"===p.orientation&&p.phaseSize&&yr(d,t,s,r.columnIndex),br(t,d),t.drag(d,h-s.bounds.x,l-s.bounds.y)):t.scale(r,1+(s.outerBounds.width-s.actualSize.width)/s.actualSize.width,1,s.outerBounds.x<s.bounds.x?{x:1,y:.5}:{x:0,y:.5})),s.actualSize.height<s.outerBounds.height&&!(s.bounds.y>s.outerBounds.y)&&(void 0!==r.rowIndex?(a.updateRowHeight(r.rowIndex,s.outerBounds.height,!0),t.drag(d,h-s.bounds.x,l-s.bounds.y)):t.scale(r,1,1+(s.outerBounds.height-s.actualSize.height)/s.actualSize.height,s.outerBounds.y<s.bounds.y?{x:.5,y:1}:{x:.5,y:0}))}}t.select([e]),ur([],t)}t.protectPropertyChange(!1)}return o}function Pr(t,e,i,n){var r;if(Ur(t,e,!0)){var o=t.isProtectedOnChange;t.protectPropertyChange(!0);var s=(r=t.nameTable[e.parentId]).wrapper;if(r&&"Canvas"===r.container.type&&!(n||s.bounds.x<=i.x&&s.bounds.right>=i.x&&s.bounds.y<=i.y&&s.bounds.bottom>=i.y||e.constraints&wg.AllowMovingOutsideLane)){var a=fa(e);t.clearSelection(),_r(t,e),e.parentId="",e.parentObj=t,e.propName="nodes";var l={type:"ChildCollectionChanged",category:"Internal",undoObject:a,redoObject:fa(e)};t.addHistoryEntry(l),t.commandHandler.isContainer&&(t.commandHandler.isContainer=!1,t.endGroupAction()),Yr(e,t)}t.protectPropertyChange(o)}}function Rr(t,e,i){for(var n=new Zu,r="SwimLane"===t.shape.type?t.wrapper.children[0].rows:t.wrapper.rows,o=i?1:0;o<r.length;o++)n.uniteRect(r[parseInt(o.toString(),10)].cells[parseInt(e.toString(),10)].bounds);return n}function Br(t,e){for(var i,n={},r=0,o=Object.keys(e);r<o.length;r++){var s=o[r];n[""+s]=e[""+s]}return VS(e)===Pw&&((i=new Pw(t,"nodes",n,!0)).id=e.id,t.initObject(i)),t.updateDiagramObject(i),i}function Hr(t,e){t.enableServerDataBinding(!1);var i,n,r;if(!f()||f()&&t.diagramActions&Og.ToolAction)if(t.selectedObject.helperObject)r=t.selectedObject.helperObject;else if((t.selectedItems.nodes.length>0||t.selectedItems.connectors.length>0)&&(e instanceof _w&&e.nodes.length+e.connectors.length===1?(i=e.nodes.length>0?e.nodes[0]:e.connectors[0],n=t.selectedItems.wrapper.children[0]):(i=e,n=f()?e===t.selectedItems.nodes[0]?t.selectedItems.wrapper:e.wrapper:t.selectedItems.wrapper),t.selectedObject.actualObject=i,!t.currentSymbol&&(i.isLane&&kr(i,t)&&Ur(t,i)||!i.isLane&&Ur(t,i)||t.constraints&Mg.LineRouting&&t.selectedItems.nodes.length>0))){r=Br(t,{id:"helper",rotateAngle:n.rotateAngle,offsetX:n.offsetX,offsetY:n.offsetY,minWidth:n.minWidth,minHeight:n.minHeight,maxWidth:n.maxWidth,maxHeight:n.maxHeight,width:n.actualSize.width,height:n.actualSize.height,style:{strokeDashArray:"2 2",fill:"transparent",strokeColor:"#7D7D7D",strokeWidth:2}}),t.selectedObject.helperObject=r}return t.enableServerDataBinding(!0),r}function Ur(t,e,i){var n=i?t.nameTable[e.parentId]:t.nameTable[e.parentId]||e;return!(!n||!n.container)}function Vr(t,e){var i=t.nameTable[e.parentId];"Canvas"===i.container.type&&(e.margin.left=e.offsetX-i.wrapper.bounds.x-e.width/2,e.margin.top=e.offsetY-i.wrapper.bounds.y-e.height/2),t.nodePropertyChange(e,{},{width:e.width,height:e.height,offsetX:e.offsetX,offsetY:e.offsetY,margin:{left:e.margin.left,right:e.margin.right,top:e.margin.top,bottom:e.margin.bottom},rotateAngle:e.rotateAngle}),i.isLane||(i.wrapper.measure(new Qu),i.wrapper.arrange(i.wrapper.desiredSize))}function _r(t,e){if(e.parentId&&""!==e.parentId){var i=t.nameTable[e.parentId];if(i.isLane&&i.parentId)for(var n=t.nameTable[i.parentId],r=i.id.slice(n.id.length),o=r.substring(0,r.length-1),s=n.shape.lanes,a=void 0,l=0;l<s.length;l++)if(a=s[parseInt(l.toString(),10)],o===a.id)for(var h=0;h<a.children.length;h++)a.children[parseInt(h.toString(),10)].id===e.id&&(a.children.splice(h,1),h--);t.deleteChild(e)}}function Fr(t,e,i,n,r){if(!t.currentSymbol){t.protectPropertyChange(!0);var o=t.nameTable[e.parentId];i=t.getObject(i.id)||i;var s=-1!==t.nodes.indexOf(i)?i.id:i;if("Canvas"!==e.container.type||r){if(o){var a=o.wrapper.bounds,l=e.wrapper.bounds;if("Horizontal"===o.shape.orientation)i.margin.left-=l.x-a.x;else{var h=e.parentId+o.shape.lanes[0].id+"_0_header";i.margin.top-=l.y-a.y-t.nameTable[""+h].wrapper.bounds.height}}}else{var c=i.wrapper.offsetX-i.wrapper.actualSize.width/2-(e.wrapper.offsetX-e.wrapper.actualSize.width/2),d=i.wrapper.offsetY-i.wrapper.actualSize.height/2-(e.wrapper.offsetY-e.wrapper.actualSize.height/2);i.margin.left=c,i.margin.top=d}var p=t.nameTable[e.id];if(p.children||(p.children=[]),-1===p.children.indexOf(i.id)){_r(t,i),t.getObject(i.id)&&t.removeElements(i);var u=fa(i);if(t.addChild(p,s),i=t.getObject(i.id),p.isLane&&p.parentId){o=t.nameTable[p.parentId],"Bpmn"===i.shape.type&&i.shape.annotations&&i.shape.annotations.length>0&&(o.isTextNode=!0);for(var g=o.shape.lanes,m=p.id.slice(o.id.length),f=m.substring(0,m.length-1),v=0;v<g.length;v++)p.isLane&&f===g[parseInt(v.toString(),10)].id&&(i.parentObj instanceof YI||(i.parentObj=g[parseInt(v.toString(),10)]),t.nameTable.hasOwnProperty(i.id)||g[parseInt(v.toString(),10)].children.push(i))}if(t.updateDiagramObject(i),Yr(i,t),p.parentId?n||Wr(p,o,i,t):t.updateDiagramObject(p),!(t.diagramActions&Og.UndoRedo)){var y={type:"ChildCollectionChanged",category:"Internal",undoObject:u,redoObject:fa(i),historyAction:r?"AddNodeToLane":void 0};t.addHistoryEntry(y)}}t.protectPropertyChange(!1)}}function Yr(t,e){var i=Us(t.id+"_groupElement",e.element.id),n=Us(t.parentId?t.parentId+"_groupElement":e.element.id+"_diagramLayer",e.element.id);i&&n&&n.appendChild(i)}function Wr(t,e,i,n,r){var o,s=fa(t),a=!1,l=e.shape.padding,h=t.wrapper.bounds,c=t.wrapper.outerBounds,d=i.wrapper.bounds;if(e&&"SwimLane"===e.shape.type&&(h.right<d.right+l||h.bottom<d.bottom+l)){var p=e.wrapper.children[0],u=p.bounds.x,g=p.bounds.y,m=void 0;if(h.right<d.right+l&&c.x<=h.x&&(m=d.right-h.right,o=!1,p.updateColumnWidth(t.columnIndex,h.width+m,!0,l)),h.bottom<d.bottom+l&&c.y<=h.y&&(m=d.bottom-h.bottom,o=!0,p.updateRowHeight(t.rowIndex,h.height+m,!0,l)),!(n.diagramActions&Og.UndoRedo)&&(r&&(n.startGroupAction(),a=!0),void 0!==o)){var f={category:"Internal",type:o?"RowHeightChanged":"ColumnWidthChanged",undoObject:s,redoObject:fa(t)};n.addHistoryEntry(f)}e.width=e.wrapper.width=p.width,e.height=e.wrapper.height=p.height,ar(e),"Horizontal"===e.shape.orientation&&yr(e,n,t.wrapper,t.columnIndex),br(n,e),n.drag(e,u-p.bounds.x,g-p.bounds.y),pr(e,n),dr(e)}return function(t,e,i){var n=t.nameTable[e.parentId];if(n&&n.isLane){var r=t.nameTable[n.parentId],o=r.wrapper.children[0];o.updateColumnWidth(n.columnIndex,o.columnDefinitions()[n.columnIndex].width,!0,i),o.updateRowHeight(n.rowIndex,o.rowDefinitions()[n.rowIndex].height,!0,i);var s=n.wrapper,a=void 0;e.margin.left<i&&(e.margin.left=i),e.margin.top<i&&(e.margin.top=i);for(var l=0;l<s.children.length;l++){var h=s.children[parseInt(l.toString(),10)];if(h instanceof em){var c=t.nameTable[h.id];if(c.isLane){a=c.wrapper;break}}}a&&("Horizontal"===r.shape.orientation?e.margin.left<i+a.actualSize.width&&(e.margin.left=i+a.actualSize.width):e.margin.top<i+a.actualSize.height&&(e.margin.top=i+a.actualSize.height)),r.wrapper.measure(new Qu(r.width,r.height)),r.wrapper.arrange(r.wrapper.desiredSize),e.offsetX=e.wrapper.offsetX,e.offsetY=e.wrapper.offsetY,t.nodePropertyChange(e,{},{margin:{left:e.margin.left,top:e.margin.top}}),t.bpmnModule&&"Bpmn"===e.shape.type&&e.shape.annotations&&e.shape.annotations.length>0&&t.nodePropertyChange(e,{},{margin:{left:e.margin.left,top:e.margin.top}}),o.measure(new Qu(o.width,o.height)),o.arrange(o.desiredSize),r.width=r.wrapper.width=r.wrapper.children[0].actualSize.width,r.height=r.wrapper.height=r.wrapper.children[0].actualSize.height}}(n,i,l),n.updateDiagramElementQuad(),a}function Qr(t,e,i,n,r,o){var s=_s(n.element.id);n.diagramRenderer.renderStackHighlighter(t,s,n.scroller.transform,e,i,r,o)}function Xr(t,e,i,n){var r=t,o=i.nameTable[r.parentId],s=i.nameTable[r.parentId];if(e&&s&&s.container&&"Stack"===s.container.type&&e.container&&"Stack"===e.container.type&&s.id!==e.parentId){var a=s.wrapper.children.indexOf(r.wrapper);a>-1&&(i.nameTable[r.id].parentId=e.id,s.wrapper.children.splice(a,1))}if(e&&e.parentId&&r.parentId&&"Drag"===n&&s.container&&"Stack"===s.container.type){var l=o.wrapper.children.indexOf(e.wrapper),h=o.wrapper.children.indexOf(r.wrapper),c={targetIndex:l,target:e,sourceIndex:h,source:t};o.wrapper.children.splice(h,1),o.wrapper.children.splice(l,0,r.wrapper);var d={type:"StackChildPositionChanged",redoObject:{targetIndex:h,target:e,sourceIndex:l,source:t},undoObject:c,category:"Internal"};i.commandHandler.addHistoryEntry(d)}}function qr(t,e,i,n,r,o,s){if(o&&o.length>1&&r&&r.length>1)return"PinchZoom";if(n.currentSymbol)return"Drag";if("PortDraw"===n.eventHandler.action&&(n.tool&=~Cg.DrawOnce),(Wn(n)||Yn(n))&&n.drawingObject)return"Draw";if($r(n)){if((p=n.selectedItems).wrapper&&as(p.constraints,"UserHandle"))for(var a=0,l=p.userHandles;a<l.length;a++){var h=l[a];if(h.visible){if(Zr(i,u=os(p,h,n.scroller.transform),h.size/(2*n.scroller.transform.scale)))return h.name}}}if($r(n)){var c=n.selectedItems.annotation?n.selectedItems.wrapper.children[0]:n.selectedItems.wrapper,d=c.bounds,p=n.selectedItems,u=new Zu(d.x,d.y,d.width,d.height);if(Kr(n)&&!n.selectedItems.annotation){var g=n.selectedItems.connectors[0],m=n.selectedItems.handleSize/2/n.scrollSettings.currentZoom,f=n.selectedItems.handleSize/2/n.scrollSettings.currentZoom;if(as(p.constraints,"ResizeAll")){if(as(p.constraints,"ConnectorSourceThumb")&&Tn(g)&&Zr(i,g.sourcePoint,m))return"ConnectorSourceEnd";if(as(p.constraints,"ConnectorTargetThumb")&&On(g)&&Zr(i,g.targetPoint,f))return"ConnectorTargetEnd";if("OrthoThumb"===(C=function(t,e,i,n){var r=e.handleSize/2/n.scrollSettings.currentZoom,o=e.handleSize/2/n.scrollSettings.currentZoom;if("Bezier"===t.type&&n.connectorEditingToolModule)for(var s=0;s<t.segments.length;s++){var a=t.segments[parseInt(s.toString(),10)];if(Zr(i,Gu.isEmptyPoint(a.point1)?a.bezierPoint1:a.point1,o)&&(0===s&&ls(t.bezierSettings.controlPointsVisibility,"Source")||0!==s&&ls(t.bezierSettings.controlPointsVisibility,"Intermediate")))return"BezierSourceThumb";if(Zr(i,Gu.isEmptyPoint(a.point2)?a.bezierPoint2:a.point2,r)&&(s===t.segments.length-1&&ls(t.bezierSettings.controlPointsVisibility,"Target")||s!==t.segments.length-1&&ls(t.bezierSettings.controlPointsVisibility,"Intermediate")))return"BezierTargetThumb"}if(n.connectorEditingToolModule&&Ln(t))if("Straight"===t.type||"Bezier"===t.type)for(var s=0;s<t.segments.length;s++){var a=t.segments[parseInt(s.toString(),10)];if(Zr(i,a.point,10))return"SegmentEnd"}else for(var s=0;s<t.segments.length;s++){var l={x:0,y:0},a=t.segments[parseInt(s.toString(),10)];if(a.allowDrag)for(var h=0;h<a.points.length-1;h++){var c=Gu.distancePoints(a.points[parseInt(h.toString(),10)],a.points[h+1]);if(c>=50&&(l.x=(a.points[parseInt(h.toString(),10)].x+a.points[h+1].x)/2,l.y=(a.points[parseInt(h.toString(),10)].y+a.points[h+1].y)/2,Zr(i,l,30)))return"OrthoThumb"}}return null}(g,p,i,n)))return C;if(as(p.constraints,"ConnectorSourceThumb")&&Tn(g)&&C)return C;if(as(p.constraints,"ConnectorTargetThumb")&&On(g)&&C)return C}}else{var v=n.selectedItems.handleSize/2/n.scroller.currentZoom,y=10/n.scroller.currentZoom,b=Lt();kt(b,c.rotateAngle+c.parentTransform,c.offsetX,c.offsetY);var S=c.offsetX-c.pivot.x*c.actualSize.width,w=c.offsetY-c.pivot.y*c.actualSize.height,I={x:S+(.5===c.pivot.x?2*c.pivot.x:c.pivot.x)*c.actualSize.width/2,y:w-30/n.scroller.currentZoom};I=At(b,I);var x=!!n.selectedItems.annotation,M=!(!x||!An(n.selectedItems.annotation));if(as(p.constraints,"Rotate")&&Zr(i,I,y)&&n.selectedItems.thumbsConstraints&xg.Rotate){if(x&&M)return"LabelRotate";if(!x)return"Rotate"}if(u.Inflate(v),u.containsPoint(i)){if(C=function(t,e,i,n,r,o){var s;1===t.selectedItems.nodes.length&&0===t.selectedItems.connectors.length&&t.selectedItems.nodes[0].container&&(s=function(t,e,i,n,r){var o=10/t.scroller.currentZoom,s=40/t.scroller.currentZoom,a=t.selectedItems,l=e.actualSize.width,h=e.actualSize.height,c=new Zu(n,r+20,e.style.strokeWidth,h-40),d=new Zu(n+l,r+20,e.style.strokeWidth,h-40),p=new Zu(n+20,r,l-40,e.style.strokeWidth),u=new Zu(n+20,r+h,l-40,e.style.strokeWidth),g=Ur(t,t.selectedItems.nodes[0],!0)?t.nameTable[t.selectedItems.nodes[0].parentId]:t.selectedItems.nodes[0];if(l>=s&&h>=s){if(ss(a.constraints,"ResizeEast",a.thumbsConstraints,a)&&d.containsPoint(i,o))return"ResizeEast";if(ss(a.constraints,"ResizeSouth",a.thumbsConstraints,a)&&u.containsPoint(i,o))return"ResizeSouth";if("Grid"!==g.container.type){if(ss(a.constraints,"ResizeWest",a.thumbsConstraints,a)&&c.containsPoint(i,o))return"ResizeWest";if(ss(a.constraints,"ResizeNorth",a.thumbsConstraints,a)&&p.containsPoint(i,o))return"ResizeNorth"}}return null}(t,e,i,r,o));s||t.selectedItems.nodes[0]&&(t.selectedItems.nodes[0].isPhase||t.selectedItems.nodes[0].isLane||"SwimLane"===t.selectedItems.nodes[0].shape.type)||(s=function(t,e,i,n,r,o){var s=40/t.scroller.currentZoom,a=t.selectedItems.handleSize/2/t.scroller.currentZoom,l=t.selectedItems,h=!!l.annotation;if(e.actualSize.width>=s&&e.actualSize.height>=s){if(ss(l.constraints,"ResizeSouthEast",l.thumbsConstraints,l)&&Zr(i,At(n,{x:r+e.actualSize.width,y:o+e.actualSize.height}),a))return h?"LabelResizeSouthEast":"ResizeSouthEast";if(ss(l.constraints,"ResizeSouthWest",l.thumbsConstraints,l)&&Zr(i,At(n,{x:r,y:o+e.actualSize.height}),a))return h?"LabelResizeSouthWest":"ResizeSouthWest";if(ss(l.constraints,"ResizeNorthEast",l.thumbsConstraints,l)&&Zr(i,At(n,{x:r+e.actualSize.width,y:o}),a))return h?"LabelResizeNorthEast":"ResizeNorthEast";if(ss(l.constraints,"ResizeNorthWest",l.thumbsConstraints,l)&&Zr(i,At(n,{x:r,y:o}),a))return h?"LabelResizeNorthWest":"ResizeNorthWest"}if(ss(l.constraints,"ResizeEast",l.thumbsConstraints,l)&&Zr(i,At(n,{x:r+e.actualSize.width,y:o+e.actualSize.height/2}),a))return h?"LabelResizeEast":"ResizeEast";if(ss(l.constraints,"ResizeWest",l.thumbsConstraints,l)&&Zr(i,At(n,{x:r,y:o+e.actualSize.height/2}),a))return h?"LabelResizeWest":"ResizeWest";if(ss(l.constraints,"ResizeSouth",l.thumbsConstraints,l)&&Zr(i,At(n,{x:r+e.actualSize.width/2,y:o+e.actualSize.height}),a))return h?"LabelResizeSouth":"ResizeSouth";if(ss(l.constraints,"ResizeNorth",l.thumbsConstraints,l)&&Zr(i,At(n,{x:r+e.actualSize.width/2,y:o}),a))return h?"LabelResizeNorth":"ResizeNorth";return null}(t,e,i,n,r,o));if(s)return s;return null}(n,c,i,b,S,w))return C}}}if(Fn(n)&&!t)return"Pan";if(s instanceof pm&&!Fn(n)){var C;if("None"!==(C=Gr(n,s)))return C}if((s instanceof vm||s instanceof ym)&&!Fn(n)&&Cn(s))return Jr(n,s,void 0,e)&&Nn(s)?"LabelDrag":"LabelSelect";if(null!==t){if(!(t instanceof Pw||t instanceof ES))return"Select";if(e&&e.id){var N=e.id.split(t.id)[1];if(N&&N.match("^_icon"))return"LayoutAnimation"}if(e&&e.id)for(var E=void 0,D=0;D<t.fixedUserHandles.length;D++)if(E=t.fixedUserHandles[parseInt(D.toString(),10)].id,e.id&&e.id.indexOf(E)>-1)return"FixedUserHandle";if(e instanceof Jg&&e.hyperlink.link)return"Hyperlink";if(!Nn(t)||!Jr(n,t,!1)||void 0!==n.selectedItems.annotation)return t&&Fn(n)&&!Qn(n)?"Pan":n.selectedItems.nodes.length&&n.selectedItems.nodes[0].isLane&&n.selectedItems.wrapper&&n.selectedItems.wrapper.bounds.containsPoint(i)?"Drag":"Select";if(t instanceof ES&&!Zr(i,t.sourcePoint,t.hitPadding)&&!Zr(i,t.targetPoint,t.hitPadding)||!(t instanceof ES))return"Drag"}return"Select"}function Gr(t,e,i,n){if($n(e)&&(hs(e,gg.Hover)||hs(e,gg.Visible))){if(e.constraints&Pg.Drag)return"PortDrag"}else if(Zn(e)&&(hs(e,gg.Hover)||hs(e,gg.Visible))&&e.constraints&Pg.Draw){t.drawingObject={};var r={type:"Orthogonal",sourcePortID:e.id};return t.drawingObject=r,t.tool|=Cg.DrawOnce,t.currentDrawingObject=r,"PortDraw"}return"None"}function Zr(t,e,i){return t.x>=e.x-i&&t.x<=e.x+i&&t.y>=e.y-i&&t.y<=e.y+i}function $r(t){return t.selectedItems.nodes.length>0||t.selectedItems.connectors.length>0}function Kr(t){return 1===t.selectedItems.connectors.length&&!t.selectedItems.nodes.length}function Jr(t,e,i,n){if(void 0===i&&(i=!0),e instanceof _w)return!0;if(e instanceof Pw)for(;e;){if(-1!==t.selectedItems.nodes.indexOf(e)&&void 0===t.selectedItems.annotation)return!0;if(i)break;e=t.nameTable[e.parentId]}else if(e instanceof ES){if(-1!==t.selectedItems.connectors.indexOf(e)&&void 0===t.selectedItems.annotation)return!0}else if((e instanceof vm||e instanceof ym)&&t.selectedItems.annotation&&t.selectedItems.wrapper.children[0].id===n.id)return!0;return!1}function to(t,e){if(e+=360,e%=360,-1===t.indexOf("Resize"))return Bb[""+t];var i=Bb[""+t];return e>=0&&e<25||e>=160&&e<=205||e>=340&&e<=360?i:e>=25&&e<=70||e>=205&&e<=250?"n-resize"===i||"s-resize"===i?"ne-resize":"nw-resize"===i||"se-resize"===i?"n-resize":"e-resize"===i||"w-resize"===i?"nw-resize":"e-resize":e>=70&&e<=115||e>=250&&e<=295?"n-resize"===i||"s-resize"===i?"e-resize":"nw-resize"===i||"se-resize"===i?"ne-resize":"e-resize"===i||"w-resize"===i?"n-resize":"nw-resize":e>=115&&e<=155||e>=295&&e<=340?"n-resize"===i||"s-resize"===i?"nw-resize":"nw-resize"===i||"se-resize"===i?"e-resize":"e-resize"===i||"w-resize"===i?"ne-resize":Bb[""+t]:"n-resize"}function eo(t,e,i){var n=t.center,r=i?45:180/(2+2/(t.height/t.width)),o=r,s=180-r,a=s+2*r,l=360-r,h=ge(e,n);return h>o&&h<s?"top":h>s&&h<a?"right":h>a&&h<l?"bottom":"left"}function io(t){return!t.distance&&!t.angle}function no(t,e,i){var n=60,r={x:0,y:0};switch(i||(i=Math.abs(e.x-t.x)>Math.abs(e.y-t.y)?t.x<e.x?"right":"left":t.y<e.y?"bottom":"top"),i){case"bottom":case"top":n=Math.min(.45*Math.abs(t.y-e.y),n),r={x:t.x,y:t.y+("bottom"===i?n:-n)};break;case"right":case"left":n=Math.min(.45*Math.abs(t.x-e.x),n),r={x:t.x+("right"===i?n:-n),y:t.y}}return r}function ro(t,e,i,n,r){var o=0,s=0,a=0,l=0,h=Number((r.distance(e,t)+r.distance(i,e)+r.distance(n,i))/3);if(0!==h)for(var c=0;c<=h;c++){var d=c/h,p=(1-d)*(1-d)*(1-d)*t.x+3*d*(1-d)*(1-d)*e.x+3*d*d*(1-d)*i.x+d*d*d*n.x,u=(1-d)*(1-d)*(1-d)*t.y+3*d*(1-d)*(1-d)*e.y+3*d*d*(1-d)*i.y+d*d*d*n.y;0===c?(o=a=p,s=l=u):(o=Math.min(p,o),s=Math.min(u,s),a=Math.max(p,a),l=Math.max(u,l))}return{x:o,y:s,width:a-o,height:l-s,left:o,top:s,right:o+(a-o),bottom:s+(l-s),center:{x:(o+(a-o))/2,y:(s+(l-s))/2}}}function oo(t,e,i,n,r,o,s){var a={x:0,y:0},l=o/s,h=(1-l)*(1-l)*(1-l)*e.x+3*l*(1-l)*(1-l)*i.x+3*l*l*(1-l)*n.x+l*l*l*r.x;a.x=h;var c=(1-l)*(1-l)*(1-l)*e.y+3*l*(1-l)*(1-l)*i.y+3*l*l*(1-l)*n.y+l*l*l*r.y;return a.y=c,a}function so(t,e){var i=document.getElementById(t.element.id+(e?"_hRuler":"_vRuler")),n=ho(t),r=co(t),o=e?"margin-left:"+n.width+"px;":"margin-top:"+n.height+"px;";if(!i){var s="height:"+(e?n.height:r.height+100)+"px;overflow:hidden;width:"+(e?r.width+100:n.width)+"px;position:absolute;font-size:11px;"+o;i=Ks("div",{id:t.element.id+(e?"_hRuler":"_vRuler"),style:s})}t.element.insertBefore(i,t.element.firstChild);var a=e?t.rulerSettings.horizontalRuler:t.rulerSettings.verticalRuler,l=new OS(a);l.orientation=e?"Horizontal":"Vertical",l.length=(e?r.width:r.height)+a.segmentWidth,l.appendTo("#"+t.element.id+(e?"_hRuler":"_vRuler")),e?t.hRuler=l:t.vRuler=l;var h=document.getElementById(t.element.id+(e?"_hRuler":"_vRuler"));e?t.hRuler.element=h:t.vRuler.element=h}function ao(t){var e=-t.scroller.horizontalOffset,i=-t.scroller.verticalOffset;t&&t.rulerSettings.showRulers?(t.hRuler.length=0,t.vRuler.length=0,void 0!==e&&t.hRuler.element&&po(t,t.hRuler,e,!0),void 0!==i&&t.vRuler.element&&po(t,t.vRuler,i,!1)):lo(t)}function lo(t){na(t.element.id+"_hRuler"),na(t.element.id+"_vRuler"),na(t.element.id+"_overlapRuler")}function ho(t){var e=0,i=0;return t.rulerSettings.showRulers&&(e=t.rulerSettings.horizontalRuler.thickness,i=t.rulerSettings.verticalRuler.thickness),new Qu(i,e)}function co(t){var e=ho(t),i=t.scroller.viewPortHeight,n=t.scroller.viewPortWidth;return n<t.element.clientWidth-e.width&&(n=t.element.clientWidth-e.width),i<t.element.clientHeight-e.height&&(i=t.element.clientHeight-e.height),t.hRuler&&t.hRuler.length&&(n=t.hRuler.length),t.vRuler&&t.vRuler.length&&(i=t.vRuler.length),new Qu(n,i)}function po(t,e,i,n){var r=ho(t),o=co(t),s=n?t.rulerSettings.horizontalRuler:t.rulerSettings.verticalRuler;!function(t,e,i){var n=document.getElementById(t.element.id+(i?"_hRuler":"_vRuler")),r=i?t.hRuler:t.vRuler;n&&t&&e&&(n.style.width=(i?e.width+r.segmentWidth:r.thickness)+"px",n.style.height=(i?r.thickness:e.height+r.segmentWidth)+"px",(n=document.getElementById(t.element.id+"_overlapRuler"))&&(i?n.style.height=r.thickness+"px":n.style.width=r.thickness+"px"))}(t,o,n),function(t,e,i){var n=document.getElementById(t.element.id+(i?"_hRuler_ruler_space":"_vRuler_ruler_space")),r=i?t.hRuler:t.vRuler;n&&t&&e&&(n.style.width=(i?e.width+2*r.segmentWidth:r.thickness)+"px",n.style.height=(i?r.thickness:e.height+2*r.segmentWidth)+"px")}(t,o,n),e.offset=i,e.scale=t.scroller.currentZoom,e.length=(n?o.width:o.height)+100,e.arrangeTick=Oa(s.arrangeTick),e.dataBind();var a=n?t.hRuler.element:t.vRuler.element;n?a.style.marginLeft=r.width-e.hRulerOffset+"px":a.style.marginTop=r.height-e.vRulerOffset+"px"}function uo(t){return kS[t.toString()]}function go(t,e){for(var i=[],n=0;n<e.length;n++){var r=e[parseInt(n.toString(),10)];t.containsRect(r.wrapper.bounds)&&i.push(r)}return i}function mo(t,e){for(var i=0;i<t.length;i++)if(t[parseInt(i.toString(),10)].id===e)return!0;return!1}function fo(t){var e;return t&&(t.type?e="Connector":t.shape&&!t.type&&(e="Node")),e}function vo(t,e){e instanceof Pw&&(t.shape.header||(e.shape.hasHeader=!1))}function yo(t,e,i,n){return n=e?n:void 0!==t[i-1]?t[i-1]+n:0}function bo(t,e){var i=[];if(e)i=t;else{for(var n=0;n<t.length;n++)i.push(t[parseInt(n.toString(),10)]);i.push(t[i.length-2]),i.push(t[i.length-2])}return i}function So(t){for(var e=0;e<t.ports.length;e++)t.ports[parseInt(e.toString(),10)].inEdges=[],t.ports[parseInt(e.toString(),10)].outEdges=[];return t}function wo(t,e){if(e instanceof Pw){switch(f()?t.shape.umlActivityShape:t.shape.shape){case"JoinNode":t.width||(e.width=20),t.height||(e.height=90),t.style&&t.style.fill||(e.style.fill="black");break;case"ForkNode":t.width||(e.width=90),t.height||(e.height=20),t.style&&t.style.fill||(e.style.fill="black");break;case"InitialNode":case"FinalNode":t.style&&t.style.fill||(e.style.fill="black")}}else{switch(f()?t.shape.umlActivityFlow:t.shape.flow){case"Object":t.style&&t.style.strokeDashArray||(e.style.strokeDashArray="8 4"),t.style&&t.style.strokeWidth||(e.style.strokeWidth=2),t.targetDecorator&&t.targetDecorator.shape||(e.targetDecorator.shape="OpenArrow");break;case"Control":t.style&&t.style.strokeWidth||(e.style.strokeWidth=2),t.targetDecorator&&t.targetDecorator.shape||(e.targetDecorator.shape="OpenArrow"),t.sourceDecorator&&t.sourceDecorator.shape||(e.sourceDecorator.shape="None")}}}function Io(t,e){switch(t.shape.type){case"Bpmn":switch(f()?t.shape.bpmnFlow:t.shape.flow){case"Sequence":("Normal"===t.shape.sequence&&"Bezier"!==t.type||"Default"===t.shape.sequence||"Conditional"===t.shape.sequence)&&(e.targetDecorator&&e.targetDecorator.style&&(e.targetDecorator.style.fill=t.targetDecorator&&t.targetDecorator.style&&t.targetDecorator.style.fill||"black"),"Conditional"===t.shape.sequence&&e.sourceDecorator&&(e.sourceDecorator.style&&(e.sourceDecorator.style.fill=t.sourceDecorator&&t.sourceDecorator.style&&t.sourceDecorator.style.fill||"white"),e.sourceDecorator.width=t.sourceDecorator&&t.sourceDecorator.width||20,e.sourceDecorator.height=t.sourceDecorator&&t.sourceDecorator.width||10));break;case"Association":"Default"!==t.shape.association&&"Directional"!==t.shape.association&&"BiDirectional"!==t.shape.association||(e.targetDecorator&&e.targetDecorator.style&&(e.targetDecorator.style.fill=t.targetDecorator&&t.targetDecorator.style&&t.targetDecorator.style.fill||"black"),"BiDirectional"===t.shape.association&&e.sourceDecorator&&e.sourceDecorator.style&&(e.sourceDecorator.style.fill=t.sourceDecorator&&t.sourceDecorator.style&&t.sourceDecorator.style.fill||"white",e.sourceDecorator.width=t.sourceDecorator&&t.sourceDecorator.width||5,e.sourceDecorator.height=t.sourceDecorator&&t.sourceDecorator.height||10));break;case"Message":e.style&&!e.style.strokeDashArray&&(e.style.strokeDashArray=t.style&&t.style.strokeDashArray||"4 4")}break;case"UmlActivity":switch(f()?t.shape.umlActivityFlow:t.shape.flow){case"Exception":"Directional"!==t.shape.association&&"BiDirectional"!==t.shape.association||(e.style.strokeDashArray=t.style&&t.style.strokeDashArray||"2 2")}break;case"UmlClassifier":var i=!1;"Association"===t.shape.relationship?i=!0:"Inheritance"===t.shape.relationship?(e.targetDecorator&&e.targetDecorator.style&&(e.targetDecorator.style.fill=t.targetDecorator&&t.targetDecorator.style&&t.targetDecorator.style.fill||"white"),e.style&&(i=!0,e.style.strokeDashArray=t.style&&t.style.strokeDashArray||"4 4")):"Composition"===t.shape.relationship?(e.sourceDecorator&&e.sourceDecorator.style&&(e.sourceDecorator.style.fill=t.sourceDecorator&&t.sourceDecorator.style&&t.sourceDecorator.style.fill||"black"),i=!0):"Aggregation"===t.shape.relationship||void 0===t.shape.relationship?(e.sourceDecorator&&e.sourceDecorator.style&&(e.sourceDecorator.style.fill=t.sourceDecorator&&t.sourceDecorator.style&&t.sourceDecorator.style.fill||"white"),i=!0):"Dependency"===t.shape.relationship?(e.sourceDecorator&&e.sourceDecorator.style&&(e.sourceDecorator.style.fill=t.sourceDecorator&&t.sourceDecorator.style&&t.sourceDecorator.style.fill||"white"),i=!0,e.style.strokeDashArray="4 4"):"Realization"===t.shape.relationship&&(e.sourceDecorator&&e.sourceDecorator.style&&(e.sourceDecorator.style.fill=t.sourceDecorator&&t.sourceDecorator.style&&t.sourceDecorator.style.fill||"white"),i=!0),i&&(e.style.strokeWidth=t.style&&t.style.strokeWidth||2)}}function xo(t,e,i){var n;n=Gu.findLength(e,t)>Gu.findLength(i,t)?i:e;var r=Gu.findAngle(e,i),o=Gu.findAngle(n,t),s=Gu.findLength(n,t),a=o+2*(r-o);return{x:n.x+s*Math.cos(a*Math.PI/180),y:n.y+s*Math.sin(a*Math.PI/180)}}function Mo(t){var e=t.parentElement;do{if(ea(e,"e-diagram"))return!0;e=e.parentElement}while(e);return!1}function Co(t,e,i){if(t&&t.children&&t.children.length>0)for(var n=void 0,r=0;r<t.children.length;r++)return(n=i[t.children[parseInt(r.toString(),10)]]).shape.type===e||Co(n,e,i);return!1}function No(t,e,i,n,r){if(i&&(t instanceof ES||t&&(t.shape&&"SwimLane"!==t.shape.type||void 0===t.shape)))for(var o=void 0,s=0,a=Object.keys(i);s<a.length;s++){var l=a[s];if(o=i[""+l],"shape"===l&&o.type&&(t.shape={type:o.type}),o)if(Array.isArray(o)&&o.length&&o.length>0&&"annotations"!==r&&"ports"!==r)if(t[""+l].length>0)for(var h=0;h<=t[""+l].length;h++)No(t[""+l],e?e[""+l]:void 0,i[""+l],"annotations"===l||"ports"===l?t:void 0,l);else No(t[""+l],e?e[""+l]:void 0,i[""+l],"annotations"===l||"ports"===l?t:void 0,l);else if(o instanceof Object&&e&&"annotations"!==r&&"ports"!==r)No(t[""+l],e[""+l],i[""+l]);else if("annotations"!==r&&"ports"!==r&&e&&!e[""+l]||!e&&t&&(t[""+l]||void 0!==t[""+l]))t[""+l]=i[""+l];else{var c=void 0;"annotations"!==r&&"ports"!==r||("annotations"===r?(t[""+l]&&No(t[""+l],e[""+l],i[""+l]),t[""+l]||(VS(n)===ES?(c=new ym(n,"annotations",i[""+l]),n.annotations.push(c)):(c=new vm(n,"annotations",i[""+l]),n.annotations.push(c)))):t[""+l]?No(t[""+l],e[""+l],i[""+l]):(c=new pm(n,"ports",i[""+l]),n.ports.push(c)))}}}function Eo(t,e,i,n){var r,o="Role";if(e)for(var s=0,a=Object.keys(e);s<a.length;s++){var l=a[s];if(r=e[""+l],"getAssistantDetails"===l){if(f())for(var h=0,c=Object.keys(n.data);h<c.length;h++){if(o=c[h],n.data[""+o]===e[""+l].root)break}if(n.data[""+o]===e[""+l].root)for(var d=e[""+l].assistants,p=0;p<d.length;p++)for(var u=0;u<i.length;u++)i[parseInt(u.toString(),10)].data[""+o]===d[parseInt(p.toString(),10)]&&(t.assistants.push(i[parseInt(u.toString(),10)].id),t.children.splice(0,1))}else r&&(t[""+l]=e[""+l])}!t.hasSubTree&&e.canEnableSubTree&&(t.orientation=n.layoutInfo.orientation,t.type=n.layoutInfo.type,n.layoutInfo.offset!==t.offset&&void 0!==n.layoutInfo.offset&&(t.offset=n.layoutInfo.offset)),n.layoutInfo.hasSubTree=t.hasSubTree}function Do(t,e){for(var i="Bezier"===t.type?function(t){var e=[];if("Bezier"===t.type)for(var i=0,n=0;n<t.segments.length;n++)for(var r=t.segments[parseInt(n.toString(),10)],o=Gu.isEmptyPoint(r.point1)?r.bezierPoint1:r.point1,s=Gu.isEmptyPoint(r.point2)?r.bezierPoint2:r.point2,a=Number((t.distance(o,r.points[0])+t.distance(s,o)+t.distance(r.points[1],s))/1.5),l=0;l<a-1;l+=10)e[parseInt(i.toString(),10)]=oo(0,r.points[0],Gu.isEmptyPoint(r.point1)?r.bezierPoint1:r.point1,Gu.isEmptyPoint(r.point2)?r.bezierPoint2:r.point2,r.points[1],l,a),i++;return e}(t):t.intermediatePoints,n=0;n<i.length-1;n++){var r=i[parseInt(n.toString(),10)],o=i[n+1],s=Zu.toBounds([r,o]);if(s.Inflate(t.hitPadding),s.containsPoint(e)){var a=xo(e,r,o),l=To({x1:r.x,x2:o.x,y1:r.y,y2:o.y},{x1:e.x,x2:a.x,y1:e.y,y2:a.y});if(l.enabled){var h=Gu.findLength(e,l.intersectPt);if(Math.abs(h)<t.hitPadding)return!0}else{var c=Zu.toBounds([e,e]);if(c.Inflate(3),c.containsPoint(r)||c.containsPoint(o))return!0}if(Gu.equals(e,a))return!0}}if(t.annotations.length>0){var d=t.wrapper.children;for(n=3;n<d.length;n++){if(d[parseInt(n.toString(),10)].bounds.containsPoint(e))return!0}}return!1}function To(t,e){var i={x:0,y:0},n=t,r=e,o=(r.y2-r.y1)*(n.x2-n.x1)-(r.x2-r.x1)*(n.y2-n.y1),s=(r.x2-r.x1)*(n.y1-r.y1)-(r.y2-r.y1)*(n.x1-r.x1),a=(n.x2-n.x1)*(n.y1-r.y1)-(n.y2-n.y1)*(n.x1-r.x1);if(0===o||(t.x1===e.x1||t.y1===e.y1)&&(t.x2===e.x2||t.y2===e.y2)&&(0===s||0===a)&&o>0)return{enabled:!1,intersectPt:i};var l=s/o,h=a/o;return l>=0&&l<=1&&h>=0&&h<=1?(i.x=n.x1+l*(n.x2-n.x1),i.y=n.y1+l*(n.y2-n.y1),{enabled:!0,intersectPt:i}):{enabled:!1,intersectPt:i}}function Oo(t,e,i,n){var r=To(Lo(t.x,t.y,e.x,e.y),Lo(i.x,i.y,n.x,n.y));return r.enabled?r.intersectPt:{x:0,y:0}}function Lo(t,e,i,n){return{x1:Number(t)||0,y1:Number(e)||0,x2:Number(i)||0,y2:Number(n)||0}}function Ao(t,e,i){var n=[];i=i||0;var r={x:e.topLeft.x-i,y:e.topLeft.y},o={x:e.topRight.x+i,y:e.topRight.y},s={x:e.bottomRight.x,y:e.bottomRight.y-i},a={x:e.bottomLeft.x,y:e.bottomLeft.y+i};return n.push(r),n.push(o),n.push(s),n.push(a),n}function zo(t,e,i,n){var r=i instanceof Pw?i.constraints&wg.InheritTooltip:i.constraints&bg.InheritTooltip,o=i instanceof Pw?i.constraints&wg.Tooltip:i.constraints&bg.Tooltip,s="Mouse"===(!r&&o?i.tooltip.relativeMode:t.tooltip.relativeMode);"Mouse"===n?s=!0:"Object"===n&&(s=!1);var a=function(t,e,i,n){var r={},o=document.getElementById(i.element.id),s=t.wrapper.bounds,a=o.getBoundingClientRect();switch(i.tooltipObject.position){case"BottomCenter":r=ko(e,s.bottomCenter,i,n,a.width/2,a.height);break;case"BottomLeft":case"LeftBottom":r=ko(e,s.bottomLeft,i,n,0,a.height);break;case"BottomRight":case"RightBottom":r=ko(e,s.bottomRight,i,n,a.width,a.height);break;case"LeftCenter":r=ko(e,s.middleLeft,i,n,0,a.height/2);break;case"LeftTop":case"TopLeft":r=ko(e,s.topLeft,i,n,0,0);break;case"RightCenter":r=ko(e,s.middleRight,i,n,a.width,a.height/2);break;case"RightTop":case"TopRight":r=ko(e,s.topRight,i,n,a.width,0);break;case"TopCenter":r=ko(e,s.topCenter,i,n,a.width/2,0)}return r}(i,e,t,s),l=ho(t);return{x:a.x+l.width,y:a.y+l.height}}function ko(t,e,i,n,r,o){var s={},a=i.scroller.transform.scale,l=i.scroller.horizontalOffset,h=i.scroller.verticalOffset;return s.x=(n?t.x:e.x)*a+l-r,s.y=(n?t.y:e.y)*a+h-o,s}function jo(t,e){var i=new rm;return i.data=t.pathData,i.height=t.height>10?t.height-(t.padding.bottom+t.padding.top):t.height,i.width=t.width>10?t.width-(t.padding.left+t.padding.right):t.width,i.visible=e.visible,i.id=e.id+"_shape",i.inversedAlignment=!1,i.horizontalAlignment="Center",i.verticalAlignment="Center",i.style={fill:t.iconStrokeColor,strokeColor:t.iconStrokeColor,strokeWidth:t.iconStrokeWidth},i.setOffsetWithRespectToBounds(.5,.5,"Fraction"),i.relativeMode="Object",i.description=e.description||"",i}function Po(t,e){var i,n=0,r=0;for(n=0;n<t.length;n++){var o=ma(t[parseInt(n.toString(),10)].wrapper);for(r=n+1;r<t.length;r++){var s=ma(t[parseInt(r.toString(),10)].wrapper);"Top"===e||"Bottom"===e||"BottomToTop"===e||"Middle"===e?o.center.y>s.center.y&&(i=t[parseInt(n.toString(),10)],t[parseInt(n.toString(),10)]=t[parseInt(r.toString(),10)],t[parseInt(r.toString(),10)]=i):o.center.x>s.center.x&&(i=t[parseInt(n.toString(),10)],t[parseInt(n.toString(),10)]=t[parseInt(r.toString(),10)],t[parseInt(r.toString(),10)]=i)}}return t}function Ro(t,e,i){var n=Bo(t,e),r=Gu.findAngle(t[n.index],t[n.index+1]),o=Ho(e),s=Gu.transform(n.point,r+45,o);return n.point=s,n.angle=r,n}function Bo(t,e){for(var i,n,r,o,s=0,a=e.offset,l=[],h=0;h<t.length-1;h++)s+=Gu.distancePoints(t[parseInt(h.toString(),10)],t[h+1]),l.push(s);for(var c=a*s,d=0;d<l.length;d++){if(l[parseInt(d.toString(),10)]>=c)return n=Gu.findAngle(t[parseInt(d.toString(),10)],t[d+1]),i=Gu.transform(t[parseInt(d.toString(),10)],n,c-(r||0)),o=d,{point:i,index:o};r=l[parseInt(d.toString(),10)]}return{point:i,index:o}}function Ho(t){var e;e=t instanceof Ob?0:void 0===t.content?10:0;var i=0;switch(t.alignment){case"Center":i=0;break;case"Before":i=-(0+e);break;case"After":i=0+e}return i}function Uo(t,e,i){e%=360;var n,r;switch(t.alignment){case"Before":e>=45&&e<=135?(r="right",n=.5===t.offset?"center":"top"):e>=225&&e<=315?(r="left",n=.5===t.offset?"center":"bottom"):e>45&&e<225?(n="top",r=.5===t.offset?"center":"right"):(n="bottom",r=.5===t.offset?"center":"left");break;case"After":e>=45&&e<=135?(r="left",n=.5===t.offset?"center":"top"):e>=225&&e<=315?(r="right",n=.5===t.offset?"center":"bottom"):e>45&&e<225?(n="bottom",r=.5===t.offset?"center":"right"):(n="top",r=.5===t.offset?"center":"left");break;case"Center":r=h(t.horizontalAlignment)?"center":t.horizontalAlignment.toLowerCase(),n=h(t.verticalAlignment)?"center":t.verticalAlignment.toLowerCase()}if(0===t.offset||1===t.offset){switch(Vo(i[0],i[1])){case"left":r=0===t.offset?"right":"left";break;case"right":r=0===t.offset?"left":"right";break;case"bottom":n=0===t.offset?"top":"bottom";break;case"top":n=0===t.offset?"bottom":"top"}}return{hAlign:r,vAlign:n}}function Vo(t,e){return Math.abs(e.x-t.x)>Math.abs(e.y-t.y)?t.x<e.x?"right":"left":t.y<e.y?"bottom":"top"}function _o(t,e){if(t instanceof Pw&&t.children)for(var i=0;i<t.children.length;i++)e.nameTable[t.children[parseInt(i.toString(),10)]].children&&_o(t,e),e.removeFromAQuad(e.nameTable[t.children[parseInt(i.toString(),10)]]),e.removeObjectsFromLayer(e.nameTable[t.children[parseInt(i.toString(),10)]]),delete e.nameTable[t.children[parseInt(i.toString(),10)]]}function Fo(t,e){if(t&&t.children&&t.children.length>0)for(var i=0;i<t.children.length;i++){var n=t.children[parseInt(i.toString(),10)];n instanceof em&&Fo(n,e)}return-1===e.indexOf(t.id)&&e.push(t.id),e}function Yo(t){var e=function(t){for(var e,i,n=[],r=0;r<t.length;r++)if("SwimLane"===(e=t[parseInt(r.toString(),10)]).shape.type){i=e.wrapper.children[0].childTable;for(var o=0,s=Object.keys(i);o<s.length;o++)n=Fo(i[""+s[o]],n)}return n}(t.nodes),i=fa(t,t.getCustomProperty);return i.selectedItems.nodes=[],i.selectedItems.connectors=[],i.selectedItems.wrapper=null,t.serializationSettings.preventDefaults&&(i=Wo(i,t)),function(t,e){var i=e.nodes;if(i)for(var n=0;n<i.length;n++)-1!==t.indexOf(i[parseInt(n.toString(),10)].id)&&(i.splice(n,1),n--)}(e,i),JSON.stringify(i)}function Wo(t,e,i,n){i=function(t,e){var i,n=[];if(t.getClassName){var r=new YI;switch(t.getClassName()){case"Diagram":i=r;break;case"Node":i=new Pw(r,"",n);break;case"Path":i=new hw(r,"",n);break;case"Native":i=new cw(r,"",n);break;case"Html":i=new dw(r,"",n);break;case"Image":i=new pw(r,"",n);break;case"Text":i=new uw(r,"",n);break;case"BasicShape":i=new gw(r,"",n);break;case"FlowShape":i=new mw(r,"",n);break;case"BpmnShape":i=new Cw(r,"",n);break;case"UmlActivityShape":i=new Nw(r,"",n);break;case"UmlClassifierShape":i=new kw(r,"",n);break;case"SwimLane":i=new Uw(r,"",n),t.header&&(i.header=new Rw(r,"",n),i.header.style.fill="");break;case"ShapeAnnotation":i=new vm(r,"",n);break;case"PointPort":i=new pm(r,"",n);break;case"BpmnGateway":i=new fw(r,"",n);break;case"BpmnDataObject":i=new vw(r,"",n);break;case"BpmnEvent":i=new bw(r,"",n);break;case"BpmnSubEvent":i=new Sw(r,"",n);break;case"BpmnActivity":i=new xw(r,"",n);break;case"BpmnAnnotation":i=new Mw(r,"",n);break;case"MethodArguments":i=new Ew(r,"",n);break;case"UmlClassAttribute":i=new Dw(r,"",n);break;case"UmlClassMethod":i=new Tw(r,"",n);break;case"UmlClass":i=new Ow(r,"",n);break;case"UmlInterface":i=new Lw(r,"",n);break;case"UmlEnumerationMember":i=new Aw(r,"",n);break;case"UmlEnumeration":i=new zw(r,"",n);break;case"Lane":i=new Bw(r,"",n);break;case"Phase":i=new Hw(r,"",n);break;case"ChildContainer":i=new Vw;break;case"Connector":i=new ES(r,"",n);break;case"StraightSegment":i=new bS(r,"",n);break;case"BezierSegment":i=new SS(r,"",n);break;case"OrthogonalSegment":i=new wS(r,"",n);break;case"PathAnnotation":i=new ym(r,"",n);break;case"Stop":i=new og(r,"",n);break;case"Point":i=e||new Gu(r,"",n);break;case"UserHandle":i=new zS(r,"",n);break;case"Command":i=new BS(r,"",n)}}else i=e;return parent=void 0,e=void 0,i}(e,i);for(var r=[],o=0,s=r=r.concat(Object.keys(t));o<s.length;o++){var a=s[o];e instanceof Pw&&(n="shape"===a),t[""+a]instanceof Array?function(t,e,i,n){if(0===t[""+n].length)delete t[""+n];else if(t[n].every(function(t){return"number"==typeof t})){var r=void 0,o=!0;for(r=0;r<t[""+n].length;r++)o=!(!o||t[""+n][parseInt(r.toString(),10)]!==e[""+n][parseInt(r.toString(),10)]);o&&delete t[""+n]}else{var r=void 0;if("layers"===n&&(t[""+n].splice(0,1),0===t[""+n].length&&delete t[""+n]),t[""+n])for(r=t[""+n].length-1;r>=0;r--)"nodes"!==n&&"connectors"!==n||(t[""+n][parseInt(r.toString(),10)].wrapper=null),"dataManager"!==n&&(t[""+n][parseInt(r.toString(),10)]=Wo(t[""+n][parseInt(r.toString(),10)],i[""+n][parseInt(r.toString(),10)],void 0!==e[""+n]?e[""+n][parseInt(r.toString(),10)]:[]),"[]"!==JSON.stringify(t[""+n][parseInt(r.toString(),10)])&&"{}"!==JSON.stringify(t[""+n][parseInt(r.toString(),10)])&&void 0!==t[""+n][parseInt(r.toString(),10)]||t[""+n].splice(r,1))}t=void 0}(t,i,e,a):t[""+a]instanceof Object&&i&&i[""+a]?"wrapper"!==a&&(t[""+a]=Wo(t[""+a],e[""+a],i[""+a],n)):(i&&t[""+a]===i[""+a]||void 0===t[""+a])&&(n&&"type"===a||e instanceof Uw&&"orientation"===a||delete t[""+a]),"[]"!==JSON.stringify(t[""+a])&&"{}"!==JSON.stringify(t[""+a])&&void 0!==t[""+a]||delete t[""+a]}return i=void 0,r=void 0,t}function Qo(t,e){e.enableServerDataBinding(!1);var i=e.blazorActions;e.blazorActions=e.addConstraints(i,$u.ClearObject),e.clear(),e.blazorActions=e.removeConstraints(i,$u.ClearObject),e.protectPropertyChange(!0);for(var n=e.dataSourceSettings.doBinding,r=e.setNodeTemplate,o=e.getDescription,s=e.getCustomProperty,a={},l=0,h=e.commandManager.commands;l<h.length;l++){var c=h[l];a[c.name]={execute:c.execute,canExecute:c.canExecute}}var d=e.rulerSettings.horizontalRuler.arrangeTick,p=e.rulerSettings.verticalRuler.arrangeTick,u=e.layout.getLayoutInfo,g=e.layout.getBranch,m=e.getNodeDefaults,f=e.getConnectorDefaults,v=JSON.parse(t);v=Xo(v),e.contextMenuSettings=v.contextMenuSettings||{},e.constraints=v.constraints||Mg.Default,e.tool=v.tool||Cg.Default,e.bridgeDirection=v.bridgeDirection||"Top",e.pageSettings=v.pageSettings||{},e.drawingObject=v.drawingObject||void 0,e.tooltip=v.tooltip||{},e.addInfo=v.addInfo||void 0,e.getDescription=o,e.scrollSettings=v.scrollSettings||{},e.commandManager=v.commandManager||{},v.layers&&v.layers.length>0&&function(t){var e,i,n,r=[];for(e=0;e<t.layers.length;e++){for(i=0;i<t.layers[e].objects.length;i++)for(n=0;n<t.nodes.length;n++)t.layers[e].objects[i]===t.nodes[n].id&&r.push(t.layers[e].objects[i]);for(i=0;i<t.layers[e].objects.length;i++)for(n=0;n<t.connectors.length;n++)t.layers[e].objects[i]===t.connectors[n].id&&r.push(t.layers[e].objects[i]);t.layers[e].objects=r,r=[]}}(v),e.layers=v.layers||[],e.rulerSettings.horizontalRuler.arrangeTick=d,e.rulerSettings.verticalRuler.arrangeTick=p;for(var y=0,b=e.commandManager.commands;y<b.length;y++){var S=b[y];a[S.name]&&(S.execute=a[S.name].execute,S.canExecute=a[S.name].canExecute)}if(e.backgroundColor=v.backgroundColor||"transparent",e.basicElements=v.basicElements||[],v.connectors)for(var w=0;w<v.connectors.length;w++)"Bezier"===v.connectors[w].type&&v.connectors[w].segments.length>0&&v.connectors[w].bezierSettings.allowSegmentsReset&&(v.connectors[w].segments=[]);if(e.connectors=v.connectors||[],e.dataSourceSettings=v.dataSourceSettings||{},e.dataSourceSettings.doBinding=n,e.height=v.height||"100%",e.setNodeTemplate=r,e.getConnectorDefaults=f,e.getNodeDefaults=m,e.getCustomProperty=s,e.mode=v.mode||"SVG",v.nodes)for(w=0;w<v.nodes.length;w++)v.nodes[w].shape&&"SwimLane"===v.nodes[w].shape.type&&(null==v.nodes[w].wrapper&&(v.nodes[w].wrapper={actualSize:{width:v.nodes[w].width,height:v.nodes[w].height},offsetX:v.nodes[w].offsetX,offsetY:v.nodes[w].offsetY}),Cr(v.nodes[w],void 0,void 0,void 0,void 0,!0));e.nodes=v.nodes||[],e.rulerSettings=v.rulerSettings||{},e.snapSettings=v.snapSettings||{},e.width=v.width||"100%",e.layout=v.layout||{},v.layout&&"None"!==v.layout.type&&(e.canLayout=!1),e.layout.getLayoutInfo=Oa(u),e.layout.getBranch=Oa(g),e.diagramActions=0,e.isLoading=!0,e.protectPropertyChange(!1);var I;for(w=0;w<e.views.length;w++)I=e.views[e.views[w]],e.blazorActions=e.addConstraints(i,$u.ClearObject),I instanceof YI&&I.refresh(),e.blazorActions=e.removeConstraints(i,$u.ClearObject),I instanceof YI&&e.element.classList.add("e-diagram");return v.selectedItems&&(v.selectedItems.nodes=[],v.selectedItems.connectors=[],v.selectedItems.selectedObjects=[]),e.selectedItems=v.selectedItems,e.enableServerDataBinding(!0),e.canLayout=!0,e.swimlaneChildTable={},e.swimlaneZIndexTable={},v}function Xo(t){if(t&&(void 0===t.version||t.version<17.1)&&t.nodes)for(var e=0,i=t.nodes;e<i.length;e++){var n=i[e];if(n&&n.ports&&n.ports.length>0)for(var r=0,o=n.ports;r<o.length;r++){var s=o[r];s&&s.constraints&&s.constraints===Pg.None&&(s.constraints=Pg.Default)}}return t}function qo(t,e){var i=e.style,n=e;e.canApplyStyle=!0;for(var r=0,o=Object.keys(t);r<o.length;r++){switch(o[r]){case"fill":i.fill=t.fill,i instanceof dg&&(i.fill="transparent");break;case"textOverflow":i.textOverflow=t.textOverflow;break;case"opacity":i.opacity=t.opacity;break;case"strokeColor":i.strokeColor=t.strokeColor;break;case"strokeDashArray":i.strokeDashArray=t.strokeDashArray;break;case"strokeWidth":i.strokeWidth=t.strokeWidth;break;case"bold":i.bold=t.bold;break;case"color":i.color=t.color;break;case"textWrapping":i.textWrapping=t.textWrapping;break;case"fontFamily":i.fontFamily=t.fontFamily;break;case"fontSize":i.fontSize=t.fontSize;break;case"italic":i.italic=t.italic;break;case"textAlign":i.textAlign=t.textAlign;break;case"whiteSpace":i.whiteSpace=t.whiteSpace;break;case"textDecoration":i.textDecoration=t.textDecoration;break;case"gradient":if(i.gradient){!function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){var r=n[i];switch(r){case"type":e.type=t.type;break;case"x1":e.x1=t.x1;break;case"x2":e.x2=t.x2;break;case"y1":e.y1=t.y1;break;case"y2":e.y2=t.y2;break;case"cx":e.cx=t.cx;break;case"cy":e.cy=t.cy;break;case"fx":e.fx=t.fx;break;case"fy":e.fy=t.fy;break;case"r":e.r=t.r;break;case"stops":e.stops=t.stops}}}(t.gradient,i.gradient);break}}}e instanceof Jg&&n.refreshTextElement()}function Go(t,e,i){for(var n=e,r=n.hyperlink,o=0,s=Object.keys(t);o<s.length;o++){switch(s[o]){case"color":n.style.color=r.color=t.color;break;case"content":n.content=r.content=t.content||r.link;break;case"link":var a=i.style;n.style.color=t.link?r.color:a.color,n.style.textDecoration=t.link?r.textDecoration:i.style.textDecoration,n.content=t.link?r.content||t.link:i.content,r.link=t.link;break;case"textDecoration":n.style.textDecoration=r.textDecoration=t.textDecoration;break;case"hyperlinkOpenState":r.hyperlinkOpenState=t.hyperlinkOpenState}}}function Zo(t,e,i){t.width=e.width,t.height=e.height,t.minHeight=e.minHeight,t.maxHeight=e.maxHeight,t.minWidth=e.minWidth,t.maxWidth=e.maxWidth,t.horizontalAlignment=e.wrapper.children[0].horizontalAlignment,t.verticalAlignment=e.wrapper.children[0].verticalAlignment,t.relativeMode=e.wrapper.children[0].relativeMode,t.visible=e.wrapper.children[0].visible,e.shape instanceof uw&&(t.margin=e.shape.margin),t.id=e.wrapper.children[0].id,t.style=e.style;for(var n=0,r=i.views;n<r.length;n++){var o=r[n];na(e.id+"_groupElement",o),na(e.id+"_content_groupElement",o),na(e.id+"_html_element",o)}e.wrapper.children.splice(0,1),e.wrapper.children.splice(0,0,t)}function $o(t,e,i,n){var r=new Gg;switch(t.shape.type){case"Path":var o=new rm;o.data=e.shape.data,Zo(r=o,e,n);break;case"Image":var s=new sm;s.source=e.shape.source,s.imageAlign=e.shape.align,s.imageScale=e.shape.scale,Zo(r=s,e,n);break;case"Text":Zo(r=new Jg,e,n);break;case"Basic":var a=(f()?"Rectangle"===e.shape.basicShape:"Rectangle"===e.shape.shape)?new Gg:new rm;!f()&&"Polygon"===e.shape.shape||f()&&"Polygon"===e.shape.basicShape?a.data=It(e.shape.points):a.data=Ut(f()?e.shape.basicShape:e.shape.shape),(!f()&&"Rectangle"===e.shape.shape||f()&&"Rectangle"===e.shape.basicShape)&&(a.cornerRadius=e.shape.cornerRadius),Zo(r=a,e,n);break;case"Flow":var l=new rm,h=f()?e.shape.flowShape:e.shape.shape;l.data=Qt(h),Zo(r=l,e,n);break;case"Native":var c=new lm(t.id,n.element.id);c.content=e.shape.content,c.scale=e.shape.scale,Zo(r=c,e,n);break;case"HTML":var d=new Cb(e.id,n.element.id);d.content=e.shape.content,Zo(r=d,e,n)}void 0===t.shape.type||t.shape.type===i.shape.type||f()&&"UmlActivity"===t.shape.type?Ko(t,e,n,i):(r.width=e.wrapper.children[0].width,r.height=e.wrapper.children[0].height,e.shape instanceof uw&&(r.margin=e.shape.margin),r.style=e.style,e.wrapper.children[0]=r)}function Ko(t,e,i,n){if(Object.keys(t.shape).length>0)if("Path"===e.shape.type&&void 0!==t.shape.data)e.wrapper.children[0].data=t.shape.data;else if("Text"===e.shape.type&&void 0!==t.shape.content)e.wrapper.children[0].content=t.shape.content;else if("Image"===e.shape.type&&void 0!==t.shape.source)e.wrapper.children[0].source=t.shape.source;else if("Native"===e.shape.type){for(var r=void 0,o=0;o<i.views.length;o++)r=Us(e.wrapper.children[0].id+"_native_element",i.views[parseInt(o.toString(),10)]),void 0!==t.shape.content&&r&&(r.removeChild(r.children[0]),e.wrapper.children[0].content=t.shape.content,r.appendChild(ra(e.wrapper.children[0],!1)));e.wrapper.children[0].scale=t.shape.scale?t.shape.scale:e.wrapper.children[0].scale}else if("HTML"===e.shape.type){var s=void 0;for(o=0;o<i.views.length;o++)(s=Us(e.wrapper.children[0].id+"_html_element",i.views[parseInt(o.toString(),10)]))&&(s.removeChild(s.children[0]),e.wrapper.children[0].content=t.shape.content,s.appendChild(ra(e.wrapper.children[0],!0)))}else if("Flow"===e.shape.type&&(f()&&void 0!==t.shape.flowShape||void 0!==t.shape.shape)){e.shape.shape=f()?t.shape.flowShape:t.shape.shape;var a=Qt(e.shape.shape.toString());e.wrapper.children[0].data=a}else if("UmlActivity"===e.shape.type&&(f()&&void 0!==t.shape.umlActivityShape||!f()&&void 0!==t.shape.shape))Jo(e,t);else if(void 0!==t.shape.cornerRadius)e.wrapper.children[0].cornerRadius=t.shape.cornerRadius;else if("Basic"===e.shape.type&&n&&"Rectangle"===n.shape.shape){var l=new rm,h=Ut(f()?e.shape.basicShape:e.shape.shape);l.data=h;Zo(l,e,i)}else if(f()&&void 0!==t.shape.basicShape||void 0!==t.shape.shape){e.shape.shape=f()?t.shape.basicShape:t.shape.shape;var c=Ut(e.shape.shape.toString());e.wrapper.children[0].data=c}e.wrapper.children[0].canMeasurePath=!0}function Jo(t,e){f()?t.shape.umlActivityShape=e.shape.umlActivityShape:t.shape.shape=e.shape.shape;var i=uo((f()?t.shape.umlActivityShape:t.shape.shape).toString());f()&&"InitialNode"===t.shape.umlActivityShape||!f()&&"InitialNode"===t.shape.shape?t.wrapper.children[0].style.fill="black":!f()&&("ForkNode"===t.shape.shape||"JoinNode"===t.shape.shape)||f()&&("ForkNode"===t.shape.umlActivityShape||"JoinNode"===t.shape.umlActivityShape)?t.wrapper.children[0].style.fill="black":(!f()&&"FinalNode"===t.shape.shape||f()&&"FinalNode"===t.shape.umlActivityShape)&&t instanceof Pw&&(t.wrapper=ts(t)),i&&(t.wrapper.children[0].data=i)}function ts(t){var e=new em;e.style.fill="transparent";var i="M 25 50 C 11.21 50 0 38.79 0 25 C 0 11.21 11.21 0 25 0 C 38.78 0 50 11.21 50 25 C 50 38.79 38.78 50 25 50",n=new rm;n.data=i,n.id=t.id+"_0_finalNode",n.horizontalAlignment="Center",n.verticalAlignment="Center",n.relativeMode="Object",n.style.strokeColor=t.style.strokeColor,n.style.strokeWidth=t.style.strokeWidth;var r=new rm;return r.data=i,r.id=t.id+"_1_finalNode",r.horizontalAlignment="Center",r.verticalAlignment="Center",r.relativeMode="Object",r.style.fill=t.style.fill,r.style.strokeColor=t.style.strokeColor,r.style.strokeWidth=t.style.strokeWidth,e.children=[n,r],e.children[0].width=t.width,e.children[0].height=t.height,e.children[1].height=t.height/1.5,e.children[1].width=t.width/1.5,e.style.strokeWidth=0,e.style.strokeColor="transparent",e}function es(t,e,i){var n=f()?i.shape.umlActivityShape:i.shape.shape,r=uo(n);switch(t.data=r,e=t,n){case"StructuredNode":if(i.annotations)for(var o=0;o<i.annotations.length;o++)i.annotations[parseInt(o.toString(),10)].content="<<"+i.annotations[parseInt(o.toString(),10)].content+">>";e=t;break;case"FinalNode":e=ts(i)}return e}function is(t){na(t+"_linear"),na(t+"_radial")}function ns(t,e){var i=t.indexOf(e);i>=0&&t.splice(i,1)}function rs(t,e,i){var n;t.intermediatePoints=e,t.updateSegmentElement(t,e,t.wrapper.children[0],i);var r=t.sourceDecorator;if("Bezier"===t.type){var o=t.segments[0],s=t.segments[t.segments.length-1];n=[Gu.isEmptyPoint(s.point2)?s.bezierPoint2:s.point2,Gu.isEmptyPoint(o.point1)?o.bezierPoint1:o.point1]}else n=t.intermediatePoints;e=t.clipDecorators(t,e,i);var a=t.wrapper.children[0];a.canMeasurePath=!0,a=t.wrapper.children[1],t.updateDecoratorElement(a,e[0],n[1],r);var l=t.targetDecorator;a=t.wrapper.children[2],t.updateDecoratorElement(a,e[e.length-1],n[n.length-2],l),t.updateShapeElement(t)}function os(t,e,i){var n,r=t.wrapper,o=r.bounds,s=e.offset,a=e.size/i.scale,l=e.margin,h=r.offsetX-r.actualSize.width*r.pivot.x,c=r.offsetY-r.actualSize.height*r.pivot.y;if(n={x:0,y:0},t.nodes.length>0){switch(e.side){case"Top":n.x+=h+o.width*s,n.y+=c-(a/2+12.5);break;case"Bottom":n.x+=h+s*o.width,n.y+=c+r.actualSize.height+(a/2+12.5);break;case"Left":n.x+=h-(a/2+12.5),n.y+=c+s*o.height;break;case"Right":n.x+=h+r.actualSize.width+(a/2+12.5),n.y+=c+s*o.height}n.x+=(l.left-l.right)/i.scale+a/2*("Center"===e.horizontalAlignment?0:"Right"===e.horizontalAlignment?-1:1),n.y+=(l.top-l.bottom)/i.scale+a/2*("Center"===e.verticalAlignment?0:"Top"===e.verticalAlignment?-1:1)}else if(t.connectors.length>0){var d=t.connectors[0],p={offset:s},u=Bo(d.intermediatePoints,p),g=u.index;n=u.point;var m=Ro(d.intermediatePoints,p).angle;kt(f=Lt(),-m,d.intermediatePoints[parseInt(g.toString(),10)].x,d.intermediatePoints[parseInt(g.toString(),10)].y),(n=At(f,n)).x+=l.left-l.right+a/2*("Center"===e.horizontalAlignment?0:"Right"===e.horizontalAlignment?-1:1),n.y+=l.top-l.bottom+a/2*("Center"===e.verticalAlignment?0:"Top"===e.verticalAlignment?-1:1),kt(f=Lt(),m,d.intermediatePoints[parseInt(g.toString(),10)].x,d.intermediatePoints[parseInt(g.toString(),10)].y),n=At(f,n)}if(0!==r.rotateAngle||0!==r.parentTransform){var f;kt(f=Lt(),r.rotateAngle+r.parentTransform,r.offsetX,r.offsetY),n=At(f,n)}return n}function ss(t,e,i,n){if(n.annotation){if(Bn(n.annotation))return!0}else if(fg[""+e]&t&&xg[""+e]&i)return!0;return!1}function as(t,e){return!!(fg[""+e]&t)}function ls(t,e){return!!(Rg[""+e]&t)}function hs(t,e){return t.visibility&e}function cs(t,e){var i;if("Text"===t.shape.type)i=t.shape;else{var n=e.split("_");e=n[n.length-1];for(var r=0;r<t.annotations.length;r++)e===t.annotations[parseInt(r.toString(),10)].id&&(i=t.annotations[parseInt(r.toString(),10)])}return i}function ds(t,e){var i=e.split("_");if(e=i[i.length-1],t){t=t;for(var n=0;n<t.ports.length;n++)if(e===t.ports[parseInt(n.toString(),10)].id)return t.ports[parseInt(n.toString(),10)]}}function ps(t,e){var i={},n=0;if(t.ports){var r=t.ports;for(n=0;n<r.length;n++)e?r[parseInt(n.toString(),10)].constraints&Pg.InConnect&&(i=r[parseInt(n.toString(),10)]):r[parseInt(n.toString(),10)].constraints&Pg.OutConnect&&(i=r[parseInt(n.toString(),10)])}return i}function us(t,e,i){for(var n=i?t.annotations:t.ports,r=0;r<n.length;r++)if(n[parseInt(r.toString(),10)].id===e)return r.toString();return"-1"}function gs(t,e){var i;for(i=0;i<t.length;i++)if(e===t[parseInt(i.toString(),10)].id)return!0;return!1}function ms(t,e,i,n){if(void 0!==t.width&&void 0!==t.height&&(t.width*=e,t.height*=i),t instanceof $g){var r=Lt(),o=n.width||n.actualSize.width,s=n.height||n.actualSize.height;if(void 0!==o&&void 0!==s){var a=n.offsetX-o*n.pivot.x,l=n.offsetY-s*n.pivot.y,h={x:a+o*n.pivot.x,y:l+s*n.pivot.y};h=Da(n.rotateAngle,n.offsetX,n.offsetY,h),kt(r,-n.rotateAngle,h.x,h.y),jt(r,e,i,h.x,h.y),kt(r,n.rotateAngle,h.x,h.y);for(var c=0,d=t.children;c<d.length;c++){var p=d[c];if(void 0!==p.width&&void 0!==p.height){var u=At(r,{x:p.offsetX,y:p.offsetY});p.offsetX=u.x,p.offsetY=u.y,ms(p,e,i,n)}}}}}function fs(t,e,i,n,r,o){for(var s,a=t.children,l=0;l<a.length;l++)if(s=n[a[parseInt(l.toString(),10)]])if(s.children)fs(s,e,i,n,r,o);else if(s.offsetX-=e,s.offsetY-=i,!r){n[s.id]=s;var h=s.initContainer();h.children||(h.children=[]);var c=s.init(o);h.children.push(c),h.measure(new Qu(s.width,s.height)),h.arrange(h.desiredSize)}}function vs(t,e,i){if(0===i.length)i.push(t);else if(1===i.length)i[0][""+e]>t[""+e]?i.splice(0,0,t):i.push(t);else if(i.length>1){for(var n=0,r=i.length-1,o=Math.floor((n+r)/2);o!==n;)if(i[parseInt(o.toString(),10)][""+e]<t[""+e])n=o,o=Math.floor((n+r)/2);else{if(!(i[parseInt(o.toString(),10)][""+e]>t[""+e]))break;r=o,o=Math.floor((n+r)/2)}i[parseInt(r.toString(),10)][""+e]<t[""+e]?i.push(t):i[parseInt(n.toString(),10)][""+e]>t[""+e]?i.splice(n,0,t):i[parseInt(n.toString(),10)][""+e]<t[""+e]&&i[parseInt(r.toString(),10)][""+e]>t[""+e]&&i.splice(r,0,t)}}function ys(t){var e=document.getElementById(t.diagramId),i="ej2_instances",n=e[""+i][0].nodes;void 0===n&&(n=function(t){for(var e=[],i=0;i<t.palettes.length;i++)for(var n=t.palettes[parseInt(i.toString(),10)].symbols,r=0;r<n.length;r++)n[parseInt(r.toString(),10)]instanceof Pw&&e.push(n[parseInt(r.toString(),10)]);return e}(e[""+i][0]));for(var r=0;n&&r<n.length;r++)if(n[parseInt(r.toString(),10)].id===t.nodeId)return bs(n[parseInt(r.toString(),10)],t);var o=e[""+i][0].connectors;for(r=0;o&&r<o.length;r++)if(o[parseInt(r.toString(),10)].id===t.nodeId)return bs(o[parseInt(r.toString(),10)],t);var s=e[i][0].enterObject;return s&&(s.id===t.nodeId||s.children)?s.children&&Co(s,"HTML",e[""+i][0].enterTable)?e[""+i][0].enterTable[t.nodeId]:s:null}function bs(t,e){var i,n=t.annotations;for(i=0;n&&i<n.length;i++)if(e.annotationId&&n[parseInt(i.toString(),10)].id===e.annotationId)return n[parseInt(i.toString(),10)];return t}function Ss(t,e,i,n){return f()&&(t={cause:t.cause,state:i,type:n,cancel:!1,element:VS(e)===ES?{connector:xs(e)}:{node:xs(e)}}),t}function ws(t,e){if(f()){var i=VS(t.source)===ES,n=xs(t.source),r=xs(t.target),o=void 0,s=void 0;o=n.connectors&&n.connectors.length>0?n.connectors[0]:n,s=n.nodes&&n.nodes.length>0?n.nodes[0]:n,e={element:i?{connector:o,connectorId:o.id}:{node:s,nodeId:s.id},target:i?{connector:r}:{node:r},position:e.position,cancel:e.cancel}}return e}function Is(t,e,i,n,r,o,s,a){var l={x:0,y:0},h=Lt();switch(kt(h,r,o,s),a.x){case 0:switch(a.y){case 0:l=At(h,{x:t,y:e});break;case.5:l=At(h,{x:t,y:e+n/2});break;case 1:l=At(h,{x:t,y:e+n})}break;case.5:switch(a.y){case 0:l=At(h,{x:t+i/2,y:e});break;case.5:l=At(h,{x:t+i/2,y:e+n/2});break;case 1:l=At(h,{x:t+i/2,y:e+n})}break;case 1:switch(a.y){case 0:l=At(h,{x:t+i,y:e});break;case.5:l=At(h,{x:t+i,y:e+n/2});break;case 1:l=At(h,{x:t+i,y:e+n})}}return{x:l.x,y:l.y}}function xs(t){return f()&&(t=fa(t)),t}function Ms(){return(navigator.platform.indexOf("Mac")>=0||navigator.platform.indexOf("iPad")>=0||navigator.platform.indexOf("iPhone")>=0||navigator.platform.indexOf("MacIntel")>=0)&&("safari"===Np.info.name||"webkit"===Np.info.name)}function Cs(t){return-1!==t.indexOf("shape")||-1!==t.indexOf("pathData")||-1!==t.indexOf("width")||-1!==t.indexOf("height")}function Ns(t,e,i){var n=Es(t,e,i,"width"),r=Es(t,e,i,"height");return new Qu(n,r)}function Es(t,e,i,n){return void 0!==e.previewSize[""+n]?e.previewSize[""+n]:void 0!==t.symbolPreview[""+n]?t.symbolPreview[""+n]:e[""+n]||i.actualSize[""+n]}function Ds(t,e,i){return t&&t.parentId&&(i=(t=e.nameTable[t.parentId]).parentId?Ds(t,e,i):t.id),i}function Ts(t,e){return t.selectedItems.connectors.length>1&&0===t.selectedItems.nodes.length&&0!==e.rotateAngle}function Os(t,e,i){var n,r="NoWrap";"Class"===e.shape.classifier?n=e.shape.classShape:"Enumeration"===e.shape.classifier?n=e.shape.enumerationShape:"Interface"===e.shape.classifier&&(n=e.shape.interfaceShape),e.container={type:"Stack",orientation:"Vertical"},e.constraints=(wg.Default|wg.HideThumbs)&~(wg.Rotate|wg.Resize),e.style={fill:e.style.fill,strokeColor:e.style.strokeColor,strokeWidth:1.5},e.children=[],e.maxWidth&&(r="Wrap");var o=new Pw(i,"nodes",{id:e.id+"_umlClass_header",annotations:[{id:"name",content:n.name,offset:{x:.5,y:.65},margin:{left:10,right:10},style:{bold:!0,fontSize:14,color:n.style.color,fill:n.style.fill,textWrapping:r}},{content:"<<"+e.shape.classifier+">>",margin:{left:10,right:10},id:"class",style:{fontSize:n.style.fontSize,color:n.style.color,fill:n.style.fill,textWrapping:r},offset:{x:.5,y:.3},constraints:Sg.ReadOnly}],constraints:(wg.Default|wg.HideThumbs)&~(wg.Rotate|wg.Drag|wg.Resize),verticalAlignment:"Stretch",horizontalAlignment:"Stretch",style:{fill:e.style.fill,strokeColor:"black"===e.style.strokeColor?"#ffffff00":e.style.strokeColor}},!0);return i.initObject(o),i.nodes.push(o),i.UpdateBlazorDiagramModel(o,"Node"),e.children.push(o.id),function(t,e,i,n){if("Enumeration"===t.shape.classifier){var r=i.members;if(r&&r.length){Ls(t,e);for(var o="",s=0;s<r.length;s++){var a=r[parseInt(s.toString(),10)];if(""!==a.name&&(o+=a.name),s!==r.length){var l=As(t,a),h=new Pw(e,"nodes",{id:da()+"_umlMember",annotations:[{id:"name",content:o,offset:{x:0,y:.5},style:{bold:!0,fontSize:l.fontSize,color:l.color,fill:l.fill,textWrapping:n},margin:{left:14,right:5},horizontalAlignment:"Left"}],verticalAlignment:"Stretch",horizontalAlignment:"Stretch",style:{fill:t.style.fill,strokeColor:"black"===t.style.strokeColor?"#ffffff00":t.style.strokeColor,textWrapping:n},constraints:(wg.Default|wg.HideThumbs)&~(wg.Rotate|wg.Drag|wg.Resize),minHeight:25},!0);e.initObject(h),e.nodes.push(h),e.UpdateBlazorDiagramModel(h,"Node"),t.children.push(h.id),o="",a.isSeparator&&s!==r.length-1&&Ls(t,e)}}}}else{var c=i.attributes;if(c.length){var d="";Ls(t,e);for(var s=0;s<c.length;s++){var p=void 0,u=c[parseInt(s.toString(),10)];if(p=u.scope&&"Public"===u.scope?" +":u.scope&&"Private"===u.scope?"-":u.scope&&"Protected"===u.scope?"#":"~",""!==u.name&&p&&(d+=p+" "+u.name+" : "+u.type),s!==c.length){var l=As(t,u),h=new Pw(e,"nodes",{id:da()+"_umlProperty",style:{fill:t.style.fill,strokeColor:"black"===t.style.strokeColor?"#ffffff00":t.style.strokeColor},annotations:[{id:"name",content:d,offset:{x:0,y:.5},style:{bold:!0,fontSize:l.fontSize,color:l.color,fill:l.fill,textWrapping:n},margin:{left:14,right:5},horizontalAlignment:"Left"}],verticalAlignment:"Stretch",horizontalAlignment:"Stretch",constraints:(wg.Default|wg.HideThumbs)&~(wg.Rotate|wg.Drag|wg.Resize),minHeight:25},!0);e.initObject(h),e.nodes.push(h),e.UpdateBlazorDiagramModel(h,"Node"),t.children.push(h.id),d="",u.isSeparator&&s!==c.length-1&&Ls(t,e)}}}}}(e,i,n,r),function(t,e,i,n){if(i.methods&&i.methods.length){var r=i.methods;Ls(t,e);for(var o="",s="",a=void 0,l=0;l<r.length;l++){var h=r[parseInt(l.toString(),10)];if(a=h.scope&&"Public"===h.scope?" +":h.scope&&"Private"===h.scope?"-":h.scope&&"Protected"===h.scope?"#":"~",h.parameters)for(var c=0;c<h.parameters.length;c++)h.parameters[parseInt(c.toString(),10)].type?o+=h.parameters[parseInt(c.toString(),10)].name+":"+h.parameters[parseInt(c.toString(),10)].type:o+=h.parameters[parseInt(c.toString(),10)].name,c!==h.parameters.length-1&&(o+=",");if(""!==h.name&&a&&(s+=a+" "+h.name+"("+o+") : "+h.type),l!==r.length){var d=As(t,h),p=new Pw(e,"nodes",{id:da()+"_umlMethods",verticalAlignment:"Stretch",horizontalAlignment:"Stretch",annotations:[{id:"name",content:s,offset:{x:0,y:.5},style:{bold:!0,fontSize:d.fontSize,color:d.color,fill:d.fill,textWrapping:n},margin:{left:14,right:5},horizontalAlignment:"Left"}],style:{fill:t.style.fill,strokeColor:"black"===t.style.strokeColor?"#ffffff00":t.style.strokeColor},minHeight:25,constraints:(wg.Default|wg.HideThumbs)&~(wg.Rotate|wg.Drag|wg.Resize)},!0);e.initObject(p),e.nodes.push(p),e.UpdateBlazorDiagramModel(p,"Node"),t.children.push(p.id),s="",h.isSeparator&&l!==r.length-1&&Ls(t,e)}}}}(e,i,n,r),e.offsetX=e.offsetX,e.offsetY=e.offsetY,e.style.fill=e.style.fill,e.borderColor=e.borderColor,i.initObject(e),t}function Ls(t,e){var i=new Pw(e,"nodes",{id:da()+"_path",height:1,constraints:wg.Default&~wg.Select,verticalAlignment:"Stretch",horizontalAlignment:"Stretch",style:{strokeColor:"black"===t.style.strokeColor?"#ffffff00":t.style.strokeColor}},!0);e.initObject(i),e.nodes.push(i),t.children.push(i.id)}function As(t,e){var i={},n=e.style;return i.fill="transparent"!==n.fill?n.fill:t.style.fill,i.color=n.color,i.fontSize=12!==n.fontSize?n.fontSize:t.style.fontSize,i.strokeColor="black"!==n.strokeColor?n.strokeColor:t.style.strokeColor,i.strokeWidth=1!==n.strokeWidth?n.strokeWidth:t.style.strokeWidth,i}function zs(t){var e,i=[];if("msie"===Np.info.name||"edge"===Np.info.name)for(var n=0;n<t.childNodes.length;n++)1===(e=t.childNodes[parseInt(n.toString(),10)]).nodeType&&i.push(e);else i=t.children;return i}function ks(t){if(t){var e="measureElement";window[""+e].style.visibility="visible";var i=zs(window[""+e].children[2])[0];i.setAttribute("d",t);var n=i.getBBox(),r=new Zu(n.x,n.y,n.width,n.height);return window[""+e].style.visibility="hidden",r}return new Zu(0,0,0,0)}function js(t,e,i){var n,r,o=[],s=0,a=e||t.content;if("nowrap"!==t.whiteSpace&&"pre"!==t.whiteSpace)if("breakall"===t.breakWord)for(n="",n+=a[0],s=0;s<a.length;s++)if((r=xa(n,t))>=t.width&&n.length>0)o[o.length]={text:n,x:0,dy:0,width:r},n="";else{(n+=a[s+1]||"").indexOf("\n")>-1&&(o[o.length]={text:n,x:0,dy:0,width:xa(n,t)},n="");var l=xa(n,t);Math.ceil(l)+2>=t.width&&n.length>0&&(o[o.length]={text:n,x:0,dy:0,width:l},n=""),s===a.length-1&&n.length>0&&(o[o.length]={text:n,x:0,dy:0,width:l},n="")}else o=function(t,e,i){var n,r,o,s,a=[],l="",h=0,c=0,d="nowrap"!==t.whiteSpace,p=(e||t.content).split("\n");for(h=0;h<p.length;h++)for(n="NoWrap"!==t.textWrapping?p[parseInt(h.toString(),10)].split(" "):"NoWrap"===t.textWrapping?[p[parseInt(h.toString(),10)]]:p,c=0;c<n.length;c++){l+=((0!==c||1===n.length)&&d&&l.length>0?" ":"")+n[parseInt(c.toString(),10)];var u=xa(r=l+" "+(n[c+1]||""),t);Math.floor(u)>(i||t.width)-2&&l.length>0?(a[a.length]={text:l,x:0,dy:0,width:r===l?u:l===s?o:xa(l,t)},l=""):c===n.length-1&&(a[a.length]={text:l,x:0,dy:0,width:u},l=""),s=r,o=u}return a}(t,e,i);else o[o.length]={text:a,x:0,dy:0,width:xa(a,t)};return o}function Ps(t,e,i,n,r){var o=new Qu,s=Ks("span",{style:"display:inline-block; line-height: normal"});return t.bold&&(s.style.fontWeight="bold"),t.italic&&(s.style.fontStyle="italic"),void 0!==i&&(s.style.width=i.toString()+"px"),void 0!==n&&(s.style.height=n.toString()+"px"),void 0!==r&&(s.style.maxWidth=r.toString()+"px"),s.style.fontFamily=t.fontFamily,s.style.fontSize=t.fontSize+"px",s.style.color=t.color,s.textContent=e,s.style.whiteSpace=Na(t.whiteSpace,t.textWrapping),s.style.wordBreak=void 0!==r?"break-word":Ia(t.textWrapping),document.body.appendChild(s),o.width=s.offsetWidth,o.height=s.offsetHeight,document.body.removeChild(s),o}function Rs(t,e,i,n,r){var o,s,a=new Qu(0,0),l=function(t,e){var i={fill:t.style.fill,stroke:t.style.strokeColor,angle:t.rotateAngle+t.parentTransform,pivotX:t.pivot.x,pivotY:t.pivot.y,strokeWidth:t.style.strokeWidth,dashArray:t.style.strokeDashArray,opacity:t.style.opacity,shadow:t.shadow,gradient:t.style.gradient,visible:t.visible,id:t.id,description:t.description,width:e||t.actualSize.width,height:t.actualSize.height,x:t.offsetX-t.actualSize.width*t.pivot.x+.5,y:t.offsetY-t.actualSize.height*t.pivot.y+.5};return i.fontSize=t.style.fontSize,i.fontFamily=t.style.fontFamily,i.textOverflow=t.style.textOverflow,i.textDecoration=t.style.textDecoration,i.doWrap=t.doWrap,i.whiteSpace=Na(t.style.whiteSpace,t.style.textWrapping),i.content=t.content,i.textWrapping=t.style.textWrapping,i.breakWord=Ia(t.style.textWrapping),i.textAlign=wa(t.style.textAlign),i.color=t.style.color,i.italic=t.style.italic,i.bold=t.style.bold,i.dashArray="",i.strokeWidth=0,i.fill="",i}(t,n);return t.childNodes=o=js(l,r,t.isLaneOrientation?n:void 0),t.wrapBounds=s=function(t,e){var i,n,r={x:0,width:0},o=0;for(o=0;o<e.length;o++)n=i=e[parseInt(o.toString(),10)].width,i="left"===t.textAlign?0:"center"===t.textAlign?i>t.width&&("Ellipsis"===t.textOverflow||"Clip"===t.textOverflow)?0:-i/2:"right"===t.textAlign?-i:e.length>1?0:-i/2,e[parseInt(o.toString(),10)].dy=1.2*t.fontSize,e[parseInt(o.toString(),10)].x=i,r?(r.x=Math.min(r.x,i),r.width=Math.max(r.width,n)):r={x:i,width:n};return r}(l,o),a.width=s.width,t.wrapBounds.width>=n&&"Wrap"!==l.textOverflow&&(a.width=n),a.height=o.length*t.style.fontSize*1.2,a}function Bs(t,e,i,n){var r=0,o=0,s=!1,a="",l=[],h=e;return 0===h.x&&0===h.y||(r=0-Number(h.x),o=0-Number(h.y)),(t.actualSize.width!==h.width||t.actualSize.height!==h.height||n)&&(r=(n&&n.width||t.actualSize.width)/Number(h.width?h.width:1),o=(n&&n.height||t.actualSize.height)/Number(h.height?h.height:1),s=!0),l=bt(t.data),l=Dt(l),a=Ct(l,r,o,s,h.x,h.y,0,0),s=!1,a}function Hs(t){return Us(t).getElementsByClassName("e-diagram-layer")[0]}function Us(t,e){var i;return e&&(i=document.getElementById(e)),"msie"===Np.info.name||"edge"===Np.info.name?i?i.querySelector("#"+t):document.getElementById(t):i?i.querySelector("#"+CSS.escape(t)):document.getElementById(t)}function Vs(t,e,i){var n,r=void 0,o="";"native"===i?(n=Zs(t),o="_content_groupElement"):"html"===i?(n=$s(t).childNodes[0],o="_html_element"):(n=function(t){return Hs(t).getElementById(t+"_diagramLayer")}(t),o="_groupElement");for(var s,a=0;n.childNodes&&a<n.childNodes.length;a++)if((s=n.childNodes[a])&&s.id===e+o){r=a;break}return r}function _s(t){return Us(t).getElementsByClassName("e-adorner-layer")[0]}function Fs(t){return _s(t).getElementById(t+"_SelectorElement")}function Ys(t){return _s(t).getElementById(t+"_diagramAdorner")}function Ws(t){return Us(t).getElementsByClassName("e-userHandle-layer")[0]}function Qs(t){return Us(t).getElementsByClassName("e-native-layer")[0]}function Xs(t){return Us(t).getElementsByClassName("e-grid-layer")[0]}function qs(t){return Us(t).getElementsByClassName("e-background-layer")[0].parentNode}function Gs(t){return Us(t).getElementsByClassName("e-background-layer")[0]}function Zs(t){return Qs(t).getElementById(t+"_nativeLayer")}function $s(t){var e=null;if(window.domTable[t+"html_layer"])e=window.domTable[t+"html_layer"];else{e=Us(t).getElementsByClassName("e-html-layer")[0],window.domTable[t+"html_layer"]=e}return e}function Ks(t,e){var i=w(t);return aa(i,e),i}function Js(t,e){var i=document.createElementNS("http://www.w3.org/2000/svg",t);return oa(i,e),i}function ta(t,e,i){for(var n=t;n&&(i?n.id!==e:!ea(n,e));)n=n.parentNode;return n}function ea(t,e){return(" "+("object"==typeof t.className?t.className.animVal:t.className)+" ").indexOf(" "+e+" ")>-1}function ia(t,e,i){t=[];for(var n=0,r=i.length;n<r;n++)t.push({pageX:i[parseInt(n.toString(),10)].clientX,pageY:i[parseInt(n.toString(),10)].clientY,pointerId:null});return t}function na(t,e){var i=Us(t,e);i&&i.parentNode.removeChild(i)}function ra(t,e,i){var n;if(e){n=Ks("div",{style:"height: 100%; width: 100%"})}else n=document.createElementNS("http://www.w3.org/2000/svg","g");var r,o=ys(t),s="",a={};if(o instanceof Pw){if(a=o,"Native"===o.shape.type){var l=void 0,h=document.createElementNS("http://www.w3.org/2000/svg","svg");document.body.appendChild(h),h.innerHTML=o.shape.content,l=h.getElementsByTagName("svg").length>0?h.getElementsByTagName("svg")[0].outerHTML:h.getElementsByTagName("g").length>0?h.getElementsByTagName("g")[0].outerHTML:"",o.shape.content=l,t.content=l,h.parentElement.removeChild(h)}f()&&(s="diagramsf_node_template",a=xs(o)),r="nodeTemplate"}else a=o,f()&&(a=xs(o),s="diagramsf_annotation_template"),r="annotationTemplate";var c,d=document.getElementById(t.diagramId).ej2_instances[0];if("string"!=typeof t.content||t.isTemplate&&!f())if(t.isTemplate){g=void 0;if(d.isReact)g=t.getNodeTemplate()(fa(i),d,r+"_"+("nodeTemplate"===r?i.id:t.nodeId+i.id),void 0,void 0,!1,n);else if(d.isVue||d.isVue3){g=t.getNodeTemplate()?t.getNodeTemplate()(fa(i),d,r+"_"+("nodeTemplate"===r?i.id:t.nodeId+i.id),void 0,void 0,!1,n):(g=gt("nodeTemplate"===r?d.nodeTemplate:d.annotationTemplate))(fa(i),d,r+"_"+("nodeTemplate"===r?i.id:t.nodeId+i.id),void 0,void 0,!1,n)}else g=t.getNodeTemplate()(fa(i),d,r+"_"+("nodeTemplate"===r?i.id:t.nodeId+i.id),void 0,void 0,!1);if(g)for(var p=0;p<g.length;p++)n.appendChild(g[parseInt(p.toString(),10)])}else n.appendChild(t.content);else{var u=document.getElementById(t.content);if(u)n.appendChild(u);else for(var g=void 0,m=0,v=(g=gt(t.content))(a,d,r,s);m<v.length;m++)c=v[m],n.appendChild(c)}return t.isTemplate?n:n.cloneNode(!0)}function oa(t,e){for(var i=Object.keys(e),n=0;n<i.length;n++)t&&"style"!==i[parseInt(n.toString(),10)]?t.setAttribute(i[parseInt(n.toString(),10)],e[i[parseInt(n.toString(),10)]]):sa(t,e[i[parseInt(n.toString(),10)]])}function sa(t,e){for(var i=e.split(";"),n=0;n<i.length;n++){var r=i[parseInt(n.toString(),10)].split(":");2===r.length&&(t.style[r[0].trim()]=r[1].trim())}}function aa(t,e){for(var i=Object.keys(e),n=0;n<i.length;n++)"style"!==i[parseInt(n.toString(),10)]?t.setAttribute(i[parseInt(n.toString(),10)],e[i[parseInt(n.toString(),10)]]):sa(t,e[i[parseInt(n.toString(),10)]])}function la(){var t="measureElement";if(window[""+t])window[""+t].usageCount+=1;else{var e=Ks("div",{id:"measureElement",style:"visibility:hidden ; height: 0px ; width: 0px; overflow: hidden;"}),i=Ks("span",{style:"display:inline-block ; line-height: normal"});e.appendChild(i);var n=Ks("img",{alt:"measureElementImage",src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"});e.appendChild(n);var r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),e.appendChild(r);var o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("d",""),r.appendChild(o);document.createTextNode("");var s=document.createElementNS("http://www.w3.org/2000/svg","text");s.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),r.appendChild(s),window[""+t]=e,window[""+t].usageCount=1,document.body.appendChild(e);var a="measureElementCount";window[""+a]?window[""+a]++:window[""+a]=1}}function ha(t,e,i,n){return!(e.length>=1&&0===t.x)||"Clip"!==n.textOverflow&&"Ellipsis"!==n.textOverflow||"Wrap"!==n.textWrapping&&"WrapWithOverflow"!==n.textWrapping?t.x:(t.x=e[i-1]?e[i-1].x:-t.width/2,t.x)}function ca(t,e,i){return i&&!e.template?(t.isTemplate=!0,t.template=t.content=ra(t,!0,e)):t.content=e.template,t}function da(){for(var t,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",i="",n=0;n<5;n++){if("crypto"in window&&"getRandomValues"in crypto){var r=new Uint16Array(1);t=(window.msCrypto||window.crypto).getRandomValues(r)[0]%(e.length-1)}else t=Math.floor(Math.random()*e.length);0===n&&t<10?n--:i+=e.substring(t,t+1)}return i}function pa(t,e){if(t.nodes&&t.nodes.length>0)for(var i=0;i<t.nodes.length;i++)if(t.nodes[parseInt(i.toString(),10)].id===e)return i;if(t.connectors&&t.connectors.length>0)for(i=0;i<t.connectors.length;i++)if(t.connectors[parseInt(i.toString(),10)].id===e)return i;return null}function ua(t){if(t)try{if(document.querySelectorAll(t).length)return gt(document.querySelector(t).innerHTML.trim())}catch(e){return gt(t)}}function ga(t){new Zu;var e=t.offsetY-t.actualSize.height*t.pivot.y,i=t.offsetY+t.actualSize.height*(1-t.pivot.y),n=t.offsetX-t.actualSize.width*t.pivot.x,r=t.offsetX+t.actualSize.width*(1-t.pivot.x),o={x:n,y:e},s={x:r,y:e},a={x:n,y:i},l={x:r,y:i};return Zu.toBounds([o,s,a,l])}function ma(t){var e=new Zu,i=ga(t),n=i.middleLeft,r=i.topCenter,o=i.bottomCenter,s=i.middleRight,a=i.topLeft,l=i.topRight,h=i.bottomLeft,c=i.bottomRight;if(t.corners={topLeft:a,topCenter:r,topRight:l,middleLeft:n,middleRight:s,bottomLeft:h,bottomCenter:o,bottomRight:c},0!==t.rotateAngle||0!==t.parentTransform){var d=Lt();kt(d,t.rotateAngle+t.parentTransform,t.offsetX,t.offsetY),t.corners.topLeft=a=At(d,a),t.corners.topCenter=r=At(d,r),t.corners.topRight=l=At(d,l),t.corners.middleLeft=n=At(d,n),t.corners.middleRight=s=At(d,s),t.corners.bottomLeft=h=At(d,h),t.corners.bottomCenter=o=At(d,o),t.corners.bottomRight=c=At(d,c)}return e=Zu.toBounds([a,l,h,c]),t.corners.left=e.left,t.corners.right=e.right,t.corners.top=e.top,t.corners.bottom=e.bottom,t.corners.center=e.center,t.corners.width=e.width,t.corners.height=e.height,e}function fa(t,e,i,n){var r={};if(t){i=t.propName;var o=t.properties||t,s=[],a=[];if((s=s.concat(Object.keys(o))).push("version"),i){var l=Oa(e);a=l?l(i):[],s=s.concat(a)}var h=va(i);s=s.concat(h),n&&(s=function(t,e){var i=[];return e instanceof Pw?i=["width","height","offsetX","offsetY","container","visible","horizontalAlignment","verticalAlignment","backgroundColor","borderColor","borderWidth","rotateAngle","minHeight","minWidth","maxHeight","maxWidth","pivot","margin","flip","wrapper","constraints","style","annotations","ports","isExpanded","expandIcon"]:e instanceof ES?i=["constraints","sourcePadding","targetPadding","cornerRadius","flip","type","targetDecorator","sourceDecorator","sourceID","shape","bridgeSpace","annotations","segments","hitPadding","tooltip","previewSize","dragSize","style","sourcePortID","targetID","targetPortID","visible"]:e instanceof pS?i=["height","width","shape","style","pivot","pathData"]:e instanceof lw||e instanceof JS?(i.push("shape"),e instanceof gw?i.push("cornerRadius"):e instanceof Text?i.push("margin"):e instanceof Image?(i.push("align"),i.push("scale")):e instanceof cw?i.push("scale"):e instanceof Cw?(i.push("activity"),i.push("annotations")):e instanceof JS&&(i.push("borderColor"),i.push("borderWidth"),i.push("cornerRadius"),i.push("fill"))):e instanceof xw?i.push("subProcess"):e instanceof yw?(i.push("call"),i.push("compensation"),i.push("loop")):e instanceof Iw?(i.push("adhoc"),i.push("boundary"),i.push("compensation"),i.push("loop"),i.push("processes")):e instanceof dm?(i.push("height"),i.push("width"),i.push("visibility"),i.push("horizontalAlignment"),i.push("verticalAlignment"),i.push("shape")):e instanceof fm?(i.push("constraints"),i.push("height"),i.push("horizontalAlignment"),i.push("rotateAngle"),i.push("template"),i.push("verticalAlignment"),i.push("visibility"),i.push("width"),i.push("margin")):e instanceof ng?(i.push("left"),i.push("right"),i.push("top"),i.push("bottom")):e instanceof pg&&(i=["strokeWidth","strokeDashArray","opacity","gradient","fontSize","fontFamily","textOverflow","textDecoration","whiteSpace","textWrapping","textAlign","italic","bold"]),e instanceof cg&&(i.push("strokeColor"),i.push("color")),t=t.concat(i)}(s,t));for(var c=0,d=s;c<d.length;c++){var p=d[c];if("historyManager"!==p)if("wrapper"!==p){!(!t[""+p]||!t.hasOwnProperty("observers"))||(t[""+p]instanceof Array?r[""+p]=ya(-1===h.indexOf(p)&&t.properties?t.properties[""+p]:t[""+p],e,p,n):t[""+p]instanceof Array==!1&&t[""+p]instanceof HTMLElement?r[""+p]=t[""+p].cloneNode(!0).innerHtml:t[""+p]instanceof Array==!1&&t[""+p]instanceof Object?r[""+p]=fa(-1===h.indexOf(p)&&t.properties?t.properties[""+p]:t[""+p],void 0,void 0,n):r[""+p]=t[""+p])}else t[""+p]&&(r[""+p]={actualSize:{width:t[""+p].actualSize.width,height:t[""+p].actualSize.height},offsetX:t[""+p].offsetX,offsetY:t[""+p].offsetY})}}return r}function va(t){switch(t){case"nodes":case"children":return["inEdges","outEdges","parentId","processId","nodeId","umlIndex","isPhase","isLane"];case"connectors":return["parentId"];case"annotation":case"annotations":return["nodeId"];case"shape":return["hasHeader"];case"layers":return["objectZIndex"]}return[]}function ya(t,e,i,n){var r;if(t){r=[];for(var o=0;o<t.length;o++)t[parseInt(o.toString(),10)]instanceof Array?r.push(t[parseInt(o.toString(),10)]):t[parseInt(o.toString(),10)]instanceof Object?r.push(fa(t[parseInt(o.toString(),10)],e,i,n)):r.push(t[parseInt(o.toString(),10)])}return r}function ba(t,e){if(t){e||(e={properties:{}});for(var i=0,n=Object.keys(t);i<n.length;i++){var r=n[i];if(t[""+r]instanceof Array){var o=Sa(t[""+r],e.properties[""+r]);e.properties[""+r]&&e.properties[""+r].length||(e[""+r]=o)}else if(t[""+r]instanceof Array==!1&&t[""+r]instanceof HTMLElement)e[""+r]=t[""+r].cloneNode(!0).innerHtml;else if(t[""+r]instanceof Array==!1&&t[""+r]instanceof Object){var s=ba(t[""+r],e.properties[""+r]);s.properties&&!Object.keys(s.properties).length&&delete s.properties,e[""+r]=s}else e[""+r]=void 0!==e.properties[""+r]?e[""+r]:t[""+r]}}return e}function Sa(t,e){var i=[],n=!1;e||(e=[]),e.length||(n=!0);for(var r=0;r<t.length;r++)if(t[parseInt(r.toString(),10)]instanceof Array){Sa(t[parseInt(r.toString(),10)],e[parseInt(r.toString(),10)]);n&&i.push(Sa)}else if(t[parseInt(r.toString(),10)]instanceof Object){var o=ba(t[parseInt(r.toString(),10)],e[parseInt(r.toString(),10)]);n&&i.push(o)}else i.push(t[parseInt(r.toString(),10)]);return i}function wa(t){var e="";switch(t){case"Center":e="center";break;case"Left":e="left";break;case"Right":e="right"}return e}function Ia(t){var e="";switch(t){case"Wrap":e="breakall";break;case"NoWrap":e="keepall";break;case"WrapWithOverflow":e="normal";break;case"LineThrough":e="line-through"}return e}function xa(t,e){var i="measureElement";window[""+i].style.visibility="visible";var n=zs(window[""+i].children[2])[1];n.textContent=t,sa(n,"font-size:"+e.fontSize+"px; font-family:"+e.fontFamily+";font-weight:"+(e.bold?"bold":"normal"));var r=n.getBBox().width;return window[""+i].style.visibility="hidden",r}function Ma(t,e){return(t+e)/2}function Ca(t,e){var i=0,n=0,r=0,o=0,s="";n=t.length;var a=0;do{o>0&&(i=r),r=Math.floor(Ma(i,n)),o=xa(s+=t.substr(i,r),e)}while(o<=e.width);for(s=s.substr(0,i),a=i;a<n;a++)if(s+=t[parseInt(a.toString(),10)],(o=xa(s,e))>=e.width){t=t.substr(0,s.length-1);break}return"Ellipsis"===e.textOverflow?(t=t.substr(0,t.length-3),t+="..."):t=t.substr(0,t.length),t}function Na(t,e){if("NoWrap"===e&&"PreserveAll"===t)return"pre";var i="";switch(t){case"CollapseAll":i="nowrap";break;case"CollapseSpace":i="pre-line";break;case"PreserveAll":i="pre-wrap"}return i}function Ea(t,e){var i=Lt();kt(i,e,0,0);var n=At(i,{x:0,y:0}),r=At(i,{x:t.width,y:0}),o=At(i,{x:0,y:t.height}),s=At(i,{x:t.width,y:t.height}),a=Math.min(n.x,r.x,o.x,s.x),l=Math.min(n.y,r.y,o.y,s.y),h=Math.max(n.x,r.x,o.x,s.x),c=Math.max(n.y,r.y,o.y,s.y);return new Qu(h-a,c-l)}function Da(t,e,i,n){if(0!==t){var r=Lt();return kt(r,t,e,i),At(r,n)}return n}function Ta(t,e){return{x:t.x+e.desiredSize.width*e.pivot.x,y:t.y+e.desiredSize.height*e.pivot.y}}function Oa(t){return void 0!==t&&"string"==typeof t&&(t=n(t,window)),t}function La(t,e,i,n,r,o){var s,a,l=e.parentElement;if("vscroll"===n?(s=o||e.getBoundingClientRect().height,a=i.getBoundingClientRect().height):(s=e.getBoundingClientRect().width,a=i.getBoundingClientRect().width),s<a)return Aa(t,e,i,n,r,o);if(l){var h=l.getBoundingClientRect().width;return h<s&&"hscroll"===n?(a=h,e.style.maxWidth=h+"px",Aa(t,e,i,n,r,o)):i}return i}function Aa(t,e,i,n,r,o){var s=t("div",{className:"e-menu-"+n});e.appendChild(s),s.appendChild(i),o?(s.style.overflow="hidden",s.style.height=o+"px"):(s.style.maxHeight=e.style.maxHeight,e.style.overflow="hidden");return"vscroll"===n?new Lx({enableRtl:r},s).scrollStep=A(".e-"+n+"-bar",e).offsetHeight/2:new bx({enableRtl:r},s).scrollStep=A(".e-"+n+"-bar",e).offsetWidth,s}function za(t,e,i){if(t){var n=A(".e-menu-parent",e);n?i&&i!==n||(t.destroy(),e.parentElement.appendChild(n),T(e)):(t.destroy(),T(e))}}function ka(t,e){var i={};if(h(t)||"string"==typeof t||"number"==typeof t||!h(t.isHeader))return t;for(var r=0,o=Object.keys(e);r<o.length;r++){var s=e[""+o[r]],a=h(s)||"string"!=typeof s?void 0:n(s,t);h(a)||(i[""+s]=a)}return i}function ja(t){if(t)try{return document.querySelector(t)?gt(document.querySelector(t).innerHTML.trim()):gt(t)}catch(e){return gt(t)}}function Pa(){Ep.remove(this.element,"keydown",$a),Ep.remove(this.element,"keypress",tl),Ep.remove(this.element,"keyup",il),Ep.remove(this.element,"input",Za),Ep.remove(this.element,"focus",Ya),Ep.remove(this.element,"blur",Qa),Ep.remove(this.element,"paste",Xa),Ep.remove(this.element,"cut",qa),Ep.remove(this.element,"mousedown",_a),Ep.remove(this.element,"mouseup",Fa),this.formElement&&Ep.remove(this.formElement,"reset",Ha)}function Ra(){this.showClearButton&&Ep.add(this.inputObj.clearButton,"mousedown touchstart",Ba,this)}function Ba(t){t.preventDefault(),this.inputObj.clearButton.classList.contains("e-clear-icon-hide")&&!this.inputObj.container.classList.contains("e-static-clear")||(function(t){var e=this.element.value;hl.call(this,this.promptMask),this.redoCollec.unshift({value:this.promptMask,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),el.call(this,t,e),this.element.setSelectionRange(0,0)}.call(this,t),this.value="")}function Ha(){"EJS-MASKEDTEXTBOX"===this.element.tagName?hl.call(this,this.promptMask):this.value=this.initInputValue}function Ua(t,e){var i="",n=0,r=!1,o=h(e)?h(t)||h(this)?e:t.value:e;if(o!==this.promptMask)for(var s=0;s<this.customRegExpCollec.length;s++)r&&(r=!1),">"!==this.customRegExpCollec[n]&&"<"!==this.customRegExpCollec[n]&&"|"!==this.customRegExpCollec[n]&&"\\"!==this.customRegExpCollec[n]||(--s,r=!0),r||o[s]!==this.promptChar&&!h(this.customRegExpCollec[n])&&(this._callPasteHandler||!h(this.regExpCollec[this.customRegExpCollec[n]])||this.customRegExpCollec[n].length>2&&"["===this.customRegExpCollec[n][0]&&"]"===this.customRegExpCollec[n][this.customRegExpCollec[n].length-1]||!h(this.customCharacters)&&!h(this.customCharacters[this.customRegExpCollec[n]]))&&""!==o&&(i+=o[s]),++n;return(null===this.mask||""===this.mask&&void 0!==this.value)&&(i=o),i}function Va(t){for(var e=0;e<t.length;e++)this.hiddenMask+=t[e],"\\"!==t[e]&&this.customRegExpCollec.push(t[e])}function _a(){this.isClicked=!0}function Fa(){this.isClicked=!1}function Ya(t){var e=this,i=this.element,n=0,r=Ua.call(this,i),o=!1,s=!1,a={selectionStart:i.selectionStart,event:t,value:this.value,maskedValue:i.value,container:h(this.inputObj)?this.inputObj:this.inputObj.container,selectionEnd:i.selectionEnd};if(this.isClicked||Wa.call(this,a,i),this.mask&&(null!==r&&""!==r||"Always"===this.floatLabelType||null===this.placeholder||""===this.placeholder||(i.value=this.promptMask),setTimeout(function(){if(i.selectionStart===e.promptMask.length||i.value[i.selectionStart]===e.promptChar)o=!0;else for(var t=i.selectionStart;t<e.promptMask.length;t++){if(i.value[t]===e.promptChar){o=!0;break}if(i.value[t]!==e.promptMask[t]){o=!1;break}}}),setTimeout(function(){var t=i.selectionStart-1;if(t===e.promptMask.length-1||i.value[t]===e.promptChar)s=!0;else for(var n=t;n>=0;n--){if(i.value[n]===e.promptChar){s=!0;break}if(i.value[n]!==e.promptMask[n]){s=!1;break}}}),this.isClicked||"Always"!==this.floatLabelType&&(null===r||""===r)&&null!==this.placeholder&&""!==this.placeholder)){for(n=0;n<this.promptMask.length;n++)if(i.value[n]===this.promptChar){setTimeout(function(){(o||s)&&(i.selectionEnd=n,i.selectionStart=n),a={selectionStart:i.selectionStart,event:t,value:e.value,maskedValue:i.value,container:h(e.inputObj)?e.inputObj:e.inputObj.container,selectionEnd:i.selectionEnd},Wa.call(e,a,i)},110);break}h(i.value.match(function(t){return h(t)?t:t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(this.promptChar)))&&(a={selectionStart:i.selectionStart,event:t,value:this.value,maskedValue:i.value,container:h(this.inputObj)?this.inputObj:this.inputObj.container,selectionEnd:i.selectionEnd},Wa.call(this,a,i)),this.isClicked=!1}}function Wa(t,e){this.trigger("focus",t,function(t){e.selectionStart=t.selectionStart,e.selectionEnd=t.selectionEnd})}function Qa(t){if(this.blurEventArgs={event:t,value:this.value,maskedValue:this.element.value,container:h(this.inputObj)?this.inputObj:this.inputObj.container},this.trigger("blur",this.blurEventArgs),this.mask&&(this.isFocus=!1,this.placeholder&&this.element.value===this.promptMask&&"Always"!==this.floatLabelType)){hl.call(this,"");var e=this.element.parentNode.querySelector(".e-float-text");"Auto"===this.floatLabelType&&!h(e)&&e.classList.contains(_C)&&x([e],_C)}}function Xa(t){var e=this;if(this.mask&&!this.readonly){var i=this.element.selectionStart,n=this.element.selectionEnd,r=this.element.value;hl.call(this,""),this._callPasteHandler=!0,setTimeout(function(){var o=e.element.value.replace(/ /g,"");e.redoCollec.length>0&&e.redoCollec[0].value===e.element.value&&(o=Ua.call(e,e.element)),hl.call(e,r),e.element.selectionStart=i,e.element.selectionEnd=n;var s=0;e.maskKeyPress=!0;do{rl.call(e,o[s],!1,null),++s}while(s<o.length);if(e.maskKeyPress=!1,e._callPasteHandler=!1,e.element.value===r){var a=0;e.maskKeyPress=!0;do{rl.call(e,o[a],!1,null),++a}while(a<o.length);e.maskKeyPress=!1}else el.call(e,t,r)},1)}}function qa(t){var e=this;if(this.mask&&!this.readonly){var i=this.element.value,n=this.element.selectionStart,r=this.element.selectionEnd;this.undoCollec.push({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd});var o=this.element.value.substring(0,n)+this.promptMask.substring(n,r)+this.element.value.substring(r);setTimeout(function(){hl.call(e,o),e.element.selectionStart=e.element.selectionEnd=n,e.element.value!==i&&el.call(e,t,null)},0)}}function Ga(t){t.preventDefault()}function Za(t){if(!0!==Np.isIE||""!==this.element.value||"Never"!==this.floatLabelType){if(l(t,{ctrlKey:!1,keyCode:229}),this.mask){if(""===this.element.value&&this.redoCollec.unshift({value:this.promptMask,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),1===this.element.value.length&&(this.element.value=this.element.value+this.promptMask,this.element.setSelectionRange(1,1)),this._callPasteHandler||Ja.call(this,t),this.element.value.length>this.promptMask.length){var e=this.element.selectionStart,i=this.element.value.length-this.promptMask.length,n=this.element.value.substring(e-i,e);this.maskKeyPress=!1;var r=0;do{rl.call(this,n[r],t.ctrlKey,t),++r}while(r<n.length);this.element.value!==this.preEleVal&&el.call(this,t,null)}var o=Ua.call(this,this.element);this.prevValue=o,this.value=o,""===o&&(hl.call(this,this.promptMask),this.element.setSelectionRange(0,0))}}}function $a(t){if(this.mask&&!this.readonly){229!==t.keyCode&&(!t.ctrlKey||89!==t.keyCode&&90!==t.keyCode||t.preventDefault(),Ja.call(this,t));var e=this.element.value;if(t.ctrlKey&&(89===t.keyCode||90===t.keyCode)){var i=void 0;90===t.keyCode&&this.undoCollec.length>0&&e!==this.undoCollec[this.undoCollec.length-1].value?(i=this.undoCollec[this.undoCollec.length-1],this.redoCollec.unshift({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),hl.call(this,i.value),this.element.selectionStart=i.startIndex,this.element.selectionEnd=i.endIndex,this.undoCollec.splice(this.undoCollec.length-1,1)):89===t.keyCode&&this.redoCollec.length>0&&e!==this.redoCollec[0].value&&(i=this.redoCollec[0],this.undoCollec.push({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),hl.call(this,i.value),this.element.selectionStart=i.startIndex,this.element.selectionEnd=i.endIndex,this.redoCollec.splice(0,1))}}}function Ka(t,e,i){return"input"===i.type&&(t=!1,e=this.element.value,hl.call(this,this.promptMask),ll.call(this,e)),t}function Ja(t){var e,i=!1,n=!1;this.element.value.length<this.promptMask.length&&(i=!0,e=this.element.value,i=Ka.call(this,i,e,t),function(){var t,e=this.element.selectionStart,i=this.element.selectionEnd;this.redoCollec.length>0?(t=this.redoCollec[0],hl.call(this,t.value),t.startIndex-e==1?(this.element.selectionStart=t.startIndex,this.element.selectionEnd=t.endIndex):(this.element.selectionStart=e+1,this.element.selectionEnd=i+1)):(hl.call(this,this.promptMask),this.element.selectionStart=this.element.selectionEnd=e)}.call(this)),this.element.value.length>=this.promptMask.length&&"input"===t.type&&(i=Ka.call(this,i,e,t));var r=this.element.selectionStart,o=this.element.selectionEnd,s=this.element.selectionStart,a=this.element.selectionEnd,l=this.hiddenMask.replace(/[>|\\<]/g,""),c=l[s-1],d=this.element.selectionEnd;if(i||8===t.keyCode||46===t.keyCode){this.undoCollec.push({value:this.element.value,startIndex:this.element.selectionStart,endIndex:a});var p=!1,u=this.element.value;if(s>0||(8===t.keyCode||46===t.keyCode)&&s<this.element.value.length&&this.element.selectionEnd-s!==this.element.value.length){var g=s;s!==a?(s=a,46===t.keyCode&&(p=!0)):46===t.keyCode?++g:--g;for(var m=s;8===t.keyCode||i||p?m>g:m<g;8===t.keyCode||i||p?m--:m++)for(var f=s;8===t.keyCode||i||p?f>0:f<this.element.value.length;8===t.keyCode||i||p?f--:f++){var v=void 0;(8===t.keyCode||p)&&(r!==o&&r!==s||r===o)||i?(c=l[f-1],v=s-1):(c=l[f],v=s,++s);var y=this.element.value[v];if(h(this.regExpCollec[""+c])&&!h(this.customCharacters)&&h(this.customCharacters[""+c])&&this.hiddenMask[v]!==this.promptChar&&"["!==this.customRegExpCollec[v][0]&&"]"!==this.customRegExpCollec[v][this.customRegExpCollec[v].length-1]||this.promptMask[v]!==this.promptChar&&h(this.customCharacters))this.element.selectionStart=this.element.selectionEnd=v,t.preventDefault(),46!==t.keyCode||p||++this.element.selectionStart;else{var b=this.element.value,S=this.promptChar,w=b.substring(0,v)+S+b.substring(s,b.length);hl.call(this,w),t.preventDefault(),46!==t.keyCode||p||v++,this.element.selectionStart=this.element.selectionEnd=v,n=!0}if(s=this.element.selectionStart,!n&&8===t.keyCode||p||!n&&46!==t.keyCode?v=s-1:(v=s,n=!1),y=this.element.value[v],r!==o&&this.element.selectionStart===r||this.promptMask[v]===this.promptChar||y!==this.promptMask[v]&&this.promptMask[v]!==this.promptChar&&!h(this.customCharacters))break}}46===t.keyCode&&p&&n&&(this.element.selectionStart=this.element.selectionEnd=d),0===this.element.selectionStart&&this.element.selectionEnd===this.element.value.length&&(hl.call(this,this.promptMask),t.preventDefault(),this.element.selectionStart=this.element.selectionEnd=s),this.redoCollec.unshift({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),this.element.value!==u&&el.call(this,t,e)}}function tl(t){if(this.mask&&!this.readonly){var e=this.element.value;if(!t.ctrlKey&&!t.metaKey||(t.ctrlKey||t.metaKey)&&"KeyA"!==t.code&&"KeyY"!==t.code&&"KeyZ"!==t.code&&"KeyX"!==t.code&&"KeyC"!==t.code&&"KeyV"!==t.code){this.maskKeyPress=!0;var i=t.key;"Spacebar"===i&&(i=String.fromCharCode(t.keyCode)),i?i&&1===i.length&&(rl.call(this,i,t.ctrlKey,t),t.preventDefault()):(this.isIosInvalid=!0,rl.call(this,String.fromCharCode(t.keyCode),t.ctrlKey,t),t.preventDefault(),this.isIosInvalid=!1),32===t.keyCode&&" "===i&&" "===this.promptChar&&(this.element.selectionStart=this.element.selectionEnd=this.element.selectionStart-i.length)}this.element.value!==e&&el.call(this,t,e)}}function el(t,e){var i=this.isProtectedOnChange;if(!h(this.changeEventArgs)&&!this.isInitial){var n={};this.changeEventArgs={value:this.element.value,maskedValue:this.element.value,isInteraction:!1,isInteracted:!1},this.mask&&(this.changeEventArgs.value=Ua.call(this,this.element)),h(t)||(this.changeEventArgs.isInteracted=!0,this.changeEventArgs.isInteraction=!0,this.changeEventArgs.event=t),this.isProtectedOnChange=!0,this.value=this.changeEventArgs.value,this.isProtectedOnChange=i,a(n,this.changeEventArgs),this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",n)}this.preEleVal=this.element.value,this.prevValue=Ua.call(this,this.element)}function il(t){if(this.mask&&!this.readonly){var e=void 0;if(this.maskKeyPress||229!==t.keyCode)al.call(this);else{var i=void 0;if(1===this.element.value.length&&(this.element.value=this.element.value+this.promptMask,this.element.setSelectionRange(1,1)),this.element.value.length>this.promptMask.length){var n=this.element.selectionStart,r=this.element.value.length-this.promptMask.length,o=this.element.value.substring(n-r,n);if(this.undoCollec.length>0){e=this.undoCollec[this.undoCollec.length-1];var s=this.element.selectionStart;i=e.value;var a=e.value.substring(s-r,s);e=this.redoCollec[0],o=o.trim();var l=Np.isAndroid&&""===o;l||a===o||e.value.substring(s-r,s)===o?l&&ol.call(this,t,s-1,this.element.selectionEnd-1,o,t.ctrlKey,!1):rl.call(this,o,t.ctrlKey,t)}else i=this.promptMask,rl.call(this,o,t.ctrlKey,t);this.maskKeyPress=!1,el.call(this,t,i)}}var h=Ua.call(this,this.element);(0!==this.element.selectionStart||this.promptMask!==this.element.value||""!==h||""===h&&this.value!==h)&&(this.prevValue=h,this.value=h)}else el.call(this,t);if(0===this.element.selectionStart&&0===this.element.selectionEnd){var c=this.element;setTimeout(function(){c.setSelectionRange(0,0)},0)}}function nl(t){this.maskKeyPress||function(t){if(t.length>1&&this.promptMask.length+t.length<this.element.value.length){var e=this.redoCollec[0].value.substring(0,this.redoCollec[0].startIndex)+t+this.redoCollec[0].value.substring(this.redoCollec[0].startIndex,this.redoCollec[0].value.length);hl.call(this,e),this.element.selectionStart=this.element.selectionEnd=this.redoCollec[0].startIndex+t.length}this.element.selectionStart=this.element.selectionStart-t.length,this.element.selectionEnd=this.element.selectionEnd-t.length}.call(this,t)}function rl(t,e,i){if(nl.call(this,t),!h(this)&&!h(t))for(var n,r,o=this.element.selectionStart,s=o,a=!1,l=this.element.value,c=!1,d=!1,p=0;p<t.length;p++){var u=t[p];if(o=this.element.selectionStart,this.maskKeyPress||s!==o||(o+=p),!this.maskKeyPress||o<this.promptMask.length){for(var g=o;g<this.promptMask.length;g++){n=this.escapeMaskValue[o],"\\"===this.hiddenMask[o]&&this.hiddenMask[o+1]===t&&(d=!0),(h(this.regExpCollec[""+n])&&(h(this.customCharacters)||!h(this.customCharacters)&&h(this.customCharacters[""+n]))&&this.hiddenMask[o]!==this.promptChar&&"["!==this.customRegExpCollec[o][0]&&"]"!==this.customRegExpCollec[o][this.customRegExpCollec[o].length-1]||this.promptMask[o]!==this.promptChar&&h(this.customCharacters)||this.promptChar===n&&this.escapeMaskValue===this.mask)&&(this.element.selectionStart=this.element.selectionEnd=o+1,o=this.element.selectionStart,n=this.hiddenMask[o])}if(h(this.customCharacters)||h(this.customCharacters[""+n]))!h(this.regExpCollec[""+n])&&u.match(new RegExp(this.regExpCollec[""+n]))&&this.promptMask[o]===this.promptChar?a=!0:this.promptMask[o]===this.promptChar&&"["===this.customRegExpCollec[o][0]&&"]"===this.customRegExpCollec[o][this.customRegExpCollec[o].length-1]&&u.match(new RegExp(this.customRegExpCollec[o]))&&(a=!0);else{var m=this.customCharacters[""+n].split(",");for(g=0;g<m.length;g++)if(u.match(new RegExp("["+m[g]+"]"))){a=!0;break}}if((!this.maskKeyPress||o<this.hiddenMask.length)&&a){if(0===p)if(this.maskKeyPress)this.undoCollec.push({value:l,startIndex:o,endIndex:o});else{var f=this.element.selectionStart,v=this.element.selectionEnd;this.redoCollec.length>0?(r=this.redoCollec[0].value,hl.call(this,r),this.undoCollec.push(this.redoCollec[0])):(this.undoCollec.push({value:this.promptMask,startIndex:o,endIndex:o}),r=this.promptMask,hl.call(this,r)),this.element.selectionStart=f,this.element.selectionEnd=v}o=this.element.selectionStart,function(t,e,i,n,r){this.hiddenMask.length>this.promptMask.length&&(i=function(t,e){var i,n,r=e,o=0;for(n=0;n<this.hiddenMask.length;n++)if("\\"===this.hiddenMask[n]&&(i=r.substring(0,n)+"\\"+r.substring(n,r.length)),">"!==this.hiddenMask[n]&&"<"!==this.hiddenMask[n]&&"|"!==this.hiddenMask[n]||(this.hiddenMask[n]!==r[n]&&(i=r.substring(0,n)+this.hiddenMask[n]+r.substring(n,r.length)),++o),i){if(i[n]===this.promptChar&&n>this.element.selectionStart||this.element.value.indexOf(this.promptChar)<0&&this.element.selectionStart+o===n){o=0;break}r=i}for(;n>=0&&i;){if(0===n||"\\"!==i[n-1]){if(">"===i[n]){t=t.toUpperCase();break}if("<"===i[n]){t=t.toLowerCase();break}if("|"===i[n])break}--n}return t}.call(this,i,this.element.value));if(!r){var o=this.element.value,s=o.substring(0,e)+i+o.substring(e+1,o.length);hl.call(this,s),this.element.selectionStart=this.element.selectionEnd=e+1}}.call(this,i,o,u,r,d),c=!0,p===t.length-1&&this.redoCollec.unshift({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),a=!1}else o=this.element.selectionStart,ol.call(this,i,o,s,t,e,c);p!==t.length-1||a||(!Np.isAndroid||Np.isAndroid&&o<this.promptMask.length)&&this.redoCollec.unshift({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd})}else 1!==t.length||e||h(i)||sl.call(this)}}function ol(t,e,i,n,r,o){if(!this.maskKeyPress){var s=this.element.value;e>=this.promptMask.length?hl.call(this,s.substring(0,e)):(i===e?hl.call(this,s.substring(0,e)+s.substring(e+1,s.length)):this.promptMask.length===this.element.value.length?hl.call(this,s.substring(0,e)+s.substring(e,s.length)):hl.call(this,s.substring(0,i)+s.substring(i+1,s.length)),this.element.selectionStart=this.element.selectionEnd=o||this.element.value[i]!==this.promptChar?e:i),sl.call(this)}1!==n.length||r||h(t)||sl.call(this)}function sl(){var t=this,e=this.element.parentNode,i=200;e.classList.contains(UC)||e.classList.contains(VC)?I([e],HC):I([this.element],HC),!0===this.isIosInvalid&&(i=400),L(this.element,{"aria-invalid":"true"}),setTimeout(function(){t.maskKeyPress||al.call(t)},i)}function al(){var t=this.element.parentNode;h(t)||x([t],HC),x([this.element],HC),L(this.element,{"aria-invalid":"false"})}function ll(t){if(this.mask&&void 0!==t&&(void 0===this.prevValue||this.prevValue!==t)){if(this.maskKeyPress=!0,hl.call(this,this.promptMask),""===t||null===t&&"Never"===this.floatLabelType&&this.placeholder||(this.element.selectionStart=0,this.element.selectionEnd=0),null!==t)for(var e=0;e<t.length;e++)rl.call(this,t[e],!1,null);var i=Ua.call(this,this.element);this.prevValue=i,this.value=i,el.call(this,null,null),this.maskKeyPress=!1;var n=this.element.parentNode.querySelector(".e-float-text");this.element.value===this.promptMask&&"Auto"===this.floatLabelType&&this.placeholder&&!h(n)&&n.classList.contains(_C)&&!this.isFocus&&(x([n],_C),I([n],FC),hl.call(this,""))}(null===this.mask||""===this.mask&&void 0!==this.value)&&hl.call(this,this.value)}function hl(t,e){!this.isFocus&&"Auto"===this.floatLabelType&&this.placeholder&&h(this.value)&&(t="");var i=Ua.call(this,e||this.element,t);null===i||""===i?(zx.setValue(t,e||this.element,this.floatLabelType,!1),this.showClearButton&&this.inputObj.clearButton.classList.add("e-clear-icon-hide")):zx.setValue(t,e||this.element,this.floatLabelType,this.showClearButton)}function cl(t,e){for(var i=l({},t),n=0,r=Object.keys(i);n<r.length;n++){var s=r[n];e.indexOf(s)<0&&o(i,s)}return i}function dl(t,e,i,n,r){if(void 0===r&&(r=0),(e.classList.contains("e-separator")||e.classList.contains("e-disabled"))&&(i===(40===n?t.childElementCount-1:0)?i=40===n?0:t.childElementCount-1:40===n?i++:i--),(e=t.children[i]).classList.contains("e-separator")||e.classList.contains("e-disabled")){if(++r===t.childElementCount)return i=-1;i=dl(t,e,i,n,r)}return i}function pl(t){return vO[t.toString()]}function ul(t){return yO[t.toString()]}function gl(t){return bO[t.toString()]}function ml(t){return SO[t.toString()]}function fl(t){return wO[t.toString()]}function vl(t){var e=t.offsetX-t.actualSize.width*t.pivot.x,i=t.offsetY-t.actualSize.height*t.pivot.y;return new Zu(e,i,t.actualSize.width,t.actualSize.height)}function yl(t,e){for(var i=0;i<e.length;i++)if(e[parseInt(i.toString(),10)].id===t)return!0;return!1}function bl(t){return void 0===t||null===t}function Sl(t){return void 0!==t&&null!==t}function wl(t){return!0===t}function Il(t){return"string"==typeof t||"number"==typeof t||"symbol"==typeof t||"boolean"==typeof t}function xl(t){return null!==t&&"object"==typeof t}function Ml(t){return GO.call(t).slice(8,-1)}function Cl(t){return"[object Object]"===GO.call(t)}function Nl(t){return"[object RegExp]"===GO.call(t)}function El(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function Dl(t){return Sl(t)&&"function"==typeof t.then&&"function"==typeof t.catch}function Tl(t){return null==t?"":Array.isArray(t)||Cl(t)&&t.toString===GO?JSON.stringify(t,null,2):String(t)}function Ol(t){var e=parseFloat(t);return isNaN(e)?t:e}function Ll(t,e){for(var i=Object.create(null),n=t.split(","),r=0;r<n.length;r++)i[n[r]]=!0;return e?function(t){return i[t.toLowerCase()]}:function(t){return i[t]}}function Al(t,e){if(t.length){var i=t.indexOf(e);if(i>-1)return t.splice(i,1)}}function zl(t,e){return KO.call(t,e)}function kl(t){var e=Object.create(null);return function(i){return e[i]||(e[i]=t(i))}}function jl(t,e){e=e||0;for(var i=t.length-e,n=new Array(i);i--;)n[i]=t[i+e];return n}function Pl(t,e){for(var i in e)t[i]=e[i];return t}function Rl(t){for(var e={},i=0;i<t.length;i++)t[i]&&Pl(e,t[i]);return e}function Bl(t,e,i){}function Hl(t,e){if(t===e)return!0;var i=xl(t),n=xl(e);if(!i||!n)return!i&&!n&&String(t)===String(e);try{var r=Array.isArray(t),o=Array.isArray(e);if(r&&o)return t.length===e.length&&t.every(function(t,i){return Hl(t,e[i])});if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(r||o)return!1;var s=Object.keys(t),a=Object.keys(e);return s.length===a.length&&s.every(function(i){return Hl(t[i],e[i])})}catch(t){return!1}}function Ul(t,e){for(var i=0;i<t.length;i++)if(Hl(t[i],e))return i;return-1}function Vl(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}function _l(t){var e=(t+"").charCodeAt(0);return 36===e||95===e}function Fl(t,e,i,n){Object.defineProperty(t,e,{value:i,enumerable:!!n,writable:!0,configurable:!0})}function Yl(t){return"function"==typeof t&&/native code/.test(t.toString())}function Wl(t){HL.push(t),BL.target=t}function Ql(){HL.pop(),BL.target=HL[HL.length-1]}function Xl(t){return new UL(void 0,void 0,void 0,String(t))}function ql(t){var e=new UL(t.tag,t.data,t.children&&t.children.slice(),t.text,t.elm,t.context,t.componentOptions,t.asyncFactory);return e.ns=t.ns,e.isStatic=t.isStatic,e.key=t.key,e.isComment=t.isComment,e.fnContext=t.fnContext,e.fnOptions=t.fnOptions,e.fnScopeId=t.fnScopeId,e.asyncMeta=t.asyncMeta,e.isCloned=!0,e}function Gl(t){QL=t}function Zl(t,e){if(xl(t)&&!(t instanceof UL)){var i;return zl(t,"__ob__")&&t.__ob__ instanceof XL?i=t.__ob__:QL&&!DL()&&(Array.isArray(t)||Cl(t))&&Object.isExtensible(t)&&!t._isVue&&(i=new XL(t)),e&&i&&i.vmCount++,i}}function $l(t,e,i,n,r){var o=new BL,s=Object.getOwnPropertyDescriptor(t,e);if(!s||!1!==s.configurable){var a=s&&s.get,l=s&&s.set;a&&!l||2!==arguments.length||(i=t[e]);var h=!r&&Zl(i);Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=a?a.call(t):i;return BL.target&&(o.depend(),h&&(h.dep.depend(),Array.isArray(e)&&th(e))),e},set:function(e){var s=a?a.call(t):i;e===s||e!=e&&s!=s||("production"!==process.env.NODE_ENV&&n&&n(),a&&!l||(l?l.call(t,e):i=e,h=!r&&Zl(e),o.notify()))}})}}function Kl(t,e,i){if("production"!==process.env.NODE_ENV&&(bl(t)||Il(t))&&LL("Cannot set reactive property on undefined, null, or primitive value: "+t),Array.isArray(t)&&El(e))return t.length=Math.max(t.length,e),t.splice(e,1,i),i;if(e in t&&!(e in Object.prototype))return t[e]=i,i;var n=t.__ob__;return t._isVue||n&&n.vmCount?("production"!==process.env.NODE_ENV&&LL("Avoid adding reactive properties to a Vue instance or its root $data at runtime - declare it upfront in the data option."),i):n?($l(n.value,e,i),n.dep.notify(),i):(t[e]=i,i)}function Jl(t,e){if("production"!==process.env.NODE_ENV&&(bl(t)||Il(t))&&LL("Cannot delete reactive property on undefined, null, or primitive value: "+t),Array.isArray(t)&&El(e))t.splice(e,1);else{var i=t.__ob__;t._isVue||i&&i.vmCount?"production"!==process.env.NODE_ENV&&LL("Avoid deleting properties on a Vue instance or its root $data - just set it to null."):zl(t,e)&&(delete t[e],i&&i.dep.notify())}}function th(t){for(var e=void 0,i=0,n=t.length;i<n;i++)(e=t[i])&&e.__ob__&&e.__ob__.dep.depend(),Array.isArray(e)&&th(e)}function eh(t,e){if(!e)return t;for(var i,n,r,o=OL?Reflect.ownKeys(e):Object.keys(e),s=0;s<o.length;s++)"__ob__"!==(i=o[s])&&(n=t[i],r=e[i],zl(t,i)?n!==r&&Cl(n)&&Cl(r)&&eh(n,r):Kl(t,i,r));return t}function ih(t,e,i){return i?function(){var n="function"==typeof e?e.call(i,i):e,r="function"==typeof t?t.call(i,i):t;return n?eh(n,r):r}:e?t?function(){return eh("function"==typeof e?e.call(this,this):e,"function"==typeof t?t.call(this,this):t)}:e:t}function nh(t,e){var i=e?t?t.concat(e):Array.isArray(e)?e:[e]:t;return i?function(t){for(var e=[],i=0;i<t.length;i++)-1===e.indexOf(t[i])&&e.push(t[i]);return e}(i):i}function rh(t,e,i,n){var r=Object.create(t||null);return e?("production"!==process.env.NODE_ENV&&sh(n,e,i),Pl(r,e)):r}function oh(t){new RegExp("^[a-zA-Z][\\-\\.0-9_"+dL.source+"]*$").test(t)||LL('Invalid component name: "'+t+'". Component names should conform to valid custom element name in html5 specification.'),(ZO(t)||cL.isReservedTag(t))&&LL("Do not use built-in or reserved HTML elements as component id: "+t)}function sh(t,e,i){Cl(e)||LL('Invalid value for option "'+t+'": expected an Object, but got '+Ml(e)+".",i)}function ah(t,e,i){function n(n){var r=qL[n]||ZL;a[n]=r(t[n],e[n],i,n)}if("production"!==process.env.NODE_ENV&&function(t){for(var e in t.components)oh(e)}(e),"function"==typeof e&&(e=e.options),function(t,e){var i=t.props;if(i){var n,r,o={};if(Array.isArray(i))for(n=i.length;n--;)"string"==typeof(r=i[n])?o[tL(r)]={type:null}:"production"!==process.env.NODE_ENV&&LL("props must be strings when using array syntax.");else if(Cl(i))for(var s in i)r=i[s],o[tL(s)]=Cl(r)?r:{type:r};else"production"!==process.env.NODE_ENV&&LL('Invalid value for option "props": expected an Array or an Object, but got '+Ml(i)+".",e);t.props=o}}(e,i),function(t,e){var i=t.inject;if(i){var n=t.inject={};if(Array.isArray(i))for(var r=0;r<i.length;r++)n[i[r]]={from:i[r]};else if(Cl(i))for(var o in i){var s=i[o];n[o]=Cl(s)?Pl({from:o},s):{from:s}}else"production"!==process.env.NODE_ENV&&LL('Invalid value for option "inject": expected an Array or an Object, but got '+Ml(i)+".",e)}}(e,i),function(t){var e=t.directives;if(e)for(var i in e){var n=e[i];"function"==typeof n&&(e[i]={bind:n,update:n})}}(e),!e._base&&(e.extends&&(t=ah(t,e.extends,i)),e.mixins))for(var r=0,o=e.mixins.length;r<o;r++)t=ah(t,e.mixins[r],i);var s,a={};for(s in t)n(s);for(s in e)zl(t,s)||n(s);return a}function lh(t,e,i,n){if("string"==typeof i){var r=t[e];if(zl(r,i))return r[i];var o=tL(i);if(zl(r,o))return r[o];var s=eL(o);if(zl(r,s))return r[s];var a=r[i]||r[o]||r[s];return"production"!==process.env.NODE_ENV&&n&&!a&&LL("Failed to resolve "+e.slice(0,-1)+": "+i,t),a}}function hh(t,e,i,n){var r=e[t],o=!zl(i,t),s=i[t],a=ph(Boolean,r.type);if(a>-1)if(o&&!zl(r,"default"))s=!1;else if(""===s||s===nL(t)){var l=ph(String,r.type);(l<0||a<l)&&(s=!0)}if(void 0===s){s=function(t,e,i){if(!zl(e,"default"))return;var n=e.default;"production"!==process.env.NODE_ENV&&xl(n)&&LL('Invalid default value for prop "'+i+'": Props with type Object/Array must use a factory function to return the default value.',t);if(t&&t.$options.propsData&&void 0===t.$options.propsData[i]&&void 0!==t._props[i])return t._props[i];return"function"==typeof n&&"Function"!==ch(e.type)?n.call(t):n}(n,r,t);var h=QL;Gl(!0),Zl(s),Gl(h)}return"production"!==process.env.NODE_ENV&&function(t,e,i,n,r){if(t.required&&r)return void LL('Missing required prop: "'+e+'"',n);if(null==i&&!t.required)return;var o=t.type,s=!o||!0===o,a=[];if(o){Array.isArray(o)||(o=[o]);for(var l=0;l<o.length&&!s;l++){var h=function(t,e,i){var n,r=ch(e);if($L.test(r)){var o=typeof t;(n=o===r.toLowerCase())||"object"!==o||(n=t instanceof e)}else if("Object"===r)n=Cl(t);else if("Array"===r)n=Array.isArray(t);else try{n=t instanceof e}catch(t){LL('Invalid prop type: "'+String(e)+'" is not a constructor',i),n=!1}return{valid:n,expectedType:r}}(i,o[l],n);a.push(h.expectedType||""),s=h.valid}}var c=a.some(function(t){return t});if(!s&&c)return void LL(function(t,e,i){var n='Invalid prop: type check failed for prop "'+t+'". Expected '+i.map(eL).join(", "),r=i[0],o=Ml(e);1===i.length&&gh(r)&&gh(typeof e)&&!function(){var t=[],e=arguments.length;for(;e--;)t[e]=arguments[e];return t.some(function(t){return"boolean"===t.toLowerCase()})}(r,o)&&(n+=" with value "+uh(e,r));n+=", got "+o+" ",gh(o)&&(n+="with value "+uh(e,o)+".");return n}(e,i,a),n);var d=t.validator;d&&(d(i)||LL('Invalid prop: custom validator check failed for prop "'+e+'".',n))}(r,t,s,n,o),s}function ch(t){var e=t&&t.toString().match(KL);return e?e[1]:""}function dh(t,e){return ch(t)===ch(e)}function ph(t,e){if(!Array.isArray(e))return dh(e,t)?0:-1;for(var i=0,n=e.length;i<n;i++)if(dh(e[i],t))return i;return-1}function uh(t,e){return"String"===e?'"'+t+'"':"Number"===e?""+Number(t):""+t}function gh(t){return JL.some(function(e){return t.toLowerCase()===e})}function mh(t,e,i){Wl();try{if(e)for(var n=e;n=n.$parent;){var r=n.$options.errorCaptured;if(r)for(var o=0;o<r.length;o++)try{if(!1===r[o].call(n,t,e,i))return}catch(t){vh(t,n,"errorCaptured hook")}}vh(t,e,i)}finally{Ql()}}function fh(t,e,i,n,r){var o;try{(o=i?t.apply(e,i):t.call(e))&&!o._isVue&&Dl(o)&&!o._handled&&(o.catch(function(t){return mh(t,n,r+" (Promise/async)")}),o._handled=!0)}catch(t){mh(t,n,r)}return o}function vh(t,e,i){if(cL.errorHandler)try{return cL.errorHandler.call(null,t,e,i)}catch(e){e!==t&&yh(e,null,"config.errorHandler")}yh(t,e,i)}function yh(t,e,i){if("production"!==process.env.NODE_ENV&&LL("Error in "+i+': "'+t.toString()+'"',e),!gL&&!mL||"undefined"==typeof console)throw t;console.error(t)}function bh(){iA=!1;var t=eA.slice(0);eA.length=0;for(var e=0;e<t.length;e++)t[e]()}function Sh(t,e){var i;if(eA.push(function(){if(t)try{t.call(e)}catch(t){mh(t,e,"nextTick")}else i&&i(e)}),iA||(iA=!0,GL()),!t&&"undefined"!=typeof Promise)return new Promise(function(t){i=t})}function wh(t){Ih(t,vA),vA.clear()}function Ih(t,e){var i,n,r=Array.isArray(t);if(!(!r&&!xl(t)||Object.isFrozen(t)||t instanceof UL)){if(t.__ob__){var o=t.__ob__.dep.id;if(e.has(o))return;e.add(o)}if(r)for(i=t.length;i--;)Ih(t[i],e);else for(i=(n=Object.keys(t)).length;i--;)Ih(t[n[i]],e)}}function xh(t,e){function i(){var t=arguments,n=i.fns;if(!Array.isArray(n))return fh(n,null,arguments,e,"v-on handler");for(var r=n.slice(),o=0;o<r.length;o++)fh(r[o],null,t,e,"v-on handler")}return i.fns=t,i}function Mh(t,e,i,n,r,o){var s,a,l,h;for(s in t)a=t[s],l=e[s],h=bA(s),bl(a)?"production"!==process.env.NODE_ENV&&LL('Invalid handler for event "'+h.name+'": got '+String(a),o):bl(l)?(bl(a.fns)&&(a=t[s]=xh(a,o)),wl(h.once)&&(a=t[s]=r(h.name,a,h.capture)),i(h.name,a,h.capture,h.passive,h.params)):a!==l&&(l.fns=a,t[s]=l);for(s in e)bl(t[s])&&n((h=bA(s)).name,e[s],h.capture)}function Ch(t,e,i){function n(){i.apply(this,arguments),Al(r.fns,n)}t instanceof UL&&(t=t.data.hook||(t.data.hook={}));var r,o=t[e];bl(o)?r=xh([n]):Sl(o.fns)&&wl(o.merged)?(r=o).fns.push(n):r=xh([o,n]),r.merged=!0,t[e]=r}function Nh(t,e,i,n,r){if(Sl(e)){if(zl(e,i))return t[i]=e[i],r||delete e[i],!0;if(zl(e,n))return t[i]=e[n],r||delete e[n],!0}return!1}function Eh(t){return Il(t)?[Xl(t)]:Array.isArray(t)?Th(t):void 0}function Dh(t){return Sl(t)&&Sl(t.text)&&function(t){return!1===t}(t.isComment)}function Th(t,e){var i,n,r,o,s=[];for(i=0;i<t.length;i++)bl(n=t[i])||"boolean"==typeof n||(o=s[r=s.length-1],Array.isArray(n)?n.length>0&&(Dh((n=Th(n,(e||"")+"_"+i))[0])&&Dh(o)&&(s[r]=Xl(o.text+n[0].text),n.shift()),s.push.apply(s,n)):Il(n)?Dh(o)?s[r]=Xl(o.text+n):""!==n&&s.push(Xl(n)):Dh(n)&&Dh(o)?s[r]=Xl(o.text+n.text):(wl(t._isVList)&&Sl(n.tag)&&bl(n.key)&&Sl(e)&&(n.key="__vlist"+e+"_"+i+"__"),s.push(n)));return s}function Oh(t,e){if(t){for(var i=Object.create(null),n=OL?Reflect.ownKeys(t):Object.keys(t),r=0;r<n.length;r++){var o=n[r];if("__ob__"!==o){for(var s=t[o].from,a=e;a;){if(a._provided&&zl(a._provided,s)){i[o]=a._provided[s];break}a=a.$parent}if(!a)if("default"in t[o]){var l=t[o].default;i[o]="function"==typeof l?l.call(e):l}else"production"!==process.env.NODE_ENV&&LL('Injection "'+o+'" not found',e)}}return i}}function Lh(t,e){if(!t||!t.length)return{};for(var i={},n=0,r=t.length;n<r;n++){var o=t[n],s=o.data;if(s&&s.attrs&&s.attrs.slot&&delete s.attrs.slot,o.context!==e&&o.fnContext!==e||!s||null==s.slot)(i.default||(i.default=[])).push(o);else{var a=s.slot,l=i[a]||(i[a]=[]);"template"===o.tag?l.push.apply(l,o.children||[]):l.push(o)}}for(var h in i)i[h].every(Ah)&&delete i[h];return i}function Ah(t){return t.isComment&&!t.asyncFactory||" "===t.text}function zh(t){return t.isComment&&t.asyncFactory}function kh(t,e,i){var n,r=Object.keys(e).length>0,o=t?!!t.$stable:!r,s=t&&t.$key;if(t){if(t._normalized)return t._normalized;if(o&&i&&i!==qO&&s===i.$key&&!r&&!i.$hasNormal)return i;n={};for(var a in t)t[a]&&"$"!==a[0]&&(n[a]=function(t,e,i){var n=function(){var t=arguments.length?i.apply(null,arguments):i({}),e=(t=t&&"object"==typeof t&&!Array.isArray(t)?[t]:Eh(t))&&t[0];return t&&(!e||1===t.length&&e.isComment&&!zh(e))?void 0:t};i.proxy&&Object.defineProperty(t,e,{get:n,enumerable:!0,configurable:!0});return n}(e,a,t[a]))}else n={};for(var l in e)l in n||(n[l]=function(t,e){return function(){return t[e]}}(e,l));return t&&Object.isExtensible(t)&&(t._normalized=n),Fl(n,"$stable",o),Fl(n,"$key",s),Fl(n,"$hasNormal",r),n}function jh(t,e){var i,n,r,o,s;if(Array.isArray(t)||"string"==typeof t)for(i=new Array(t.length),n=0,r=t.length;n<r;n++)i[n]=e(t[n],n);else if("number"==typeof t)for(i=new Array(t),n=0;n<t;n++)i[n]=e(n+1,n);else if(xl(t))if(OL&&t[Symbol.iterator]){i=[];for(var a=t[Symbol.iterator](),l=a.next();!l.done;)i.push(e(l.value,i.length)),l=a.next()}else for(o=Object.keys(t),i=new Array(o.length),n=0,r=o.length;n<r;n++)s=o[n],i[n]=e(t[s],s,n);return Sl(i)||(i=[]),i._isVList=!0,i}function Ph(t,e,i,n){var r,o=this.$scopedSlots[t];o?(i=i||{},n&&("production"===process.env.NODE_ENV||xl(n)||LL("slot v-bind without argument expects an Object",this),i=Pl(Pl({},n),i)),r=o(i)||("function"==typeof e?e():e)):r=this.$slots[t]||("function"==typeof e?e():e);var s=i&&i.slot;return s?this.$createElement("template",{slot:s},r):r}function Rh(t){return lh(this.$options,"filters",t,!0)||sL}function Bh(t,e){return Array.isArray(t)?-1===t.indexOf(e):t!==e}function Hh(t,e,i,n,r){var o=cL.keyCodes[e]||i;return r&&n&&!cL.keyCodes[e]?Bh(r,n):o?Bh(o,t):n?nL(n)!==e:void 0===t}function Uh(t,e,i,n,r){if(i)if(xl(i)){Array.isArray(i)&&(i=Rl(i));var o,s=function(s){if("class"===s||"style"===s||$O(s))o=t;else{var a=t.attrs&&t.attrs.type;o=n||cL.mustUseProp(e,a,s)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}var l=tL(s),h=nL(s);if(!(l in o||h in o)&&(o[s]=i[s],r)){(t.on||(t.on={}))["update:"+s]=function(t){i[s]=t}}};for(var a in i)s(a)}else"production"!==process.env.NODE_ENV&&LL("v-bind without argument expects an Object or Array value",this);return t}function Vh(t,e){var i=this._staticTrees||(this._staticTrees=[]),n=i[t];return n&&!e?n:(n=i[t]=this.$options.staticRenderFns[t].call(this._renderProxy,null,this),Fh(n,"__static__"+t,!1),n)}function _h(t,e,i){return Fh(t,"__once__"+e+(i?"_"+i:""),!0),t}function Fh(t,e,i){if(Array.isArray(t))for(var n=0;n<t.length;n++)t[n]&&"string"!=typeof t[n]&&Yh(t[n],e+"_"+n,i);else Yh(t,e,i)}function Yh(t,e,i){t.isStatic=!0,t.key=e,t.isOnce=i}function Wh(t,e){if(e)if(Cl(e)){var i=t.on=t.on?Pl({},t.on):{};for(var n in e){var r=i[n],o=e[n];i[n]=r?[].concat(r,o):o}}else"production"!==process.env.NODE_ENV&&LL("v-on without argument expects an Object value",this);return t}function Qh(t,e,i,n){e=e||{$stable:!i};for(var r=0;r<t.length;r++){var o=t[r];Array.isArray(o)?Qh(o,e,i):o&&(o.proxy&&(o.fn.proxy=!0),e[o.key]=o.fn)}return n&&(e.$key=n),e}function Xh(t,e){for(var i=0;i<e.length;i+=2){var n=e[i];"string"==typeof n&&n?t[e[i]]=e[i+1]:"production"!==process.env.NODE_ENV&&""!==n&&null!==n&&LL("Invalid value for dynamic directive argument (expected string or null): "+n,this)}return t}function qh(t,e){return"string"==typeof t?e+t:t}function Gh(t){t._o=_h,t._n=Ol,t._s=Tl,t._l=jh,t._t=Ph,t._q=Hl,t._i=Ul,t._m=Vh,t._f=Rh,t._k=Hh,t._b=Uh,t._v=Xl,t._e=_L,t._u=Qh,t._g=Wh,t._d=Xh,t._p=qh}function Zh(t,e,i,n,r){var o,s=this,a=r.options;zl(n,"_uid")?(o=Object.create(n))._original=n:(o=n,n=n._original);var l=wl(a._compiled),h=!l;this.data=t,this.props=e,this.children=i,this.parent=n,this.listeners=t.on||qO,this.injections=Oh(a.inject,n),this.slots=function(){return s.$slots||kh(t.scopedSlots,s.$slots=Lh(i,n)),s.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return kh(t.scopedSlots,this.slots())}}),l&&(this.$options=a,this.$slots=this.slots(),this.$scopedSlots=kh(t.scopedSlots,this.$slots)),a._scopeId?this._c=function(t,e,i,r){var s=tc(o,t,e,i,r,h);return s&&!Array.isArray(s)&&(s.fnScopeId=a._scopeId,s.fnContext=n),s}:this._c=function(t,e,i,n){return tc(o,t,e,i,n,h)}}function $h(t,e,i,n,r){var o=ql(t);return o.fnContext=i,o.fnOptions=n,"production"!==process.env.NODE_ENV&&((o.devtoolsMeta=o.devtoolsMeta||{}).renderContext=r),e.slot&&((o.data||(o.data={})).slot=e.slot),o}function Kh(t,e){for(var i in e)t[tL(i)]=e[i]}function Jh(t,e,i,n,r){if(!bl(t)){var o=i.$options._base;if(xl(t)&&(t=o.extend(t)),"function"==typeof t){var s;if(bl(t.cid)&&(s=t,void 0===(t=function(t,e){if(wl(t.error)&&Sl(t.errorComp))return t.errorComp;if(Sl(t.resolved))return t.resolved;var i=CA;i&&Sl(t.owners)&&-1===t.owners.indexOf(i)&&t.owners.push(i);if(wl(t.loading)&&Sl(t.loadingComp))return t.loadingComp;if(i&&!Sl(t.owners)){var n=t.owners=[i],r=!0,o=null,s=null;i.$on("hook:destroyed",function(){return Al(n,i)});var a=function(t){for(var e=0,i=n.length;e<i;e++)n[e].$forceUpdate();t&&(n.length=0,null!==o&&(clearTimeout(o),o=null),null!==s&&(clearTimeout(s),s=null))},l=Vl(function(i){t.resolved=ic(i,e),r?n.length=0:a(!0)}),h=Vl(function(e){"production"!==process.env.NODE_ENV&&LL("Failed to resolve async component: "+String(t)+(e?"\nReason: "+e:"")),Sl(t.errorComp)&&(t.error=!0,a(!0))}),c=t(l,h);return xl(c)&&(Dl(c)?bl(t.resolved)&&c.then(l,h):Dl(c.component)&&(c.component.then(l,h),Sl(c.error)&&(t.errorComp=ic(c.error,e)),Sl(c.loading)&&(t.loadingComp=ic(c.loading,e),0===c.delay?t.loading=!0:o=setTimeout(function(){o=null,bl(t.resolved)&&bl(t.error)&&(t.loading=!0,a(!1))},c.delay||200)),Sl(c.timeout)&&(s=setTimeout(function(){s=null,bl(t.resolved)&&h("production"!==process.env.NODE_ENV?"timeout ("+c.timeout+"ms)":null)},c.timeout)))),r=!1,t.loading?t.loadingComp:t.resolved}}(s,o))))return function(t,e,i,n,r){var o=_L();return o.asyncFactory=t,o.asyncMeta={data:e,context:i,children:n,tag:r},o}(s,e,i,n,r);e=e||{},Sc(t),Sl(e.model)&&function(t,e){var i=t.model&&t.model.prop||"value",n=t.model&&t.model.event||"input";(e.attrs||(e.attrs={}))[i]=e.model.value;var r=e.on||(e.on={}),o=r[n],s=e.model.callback;Sl(o)?(Array.isArray(o)?-1===o.indexOf(s):o!==s)&&(r[n]=[s].concat(o)):r[n]=s}(t.options,e);var a=function(t,e,i){var n=e.options.props;if(!bl(n)){var r={},o=t.attrs,s=t.props;if(Sl(o)||Sl(s))for(var a in n){var l=nL(a);if("production"!==process.env.NODE_ENV){var h=a.toLowerCase();a!==h&&o&&zl(o,h)&&AL('Prop "'+h+'" is passed to component '+kL(i||e)+', but the declared prop name is "'+a+'". Note that HTML attributes are case-insensitive and camelCased props need to use their kebab-case equivalents when using in-DOM templates. You should probably use "'+l+'" instead of "'+a+'".')}Nh(r,s,a,l,!0)||Nh(r,o,a,l,!1)}return r}}(e,t,r);if(wl(t.options.functional))return function(t,e,i,n,r){var o=t.options,s={},a=o.props;if(Sl(a))for(var l in a)s[l]=hh(l,a,e||qO);else Sl(i.attrs)&&Kh(s,i.attrs),Sl(i.props)&&Kh(s,i.props);var h=new Zh(i,s,r,n,t),c=o.render.call(null,h._c,h);if(c instanceof UL)return $h(c,i,h.parent,o,h);if(Array.isArray(c)){for(var d=Eh(c)||[],p=new Array(d.length),u=0;u<d.length;u++)p[u]=$h(d[u],i,h.parent,o,h);return p}}(t,a,e,i,n);var l=e.on;if(e.on=e.nativeOn,wl(t.options.abstract)){var h=e.slot;e={},h&&(e.slot=h)}!function(t){for(var e=t.hook||(t.hook={}),i=0;i<IA.length;i++){var n=IA[i],r=e[n],o=wA[n];r===o||r&&r._merged||(e[n]=r?function(t,e){var i=function(i,n){t(i,n),e(i,n)};return i._merged=!0,i}(o,r):o)}}(e);var c=t.options.name||r;return new UL("vue-component-"+t.cid+(c?"-"+c:""),e,void 0,void 0,void 0,i,{Ctor:t,propsData:a,listeners:l,tag:r,children:n},s)}"production"!==process.env.NODE_ENV&&LL("Invalid Component definition: "+String(t),i)}}function tc(t,e,i,n,r,o){return(Array.isArray(i)||Il(i))&&(r=n,n=i,i=void 0),wl(o)&&(r=MA),function(t,e,i,n,r){if(Sl(i)&&Sl(i.__ob__))return"production"!==process.env.NODE_ENV&&LL("Avoid using observed data object as vnode data: "+JSON.stringify(i)+"\nAlways create fresh vnode data objects in each render!",t),_L();Sl(i)&&Sl(i.is)&&(e=i.is);if(!e)return _L();"production"!==process.env.NODE_ENV&&Sl(i)&&Sl(i.key)&&!Il(i.key)&&LL("Avoid using non-primitive value as key, use string/number value instead.",t);Array.isArray(n)&&"function"==typeof n[0]&&((i=i||{}).scopedSlots={default:n[0]},n.length=0);r===MA?n=Eh(n):r===xA&&(n=function(t){for(var e=0;e<t.length;e++)if(Array.isArray(t[e]))return Array.prototype.concat.apply([],t);return t}(n));var o,s;if("string"==typeof e){var a;s=t.$vnode&&t.$vnode.ns||cL.getTagNamespace(e),cL.isReservedTag(e)?("production"!==process.env.NODE_ENV&&Sl(i)&&Sl(i.nativeOn)&&"component"!==i.tag&&LL("The .native modifier for v-on is only valid on components but it was used on <"+e+">.",t),o=new UL(cL.parsePlatformTagName(e),i,n,void 0,void 0,t)):o=i&&i.pre||!Sl(a=lh(t.$options,"components",e))?new UL(e,i,n,void 0,void 0,t):Jh(a,i,t,n,e)}else o=Jh(e,i,t,n);return Array.isArray(o)?o:Sl(o)?(Sl(s)&&ec(o,s),Sl(i)&&function(t){xl(t.style)&&wh(t.style);xl(t.class)&&wh(t.class)}(i),o):_L()}(t,e,i,n,r)}function ec(t,e,i){if(t.ns=e,"foreignObject"===t.tag&&(e=void 0,i=!0),Sl(t.children))for(var n=0,r=t.children.length;n<r;n++){var o=t.children[n];Sl(o.tag)&&(bl(o.ns)||wl(i)&&"svg"!==o.tag)&&ec(o,e,i)}}function ic(t,e){return(t.__esModule||OL&&"Module"===t[Symbol.toStringTag])&&(t=t.default),xl(t)?e.extend(t):t}function nc(t){if(Array.isArray(t))for(var e=0;e<t.length;e++){var i=t[e];if(Sl(i)&&(Sl(i.componentOptions)||zh(i)))return i}}function rc(t,e){SA.$on(t,e)}function oc(t,e){SA.$off(t,e)}function sc(t,e){var i=SA;return function n(){null!==e.apply(null,arguments)&&i.$off(t,n)}}function ac(t,e,i){SA=t,Mh(e,i||{},rc,oc,sc,t),SA=void 0}function lc(t){var e=NA;return NA=t,function(){NA=e}}function hc(t){for(;t&&(t=t.$parent);)if(t._inactive)return!0;return!1}function cc(t,e){if(e){if(t._directInactive=!1,hc(t))return}else if(t._directInactive)return;if(t._inactive||null===t._inactive){t._inactive=!1;for(var i=0;i<t.$children.length;i++)cc(t.$children[i]);pc(t,"activated")}}function dc(t,e){if(!(e&&(t._directInactive=!0,hc(t))||t._inactive)){t._inactive=!0;for(var i=0;i<t.$children.length;i++)dc(t.$children[i]);pc(t,"deactivated")}}function pc(t,e){Wl();var i=t.$options[e],n=e+" hook";if(i)for(var r=0,o=i.length;r<o;r++)fh(i[r],t,null,t,n);t._hasHookEvent&&t.$emit("hook:"+e),Ql()}function uc(){PA=RA(),kA=!0;var t,e;for(TA.sort(function(t,e){return t.id-e.id}),jA=0;jA<TA.length;jA++)if((t=TA[jA]).before&&t.before(),e=t.id,LA[e]=null,t.run(),"production"!==process.env.NODE_ENV&&null!=LA[e]&&(AA[e]=(AA[e]||0)+1,AA[e]>DA)){LL("You may have an infinite update loop "+(t.user?'in watcher with expression "'+t.expression+'"':"in a component render function."),t.vm);break}var i=OA.slice(),n=TA.slice();jA=TA.length=OA.length=0,LA={},"production"!==process.env.NODE_ENV&&(AA={}),zA=kA=!1,function(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,cc(t[e],!0)}(i),function(t){var e=t.length;for(;e--;){var i=t[e],n=i.vm;n._watcher===i&&n._isMounted&&!n._isDestroyed&&pc(n,"updated")}}(n),TL&&cL.devtools&&TL.emit("flush")}function gc(t,e,i){VA.get=function(){return this[e][i]},VA.set=function(t){this[e][i]=t},Object.defineProperty(t,i,VA)}function mc(t){t._watchers=[];var e=t.$options;e.props&&function(t,e){var i=t.$options.propsData||{},n=t._props={},r=t.$options._propKeys=[],o=!t.$parent;o||Gl(!1);var s=function(s){r.push(s);var a=hh(s,e,i,t);if("production"!==process.env.NODE_ENV){var l=nL(s);($O(l)||cL.isReservedAttr(l))&&LL('"'+l+'" is a reserved attribute and cannot be used as component prop.',t),$l(n,s,a,function(){o||EA||LL("Avoid mutating a prop directly since the value will be overwritten whenever the parent component re-renders. Instead, use a data or computed property based on the prop's value. Prop being mutated: \""+s+'"',t)})}else $l(n,s,a);s in t||gc(t,"_props",s)};for(var a in e)s(a);Gl(!0)}(t,e.props),e.methods&&function(t,e){var i=t.$options.props;for(var n in e)"production"!==process.env.NODE_ENV&&("function"!=typeof e[n]&&LL('Method "'+n+'" has type "'+typeof e[n]+'" in the component definition. Did you reference the function correctly?',t),i&&zl(i,n)&&LL('Method "'+n+'" has already been defined as a prop.',t),n in t&&_l(n)&&LL('Method "'+n+'" conflicts with an existing Vue instance method. Avoid defining component methods that start with _ or $.')),t[n]="function"!=typeof e[n]?Bl:rL(e[n],t)}(t,e.methods),e.data?function(t){var e=t.$options.data;e=t._data="function"==typeof e?function(t,e){Wl();try{return t.call(e,e)}catch(t){return mh(t,e,"data()"),{}}finally{Ql()}}(e,t):e||{},Cl(e)||(e={},"production"!==process.env.NODE_ENV&&LL("data functions should return an object:\nhttps://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function",t));var i=Object.keys(e),n=t.$options.props,r=t.$options.methods,o=i.length;for(;o--;){var s=i[o];"production"!==process.env.NODE_ENV&&r&&zl(r,s)&&LL('Method "'+s+'" has already been defined as a data property.',t),n&&zl(n,s)?"production"!==process.env.NODE_ENV&&LL('The data property "'+s+'" is already declared as a prop. Use prop default value instead.',t):_l(s)||gc(t,"_data",s)}Zl(e,!0)}(t):Zl(t._data={},!0),e.computed&&function(t,e){var i=t._computedWatchers=Object.create(null),n=DL();for(var r in e){var o=e[r],s="function"==typeof o?o:o.get;"production"!==process.env.NODE_ENV&&null==s&&LL('Getter is missing for computed property "'+r+'".',t),n||(i[r]=new UA(t,s||Bl,Bl,_A)),r in t?"production"!==process.env.NODE_ENV&&(r in t.$data?LL('The computed property "'+r+'" is already defined in data.',t):t.$options.props&&r in t.$options.props?LL('The computed property "'+r+'" is already defined as a prop.',t):t.$options.methods&&r in t.$options.methods&&LL('The computed property "'+r+'" is already defined as a method.',t)):fc(t,r,o)}}(t,e.computed),e.watch&&e.watch!==xL&&function(t,e){for(var i in e){var n=e[i];if(Array.isArray(n))for(var r=0;r<n.length;r++)bc(t,i,n[r]);else bc(t,i,n)}}(t,e.watch)}function fc(t,e,i){var n=!DL();"function"==typeof i?(VA.get=n?vc(e):yc(i),VA.set=Bl):(VA.get=i.get?n&&!1!==i.cache?vc(e):yc(i.get):Bl,VA.set=i.set||Bl),"production"!==process.env.NODE_ENV&&VA.set===Bl&&(VA.set=function(){LL('Computed property "'+e+'" was assigned to but it has no setter.',this)}),Object.defineProperty(t,e,VA)}function vc(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),BL.target&&e.depend(),e.value}}function yc(t){return function(){return t.call(this,this)}}function bc(t,e,i,n){return Cl(i)&&(n=i,i=i.handler),"string"==typeof i&&(i=t[i]),t.$watch(e,i,n)}function Sc(t){var e=t.options;if(t.super){var i=Sc(t.super);if(i!==t.superOptions){t.superOptions=i;var n=function(t){var e,i=t.options,n=t.sealedOptions;for(var r in i)i[r]!==n[r]&&(e||(e={}),e[r]=i[r]);return e}(t);n&&Pl(t.extendOptions,n),(e=t.options=ah(i,t.extendOptions)).name&&(e.components[e.name]=t)}}return e}function wc(t){"production"===process.env.NODE_ENV||this instanceof wc||LL("Vue is a constructor and should be called with the `new` keyword"),this._init(t)}function Ic(t){t.cid=0;var e=1;t.extend=function(t){t=t||{};var i=this,n=i.cid,r=t._Ctor||(t._Ctor={});if(r[n])return r[n];var o=t.name||i.options.name;"production"!==process.env.NODE_ENV&&o&&oh(o);var s=function(t){this._init(t)};return s.prototype=Object.create(i.prototype),s.prototype.constructor=s,s.cid=e++,s.options=ah(i.options,t),s.super=i,s.options.props&&function(t){var e=t.options.props;for(var i in e)gc(t.prototype,"_props",i)}(s),s.options.computed&&function(t){var e=t.options.computed;for(var i in e)fc(t.prototype,i,e[i])}(s),s.extend=i.extend,s.mixin=i.mixin,s.use=i.use,lL.forEach(function(t){s[t]=i[t]}),o&&(s.options.components[o]=s),s.superOptions=i.options,s.extendOptions=t,s.sealedOptions=Pl({},s.options),r[n]=s,s}}function xc(t){return t&&(t.Ctor.options.name||t.tag)}function Mc(t,e){return Array.isArray(t)?t.indexOf(e)>-1:"string"==typeof t?t.split(",").indexOf(e)>-1:!!Nl(t)&&t.test(e)}function Cc(t,e){var i=t.cache,n=t.keys,r=t._vnode;for(var o in i){var s=i[o];if(s){var a=s.name;a&&!e(a)&&Nc(i,o,n,r)}}}function Nc(t,e,i,n){var r=t[e];!r||n&&r.tag===n.tag||r.componentInstance.$destroy(),t[e]=null,Al(i,e)}function Ec(t){for(var e=t.data,i=t,n=t;Sl(n.componentInstance);)(n=n.componentInstance._vnode)&&n.data&&(e=Dc(n.data,e));for(;Sl(i=i.parent);)i&&i.data&&(e=Dc(e,i.data));return function(t,e){if(Sl(t)||Sl(e))return Tc(t,Oc(e));return""}(e.staticClass,e.class)}function Dc(t,e){return{staticClass:Tc(t.staticClass,e.staticClass),class:Sl(t.class)?[t.class,e.class]:e.class}}function Tc(t,e){return t?e?t+" "+e:t:e||""}function Oc(t){return Array.isArray(t)?function(t){for(var e,i="",n=0,r=t.length;n<r;n++)Sl(e=Oc(t[n]))&&""!==e&&(i&&(i+=" "),i+=e);return i}(t):xl(t)?function(t){var e="";for(var i in t)t[i]&&(e&&(e+=" "),e+=i);return e}(t):"string"==typeof t?t:""}function Lc(t,e){var i=t.data.ref;if(Sl(i)){var n=t.context,r=t.componentInstance||t.elm,o=n.$refs;e?Array.isArray(o[i])?Al(o[i],r):o[i]===r&&(o[i]=void 0):t.data.refInFor?Array.isArray(o[i])?o[i].indexOf(r)<0&&o[i].push(r):o[i]=[r]:o[i]=r}}function Ac(t,e){return t.key===e.key&&t.asyncFactory===e.asyncFactory&&(t.tag===e.tag&&t.isComment===e.isComment&&Sl(t.data)===Sl(e.data)&&function(t,e){if("input"!==t.tag)return!0;var i,n=Sl(i=t.data)&&Sl(i=i.attrs)&&i.type,r=Sl(i=e.data)&&Sl(i=i.attrs)&&i.type;return n===r||cz(n)&&cz(r)}(t,e)||wl(t.isAsyncPlaceholder)&&bl(e.asyncFactory.error))}function zc(t,e,i){var n,r,o={};for(n=e;n<=i;++n)Sl(r=t[n].key)&&(o[r]=n);return o}function kc(t,e){(t.data.directives||e.data.directives)&&function(t,e){var i,n,r,o=t===uz,s=e===uz,a=jc(t.data.directives,t.context),l=jc(e.data.directives,e.context),h=[],c=[];for(i in l)n=a[i],r=l[i],n?(r.oldValue=n.value,r.oldArg=n.arg,Pc(r,"update",e,t),r.def&&r.def.componentUpdated&&c.push(r)):(Pc(r,"bind",e,t),r.def&&r.def.inserted&&h.push(r));if(h.length){var d=function(){for(var i=0;i<h.length;i++)Pc(h[i],"inserted",e,t)};o?Ch(e,"insert",d):d()}c.length&&Ch(e,"postpatch",function(){for(var i=0;i<c.length;i++)Pc(c[i],"componentUpdated",e,t)});if(!o)for(i in a)l[i]||Pc(a[i],"unbind",t,t,s)}(t,e)}function jc(t,e){var i=Object.create(null);if(!t)return i;var n,r;for(n=0;n<t.length;n++)(r=t[n]).modifiers||(r.modifiers=fz),i[function(t){return t.rawName||t.name+"."+Object.keys(t.modifiers||{}).join(".")}(r)]=r,r.def=lh(e.$options,"directives",r.name,!0);return i}function Pc(t,e,i,n,r){var o=t.def&&t.def[e];if(o)try{o(i.elm,t,i,n,r)}catch(n){mh(n,i.context,"directive "+t.name+" "+e+" hook")}}function Rc(t,e){var i=e.componentOptions;if(!(Sl(i)&&!1===i.Ctor.options.inheritAttrs||bl(t.data.attrs)&&bl(e.data.attrs))){var n,r,o=e.elm,s=t.data.attrs||{},a=e.data.attrs||{};Sl(a.__ob__)&&(a=e.data.attrs=Pl({},a));for(n in a)r=a[n],s[n]!==r&&Bc(o,n,r,e.data.pre);(yL||SL)&&a.value!==s.value&&Bc(o,"value",a.value);for(n in s)bl(a[n])&&(iz(n)?o.removeAttributeNS(ez,nz(n)):$A(n)||o.removeAttribute(n))}}function Bc(t,e,i,n){n||t.tagName.indexOf("-")>-1?Hc(t,e,i):tz(e)?rz(i)?t.removeAttribute(e):(i="allowfullscreen"===e&&"EMBED"===t.tagName?"true":e,t.setAttribute(e,i)):$A(e)?t.setAttribute(e,JA(e,i)):iz(e)?rz(i)?t.removeAttributeNS(ez,nz(e)):t.setAttributeNS(ez,e,i):Hc(t,e,i)}function Hc(t,e,i){if(rz(i))t.removeAttribute(e);else{if(yL&&!bL&&"TEXTAREA"===t.tagName&&"placeholder"===e&&""!==i&&!t.__ieph){var n=function(e){e.stopImmediatePropagation(),t.removeEventListener("input",n)};t.addEventListener("input",n),t.__ieph=!0}t.setAttribute(e,i)}}function Uc(t,e){var i=e.elm,n=e.data,r=t.data;if(!(bl(n.staticClass)&&bl(n.class)&&(bl(r)||bl(r.staticClass)&&bl(r.class)))){var o=Ec(e),s=i._transitionClasses;Sl(s)&&(o=Tc(o,Oc(s))),o!==i._prevClass&&(i.setAttribute("class",o),i._prevClass=o)}}function Vc(t,e,i){var n=QA;return function r(){null!==e.apply(null,arguments)&&Fc(t,r,i,n)}}function _c(t,e,i,n){if(Iz){var r=PA,o=e;e=o._wrapper=function(t){if(t.target===t.currentTarget||t.timeStamp>=r||t.timeStamp<=0||t.target.ownerDocument!==document)return o.apply(this,arguments)}}QA.addEventListener(t,e,ML?{capture:i,passive:n}:i)}function Fc(t,e,i,n){(n||QA).removeEventListener(t,e._wrapper||e,i)}function Yc(t,e){if(!bl(t.data.on)||!bl(e.data.on)){var i=e.data.on||{},n=t.data.on||{};QA=e.elm,function(t){if(Sl(t[Sz])){var e=yL?"change":"input";t[e]=[].concat(t[Sz],t[e]||[]),delete t[Sz]}Sl(t[wz])&&(t.change=[].concat(t[wz],t.change||[]),delete t[wz])}(i),Mh(i,n,_c,Fc,Vc,e.context),QA=void 0}}function Wc(t,e){if(!bl(t.data.domProps)||!bl(e.data.domProps)){var i,n,r=e.elm,o=t.data.domProps||{},s=e.data.domProps||{};Sl(s.__ob__)&&(s=e.data.domProps=Pl({},s));for(i in o)i in s||(r[i]="");for(i in s){if(n=s[i],"textContent"===i||"innerHTML"===i){if(e.children&&(e.children.length=0),n===o[i])continue;1===r.childNodes.length&&r.removeChild(r.childNodes[0])}if("value"===i&&"PROGRESS"!==r.tagName){r._value=n;var a=bl(n)?"":String(n);(function(t,e){return!t.composing&&("OPTION"===t.tagName||function(t,e){var i=!0;try{i=document.activeElement!==t}catch(t){}return i&&t.value!==e}(t,e)||function(t,e){var i=t.value,n=t._vModifiers;if(Sl(n)){if(n.number)return Ol(i)!==Ol(e);if(n.trim)return i.trim()!==e.trim()}return i!==e}(t,e))})(r,a)&&(r.value=a)}else if("innerHTML"===i&&az(r.tagName)&&bl(r.innerHTML)){(XA=XA||document.createElement("div")).innerHTML="<svg>"+n+"</svg>";for(var l=XA.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;l.firstChild;)r.appendChild(l.firstChild)}else if(n!==o[i])try{r[i]=n}catch(t){}}}}function Qc(t){var e=Xc(t.style);return t.staticStyle?Pl(t.staticStyle,e):e}function Xc(t){return Array.isArray(t)?Rl(t):"string"==typeof t?Cz(t):t}function qc(t,e){var i=e.data,n=t.data;if(!(bl(i.staticStyle)&&bl(i.style)&&bl(n.staticStyle)&&bl(n.style))){var r,o,s=e.elm,a=n.staticStyle,l=n.normalizedStyle||n.style||{},h=a||l,c=Xc(e.data.style)||{};e.data.normalizedStyle=Sl(c.__ob__)?Pl({},c):c;var d=function(t,e){var i,n={};if(e)for(var r=t;r.componentInstance;)(r=r.componentInstance._vnode)&&r.data&&(i=Qc(r.data))&&Pl(n,i);(i=Qc(t.data))&&Pl(n,i);for(var o=t;o=o.parent;)o.data&&(i=Qc(o.data))&&Pl(n,i);return n}(e,!0);for(o in h)bl(d[o])&&Dz(s,o,"");for(o in d)(r=d[o])!==h[o]&&Dz(s,o,null==r?"":r)}}function Gc(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(Az).forEach(function(e){return t.classList.add(e)}):t.classList.add(e);else{var i=" "+(t.getAttribute("class")||"")+" ";i.indexOf(" "+e+" ")<0&&t.setAttribute("class",(i+e).trim())}}function Zc(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(Az).forEach(function(e){return t.classList.remove(e)}):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{for(var i=" "+(t.getAttribute("class")||"")+" ",n=" "+e+" ";i.indexOf(n)>=0;)i=i.replace(n," ");(i=i.trim())?t.setAttribute("class",i):t.removeAttribute("class")}}function $c(t){if(t){if("object"==typeof t){var e={};return!1!==t.css&&Pl(e,zz(t.name||"v")),Pl(e,t),e}return"string"==typeof t?zz(t):void 0}}function Kc(t){Vz(function(){Vz(t)})}function Jc(t,e){var i=t._transitionClasses||(t._transitionClasses=[]);i.indexOf(e)<0&&(i.push(e),Gc(t,e))}function td(t,e){t._transitionClasses&&Al(t._transitionClasses,e),Zc(t,e)}function ed(t,e,i){var n=id(t,e),r=n.type,o=n.timeout,s=n.propCount;if(!r)return i();var a=r===jz?Bz:Uz,l=0,h=function(){t.removeEventListener(a,c),i()},c=function(e){e.target===t&&++l>=s&&h()};setTimeout(function(){l<s&&h()},o+1),t.addEventListener(a,c)}function id(t,e){var i,n=window.getComputedStyle(t),r=(n[Rz+"Delay"]||"").split(", "),o=(n[Rz+"Duration"]||"").split(", "),s=nd(r,o),a=(n[Hz+"Delay"]||"").split(", "),l=(n[Hz+"Duration"]||"").split(", "),h=nd(a,l),c=0,d=0;e===jz?s>0&&(i=jz,c=s,d=o.length):e===Pz?h>0&&(i=Pz,c=h,d=l.length):d=(i=(c=Math.max(s,h))>0?s>h?jz:Pz:null)?i===jz?o.length:l.length:0;return{type:i,timeout:c,propCount:d,hasTransform:i===jz&&_z.test(n[Rz+"Property"])}}function nd(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max.apply(null,e.map(function(e,i){return rd(e)+rd(t[i])}))}function rd(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function od(t,e){var i=t.elm;Sl(i._leaveCb)&&(i._leaveCb.cancelled=!0,i._leaveCb());var n=$c(t.data.transition);if(!bl(n)&&!Sl(i._enterCb)&&1===i.nodeType){for(var r=n.css,o=n.type,s=n.enterClass,a=n.enterToClass,l=n.enterActiveClass,h=n.appearClass,c=n.appearToClass,d=n.appearActiveClass,p=n.beforeEnter,u=n.enter,g=n.afterEnter,m=n.enterCancelled,f=n.beforeAppear,v=n.appear,y=n.afterAppear,b=n.appearCancelled,S=n.duration,w=NA,I=NA.$vnode;I&&I.parent;)w=I.context,I=I.parent;var x=!w._isMounted||!t.isRootInsert;if(!x||v||""===v){var M=x&&h?h:s,C=x&&d?d:l,N=x&&c?c:a,E=x?f||p:p,D=x&&"function"==typeof v?v:u,T=x?y||g:g,O=x?b||m:m,L=Ol(xl(S)?S.enter:S);"production"!==process.env.NODE_ENV&&null!=L&&ad(L,"enter",t);var A=!1!==r&&!bL,z=hd(D),k=i._enterCb=Vl(function(){A&&(td(i,N),td(i,C)),k.cancelled?(A&&td(i,M),O&&O(i)):T&&T(i),i._enterCb=null});t.data.show||Ch(t,"insert",function(){var e=i.parentNode,n=e&&e._pending&&e._pending[t.key];n&&n.tag===t.tag&&n.elm._leaveCb&&n.elm._leaveCb(),D&&D(i,k)}),E&&E(i),A&&(Jc(i,M),Jc(i,C),Kc(function(){td(i,M),k.cancelled||(Jc(i,N),z||(ld(L)?setTimeout(k,L):ed(i,o,k)))})),t.data.show&&(e&&e(),D&&D(i,k)),A||z||k()}}}function sd(t,e){function i(){b.cancelled||(!t.data.show&&n.parentNode&&((n.parentNode._pending||(n.parentNode._pending={}))[t.key]=t),c&&c(n),f&&(Jc(n,a),Jc(n,h),Kc(function(){td(n,a),b.cancelled||(Jc(n,l),v||(ld(y)?setTimeout(b,y):ed(n,s,b)))})),d&&d(n,b),f||v||b())}var n=t.elm;Sl(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var r=$c(t.data.transition);if(bl(r)||1!==n.nodeType)return e();if(!Sl(n._leaveCb)){var o=r.css,s=r.type,a=r.leaveClass,l=r.leaveToClass,h=r.leaveActiveClass,c=r.beforeLeave,d=r.leave,p=r.afterLeave,u=r.leaveCancelled,g=r.delayLeave,m=r.duration,f=!1!==o&&!bL,v=hd(d),y=Ol(xl(m)?m.leave:m);"production"!==process.env.NODE_ENV&&Sl(y)&&ad(y,"leave",t);var b=n._leaveCb=Vl(function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[t.key]=null),f&&(td(n,l),td(n,h)),b.cancelled?(f&&td(n,a),u&&u(n)):(e(),p&&p(n)),n._leaveCb=null});g?g(i):i()}}function ad(t,e,i){"number"!=typeof t?LL("<transition> explicit "+e+" duration is not a valid number - got "+JSON.stringify(t)+".",i.context):isNaN(t)&&LL("<transition> explicit "+e+" duration is NaN - the duration expression might be incorrect.",i.context)}function ld(t){return"number"==typeof t&&!isNaN(t)}function hd(t){if(bl(t))return!1;var e=t.fns;return Sl(e)?hd(Array.isArray(e)?e[0]:e):(t._length||t.length)>1}function cd(t,e){!0!==e.data.show&&od(e)}function dd(t,e,i){pd(t,e,i),(yL||SL)&&setTimeout(function(){pd(t,e,i)},0)}function pd(t,e,i){var n=e.value,r=t.multiple;if(!r||Array.isArray(n)){for(var o,s,a=0,l=t.options.length;a<l;a++)if(s=t.options[a],r)o=Ul(n,gd(s))>-1,s.selected!==o&&(s.selected=o);else if(Hl(gd(s),n))return void(t.selectedIndex!==a&&(t.selectedIndex=a));r||(t.selectedIndex=-1)}else"production"!==process.env.NODE_ENV&&LL('<select multiple v-model="'+e.expression+'"> expects an Array value for its binding, but got '+Object.prototype.toString.call(n).slice(8,-1),i)}function ud(t,e){return e.every(function(e){return!Hl(e,t)})}function gd(t){return"_value"in t?t._value:t.value}function md(t){t.target.composing=!0}function fd(t){t.target.composing&&(t.target.composing=!1,vd(t.target,"input"))}function vd(t,e){var i=document.createEvent("HTMLEvents");i.initEvent(e,!0,!0),t.dispatchEvent(i)}function yd(t){return!t.componentInstance||t.data&&t.data.transition?t:yd(t.componentInstance._vnode)}function bd(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?bd(nc(e.children)):t}function Sd(t){var e={},i=t.$options;for(var n in i.propsData)e[n]=t[n];var r=i._parentListeners;for(var o in r)e[tL(o)]=r[o];return e}function wd(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}function Id(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function xd(t){t.data.newPos=t.elm.getBoundingClientRect()}function Md(t){var e=t.data.pos,i=t.data.newPos,n=e.left-i.left,r=e.top-i.top;if(n||r){t.data.moved=!0;var o=t.elm.style;o.transform=o.WebkitTransform="translate("+n+"px,"+r+"px)",o.transitionDuration="0s"}}function Cd(t){if(void 0===t&&(t={}),t.props)for(var e=function(e){(t.newprops||(t.newprops={}))[""+e]={},(t.watch||(t.watch={}))[""+e]=function(i){this.ej2Instances[""+e]=i,this.dataBind&&"DateRangePickerComponent"!==t.name&&this.dataBind()}},i=0,n=t.props;i<n.length;i++){e(n[i])}return[t.newprops,t.watch]}function Nd(t,e,i){var n=e||(i&&i.vueInstance?i.vueInstance:null);if(n){for(var r=["components","mixins","provides"],o=0;o<r.length;o++){var s=r[o];t._context[s]&&n.$.appContext[s]&&(t._context[s]=n.$.appContext[s])}var a={},l=function(t){t.$&&t.$.parent&&l(t.$.parent),t.provides&&Object.keys(t.provides).length>0&&(a=rk({},a,t.provides))};l(n),t._context.provides&&(t._context.provides=rk({},t._context.provides,a)),t._context.config.globalProperties&&n.$.appContext.config.globalProperties&&(t._context.config.globalProperties=n.$.appContext.config.globalProperties)}}function Ed(t,e){if(t){var i=t.$slots,n=t.$scopedSlots,r=t.scopedSlots,o=t.children;if(n&&n[""+e])return n;if(i&&i.default)for(var s=i.default,a=0;a<s.length;a++){if(l=Ed(Dd(s[parseInt(a.toString(),10)]),e))return l}else{if(r&&r[""+e])return r;if(o)for(a=0;a<o.length;a++){var l;if(l=Ed(Dd(o[parseInt(a.toString(),10)]),e))return l}}}}function Dd(t){var e=t.componentOptions&&t.componentOptions.children?t.componentOptions:t.data||"e-markersettings"!==t.tag&&"e-markersetting"!==t.tag?t.data:t;return t.componentInstance?t.componentInstance:e}function Td(t,e){if(t&&t[""+e])return t;if(t&&t.default)for(var i=t.default(),n=0;n<i.length;n++){var r=Td(i[parseInt(n.toString(),10)].children,e);if(r)return r}}window.process={env:{NODE_ENV:"production"}};var Od,Ld="ej2_instances",Ad=0,zd=!1,kd="undefined"!=typeof window?window:{},jd={latn:{_digits:"0123456789",_type:"numeric"}},Pd={decimal:".",group:",",percentSign:"%",plusSign:"+",minusSign:"-",infinity:"∞",nan:"NaN",exponential:"E"},Rd=[0,1,2,3,4,5,6,7,8,9],Bd=function(){function t(){}return t.getMainObject=function(t,e){return n(f()?e:"main."+e,t)},t.getNumberingSystem=function(t){return n("supplemental.numberingSystems",t)||this.numberingSystems},t.reverseObject=function(t,e){for(var i={},n=0,r=e||Object.keys(t);n<r.length;n++){var o=r[n];i.hasOwnProperty(t[o])||(i[t[o]]=o)}return i},t.getSymbolRegex=function(t){var e=t.map(function(t){return t.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")}).join("|");return new RegExp(e,"g")},t.getSymbolMatch=function(t){for(var e={},i=0,n=Object.keys(Pd);i<n.length;i++){var r=n[i];e[t[r]]=Pd[r]}return e},t.constructRegex=function(t){for(var e=t.length,i="",n=0;n<e;n++)i+=n!==e-1?t[parseInt(n.toString(),10)]+"|":t[parseInt(n.toString(),10)];return i},t.convertValueParts=function(t,e,i){return t.replace(e,function(t){return i[t]})},t.getDefaultNumberingSystem=function(t){var e={};return e.obj=n("numbers",t),e.nSystem=n("defaultNumberingSystem",e.obj),e},t.getCurrentNumericOptions=function(t,e,i,r){var o={},s=this.getDefaultNumberingSystem(t);if(!c(s.nSystem)||r){var a=r?n("obj.mapperDigits",s):n(s.nSystem+"._digits",e);if(!c(a)){o.numericPair=this.reverseObject(a,Rd);var l=RegExp;o.numberParseRegex=new l(this.constructRegex(a),"g"),o.numericRegex="["+a[0]+"-"+a[9]+"]",i&&(o.numericRegex=a[0]+"-"+a[9],o.symbolNumberSystem=n(r?"numberSymbols":"symbols-numberSystem-"+s.nSystem,s.obj),o.symbolMatch=this.getSymbolMatch(o.symbolNumberSystem),o.numberSystem=s.nSystem)}}return o},t.getNumberMapper=function(t,e,i){var r={mapper:{}},o=this.getDefaultNumberingSystem(t);if(!c(o.nSystem)){r.numberSystem=o.nSystem,r.numberSymbols=n("symbols-numberSystem-"+o.nSystem,o.obj),r.timeSeparator=n("timeSeparator",r.numberSymbols);var s=n(o.nSystem+"._digits",e);if(!c(s))for(var a=0,l=Rd;a<l.length;a++){var h=l[a];r.mapper[h]=s[h]}}return r},t.nPair="numericPair",t.nRegex="numericRegex",t.numberingSystems=jd,t}(),Hd={DJF:"Fdj",ERN:"Nfk",ETB:"Br",NAD:"$",ZAR:"R",XAF:"FCFA",GHS:"GH₵",XDR:"XDR",AED:"د.إ.‏",BHD:"د.ب.‏",DZD:"د.ج.‏",EGP:"ج.م.‏",ILS:"₪",IQD:"د.ع.‏",JOD:"د.ا.‏",KMF:"CF",KWD:"د.ك.‏",LBP:"ل.ل.‏",LYD:"د.ل.‏",MAD:"د.م.‏",MRU:"أ.م.",OMR:"ر.ع.‏",QAR:"ر.ق.‏",SAR:"ر.س.‏",SDG:"ج.س.",SOS:"S",SSP:"£",SYP:"ل.س.‏",TND:"د.ت.‏",YER:"ر.ي.‏",CLP:"$",INR:"₹",TZS:"TSh",EUR:"€",AZN:"₼",RUB:"₽",BYN:"Br",ZMW:"K",BGN:"лв.",NGN:"₦",XOF:"CFA",BDT:"৳",CNY:"¥",BAM:"КМ",UGX:"USh",USD:"$",CZK:"Kč",GBP:"£",DKK:"kr.",KES:"Ksh",CHF:"CHF",MVR:"ރ.",BTN:"Nu.",XCD:"EC$",AUD:"$",BBD:"$",BIF:"FBu",BMD:"$",BSD:"$",BWP:"P",BZD:"$",CAD:"$",NZD:"$",FJD:"$",FKP:"£",GIP:"£",GMD:"D",GYD:"$",HKD:"$",IDR:"Rp",JMD:"$",KYD:"$",LRD:"$",MGA:"Ar",MOP:"MOP$",MUR:"Rs",MWK:"MK",MYR:"RM",PGK:"K",PHP:"₱",PKR:"Rs",RWF:"RF",SBD:"$",SCR:"SR",SEK:"kr",SGD:"$",SHP:"£",SLL:"Le",ANG:"NAf.",SZL:"E",TOP:"T$",TTD:"$",VUV:"VT",WST:"WS$",ARS:"$",BOB:"Bs",BRL:"R$",COP:"$",CRC:"₡",CUP:"$",DOP:"$",GTQ:"Q",HNL:"L",MXN:"$",NIO:"C$",PAB:"B/.",PEN:"S/",PYG:"₲",UYU:"$",VES:"Bs.S",IRR:"ريال",GNF:"FG",CDF:"FC",HTG:"G",XPF:"FCFP",HRK:"kn",HUF:"Ft",AMD:"֏",ISK:"kr",JPY:"¥",GEL:"₾",CVE:"​",KZT:"₸",KHR:"៛",KPW:"₩",KRW:"₩",KGS:"сом",AOA:"Kz",LAK:"₭",MZN:"MTn",MKD:"ден",MNT:"₮",BND:"$",MMK:"K",NOK:"kr",NPR:"रु",AWG:"Afl.",SRD:"$",PLN:"zł",AFN:"؋",STN:"Db",MDL:"L",RON:"lei",UAH:"₴",LKR:"රු.",ALL:"Lekë",RSD:"дин.",TJS:"смн",THB:"฿",TMT:"m.",TRY:"₺",UZS:"сўм",VND:"₫",TWD:"NT$"};!function(t){var e=[28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990];t.getHijriDate=function(t){var i=t.getDate(),n=t.getMonth(),r=t.getFullYear(),o=n+1,s=r;o<3&&(s-=1,o+=12);var a=Math.floor(s/100),l=a-Math.floor(a/4)-2,h=Math.floor(365.25*(s+4716))+Math.floor(30.6001*(o+1))+i-l-1524,c=h+(l=(a=Math.floor((h-1867216.25)/36524.25))-Math.floor(a/4)+1)+1524,d=Math.floor((c-122.1)/365.25),p=Math.floor(365.25*d),u=Math.floor((c-p)/30.6001);i=c-p-Math.floor(30.6001*u),(n=Math.floor((c-p)/20.6001))>13&&(d+=1,n-=12),n-=1,r=d-4716;var g=h-24e5,m=h-1948084,f=Math.floor(m/10631);m-=10631*f;var v=Math.floor((m-.1335)/(10631/30)),y=30*f+v;m-=Math.floor(v*(10631/30)+.1335);var b=Math.floor((m+28.5001)/29.5);13===b&&(b=12);for(var S=m-Math.floor(29.5001*b-29),w=0;w<e.length&&!(e[parseInt(w.toString(),10)]>g);w++);var I=w+16260,x=Math.floor((I-1)/12),M=x+1,C=I-12*x,N=g-e[w-1]+1;return(N+"").length>2&&(N=S,C=b,M=y),{year:M,month:C,date:N}},t.toGregorian=function(t,i,n){var r=n+e[12*(t-1)+1+(i-1)-16260-1]-1+24e5,o=Math.floor(r+.5),s=Math.floor((o-1867216.25)/36524.25),a=1524+(s=o+1+s-Math.floor(s/4)),l=Math.floor((a-122.1)/365.25),h=Math.floor(365.25*l),c=Math.floor((a-h)/30.6001),d=a-h-Math.floor(30.6001*c),p=c-(c>13.5?13:1),u=l-(p>2.5?4716:4715);return u<=0&&p--,new Date(u+"/"+p+"/"+d)}}(Od||(Od={}));var Ud,Vd=/\/MMMMM|MMMM|MMM|a|LLLL|LLL|EEEEE|EEEE|E|K|cccc|ccc|WW|W|G+|z+/gi,_d=["sun","mon","tue","wed","thu","fri","sat"],Fd={m:"getMinutes",h:"getHours",H:"getHours",s:"getSeconds",d:"getDate",f:"getMilliseconds"},Yd={M:"month",d:"day",E:"weekday",c:"weekday",y:"year",m:"minute",h:"hour",H:"hour",s:"second",L:"month",a:"designator",z:"timeZone",Z:"timeZone",G:"era",f:"milliseconds"},Wd=function(){function t(){}return t.dateFormat=function(t,e,i){var r=this,o=Ud.getDependables(i,t,e.calendar),s=n("parserObject.numbers",o),a=o.dateObject,h={isIslamic:Ud.islamicRegex.test(e.calendar)};f()&&e.isServerRendered&&(e=Ud.compareBlazorDateFormats(e,t));var d=e.format||Ud.getResultantPattern(e.skeleton,o.dateObject,e.type,!1,f()?t:"");if(h.dateSeperator=f()?n("dateSeperator",a):Ud.getDateSeparator(o.dateObject),c(d))g("Format options or type given must be invalid");else{d=Ud.ConvertDateToWeekFormat(d),f()&&(d=d.replace(/tt/,"a")),h.pattern=d,h.numMapper=f()?l({},s):Bd.getNumberMapper(o.parserObject,Bd.getNumberingSystem(i));for(var p=0,u=d.match(Vd)||[];p<u.length;p++){var m=u[p],v=m.length,y=m[0];switch("K"===y&&(y="h"),y){case"E":case"c":f()?h.weekday=n("days."+Ud.monthIndex[v],a):h.weekday=o.dateObject[Ud.days]["stand-alone"][Ud.monthIndex[v]];break;case"M":case"L":f()?h.month=n("months."+Ud.monthIndex[v],a):h.month=o.dateObject[Ud.month]["stand-alone"][Ud.monthIndex[v]];break;case"a":h.designator=f()?n("dayPeriods",a):n("dayPeriods.format.wide",a);break;case"G":var b=v<=3?"eraAbbr":4===v?"eraNames":"eraNarrow";h.era=f()?n("eras",a):n("eras."+b,o.dateObject);break;case"z":h.timeZone=n("dates.timeZoneNames",o.parserObject)}}}return function(t){return isNaN(t.getDate())?null:r.intDateFormatter(t,h)}},t.intDateFormatter=function(t,e){for(var i="",n=e.pattern.match(Ud.dateParseRegex),r=this.getCurrentDateValue(t,e.isIslamic),o=0,s=n;o<s.length;o++){var a=s[o],l=a.length,c=a[0];"K"===c&&(c="h");var d=void 0,p="",u=void 0,g=void 0,m="";switch(c){case"M":case"L":d=r.month,l>2?i+=e.month[d]:u=!0;break;case"E":case"c":i+=e.weekday[_d[t.getDay()]];break;case"H":case"h":case"m":case"s":case"d":case"f":if(u=!0,"d"===c)d=r.date;else if("f"===c){u=!1,g=!0;var f=(p=(p=t[Fd[c]]().toString()).substring(0,l)).length;if(l!==f){if(l>3)continue;for(var v=0;v<l-f;v++)p="0"+p.toString()}m+=p}else d=t[Fd[c]]();"h"===c&&(d=d%12||12);break;case"y":g=!0,m+=r.year,2===l&&(m=m.substr(m.length-2));break;case"a":var y=t.getHours()<12?"am":"pm";i+=e.designator[y];break;case"G":var b=t.getFullYear()<0?0:1,S=e.era[b];h(S)&&(S=e.era[b?0:1]),i+=S||"";break;case"'":i+="''"===a?"'":a.replace(/'/g,"");break;case"z":var w=t.getTimezoneOffset(),I=l<4?"+H;-H":e.timeZone.hourFormat;I=I.replace(/:/g,e.numMapper.timeSeparator),0===w?i+=e.timeZone.gmtZeroFormat:(g=!0,m=this.getTimeZoneValue(w,I)),m=e.timeZone.gmtFormat.replace(/\{0\}/,m);break;case":":i+=e.numMapper.numberSymbols.timeSeparator;break;case"/":i+=e.dateSeperator;break;case"W":u=!0,d=Ud.getWeekOfYear(t);break;default:i+=a}u&&(g=!0,m=this.checkTwodigitNumber(d,l)),g&&(i+=Bd.convertValueParts(m,Ud.latnParseRegex,e.numMapper.mapper))}return i},t.getCurrentDateValue=function(t,e){return e?Od.getHijriDate(t):{year:t.getFullYear(),month:t.getMonth()+1,date:t.getDate()}},t.checkTwodigitNumber=function(t,e){var i=t+"";return 2===e&&2!==i.length?"0"+i:i},t.getTimeZoneValue=function(t,e){var i=this,n=e.split(";")[t>0?1:0],r=Math.abs(t);return n=n.replace(/HH?|mm/g,function(t){var e=t.length,n=-1!==t.indexOf("H");return i.checkTwodigitNumber(Math.floor(n?r/60:r%60),e)})},t}(),Qd={ms:"minimumSignificantDigits",ls:"maximumSignificantDigits",mf:"minimumFractionDigits",lf:"maximumFractionDigits"},Xd=["infinity","nan","group","decimal","exponential"],qd=function(){function t(){}return t.numberFormatter=function(t,e,i){var r,o=this,s=l({},e),a={},h={},d=Ud.getDependables(i,t,"",!0),p=d.numericObject;h.numberMapper=f()?l({},p):Bd.getNumberMapper(d.parserObject,Bd.getNumberingSystem(i),!0),h.currencySymbol=f()?n("currencySymbol",p):Ud.getCurrencySymbol(d.numericObject,s.currency||ap,e.altSymbol),h.percentSymbol=f()?n("numberSymbols.percentSign",p):h.numberMapper.numberSymbols.percentSign,h.minusSymbol=f()?n("numberSymbols.minusSign",p):h.numberMapper.numberSymbols.minusSign;var u=h.numberMapper.numberSymbols;if(e.format&&!Ud.formatRegex.test(e.format))a=Ud.customFormat(e.format,h,d.numericObject);else{if(l(s,Ud.getProperNumericSkeleton(e.format||"N")),s.isCurrency="currency"===s.type,s.isPercent="percent"===s.type,f()||(r=Ud.getSymbolPattern(s.type,h.numberMapper.numberSystem,d.numericObject,s.isAccount)),s.groupOne=this.checkValueRange(s.maximumSignificantDigits,s.minimumSignificantDigits,!0),this.checkValueRange(s.maximumFractionDigits,s.minimumFractionDigits,!1,!0),c(s.fractionDigits)||(s.minimumFractionDigits=s.maximumFractionDigits=s.fractionDigits),c(s.useGrouping)&&(s.useGrouping=!0),s.isCurrency&&!f()&&(r=r.replace(/\u00A4/g,Ud.defaultCurrency)),f())a.nData=l({},{},n(s.type+"nData",p)),a.pData=l({},{},n(s.type+"pData",p)),"currency"===s.type&&e.currency&&Ud.replaceBlazorCurrency([a.pData,a.nData],h.currencySymbol,e.currency);else{var g=r.split(";");a.nData=Ud.getFormatData(g[1]||"-"+g[0],!0,h.currencySymbol),a.pData=Ud.getFormatData(g[0],!1,h.currencySymbol),s.useGrouping&&(s.groupSeparator=u[Xd[2]],s.groupData=this.getGroupingDetails(g[0]))}if(c(s.minimumFractionDigits)&&(s.minimumFractionDigits=a.nData.minimumFraction),c(s.maximumFractionDigits)){var m=a.nData.maximumFraction;s.maximumFractionDigits=c(m)&&s.isPercent?0:m}var v=s.minimumFractionDigits,y=s.maximumFractionDigits;c(v)||c(y)||v>y&&(s.maximumFractionDigits=v)}return l(a.nData,s),l(a.pData,s),function(t){return isNaN(t)?u[Xd[1]]:isFinite(t)?o.intNumberFormatter(t,a,h):u[Xd[0]]}},t.getGroupingDetails=function(t){var e={},i=t.match(Ud.negativeDataRegex);if(i&&i[4]){var n=i[4],r=n.lastIndexOf(",");if(-1!==r){var o=n.split(".")[0];e.primary=o.length-r-1;var s=n.lastIndexOf(",",r-1);-1!==s&&(e.secondary=r-1-s)}}return e},t.checkValueRange=function(t,e,i,n){var r=n?"f":"s",o=0,s=Qd["l"+r],a=Qd["m"+r];if(c(t)||(this.checkRange(t,s,n),o++),c(e)||(this.checkRange(e,a,n),o++),2===o){if(!(t<e))return!0;g(a+"specified must be less than the"+s)}else i&&1===o&&g("Both"+a+"and"+a+"must be present");return!1},t.checkRange=function(t,e,i){var n=i?[0,20]:[1,21];(t<n[0]||t>n[1])&&g(e+"value must be within the range"+n[0]+"to"+n[1])},t.intNumberFormatter=function(t,e,i){var n;if(!c(e.nData.type)){t<0?(t*=-1,n=e.nData):n=0===t?e.zeroData||e.pData:e.pData;var r="";if(n.isPercent&&(t*=100),n.groupOne)r=this.processSignificantDigits(t,n.minimumSignificantDigits,n.maximumSignificantDigits);else if(r=this.processFraction(t,n.minimumFractionDigits,n.maximumFractionDigits),n.minimumIntegerDigits&&(r=this.processMinimumIntegers(r,n.minimumIntegerDigits)),i.isCustomFormat&&n.minimumFractionDigits<n.maximumFractionDigits&&/\d+\.\d+/.test(r)){for(var o=r.split("."),s=o[1],a=s.length-1;a>=0&&("0"===s[""+a]&&a>=n.minimumFractionDigits);a--)s=s.slice(0,a);r=o[0]+"."+s}return"scientific"===n.type&&(r=(r=t.toExponential(n.maximumFractionDigits)).replace("e",i.numberMapper.numberSymbols[Xd[4]])),r=r.replace(".",i.numberMapper.numberSymbols[Xd[3]]),r="#,###,,;(#,###,,)"===n.format?this.customPivotFormat(parseInt(r)):r,n.useGrouping&&(r=this.groupNumbers(r,n.groupData.primary,n.groupSeparator||",",i.numberMapper.numberSymbols[Xd[3]]||".",n.groupData.secondary)),r=Bd.convertValueParts(r,Ud.latnParseRegex,i.numberMapper.mapper),"N/A"===n.nlead?n.nlead:n.nlead+r+n.nend}},t.processSignificantDigits=function(t,e,i){var n=t+"";return n.length<e?t.toPrecision(e):(n=t.toPrecision(i),+n+"")},t.groupNumbers=function(t,e,i,n,r){for(var o=!h(r)&&0!==r,s=t.split(n),a=s[0],l=a.length,c="";l>e;)c=a.slice(l-e,l)+(c.length?i+c:""),l-=e,o&&(e=r,o=!1);return s[0]=a.slice(0,l)+(c.length?i:"")+c,s.join(n)},t.processFraction=function(t,e,i){var n=(t+"").split(".")[1],r=n?n.length:0;if(e&&r<e){var o="";if(0!==r){o+=t;for(var s=0;s<e-r;s++)o+="0";return o}return o=t.toFixed(e),t.toFixed(e)}return!h(i)&&(r>i||0===i)?t.toFixed(i):t+""},t.processMinimumIntegers=function(t,e){var i=t.split("."),n=i[0],r=n.length;if(r<e){for(var o=0;o<e-r;o++)n="0"+n;i[0]=n}return i.join(".")},t.customPivotFormat=function(t){if(t>=5e5){var e=(t/=1e6).toString().split("."),i=(e[0],e[1]);return i&&+i.substring(0,1)>=5?Math.ceil(t).toString():Math.floor(t).toString()}return""},t}(),Gd=/^[0-9]*$/,Zd={minute:"setMinutes",hour:"setHours",second:"setSeconds",day:"setDate",month:"setMonth",milliseconds:"setMilliseconds"},$d=function(){function t(){}return t.dateParser=function(t,e,i){var r=this,o=Ud.getDependables(i,t,e.calendar),s=Bd.getCurrentNumericOptions(o.parserObject,Bd.getNumberingSystem(i),!1,f()),a={};f()&&e.isServerRendered&&(e=Ud.compareBlazorDateFormats(e,t));var l,d=e.format||Ud.getResultantPattern(e.skeleton,o.dateObject,e.type,!1,f()?t:""),p="";if(c(d))g("Format options or type given must be invalid");else{d=Ud.ConvertDateToWeekFormat(d),a={isIslamic:Ud.islamicRegex.test(e.calendar),pattern:d,evalposition:{},culture:t};for(var u=d.match(Ud.dateParseRegex)||[],m=u.length,v=0,y=0,b=!1,S=s.numericRegex,w=f()?o.parserObject.numbers:Bd.getNumberMapper(o.parserObject,Bd.getNumberingSystem(i)),I=0;I<m;I++){var x=u[parseInt(I.toString(),10)],M=x.length,C="K"===x[0]?"h":x[0],N=void 0,E=void 0,D=Yd[C],T=2===M?"":"?";switch(b&&(v=y,b=!1),C){case"E":case"c":var O=void 0;O=f()?n("days."+Ud.monthIndex[M],o.dateObject):o.dateObject[Ud.days]["stand-alone"][Ud.monthIndex[M]];var L=Bd.reverseObject(O);p+="("+Object.keys(L).join("|")+")";break;case"M":case"L":case"d":case"m":case"s":case"h":case"H":case"f":if(E=!0,("M"===C||"L"===C)&&M>2){var A=void 0;A=f()?n("months."+Ud.monthIndex[M],o.dateObject):o.dateObject.months["stand-alone"][Ud.monthIndex[M]],a[D]=Bd.reverseObject(A),p+="("+Object.keys(a[D]).join("|")+")"}else if("f"===C){if(M>3)continue;N=!0,p+="("+S+S+"?"+S+"?)"}else N=!0,p+="("+S+S+T+")";"h"===C&&(a.hour12=!0);break;case"W":p+="("+S+(1===M?"?":"")+S+")";break;case"y":E=N=!0,p+=2===M?"("+S+S+")":"("+S+"{"+M+",})";break;case"a":E=!0;var z=f()?n("dayPeriods",o.dateObject):n("dayPeriods.format.wide",o.dateObject);a[D]=Bd.reverseObject(z),p+="("+Object.keys(a[D]).join("|")+")";break;case"G":E=!0;var k=M<=3?"eraAbbr":4===M?"eraNames":"eraNarrow";a[D]=Bd.reverseObject(f()?n("eras",o.dateObject):n("eras."+k,o.dateObject)),p+="("+Object.keys(a[D]).join("|")+"?)";break;case"z":E=0!==(new Date).getTimezoneOffset(),a[D]=n("dates.timeZoneNames",o.parserObject);var j=a[D],P=(l=M<4)?"+H;-H":j.hourFormat;P=P.replace(/:/g,w.timeSeparator),p+="("+this.parseTimeZoneRegx(P,j,S)+")?",b=!0,y=l?6:12;break;case"'":p+="("+x.replace(/'/g,"")+")?";break;default:p+="([\\D])"}if(E&&(a.evalposition[""+D]={isNumber:N,pos:I+1+v,hourOnly:l}),I===m-1&&!h(p)){var R=RegExp;a.parserRegex=new R("^"+p+"$","i")}}}return function(t){var e=r.internalDateParse(t,a,s);if(h(e)||!Object.keys(e).length)return null;if(a.isIslamic){var i={},n=e.year,o=e.day,l=e.month,c=n?n+"":"",d=2===c.length;n&&l&&o&&!d||(i=Od.getHijriDate(new Date)),d&&(n=parseInt((i.year+"").slice(0,2)+c,10));var p=Od.toGregorian(n||i.year,l||i.month,o||i.date);e.year=p.getFullYear(),e.month=p.getMonth()+1,e.day=p.getDate()}return r.getDateObject(e)}},t.getDateObject=function(t,e){var i=e||new Date;i.setMilliseconds(0);var n=t.year,r=t.designator,o=t.timeZone;if(!c(n)){if((n+"").length<=2){n+=100*Math.floor(i.getFullYear()/100)}i.setFullYear(n)}for(var s=0,a=["hour","minute","second","milliseconds","month","day"];s<a.length;s++){var l=a[s],h=t[l];if(c(h)&&"day"===l&&i.setDate(1),!c(h))if("month"===l){if((h-=1)<0||h>11)return new Date("invalid");var d=i.getDate();i.setDate(1),i[Zd[l]](h);var p=new Date(i.getFullYear(),h+1,0).getDate();i.setDate(d<p?d:p)}else{if("day"===l){var u=new Date(i.getFullYear(),i.getMonth()+1,0).getDate();if(h<1||h>u)return null}i[Zd[l]](h)}}if(!c(r)){var g=i.getHours();"pm"===r?i.setHours(g+(12===g?0:12)):12===g&&i.setHours(0)}if(!c(o)){var m=o-i.getTimezoneOffset();0!==m&&i.setMinutes(i.getMinutes()+m)}return i},t.internalDateParse=function(t,e,i){var n=t.match(e.parserRegex),r={hour:0,minute:0,second:0};if(h(n))return null;for(var o=0,s=Object.keys(e.evalposition);o<s.length;o++){var a=s[o],l=e.evalposition[""+a],d=n[l.pos];if(l.isNumber)r[a]=this.internalNumberParser(d,i);else if("timeZone"!==a||c(d))d="month"!==a||e.isIslamic||"en"!==e.culture&&"en-GB"!==e.culture&&"en-US"!==e.culture?d:d[0].toUpperCase()+d.substring(1).toLowerCase(),r[a]=e[a][d];else{var p=l.pos,u=void 0,g=n[p+1],m=!c(g);l.hourOnly?u=60*this.getZoneValue(m,g,n[p+4],i):(u=60*this.getZoneValue(m,g,n[p+7],i),u+=this.getZoneValue(m,n[p+4],n[p+10],i)),h(u)||(r[""+a]=u)}}return e.hour12&&(r.hour12=!0),r},t.internalNumberParser=function(t,e){return t=Bd.convertValueParts(t,e.numberParseRegex,e.numericPair),Gd.test(t)?+t:null},t.parseTimeZoneRegx=function(t,e,i){var n,r,o=e.gmtFormat,s="("+i+")("+i+")";return n=t.replace("+","\\+"),n=-1!==t.indexOf("HH")?n.replace(/HH|mm/g,"("+s+")"):n.replace(/H|m/g,"("+s+"?)"),r=n.split(";").map(function(t){return o.replace("{0}",t)}),n=r.join("|")+"|"+e.gmtZeroFormat},t.getZoneValue=function(t,e,i,n){var r=t?e:i;if(!r)return 0;var o=this.internalNumberParser(r,n);return t?-o:o},t}(),Kd=new RegExp("^([^0-9]*)(([0-9,]*[0-9]+)(.[0-9]+)?)([Ee][+-]?[0-9]+)?([^0-9]*)$"),Jd=/,/g,tp=["minusSign","infinity"],ep=function(){function t(){}return t.numberParser=function(t,e,i){var r,o=this,s=Ud.getDependables(i,t,"",!0),a={custom:!0};Ud.formatRegex.test(e.format)||!e.format?(l(a,Ud.getProperNumericSkeleton(e.format||"N")),a.custom=!1,a.fractionDigits||e.maximumFractionDigits&&(a.maximumFractionDigits=e.maximumFractionDigits)):l(a,Ud.customFormat(e.format,null,null));var h=n("numbers",s.parserObject);r=Bd.getCurrentNumericOptions(s.parserObject,Bd.getNumberingSystem(i),!0,f()),a.symbolRegex=Bd.getSymbolRegex(Object.keys(r.symbolMatch)),a.infinity=r.symbolNumberSystem[tp[1]];var c;if(f())a.nData=l({},{},n(a.type+"nData",h)),a.pData=l({},{},n(a.type+"pData",h)),"currency"===a.type&&e.currency&&Ud.replaceBlazorCurrency([a.pData,a.nData],n("currencySymbol",h),e.currency);else if(c=Ud.getSymbolPattern(a.type,r.numberSystem,s.numericObject,a.isAccount)){var d=(c=c.replace(/\u00A4/g,Ud.defaultCurrency)).split(";");a.nData=Ud.getFormatData(d[1]||"-"+d[0],!0,""),a.pData=Ud.getFormatData(d[0],!0,"")}return function(t){return o.getParsedNumber(t,a,r)}},t.getParsedNumber=function(t,e,i){var n,r,o,s,a,l;if(-1!==t.indexOf(e.infinity))return 1/0;t=Bd.convertValueParts(t,e.symbolRegex,i.symbolMatch),0===(t=-1!==(t=Bd.convertValueParts(t,i.numberParseRegex,i.numericPair)).indexOf("-")?t.replace("-.","-0."):t).indexOf(".")&&(t="0"+t);var c=t.match(Kd);if(h(c))return NaN;s=c[1],o=c[2];var d=c[5];return a=c[6],n=e.custom?s===e.nData.nlead&&a===e.nData.nend:-1!==s.indexOf(e.nData.nlead)&&-1!==a.indexOf(e.nData.nend),r=n?e.nData.isPercent:e.pData.isPercent,o=o.replace(Jd,""),d&&(o+=d),l=+o,("percent"===e.type||r)&&(l/=100),(e.custom||e.fractionDigits)&&(l=parseFloat(l.toFixed(e.custom?n?e.nData.maximumFractionDigits:e.pData.maximumFractionDigits:e.fractionDigits))),e.maximumFractionDigits&&(l=this.convertMaxFracDigits(o,e,l,n)),n&&(l*=-1),l},t.convertMaxFracDigits=function(t,e,i,n){var r=t.split(".");return r[1]&&r[1].length>e.maximumFractionDigits&&(i=+i.toFixed(e.custom?n?e.nData.maximumFractionDigits:e.pData.maximumFractionDigits:e.maximumFractionDigits)),i},t}(),ip=function(){function t(t){this.ranArray=[],this.boundedEvents={},h(t)||(this.context=t)}return t.prototype.on=function(t,e,i,n){if(!h(e)){var r=i||this.context;this.notExist(t)?this.boundedEvents[""+t]=[{handler:e,context:r}]:h(n)?this.isHandlerPresent(this.boundedEvents[""+t],e)||this.boundedEvents[""+t].push({handler:e,context:r}):-1===this.ranArray.indexOf(n)&&(this.ranArray.push(n),this.boundedEvents[""+t].push({handler:e,context:r,id:n}))}},t.prototype.off=function(t,e,i){if(!this.notExist(t)){var r=n(t,this.boundedEvents);if(e){for(var o=0;o<r.length;o++)if(i){if(r[parseInt(o.toString(),10)].id===i){r.splice(o,1);var s=this.ranArray.indexOf(i);-1!==s&&this.ranArray.splice(s,1);break}}else if(e===r[parseInt(o.toString(),10)].handler){r.splice(o,1);break}}else delete this.boundedEvents[""+t]}},t.prototype.notify=function(t,e,i,r){if(this.notExist(t))i&&i.call(this,e);else{e&&(e.name=t);var o=n(t,this.boundedEvents).slice(0);if(window.Blazor)return this.blazorCallback(o,e,i,r,0);for(var s=0,a=o;s<a.length;s++){var l=a[s];l.handler.call(l.context,e)}i&&i.call(this,e)}},t.prototype.blazorCallback=function(t,e,i,n,r){var o=this,s=r===t.length-1;if(r<t.length){var a=t[parseInt(r.toString(),10)],h=a.handler.call(a.context,e);if(h&&"function"==typeof h.then){if(!i)return h;h.then(function(h){if(h="string"==typeof h&&o.isJson(h)?JSON.parse(h,o.dateReviver):h,l(e,e,h,!0),!i||!s)return o.blazorCallback(t,e,i,n,r+1);i.call(a.context,e)}).catch(function(t){n&&n.call(a.context,"string"==typeof t&&o.isJson(t)?JSON.parse(t,o.dateReviver):t)})}else{if(!i||!s)return this.blazorCallback(t,e,i,n,r+1);i.call(a.context,e)}}},t.prototype.dateReviver=function(t,e){return f&&"string"==typeof e&&null!==e.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?new Date(e):e},t.prototype.isJson=function(t){return!0},t.prototype.destroy=function(){this.boundedEvents=this.context=void 0},t.prototype.notExist=function(t){return!1===this.boundedEvents.hasOwnProperty(t)||this.boundedEvents[t].length<=0},t.prototype.isHandlerPresent=function(t,e){for(var i=0,n=t;i<n.length;i++){if(n[i].handler===e)return!0}return!1},t}(),np=new ip,rp=!1,op={},sp="en-US",ap="USD",lp=["numericObject","dateObject"],hp=function(){function t(t){t&&(this.culture=t)}return t.prototype.getDateFormat=function(t){return Wd.dateFormat(this.getCulture(),t||{type:"date",skeleton:"short"},op)},t.prototype.getNumberFormat=function(t){return t&&!t.currency&&(t.currency=ap),f()&&t&&!t.format&&(t.minimumFractionDigits=0),qd.numberFormatter(this.getCulture(),t||{},op)},t.prototype.getDateParser=function(t){return $d.dateParser(this.getCulture(),t||{skeleton:"short",type:"date"},op)},t.prototype.getNumberParser=function(t){return f()&&t&&!t.format&&(t.minimumFractionDigits=0),ep.numberParser(this.getCulture(),t||{format:"N"},op)},t.prototype.formatNumber=function(t,e){return this.getNumberFormat(e)(t)},t.prototype.formatDate=function(t,e){return this.getDateFormat(e)(t)},t.prototype.parseDate=function(t,e){return this.getDateParser(e)(t)},t.prototype.parseNumber=function(t,e){return this.getNumberParser(e)(t)},t.prototype.getDatePattern=function(t,e){return Ud.getActualDateTimeFormat(this.getCulture(),t,op,e)},t.prototype.getNumberPattern=function(t,e){return Ud.getActualNumberFormat(this.getCulture(),t,op,e)},t.prototype.getFirstDayOfWeek=function(){return Ud.getWeekData(this.getCulture(),op)},t.prototype.getCulture=function(){return this.culture||sp},t}(),cp=RegExp,dp={"en-US":{d:"M/d/y",D:"EEEE, MMMM d, y",f:"EEEE, MMMM d, y h:mm a",F:"EEEE, MMMM d, y h:mm:s a",g:"M/d/y h:mm a",G:"M/d/yyyy h:mm:ss tt",m:"MMMM d",M:"MMMM d",r:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",R:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"h:mm tt",T:"h:m:s tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",U:"dddd, MMMM d, yyyy h:mm:ss tt",y:"MMMM yyyy",Y:"MMMM yyyy"}};!function(t){function e(e,i,r,o,a){var l,h=r||"date";if(a)l=s({skeleton:e},a).format||s({skeleton:"d"},"en-US").format;else{if(-1!==t.basicPatterns.indexOf(e)){if(l=n(h+"Formats."+e,i),"dateTime"===h){var d=n("dateFormats."+e,i),p=n("timeFormats."+e,i);l=l.replace("{1}",d).replace("{0}",p)}}else l=n("dateTimeFormats.availableFormats."+e,i);c(l)&&"yMd"===e&&(l="M/d/y")}return l}function i(e,i,r,o){var s={},a=r||"gregorian";if(s.parserObject=Bd.getMainObject(e,i)||(f()?t.blazorDefaultObject:t.defaultObject),o)s.numericObject=n("numbers",s.parserObject);else{var l=f()?"dates":"dates.calendars."+a;s.dateObject=n(l,s.parserObject)}return s}function r(t,e,i,r){return n(t+"Formats-numberSystem-"+e+(r?".accounting":".standard"),i)||(r?n(t+"Formats-numberSystem-"+e+".standard",i):"")}function o(e){var i=e.match(t.dateConverterMapper);if(i&&f()){var n=3===i[0].length?"EEE":"EEEE";return e.replace(t.dateConverterMapper,n)}return e}function s(t,e){var i=t.format||t.skeleton,r=n((e||"en-US")+"."+i,dp);return r||(r=n("en-US."+i,dp)),r&&(r=o(r),t.format=r.replace(/tt/,"a")),t}function a(e){var i=e.match(t.formatRegex),n={},r=i[1].toUpperCase();return n.isAccount="A"===r,n.type=t.patternMatcher[r],e.length>1&&(n.fractionDigits=parseInt(i[2],10)),n}function d(e,i,n,r){var o=r?{}:{nlead:"",nend:""},s=e.match(t.customRegex);if(s){r||(o.nlead=p(s[1],n),o.nend=p(s[10],n),o.groupPattern=s[4]);var a=s[7];if(a&&i){var l=a.match(S);h(l)?o.minimumFraction=0:o.minimumFraction=l.length,o.maximumFraction=a.length-1}}return o}function p(e,i){return e?e.replace(t.defaultCurrency,i):""}function u(t,e,i){return n("currencies."+e+(i?"."+i:".symbol"),t)||n("currencies."+e+".symbol-alt-narrow",t)||"$"}function g(e,i,n){var o={type:"decimal",minimumFractionDigits:0,maximumFractionDigits:0},s=e.match(t.customRegex);if(h(s)||""===s[5]&&"N/A"!==e)return o.type=void 0,o;o.nlead=s[1],o.nend=s[10];var a=s[6],c=!!a.match(/\ $/g),d=-1!==a.replace(/\ $/g,"").indexOf(" ");o.useGrouping=-1!==a.indexOf(",")||d,a=a.replace(/,/g,"");var p=s[7];if(-1!==a.indexOf("0")&&(o.minimumIntegerDigits=a.length-a.indexOf("0")),h(p)||(o.minimumFractionDigits=p.lastIndexOf("0"),o.maximumFractionDigits=p.lastIndexOf("#"),-1===o.minimumFractionDigits&&(o.minimumFractionDigits=0),(-1===o.maximumFractionDigits||o.maximumFractionDigits<o.minimumFractionDigits)&&(o.maximumFractionDigits=o.minimumFractionDigits)),h(i)?l(o,m([o.nlead,o.nend],"%","%")):(i.isCustomFormat=!0,l(o,m([o.nlead,o.nend],"$",i.currencySymbol)),o.isCurrency||l(o,m([o.nlead,o.nend],"%",i.percentSymbol))),!h(n)){var u=r(o.type,i.numberMapper.numberSystem,n,!1);o.useGrouping&&(o.groupSeparator=d?" ":i.numberMapper.numberSymbols[w[2]],o.groupData=qd.getGroupingDetails(u.split(";")[0])),o.nlead=o.nlead.replace(/'/g,""),o.nend=c?" "+o.nend.replace(/'/g,""):o.nend.replace(/'/g,"")}return o}function m(t,e,i){for(var n={nlead:t[0],nend:t[1]},r=0;r<2;r++){var o=t[parseInt(r.toString(),10)],s=o.indexOf(e);if(-1!==s&&(s<o.indexOf("'")||s>o.lastIndexOf("'"))){n[N[r]]=o.substr(0,s)+i+o.substr(s+1),n[N[e]]=!0,n.type=n.isCurrency?"currency":"percent";break}}return n}function v(t,e,i){t+=".";for(var n=0;n<e;n++)t+="0";if(e<i)for(var r=i-e,o=0;o<r;o++)t+="#";return t}function y(t,e){for(var i=t.split("."),n="",r=0;r<e;r++)n+="0";return i[1]?n+"."+i[1]:n}function b(t){var e=t.split("."),i=e[0],n=3-i.length%3;t="";for(var r=(i=(n&&1===n?"#":2===n?"##":"")+i).length-1;r>0;r-=3)t=","+i[r-2]+i[r-1]+i[parseInt(r.toString(),10)]+t;return t=t.slice(1),e[1]?t+"."+e[1]:t}t.negativeDataRegex=/^(('[^']+'|''|[^*#@0,.E])*)(\*.)?((([#,]*[0,]*0+)(\.0*[0-9]*#*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,t.customRegex=/^(('[^']+'|''|[^*#@0,.])*)(\*.)?((([0#,]*[0,]*[0#]*[0#\ ]*)(\.[0#]*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,t.latnParseRegex=/0|1|2|3|4|5|6|7|8|9/g;var S=/[0-9]/g;t.defaultCurrency="$";var w=["infinity","nan","group","decimal"],I=/G|M|L|H|c|'| a|yy|y|EEEE|E/g,x={G:"",M:"m",L:"m",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};t.dateConverterMapper=/dddd|ddd/gi;var M="sun";t.islamicRegex=/^islamic/;var C={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};t.formatRegex=new cp("(^[ncpae]{1})([0-1]?[0-9]|20)?$","i"),t.currencyFormatRegex=new cp("(^[ca]{1})([0-1]?[0-9]|20)?$","i"),t.curWithoutNumberRegex=/(c|a)$/gi;var N={$:"isCurrency","%":"isPercent","-":"isNegative",0:"nlead",1:"nend"};t.dateParseRegex=/([a-z])\1*|'([^']|'')+'|''|./gi,t.basicPatterns=["short","medium","long","full"],t.defaultObject={dates:{calendars:{gregorian:{months:{"stand-alone":{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},narrow:{1:"J",2:"F",3:"M",4:"A",5:"M",6:"J",7:"J",8:"A",9:"S",10:"O",11:"N",12:"D"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"Before Christ","0-alt-variant":"Before Common Era",1:"Anno Domini","1-alt-variant":"Common Era"},eraAbbr:{0:"BC","0-alt-variant":"BCE",1:"AD","1-alt-variant":"CE"},eraNarrow:{0:"B","0-alt-variant":"BCE",1:"A","1-alt-variant":"CE"}},dateFormats:{full:"EEEE, MMMM d, y",long:"MMMM d, y",medium:"MMM d, y",short:"M/d/yy"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y",yM:"M/y",yMd:"M/d/y",yMEd:"E, M/d/y",yMMM:"MMM y",yMMMd:"MMM d, y",yMMMEd:"E, MMM d, y",yMMMM:"MMMM y"}}},islamic:{months:{"stand-alone":{abbreviated:{1:"Muh.",2:"Saf.",3:"Rab. I",4:"Rab. II",5:"Jum. I",6:"Jum. II",7:"Raj.",8:"Sha.",9:"Ram.",10:"Shaw.",11:"Dhuʻl-Q.",12:"Dhuʻl-H."},narrow:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},wide:{1:"Muharram",2:"Safar",3:"Rabiʻ I",4:"Rabiʻ II",5:"Jumada I",6:"Jumada II",7:"Rajab",8:"Shaʻban",9:"Ramadan",10:"Shawwal",11:"Dhuʻl-Qiʻdah",12:"Dhuʻl-Hijjah"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"AH"},eraAbbr:{0:"AH"},eraNarrow:{0:"AH"}},dateFormats:{full:"EEEE, MMMM d, y G",long:"MMMM d, y G",medium:"MMM d, y G",short:"M/d/y GGGGG"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y G",yyyy:"y G",yyyyM:"M/y GGGGG",yyyyMd:"M/d/y GGGGG",yyyyMEd:"E, M/d/y GGGGG",yyyyMMM:"MMM y G",yyyyMMMd:"MMM d, y G",yyyyMMMEd:"E, MMM d, y G",yyyyMMMM:"MMMM y G",yyyyQQQ:"QQQ y G",yyyyQQQQ:"QQQQ y G"}}}},timeZoneNames:{hourFormat:"+HH:mm;-HH:mm",gmtFormat:"GMT{0}",gmtZeroFormat:"GMT"}},numbers:{currencies:{USD:{displayName:"US Dollar",symbol:"$","symbol-alt-narrow":"$"},EUR:{displayName:"Euro",symbol:"€","symbol-alt-narrow":"€"},GBP:{displayName:"British Pound","symbol-alt-narrow":"£"}},defaultNumberingSystem:"latn",minimumGroupingDigits:"1","symbols-numberSystem-latn":{decimal:".",group:",",list:";",percentSign:"%",plusSign:"+",minusSign:"-",exponential:"E",superscriptingExponent:"×",perMille:"‰",infinity:"∞",nan:"NaN",timeSeparator:":"},"decimalFormats-numberSystem-latn":{standard:"#,##0.###"},"percentFormats-numberSystem-latn":{standard:"#,##0%"},"currencyFormats-numberSystem-latn":{standard:"¤#,##0.00",accounting:"¤#,##0.00;(¤#,##0.00)"},"scientificFormats-numberSystem-latn":{standard:"#E0"}}},t.blazorDefaultObject={numbers:{mapper:{0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},mapperDigits:"0123456789",numberSymbols:{decimal:".",group:",",plusSign:"+",minusSign:"-",percentSign:"%",nan:"NaN",timeSeparator:":",infinity:"∞"},timeSeparator:":",currencySymbol:"$",currencypData:{nlead:"$",nend:"",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentpData:{nlead:"",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentnData:{nlead:"-",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},currencynData:{nlead:"($",nend:")",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalnData:{nlead:"-",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalpData:{nlead:"",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2}},dates:{dayPeriods:{am:"AM",pm:"PM"},dateSeperator:"/",days:{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}},months:{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}},eras:{1:"AD"}}},t.monthIndex={3:"abbreviated",4:"wide",5:"narrow",1:"abbreviated"},t.month="months",t.days="days",t.patternMatcher={C:"currency",P:"percent",N:"decimal",A:"currency",E:"scientific"},t.getResultantPattern=e,t.getDependables=i,t.getSymbolPattern=r,t.ConvertDateToWeekFormat=o,t.compareBlazorDateFormats=s,t.getProperNumericSkeleton=a,t.getFormatData=d,t.changeCurrencySymbol=p,t.getCurrencySymbol=u,t.customFormat=function(t,e,i){for(var n={},r=t.split(";"),o=["pData","nData","zeroData"],s=0;s<r.length;s++)n[o[s]]=g(r[s],e,i);return h(n.nData)&&(n.nData=l({},n.pData),n.nData.nlead=h(e)?"-"+n.nData.nlead:e.minusSymbol+n.nData.nlead),n},t.customNumberFormat=g,t.isCurrencyPercent=m,t.getDateSeparator=function(t){var e=(n("dateFormats.short",t)||"").match(/[d‏M‏]([^d‏M])[d‏M‏]/i);return e?e[1]:"/"},t.getActualDateTimeFormat=function(t,r,o,a){var l=i(o,t,r.calendar);f()&&(r=s(r,t));var h=r.format||e(r.skeleton,l.dateObject,r.type);if(a){if(-1!==(h=h.replace(I,function(t){return x[t]})).indexOf("z")){var c=h.match(/z/g).length,d=void 0,p={timeZone:{}};p.numMapper=Bd.getNumberMapper(l.parserObject,Bd.getNumberingSystem(o)),p.timeZone=n("dates.timeZoneNames",l.parserObject);var u=(new Date).getTimezoneOffset(),g=c<4?"+H;-H":p.timeZone.hourFormat;g=g.replace(/:/g,p.numMapper.timeSeparator),0===u?d=p.timeZone.gmtZeroFormat:(d=Wd.getTimeZoneValue(u,g),d=p.timeZone.gmtFormat.replace(/\{0\}/,d)),h=h.replace(/[z]+/,'"'+d+'"')}h=h.replace(/ $/,"")}return h},t.getActualNumberFormat=function(e,o,s,h){var c,p=i(s,e,"",!0),g={custom:!0},m=p.numericObject,S={},w=(o.format||"").match(t.currencyFormatRegex),I=t.formatRegex.test(o.format)?a(o.format||"N"):{},x={};if(w){x.numberMapper=f()?l({},p.numericObject):Bd.getNumberMapper(p.parserObject,Bd.getNumberingSystem(s),!0);var M=f()?n("currencySymbol",p.numericObject):u(p.numericObject,o.currency||ap,o.altSymbol),C=r("currency",x.numberMapper.numberSystem,p.numericObject,/a/i.test(o.format)),N=(C=C.replace(/\u00A4/g,M)).split(";");S.hasNegativePattern=!!f()||N.length>1,S.nData=f()?n(I.type+"nData",m):d(N[1]||"-"+N[0],!0,M),S.pData=f()?n(I.type+"pData",m):d(N[0],!1,M),w[2]||o.minimumFractionDigits||o.maximumFractionDigits||(c=d(C.split(";")[0],!0,"",!0).minimumFraction)}var E;if(t.formatRegex.test(o.format)||!o.format){if(l(g,a(o.format||"N")),g.custom=!1,E="###0",(g.fractionDigits||o.minimumFractionDigits||o.maximumFractionDigits||c)&&(g.fractionDigits&&(o.minimumFractionDigits=o.maximumFractionDigits=g.fractionDigits),E=v(E,c||g.fractionDigits||o.minimumFractionDigits||0,o.maximumFractionDigits||0)),o.minimumIntegerDigits&&(E=y(E,o.minimumIntegerDigits)),o.useGrouping&&(E=b(E)),"currency"===g.type||g.type&&f()){f()&&"currency"!==g.type&&(S.pData=n(g.type+"pData",m),S.nData=n(g.type+"nData",m));var D=E;E=S.pData.nlead+D+S.pData.nend,(S.hasNegativePattern||f())&&(E+=";"+S.nData.nlead+D+S.nData.nend)}"percent"!==g.type||f()||(E+=" %")}else E=o.format.replace(/'/g,'"');return Object.keys(x).length>0&&(E=h?E:function(t,e){if(-1!==t.indexOf(",")){var i=t.split(",");t=i[0]+n("numberMapper.numberSymbols.group",e)+i[1].replace(".",n("numberMapper.numberSymbols.decimal",e))}else t=t.replace(".",n("numberMapper.numberSymbols.decimal",e));return t}(E,x)),E},t.fractionDigitsPattern=v,t.minimumIntegerPattern=y,t.groupingPattern=b,t.getWeekData=function(t,e){var i=M,r=n("supplemental.weekData.firstDay",e),o=t;return/en-/.test(o)&&(o=o.slice(3)),o=o.slice(0,2).toUpperCase()+o.substr(2),r&&(i=r[""+o]||r[o.slice(0,2)]||M),C[""+i]},t.replaceBlazorCurrency=function(t,e,i){var r=function(t){return n(t||"",Hd)}(i);if(e!==r)for(var o=0,s=t;o<s.length;o++){var a=s[o];a.nend=a.nend.replace(e,r),a.nlead=a.nlead.replace(e,r)}},t.getWeekOfYear=function(t){var e,i=new Date(t.getFullYear(),0,1),n=i.getDay();n=n>=0?n:n+7;var r=Math.floor((t.getTime()-i.getTime()-6e4*(t.getTimezoneOffset()-i.getTimezoneOffset()))/864e5)+1;if(n<4){if((e=Math.floor((r+n-1)/7)+1)>52){var o=new Date(t.getFullYear()+1,0,1).getDay();e=(o=o>=0?o:o+7)<4?1:53}}else e=Math.floor((r+n-1)/7);return e}}(Ud||(Ud={}));var pp=/^(.*?):[ \t]*([^\r\n]*)$/gm,up="GET",gp=function(){function t(t,e,i,n){this.mode=!0,this.emitError=!0,this.options={},"string"==typeof t?(this.url=t,this.type=e?e.toUpperCase():up,this.mode=!!h(i)||i):"object"==typeof t&&(this.options=t,a(this,this.options)),this.type=this.type?this.type.toUpperCase():up,this.contentType=void 0!==this.contentType?this.contentType:n}return t.prototype.send=function(t){var e=this;this.data=h(t)?this.data:t;var i={cancel:!1,httpRequest:null};return new Promise(function(t,n){e.httpRequest=new XMLHttpRequest,e.httpRequest.onreadystatechange=function(){e.stateChange(t,n)},h(e.onLoad)||(e.httpRequest.onload=e.onLoad),h(e.onProgress)||(e.httpRequest.onprogress=e.onProgress),h(e.onAbort)||(e.httpRequest.onabort=e.onAbort),h(e.onError)||(e.httpRequest.onerror=e.onError),h(e.onUploadProgress)||(e.httpRequest.upload.onprogress=e.onUploadProgress),e.httpRequest.open(e.type,e.url,e.mode),h(e.data)||null===e.contentType||e.httpRequest.setRequestHeader("Content-Type",e.contentType||"application/json; charset=utf-8"),e.beforeSend&&(i.httpRequest=e.httpRequest,e.beforeSend(i)),i.cancel||e.httpRequest.send(h(e.data)?null:e.data)})},t.prototype.successHandler=function(t){return this.onSuccess&&this.onSuccess(t,this),t},t.prototype.failureHandler=function(t){return this.onFailure&&this.onFailure(this.httpRequest),t},t.prototype.stateChange=function(t,e){var i=this.httpRequest.responseText;if(this.dataType&&"json"===this.dataType.toLowerCase())if(""===i)i=void 0;else try{i=JSON.parse(i)}catch(t){}4===this.httpRequest.readyState&&(this.httpRequest.status>=200&&this.httpRequest.status<=299||304===this.httpRequest.status?t(this.successHandler(i)):this.emitError?e(new Error(this.failureHandler(this.httpRequest.statusText))):t())},t.prototype.getResponseHeader=function(t){var e,i;e={};for(var n=pp.exec(this.httpRequest.getAllResponseHeaders());n;)e[n[1].toLowerCase()]=n[2],n=pp.exec(this.httpRequest.getAllResponseHeaders());return i=e[t.toLowerCase()],h(i)?null:i},t}(),mp=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/i,fp=/msie|trident/i,vp=/Trident\/7\./,yp=/(ipad|iphone|ipod touch)/i,bp=/(ipad|iphone|ipod touch);.*os 7_\d|(ipad|iphone|ipod touch);.*os 8_\d/i,Sp=/android/i,wp=/trident|windows phone|edge/i,Ip=/(version)[ /]([\w.]+)/i,xp={OPERA:/(opera|opr)(?:.*version|)[ /]([\w.]+)/i,EDGE:/(edge)(?:.*version|)[ /]([\w.]+)/i,CHROME:/(chrome|crios)[ /]([\w.]+)/i,PANTHOMEJS:/(phantomjs)[ /]([\w.]+)/i,SAFARI:/(safari)[ /]([\w.]+)/i,WEBKIT:/(webkit)[ /]([\w.]+)/i,MSIE:/(msie|trident) ([\w.]+)/i,MOZILLA:/(mozilla)(?:.*? rv:([\w.]+)|)/i};"undefined"!=typeof window&&(window.browserDetails=window.browserDetails||{});var Mp,Cp,Np=function(){function t(){}return t.extractBrowserDetail=function(){for(var e={culture:{}},i=[],n=0,r=Object.keys(xp);n<r.length;n++){var o=r[n];if(i=t.userAgent.match(xp[""+o])){if(e.name="opr"===i[1].toLowerCase()?"opera":i[1].toLowerCase(),e.name="crios"===i[1].toLowerCase()?"chrome":e.name,e.version=i[2],e.culture.name=e.culture.language=navigator.language,t.userAgent.match(vp)){e.name="msie";break}var s=t.userAgent.match(Ip);"safari"===e.name&&s&&(e.version=s[2]);break}}return e},t.getEvent=function(e){var i={start:{isPointer:"pointerdown",isTouch:"touchstart",isDevice:"mousedown"},move:{isPointer:"pointermove",isTouch:"touchmove",isDevice:"mousemove"},end:{isPointer:"pointerup",isTouch:"touchend",isDevice:"mouseup"},cancel:{isPointer:"pointercancel",isTouch:"touchcancel",isDevice:"mouseleave"}};return t.isPointer?i[""+e].isPointer:t.isTouch?i[""+e].isTouch+(t.isDevice?"":" "+i[""+e].isDevice):i[""+e].isDevice},t.getTouchStartEvent=function(){return t.getEvent("start")},t.getTouchEndEvent=function(){return t.getEvent("end")},t.getTouchMoveEvent=function(){return t.getEvent("move")},t.getTouchCancelEvent=function(){return t.getEvent("cancel")},t.isSafari=function(){return t.isDevice&&t.isIos&&t.isTouch&&"undefined"!=typeof window&&-1===window.navigator.userAgent.toLowerCase().indexOf("iphone")&&window.navigator.userAgent.toLowerCase().indexOf("safari")>-1},t.getValue=function(e,i){var n="undefined"!=typeof window?window.browserDetails:{};return"undefined"!=typeof navigator&&"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1&&!0===t.isTouch&&(n.isIos=!0,n.isDevice=!0,n.isTouch=!0,n.isPointer=!0),void 0===n[""+e]?n[""+e]=i.test(t.userAgent):n[""+e]},Object.defineProperty(t,"userAgent",{get:function(){return t.uA},set:function(e){t.uA=e,window.browserDetails={}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"info",{get:function(){return c(window.browserDetails.info)?window.browserDetails.info=t.extractBrowserDetail():window.browserDetails.info},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isIE",{get:function(){return t.getValue("isIE",fp)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isTouch",{get:function(){return c(window.browserDetails.isTouch)?window.browserDetails.isTouch="ontouchstart"in window.navigator||window&&window.navigator&&window.navigator.maxTouchPoints>0||"ontouchstart"in window:window.browserDetails.isTouch},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isPointer",{get:function(){return c(window.browserDetails.isPointer)?window.browserDetails.isPointer="pointerEnabled"in window.navigator:window.browserDetails.isPointer},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isMSPointer",{get:function(){return c(window.browserDetails.isMSPointer)?window.browserDetails.isMSPointer="msPointerEnabled"in window.navigator:window.browserDetails.isMSPointer},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isDevice",{get:function(){return t.getValue("isDevice",mp)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isIos",{get:function(){return t.getValue("isIos",yp)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isIos7",{get:function(){return t.getValue("isIos7",bp)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isAndroid",{get:function(){return t.getValue("isAndroid",Sp)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isWebView",{get:function(){return c(window.browserDetails.isWebView)?(window.browserDetails.isWebView=!(c(window.cordova)&&c(window.PhoneGap)&&c(window.phonegap)&&"object"!==window.forge),window.browserDetails.isWebView):window.browserDetails.isWebView},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isWindows",{get:function(){return t.getValue("isWindows",wp)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"touchStartEvent",{get:function(){return c(window.browserDetails.touchStartEvent)?window.browserDetails.touchStartEvent=t.getTouchStartEvent():window.browserDetails.touchStartEvent},enumerable:!0,configurable:!0}),Object.defineProperty(t,"touchMoveEvent",{get:function(){return c(window.browserDetails.touchMoveEvent)?window.browserDetails.touchMoveEvent=t.getTouchMoveEvent():window.browserDetails.touchMoveEvent},enumerable:!0,configurable:!0}),Object.defineProperty(t,"touchEndEvent",{get:function(){return c(window.browserDetails.touchEndEvent)?window.browserDetails.touchEndEvent=t.getTouchEndEvent():window.browserDetails.touchEndEvent},enumerable:!0,configurable:!0}),Object.defineProperty(t,"touchCancelEvent",{get:function(){return c(window.browserDetails.touchCancelEvent)?window.browserDetails.touchCancelEvent=t.getTouchCancelEvent():window.browserDetails.touchCancelEvent},enumerable:!0,configurable:!0}),t.uA="undefined"!=typeof navigator?navigator.userAgent:"",t}(),Ep=function(){function t(){}return t.addOrGetEventData=function(t){return"__eventList"in t?t.__eventList.events:(t.__eventList={},t.__eventList.events=[])},t.add=function(e,i,n,r,o){var s,a=t.addOrGetEventData(e);s=o?p(n,o):n,r&&(s=s.bind(r));for(var l=i.split(" "),h=0;h<l.length;h++)a.push({name:l[parseInt(h.toString(),10)],listener:n,debounce:s}),Np.isIE?e.addEventListener(l[parseInt(h.toString(),10)],s):e.addEventListener(l[parseInt(h.toString(),10)],s,{passive:!1});return s},t.remove=function(e,i,n){for(var r=t.addOrGetEventData(e),o=i.split(" "),s=function(t){var i,s=-1;r&&0!==r.length&&r.some(function(e,r){return e.name===o[parseInt(t.toString(),10)]&&e.listener===n&&(s=r,i=e.debounce,!0)}),-1!==s&&r.splice(s,1),i&&e.removeEventListener(o[parseInt(t.toString(),10)],i)},a=0;a<o.length;a++)s(a)},t.clearEvents=function(e){var i,n;n=l([],n,i=t.addOrGetEventData(e));for(var r=0;r<n.length;r++)e.removeEventListener(n[parseInt(r.toString(),10)].name,n[parseInt(r.toString(),10)].debounce),i.shift()},t.trigger=function(e,i,n){for(var r=0,o=t.addOrGetEventData(e);r<o.length;r++){var s=o[r];s.name===i&&s.debounce.call(this,n)}},t}(),Dp=/^svg|^path|^g/,Tp=new RegExp("]"),Op=function(){function t(t,e){this.isRendered=!1,this.isComplexArraySetter=!1,this.isServerRendered=!1,this.allowServerDataBinding=!0,this.isProtectedOnChange=!0,this.properties={},this.changedProperties={},this.oldProperties={},this.bulkChanges={},this.refreshing=!1,this.ignoreCollectionWatch=!1,this.finalUpdate=function(){},this.childChangedProperties={},this.modelObserver=new ip(this),c(e)||(this.element="string"==typeof e?document.querySelector(e):e,h(this.element)||(this.isProtectedOnChange=!1,this.addInstance())),c(t)||this.setProperties(t,!0),this.isDestroyed=!1}return t.prototype.setProperties=function(t,e){var i=this.isProtectedOnChange;this.isProtectedOnChange=!!e,a(this,t),!0!==e?(a(this.changedProperties,t),this.dataBind()):f()&&this.isRendered&&this.serverDataBind(t),this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.isProtectedOnChange=i},t.callChildDataBind=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){var r=n[i];if(e[""+r]instanceof Array)for(var o=0,s=e[""+r];o<s.length;o++){var a=s[o];void 0!==a.dataBind&&a.dataBind()}else e[""+r].dataBind()}},t.prototype.clearChanges=function(){this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.childChangedProperties={}},t.prototype.dataBind=function(){if(t.callChildDataBind(this.childChangedProperties,this),Object.getOwnPropertyNames(this.changedProperties).length){var e=this.isProtectedOnChange,i=this.changedProperties,n=this.oldProperties;this.clearChanges(),this.isProtectedOnChange=!0,this.onPropertyChanged(i,n),this.isProtectedOnChange=e}},t.prototype.serverDataBind=function(t){if(f()){t=t||{},l(this.bulkChanges,{},t,!0);this.allowServerDataBinding&&window.sfBlazor.updateModel&&(window.sfBlazor.updateModel(this),this.bulkChanges={})}},t.prototype.saveChanges=function(t,e,n){if(f()){var r={};r[""+t]=e,this.serverDataBind(r)}this.isProtectedOnChange||(this.oldProperties[""+t]=n,this.changedProperties[""+t]=e,this.finalUpdate(),this.finalUpdate=i(this.dataBind.bind(this)))},t.prototype.addEventListener=function(t,e){this.modelObserver.on(t,e)},t.prototype.removeEventListener=function(t,e){this.modelObserver.off(t,e)},t.prototype.trigger=function(t,e,i,r){var o=this;if(!0!==this.isDestroyed){var s=this.isProtectedOnChange;this.isProtectedOnChange=!1;var a=this.modelObserver.notify(t,e,i,r);if(Tp.test(t)){var l=n(t,this);if(l){if(window.Blazor){var h=l.call(this,e);h&&"function"==typeof h.then?i?h.then(function(t){i&&(t="string"==typeof t&&o.modelObserver.isJson(t)?JSON.parse(t):t,i.call(o,t))}).catch(function(t){r&&(t="string"==typeof t&&o.modelObserver.isJson(t)?JSON.parse(t):t,r.call(o,t))}):a=h:i&&i.call(this,e)}else l.call(this,e),i&&i.call(this,e)}else i&&i.call(this,e)}return this.isProtectedOnChange=s,a}},t.prototype.addInstance=function(){var t="e-"+this.getModuleName().toLowerCase();I([this.element],["e-lib",t]),h(this.element.ej2_instances)?r("ej2_instances",[this],this.element):this.element.ej2_instances.push(this)},t.prototype.destroy=function(){var t=this;this.element.ej2_instances=this.element.ej2_instances.filter(function(e){return e!==t}),x([this.element],["e-"+this.getModuleName()]),0===this.element.ej2_instances.length&&x([this.element],["e-lib"]),this.clearChanges(),this.modelObserver.destroy(),this.isDestroyed=!0},t}(),Lp=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ap=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},zp=function(t){function e(e){var i=t.call(this,e,void 0)||this;return i.easing={ease:"cubic-bezier(0.250, 0.100, 0.250, 1.000)",linear:"cubic-bezier(0.250, 0.250, 0.750, 0.750)",easeIn:"cubic-bezier(0.420, 0.000, 1.000, 1.000)",easeOut:"cubic-bezier(0.000, 0.000, 0.580, 1.000)",easeInOut:"cubic-bezier(0.420, 0.000, 0.580, 1.000)",elasticInOut:"cubic-bezier(0.5,-0.58,0.38,1.81)",elasticIn:"cubic-bezier(0.17,0.67,0.59,1.81)",elasticOut:"cubic-bezier(0.7,-0.75,0.99,1.01)"},i}Lp(e,t),i=e,e.prototype.animate=function(t,e){e=e||{};var n=this.getModel(e);if("string"==typeof t)for(var r=0,o=Array.prototype.slice.call(z(t,document));r<o.length;r++){var s=o[r];n.element=s,i.delayAnimation(n)}else n.element=t,i.delayAnimation(n)},e.stop=function(t,e){t.style.animation="",t.removeAttribute("e-animate");var i=t.getAttribute("e-animation-id");if(i){var n=parseInt(i,10);cancelAnimationFrame(n),t.removeAttribute("e-animation-id")}e&&e.end&&e.end.call(this,e)},e.delayAnimation=function(t){"Disable"===jp?(t.begin&&t.begin.call(this,t),t.end&&t.end.call(this,t)):t.delay?setTimeout(function(){i.applyAnimation(t)},t.delay):i.applyAnimation(t)},e.applyAnimation=function(t){var e=this;t.timeStamp=0;var i=0,n=0,r=0,o=t.duration;t.element.setAttribute("e-animate","true");var s=function(a){try{if(a){r=0===r?a:r,t.timeStamp=a+t.timeStamp-r,r=a,!i&&t.begin&&t.begin.call(e,t),i+=1;var l=t.timeStamp/i;t.timeStamp<o&&t.timeStamp+l<o&&t.element.getAttribute("e-animate")?(t.element.style.animation=t.name+" "+t.duration+"ms "+t.timingFunction,t.progress&&t.progress.call(e,t),requestAnimationFrame(s)):(cancelAnimationFrame(n),t.element.removeAttribute("e-animation-id"),t.element.removeAttribute("e-animate"),t.element.style.animation="",t.end&&t.end.call(e,t))}else n=requestAnimationFrame(s),t.element.setAttribute("e-animation-id",n.toString())}catch(i){cancelAnimationFrame(n),t.element.removeAttribute("e-animation-id"),t.fail&&t.fail.call(e,i)}};s()},e.prototype.getModel=function(t){return{name:t.name||this.name,delay:t.delay||this.delay,duration:void 0!==t.duration?t.duration:this.duration,begin:t.begin||this.begin,end:t.end||this.end,fail:t.fail||this.fail,progress:t.progress||this.progress,timingFunction:this.easing[t.timingFunction]?this.easing[t.timingFunction]:t.timingFunction||this.easing[this.timingFunction]}},e.prototype.onPropertyChanged=function(t,e){},e.prototype.getModuleName=function(){return"animation"},e.prototype.destroy=function(){};var i;return Ap([W("FadeIn")],e.prototype,"name",void 0),Ap([W(400)],e.prototype,"duration",void 0),Ap([W("ease")],e.prototype,"timingFunction",void 0),Ap([W(0)],e.prototype,"delay",void 0),Ap([Z()],e.prototype,"progress",void 0),Ap([Z()],e.prototype,"begin",void 0),Ap([Z()],e.prototype,"end",void 0),Ap([Z()],e.prototype,"fail",void 0),e=i=Ap([$],e)}(Op),kp=!1,jp="",Pp=function(){function t(t){this.loadedModules=[],this.parent=t}return t.prototype.inject=function(t,i){var n=t.length;if(0!==n){this.loadedModules.length&&this.clearUnusedModule(t);for(var o=0;o<n;o++)for(var s=t[parseInt(o.toString(),10)],a=0,l=i;a<l.length;a++){var h=l[a],c=s.member;if(h&&h.prototype.getModuleName()===s.member&&!this.isModuleLoaded(c)){var d=e(h,s.args),p=this.getMemberName(c);s.isProperty?r(p,h,this.parent):r(p,d,this.parent);var u=s;u.member=p,this.loadedModules.push(u)}}}else this.clean()},t.prototype.clean=function(){for(var t=0,e=this.loadedModules;t<e.length;t++){var i=e[t];i.isProperty||n(i.member,this.parent).destroy()}this.loadedModules=[]},t.prototype.clearUnusedModule=function(t){for(var e=this,i=t.map(function(t){return e.getMemberName(t.member)}),r=0,s=this.loadedModules.filter(function(t){return-1===i.indexOf(t.member)});r<s.length;r++){var a=s[r];a.isProperty||n(a.member,this.parent).destroy(),this.loadedModules.splice(this.loadedModules.indexOf(a),1),o(this.parent,a.member)}},t.prototype.getMemberName=function(t){return t[0].toLowerCase()+t.substring(1)+"Module"},t.prototype.isModuleLoaded=function(t){for(var e=0,i=this.loadedModules;e<i.length;e++){if(i[e].member===this.getMemberName(t))return!0}return!1},t}(),Rp=function(){function t(t,e,i,r){this.isComplexArraySetter=!1,this.properties={},this.changedProperties={},this.childChangedProperties={},this.oldProperties={},this.finalUpdate=function(){},this.callChildDataBind=n("callChildDataBind",Op),this.parentObj=t,this.controlParent=this.parentObj.controlParent||this.parentObj,this.propName=e,this.isParentArray=r,this.setProperties(i,!0)}return t.prototype.updateChange=function(t,e){!0===t?this.parentObj.childChangedProperties[""+e]=t:delete this.parentObj.childChangedProperties[""+e],this.parentObj.updateChange&&this.parentObj.updateChange(t,this.parentObj.propName)},t.prototype.updateTimeOut=function(){if(this.parentObj.updateTimeOut)this.parentObj.finalUpdate(),this.parentObj.updateTimeOut();else{var t=setTimeout(this.parentObj.dataBind.bind(this.parentObj));this.finalUpdate=function(){clearTimeout(t)}}},t.prototype.clearChanges=function(){this.finalUpdate(),this.updateChange(!1,this.propName),this.oldProperties={},this.changedProperties={}},t.prototype.setProperties=function(t,e){!0===e?(a(this,t),this.updateChange(!1,this.propName),this.clearChanges()):a(this,t)},t.prototype.dataBind=function(){if(this.callChildDataBind(this.childChangedProperties,this),this.isParentArray){var t=this.parentObj[this.propName].indexOf(this);Object.keys(this.changedProperties).length&&(r(this.propName+"."+t,this.changedProperties,this.parentObj.changedProperties),r(this.propName+"."+t,this.oldProperties,this.parentObj.oldProperties))}else this.parentObj.changedProperties[this.propName]=this.changedProperties,this.parentObj.oldProperties[this.propName]=this.oldProperties;this.clearChanges()},t.prototype.saveChanges=function(t,e,i,n){this.controlParent.isProtectedOnChange||(n||this.serverDataBind(t,e,!0),this.oldProperties[""+t]=i,this.changedProperties[""+t]=e,this.updateChange(!0,this.propName),this.finalUpdate(),this.updateTimeOut())},t.prototype.serverDataBind=function(t,e,i,n){if(f()&&!this.parentObj.isComplexArraySetter){var r,o={},s=i?this.getParentKey(!0)+"."+t:t;if(-1!==s.indexOf(".")){var a=s.split(".");r=o;for(var l=0;l<a.length;l++){var h=l===a.length-1;r[a[parseInt(l.toString(),10)]]=h?e:{},r=h?r:r[a[parseInt(l.toString(),10)]]}}else o[""+s]={},r=o[""+s],o[""+s][""+t]=e;if(this.isParentArray){r.ejsAction=n||"none"}this.controlParent.serverDataBind(o)}},t.prototype.getParentKey=function(t){var e="",i=this.propName;if(this.isParentArray){e=this.parentObj[this.propName].indexOf(this);var n=this.parentObj[this.propName].length;n=t?n:n>0?n-1:0,i+=e=-1!==e?"-"+e:"-"+n}return this.controlParent!==this.parentObj&&(i=this.parentObj.getParentKey()+"."+this.propName+e),i},t}(),Bp=["grid","pivotview","treegrid","spreadsheet","rangeNavigator","DocumentEditor","listbox","inplaceeditor","PdfViewer","richtexteditor","DashboardLayout","chart","stockChart","circulargauge","diagram","heatmap","lineargauge","maps","slider","smithchart","barcode","sparkline","treemap","bulletChart","kanban","daterangepicker","schedule","gantt","signature","query-builder","drop-down-tree","carousel","filemanager","uploader","accordion","tab","treeview"],Hp=[115,121,110,99,102,117,115,105,111,110,46,105,115,76,105,99,86,97,108,105,100,97,116,101,100],Up=function(){function t(t){this.isValidated=!1,this.isLicensed=!0,this.version="21.1",this.platform=/JavaScript|ASPNET|ASPNETCORE|ASPNETMVC|FileFormats/i,this.errors={noLicense:"<span>This application was built using a trial version of Syncfusion Essential Studio. To remove the license validation message permanently, a valid license key must be included.</span>",trailExpired:"<span>This application was built using a trial version of Syncfusion Essential Studio. To remove the license validation message permanently, a valid license key must be included.</span>",versionMismatched:"<span>The included Syncfusion license key is invalid.</span>",platformMismatched:"<span>The included Syncfusion license key is invalid.</span>",invalidKey:"<span>The included Syncfusion license key is invalid.</span>"},this.manager=function(){var t=null;return{setKey:function(e){t=e},getKey:function(){return t}}}(),this.npxManager=function(){var t="npxKeyReplace";return{getKey:function(){return t}}}(),this.manager.setKey(t)}return t.prototype.validate=function(){if(!this.isValidated&&kd&&!n(st(Hp),kd)&&!n("Blazor",kd)){var t=void 0,e=void 0;if(this.manager&&this.manager.getKey()||this.npxManager&&"npxKeyReplace"!==this.npxManager.getKey()){var i=this.getInfoFromKey();if(i&&i.length)for(var o=0,s=i;o<s.length;o++){var a=s[o];if(!this.platform.test(a.platform)||a.invalidPlatform)t=this.errors.platformMismatched;else if(-1===a.version.indexOf(this.version))t=(t=(t=this.errors.versionMismatched).replace("##LicenseVersion",a.version)).replace("##Requireversion",this.version+".x");else if(a.expiryDate){var l=new Date(a.expiryDate),c=new Date;if(!(l!==c&&l<c))break;t=this.errors.trailExpired}}else t=this.errors.invalidKey}else{var d=n(st([115,121,110,99,102,117,115,105,111,110,46,108,105,99,101,110,115,101,67,111,110,116,101,110,116]),kd);e=n(st([115,121,110,99,102,117,115,105,111,110,46,99,108,97,105,109,65,99,99,111,117,110,116,85,82,76]),kd),t=d&&""!==d?d:this.errors.noLicense}if(t&&"undefined"!=typeof document&&!h(document)){var p=w("div",{innerHTML:"<img src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzE5OV80KSI+CjxwYXRoIGQ9Ik0xMiAyMUMxNi45NzA2IDIxIDIxIDE2Ljk3MDYgMjEgMTJDMjEgNy4wMjk0NCAxNi45NzA2IDMgMTIgM0M3LjAyOTQ0IDMgMyA3LjAyOTQ0IDMgMTJDMyAxNi45NzA2IDcuMDI5NDQgMjEgMTIgMjFaIiBzdHJva2U9IiM3MzczNzMiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMS4yNSAxMS4yNUgxMlYxNi41SDEyLjc1IiBmaWxsPSIjNjE2MDYzIi8+CjxwYXRoIGQ9Ik0xMS4yNSAxMS4yNUgxMlYxNi41SDEyLjc1IiBzdHJva2U9IiM3MzczNzMiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMS44MTI1IDlDMTIuNDMzOCA5IDEyLjkzNzUgOC40OTYzMiAxMi45Mzc1IDcuODc1QzEyLjkzNzUgNy4yNTM2OCAxMi40MzM4IDYuNzUgMTEuODEyNSA2Ljc1QzExLjE5MTIgNi43NSAxMC42ODc1IDcuMjUzNjggMTAuNjg3NSA3Ljg3NUMxMC42ODc1IDguNDk2MzIgMTEuMTkxMiA5IDExLjgxMjUgOVoiIGZpbGw9IiM3MzczNzMiLz4KPC9nPgo8ZGVmcz4KPGNsaXBQYXRoIGlkPSJjbGlwMF8xOTlfNCI+CjxyZWN0IHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0id2hpdGUiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K' style=\"top: 6px;\n                    position: absolute;\n                    left: 16px;\n                    width: 24px;\n                    height: 24px;\"/>"+t+' <a style="text-decoration: none;color: #0D6EFD;font-weight: 500;" href='+(Mp=e&&""!==e?e:"https://www.syncfusion.com/account/claim-license-key?pl=SmF2YVNjcmlwdA==&vs=MjEuMQ==")+">Claim your free account</a>"});p.setAttribute("style","position: fixed;\n                top: 10px;\n                left: 10px;\n                right: 10px;\n                font-size: 14px;\n                background: #EEF2FF;\n                color: #222222;\n                z-index: 999999999;\n                text-align: left;\n                border: 1px solid #EEEEEE;\n                padding: 10px 11px 10px 50px;\n                border-radius: 8px;\n                font-family: Helvetica Neue, Helvetica, Arial;"),document.body.appendChild(p),this.isLicensed=!1}this.isValidated=!0,r(st(Hp),this.isValidated,kd)}return this.isLicensed},t.prototype.getDecryptedData=function(t){try{return atob(t)}catch(t){return""}},t.prototype.getInfoFromKey=function(){try{var t="",e=[5439488,7929856,5111808,6488064,4587520,7667712,5439488,6881280,5177344,7208960,4194304,4456448,6619136,7733248,5242880,7077888,6356992,7602176,4587520,7274496,7471104,7143424],i=[],n=[],r=!1,o=!1;this.manager.getKey()?t=this.manager.getKey():(o=!0,t=this.npxManager.getKey().split("npxKeyReplace")[1]);for(var s=0,a=t.split(";");s<a.length;s++){var l=a[s],h=this.getDecryptedData(l);if(h){var c=0,d="";if(o){var p=h[h.length-1],u=[];for(g=0;g<h.length;g++)u[parseInt(g.toString(),10)]=h[parseInt(g.toString(),10)].charCodeAt(0)-p.charCodeAt(0);for(g=0;g<u.length;g++)d+=String.fromCharCode(u[parseInt(g.toString(),10)])}else for(var g=0;g<h.length;g++,c++){c===e.length&&(c=0);var m=h.charCodeAt(g);d+=String.fromCharCode(m^e[parseInt(c.toString(),10)]>>16)}this.platform.test(d)?(r=!1,(i=d.split(";")).length>3&&n.push({platform:i[0],version:i[1],expiryDate:i[2]})):d&&d.split(";").length>3&&(r=!0)}}return r&&!n.length?[{invalidPlatform:r}]:n.length?n:null}catch(t){return null}},t}(),Vp=new Up,_p=function(t){return t&&at(t),!0},Fp=function(){var t='\n    <div style="\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: rgba(0, 0, 0, 0.5);\n    z-index: 99999;\n    ">\n        <div style="\n    background: #FFFFFF;\n    height: 455px;\n    width: 840px;\n    font-family: Helvetica Neue, Helvetica, Arial;\n    color: #000000;\n    box-shadow: 0px 4.8px 14.4px rgb(0 0 0 / 18%), 0px 25.6px 57.6px rgb(0 0 0 / 22%);\n    display: block;\n    margin: 8% auto;\n    border-radius: 20px;\n    ">\n            <div style="\n    position: absolute;\nwidth: 838px;\nheight: 62px;\nbackground-color: #F9F9F9;\nborder: 1px solid #EEEEEE;\nborder-top-left-radius: 20px;\nborder-top-right-radius: 20px;\n">\n                <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQ2IiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMTQ2IDMyIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNNDAuNTk2NSAxNS4wMDc4SDMyLjQyNUMzMS41NTU3IDE1LjAwNzggMzAuOTAzNyAxNS4xODEyIDMwLjUxMjUgMTUuNDg0NkMzMC4xMjEzIDE1LjgzMTQgMjkuOTA0IDE2LjMwODIgMjkuOTA0IDE3LjA0NTFDMjkuOTA0IDE3LjYwODYgMzAuMDc3OCAxOC4wNDIxIDMwLjQyNTYgMTguMzAyMkMzMC43NzMzIDE4LjYwNTYgMzEuMjk0OSAxOC43MzU2IDMxLjk5MDMgMTguNzM1NkgzNi4zMzY5QzM4LjExODkgMTguNzM1NiAzOS40MjI5IDE5LjA4MjQgNDAuMTYxOCAxOS43MzI2QzQwLjk0NDIgMjAuNDI2MiA0MS4yOTE5IDIxLjU1MzIgNDEuMjkxOSAyMy4xMTM3QzQxLjI5MTkgMjQuNzE3NiA0MC44NTcyIDI1Ljg4OCAzOS45ODc5IDI2LjY2ODJDMzkuMTE4NiAyNy40MDUxIDM3LjcyNzcgMjcuNzk1MyAzNS44NTg3IDI3Ljc5NTNIMjcuMDc4N1YyNS4wMjFIMzUuMzM3MkMzNi4yOTM0IDI1LjAyMSAzNi45NDU0IDI0Ljg5MSAzNy4zMzY2IDI0LjYzMDlDMzcuNzI3NyAyNC4zNzA4IDM3LjkwMTYgMjMuODk0IDM3LjkwMTYgMjMuMjg3MUMzNy45MDE2IDIyLjYzNjkgMzcuNzI3NyAyMi4xNjAxIDM3LjM4IDIxLjlDMzcuMDMyMyAyMS42Mzk5IDM2LjQyMzggMjEuNDY2NSAzNS41NTQ1IDIxLjQ2NjVIMzEuNjQyNkMyOS44NjA1IDIxLjQ2NjUgMjguNTEzMSAyMS4xMTk4IDI3LjY4NzMgMjAuMzgyOEMyNi44NjE0IDE5LjY0NTkgMjYuNDI2OCAxOC41MTg5IDI2LjQyNjggMTcuMDAxN0MyNi40MjY4IDE1LjM1NDUgMjYuODYxNCAxNC4xNDA4IDI3LjczMDcgMTMuMzYwNkMyOC42IDEyLjU4MDMgMjkuOTkwOSAxMi4yMzM1IDMxLjkwMzQgMTIuMjMzNUg0MC41OTY1VjE1LjAwNzhaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik00OC4wNzI3IDI1LjI4MTFINTAuNTA2OFYxNi4zOTQ5SDUzLjU0OTNWMjcuNTM1MkM1My41NDkzIDI5LjA1MjQgNTMuMjAxNiAzMC4xNzk0IDUyLjUwNjIgMzAuOTE2M0M1MS44MTA3IDMxLjY1MzIgNTAuNzI0MSAzMiA0OS4yNDYzIDMySDQzLjMzNVYyOS42NTkySDQ4LjcyNDdDNDkuMjg5NyAyOS42NTkyIDQ5Ljc2NzkgMjkuNTI5MiA1MC4wNzIxIDI5LjIyNThDNTAuMzc2NCAyOC45NjU3IDUwLjU1MDIgMjguNTMyMiA1MC41NTAyIDI4LjAxMlYyNy44Mzg2SDQ3Ljg5ODlDNDYuMjAzNyAyNy44Mzg2IDQ0Ljk0MzIgMjcuNDkxOSA0NC4yNDc4IDI2Ljg0MTZDNDMuNTA4OSAyNi4xNDgxIDQzLjE2MTEgMjUuMDY0NCA0My4xNjExIDIzLjQ2MDVWMTYuMzk0OUg0Ni4xNjAyVjIzLjIwMDVDNDYuMTYwMiAyNC4wNjc0IDQ2LjI5MDYgMjQuNjMwOSA0Ni41NTE0IDI0Ljg5MUM0Ni43MjUzIDI1LjE1MTEgNDcuMjQ2OSAyNS4yODExIDQ4LjA3MjcgMjUuMjgxMVoiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTU1Ljg5NjUgMTYuMzk0OUg2MS41OTA0QzYzLjMyOTEgMTYuMzk0OSA2NC41NDYxIDE2LjY5ODMgNjUuMjg1IDE3LjM0ODVDNjYuMDIzOSAxNy45OTg4IDY2LjM3MTYgMTkuMDgyNCA2Ni4zNzE2IDIwLjU1NjNWMjcuNzk1M0g2My4zMjkxVjIwLjk0NjRDNjMuMzI5MSAyMC4wNzk0IDYzLjE5ODcgMTkuNTE1OSA2Mi45Mzc5IDE5LjI5OTJDNjIuNjc3MSAxOS4wMzkxIDYyLjE1NTUgMTguOTA5MSA2MS4zMjk3IDE4LjkwOTFINTguODk1NlYyNy44Mzg2SDU1Ljg1M1YxNi4zOTQ5SDU1Ljg5NjVaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03NC45MzQyIDI1LjM2NzhINzguMTUwNlYyNy43OTUySDc0LjAyMTRDNzIuOTc4MiAyNy43OTUyIDcyLjEwODkgMjcuNjY1MiA3MS40NTcgMjcuNDkxOEM3MC44MDUgMjcuMjc1IDcwLjE5NjUgMjYuOTI4MyA2OS43MTgzIDI2LjQ1MTRDNjkuMTk2OCAyNS45MzEzIDY4Ljc2MjEgMjUuMjgxMSA2OC40NTc4IDI0LjU0NDJDNjguMTUzNiAyMy44MDcyIDY4LjAyMzIgMjIuOTgzNiA2OC4wMjMyIDIyLjE2QzY4LjAyMzIgMjEuMjkzMSA2OC4xNTM2IDIwLjQ2OTUgNjguNDU3OCAxOS42ODkyQzY4Ljc2MjEgMTguOTA5IDY5LjE1MzMgMTguMzAyMSA2OS43MTgzIDE3Ljc4MTlDNzAuMjM5OSAxNy4zMDUxIDcwLjgwNSAxNi45NTgzIDcxLjUwMDQgMTYuNzQxNkM3Mi4xOTU5IDE2LjUyNDkgNzMuMDIxNyAxNi40MzgyIDc0LjA2NDkgMTYuNDM4Mkg3OC4xOTQxVjE4LjkwOUg3NC45MzQyQzczLjQ5OTggMTguOTA5IDcyLjU0MzYgMTkuMTY5MSA3MS45Nzg1IDE5LjY0NTlDNzEuNDU2OSAyMC4xMjI3IDcxLjE1MjcgMjAuOTg5NyA3MS4xNTI3IDIyLjIwMzRDNzEuMTUyNyAyMi44OTY5IDcxLjI4MzEgMjMuNDYwNSA3MS41MDA0IDIzLjkzNzNDNzEuNzE3NyAyNC40MTQxIDcyLjA2NTUgMjQuNzYwOSA3Mi41MDAxIDI1LjA2NDNDNzIuNzE3NCAyNS4xOTQ0IDcyLjk3ODIgMjUuMjgxMSA3My4yODI1IDI1LjM2NzhDNzMuNjMwMiAyNS4zMjQ0IDc0LjE1MTggMjUuMzY3OCA3NC45MzQyIDI1LjM2NzhaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik04MC44NDU2IDE4LjY0ODlINzguNjcyNFYxNi4zNTE1SDgwLjg0NTZWMTUuMTgxMUM4MC44NDU2IDE0LjAxMDggODEuMDYzIDEzLjIzMDUgODEuNDk3NiAxMi44NDA0QzgxLjkzMjMgMTIuNDUwMyA4Mi43NTgxIDEyLjIzMzUgODMuOTc1MSAxMi4yMzM1SDg2Ljg0MzhWMTQuNDAwOUg4NS40MDk1Qzg0Ljg4NzkgMTQuNDAwOSA4NC41NDAyIDE0LjQ4NzYgODQuMzIyOSAxNC42NjFDODQuMTA1NSAxNC44MzQ0IDgzLjk3NTEgMTUuMDk0NSA4My45NzUxIDE1LjQ0MTJWMTYuMzUxNUg4Ni44NDM4VjE4LjY0ODlIODMuOTc1MVYyNy43OTUzSDgwLjg0NTZWMTguNjQ4OVoiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTk4LjQwNTYgMjcuNzk1M0g5Mi43MTE2QzkxLjAxNjUgMjcuNzk1MyA4OS44NDI5IDI3LjQ0ODUgODkuMDYwNSAyNi43OTgzQzg4LjMyMTYgMjYuMTQ4MSA4Ny45MzA0IDI1LjA2NDQgODcuOTMwNCAyMy41OTA2VjE2LjM5NDlIOTAuOTI5NVYyMy40MTcyQzkwLjkyOTUgMjQuMTk3NCA5MS4wNTk5IDI0LjY3NDMgOTEuMzIwNyAyNC45MzQ0QzkxLjU4MTUgMjUuMTk0NCA5Mi4xMDMxIDI1LjMyNDUgOTIuOTI4OSAyNS4zMjQ1SDk1LjM2M1YxNi4zOTQ5SDk4LjQwNTZWMjcuNzk1M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTEwMC42MjIgMjUuNDExMkgxMDcuMDExQzEwNy41NzcgMjUuNDExMiAxMDguMDExIDI1LjMyNDUgMTA4LjI3MiAyNS4xNTExQzEwOC41MzMgMjQuOTc3NyAxMDguNjYzIDI0LjY3NDMgMTA4LjY2MyAyNC4zMjc1QzEwOC42NjMgMjMuOTM3NCAxMDguNTMzIDIzLjY3NzMgMTA4LjI3MiAyMy40NjA1QzEwOC4wMTEgMjMuMjg3MSAxMDcuNTc3IDIzLjIwMDUgMTA3LjA1NSAyMy4yMDA1SDEwNC40NDdDMTAyLjg4MiAyMy4yMDA1IDEwMS44MzkgMjIuOTgzNyAxMDEuMzE4IDIyLjUwNjlDMTAwLjc1MiAyMi4wMzAxIDEwMC40OTIgMjEuMjA2NSAxMDAuNDkyIDE5Ljk5MjdDMTAwLjQ5MiAxOC43NzkgMTAwLjgzOSAxNy44Njg3IDEwMS40OTEgMTcuMjYxOEMxMDIuMTQzIDE2LjY5ODMgMTAzLjE4NyAxNi4zOTQ5IDEwNC41MzQgMTYuMzk0OUgxMTEuMDU0VjE4Ljc3OUgxMDUuNzA4QzEwNC44MzggMTguNzc5IDEwNC4yNzMgMTguODY1NyAxMDQuMDEyIDE4Ljk5NTdDMTAzLjc1MiAxOS4xNjkxIDEwMy42MjEgMTkuNDI5MiAxMDMuNjIxIDE5LjgxOTRDMTAzLjYyMSAyMC4xNjYxIDEwMy43NTIgMjAuNDI2MiAxMDMuOTY5IDIwLjU5OTZDMTA0LjE4NiAyMC43NzMgMTA0LjU3NyAyMC44NTk3IDEwNS4wNTYgMjAuODU5N0gxMDcuNzk0QzEwOS4wNTQgMjAuODU5NyAxMTAuMDExIDIxLjE2MzEgMTEwLjY2MyAyMS43MjY2QzExMS4zMTUgMjIuMjkwMiAxMTEuNjYyIDIzLjE1NzEgMTExLjY2MiAyNC4yNDA4QzExMS42NjIgMjUuMjgxMSAxMTEuMzU4IDI2LjE0ODEgMTEwLjc5MyAyNi43OTgzQzExMC4yMjggMjcuNDQ4NSAxMDkuNDQ2IDI3Ljc5NTMgMTA4LjUzMyAyNy43OTUzSDEwMC43MDlWMjUuNDExMkgxMDAuNjIyWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTE2LjU3NCAxNS4wOTQ0SDExMy40MDFWMTIuMjc2OUgxMTYuNTc0VjE1LjA5NDRaTTExNi41NzQgMjcuNzk1M0gxMTMuNDAxVjE2LjM5NDlIMTE2LjU3NFYyNy43OTUzWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTMwLjMwOSAyMi4xMTY3QzEzMC4zMDkgMjMuODkzOSAxMjkuNzQ0IDI1LjMyNDQgMTI4LjY1NyAyNi40MDgxQzEyNy41NzEgMjcuNDkxOCAxMjYuMDkzIDI4LjAxMiAxMjQuMjI0IDI4LjAxMkMxMjIuMzU1IDI4LjAxMiAxMjAuODc3IDI3LjQ5MTggMTE5Ljc5IDI2LjQwODFDMTE4LjcwNCAyNS4zMjQ0IDExOC4xMzkgMjMuODkzOSAxMTguMTM5IDIyLjExNjdDMTE4LjEzOSAyMC4zMzk0IDExOC43MDQgMTguOTA5IDExOS43OSAxNy44MjUzQzEyMC44NzcgMTYuNzQxNiAxMjIuMzk4IDE2LjIyMTQgMTI0LjIyNCAxNi4yMjE0QzEyNi4wNDkgMTYuMjIxNCAxMjcuNTI3IDE2Ljc0MTYgMTI4LjY1NyAxNy44MjUzQzEyOS43NDQgMTguODY1NiAxMzAuMzA5IDIwLjI5NjEgMTMwLjMwOSAyMi4xMTY3Wk0xMjEuMjY4IDIyLjExNjdDMTIxLjI2OCAyMy4yMDA0IDEyMS41MjkgMjQuMDY3MyAxMjIuMDUxIDI0LjY3NDJDMTIyLjU3MiAyNS4yODExIDEyMy4yNjggMjUuNTg0NSAxMjQuMTggMjUuNTg0NUMxMjUuMDkzIDI1LjU4NDUgMTI1Ljc4OSAyNS4yODExIDEyNi4zMSAyNC42NzQyQzEyNi44MzIgMjQuMDY3MyAxMjcuMDkzIDIzLjIwMDQgMTI3LjA5MyAyMi4xMTY3QzEyNy4wOTMgMjEuMDMzIDEyNi44MzIgMjAuMTY2MSAxMjYuMzEgMTkuNjAyNUMxMjUuNzg5IDE4Ljk5NTcgMTI1LjA5MyAxOC42OTIyIDEyNC4xMzcgMTguNjkyMkMxMjMuMjI0IDE4LjY5MjIgMTIyLjUyOSAxOC45OTU3IDEyMi4wMDcgMTkuNjAyNUMxMjEuNTI5IDIwLjE2NjEgMTIxLjI2OCAyMS4wMzMgMTIxLjI2OCAyMi4xMTY3WiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTMxLjc4NyAxNi4zOTQ5SDEzNy40ODFDMTM5LjIxOSAxNi4zOTQ5IDE0MC40MzYgMTYuNjk4MyAxNDEuMTc1IDE3LjM0ODVDMTQxLjkxNCAxNy45OTg4IDE0Mi4yNjIgMTkuMDgyNCAxNDIuMjYyIDIwLjU1NjNWMjcuNzk1M0gxMzkuMjE5VjIwLjk0NjRDMTM5LjIxOSAyMC4wNzk0IDEzOS4wODkgMTkuNTE1OSAxMzguODI4IDE5LjI5OTJDMTM4LjU2NyAxOS4wMzkxIDEzOC4wNDYgMTguOTA5MSAxMzcuMjIgMTguOTA5MUgxMzQuNzg2VjI3LjgzODZIMTMxLjc0M1YxNi4zOTQ5SDEzMS43ODdaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03LjEyODMxIDMuNzM3NDNIMFYxMC44NDY0SDcuMTI4MzFWMy43Mzc0M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTIzLjI1MTMgLTIuMTU3MjVlLTA1TDE4LjU1MTMgNS41MTY4NUwyNC4wODMxIDEwLjIwNDFMMjguNzgzMSA0LjY4NzI1TDIzLjI1MTMgLTIuMTU3MjVlLTA1WiIgZmlsbD0iI0ZGODYwMCIvPgo8cGF0aCBkPSJNMTUuNjA0MSAzLjczNzQzSDguNDc1ODNWMTAuODQ2NEgxNS42MDQxVjMuNzM3NDNaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03LjEyODMxIDEyLjE5MDJIMFYxOS4yOTkySDcuMTI4MzFWMTIuMTkwMloiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTE1LjYwNDEgMTIuMTkwMkg4LjQ3NTgzVjE5LjI5OTJIMTUuNjA0MVYxMi4xOTAyWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMjQuMDc5NyAxMi4xOTAySDE2Ljk1MTRWMTkuMjk5MkgyNC4wNzk3VjEyLjE5MDJaIiBmaWxsPSIjRkY4NjAwIi8+CjxwYXRoIGQ9Ik03LjEyODMxIDIwLjY4NjNIMFYyNy43OTUzSDcuMTI4MzFWMjAuNjg2M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTE1LjYwNDEgMjAuNjg2M0g4LjQ3NTgzVjI3Ljc5NTNIMTUuNjA0MVYyMC42ODYzWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMjQuMTIzMiAyMC42ODYzSDE2Ljk5NDlWMjcuNzk1M0gyNC4xMjMyVjIwLjY4NjNaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik0xNDYgMTUuODMxM0MxNDYgMTYuODcxNyAxNDUuMTc0IDE3LjY5NTMgMTQ0LjEzMSAxNy42OTUzQzE0My4wODggMTcuNjk1MyAxNDIuMjYyIDE2Ljg3MTcgMTQyLjI2MiAxNS44MzEzQzE0Mi4yNjIgMTQuNzkxIDE0My4wODggMTQuMDEwNyAxNDQuMTMxIDE0LjAxMDdDMTQ1LjEzMSAxMy45Njc0IDE0NiAxNC43OTEgMTQ2IDE1LjgzMTNaTTE0Mi45NTcgMTQuNzkxQzE0Mi42OTcgMTUuMDUxMSAxNDIuNTY2IDE1LjQ0MTIgMTQyLjU2NiAxNS44MzEzQzE0Mi41NjYgMTYuNjk4MyAxNDMuMjYyIDE3LjM5MTggMTQ0LjEzMSAxNy4zOTE4QzE0NSAxNy4zOTE4IDE0NS42OTYgMTYuNjk4MyAxNDUuNjk2IDE1LjgzMTNDMTQ1LjY5NiAxNS4wMDc3IDE0NSAxNC4yNzA4IDE0NC4xNzQgMTQuMjcwOEMxNDMuNjUzIDE0LjI3MDggMTQzLjI2MiAxNC40NDQyIDE0Mi45NTcgMTQuNzkxWk0xNDQuODcgMTYuOTE1SDE0NC40NzlMMTQzLjkxNCAxNi4wOTE0VjE2LjkxNUgxNDMuNjA5VjE0Ljc0NzZIMTQzLjk1N0MxNDQuNDM1IDE0Ljc0NzYgMTQ0LjY1MyAxNC45NjQ0IDE0NC42NTMgMTUuMzU0NUMxNDQuNjUzIDE1LjY1NzkgMTQ0LjQ3OSAxNS44NzQ3IDE0NC4xNzQgMTUuOTYxNEwxNDQuODcgMTYuOTE1Wk0xNDQuMDQ0IDE1LjY1NzlDMTQ0LjI2MSAxNS42NTc5IDE0NC4zOTIgMTUuNTI3OSAxNDQuMzkyIDE1LjM1NDVDMTQ0LjM5MiAxNS4xMzc4IDE0NC4yNjEgMTUuMDUxMSAxNDQuMDAxIDE1LjA1MTFIMTQzLjkxNFYxNS42NTc5SDE0NC4wNDRaIiBmaWxsPSIjMzU0M0E4Ii8+Cjwvc3ZnPgo=" style="\n    text-align: left;\n    width: 146px;\n    position: absolute;\n    top: 14px;\n    left: 31px;\n">\n            </div>\n            <div style="\n    position: relative;\n    top: 80px;\n    left: 32px;\n    font-size: 20px;\n    text-align: left;\n    font-weight: 700;\n    letter-spacing: 0.02em;\n    font-style: normal;\n    line-height: 125%;\n    ">Claim your FREE account and get a key in less than a minute</div>\n            <ul style="\n        font-size: 15px;\n        font-weight: 400;\n        color: #333333;\n        letter-spacing: 0.01em;\n        position: relative;\n        left: 32px;\n        top: 88px;\n        line-height: 180%;\n        ">\n                <li><span>Access to a 30-day free trial of any of our products.</span></li>\n                <li><span>Access to 24x5 support by developers via the <a href="https://support.syncfusion.com/create" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">support tickets</a>, <a href="https://www.syncfusion.com/forums" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">forum</a>, <a href="https://www.syncfusion.com/feedback" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">feature &amp; feedback page</a> and chat.</span></li>\n                <li><span>200+ <a href="https://www.syncfusion.com/succinctly-free-ebooks" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">ebooks </a>on the latest technologies, industry trends, and research topics.</span>\n                </li>\n                <li><span>Largest collection of over 7,000 flat and wireframe icons for free with Syncfusion <a href="https://www.syncfusion.com/succinctly-free-ebooks" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">Metro Studio.</a></span></li>\n                <li><span>Free and unlimited access to Syncfusion technical <a href="https://www.syncfusion.com/blogs/" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">blogs</a> and <a href="https://www.syncfusion.com/resources/techportal/whitepapers" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">whitepapers.</a></span></li>\n            </ul>\n            <div style="\n            font-size: 18px;\n            font-weight: 700;\n            position: relative;\n            line-height: 125%;\n            letter-spacing: 0.02em;\n            top: 90px;\n            left: 32px;\n    ">Syncfusion is trusted by 29,000+ businesses worldwide</div>\n            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODIwIiBoZWlnaHQ9IjU2IiB2aWV3Qm94PSIwIDAgODIwIDU2IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00MjcuNjE3IDIyLjU2NTlWMjQuNzIyNkM0MjYuNTU4IDI0LjM2MzggNDI1LjM5OCAyNC4xNTQ0IDQyNC40NzQgMjQuMTU0NEM0MjMuMzMzIDI0LjE1NDQgNDIyLjY5OCAyNC40OTEyIDQyMi42OTggMjUuMDk2M0M0MjIuNjk4IDI1LjQ4MjQgNDIyLjk3NiAyNS43MzgzIDQyMy43NzMgMjYuMDg1NEw0MjUuOTE3IDI3LjAxNzRDNDI3LjYzMyAyNy43NjM5IDQyOC40OTcgMjguODUzIDQyOC40OTcgMzAuMjY4MUM0MjguNDk3IDMyLjQ1MjIgNDI2LjU0NiAzMy44MyA0MjMuNDUyIDMzLjgzQzQyMi4zMjQgMzMuODMgNDIxLjAxOCAzMy42NzM2IDQxOS42MzYgMzMuMzcwOVYzMS4xNDE2QzQyMS4wMDYgMzEuNTAyOCA0MjIuMjYyIDMxLjY5NTcgNDIzLjIzOSAzMS42OTU3QzQyNC41MTggMzEuNjk1NyA0MjUuMjAzIDMxLjM1MDYgNDI1LjIwMyAzMC43MDc0QzQyNS4yMDMgMzAuMzIwOCA0MjQuOTM1IDMwLjAzNjcgNDI0LjMyMiAyOS43NzE3TDQyMS45NzUgMjguNzU5M0M0MjAuMjM2IDI4LjAwNzggNDE5LjQzMyAyNi45OTU0IDQxOS40MzMgMjUuNTUyMUM0MTkuNDMzIDIzLjQ4MzcgNDIxLjMxNCAyMi4xNjQ5IDQyNC4yNjUgMjIuMTY0OUM0MjUuMjk4IDIyLjE2NDkgNDI2LjU3IDIyLjMxNzEgNDI3LjYxNyAyMi41NjU5VjIyLjU2NTlaTTQzMC4xNjcgMjIuMzkwOUg0MzMuNjM1VjMzLjYwMzlINDMwLjE2N1YyMi4zOTA5Wk00NDQuOTExIDIyLjM5MDlWMjQuNDQ1MUg0MzkuNjc1VjI2Ljk3NDJINDQ0LjI0OVYyOC44MzIzSDQzOS42NzVWMzEuNDU0M0g0NDQuOTc4VjMzLjYwMzlINDM2LjMwNVYyMi4zOTA5SDQ0NC45MTFaTTQ2MS4yOTQgMjIuMzkwOVYzMy42MDM5SDQ1Ny45MzlWMjYuMjIzNkw0NTQuNjUyIDMzLjY5MTVINDUyLjUzMUw0NDkuMjY2IDI2LjIyMzZWMzMuNjAzOUg0NDYuOTQ5VjIyLjM5MDlINDUxLjE4NEw0NTQuMTc4IDI5LjIxMTRMNDU3LjE1NiAyMi4zOTA5SDQ2MS4yOTRWMjIuMzkwOVpNNDcyLjU3OSAyMi4zOTA5VjI0LjQ0NTFINDY3LjMzNVYyNi45NzQySDQ3MS45MDhWMjguODMyM0g0NjcuMzM1VjMxLjQ1NDNINDcyLjYzOFYzMy42MDM5SDQ2My45NTdWMjIuMzkwOUg0NzIuNTc5Wk00ODQuNzk0IDIyLjM5MDlWMzMuNjAzOUg0ODEuMDkzTDQ3Ni45MjYgMjYuNDEyM1YzMy42MDM5SDQ3NC42MDhWMjIuMzkwOUg0NzguNDA3TDQ4Mi40ODQgMjkuNDg3NlYyMi4zOTA5SDQ4NC43OTRaTTQ5NC44NTggMjIuNTY1OVYyNC43MjI2QzQ5My44MDcgMjQuMzY2MyA0OTIuNjQgMjQuMTU0NCA0OTEuNzMyIDI0LjE1NDRDNDkwLjU3MyAyNC4xNTQ0IDQ4OS45MzkgMjQuNDg1OCA0ODkuOTM5IDI1LjA5M0M0ODkuOTM5IDI1LjQ4ODYgNDkwLjE5OCAyNS43MjUgNDkxLjAyMyAyNi4wODU5TDQ5My4xNTcgMjcuMDE3OEM0OTQuODg1IDI3Ljc3MjIgNDk1LjczOSAyOC44NTE4IDQ5NS43MzkgMzAuMjgzNUM0OTUuNzM5IDMyLjQ1NTkgNDkzLjc4NiAzMy44MzA4IDQ5MC42OTkgMzMuODMwOEM0ODkuNTY5IDMzLjgzMDggNDg4LjI1OSAzMy42NzM2IDQ4Ni44NzggMzMuMzcxN1YzMS4xNDI0QzQ4OC4yNDcgMzEuNTAyOCA0ODkuNDk5IDMxLjY5NjUgNDkwLjQ3IDMxLjY5NjVDNDkxLjc0IDMxLjY5NjUgNDkyLjQ0NCAzMS4zNTE1IDQ5Mi40NDQgMzAuNzI4NUM0OTIuNDQ0IDMwLjMxNjMgNDkyLjE5NyAzMC4wNTA0IDQ5MS41NTUgMjkuNzcyNUw0ODkuMjE4IDI4Ljc2MDFDNDg3LjQ2NyAyOC4wMDI4IDQ4Ni42NzQgMjcuMDAyIDQ4Ni42NzQgMjUuNTUzM0M0ODYuNjc0IDIzLjQ4NjIgNDg4LjU1NiAyMi4xNjY1IDQ5MS41IDIyLjE2NjVDNDkyLjUzNiAyMi4xNjUzIDQ5My44MTMgMjIuMzE3MSA0OTQuODU4IDIyLjU2NTlWMjIuNTY1OVoiIGZpbGw9IiMwMEEwQjAiLz4NCjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMzUyLjQxMyAyNi44MTlDMzUwLjk5MiAyNS4yNzU5IDM0OS42MzggMjMuODMxNSAzNDguMzQ5IDIyLjE1NzRMMzQ3LjkyIDIxLjU5OTVDMzQ5LjQwNiAyMS4zNjkzIDM1MC42OTUgMjAuMzg0OCAzNTAuNjk1IDE4Ljc0MzNDMzUwLjY5NSAxNy4yMzMxIDM0OS41MzkgMTYuMjQ4MiAzNDcuODIxIDE2LjI0ODJDMzQ2LjU5OCAxNi4yNDgyIDM0NS43MDYgMTYuMzEzNyAzNDUuMjQzIDE2LjMxMzdDMzQ0LjcxNSAxNi4zMTM3IDM0NC4yODUgMTYuMzEzNyAzNDMuNzkgMTYuMjgwOEMzNDMuODU2IDE4LjE1MjEgMzQzLjg4OSAxOC4yODM0IDM0My44ODkgMTkuNDMyMlYyMy42MzQzQzM0My44ODkgMjQuNDU1MyAzNDMuODU2IDI1LjI3NTkgMzQzLjc5IDI2LjgxODZDMzQ0LjE1MyAyNi43MjAyIDM0NC41MTcgMjYuNzIwMiAzNDQuNzgxIDI2LjcyMDJDMzQ1LjA0NSAyNi43MjAyIDM0NS40MDkgMjYuNzUzMSAzNDUuNzA2IDI2LjgxODZDMzQ1LjY0IDI1Ljc2NzkgMzQ1LjYwNyAyNC4wMjgzIDM0NS42MDcgMjMuNjM0M1YyMS4yMDUxQzM0Ny4xNiAyMy4yMDc3IDM0OS4yMDkgMjUuNjY5NSAzNTAuMDAxIDI2LjgxODZDMzUwLjM5OCAyNi43MjAyIDM1MC43MjggMjYuNzIwMiAzNTEuMTI0IDI2LjcyMDJDMzUxLjQ1NSAyNi43MjA2IDM1MS45MTggMjYuNzIwNiAzNTIuNDEzIDI2LjgxOVYyNi44MTlaTTM0OC44NzggMTkuMDA2QzM0OC44NzggMjAuMDIzNCAzNDguMzE3IDIxLjIwNTQgMzQ2Ljc5NyAyMS4yMDU0QzM0Ni40IDIxLjIwNTQgMzQ2LjAwMyAyMS4yMDU0IDM0NS42MDcgMjEuMTcyNVYxNy4wNjg4QzM0Ni4wMDMgMTYuOTcwNCAzNDYuNDk5IDE2LjkwNDYgMzQ2Ljc2MyAxNi45MDQ2QzM0OC4wODUgMTYuOTA0OSAzNDguODc4IDE3LjY2IDM0OC44NzggMTkuMDA2VjE5LjAwNlpNMzgyLjM4IDI2Ljg4NDVDMzgxLjgxOSAyNi4yOTM2IDM4MC45NiAyNS4zNDE3IDM4MC4xMzQgMjQuNDIyM0MzODAuODI4IDIzLjY2NzIgMzgxLjU1NSAyMi41NTEgMzgxLjk4NCAyMS41OTkxQzM4MS43MTkgMjEuNDY3OCAzODEuMzU2IDIxLjIwNTEgMzgxLjA5MiAyMC45NzUzQzM4MC45OTMgMjEuNzk1OSAzODAuNDMyIDIyLjg3OTIgMzc5LjYzOSAyMy44MzE1QzM3OC41MTUgMjIuNTE4NSAzNzguMjE4IDIyLjE1NzQgMzc3LjE5MyAyMC43Nzg1QzM3OC41ODEgMTkuODkyMSAzNzkuMjQyIDE4Ljg3NDMgMzc5LjI0MiAxOC4wNTM3QzM3OS4yNDIgMTcuMTAxNyAzNzguNTgxIDE2LjExNjkgMzc2Ljk2MiAxNi4xMTY5QzM3NS4yMTEgMTYuMTE2OSAzNzQuMzUyIDE3LjIwMDIgMzc0LjM1MiAxOC40ODAzQzM3NC4zNTIgMTkuMjM1NCAzNzQuNTUgMTkuODkxNyAzNzUuMzc2IDIwLjk3NTNDMzc0LjA1NCAyMS42OTc1IDM3Mi43NjYgMjIuNzQ3OSAzNzIuNzY2IDI0LjQyMjNDMzcyLjc2NiAyNi4wNjM5IDM3NC4wODcgMjYuOTE3NCAzNzUuNzA3IDI2LjkxNzRDMzc3LjE5MyAyNi45MTc0IDM3OC4xNTEgMjYuMzI2NiAzNzguOTEyIDI1LjYzNjlMMzc5LjkwMiAyNi44MTlDMzgwLjIgMjYuNzg2MSAzODAuNTMxIDI2LjcyMDYgMzgwLjg2MSAyNi43MjA2QzM4MS4zMjQgMjYuNzIwNiAzODEuODUyIDI2Ljc4NjEgMzgyLjM4IDI2Ljg4NDVWMjYuODg0NVpNMzgzLjM3MiA0MC4wMTU4QzM4MS45MTggMzguNDczIDM4MC41OTcgMzcuMDYxMiAzNzkuMzA4IDM1LjM4NzFMMzc4Ljg3OCAzNC44Mjg4QzM4MC4zMzIgMzQuNTk5MSAzODEuNjU0IDMzLjYxNSAzODEuNjU0IDMxLjk0MDFDMzgxLjY1NCAzMC40NjMyIDM4MC40OTggMjkuNDQ1NCAzNzguNzc5IDI5LjQ0NTRDMzc3LjU1NyAyOS40NDU0IDM3Ni42MzIgMjkuNTQzNSAzNzYuMTY5IDI5LjU0MzVDMzc1LjY3MyAyOS41NDM1IDM3NS4yNDQgMjkuNTQzNSAzNzQuNzQ4IDI5LjQ3NzZDMzc0LjgxNCAzMS4zODIyIDM3NC44NDggMzEuNDgwMiAzNzQuODQ4IDMyLjYyOTRWMzYuODMxMUMzNzQuODQ4IDM3LjY1MjQgMzc0LjgxNCAzOC41MDUyIDM3NC43NDggNDAuMDE1NEMzNzUuMTEyIDM5Ljk0OTYgMzc1LjQ3NSAzOS45NDk2IDM3NS43MDcgMzkuOTQ5NkMzNzYuMDA0IDM5Ljk0OTYgMzc2LjM2OCAzOS45NDk2IDM3Ni42MzIgNDAuMDE1NEMzNzYuNTY1IDM4Ljk5OCAzNzYuNTMzIDM3LjI1ODEgMzc2LjUzMyAzNi44MzExVjM0LjQzNDhDMzc4LjExOSAzNi40MDQyIDM4MC4xNjcgMzguODk5NiAzODAuOTYgNDAuMDE1NEMzODEuMzU2IDM5Ljk0OTYgMzgxLjY4NyAzOS45NDk2IDM4Mi4wODMgMzkuOTQ5NkMzODIuMzggMzkuOTUgMzgyLjg3NiAzOS45NSAzODMuMzcyIDQwLjAxNThaTTM2Mi4xNiAyNi44MTlDMzYwLjk3MSAyNS41NzE1IDM1OC44ODkgMjIuOTc4IDM1OC4wNjMgMjEuOTkzNUwzNTcuMjM3IDIwLjk3NTdDMzU4LjA5NiAxOS45NTgzIDM1OC42OSAxOS4zMzQxIDM1OS4zMTkgMTguNTc5QzM2MC4wNDUgMTcuNzkxIDM2MC43MDYgMTYuOTcwNCAzNjEuNDk5IDE2LjI0ODJDMzYxLjEzNiAxNi4zMTM3IDM2MC45MzcgMTYuMzEzNyAzNjAuNzM5IDE2LjMxMzdDMzYwLjU0MSAxNi4zMTM3IDM2MC4zNDMgMTYuMzEzNyAzNjAuMTQ0IDE2LjI0ODJDMzU5LjkxMyAxNi42MDkzIDM1OS41NSAxNy4wNjg4IDM1OS4xNTMgMTcuNTI4N0MzNTguNzU2IDE3Ljk1NTYgMzU4LjM2IDE4LjM4MjIgMzU4LjA2MyAxOC43NDMzQzM1Ny4yMzYgMTkuNjk1MiAzNTYuNzc0IDIwLjE1NDcgMzU1LjU4NSAyMS4yNzA5VjE5LjQ2NTVDMzU1LjU4NSAxOC40MTUxIDM1NS41ODUgMTcuNzI1NSAzNTUuNjUxIDE2LjI0ODJDMzU1LjMyMSAxNi4zMTM3IDM1NC45NTcgMTYuMzEzNyAzNTQuNzI2IDE2LjMxMzdDMzU0LjQ2MSAxNi4zMTM3IDM1NC4wMzIgMTYuMzEzNyAzNTMuNzY4IDE2LjI0ODJDMzUzLjgzMyAxNy44MjM5IDM1My44NjcgMTguMjgzNCAzNTMuODY3IDE5LjQzMjVWMjMuNjM0N0MzNTMuODY3IDI0LjY4NSAzNTMuODMzIDI1LjMwODggMzUzLjc2OCAyNi44MTlDMzU0LjE2NCAyNi43MjA2IDM1NC40OTUgMjYuNzIwNiAzNTQuNzI2IDI2LjcyMDZDMzU0Ljk1NyAyNi43MjA2IDM1NS4zNTMgMjYuNzUzNSAzNTUuNjUxIDI2LjgxOUMzNTUuNTg1IDI1LjE0NDkgMzU1LjU4NSAyNC4xNTk3IDM1NS41ODUgMjMuNjM0N1YyMS40MzUyQzM1Ni44MDcgMjIuODc5NiAzNTguNjkgMjUuMjQzMyAzNTkuNzQ4IDI2LjgxOUMzNjAuMTMgMjYuNzU2MyAzNjAuNTE3IDI2LjcyMzQgMzYwLjkwNSAyNi43MjA2QzM2MS4yMDIgMjYuNzIwNiAzNjEuNjY1IDI2LjcyMDYgMzYyLjE2IDI2LjgxOVYyNi44MTlaTTM3Mi42MDEgNDAuMDE1OEMzNzIuNTY4IDM5Ljg1MTkgMzcyLjUzNSAzOS43MjA2IDM3Mi41MzUgMzkuNTIzNEMzNzIuNTM1IDM5LjM5MjggMzcyLjU2OCAzOS4yMjgxIDM3Mi42MDEgMzkuMDk2NEMzNzEuMjggMzkuMTI5NyAzNjguOTAxIDM5LjE5NTIgMzY4LjM3MiAzOS4xOTUyVjM0LjY2NDlDMzY5LjY5NCAzNC42NjQ5IDM3MC45ODIgMzQuNjY0OSAzNzIuMjcgMzQuNzk2M0MzNzIuMjM4IDM0LjYzMjQgMzcyLjIwNCAzNC40Njc3IDM3Mi4yMDQgMzQuMzM2NEMzNzIuMjA0IDM0LjIwNTggMzcyLjIwNCAzNC4wNDE5IDM3Mi4yNyAzMy44NDQ3QzM3MS4zNDYgMzMuOTQyOCAzNjkuMTk4IDMzLjk3NiAzNjguMzcyIDMzLjk3NlYzMC4yNjZDMzY5LjgyNiAzMC4yNjYgMzcwLjY4NSAzMC4yNjYgMzcxLjE4IDMwLjI5OTNMMzcyLjUwMiAzMC4zNjUxQzM3Mi40MzYgMzAuMTY3OSAzNzIuNDM2IDMwLjA2OTIgMzcyLjQzNiAyOS45MDUzQzM3Mi40MzYgMjkuNzQxNCAzNzIuNDM2IDI5LjcwODEgMzcyLjUwMiAyOS40NDU4QzM3MS40MTEgMjkuNDc4MyAzNjkuOTI1IDI5LjU0MzggMzY5LjI2NCAyOS41NDM4QzM2OC44MDIgMjkuNTQzOCAzNjcuMzQ4IDI5LjUxMTMgMzY2LjU4NyAyOS40NDU4QzM2Ni42NTQgMzAuMjY2NCAzNjYuNjg2IDMxLjYxMjMgMzY2LjY4NiAzMi41NjQyVjM2Ljg2NTFDMzY2LjY4NiAzNy40ODg1IDM2Ni42MiAzOC43MzU3IDM2Ni41ODcgNDAuMDE2MkMzNjcuNTEzIDM5Ljk1MDMgMzY4LjgwMiAzOS45NTAzIDM2OS4yNjQgMzkuOTUwM0MzNzAuMDI0IDM5Ljk1IDM3MS42NDMgMzkuOTUgMzcyLjYwMSA0MC4wMTU4Wk0zNjQuNjA1IDM5LjEyOTRDMzY0LjQ0IDM4LjgwMDggMzY0LjM0MSAzOC4zMDg4IDM2NC4yNzUgMzguMDQ2MUMzNjIuOTIgMzkuMTYxOSAzNjEuOTk1IDM5LjM5MjQgMzYwLjkzOCAzOS4zOTI0QzM1OC41OTIgMzkuMzkyNCAzNTcuMzM3IDM3LjI5MTMgMzU3LjMzNyAzNC42NjQ5QzM1Ny4zMzcgMzEuNzQzNiAzNTguNzU3IDMwLjAzNjIgMzYxLjE2OSAzMC4wMzYyQzM2Mi40MjUgMzAuMDM2MiAzNjMuNjE0IDMwLjU5NDUgMzY0LjE3NiAzMS4xNTI4QzM2NC4yMDggMzAuODg5OCAzNjQuMzA4IDMwLjM2NDggMzY0LjQ3MyAzMC4wNjg4QzM2My4zMTYgMjkuNTExMyAzNjIuMjU5IDI5LjM0NjYgMzYxLjEwMiAyOS4zNDY2QzM1Ny4yMzcgMjkuMzQ2NiAzNTUuNDUzIDMxLjc0MzYgMzU1LjQ1MyAzNC44Mjg4QzM1NS40NTMgMzguMzA5MSAzNTcuNzk4IDQwLjE0NzEgMzYwLjczOSA0MC4xNDcxQzM2Mi40MjUgNDAuMTQ3MSAzNjMuODEyIDM5LjYyMjIgMzY0LjYwNSAzOS4xMjk0VjM5LjEyOTRaTTM0Mi4zMDMgMjYuODE5QzM0MC41MTkgMjMuNDA0OSAzMzguOCAxOS4xMzczIDMzNy41NzggMTYuMTE2OUgzMzcuMzhDMzM2LjU4NyAxOC4wMjA3IDMzNS4xMzMgMjEuMjcwOSAzMzQuNzM3IDIyLjE4OTlDMzM0LjI3NCAyMy4zMDYxIDMzMy4yNSAyNS41MDU2IDMzMi41ODkgMjYuODE4NkMzMzIuODAzIDI2Ljc1MzggMzMzLjAyNiAyNi43MjA2IDMzMy4yNSAyNi43MjAyQzMzMy40NDggMjYuNzIwMiAzMzMuNjEzIDI2Ljc1MzEgMzMzLjg0NSAyNi44MTg2QzMzNC4xNzUgMjUuOTMyMiAzMzQuNjM4IDI0LjgxNiAzMzUuMTMzIDIzLjYzNDNDMzM1Ljc5NCAyMy42MDE0IDMzNi4zODkgMjMuNTY4OCAzMzYuOTg0IDIzLjU2ODhDMzM3LjYxMiAyMy41Njg4IDMzOC4yNzIgMjMuNjAxNCAzMzguOTMzIDIzLjYzNDNMMzM5LjU5NCAyNS4yMUwzNDAuMjU1IDI2LjgxODZDMzQwLjcxNyAyNi43MjAyIDM0MS4wOCAyNi43MjAyIDM0MS4zMTIgMjYuNzIwMkMzNDEuNjA5IDI2LjcyMDYgMzQxLjg3MyAyNi43MjA2IDM0Mi4zMDMgMjYuODE5VjI2LjgxOVpNMzUzLjYzNiAyOS40NDU0QzM1My40MzggMjkuNTExMyAzNTMuMjczIDI5LjU0MzUgMzUzLjEwNyAyOS41NDM1QzM1Mi45MDkgMjkuNTQzNSAzNTIuNzQ0IDI5LjUxMDkgMzUyLjU0NiAyOS40NDU0QzM1Mi42NDQgMzAuNzU4NCAzNTIuNjc4IDMyLjA3MTQgMzUyLjY3OCAzMy4zNTE5VjM2LjczMzRDMzUyLjE0OSAzNi4yNzM2IDM1MC44NiAzNS4wOTE5IDM0OS4zNzQgMzMuNzEzQzM0Ny44NiAzMi4zMDc0IDM0Ni4zOTQgMzAuODUxMSAzNDQuOTc5IDI5LjM0NjZIMzQ0Ljc0OEMzNDQuNzgxIDMwLjgyNDMgMzQ0LjgxNCAzMi40IDM0NC44MTQgMzMuODExNFYzNS44Nzk5QzM0NC44MTQgMzcuNjUyOCAzNDQuODE0IDM4LjYwNDcgMzQ0LjcxNSA0MC4wMTYyQzM0NC45OCAzOS45NTAzIDM0NS4xMTIgMzkuOTUwMyAzNDUuMzEgMzkuOTUwM0MzNDUuNDQyIDM5Ljk1MDMgMzQ1LjU3NSAzOS45NTAzIDM0NS44MDYgNDAuMDE2MkMzNDUuNzQgMzguNjcwNiAzNDUuNzA3IDM2LjQ3MDggMzQ1LjcwNyAzNS44Nzk5VjMyLjU5NjhDMzQ4LjE4NSAzNC44NjI1IDM1MS4yMjQgMzcuODgyNiAzNTMuNDcxIDQwLjE0NzVIMzUzLjYwM0MzNTMuNjAzIDM4LjkzMjkgMzUzLjUzNyAzNy43MTc5IDM1My41MzcgMzYuNTA0VjM0LjYzMjdDMzUzLjUzNiAzMi40MzI1IDM1My41MzYgMzEuMzQ5MyAzNTMuNjM2IDI5LjQ0NTRaTTM0Mi41NjcgNDAuMDE1OEMzNDIuNTM0IDM5Ljg1MTkgMzQyLjUwMSAzOS43MjA2IDM0Mi41MDEgMzkuNTIzNEMzNDIuNTAxIDM5LjM5MjggMzQyLjUzNCAzOS4yMjgxIDM0Mi41NjcgMzkuMDk2NEMzNDEuMjQ2IDM5LjEyOTcgMzM4Ljg2NyAzOS4xOTUyIDMzOC4zNzEgMzkuMTk1MlYzNC42NjQ5QzMzOS42NiAzNC42NjQ5IDM0MC45NDggMzQuNjY0OSAzNDIuMjM3IDM0Ljc5NjNDMzQyLjIwNCAzNC42MzI0IDM0Mi4xNzEgMzQuNDY3NyAzNDIuMTcxIDM0LjMzNjRDMzQyLjE3MSAzNC4yMDU4IDM0Mi4xNzEgMzQuMDQxOSAzNDIuMjM3IDMzLjg0NDdDMzQxLjMxMiAzMy45NDI4IDMzOS4xOTcgMzMuOTc2IDMzOC4zNzEgMzMuOTc2VjMwLjI2NkMzMzkuNzkyIDMwLjI2NiAzNDAuNjUxIDMwLjI2NiAzNDEuMTc5IDMwLjI5OTNMMzQyLjQ2OCAzMC4zNjUxQzM0Mi40MzUgMzAuMTY3OSAzNDIuNDM1IDMwLjA2OTIgMzQyLjQzNSAyOS45MDUzQzM0Mi40MzUgMjkuNzQxNCAzNDIuNDM1IDI5LjY3NTUgMzQyLjQ2OCAyOS40NDU4QzM0MS4zNzggMjkuNDc4MyAzMzkuODkxIDI5LjU0MzggMzM5LjIzIDI5LjU0MzhDMzM4Ljc2NyAyOS41NDM4IDMzNy4zMTQgMjkuNTExMyAzMzYuNTU0IDI5LjQ0NThDMzM2LjYyIDMwLjI2NjQgMzM2LjY1MyAzMS42MTIzIDMzNi42NTMgMzIuNTY0MlYzNi44NjUxQzMzNi42NTMgMzcuNDg4NSAzMzYuNTg3IDM4LjczNTcgMzM2LjU1NCA0MC4wMTYyQzMzNy41MTIgMzkuOTUwMyAzMzguNzY3IDM5Ljk1MDMgMzM5LjIzIDM5Ljk1MDNDMzM5Ljk5IDM5Ljk1IDM0MS42NDIgMzkuOTUgMzQyLjU2NyA0MC4wMTU4VjQwLjAxNThaTTMzMS4yMDEgMjYuODE5QzMzMC42NzMgMjMuMjQwNiAzMzAuMjEgMTkuNDk4NCAzMjkuODQ3IDE2LjExNjlDMzI5Ljc0OCAxNi4xNDk4IDMyOS43MTQgMTYuMTQ5OCAzMjkuNjQ5IDE2LjExNjlDMzI4Ljk1NSAxNy4zMzE1IDMyOC4xNjIgMTguNjQ0NSAzMjcuNTY3IDE5LjU2MzlDMzI3LjAwNiAyMC40NTAzIDMyNi4zNDUgMjEuNTAwNyAzMjUuNTg1IDIyLjYxNjlDMzIzLjk5OSAyMC41ODE3IDMyMi4zNDcgMTguMDIxMSAzMjEuMjU2IDE2LjExNjlDMzIxLjE5IDE2LjE0OTggMzIxLjE1NyAxNi4xMTY5IDMyMS4wOTEgMTYuMTE2OUMzMjAuNzI4IDE5LjQ5OCAzMjAuMjMyIDIzLjI3MzIgMzE5LjczNiAyNi44MTlDMzIwLjAwMSAyNi43MjA2IDMyMC4xNjYgMjYuNzIwNiAzMjAuMjk4IDI2LjcyMDZDMzIwLjQ5NiAyNi43MjA2IDMyMC42MjggMjYuNzUzNSAzMjAuODU5IDI2LjgxOUMzMjAuOTkyIDI0LjQ1NTMgMzIxLjI1NiAyMi4xMjQ0IDMyMS41NTMgMTkuNjYyM0MzMjIuODQyIDIxLjUzMzYgMzIzLjk2NSAyMy4xNDIyIDMyNS4yMjEgMjQuODQ5M0MzMjYuMjc4IDIzLjIwNzcgMzI3LjM2OCAyMS40MzQ4IDMyOC41NTggMTkuNjI5NEMzMjguODg4IDIyLjE1NyAzMjkuMTg2IDI0LjQ1NTMgMzI5LjM1MSAyNi44MTlDMzI5Ljc4IDI2LjcyMDYgMzMwLjA3OCAyNi43MjA2IDMzMC4yNzYgMjYuNzIwNkMzMzAuNTQgMjYuNzIwNiAzMzAuODA1IDI2LjcyMDYgMzMxLjIwMSAyNi44MTlWMjYuODE5Wk0zMzQuOTY4IDMyLjIwMjhDMzM0Ljk2OCAzMC4yOTg5IDMzMy40NDggMjkuNDQ1NCAzMzEuNTk4IDI5LjQ0NTRDMzMwLjc3MiAyOS40NDU0IDMyOS44OCAyOS41NDM1IDMyOS4yNTIgMjkuNTQzNUMzMjkuMDIxIDI5LjU0MzUgMzI4LjUyNSAyOS41NDM1IDMyNy45OTcgMjkuNDc3NkMzMjguMDMgMzAuNTI4MyAzMjguMDk2IDMxLjQxNDggMzI4LjA5NiAzMi40MzIyVjM2LjkyOTVDMzI4LjA5NiAzNy45MTQ4IDMyOC4wMyAzOC45OTggMzI3Ljk5NyA0MC4wMTU0QzMyOC40MjYgMzkuOTQ5NiAzMjguNzI0IDM5Ljk0OTYgMzI4LjkyMiAzOS45NDk2QzMyOS4xNTMgMzkuOTQ5NiAzMjkuNDg0IDM5Ljk0OTYgMzI5Ljg4IDQwLjAxNTRDMzI5LjgxNSAzOS4wMzE5IDMyOS43ODIgMzguMDQ2NSAzMjkuNzgxIDM3LjA2MDlWMzUuNDJDMzMwLjE0NSAzNS40NTI2IDMzMC41MDggMzUuNDUyNiAzMzAuOTA1IDM1LjQ1MjZDMzMyLjgyIDM1LjQ1MjYgMzM0Ljk2OCAzNC43MzA0IDMzNC45NjggMzIuMjAyOFYzMi4yMDI4Wk0zMjYuMDE0IDM2Ljg5NzNDMzI2LjAxNCAzNS4yNTU4IDMyNC45MjQgMzQuNTMzNiAzMjMuMDQgMzMuNzQ1NkMzMjEuNjg2IDMzLjE4OCAzMjAuOTkyIDMyLjY5NTYgMzIwLjk5MiAzMS42NDQ1QzMyMC45OTIgMzAuNjYgMzIxLjc1MiAzMC4wMzYyIDMyMy4wMDggMzAuMDM2MkMzMjMuODM0IDMwLjAzNjIgMzI0LjU2MSAzMC4zMzE1IDMyNS4yMjIgMzAuODU2OEMzMjUuMjg3IDMwLjQ5NTcgMzI1LjQ1MyAzMC4xMzQ3IDMyNS42NTEgMjkuODM5NEMzMjQuODU4IDI5LjQ3ODMgMzIzLjk5OSAyOS4zNDcgMzIzLjA3NCAyOS4zNDdDMzIwLjM2NSAyOS4zNDcgMzE5LjUwNSAzMC44OTA1IDMxOS41MDUgMzIuMjAzNUMzMTkuNTA1IDMzLjgxMTggMzIwLjI5OSAzNC41NjcyIDMyMi4zNDcgMzUuMzU1M0MzMjMuNjM2IDM1Ljg0NyAzMjQuMjk2IDM2LjQ3MTEgMzI0LjI5NiAzNy41NTQ0QzMyNC4yOTYgMzguNzAzNSAzMjMuNDM3IDM5LjQyNTcgMzIyLjI0OCAzOS40MjU3QzMyMS41NTQgMzkuNDI1NyAzMjAuMzY1IDM5LjA2NDYgMzE5LjUzOSAzOC4zMDk5QzMxOS41MDUgMzguNzM2MSAzMTkuNTA1IDM5LjEzMDQgMzE5LjM3MyAzOS40OTE1QzMxOS45MDIgMzkuNzU0NiAzMjEuMTI1IDQwLjE0NzkgMzIyLjIxNSA0MC4xNDc5QzMyNC45OSA0MC4xNDcxIDMyNi4wMTQgMzguNDM5NyAzMjYuMDE0IDM2Ljg5NzNWMzYuODk3M1pNMzc4LjE1MiAxNy45ODgyQzM3OC4xNTIgMTguOTczIDM3Ny40NTggMTkuNjYyMyAzNzYuNzY0IDIwLjIyMDJDMzc2LjMwMSAxOS41NjM5IDM3NS43NCAxOC42NzcxIDM3NS43NCAxNy45ODgyQzM3NS43NCAxNy4yMzMxIDM3Ni4yNjggMTYuODA2MSAzNzYuOTk1IDE2LjgwNjFDMzc3Ljk4NyAxNi44MDY1IDM3OC4xNTIgMTcuNjkyNiAzNzguMTUyIDE3Ljk4ODJWMTcuOTg4MlpNMzc4LjQ4MiAyNS4wMTMyQzM3OC4xMTkgMjUuMzQxNyAzNzcuMjYgMjUuOTY1NSAzNzYuNTMzIDI1Ljk2NTVDMzc1LjU3NCAyNS45NjU1IDM3NC40MTggMjUuMjc1OSAzNzQuNDE4IDIzLjc5ODZDMzc0LjQxOCAyMi40ODU1IDM3NS4yNzcgMjEuODk0NyAzNzUuODA2IDIxLjU2NjVDMzc3LjAyOCAyMy4yNDA2IDM3Ny4wOTUgMjMuMzM5MSAzNzguNDgyIDI1LjAxMzJaTTM3OS44MDQgMzIuMjAyOEMzNzkuODA0IDMzLjI1MzUgMzc5LjI3NSAzNC40MDI2IDM3Ny43NTUgMzQuNDAyNkMzNzcuMzI2IDM0LjQwMjYgMzc2LjkyOSAzNC40MDI2IDM3Ni41MzMgMzQuMzY5M1YzMC4yNjU2QzM3Ni45MjkgMzAuMTY3NiAzNzcuNDI1IDMwLjEzNDMgMzc3LjcyMiAzMC4xMzQzQzM3OS4wMTEgMzAuMTM0MyAzNzkuODA0IDMwLjg4OTggMzc5LjgwNCAzMi4yMDI4Wk0zMzguNjAyIDIyLjgxNDFDMzM3LjkwOSAyMi44NDY2IDMzNy41NDUgMjIuODQ2NiAzMzcuMDgyIDIyLjg0NjZDMzM2LjUyMSAyMi44NDY2IDMzNi4xOSAyMi44NDY2IDMzNS40NjMgMjIuODE0MUwzMzcuMDgyIDE5LjAwNkwzMzguNjAyIDIyLjgxNDFaTTMzMy4xNTEgMzIuMzAwOEMzMzMuMTUxIDMzLjgxMTEgMzMyLjI1OCAzNC43OTU5IDMzMC44MDUgMzQuNzk1OUMzMzAuNTA3IDM0Ljc5NTkgMzMwLjE3NyAzNC43OTU5IDMyOS43OCAzNC43MzAxVjMwLjIzMjdDMzMwLjI0MyAzMC4xNjY5IDMzMC42MzkgMzAuMTMzOSAzMzEuMDM2IDMwLjEzMzlDMzMyLjQyNCAzMC4xMzQzIDMzMy4xNTEgMzEuMDIxMSAzMzMuMTUxIDMyLjMwMDhaTTM2OS41MjggMjMuNjY3NkMzNjkuNTI4IDIyLjAyNiAzNjguNDM4IDIxLjMwMzkgMzY2LjU1NSAyMC41MTYyQzM2NS4yIDE5Ljk1ODMgMzY0LjUwNiAxOS40OTg4IDM2NC41MDYgMTguNDE1MUMzNjQuNTA2IDE3LjQ2MzIgMzY1LjI2NiAxNi44MDY1IDM2Ni41MjEgMTYuODA2NUMzNjcuMzQ4IDE2LjgwNjUgMzY4LjA3NSAxNy4xMDE3IDM2OC43MzUgMTcuNjI3NUMzNjguODAyIDE3LjI2NjQgMzY4Ljk2NyAxNi45MDQ5IDM2OS4xMzEgMTYuNjQyMkMzNjguMzcyIDE2LjI4MTEgMzY3LjQ3OSAxNi4xMTcyIDM2Ni41ODcgMTYuMTE3MkMzNjMuOTQ0IDE2LjExNzIgMzYyLjk4NiAxNy42NiAzNjIuOTg2IDE5LjAwNkMzNjIuOTg2IDIwLjU4MTcgMzYzLjgxMiAyMS4zMzY4IDM2NS44NjEgMjIuMTI0NEMzNjcuMTQ5IDIyLjYxNjkgMzY3LjgxIDIzLjI0MDYgMzY3LjgxIDI0LjM1NjhDMzY3LjgxIDI1LjQ3MyAzNjYuOTUxIDI2LjE5NTIgMzY1Ljc2MiAyNi4xOTUyQzM2NS4wMzUgMjYuMTk1MiAzNjMuODc5IDI1LjgzNDEgMzYzLjA1MiAyNS4xMTE5QzM2My4wMiAyNS41Mzg5IDM2Mi45ODYgMjUuOSAzNjIuODg3IDI2LjI2MTFDMzYzLjM4MyAyNi41MjM4IDM2NC42MDYgMjYuOTE3NCAzNjUuNzI5IDI2LjkxNzRDMzY4LjUwNCAyNi45MTc0IDM2OS41MjggMjUuMjQzMyAzNjkuNTI4IDIzLjY2NzZWMjMuNjY3NloiIGZpbGw9IiMwMzY1NTUiLz4NCjxwYXRoIGQ9Ik02NDAuNDE2IDIwLjU1NzNDNjM4LjY3MSAxOS44MzU0IDYzNy42MzEgMTkuNTU1MSA2MzYuNTk4IDE5LjU1NTFDNjM1LjUxNCAxOS41NTUxIDYzNC44MTkgMTkuOTE3IDYzNC44MTkgMjAuNDc2NUM2MzQuODE5IDIyLjE2NDUgNjQwLjk2MiAyMS42ODkzIDY0MC45NjIgMjUuNTkzNkM2NDAuOTYyIDI3Ljc0NjQgNjM5LjAyNCAyOC45OTc0IDYzNi4zMzIgMjguOTk3NEM2MzQuMjIgMjguOTk3NCA2MzMuMTggMjguNDg4IDYzMS45ODMgMjcuOTExNlYyNS40OTYyQzYzMy43MSAyNi41NjM1IDYzNC43NjggMjYuOTQwMSA2MzYuMTAxIDI2Ljk0MDFDNjM3LjI1NiAyNi45NDAxIDYzNy44NzkgMjYuNTYzNSA2MzcuODc5IDI1LjkwNjNDNjM3Ljg3OSAyNC4wNjg1IDYzMS43MzcgMjQuNzQxNSA2MzEuNzM3IDIwLjcyMTNDNjMxLjczNyAxOC43ODI3IDYzMy41MzQgMTcuNDk5IDYzNi4zMzIgMTcuNDk5QzYzNy42ODIgMTcuNDk5IDYzOC45MDEgMTcuNzYzNSA2NDAuNDE2IDE4LjM3MDdWMjAuNTU3M1pNNjQ5LjAxNiAyOC40ODQxQzY0Ny45OTIgMjguODMwNiA2NDcuMTI2IDI4Ljk5NTQgNjQ2LjI2MiAyOC45OTU0QzY0My40MDIgMjguOTk1NCA2NDEuNTUyIDI3LjQ0MjIgNjQxLjU1MiAyNS4wNzkyQzY0MS41NTIgMjIuNzU5NCA2NDMuNDczIDIxLjEyMDIgNjQ2LjE1NiAyMS4xMjAyQzY0Ni45ODUgMjEuMTIwMiA2NDguMDQ0IDIxLjMxODIgNjQ4Ljg5MSAyMS42MTIzVjIzLjM4ODFDNjQ4LjIyMSAyMy4wNTYyIDY0Ny40NDQgMjIuODc0MSA2NDYuODA5IDIyLjg3NDFDNjQ1LjI3MyAyMi44NzQxIDY0NC4yODYgMjMuNzM0MyA2NDQuMjg2IDI1LjA2MTlDNjQ0LjI4NiAyNi40MDggNjQ1LjI1NiAyNy4yOTQgNjQ2LjcyIDI3LjI5NEM2NDcuMzM3IDI3LjI5NCA2NDcuODg2IDI3LjE2MjMgNjQ5LjAxNiAyNi43NjhMNjQ5LjAxNiAyOC40ODQxWk02NzEuMzIgMjQuMjA5QzY3MS40MjUgMjMuMTU0OCA2NzIuMDgxIDIyLjU0NTcgNjczLjA4NyAyMi41NDU3QzY3NC4wNzYgMjIuNTQ1NyA2NzQuNzQ2IDIzLjE3MjEgNjc0Ljg1MiAyNC4yMDlINjcxLjMyWk02NzIuOTEgMjEuMTIyOUM2NzAuNCAyMS4xMjI5IDY2OC42MTQgMjIuNzc1NSA2NjguNjE0IDI1LjEwMTJDNjY4LjYxNCAyNy40NDQxIDY3MC40NzEgMjguOTk1NCA2NzMuMzM1IDI4Ljk5NTRDNjczLjk3IDI4Ljk5NTQgNjc1LjUwNCAyOC45OTU0IDY3Ni45NjYgMjcuOTg3VjI2LjUwNDJDNjc1Ljc2OSAyNy4yOTkzIDY3NC45NzcgMjcuNTczMSA2NzMuOTU1IDI3LjU3MzFDNjcyLjM0MSAyNy41NzMxIDY3MS4zNTQgMjYuNzk0OSA2NzEuMjY1IDI1LjQ2NjZINjc3LjExQzY3Ny4yMzIgMjIuNjkzOSA2NzUuMjc5IDIxLjEyMjkgNjcyLjkxIDIxLjEyMjlWMjEuMTIyOVpNNjc4LjA5OSAyOC44NTcySDY4MC42NTRWMjEuMjYyN0g2NzguMDk5VjI4Ljg1NzJaTTY4Ny43NjcgMjYuNzgxNUM2ODcuMjM0IDI3LjIyODEgNjg2Ljc5MiAyNy40MDcyIDY4Ni4yNDYgMjcuNDA3MkM2ODUuMDQzIDI3LjQwNzIgNjg0LjI4MSAyNi40ODM4IDY4NC4yODEgMjUuMTAwNEM2ODQuMjgxIDIzLjU4NDEgNjg1LjA0MyAyMi43MTAxIDY4Ni4zMzEgMjIuNzEwMUM2ODYuNzkyIDIyLjcxMDEgNjg3LjM5NCAyMi45MDggNjg3Ljc2NyAyMy4xNTU5VjI2Ljc4MTVaTTY4Ny43NjcgMTcuNjM5MVYyMS41OTU4QzY4Ny4wNzYgMjEuMjg0NyA2ODYuMzg4IDIxLjEyMDIgNjg1LjY0NCAyMS4xMjAyQzY4My4zMTMgMjEuMTIwMiA2ODEuNyAyMi43MjY2IDY4MS43IDI1LjA1MDdDNjgxLjcgMjcuMzI0OCA2ODMuMzEzIDI4Ljk5NzQgNjg1LjUgMjguOTk3NEM2ODYuMzY3IDI4Ljk5NzQgNjg3LjAzNyAyOC43ODU2IDY4Ny43NjcgMjguMjQzNVYyOC44NTQ5SDY5MC4zMjJWMTcuNjM5MUg2ODcuNzY3Wk02OTQuMTA1IDI0LjIwOUM2OTQuMjExIDIzLjE1NDggNjk0Ljg2NCAyMi41NDU3IDY5NS44NjggMjIuNTQ1N0M2OTYuODU4IDIyLjU0NTcgNjk3LjUzNSAyMy4xNzIxIDY5Ny42NDEgMjQuMjA5SDY5NC4xMDVaTTY5NS42OTQgMjEuMTIyOUM2OTMuMTg0IDIxLjEyMjkgNjkxLjQgMjIuNzc1NSA2OTEuNCAyNS4xMDEyQzY5MS40IDI3LjQ0NDEgNjkzLjI1OSAyOC45OTU0IDY5Ni4xMTkgMjguOTk1NEM2OTYuNzUzIDI4Ljk5NTQgNjk4LjI5IDI4Ljk5NTQgNjk5Ljc1NSAyNy45ODdWMjYuNTA0MkM2OTguNTU3IDI3LjI5OTMgNjk3Ljc2MyAyNy41NzMxIDY5Ni43MzYgMjcuNTczMUM2OTUuMTMxIDI3LjU3MzEgNjk0LjE0IDI2Ljc5NDkgNjk0LjA1MSAyNS40NjY2SDY5OS44OTRDNzAwLjAxNSAyMi42OTM5IDY5OC4wNjEgMjEuMTIyOSA2OTUuNjk0IDIxLjEyMjkiIGZpbGw9IiMwMDlFNEQiLz4NCjxwYXRoIGQ9Ik03MDMuNzIxIDIzLjQzNjhINzAzLjc1OEM3MDQuNTE3IDIxLjg1NjIgNzA1LjM2NiAyMS4xMTUgNzA2LjM1MiAyMS4xMTVDNzA2Ljg2MiAyMS4xMTUgNzA3LjMwMyAyMS4yOTY0IDcwOC4wNDQgMjEuODA3Nkw3MDcuMzQxIDIzLjkxMzNDNzA2LjY3IDIzLjUxODYgNzA2LjIyOSAyMy4zNTM1IDcwNS44MjMgMjMuMzUzNUM3MDQuODg2IDIzLjM1MzUgNzA0LjI4NiAyNC4xNzc1IDcwMy43MjEgMjUuNTcwNFYyOC44NDY2SDcwMS4xNjJWMjEuMjU0MUg3MDMuNzIxVjIzLjQzNjhaTTY4MC43NzUgMTguMDY3NEM2ODEuMDE1IDE4LjY1NzUgNjgwLjU4MyAxOS40ODA1IDY3OS44MTQgMTkuOTA0QzY3OS4wNDEgMjAuMzI3MSA2NzguMjI0IDIwLjE5MjggNjc3Ljk4NiAxOS42MDI3QzY3Ny43NDMgMTkuMDExNyA2NzguMTczIDE4LjE4NzcgNjc4Ljk0NSAxNy43NjY2QzY3OS43MTYgMTcuMzQxMSA2ODAuNTMzIDE3LjQ3NTkgNjgwLjc3NSAxOC4wNjc0WiIgZmlsbD0iIzAwOUU0RCIvPg0KPHBhdGggZD0iTTY1OC4yMiAyNC4wMjMxQzY1OC4yMiAyMS45NjUxIDY1Ni43MTkgMjEuMTIyNiA2NTUuMjM5IDIxLjEyMjZDNjU0LjIzMiAyMS4xMjI2IDY1My40MDQgMjEuNTE4NCA2NTIuNjY0IDIyLjM5MjFINjUyLjYyOVYxNy42MzkySDY1MC4wNzFWMjguODM1M0g2NTIuNjI5VjI0LjAyMzFDNjUzLjIyOCAyMy4yMTYxIDY1My43MzggMjIuODcxMSA2NTQuMzM4IDIyLjg3MTFDNjU1LjEzNCAyMi44NzExIDY1NS42NjIgMjMuMzk4NiA2NTUuNjYyIDI0LjUzMjlWMjcuMjAwOEM2NTYuNTIgMjYuNzg5NiA2NTcuMzkzIDI2LjUzNzQgNjU4LjIyIDI2LjQ0MzhWMjQuMDIzMVpNNjY0LjYzNiAyMS4xMTk5QzY2My41OTQgMjEuMTE5OSA2NjIuNzk5IDIxLjQ4MTEgNjYxLjk4NCAyMi4zNDkzVjIxLjI2MjRINjU5LjQyOFYyNi40MjM0QzY2MC4zMTMgMjYuNTA1OCA2NjEuNDQzIDI2Ljg4NDcgNjYxLjk4NCAyNy41MTA0VjIzLjk2MzRDNjYyLjY1NyAyMy4wMjMyIDY2My4xMzQgMjIuNzA5NyA2NjMuNzcgMjIuNzA5N0M2NjQuNDk0IDIyLjcwOTcgNjY1LjA0NSAyMy4xNTU2IDY2NS4wNDUgMjQuMjI2NFYyOC44MzcySDY2Ny42MDJWMjQuMDI4OUM2NjcuNjAyIDIxLjc5MjYgNjY1LjkwOCAyMS4xMTk5IDY2NC42MzYgMjEuMTE5OVYyMS4xMTk5Wk02NjkuMDE1IDMxLjAxODFINjY2LjA0M1YzMi45ODY0SDY2OC45MDlWMzMuODMxMkg2NjYuMDQzVjM1Ljg2MTlINjY5LjEwM1YzNi43MDU1SDY2NS4wNDZWMzAuMTc1Mkg2NjkuMDE1TDY2OS4wMTUgMzEuMDE4MVpNNjcxLjQ0MiAzNi43MDkzSDY3Mi4zNTJWMzAuMTczM0g2NzEuNDQyVjM2LjcwOTNaTTY3Ni44NTkgMzMuMDQ4NEM2NzcuNTA0IDMzLjA0ODQgNjc3LjkwNCAzMy40NjMxIDY3Ny45MzUgMzQuMTE0Mkg2NzUuNjE2QzY3NS43NDIgMzMuNDM0MiA2NzYuMTYxIDMzLjA0ODQgNjc2Ljg1OSAzMy4wNDg0Wk02NzUuNiAzNC42ODFINjc4Ljg0MkM2NzguODQyIDMzLjA4NjkgNjc4LjA2MiAzMi4zMTggNjc2LjgzOCAzMi4zMThDNjc1LjU2OSAzMi4zMTggNjc0LjY4OCAzMy4xOTI0IDY3NC42ODggMzQuNDk2OUM2NzQuNjg4IDM1LjY4OSA2NzUuNDg0IDM2Ljc4OTggNjc2LjkxNyAzNi43ODk4QzY3Ny42OTggMzYuNzg5OCA2NzguMjAzIDM2LjYyODEgNjc4Ljc2MyAzNi4yODJWMzUuNDU2QzY3OC4yMjIgMzUuNzg1NiA2NzcuNjk4IDM1Ljk3NTggNjc3LjE0NyAzNS45NzU4QzY3Ni4yNjUgMzUuOTc1OCA2NzUuNzQyIDM1LjUzNSA2NzUuNiAzNC42ODA2VjM0LjY4MVpNNjg0Ljc4NiAzMy41MzA5QzY4NC4yNjMgMzMuMTk2NiA2ODMuOTE0IDMzLjA5ODUgNjgzLjUxNSAzMy4wOTg1QzY4Mi42ODIgMzMuMDk4NSA2ODIuMTA1IDMzLjY5NDUgNjgyLjEwNSAzNC41NjdDNjgyLjEwNSAzNS40NTYgNjgyLjcxOSAzNS45OTE2IDY4My42NjggMzUuOTkxNkM2ODQuMDU4IDM1Ljk5MTYgNjg0LjQzIDM1Ljg5NzMgNjg0Ljg4OCAzNS43MDU5VjM2LjU0MjZDNjg0LjU4MiAzNi42Nzc0IDY4My45OTcgMzYuNzg5OCA2ODMuNTE1IDM2Ljc4OThDNjgyLjEzNiAzNi43ODk4IDY4MS4xOCAzNS45MDYyIDY4MS4xOCAzNC42NDMyQzY4MS4xOCAzMy4yMTc4IDY4Mi4wNTQgMzIuMzE4IDY4My40NTMgMzIuMzE4QzY4My45ODcgMzIuMzE4IDY4NC4zNDYgMzIuNDMzOSA2ODQuNzg3IDMyLjYxNDVMNjg0Ljc4NiAzMy41MzA5Wk02ODguOTM0IDMyLjQwMDRINjkwLjM5NVYzMy4xNjUxSDY4OC45MzRWMzUuMzc1MkM2ODguOTM0IDM1Ljg4MTEgNjg5LjMyNyAzNi4wMjc0IDY4OS41OTMgMzYuMDI3NEM2ODkuOTIyIDM2LjAyNzQgNjkwLjI2MiAzNS45MiA2OTAuNjMgMzUuNzA3OVYzNi41MDM3QzY5MC4zMSAzNi42Njc4IDY4OS44MiAzNi43ODk4IDY4OS41MTkgMzYuNzg5OEM2ODguNTI4IDM2Ljc4OTggNjg4LjAyNyAzNi4yMTYxIDY4OC4wMjcgMzUuNDM5MVYzMy4xNjUxSDY4Ny4yMjRWMzMuMDcwM0w2ODguOTM0IDMxLjUxMDJWMzIuNDAwNFpNNjkzLjg3NiAzMi40MDA0VjMzLjM5NjlINjkzLjg5NUM2OTQuMzU5IDMyLjYzNDUgNjk0LjggMzIuMzE4IDY5NS4yMyAzMi4zMThDNjk1LjYwMSAzMi4zMTggNjk1Ljk0NyAzMi40ODAxIDY5Ni4zMjkgMzIuODE2Nkw2OTUuODQ3IDMzLjU2NDRDNjk1LjU3IDMzLjMwOTEgNjk1LjIxMSAzMy4xMzMxIDY5NC45OTUgMzMuMTMzMUM2OTQuMzY4IDMzLjEzMzEgNjkzLjg3NiAzMy43MjY4IDY5My44NzYgMzQuNDYyNlYzNi43MDkzSDY5Mi45NjdWMzIuNDAwNEg2OTMuODc2Wk03MDUuNjU3IDMzLjUzMDlDNzA1LjEzMSAzMy4xOTY2IDcwNC43ODIgMzMuMDk4NSA3MDQuMzgxIDMzLjA5ODVDNzAzLjU0OSAzMy4wOTg1IDcwMi45NzcgMzMuNjk0NSA3MDIuOTc3IDM0LjU2N0M3MDIuOTc3IDM1LjQ1NiA3MDMuNTkyIDM1Ljk5MTYgNzA0LjUzNSAzNS45OTE2QzcwNC45MjUgMzUuOTkxNiA3MDUuMjk1IDM1Ljg5NzMgNzA1Ljc2IDM1LjcwNTlWMzYuNTQyNkM3MDUuNDQ3IDM2LjY3NzQgNzA0Ljg2MiAzNi43ODk4IDcwNC4zOCAzNi43ODk4QzcwMy4wMDQgMzYuNzg5OCA3MDIuMDQ0IDM1LjkwNjIgNzAyLjA0NCAzNC42NDMyQzcwMi4wNDQgMzMuMjE3OCA3MDIuOTIyIDMyLjMxOCA3MDQuMzIgMzIuMzE4QzcwNC44NTUgMzIuMzE4IDcwNS4yMTIgMzIuNDMzOSA3MDUuNjU3IDMyLjYxNDVMNzA1LjY1NyAzMy41MzA5Wk02OTguNzQyIDM2LjcwOTNINjk5LjY1MlYzMi40MDA4SDY5OC43NDJWMzYuNzA5M1oiIGZpbGw9IiMwMDlFNEQiLz4NCjxwYXRoIGQ9Ik02OTkuNjg0IDMwLjg1MjVDNjk5Ljc3MyAzMS4wNjA0IDY5OS42MTggMzEuMzU0NCA2OTkuMzQ0IDMxLjUwNDFDNjk5LjA2OCAzMS42NTQzIDY5OC43NzYgMzEuNjA2MiA2OTguNjkzIDMxLjM5NzhDNjk4LjYxIDMxLjE4NzQgNjk4Ljc2MSAzMC44OTU4IDY5OS4wMzggMzAuNzQ1NkM2OTkuMzExIDMwLjU5MzUgNjk5LjYwMSAzMC42NDIxIDY5OS42ODQgMzAuODUyNVYzMC44NTI1Wk02NTguOTQgMzEuMjAwOUM2NTguNzc5IDMxLjIwMDkgNjU4LjcxMSAzMS4yMjU1IDY1OC42NDYgMzEuMjkzOEM2NTguNjIgMzEuMzIwMyA2NTguNjEgMzEuMzQ3MiA2NTguNiAzMS40MDExTDY1Ny43ODQgMzQuMjg3QzY1Ny41OTMgMzUuMjk5MiA2NTYuMjU5IDM2LjMwOTkgNjU0LjUyMSAzNi4zMDk5SDY1Mi4xMDRMNjUyLjUyMyAzNC44MjdINjU0LjA3NkM2NTQuMjM0IDM0LjgyNyA2NTQuMzU4IDM0Ljc3MjEgNjU0LjQ2MiAzNC42NjQzQzY1NC41IDM0LjYyMjUgNjU0LjU1IDM0LjU1NyA2NTQuNTU2IDM0LjQ4OTZMNjU1LjIwMSAzMS45NjgxQzY1NS4zOTEgMzAuOTU1NSA2NTYuNTM4IDI5LjgzNjkgNjU4LjI3NiAyOS44MzY5SDY2MC43NTFMNjYwLjQzNSAzMS4yMDA5SDY1OC45NFpNNjU5LjQ5NyAzMi45NTk2TDY1OS43NzMgMzIuMDI1OUg2NjIuMjg4QzY2Mi41OTggMzAuNjcyIDY2Mi4zNTQgMjkuNDE3NyA2NjEuNDczIDI4LjU5NjFDNjU5LjY4OSAyNi45MzMyIDY1NS45NTcgMjcuNDk4MyA2NTMuMTc3IDI5Ljk3NzlDNjUyLjc0MyAzMC4zNjMgNjUyLjM3NiAzMC43NzkzIDY1Mi4wNDIgMzEuMjA0OEg2NTMuNTU2TDY1My4yMDQgMzIuMTQwNEg2NTEuMzk1QzY1MS4yMjIgMzIuNDM1NCA2NTEuMDYgMzIuNzI4MSA2NTAuOTM2IDMzLjAyNUg2NTMuMDgxTDY1Mi43MzcgMzMuOTYwN0g2NTAuNjNDNjUwLjI2OSAzNS4zOTAxIDY1MC40OTkgMzYuNzIzMyA2NTEuNDA2IDM3LjU2OTlDNjUzLjE2NyAzOS4yMTE2IDY1Ni44ODggMzguNjM0NiA2NTkuNjY3IDM2LjE1NTRDNjYwLjE1MyAzNS43MjQyIDY2MC41NTUgMzUuMjU4NyA2NjAuOTE4IDM0Ljc4MDhINjU4Ljk3M0w2NTkuMjY5IDMzLjg0NzFINjYxLjU0M0M2NjEuNzEgMzMuNTUwMSA2NjEuODYzIDMzLjI1NjUgNjYxLjk4MyAzMi45NTk2SDY1OS40OTdaIiBmaWxsPSIjMDA5RTREIi8+DQo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfNThfMTExKSI+DQo8cGF0aCBkPSJNNzc1LjA2OCA0MS4yMjc0Qzc2Ni4yODUgNDIuMDQ2MyA3NTcuMTMxIDQwLjc1NjQgNzU1Ljg0OCAzMy44MTlDNzU1LjIyMSAzMC4zOTkgNzU2Ljc2NSAyNi43NzI1IDc1OC44MSAyNC41MTg0VjIzLjMxNDhDNzU1LjEyNiAyNi41OCA3NTMuMTMgMzAuNzExNSA3NTQuMjggMzUuNTkyQzc1NS43NDggNDEuODUxOCA3NjMuNjAzIDQ1LjM5NjcgNzc1LjU5NSA0NC4yMTk1Qzc4MC4zNDIgNDMuNzU0NSA3ODYuNTUgNDIuMjEyIDc5MC44NjkgMzkuODE0NFYzNi40MTA5Qzc4Ni45NDkgMzguNzcxMyA3ODAuNDY4IDQwLjcyMTEgNzc1LjA2OCA0MS4yMjc0VjQxLjIyNzRaTTc5OC4yMDUgMjMuMjMzNUM3OTYuMTIyIDEyLjk1MzMgNzc2LjM3MyAxMi4zMDE2IDc2My42NDMgMjAuMTMzOFYyMC45OTg5Qzc3Ni4zNTkgMTQuMzkxNSA3OTQuMzk1IDE0LjQzMTcgNzk2LjAzNyAyMy45MDE2Qzc5Ni41ODkgMjcuMDM0MiA3OTQuODQzIDMwLjI5NzggNzkxLjcyMyAzMi4xNzdWMzQuNjM0MkM3OTUuNDc2IDMzLjI0MzIgNzk5LjMyNCAyOC43NDQyIDc5OC4yMDUgMjMuMjMzNVYyMy4yMzM1WiIgZmlsbD0iIzBFN0RDMiIvPg0KPHBhdGggZD0iTTc5MC4xNTkgMjEuNzM2OEg3ODcuODU2VjMyLjEwM0M3ODcuODU2IDMzLjMxNzkgNzg4LjQzNyAzNC4zNzQ0IDc5MC4xNTkgMzQuNTQzMlYyMS43MzY4Wk03NjIuNzM5IDI1LjUyMTdINzYwLjQzMkw3NjAuNDMxIDMyLjI5NDNDNzYwLjQzMSAzMy41MTM0IDc2MS4wMTMgMzQuNTY4OCA3NjIuNzM5IDM0LjczNDRWMjUuNTIxN1YyNS41MjE3Wk03NjAuNDMyIDIyLjA1MjFINzYyLjczMlYyNC4yNTg0SDc2MC40MzJWMjIuMDUyMVpNNzc2LjUzIDM0LjYyNzJDNzc0LjY2NiAzNC42MjcyIDc3My44NzcgMzMuMzE3NyA3NzMuODc3IDMyLjAyOFYyMy4wMzU1SDc3Ni4xNlYyNS41MjE3SDc3Ny44NzlWMjcuMzg1M0g3NzYuMTZWMzEuODg1NEM3NzYuMTYgMzIuNDExMyA3NzYuNDA3IDMyLjcwNDQgNzc2Ljk1IDMyLjcwNDRINzc3Ljg3OVYzNC42MjcyTDc3Ni41MyAzNC42MjcyVjM0LjYyNzJaTTc4MC43MzEgMzAuNzk2MUM3ODAuNzMxIDMxLjk3NjggNzgxLjQ2MSAzMi44NDQ2IDc4Mi43NTQgMzIuODQ0NkM3ODMuNzY2IDMyLjg0NDYgNzg0LjI2NiAzMi41NjA1IDc4NC44NSAzMS45NzY4TDc4Ni4yNjEgMzMuMzM0OUM3ODUuMzU3IDM0LjIzNzkgNzg0LjQwOSAzNC43ODcgNzgyLjczNyAzNC43ODdDNzgwLjU1MiAzNC43ODcgNzc4LjQ1OSAzMy41ODE5IDc3OC40NTkgMzAuMDY4NkM3NzguNDU5IDI3LjA2NTEgNzgwLjI4OCAyNS4zNjczIDc4Mi42ODYgMjUuMzY3M0M3ODUuMTI0IDI1LjM2NzMgNzg2LjUyNSAyNy4zNTQ5IDc4Ni41MjUgMjkuOTYzOVYzMC43OTYzSDc4MC43MzFWMzAuNzk2MVpNNzgyLjU4NiAyNy4yNzU2Qzc4MS44MDUgMjcuMjc1NiA3ODEuMjA0IDI3LjY4MjMgNzgwLjk1IDI4LjIzMDlDNzgwLjgwMiAyOC41NjA3IDc4MC43NDcgMjguODE3NyA3ODAuNzMxIDI5LjIyMjlINzg0LjI0OUM3ODQuMjA0IDI4LjIzMDkgNzgzLjc1OSAyNy4yNzU2IDc4Mi41ODYgMjcuMjc1NlpNNzY4LjkzOSAyNy4zODUzQzc2OS42MDggMjcuMzg1MyA3NjkuODg3IDI3LjcxOTggNzY5Ljg4NyAyOC4yNjI2VjM0LjY0MDZINzcyLjE3VjI4LjI0OTJDNzcyLjE3IDI2Ljk1NDIgNzcxLjQ4NyAyNS41MjQxIDc2OS40ODIgMjUuNTI0MUw3NjQuNzY2IDI1LjUyMTdWMzQuNjQwNkg3NjcuMDVWMjcuMzg1M0g3NjguOTM5VjI3LjM4NTNaTTc5Mi42MzcgMjMuNTg5MUM3OTIuMTI5IDIzLjU4OTEgNzkxLjcyNCAyMy4xNzU0IDc5MS43MjQgMjIuNjYyOUM3OTEuNzI0IDIyLjE1MjkgNzkyLjEyOSAyMS43MzY4IDc5Mi42MzcgMjEuNzM2OEM3OTMuMTQyIDIxLjczNjggNzkzLjU1NiAyMi4xNTI5IDc5My41NTYgMjIuNjYyOUM3OTMuNTU2IDIzLjE3NTQgNzkzLjE0MiAyMy41ODkxIDc5Mi42MzcgMjMuNTg5MVpNNzkyLjYzNyAyMS44OTEyQzc5Mi4yMTggMjEuODkxMiA3OTEuODgyIDIyLjI0MDcgNzkxLjg4MiAyMi42NjI5Qzc5MS44ODIgMjMuMDg3NiA3OTIuMjE4IDIzLjQzMDkgNzkyLjYzNyAyMy40MzA5Qzc5My4wNTUgMjMuNDMwOSA3OTMuNDAyIDIzLjA4NzYgNzkzLjQwMiAyMi42NjI5Qzc5My40MDIgMjIuMjQwNyA3OTMuMDU1IDIxLjg5MTIgNzkyLjYzNyAyMS44OTEyWk03OTMuMDQzIDIzLjIxOEg3OTIuODcyQzc5Mi44NjQgMjMuMjE3OSA3OTIuODU3IDIzLjIxNTcgNzkyLjg1MSAyMy4yMTE2Qzc5Mi44NDUgMjMuMjA3NSA3OTIuODQgMjMuMjAxNyA3OTIuODM3IDIzLjE5NDlMNzkyLjYwNSAyMi43OTdDNzkyLjU5OCAyMi43ODg1IDc5Mi41NzkgMjIuNzc4OCA3OTIuNTczIDIyLjc3ODhINzkyLjQ2N1YyMy4xNzU0Qzc5Mi40NjcgMjMuMTk1IDc5Mi40NTMgMjMuMjE4MSA3OTIuNDI4IDIzLjIxODFINzkyLjI3NEM3OTIuMjUxIDIzLjIxODEgNzkyLjIzNSAyMy4xOTUgNzkyLjIzNSAyMy4xNzU0VjIyLjE3NDlDNzkyLjIzNSAyMi4xMTY0IDc5Mi4yNTQgMjIuMDkyNCA3OTIuMzA1IDIyLjA4NUM3OTIuMzYxIDIyLjA3OSA3OTIuNTA1IDIyLjA3MTYgNzkyLjU4NiAyMi4wNzE2Qzc5Mi44NzIgMjIuMDcxNiA3OTMuMDM5IDIyLjE1NjYgNzkzLjAzOSAyMi40MjQ0VjIyLjQ0NEM3OTMuMDM5IDIyLjYwOTQgNzkyLjk1OSAyMi42OTk1IDc5Mi44MzMgMjIuNzM5N0w3OTMuMDc0IDIzLjE1NDdDNzkzLjA3OCAyMy4xNjQgNzkzLjA4IDIzLjE3MzkgNzkzLjA4IDIzLjE4NEM3OTMuMDggMjMuMTk5NyA3OTMuMDcyIDIzLjIxOCA3OTMuMDQzIDIzLjIxOFYyMy4yMThaTTc5Mi44MjEgMjIuNDI0NEM3OTIuODIxIDIyLjMxMjcgNzkyLjc1MiAyMi4yNzczIDc5Mi42MDUgMjIuMjc3M0g3OTIuNDU5VjIyLjU5NDdDNzkyLjQ4MiAyMi41OTQ3IDc5Mi41ODYgMjIuNTk5NiA3OTIuNjA1IDIyLjU5OTZDNzkyLjc1MiAyMi41OTk2IDc5Mi44MjEgMjIuNTUgNzkyLjgyMSAyMi40NDRWMjIuNDI0NFoiIGZpbGw9IiMwRTdEQzIiLz4NCjwvZz4NCjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMV81OF8xMTEpIj4NCjxwYXRoIGQ9Ik01MzMuNzczIDIwLjk5MTFDNTI5LjI2MyAyMC45OTExIDUyNS41OTkgMjQuNjU0NyA1MjUuNTk5IDI5LjE2NDRDNTI1LjU5OSAzMy42NzQxIDUyOS4yNjMgMzcuMzM3NyA1MzMuNzczIDM3LjMzNzdDNTM4LjI4MiAzNy4zMzc3IDU0MS45NDYgMzMuNjc0MSA1NDEuOTQ2IDI5LjE2NDRDNTQxLjk0NiAyNC42NTQ3IDUzOC4yODIgMjAuOTkxMSA1MzMuNzczIDIwLjk5MTFaTTUzMy43NzMgMzYuNTE4NkM1MjkuNzEzIDM2LjUxODYgNTI2LjQxOSAzMy4yMTUgNTI2LjQxOSAyOS4xNjQ0QzUyNi40MTkgMjUuMTEzNyA1MjkuNzEzIDIxLjgxMDIgNTMzLjc3MyAyMS44MTAyQzUzNy44MzIgMjEuODEwMiA1NDEuMTI3IDI1LjExMzcgNTQxLjEyNyAyOS4xNjQ0QzU0MS4xMjcgMzMuMjE1IDUzNy44MzIgMzYuNTE4NiA1MzMuNzczIDM2LjUxODZaIiBmaWxsPSJibGFjayIvPg0KPHBhdGggZD0iTTUzNi42OSAyMy45MjUyQzUzNi42NjMgMjMuOTA3MiA1MzYuNjI3IDIzLjg5ODIgNTM2LjU5MSAyMy44OTgyQzUzNi40ODMgMjMuODk4MiA1MzYuNDAyIDIzLjk3OTIgNTM2LjQwMiAyNC4wODczVjI2LjY0MzdDNTM2LjQwMiAyNi43MzM3IDUzNi4zMyAyNi44MDU3IDUzNi4yNCAyNi44MDU3SDUzMS4yOUM1MzEuMiAyNi44MDU3IDUzMS4xMzcgMjYuNzMzNyA1MzEuMTI4IDI2LjY0MzdWMjQuMDg3M0M1MzEuMTI4IDI0LjA1MTMgNTMxLjExOSAyNC4wMjQyIDUzMS4xMDEgMjMuOTg4MkM1MzEuMDQ3IDIzLjg5ODIgNTMwLjkzIDIzLjg3MTIgNTMwLjgzOSAyMy45MjUyQzUyOS4wMTIgMjUuMDUwNCA1MjcuOTA1IDI3LjAwMzcgNTI3LjkwNSAyOS4xNjQxQzUyNy45MDUgMzEuMzI0NCA1MjkuMDEyIDMzLjI3NzcgNTMwLjg1NyAzNC40MDI5QzUzMC44ODUgMzQuNDIwOSA1MzAuOTIxIDM0LjQyOTkgNTMwLjk1NyAzNC40Mjk5QzUzMS4wNjUgMzQuNDI5OSA1MzEuMTQ2IDM0LjM0ODkgNTMxLjE0NiAzNC4yNDA5VjMxLjY4NDVDNTMxLjE0NiAzMS41OTQ0IDUzMS4yMTggMzEuNTMxNCA1MzEuMzA4IDMxLjUyMjRINTM2LjI1OEM1MzYuMzQ4IDMxLjUyMjQgNTM2LjQyIDMxLjU5NDQgNTM2LjQyIDMxLjY4NDVWMzQuMjQwOUM1MzYuNDIgMzQuMjc2OSA1MzYuNDI5IDM0LjMwMzkgNTM2LjQ0NyAzNC4zMzk5QzUzNi41MDEgMzQuNDI5OSA1MzYuNjE4IDM0LjQ1NjkgNTM2LjcwOCAzNC40MDI5QzUzOC41NTQgMzMuMjc3NyA1MzkuNjYxIDMxLjMyNDQgNTM5LjY2MSAyOS4xNjQxQzUzOS42NjEgMjcuMDAzNyA1MzguNTM2IDI1LjA1MDQgNTM2LjY5IDIzLjkyNTJWMjMuOTI1MlpNNTMwLjE5MSAzMi4zNjg2TDUzMC4yMTggMzIuNjc0Nkw1MzAuMDIgMzIuNDMxNkM1MjguNDk5IDMwLjUxNDMgNTI4LjQ5OSAyNy44MDQ4IDUzMC4wMiAyNS44ODc1TDUzMC4xOTEgMjUuNjcxNUw1MzAuMjE4IDI1LjY0NDVMNTMwLjE5MSAyNS45NTk2QzUzMC4xNjQgMjYuMjExNiA1MzAuMTU1IDI2LjQ3MjYgNTMwLjE1NSAyNi43MzM3VjMxLjU4NTRDNTMwLjE1NSAzMS44NDY1IDUzMC4xNzMgMzIuMTA3NSA1MzAuMTkxIDMyLjM2ODZaTTUzNi40MDIgMzAuMzg4M0M1MzYuNDAyIDMwLjQ3ODMgNTM2LjMzIDMwLjU1MDMgNTM2LjI0IDMwLjU1MDNINTMxLjI5QzUzMS4yIDMwLjU1MDMgNTMxLjEzNyAzMC40NzgzIDUzMS4xMjggMzAuMzg4M1YyNy45Mzk5QzUzMS4xMjggMjcuODQ5OSA1MzEuMiAyNy43Nzc4IDUzMS4yOSAyNy43Nzc4SDUzNi4yNEM1MzYuMzMgMjcuNzc3OCA1MzYuNDAyIDI3Ljg0OTkgNTM2LjQwMiAyNy45Mzk5VjMwLjM4ODNaTTUzNy41MTkgMzIuNDMxNkw1MzcuMzIxIDMyLjY3NDZMNTM3LjM0OCAzMi4zNjg2QzUzNy4zNzUgMzIuMTE2NSA1MzcuMzg0IDMxLjg1NTUgNTM3LjM4NCAzMS41OTQ0VjI2LjczMzdDNTM3LjM4NCAyNi40NzI2IDUzNy4zNzUgMjYuMjExNiA1MzcuMzQ4IDI1Ljk1OTZMNTM3LjMzOSAyNS44MjQ1TDUzNy4zMyAyNS42ODA1VjI1LjY0NDVMNTM3LjUxOSAyNS44ODc1QzUzOC4yNTcgMjYuODA1NyA1MzguNjYyIDI3Ljk3NTkgNTM4LjY2MiAyOS4xNTUxQzUzOC42NjIgMzAuMzM0MiA1MzguMjU3IDMxLjUxMzQgNTM3LjUxOSAzMi40MzE2VjMyLjQzMTZaIiBmaWxsPSJibGFjayIvPg0KPHBhdGggZD0iTTU1NC4yNzYgMjkuMDIwMkM1NTQuMjMxIDI5LjAwMjIgNTU0LjE3NyAyOC45ODQyIDU1NC4xNzcgMjguOTMwMkM1NTQuMTc3IDI4Ljg5NDIgNTU0LjE5NSAyOC44NjcyIDU1NC4yMzEgMjguODQ5MkM1NTQuMjk0IDI4LjgyMjIgNTU1Ljg1MSAyOC4yNjQxIDU1NS44NTEgMjYuNDI3OEM1NTUuODUxIDI0LjM4NDUgNTU0LjQ3NCAyMy4xNjkzIDU1Mi4xNTIgMjMuMTY5M0g1NDYuNTI2VjM1LjE3NzJINTUyLjY2NUM1NTQuNDU2IDM1LjE3NzIgNTU2LjM4MiAzMy45MDggNTU2LjM4MiAzMS44NjQ2QzU1Ni4zODIgMjkuOTExMyA1NTQuOTA2IDI5LjIyNzIgNTU0LjI3NiAyOS4wMjAyVjI5LjAyMDJaTTU0OS4zNjEgMjUuNjI2N0M1NDkuMzYxIDI1LjU4MTcgNTQ5LjM5NyAyNS41NDU2IDU0OS40NDIgMjUuNTQ1Nkg1NTEuNjc1QzU1Mi40MTMgMjUuNTQ1NiA1NTIuOTE3IDI2LjA0MDcgNTUyLjkxNyAyNi43Nzg4QzU1Mi45MTcgMjcuMzU0OSA1NTIuNDY3IDI3Ljk3NiA1NTEuNjIxIDI3Ljk3Nkg1NDkuNDQyQzU0OS4zOTcgMjcuOTc2IDU0OS4zNjEgMjcuOTQgNTQ5LjM2MSAyNy44OTVWMjUuNjI2N1pNNTUxLjY3NSAzMi44MDk4SDU0OS40NDJDNTQ5LjM5NyAzMi44MDk4IDU0OS4zNjEgMzIuNzczOCA1NDkuMzYxIDMyLjcyODhWMzAuMzM0NEM1NDkuMzYxIDMwLjI4OTQgNTQ5LjM5NyAzMC4yNTM0IDU0OS40NDIgMzAuMjUzNEg1NTEuNjIxQzU1Mi42OTIgMzAuMjUzNCA1NTMuMzA0IDMwLjcxMjUgNTUzLjMwNCAzMS41MjI2QzU1My4zMDQgMzIuMzU5NyA1NTIuNzM3IDMyLjgwOTggNTUxLjY3NSAzMi44MDk4VjMyLjgwOThaTTU3NS4zODQgMjcuOTQ5TDU3NC45NTIgMjcuODU5QzU3My45OCAyNy42NTIgNTczLjAzNSAyNy4zOTA5IDU3My4wMzUgMjYuNTUzOEM1NzMuMDM1IDI1LjcxNjcgNTczLjgxOCAyNS4zMzg2IDU3NC41OTIgMjUuMzM4NkM1NzUuNTAxIDI1LjMzODYgNTc2LjQwMSAyNS43NDM3IDU3Ny4wODYgMjYuNDQ1OEw1NzguODY4IDI0LjY4MTVDNTc4LjEwMyAyMy44MzU0IDU3Ni43NDQgMjIuODYzMiA1NzQuNTQ3IDIyLjg2MzJDNTcxLjkwMSAyMi44NjMyIDU3MC4xMTggMjQuMzY2NSA1NzAuMTE4IDI2LjYwNzhDNTcwLjExOCAyOC45NzUyIDU3MS45ODIgMjkuODY2MyA1NzMuNTQ4IDMwLjE5OTRMNTczLjk3MSAzMC4yODk0QzU3NS40OTIgMzAuNjEzNSA1NzYuMjEyIDMwLjg1NjUgNTc2LjIxMiAzMS43MjA2QzU3Ni4yMTIgMzIuNDk0NyA1NzUuNTE5IDMzLjAwNzggNTc0LjQ5MyAzMy4wMDc4QzU3My4yODcgMzMuMDA3OCA1NzIuMjE2IDMyLjQ3NjcgNTcxLjQwNiAzMS40Nzc2TDU2OS41NzggMzMuMjY4OUM1NzAuNTUxIDM0LjQyMTEgNTcxLjgzOCAzNS40NjUyIDU3NC41MjkgMzUuNDY1MkM1NzYuODI1IDM1LjQ2NTIgNTc5LjE1NiAzNC4xMzMgNTc5LjE1NiAzMS41NzY2QzU3OS4xNDcgMjguOTU3MiA1NzcuMzY1IDI4LjM2MzEgNTc1LjM4NCAyNy45NDlWMjcuOTQ5Wk01OTkuMTAzIDIzLjE2OTNWMjcuNTYyQzU5OS4xMDMgMjcuNjA3IDU5OS4wNjcgMjcuNjQzIDU5OS4wMjIgMjcuNjQzSDU5NS4zMzFDNTk1LjI4NiAyNy42NDMgNTk1LjI1IDI3LjYwNyA1OTUuMjUgMjcuNTYyVjIzLjE2OTNINTkyLjIyNlYzNS4xNzcySDU5NS4yNVYzMC40NjA0QzU5NS4yNSAzMC40MTU0IDU5NS4yODYgMzAuMzc5NCA1OTUuMzMxIDMwLjM3OTRINTk5LjAyMkM1OTkuMDY3IDMwLjM3OTQgNTk5LjEwMyAzMC40MTU0IDU5OS4xMDMgMzAuNDYwNFYzNS4xNzcySDYwMi4xNDZWMjMuMTY5M0g1OTkuMTAzWk01ODYuMTQxIDMyLjcxOThDNTg0Ljc4MiAzMi43MTk4IDU4My4zMTUgMzEuNTg1NiA1ODMuMzE1IDI5LjA5MjJDNTgzLjMxNSAyNi44MTQ4IDU4NC42OTIgMjUuNjI2NyA1ODYuMDUxIDI1LjYyNjdDNTg3LjA0MSAyNS42MjY3IDU4Ny43MzQgMjYuMDQwNyA1ODguMjgzIDI2Ljk1ODlMNTkwLjYwNiAyNS40MTk2QzU4OS40MTggMjMuNjczMyA1ODguMDA0IDIyLjg4MTIgNTg2LjAzMyAyMi44ODEyQzU4Mi4xNzEgMjIuODgxMiA1ODAuNDQzIDI2LjAwNDcgNTgwLjQ0MyAyOS4wOTIyQzU4MC40NDMgMzIuODQ1OCA1ODIuNzI5IDM1LjQ2NTIgNTg1Ljk5NyAzNS40NjUyQzU4OC40MjcgMzUuNDY1MiA1ODkuNTM1IDM0LjU3NDEgNTkwLjY5NiAzMi45MjY4TDU4OC4zNTUgMzEuMzUxNkM1ODcuODMzIDMyLjE5NzcgNTg3LjI2NiAzMi43MTk4IDU4Ni4xNDEgMzIuNzE5OFpNNTYzLjE3OCAyMi44NjMyQzU1OS44NzUgMjIuODYzMiA1NTcuNjYxIDI1LjM5MjYgNTU3LjY2MSAyOS4xNjQyQzU1Ny42NjEgMzIuOTM1OCA1NTkuODc1IDM1LjQ2NTIgNTYzLjE3OCAzNS40NjUyQzU2Ni40ODIgMzUuNDY1MiA1NjguNjk2IDMyLjkzNTggNTY4LjY5NiAyOS4xNjQyQzU2OC42OTYgMjUuMzkyNiA1NjYuNDgyIDIyLjg2MzIgNTYzLjE3OCAyMi44NjMyVjIyLjg2MzJaTTU2My4xNzggMzIuNzE5OEM1NjEuNTU4IDMyLjcxOTggNTYwLjUxNCAzMS4zMjQ2IDU2MC41MTQgMjkuMTY0MkM1NjAuNTE0IDI3LjAxMjkgNTYxLjU1OCAyNS42MjY3IDU2My4xNzggMjUuNjI2N0M1NjQuODA4IDI1LjYyNjcgNTY1Ljg2MSAyNy4wMTI5IDU2NS44NjEgMjkuMTY0MkM1NjUuODYxIDMxLjMyNDYgNTY0LjgwOCAzMi43MTk4IDU2My4xNzggMzIuNzE5OFoiIGZpbGw9IiNGODAwMDAiLz4NCjwvZz4NCjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTQ2LjM0NCAyMi4xODExQzE0Ny41OTUgMjIuMjg1NCAxNDguODQ1IDIxLjU1NTMgMTQ5LjYyNyAyMC42Mjk4QzE1MC4zOTUgMTkuNjc4MSAxNTAuOTAzIDE4LjQwMDUgMTUwLjc3MyAxNy4wOTY5QzE0OS42NjYgMTcuMTQ5MSAxNDguMjk4IDE3LjgyNjkgMTQ3LjUxNyAxOC43Nzg2QzE0Ni44IDE5LjU5OTkgMTQ2LjE4OCAyMC45Mjk2IDE0Ni4zNDQgMjIuMTgxMVpNMTQ3Ljg0MSAyMy4wNzk3QzE0OC42NTMgMjIuNzYwNiAxNDkuNjU4IDIyLjM2NTYgMTUwLjc2IDIyLjQyOTFDMTUxLjQ2MyAyMi40ODEyIDE1My40OTUgMjIuNjg5OCAxNTQuNzk4IDI0LjYxOTJDMTU0Ljc5MiAyNC42MjM3IDE1NC43NzggMjQuNjMyMyAxNTQuNzU5IDI0LjY0NUMxNTQuNDM2IDI0Ljg1NDggMTUyLjM5IDI2LjE4NzEgMTUyLjQxNCAyOC44MTY5QzE1Mi40MzkgMzEuOTQ5OSAxNTQuOTg4IDMzLjExODMgMTU1LjMyMiAzMy4yNzExQzE1NS4zNDQgMzMuMjgxMSAxNTUuMzU2IDMzLjI4NjcgMTU1LjM1OCAzMy4yODgzQzE1NS4zNTYgMzMuMjkyNiAxNTUuMzU0IDMzLjMwMSAxNTUuMzUgMzMuMzEzM0MxNTUuMjgzIDMzLjUyODggMTU0Ljg0NSAzNC45NDg5IDE1My44NDcgMzYuNDA0QzE1Mi45MjIgMzcuNzU5OCAxNTEuOTcxIDM5LjA4OTUgMTUwLjQ2IDM5LjExNTZDMTQ5Ljc0OSAzOS4xMjgzIDE0OS4yNyAzOC45MjExIDE0OC43NzIgMzguNzA1NEMxNDguMjQ3IDM4LjQ3ODUgMTQ3LjcwMSAzOC4yNDIyIDE0Ni44NCAzOC4yNDIyQzE0NS45NDcgMzguMjQyMiAxNDUuMzc2IDM4LjQ4NDggMTQ0LjgyNiAzOC43MTg0QzE0NC4zNDggMzguOTIxNCAxNDMuODg3IDM5LjExNzQgMTQzLjI0NSAzOS4xNDE3QzE0MS43ODYgMzkuMTkzOCAxNDAuNjc5IDM3LjcwNzcgMTM5Ljc1NCAzNi4zNTE5QzEzNy44NjYgMzMuNjE0MyAxMzYuNDIgMjguNjM0NCAxMzguMzc0IDI1LjI3MUMxMzkuMzI1IDIzLjU4OTMgMTQxLjA1NyAyMi41MzM0IDE0Mi45MTkgMjIuNTA3M0MxNDMuNzMyIDIyLjQ5MjUgMTQ0LjUwNyAyMi44MDA2IDE0NS4xODQgMjMuMDcwMUMxNDUuNzAyIDIzLjI3NTggMTQ2LjE2MiAyMy40NTg5IDE0Ni41NCAyMy40NTg5QzE0Ni44NzcgMjMuNDU4OSAxNDcuMzE5IDIzLjI4NTEgMTQ3Ljg0MSAyMy4wNzk3WiIgZmlsbD0iYmxhY2siLz4NCjxwYXRoIGQ9Ik0zNi44NTg3IDM3LjUyNDFIMzEuOTg3NEwzNS4wMzQyIDE5LjY2NjhIMzkuOTA1MkwzNi44NTg3IDM3LjUyNDFaIiBmaWxsPSIjMDA1NzlGIi8+DQo8cGF0aCBkPSJNNTQuNTE1NyAyMC4xMDQxQzUzLjU1NDkgMTkuNzQyOCA1Mi4wMzA5IDE5LjM0MzggNTAuMTQ2NiAxOS4zNDM4QzQ1LjMzNjEgMTkuMzQzOCA0MS45NDg2IDIxLjc3NTMgNDEuOTI3OCAyNS4yNTE2QzQxLjg4NzggMjcuODE2NSA0NC4zNTMxIDI5LjI0MSA0Ni4xOTcgMzAuMDk2MkM0OC4wODE2IDMwLjk3MDEgNDguNzIyMyAzMS41NDA1IDQ4LjcyMjMgMzIuMzE5NEM0OC43MDMxIDMzLjUxNTcgNDcuMTk5NCAzNC4wNjcyIDQ1Ljc5NjkgMzQuMDY3MkM0My44NTIxIDM0LjA2NzIgNDIuODEgMzMuNzgyOSA0MS4yMjY0IDMzLjExNzNMNDAuNTg1IDMyLjgzMkwzOS45MDMzIDM2Ljg0MDZDNDEuMDQ1OCAzNy4zMzM5IDQzLjE1MDcgMzcuNzcxNyA0NS4zMzYxIDM3Ljc5MDlDNTAuNDQ3MyAzNy43OTA5IDUzLjc3NDkgMzUuMzk3MSA1My44MTQzIDMxLjY5MjVDNTMuODMzOCAyOS42NTk3IDUyLjUzMiAyOC4xMDIgNDkuNzI1NCAyNi44MjkyQzQ4LjAyMTcgMjYuMDEyMSA0Ni45NzgzIDI1LjQ2MTIgNDYuOTc4MyAyNC42MjUyQzQ2Ljk5ODMgMjMuODY1MiA0Ny44NjA4IDIzLjA4NjggNDkuNzg0IDIzLjA4NjhDNTEuMzY3NyAyMy4wNDg2IDUyLjUzMTIgMjMuNDA5NCA1My40MTI2IDIzLjc3MDVMNTMuODUzMiAyMy45NjAxTDU0LjUxNTcgMjAuMTA0MVoiIGZpbGw9IiMwMDU3OUYiLz4NCjxwYXRoIGQ9Ik02MC45OTI0IDMxLjE5NzlDNjEuMzkzNiAzMC4xNzIgNjIuOTM3MiAyNi4yMDE2IDYyLjkzNzIgMjYuMjAxNkM2Mi45MTcgMjYuMjM5NyA2My4zMzc2IDI1LjE1NjggNjMuNTc4MSAyNC40OTE5TDYzLjkxODYgMjYuMDMwNkM2My45MTg2IDI2LjAzMDYgNjQuODQxIDMwLjMwNTEgNjUuMDQxNCAzMS4xOTc5QzY0LjI4IDMxLjE5NzkgNjEuOTU0NiAzMS4xOTc5IDYwLjk5MjQgMzEuMTk3OVpNNjcuMDA1NCAxOS42NjY4SDYzLjIzNzRDNjIuMDc1NSAxOS42NjY4IDYxLjE5MjcgMTkuOTg5NSA2MC42OTE0IDIxLjE0ODRMNTMuNDU1OCAzNy41MjM5SDU4LjU2NzFDNTguNTY3MSAzNy41MjM5IDU5LjQwODUgMzUuMzE5OSA1OS41ODk0IDM0Ljg0NTJDNjAuMTUwMSAzNC44NDUyIDY1LjEyMjMgMzQuODQ1MiA2NS44NDM3IDM0Ljg0NTJDNjUuOTgzNSAzNS40NzIxIDY2LjQyNDkgMzcuNTIzOSA2Ni40MjQ5IDM3LjUyMzlINzAuOTM1Mkw2Ny4wMDU0IDE5LjY2NjhWMTkuNjY2OFoiIGZpbGw9IiMwMDU3OUYiLz4NCjxwYXRoIGQ9Ik0yNy45MTggMTkuNjY2OEwyMy4xNDc1IDMxLjg0MzhMMjIuNjI2MiAyOS4zNzQxQzIxLjc0NDIgMjYuNTI0NSAxOC45NzgxIDIzLjQyODQgMTUuODkxNCAyMS44ODlMMjAuMjYxIDM3LjUwNTJIMjUuNDEyMkwzMy4wNjkgMTkuNjY2OEgyNy45MThWMTkuNjY2OFoiIGZpbGw9IiMwMDU3OUYiLz4NCjxwYXRoIGQ9Ik0xOC43MTg0IDE5LjY2NjhIMTAuODgxMUwxMC44MDA5IDIwLjAyNzZDMTYuOTE0NSAyMS41MDk1IDIwLjk2MzUgMjUuMDgxNSAyMi42MjcgMjkuMzc0OUwyMC45MjMyIDIxLjE2NzlDMjAuNjQyNyAyMC4wMjc0IDE5Ljc4MDcgMTkuNzA0NCAxOC43MTg0IDE5LjY2NjhaIiBmaWxsPSIjRkFBNjFBIi8+DQo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDJfNThfMTExKSI+DQo8cGF0aCBkPSJNMjIxLjE1OCAxNy40OTlWMTguOTM1NkgyMzEuMzA2VjE3LjQ5OUgyMjEuMTU4Wk0yMzIuNzQ0IDE3LjQ5OVYxOC45MzU2SDI0Ny4yMDZDMjQ3LjIwNiAxOC45MzU2IDI0NS43MjkgMTcuNDk5IDI0My43NzMgMTcuNDk5SDIzMi43NDRaTTI1MC4wNDMgMTcuNDk5VjE4LjkzNTZIMjU4Ljc5M0wyNTguMjczIDE3LjQ5OUgyNTAuMDQzWk0yNjUuMDY1IDE3LjQ5OUwyNjQuNTQ2IDE4LjkzNTZIMjczLjIxNlYxNy40OTlIMjY1LjA2NVpNMjIxLjE1OCAyMC4yOTI5VjIxLjcyOTZIMjMxLjMwNlYyMC4yOTI5SDIyMS4xNThaTTIzMi43NDQgMjAuMjk1VjIxLjcyOTdIMjQ4Ljg4NEMyNDguODg0IDIxLjcyOTcgMjQ4LjY5NiAyMC42MjM5IDI0OC4zNjcgMjAuMjk1SDIzMi43NDRaTTI1MC4wNDMgMjAuMjk1VjIxLjcyOTdIMjU5Ljc1MkwyNTkuMjcxIDIwLjI5NUgyNTAuMDQzWk0yNjQuMDI3IDIwLjI5NUwyNjMuNTQ2IDIxLjcyOTdIMjczLjIxNlYyMC4yOTVIMjY0LjAyN1YyMC4yOTVaTTIyNC4wNzQgMjMuMDg2OVYyNC41MjU3SDIyOC40NjlWMjMuMDg2OUgyMjQuMDc0VjIzLjA4NjlaTTIzNS42NjEgMjMuMDg2OVYyNC41MjU3SDI0MC4wNTZWMjMuMDg2OUgyMzUuNjYxVjIzLjA4NjlaTTI0NC4zMzEgMjMuMDg2OVYyNC41MjU3SDI0OC43MjZDMjQ4LjcyNiAyNC41MjU3IDI0OS4wMDUgMjMuNzY1OSAyNDkuMDA1IDIzLjA4NjlIMjQ0LjMzMVYyMy4wODY5Wk0yNTIuOTYgMjMuMDg2OVYyNC41MjU3SDI2MC43NTJMMjYwLjIzMiAyMy4wODY5SDI1Mi45NlYyMy4wODY5Wk0yNjMuMDY5IDIzLjA4NjlMMjYyLjU0OCAyNC41MjU3SDI3MC4zNzlWMjMuMDg2OUgyNjMuMDY5VjIzLjA4NjlaTTIyNC4wNzQgMjUuODgzVjI3LjMxOTdIMjI4LjQ2OVYyNS44ODNIMjI0LjA3NFYyNS44ODNaTTIzNS42NjEgMjUuODgzVjI3LjMxOTdIMjQ2Ljg4N0MyNDYuODg3IDI3LjMxOTcgMjQ3LjgyNiAyNi41ODI1IDI0OC4xMjUgMjUuODgzSDIzNS42NjFaTTI1Mi45NiAyNS44ODNWMjcuMzE5N0gyNTcuMzU1VjI2LjUyTDI1Ny42MzQgMjcuMzE5N0gyNjUuNjg0TDI2NS45ODQgMjYuNTJWMjcuMzE5N0gyNzAuMzc5VjI1Ljg4M0gyNjIuMTI5TDI2MS42OTEgMjcuMDk5OUwyNjEuMjUxIDI1Ljg4M0gyNTIuOTZaTTIyNC4wNzQgMjguNjc3VjMwLjExMzdIMjI4LjQ2OVYyOC42NzdIMjI0LjA3NFpNMjM1LjY2MSAyOC42NzdWMzAuMTEzN0gyNDguMTI1QzI0Ny44MjYgMjkuNDE2NSAyNDYuODg3IDI4LjY3NyAyNDYuODg3IDI4LjY3N0gyMzUuNjYxWk0yNTIuOTYgMjguNjc3VjMwLjExMzdIMjU3LjM1NVYyOC42NzdIMjUyLjk2Wk0yNTguMTUzIDI4LjY3N0wyNTguNjg1IDMwLjExMzdIMjY0LjcyMUwyNjUuMjI2IDI4LjY3N0gyNTguMTUzWk0yNjUuOTg0IDI4LjY3N1YzMC4xMTM3SDI3MC4zNzlWMjguNjc3SDI2NS45ODRaTTIyNC4wNzQgMzEuNDcxVjMyLjkwNzZIMjI4LjQ2OVYzMS40NzFIMjI0LjA3NFpNMjM1LjY2MSAzMS40NzFWMzIuOTA3NkgyNDAuMDU2VjMxLjQ3MUgyMzUuNjYxWk0yNDQuMzMxIDMxLjQ3MVYzMi45MDc2SDI0OS4wMDVDMjQ5LjAwNSAzMi4yMjk2IDI0OC43MjYgMzEuNDcxIDI0OC43MjYgMzEuNDcxSDI0NC4zMzFWMzEuNDcxWk0yNTIuOTYgMzEuNDcxVjMyLjkwNzZIMjU3LjM1NVYzMS40NzFIMjUyLjk2Wk0yNTkuMTUxIDMxLjQ3MUwyNTkuNjY2IDMyLjkwNzZIMjYzLjcxM0wyNjQuMjMyIDMxLjQ3MUgyNTkuMTUxWk0yNjUuOTg0IDMxLjQ3MVYzMi45MDc2SDI3MC4zNzlWMzEuNDcxSDI2NS45ODRaTTIyMS4yMzcgMzQuMjY1VjM1LjcwMzdIMjMxLjM4NlYzNC4yNjVIMjIxLjIzN1pNMjMyLjc0NCAzNC4yNjVWMzUuNzAzN0gyNDguMzY3QzI0OC42OTYgMzUuMzc0MyAyNDguODg0IDM0LjI2NSAyNDguODg0IDM0LjI2NUgyMzIuNzQ0VjM0LjI2NVpNMjUwLjEyMyAzNC4yNjVWMzUuNzAzN0gyNTcuMzU1VjM0LjI2NUgyNTAuMTIzWk0yNjAuMTUxIDM0LjI2NUwyNjAuNjggMzUuNzAzN0gyNjIuNzM5TDI2My4yMzYgMzQuMjY1SDI2MC4xNTFaTTI2NS45ODQgMzQuMjY1VjM1LjcwMzdIMjczLjI5NVYzNC4yNjVIMjY1Ljk4NFpNMjIxLjIzNyAzNy4wNjFWMzguNDk3N0gyMzEuMzg2VjM3LjA2MUgyMjEuMjM3Wk0yMzIuNzQ0IDM3LjA2MVYzOC40OTU2SDI0My43NzNDMjQ1LjcyOSAzOC40OTU2IDI0Ny4yMDYgMzcuMDYxIDI0Ny4yMDYgMzcuMDYxSDIzMi43NDRaTTI1MC4xMjMgMzcuMDYxVjM4LjQ5NzdIMjU3LjM1NVYzNy4wNjFIMjUwLjEyM1pNMjYxLjE1NSAzNy4wNjFMMjYxLjY2NCAzOC40OTM2TDI2MS43NTIgMzguNDk1NkwyNjIuMjY5IDM3LjA2MUgyNjEuMTU1VjM3LjA2MVpNMjY1Ljk4NCAzNy4wNjFWMzguNDk3N0gyNzMuMjk1VjM3LjA2MUgyNjUuOTg0WiIgZmlsbD0iIzFGNzBDMSIvPg0KPC9nPg0KPGRlZnM+DQo8Y2xpcFBhdGggaWQ9ImNsaXAwXzU4XzExMSI+DQo8cmVjdCB3aWR0aD0iNDQuNDQ3MyIgaGVpZ2h0PSIyOS42MzE1IiBmaWxsPSJ3aGl0ZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNzUzLjk1NSAxNC44MTU1KSIvPg0KPC9jbGlwUGF0aD4NCjxjbGlwUGF0aCBpZD0iY2xpcDFfNThfMTExIj4NCjxyZWN0IHdpZHRoPSI3Ni41NDgxIiBoZWlnaHQ9IjE2LjM1MDciIGZpbGw9IndoaXRlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1MjUuNTk5IDIwLjk4ODkpIi8+DQo8L2NsaXBQYXRoPg0KPGNsaXBQYXRoIGlkPSJjbGlwMl81OF8xMTEiPg0KPHJlY3Qgd2lkdGg9IjUyLjEzNzIiIGhlaWdodD0iMjAuOTk4NyIgZmlsbD0id2hpdGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIyMS4xNTggMTcuNDk5KSIvPg0KPC9jbGlwUGF0aD4NCjwvZGVmcz4NCjwvc3ZnPg0K" style="\n            width: 742.5px;\n            position: relative;\n            top: 107px;\n            left: 32px;\n            ">\n            <a href='+Mp+' style="\n        float: left;\n        border-radius: 56px;\n        background: #0D6EFD;\n        padding-top: 8px;\n        width: 280px;\n        height: 38px;\n        text-align: center;\n        position: relative;\n        top: 127px;\n        left: 274px;\n        font-size: 16px;\n        color: white;\n        text-decoration: none;\n        letter-spacing: 0.02em;\n    ">Claim your FREE account</a>\n            <div style="\n    font-size: 14px;\n    position: relative;\n    top: 180px;\n    left: 19px;\n    letter-spacing: 0.02em;\n    font-weight: 500;\n    line-height: 125%;\n">have a Syncfusion account? <a href="https://www.syncfusion.com/account/login?ReturnUrl=/account/login" style="text-decoration: none;\ncolor: #0D6EFD;\nfont-weight: 500;">Sign In</a></div>\n        </div>\n    </div>';if("undefined"!=typeof document&&!h(document)){var e=w("div",{innerHTML:t});document.body.appendChild(e)}},Yp=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Wp=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Qp=0,Xp=0,qp=0,Gp=!0,Zp=!1,$p=!1,Kp=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.randomId=b(),n.isStringTemplate=!1,n.needsID=!1,n.isReactHybrid=!1,h(n.enableRtl)&&n.setProperties({enableRtl:rp},!0),h(n.locale)&&n.setProperties({locale:sp},!0),n.moduleLoader=new Pp(n),n.localObserver=new ip(n),np.on("notifyExternalChange",n.detectFunction,n,n.randomId),"undefined"==typeof window||"undefined"==typeof document||_p()||-1!==Bp.indexOf(n.getModuleName())&&(qp+=1)>5&&(Gp=!1),c(i)||n.appendTo(),n}return Yp(e,t),e.prototype.requiredModules=function(){return[]},e.prototype.destroy=function(){this.isDestroyed||(this.enablePersistence&&this.setPersistData(),this.localObserver.destroy(),this.refreshing||(x([this.element],["e-control"]),this.trigger("destroyed",{cancel:!1}),t.prototype.destroy.call(this),this.moduleLoader.clean(),np.off("notifyExternalChange",this.detectFunction,this.randomId)))},e.prototype.refresh=function(){this.refreshing=!0,this.moduleLoader.clean(),this.destroy(),this.clearChanges(),this.localObserver=new ip(this),this.preRender(),this.injectModules(),this.render(),this.refreshing=!1},e.prototype.accessMount=function(){this.mount&&!this.isReactHybrid&&this.mount()},e.prototype.getRootElement=function(){return this.isReactHybrid?this.actualElement:this.element},e.prototype.getLocalData=function(){var t=this.getModuleName()+this.element.id;return $p?window.localStorage.getItem(t+this.ej2StatePersistenceVersion):window.localStorage.getItem(t)},e.prototype.appendTo=function(e){if(h(e)||"string"!=typeof e?h(e)||(this.element=e):this.element=A(e,document),!h(this.element)){var i="e-"+this.getModuleName().toLowerCase();I([this.element],["e-control",i]),this.isProtectedOnChange=!1,this.needsID&&!this.element.id&&(this.element.id=this.getUniqueID(this.getModuleName())),this.enablePersistence&&(this.mergePersistData(),window.addEventListener("unload",this.setPersistData.bind(this)));var r=n("ej2_instances",this.element);r&&-1!==r.indexOf(this)||t.prototype.addInstance.call(this),this.preRender(),this.injectModules(),Gp||Zp||(Fp(),Zp=!0),this.render(),this.mount?this.accessMount():this.trigger("created")}},e.prototype.renderComplete=function(t){if(f()){window.sfBlazor.renderComplete(this.element,t)}this.isRendered=!0},e.prototype.dataBind=function(){this.injectModules(),t.prototype.dataBind.call(this)},e.prototype.on=function(t,e,i){if("string"==typeof t)this.localObserver.on(t,e,i);else for(var n=0,r=t;n<r.length;n++){var o=r[n];this.localObserver.on(o.event,o.handler,o.context)}},e.prototype.off=function(t,e){if("string"==typeof t)this.localObserver.off(t,e);else for(var i=0,n=t;i<n.length;i++){var r=n[i];this.localObserver.off(r.event,r.handler)}},e.prototype.notify=function(t,e){!0!==this.isDestroyed&&this.localObserver.notify(t,e)},e.prototype.getInjectedModules=function(){return this.injectedModules},e.Inject=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.prototype.injectedModules||(this.prototype.injectedModules=[]);for(var i=0;i<t.length;i++)-1===this.prototype.injectedModules.indexOf(t[parseInt(i.toString(),10)])&&this.prototype.injectedModules.push(t[parseInt(i.toString(),10)])},e.prototype.createElement=function(t,e,i){return w(t,e)},e.prototype.triggerStateChange=function(t,e){this.isReactHybrid&&(this.setState(),this.currentContext={calls:t,args:e})},e.prototype.injectModules=function(){this.injectedModules&&this.injectedModules.length&&this.moduleLoader.inject(this.requiredModules(),this.injectedModules)},e.prototype.detectFunction=function(t){var e=Object.keys(t);e.length&&(this[e[0]]=t[e[0]])},e.prototype.mergePersistData=function(){var t;h(t=$p?window.localStorage.getItem(this.getModuleName()+this.element.id+this.ej2StatePersistenceVersion):window.localStorage.getItem(this.getModuleName()+this.element.id))||""===t||this.setProperties(JSON.parse(t),!0)},e.prototype.setPersistData=function(){this.isDestroyed||($p?window.localStorage.setItem(this.getModuleName()+this.element.id+this.ej2StatePersistenceVersion,this.getPersistData()):window.localStorage.setItem(this.getModuleName()+this.element.id,this.getPersistData()))},e.prototype.renderReactTemplates=function(t){h(t)||t()},e.prototype.clearTemplate=function(t,e){},e.prototype.getUniqueID=function(t){return this.isHistoryChanged()&&(Qp=0),Cp=this.pageID(location.href),Xp=history.length,t+"_"+Cp+"_"+Qp++},e.prototype.pageID=function(t){var e=0;if(0===t.length)return e;for(var i=0;i<t.length;i++){e=(e<<5)-e+t.charCodeAt(i),e&=e}return Math.abs(e)},e.prototype.isHistoryChanged=function(){return Cp!==this.pageID(location.href)||Xp!==history.length},e.prototype.addOnPersist=function(t){for(var e=this,i={},o=0,s=t;o<s.length;o++){var a=s[o],l=void 0;c(l=n(a,this))||r(a,this.getActualProperties(l),i)}return JSON.stringify(i,function(t,i){return e.getActualProperties(i)})},e.prototype.getActualProperties=function(t){return t instanceof Rp?n("properties",t):t},e.prototype.ignoreOnPersist=function(t){return JSON.stringify(this.iterateJsonProperties(this.properties,t))},e.prototype.iterateJsonProperties=function(t,e){for(var i={},n=function(n){if(-1===e.indexOf(n)){var o=t[n];if("object"!=typeof o||o instanceof Array)i[""+n]=o;else{var s=e.filter(function(t){return new RegExp(n+".").test(t)}).map(function(t){return t.replace(n+".","")});i[""+n]=r.iterateJsonProperties(r.getActualProperties(o),s)}}},r=this,o=0,s=Object.keys(t);o<s.length;o++){n(s[o])}return i},Wp([W(!1)],e.prototype,"enablePersistence",void 0),Wp([W()],e.prototype,"enableRtl",void 0),Wp([W()],e.prototype,"locale",void 0),e=Wp([$],e)}(Op);"undefined"!=typeof window&&window.addEventListener("popstate",function(){Qp=0});var Jp,tu=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),eu=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},iu={left:0,top:0,bottom:0,right:0},nu={isDragged:!1},ru=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tu(e,t),eu([W(0)],e.prototype,"left",void 0),eu([W(0)],e.prototype,"top",void 0),e}(Rp),ou=function(t){function e(e,n){var r=t.call(this,n,e)||this;return r.dragLimit=i.getDefaultPosition(),r.borderWidth=i.getDefaultPosition(),r.padding=i.getDefaultPosition(),r.diffX=0,r.prevLeft=0,r.prevTop=0,r.dragProcessStarted=!1,r.eleTop=0,r.tapHoldTimer=0,r.externalInitialize=!1,r.diffY=0,r.parentScrollX=0,r.parentScrollY=0,r.droppables={},r.bind(),r}tu(e,t),i=e,e.prototype.bind=function(){this.toggleEvents(),Np.isIE&&I([this.element],"e-block-touch"),this.droppables[this.scope]={}},e.getDefaultPosition=function(){return l({},iu)},e.prototype.toggleEvents=function(t){var e;c(this.handle)||(e=A(this.handle,this.element));var i=this.enableTapHold&&Np.isDevice&&Np.isTouch?this.mobileInitialize:this.initialize;t?Ep.remove(e||this.element,Np.isSafari()?"touchstart":Np.touchStartEvent,i):Ep.add(e||this.element,Np.isSafari()?"touchstart":Np.touchStartEvent,i,this)},e.prototype.mobileInitialize=function(t){var e=this,i=t.currentTarget;this.tapHoldTimer=setTimeout(function(){e.externalInitialize=!0,e.removeTapholdTimer(),e.initialize(t,i)},this.tapHoldThreshold),Ep.add(document,Np.isSafari()?"touchmove":Np.touchMoveEvent,this.removeTapholdTimer,this),Ep.add(document,Np.isSafari()?"touchend":Np.touchEndEvent,this.removeTapholdTimer,this)},e.prototype.removeTapholdTimer=function(){clearTimeout(this.tapHoldTimer),Ep.remove(document,Np.isSafari()?"touchmove":Np.touchMoveEvent,this.removeTapholdTimer),Ep.remove(document,Np.isSafari()?"touchend":Np.touchEndEvent,this.removeTapholdTimer)},e.prototype.getScrollableParent=function(t,e){return h(t)?null:t[{vertical:"scrollHeight",horizontal:"scrollWidth"}[""+e]]>t[{vertical:"clientHeight",horizontal:"clientWidth"}[""+e]]&&("vertical"===e?t.scrollTop>0:t.scrollLeft>0)?("vertical"===e?(this.parentScrollY=this.parentScrollY+(0===this.parentScrollY?t.scrollTop:t.scrollTop-this.parentScrollY),this.tempScrollHeight=t.scrollHeight):(this.parentScrollX=this.parentScrollX+(0===this.parentScrollX?t.scrollLeft:t.scrollLeft-this.parentScrollX),this.tempScrollWidth=t.scrollWidth),h(t)?t:this.getScrollableParent(t.parentNode,e)):this.getScrollableParent(t.parentNode,e)},e.prototype.getScrollableValues=function(){this.parentScrollX=0,this.parentScrollY=0;this.element.classList.contains("e-dialog")&&this.element.classList.contains("e-dlg-modal"),this.getScrollableParent(this.element.parentNode,"vertical"),this.getScrollableParent(this.element.parentNode,"horizontal")},e.prototype.initialize=function(t,e){if(this.currentStateTarget=t.target,!this.isDragStarted()){if(this.isDragStarted(!0),this.externalInitialize=!1,this.target=t.currentTarget||e,this.dragProcessStarted=!1,this.abort){var i=this.abort;"string"==typeof i&&(i=[i]);for(var n=0;n<i.length;n++)if(!h(j(t.target,i[parseInt(n.toString(),10)])))return void(this.isDragStarted()&&this.isDragStarted(!0))}this.preventDefault&&!c(t.changedTouches)&&"touchstart"!==t.type&&t.preventDefault(),this.element.setAttribute("aria-grabbed","true");var r=this.getCoordinates(t);if(this.initialPosition={x:r.pageX,y:r.pageY},!this.clone){var o=this.element.getBoundingClientRect();this.getScrollableValues(),t.clientX===t.pageX&&(this.parentScrollX=0),t.clientY===t.pageY&&(this.parentScrollY=0),this.relativeXPosition=r.pageX-(o.left+this.parentScrollX),this.relativeYPosition=r.pageY-(o.top+this.parentScrollY)}this.externalInitialize?this.intDragStart(t):(Ep.add(document,Np.isSafari()?"touchmove":Np.touchMoveEvent,this.intDragStart,this),Ep.add(document,Np.isSafari()?"touchend":Np.touchEndEvent,this.intDestroy,this)),this.toggleEvents(!0),"touchstart"!==t.type&&this.isPreventSelect&&document.body.classList.add("e-prevent-select"),this.externalInitialize=!1,Ep.trigger(document.documentElement,Np.isSafari()?"touchstart":Np.touchStartEvent,t)}},e.prototype.intDragStart=function(t){this.removeTapholdTimer();var e=!c(t.changedTouches);if(!e||1===t.changedTouches.length){var i,n=this.getCoordinates(t),r=getComputedStyle(this.element);this.margin={left:parseInt(r.marginLeft,10),top:parseInt(r.marginTop,10),right:parseInt(r.marginRight,10),bottom:parseInt(r.marginBottom,10)};var o=this.element;if(this.clone&&this.dragTarget){var s=j(t.target,this.dragTarget);h(s)||(o=s)}this.isReplaceDragEle&&(o=this.currentStateCheck(t.target,o)),this.offset=this.calculateParentPosition(o),this.position=this.getMousePosition(t,this.isDragScroll);var a=this.initialPosition.x-n.pageX,l=this.initialPosition.y-n.pageY;if(Math.sqrt(a*a+l*l)>=this.distance||this.externalInitialize){var d=this.getHelperElement(t);if(!d||h(d))return;e&&t.preventDefault();var p=this.helperElement=d;if(this.parentClientRect=this.calculateParentPosition(p.offsetParent),this.dragStart){var u={event:t,element:o,target:this.getProperTargetElement(t),bindEvents:f()?this.bindDragEvents.bind(this):null,dragElement:p};this.trigger("dragStart",u)}this.dragArea?this.setDragArea():(this.dragLimit={left:0,right:0,bottom:0,top:0},this.borderWidth={top:0,left:0}),i={left:this.position.left-this.parentClientRect.left,top:this.position.top-this.parentClientRect.top},this.clone&&!this.enableTailMode&&(this.diffX=this.position.left-this.offset.left,this.diffY=this.position.top-this.offset.top),this.getScrollableValues();var g=getComputedStyle(o),m=parseFloat(g.marginTop);this.clone&&0!==m&&(i.top+=m),this.eleTop=isNaN(parseFloat(g.top))?0:parseFloat(g.top)-this.offset.top,this.enableScrollHandler&&!this.clone&&(i.top-=this.parentScrollY,i.left-=this.parentScrollX);var v=this.getProcessedPositionValue({top:i.top-this.diffY+"px",left:i.left-this.diffX+"px"});this.dragArea&&"string"!=typeof this.dragArea&&this.dragArea.classList.contains("e-kanban-content")&&"relative"===this.dragArea.style.position&&(i.top+=this.dragArea.scrollTop),this.dragElePosition={top:i.top,left:i.left},P(p,this.getDragPosition({position:"absolute",left:v.left,top:v.top})),Ep.remove(document,Np.isSafari()?"touchmove":Np.touchMoveEvent,this.intDragStart),Ep.remove(document,Np.isSafari()?"touchend":Np.touchEndEvent,this.intDestroy),f()||this.bindDragEvents(p)}}},e.prototype.bindDragEvents=function(t){C(t)?(Ep.add(document,Np.isSafari()?"touchmove":Np.touchMoveEvent,this.intDrag,this),Ep.add(document,Np.isSafari()?"touchend":Np.touchEndEvent,this.intDragStop,this),this.setGlobalDroppables(!1,this.element,t)):(this.toggleEvents(),document.body.classList.remove("e-prevent-select"))},e.prototype.elementInViewport=function(t){for(this.top=t.offsetTop,this.left=t.offsetLeft,this.width=t.offsetWidth,this.height=t.offsetHeight;t.offsetParent;)t=t.offsetParent,this.top+=t.offsetTop,this.left+=t.offsetLeft;return this.top>=window.pageYOffset&&this.left>=window.pageXOffset&&this.top+this.height<=window.pageYOffset+window.innerHeight&&this.left+this.width<=window.pageXOffset+window.innerWidth},e.prototype.getProcessedPositionValue=function(t){return this.queryPositionInfo?this.queryPositionInfo(t):t},e.prototype.calculateParentPosition=function(t){if(h(t))return{left:0,top:0};var e=t.getBoundingClientRect(),i=getComputedStyle(t);return{left:e.left+window.pageXOffset-parseInt(i.marginLeft,10),top:e.top+window.pageYOffset-parseInt(i.marginTop,10)}},e.prototype.intDrag=function(t){if(c(t.changedTouches)||1===t.changedTouches.length){this.clone&&t.changedTouches&&Np.isDevice&&Np.isTouch&&t.preventDefault();var e,i;this.position=this.getMousePosition(t,this.isDragScroll);var n=this.getDocumentWidthHeight("Height");n<this.position.top&&(this.position.top=n);var r=this.getDocumentWidthHeight("Width");if(r<this.position.left&&(this.position.left=r),this.drag){var o=this.getProperTargetElement(t);this.trigger("drag",{event:t,element:this.element,target:o})}var s=this.checkTargetElement(t);if(s.target&&s.instance){var a=!0;this.hoverObject&&(this.hoverObject.instance!==s.instance?this.triggerOutFunction(t,s):a=!1),a&&(s.instance.dragData[this.scope]=this.droppables[this.scope],s.instance.intOver(t,s.target),this.hoverObject=s)}else this.hoverObject&&this.triggerOutFunction(t,s);var l=this.droppables[this.scope].helper;this.parentClientRect=this.calculateParentPosition(this.helperElement.offsetParent);var d=this.parentClientRect.left,p=this.parentClientRect.top,u=this.getCoordinates(t),g=u.pageX,m=u.pageY,f=this.position.left-this.diffX,v=this.position.top-this.diffY,y=getComputedStyle(l);if(this.dragArea){if(this.pageX!==g||this.skipDistanceCheck){var b=l.offsetWidth+(parseFloat(y.marginLeft)+parseFloat(y.marginRight));e=this.dragLimit.left>f&&f>0?this.dragLimit.left:this.dragLimit.right+window.pageXOffset<f+b&&f>0?f-(f-this.dragLimit.right)+window.pageXOffset-b:f<0?this.dragLimit.left:f}if(this.pageY!==m||this.skipDistanceCheck){var S=l.offsetHeight+(parseFloat(y.marginTop)+parseFloat(y.marginBottom));i=this.dragLimit.top>v&&v>0?this.dragLimit.top:this.dragLimit.bottom+window.pageYOffset<v+S&&v>0?v-(v-this.dragLimit.bottom)+window.pageYOffset-S:v<0?this.dragLimit.top:v}}else e=f,i=v;var w=p+this.borderWidth.top,I=d+this.borderWidth.left;this.dragProcessStarted&&(h(i)&&(i=this.prevTop),h(e)&&(e=this.prevLeft));var x,M;if(this.helperElement.classList.contains("e-treeview"))this.dragArea?(this.dragLimit.top=this.clone?this.dragLimit.top:0,x=i-w<0?this.dragLimit.top:i-this.borderWidth.top,M=e-I<0?this.dragLimit.left:e-this.borderWidth.left):(x=i-this.borderWidth.top,M=e-this.borderWidth.left);else if(this.dragArea){var C=this.helperElement.classList.contains("e-dialog");this.dragLimit.top=this.clone?this.dragLimit.top:0,x=i-w<0?this.dragLimit.top:i-w,M=e-I<0?C?e-(I-this.borderWidth.left):this.dragElePosition.left:e-I}else x=i-w,M=e-I;var N=parseFloat(getComputedStyle(this.element).marginTop);if(N>0&&(this.clone&&(x+=N,v<0&&(N+v>=0?x=N+v:x-=N),x=this.dragLimit.bottom<x?this.dragLimit.bottom:x),i-w<0))if(v+N+(l.offsetHeight-w)>=0){var E=this.dragLimit.top+v-w;E+N+w<0?x-=N+w:x=E}else x-=N+w;if(this.dragArea&&this.helperElement.classList.contains("e-treeview")){x=x+(S=l.offsetHeight+(parseFloat(y.marginTop)+parseFloat(y.marginBottom)))>this.dragLimit.bottom?this.dragLimit.bottom-S:x}this.enableScrollHandler&&!this.clone&&(x-=this.parentScrollY,M-=this.parentScrollX),this.dragArea&&"string"!=typeof this.dragArea&&this.dragArea.classList.contains("e-kanban-content")&&"relative"===this.dragArea.style.position&&(x+=this.dragArea.scrollTop);var D=this.getProcessedPositionValue({top:x+"px",left:M+"px"});P(l,this.getDragPosition(D)),this.elementInViewport(l)||!this.enableAutoScroll||this.helperElement.classList.contains("e-treeview")||this.helperElement.scrollIntoView();var T=document.querySelectorAll(":hover");if(this.enableAutoScroll&&this.helperElement.classList.contains("e-treeview")){0===T.length&&(T=this.getPathElements(t));var O=this.getScrollParent(T,!1);this.elementInViewport(this.helperElement)?this.getScrollPosition(O,x):this.elementInViewport(this.helperElement)||(0===(T=[].slice.call(document.querySelectorAll(":hover"))).length&&(T=this.getPathElements(t)),O=this.getScrollParent(T,!0),this.getScrollPosition(O,x))}this.dragProcessStarted=!0,this.prevLeft=e,this.prevTop=i,this.position.left=e,this.position.top=i,this.pageX=g,this.pageY=m}},e.prototype.getScrollParent=function(t,e){for(var i,n=e?t.reverse():t,r=n.length-1;r>=0;r--)if(("auto"===(i=window.getComputedStyle(n[parseInt(r.toString(),10)])["overflow-y"])||"scroll"===i)&&n[parseInt(r.toString(),10)].scrollHeight>n[parseInt(r.toString(),10)].clientHeight)return n[parseInt(r.toString(),10)];if("visible"===(i=window.getComputedStyle(document.scrollingElement)["overflow-y"]))return document.scrollingElement.style.overflow="auto",document.scrollingElement},e.prototype.getScrollPosition=function(t,e){t&&t===document.scrollingElement?t.clientHeight+document.scrollingElement.scrollTop-this.helperElement.clientHeight<e&&t.getBoundingClientRect().height+this.parentClientRect.top>e?t.scrollTop+=this.helperElement.clientHeight:t.scrollTop>e-this.helperElement.clientHeight&&(t.scrollTop-=this.helperElement.clientHeight):t&&t!==document.scrollingElement&&(t.clientHeight+t.getBoundingClientRect().top-this.helperElement.clientHeight+document.scrollingElement.scrollTop<e?t.scrollTop+=this.helperElement.clientHeight:t.getBoundingClientRect().top>e-this.helperElement.clientHeight-document.scrollingElement.scrollTop&&(t.scrollTop-=this.helperElement.clientHeight))},e.prototype.getPathElements=function(t){var e=t.clientX>0?t.clientX:0,i=t.clientY>0?t.clientY:0;return document.elementsFromPoint(e,i)},e.prototype.triggerOutFunction=function(t,e){this.hoverObject.instance.intOut(t,e.target),this.hoverObject.instance.dragData[this.scope]=null,this.hoverObject=null},e.prototype.getDragPosition=function(t){var e=l({},t);return this.axis&&("x"===this.axis?delete e.top:"y"===this.axis&&delete e.left),e},e.prototype.getDocumentWidthHeight=function(t){var e=document.body,i=document.documentElement;return Math.max(e["scroll"+t],i["scroll"+t],e["offset"+t],i["offset"+t],i["client"+t])},e.prototype.intDragStop=function(t){if(this.dragProcessStarted=!1,c(t.changedTouches)||1===t.changedTouches.length){if(-1!==["touchend","pointerup","mouseup"].indexOf(t.type)){if(this.dragStop){var e=this.getProperTargetElement(t);this.trigger("dragStop",{event:t,element:this.element,target:e,helper:this.helperElement})}this.intDestroy(t)}else this.element.setAttribute("aria-grabbed","false");var i=this.checkTargetElement(t);i.target&&i.instance&&(i.instance.dragStopCalled=!0,i.instance.dragData[this.scope]=this.droppables[this.scope],i.instance.intDrop(t,i.target)),this.setGlobalDroppables(!0),document.body.classList.remove("e-prevent-select")}},e.prototype.intDestroy=function(t){this.dragProcessStarted=!1,this.toggleEvents(),document.body.classList.remove("e-prevent-select"),this.element.setAttribute("aria-grabbed","false"),Ep.remove(document,Np.isSafari()?"touchmove":Np.touchMoveEvent,this.intDragStart),Ep.remove(document,Np.isSafari()?"touchend":Np.touchEndEvent,this.intDragStop),Ep.remove(document,Np.isSafari()?"touchend":Np.touchEndEvent,this.intDestroy),Ep.remove(document,Np.isSafari()?"touchmove":Np.touchMoveEvent,this.intDrag),this.isDragStarted()&&this.isDragStarted(!0)},e.prototype.onPropertyChanged=function(t,e){},e.prototype.getModuleName=function(){return"draggable"},e.prototype.isDragStarted=function(t){return t&&(nu.isDragged=!nu.isDragged),nu.isDragged},e.prototype.setDragArea=function(){var t,e,i,n=0,r=0;if(i="string"===typeof this.dragArea?A(this.dragArea):this.dragArea){var o=i.getBoundingClientRect();t=i.scrollWidth?i.scrollWidth:o.right-o.left,e=i.scrollHeight?this.dragArea&&!h(this.helperElement)&&this.helperElement.classList.contains("e-treeview")?i.clientHeight:i.scrollHeight:o.bottom-o.top;for(var s=["Top","Left","Bottom","Right"],a=getComputedStyle(i),l=0;l<s.length;l++){var c=s[parseInt(l.toString(),10)],d=a["border"+c+"Width"],p=a["padding"+c],u=c.toLowerCase();this.borderWidth[""+u]=isNaN(parseFloat(d))?0:parseFloat(d),this.padding[""+u]=isNaN(parseFloat(p))?0:parseFloat(p)}n=this.dragArea&&!h(this.helperElement)&&this.helperElement.classList.contains("e-treeview")?o.top+document.scrollingElement.scrollTop:o.top,r=o.left,this.dragLimit.left=r+this.borderWidth.left+this.padding.left,this.dragLimit.top=i.offsetTop+this.borderWidth.top+this.padding.top,this.dragLimit.right=r+t-(this.borderWidth.right+this.padding.right),this.dragLimit.bottom=n+e-(this.borderWidth.bottom+this.padding.bottom)}},e.prototype.getProperTargetElement=function(t){var e,i=this.getCoordinates(t),n=this.helperElement.style.pointerEvents||"",r=-1!==t.type.indexOf("pointer")&&"safari"===Np.info.name&&parseInt(Np.info.version)>12;return u(t.target,this.helperElement)||-1!==t.type.indexOf("touch")||r?(this.helperElement.style.pointerEvents="none",e=document.elementFromPoint(i.clientX,i.clientY),this.helperElement.style.pointerEvents=n):e=t.target,e},e.prototype.currentStateCheck=function(t,e){return h(this.currentStateTarget)||this.currentStateTarget===t?h(e)?t:e:this.currentStateTarget},e.prototype.getMousePosition=function(t,e){var i,n,r=void 0!==t.srcElement?t.srcElement:t.target,o=this.getCoordinates(t),s=h(r.offsetParent);if(e?(i=this.clone?o.pageX:o.pageX+(s?0:r.offsetParent.scrollLeft)-this.relativeXPosition,n=this.clone?o.pageY:o.pageY+(s?0:r.offsetParent.scrollTop)-this.relativeYPosition):(i=this.clone?o.pageX:o.pageX+window.pageXOffset-this.relativeXPosition,n=this.clone?o.pageY:o.pageY+window.pageYOffset-this.relativeYPosition),!this.element.classList.contains("e-dialog")&&!this.element.classList.contains("e-card")&&document.scrollingElement){var a=document.scrollingElement.scrollHeight>0&&document.scrollingElement.scrollHeight>document.scrollingElement.clientHeight&&document.scrollingElement.scrollTop>0;i=document.scrollingElement.scrollWidth>0&&document.scrollingElement.scrollWidth>document.scrollingElement.clientWidth&&document.scrollingElement.scrollLeft>0?i-document.scrollingElement.scrollLeft:i,n=a?n-document.scrollingElement.scrollTop:n}return{left:i-(this.margin.left+this.cursorAt.left),top:n-(this.margin.top+this.cursorAt.top)}},e.prototype.getCoordinates=function(t){return t.type.indexOf("touch")>-1?t.changedTouches[0]:t},e.prototype.getHelperElement=function(t){var e;return this.clone?this.helper?e=this.helper({sender:t,element:this.target}):(e=w("div",{className:"e-drag-helper e-block-touch",innerHTML:"Draggable"}),document.body.appendChild(e)):e=this.element,e},e.prototype.setGlobalDroppables=function(t,e,i){this.droppables[this.scope]=t?null:{draggable:e,helper:i,draggedElement:this.element}},e.prototype.checkTargetElement=function(t){var e=this.getProperTargetElement(t),i=this.getDropInstance(e);if(!i&&e&&!h(e.parentNode)){var n=j(e.parentNode,".e-droppable")||e.parentElement;n&&(i=this.getDropInstance(n))}return{target:e,instance:i}},e.prototype.getDropInstance=function(t){var e,i=t&&t.ej2_instances;if(i)for(var n=0,r=i;n<r.length;n++){var o=r[n];if("droppable"===o.getModuleName()){e=o;break}}return e},e.prototype.destroy=function(){this.toggleEvents(!0),t.prototype.destroy.call(this)};var i;return eu([Q({},ru)],e.prototype,"cursorAt",void 0),eu([W(!0)],e.prototype,"clone",void 0),eu([W()],e.prototype,"dragArea",void 0),eu([W()],e.prototype,"isDragScroll",void 0),eu([W()],e.prototype,"isReplaceDragEle",void 0),eu([W(!0)],e.prototype,"isPreventSelect",void 0),eu([Z()],e.prototype,"drag",void 0),eu([Z()],e.prototype,"dragStart",void 0),eu([Z()],e.prototype,"dragStop",void 0),eu([W(1)],e.prototype,"distance",void 0),eu([W()],e.prototype,"handle",void 0),eu([W()],e.prototype,"abort",void 0),eu([W()],e.prototype,"helper",void 0),eu([W("default")],e.prototype,"scope",void 0),eu([W("")],e.prototype,"dragTarget",void 0),eu([W()],e.prototype,"axis",void 0),eu([W()],e.prototype,"queryPositionInfo",void 0),eu([W(!1)],e.prototype,"enableTailMode",void 0),eu([W(!1)],e.prototype,"skipDistanceCheck",void 0),eu([W(!0)],e.prototype,"preventDefault",void 0),eu([W(!1)],e.prototype,"enableAutoScroll",void 0),eu([W(!1)],e.prototype,"enableTapHold",void 0),eu([W(750)],e.prototype,"tapHoldThreshold",void 0),eu([W(!1)],e.prototype,"enableScrollHandler",void 0),e=i=eu([$],e)}(Op),su=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),au=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},lu=function(t){function e(e,i){var n=t.call(this,i,e)||this;return n.mouseOver=!1,n.dragData={},n.dragStopCalled=!1,n.bind(),n}return su(e,t),e.prototype.bind=function(){this.wireEvents()},e.prototype.wireEvents=function(){Ep.add(this.element,Np.isSafari()?"touchend":Np.touchEndEvent,this.intDrop,this)},e.prototype.onPropertyChanged=function(t,e){},e.prototype.getModuleName=function(){return"droppable"},e.prototype.intOver=function(t,e){if(!this.mouseOver){var i=this.dragData[this.scope];this.trigger("over",{event:t,target:e,dragData:i}),this.mouseOver=!0}},e.prototype.intOut=function(t,e){this.mouseOver&&(this.trigger("out",{evt:t,target:e}),this.mouseOver=!1)},e.prototype.intDrop=function(t,e){if(this.dragStopCalled){this.dragStopCalled=!1;var i,n=!0,r=this.dragData[this.scope],o=!!r&&(r.helper&&C(r.helper));o&&(i=this.isDropArea(t,r.helper,e),this.accept&&(n=B(r.helper,this.accept))),o&&this.drop&&i.canDrop&&n&&this.trigger("drop",{event:t,target:i.target,droppedElement:r.helper,dragData:r}),this.mouseOver=!1}},e.prototype.isDropArea=function(t,e,i){var n={canDrop:!0,target:i||t.target},r="touchend"===t.type;if(r||n.target===e){e.style.display="none";var o=r?t.changedTouches[0]:t,s=document.elementFromPoint(o.clientX,o.clientY);n.canDrop=!1,n.canDrop=u(s,this.element),n.canDrop&&(n.target=s),e.style.display=""}return n},e.prototype.destroy=function(){Ep.remove(this.element,Np.isSafari()?"touchend":Np.touchEndEvent,this.intDrop),t.prototype.destroy.call(this)},au([W()],e.prototype,"accept",void 0),au([W("default")],e.prototype,"scope",void 0),au([Z()],e.prototype,"drop",void 0),au([Z()],e.prototype,"over",void 0),au([Z()],e.prototype,"out",void 0),e=au([$],e)}(Op),hu=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),cu=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},du={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,space:32,escape:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,plus:187,comma:188,minus:189,dot:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222},pu=function(t){function e(e,n){var r=t.call(this,n,e)||this;return r.keyPressHandler=function(t){for(var e=t.altKey,n=t.ctrlKey,o=t.shiftKey,s=t.which,a=0,l=Object.keys(r.keyConfigs);a<l.length;a++)for(var h=l[a],c=0,d=r.keyConfigs[""+h].split(",");c<d.length;c++){var p=d[c],u=i.getKeyConfigData(p.trim());e===u.altKey&&n===u.ctrlKey&&o===u.shiftKey&&s===u.keyCode&&(t.action=h,r.keyAction&&r.keyAction(t))}},r.bind(),r}hu(e,t),i=e,e.prototype.destroy=function(){this.unwireEvents(),t.prototype.destroy.call(this)},e.prototype.onPropertyChanged=function(t,e){},e.prototype.bind=function(){this.wireEvents()},e.prototype.getModuleName=function(){return"keyboard"},e.prototype.wireEvents=function(){this.element.addEventListener(this.eventName,this.keyPressHandler)},e.prototype.unwireEvents=function(){this.element.removeEventListener(this.eventName,this.keyPressHandler)},e.getKeyConfigData=function(t){if(t in this.configCache)return this.configCache[""+t];var e=t.toLowerCase().split("+"),n={altKey:-1!==e.indexOf("alt"),ctrlKey:-1!==e.indexOf("ctrl"),shiftKey:-1!==e.indexOf("shift"),keyCode:null};return e[e.length-1].length>1&&Number(e[e.length-1])?n.keyCode=Number(e[e.length-1]):n.keyCode=i.getKeyCode(e[e.length-1]),i.configCache[""+t]=n,n},e.getKeyCode=function(t){return du[""+t]||t.toUpperCase().charCodeAt(0)};var i;return e.configCache={},cu([W({})],e.prototype,"keyConfigs",void 0),cu([W("keyup")],e.prototype,"eventName",void 0),cu([Z()],e.prototype,"keyAction",void 0),e=i=cu([$],e)}(Op),uu=function(){function t(t,e,i){this.controlName=t,this.localeStrings=e,this.setLocale(i||sp)}return t.prototype.setLocale=function(e){var i=this.intGetControlConstant(t.locale,e);this.currentLocale=i||this.localeStrings},t.load=function(t){this.locale=l(this.locale,t,{},!0)},t.prototype.getConstant=function(t){return h(this.currentLocale[""+t])?this.localeStrings[""+t]||"":this.currentLocale[""+t]},t.prototype.intGetControlConstant=function(t,e){return t[""+e]?t[""+e][this.controlName]:null},t.locale={},t}(),gu=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),mu=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},fu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return gu(e,t),mu([W(50)],e.prototype,"swipeThresholdDistance",void 0),e}(Rp),vu=/(Up|Down)/,yu=function(t){function e(e,i){var n=t.call(this,i,e)||this;return n.touchAction=!0,n.tapCount=0,n.startEvent=function(t){if(!0===n.touchAction){var e=n.updateChangeTouches(t);void 0!==t.changedTouches&&(n.touchAction=!1),n.isTouchMoved=!1,n.movedDirection="",n.startPoint=n.lastMovedPoint={clientX:e.clientX,clientY:e.clientY},n.startEventData=e,n.hScrollLocked=n.vScrollLocked=!1,n.tStampStart=Date.now(),n.timeOutTapHold=setTimeout(function(){n.tapHoldEvent(t)},n.tapHoldThreshold),Ep.add(n.element,Np.touchMoveEvent,n.moveEvent,n),Ep.add(n.element,Np.touchEndEvent,n.endEvent,n),Ep.add(n.element,Np.touchCancelEvent,n.cancelEvent,n)}},n.moveEvent=function(t){var e=n.updateChangeTouches(t);n.movedPoint=e,n.isTouchMoved=!(e.clientX===n.startPoint.clientX&&e.clientY===n.startPoint.clientY);var i={};if(n.isTouchMoved){clearTimeout(n.timeOutTapHold),n.calcScrollPoints(t);i=l(i,{},{startEvents:n.startEventData,originalEvent:t,startX:n.startPoint.clientX,startY:n.startPoint.clientY,distanceX:n.distanceX,distanceY:n.distanceY,scrollDirection:n.scrollDirection,velocity:n.getVelocity(e)}),n.trigger("scroll",i),n.lastMovedPoint={clientX:e.clientX,clientY:e.clientY}}},n.cancelEvent=function(t){clearTimeout(n.timeOutTapHold),clearTimeout(n.timeOutTap),n.tapCount=0,n.swipeFn(t),Ep.remove(n.element,Np.touchCancelEvent,n.cancelEvent)},n.endEvent=function(t){n.swipeFn(t),n.isTouchMoved||"function"==typeof n.tap&&(n.trigger("tap",{originalEvent:t,tapCount:++n.tapCount}),n.timeOutTap=setTimeout(function(){n.tapCount=0},n.tapThreshold)),n.modeclear()},n.swipeFn=function(t){clearTimeout(n.timeOutTapHold),clearTimeout(n.timeOutTap);var e=n.updateChangeTouches(t),i=e.clientX-n.startPoint.clientX,r=e.clientY-n.startPoint.clientY;i=Math.floor(i<0?-1*i:i),r=Math.floor(r<0?-1*r:i),n.isTouchMoved=i>1||r>1;/Firefox/.test(Np.userAgent)&&0===e.clientX&&0===e.clientY&&"mouseup"===t.type&&(n.isTouchMoved=!1),n.endPoint=e,n.calcPoints(t);var o={originalEvent:t,startEvents:n.startEventData,startX:n.startPoint.clientX,startY:n.startPoint.clientY,distanceX:n.distanceX,distanceY:n.distanceY,swipeDirection:n.movedDirection,velocity:n.getVelocity(e)};if(n.isTouchMoved){var s=void 0,a=n.swipeSettings.swipeThresholdDistance;s=l(s,n.defaultArgs,o);var h=!1,c=n.element,d=n.isScrollable(c),p=vu.test(n.movedDirection);(a<n.distanceX&&!p||a<n.distanceY&&p)&&(h=!d||n.checkSwipe(c,p)),h&&n.trigger("swipe",s)}n.modeclear()},n.modeclear=function(){n.modeClear=setTimeout(function(){n.touchAction=!0},"function"!=typeof n.tap?0:20),n.lastTapTime=(new Date).getTime(),Ep.remove(n.element,Np.touchMoveEvent,n.moveEvent),Ep.remove(n.element,Np.touchEndEvent,n.endEvent),Ep.remove(n.element,Np.touchCancelEvent,n.cancelEvent)},n.bind(),n}return gu(e,t),e.prototype.onPropertyChanged=function(t,e){},e.prototype.bind=function(){this.wireEvents(),Np.isIE&&this.element.classList.add("e-block-touch")},e.prototype.destroy=function(){this.unwireEvents(),t.prototype.destroy.call(this)},e.prototype.wireEvents=function(){Ep.add(this.element,Np.touchStartEvent,this.startEvent,this)},e.prototype.unwireEvents=function(){Ep.remove(this.element,Np.touchStartEvent,this.startEvent)},e.prototype.getModuleName=function(){return"touch"},e.prototype.isScrollable=function(t){var e=getComputedStyle(t),i=e.overflow+e.overflowX+e.overflowY;return!!/(auto|scroll)/.test(i)},e.prototype.tapHoldEvent=function(t){this.tapCount=0,this.touchAction=!0;var e;Ep.remove(this.element,Np.touchMoveEvent,this.moveEvent),Ep.remove(this.element,Np.touchEndEvent,this.endEvent),e={originalEvent:t},this.trigger("tapHold",e),Ep.remove(this.element,Np.touchCancelEvent,this.cancelEvent)},e.prototype.calcPoints=function(t){var e=this.updateChangeTouches(t);this.defaultArgs={originalEvent:t},this.distanceX=Math.abs(Math.abs(e.clientX)-Math.abs(this.startPoint.clientX)),this.distanceY=Math.abs(Math.abs(e.clientY)-Math.abs(this.startPoint.clientY)),this.distanceX>this.distanceY?this.movedDirection=e.clientX>this.startPoint.clientX?"Right":"Left":this.movedDirection=e.clientY<this.startPoint.clientY?"Up":"Down"},e.prototype.calcScrollPoints=function(t){var e=this.updateChangeTouches(t);this.defaultArgs={originalEvent:t},this.distanceX=Math.abs(Math.abs(e.clientX)-Math.abs(this.lastMovedPoint.clientX)),this.distanceY=Math.abs(Math.abs(e.clientY)-Math.abs(this.lastMovedPoint.clientY)),(this.distanceX>this.distanceY||!0===this.hScrollLocked)&&!1===this.vScrollLocked?(this.scrollDirection=e.clientX>this.lastMovedPoint.clientX?"Right":"Left",this.hScrollLocked=!0):(this.scrollDirection=e.clientY<this.lastMovedPoint.clientY?"Up":"Down",this.vScrollLocked=!0)},e.prototype.getVelocity=function(t){var e=t.clientX,i=t.clientY,n=Date.now(),r=e-this.startPoint.clientX,o=i-this.startPoint.clientX,s=n-this.tStampStart;return Math.sqrt(r*r+o*o)/s},e.prototype.checkSwipe=function(t,e){var i=["scroll","offset"],n=e?["Height","Top"]:["Width","Left"];return t[i[0]+n[0]]<=t[i[1]+n[0]]||(0===t[i[0]+n[1]]||t[i[1]+n[0]]+t[i[0]+n[1]]>=t[i[0]+n[0]])},e.prototype.updateChangeTouches=function(t){return t.changedTouches&&0!==t.changedTouches.length?t.changedTouches[0]:t},mu([Z()],e.prototype,"tap",void 0),mu([Z()],e.prototype,"tapHold",void 0),mu([Z()],e.prototype,"swipe",void 0),mu([Z()],e.prototype,"scroll",void 0),mu([W(350)],e.prototype,"tapThreshold",void 0),mu([W(750)],e.prototype,"tapHoldThreshold",void 0),mu([Q({},fu)],e.prototype,"swipeSettings",void 0),e=mu([$],e)}(Op),bu=new RegExp("\\n|\\r|\\s\\s+","g"),Su=new RegExp(/'|"/g),wu=new RegExp("if ?\\("),Iu=new RegExp("else if ?\\("),xu=new RegExp("else"),Mu=new RegExp("for ?\\("),Cu=new RegExp("(/if|/for)"),Nu=new RegExp("\\((.*)\\)",""),Eu=new RegExp("^[0-9]+$","g"),Du=new RegExp("[\\w\"'.\\s+]+","g"),Tu=new RegExp('"(.*?)"',"g"),Ou=new RegExp("[\\w\"'@#$.\\s-+]+","g"),Lu=new RegExp("\\${([^}]*)}","g"),Au=/^\..*/gm,zu=/\\/gi,ku=/\\\\/gi,ju=new RegExp("[\\w\"'@#$.\\s+]+","g"),Pu=/\window\./gm,Ru=/^[\n\r.]+<tr|^<tr/,Bu=/^[\n\r.]+<svg|^<path|^<g/,Hu={},Uu={compile:(new(function(){function t(){}return t.prototype.compile=function(t,e,i){return void 0===e&&(e={}),lt(t,e)},t}())).compile},Vu=["script","style","iframe[src]",'link[href*="javascript:"]','object[type="text/x-scriptlet"]','object[data^="data:text/html;base64"]','img[src^="data:text/html;base64"]','[src^="javascript:"]','[dynsrc^="javascript:"]','[lowsrc^="javascript:"]','[type^="application/x-shockwave-flash"]'],_u=[{attribute:"href",selector:'[href*="javascript:"]'},{attribute:"background",selector:'[background^="javascript:"]'},{attribute:"style",selector:'[style*="javascript:"]'},{attribute:"style",selector:'[style*="expression("]'},{attribute:"href",selector:'a[href^="data:text/html;base64"]'}],Fu=["onchange","onclick","onmouseover","onmouseout","onkeydown","onload","onerror","onblur","onfocus","onbeforeload","onbeforeunload","onkeyup","onsubmit","onafterprint","onbeforeonload","onbeforeprint","onblur","oncanplay","oncanplaythrough","onchange","onclick","oncontextmenu","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onerror","onfocus","onformchange","onforminput","onhaschange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onoffline","onoine","ononline","onpagehide","onpageshow","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreadystatechange","onredo","onresize","onscroll","onseeked","onseeking","onselect","onstalled","onstorage","onsubmit","onsuspend","ontimeupdate","onundo","onunload","onvolumechange","onwaiting","onmouseenter","onmouseleave","onmousewheel","onstart","onpropertychange"],Yu=function(){function t(){}return t.beforeSanitize=function(){return{selectors:{tags:Vu,attributes:_u}}},t.sanitize=function(t){var e=this.beforeSanitize();return this.serializeValue(e,t)},t.serializeValue=function(t,e){this.removeAttrs=t.selectors.attributes,this.removeTags=t.selectors.tags,this.wrapElement=document.createElement("div"),this.wrapElement.innerHTML=e,this.removeXssTags(),this.removeJsEvents(),this.removeXssAttrs();var i=this.wrapElement.innerHTML;return this.removeElement(),i.replace("&amp;","&")},t.removeElement=function(){for(var t=this.wrapElement.children,e=0;e<t.length;e++)for(var i=t[parseInt(e.toString(),10)].attributes,n=0;n<i.length;n++)this.wrapElement.children[parseInt(e.toString(),10)].removeAttribute(i[parseInt(n.toString(),10)].localName)},t.removeXssTags=function(){var t=this.wrapElement.querySelectorAll(this.removeTags.join(","));t.length>0&&t.forEach(function(t){T(t)})},t.removeJsEvents=function(){var t=this.wrapElement.querySelectorAll("["+Fu.join("],[")+"]");t.length>0&&t.forEach(function(t){Fu.forEach(function(e){t.hasAttribute(e)&&t.removeAttribute(e)})})},t.removeXssAttrs=function(){var t=this;this.removeAttrs.forEach(function(e,i){var n=t.wrapElement.querySelectorAll(e.selector);n.length>0&&n.forEach(function(t){t.removeAttribute(e.attribute)})})},t}(),Wu=Object.freeze({blazorCultureFormats:dp,get IntlBase(){return Ud},Ajax:gp,Animation:zp,rippleEffect:et,get isRippleEnabled(){return kp},enableRipple:function(t){return kp=t},get animationMode(){return jp},setGlobalAnimation:function(t){jp=t},Base:Op,getComponent:H,removeChildInstance:function(t){for(var e=[].slice.call(t.getElementsByClassName("e-control")),i=0;i<e.length;i++){var n=e[parseInt(i.toString(),10)].classList[1].split("e-")[1],r=H(e[parseInt(i.toString(),10)],n);c(r)||r.destroy()}},Browser:Np,get versionBasedStatePersistence(){return $p},enableVersionBasedPersistence:function(t){$p=t},Component:Kp,ChildProperty:Rp,Position:ru,Draggable:ou,Droppable:lu,EventHandler:Ep,onIntlChange:np,get rightToLeft(){return rp},cldrData:op,get defaultCulture(){return sp},get defaultCurrencyCode(){return ap},Internationalization:hp,setCulture:function(t){sp=t,np.notify("notifyExternalChange",{locale:sp})},setCurrencyCode:function(t){ap=t,np.notify("notifyExternalChange",{currencyCode:ap})},loadCldr:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=0,n=t;i<n.length;i++){var r=n[i];l(op,r,{},!0)}},enableRtl:function(t){void 0===t&&(t=!0),rp=t,np.notify("notifyExternalChange",{enableRtl:rp})},getNumericObject:S,getNumberDependable:function(t,e){var i=Ud.getDependables(op,t,"",!0);return Ud.getCurrencySymbol(i.numericObject,e)},getDefaultDateObject:function(t){return Ud.getDependables(op,"",t,!1)[lp[1]]},KeyboardEvents:pu,L10n:uu,ModuleLoader:Pp,Property:W,Complex:Q,ComplexFactory:X,Collection:q,CollectionFactory:G,Event:Z,NotifyPropertyChanges:$,CreateBuilder:function(t){var e=function(t){return this.element=t,this};return function(i){return e.prototype.hasOwnProperty("create")||((e.prototype=J(t)).create=function(){var e=l({},{},this.properties);return this.properties={},new t(e,this.element)}),new e(i)}},SwipeSettings:fu,Touch:yu,get HijriParser(){return Od},blazorTemplates:Hu,getRandomId:ut,compile:gt,updateBlazorTemplate:mt,resetBlazorTemplate:ft,setTemplateEngine:vt,getTemplateEngine:yt,disableBlazorMode:function(){zd=!1},createInstance:e,setImmediate:i,getValue:n,setValue:r,deleteObject:o,containerObject:kd,isObject:s,getEnumValue:function(t,e){return t[e]},merge:a,extend:l,isNullOrUndefined:h,isUndefined:c,getUniqueID:d,debounce:p,queryParams:function(t){for(var e=[],i=0,n=Object.keys(t);i<n.length;i++){var r=n[i];e.push(encodeURIComponent(r)+"="+encodeURIComponent(""+t[""+r]))}return e.join("&")},isObjectArray:function(t){var e=Object.prototype.toString;return"[object Array]"===e.call(t)&&"[object Object]"===e.call(t[0])},compareElementParent:u,throwError:g,print:function(t,e){var i=document.createElement("div"),n=[].slice.call(document.getElementsByTagName("head")[0].querySelectorAll("base, link, style")),r=[].slice.call(document.getElementsByTagName("body")[0].querySelectorAll("link, style"));if(r.length)for(var o=0,s=r.length;o<s;o++)n.push(r[parseInt(o.toString(),10)]);var a="";h(e)&&(e=window.open("","print","height=452,width=1024,tabbar=no")),i.appendChild(t.cloneNode(!0));var l=0;for(s=n.length;l<s;l++)a+=n[parseInt(l.toString(),10)].outerHTML;e.document.write("<!DOCTYPE html> <html><head>"+a+"</head><body>"+i.innerHTML+"<script> (function() { window.ready = true; })(); <\/script></body></html>"),e.document.close(),e.focus();var c=setInterval(function(){e.ready&&(e.print(),e.close(),clearInterval(c))},500);return e},formatUnit:m,enableBlazorMode:function(){zd=!0},isBlazor:f,getElement:v,getInstance:y,addInstance:function(t,e){var i="string"==typeof t?document.querySelector(t):t;i[""+Ld]?i[""+Ld].push(e):i[""+Ld]=[e]},uniqueID:b,createElement:w,addClass:I,removeClass:x,isVisible:C,prepend:N,append:E,detach:T,remove:O,attributes:L,select:A,selectAll:z,closest:j,siblings:function(t){for(var e=[],i=0,n=Array.prototype.slice.call(t.parentNode.childNodes);i<n.length;i++){var r=n[i];r.nodeType===Node.ELEMENT_NODE&&t!==r&&e.push(r)}return e},getAttributeOrDefault:function(t,e,i){var r,o=s(t);return r=o?n("attributes."+e,t):t.getAttribute(e),h(r)&&i&&(o?t.attributes[""+e]=i:t.setAttribute(e,i.toString()),r=i),r},setStyleAttribute:P,classList:R,matches:B,includeInnerHTML:function(t,e){t.innerHTML=e},containsClass:function(t,e){return s(t)?new RegExp("\\b"+e+"\\b","i").test(t.attributes.className):t.classList.contains(e)},cloneNode:function(t,e){return s(t)?e?l({},{},t,!0):void 0:t.cloneNode(e)},Observer:ip,SanitizeHtmlHelper:Yu,componentList:Bp,registerLicense:at,validateLicense:_p,getVersion:function(){return Vp.version},createLicenseOverlay:Fp}),Qu=function(){function t(t,e){this.width=t,this.height=e}return t.prototype.isEmpty=function(){return 0===this.height&&0===this.width},t.prototype.clone=function(){return new t(this.width,this.height)},t}(),Xu=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),qu=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Gu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Xu(e,t),e.equals=function(t,e){return t===e||!(!t||!e)&&(!t||!e||t.x===e.x&&t.y===e.y)},e.isEmptyPoint=function(t){return!t.x||!t.y},e.transform=function(t,e,i){var n={x:0,y:0};return n.x=Math.round(100*(t.x+i*Math.cos(e*Math.PI/180)))/100,n.y=Math.round(100*(t.y+i*Math.sin(e*Math.PI/180)))/100,n},e.findLength=function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},e.findAngle=function(t,e){var i=Math.atan2(e.y-t.y,e.x-t.x);return i=180*i/Math.PI,(i%=360)<0&&(i+=360),i},e.distancePoints=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},e.getLengthFromListOfPoints=function(t){for(var e=0,i=0;i<t.length-1;i++)e+=this.distancePoints(t[parseInt(i.toString(),10)],t[i+1]);return e},e.adjustPoint=function(t,e,i,n){var r,o=i?{x:t.x,y:t.y}:{x:e.x,y:e.y};return t.x===e.x?t.y<e.y&&i||t.y>e.y&&!i?o.y+=n:o.y-=n:t.y===e.y?t.x<e.x&&i||t.x>e.x&&!i?o.x+=n:o.x-=n:i?(r=this.findAngle(t,e),o=this.transform(t,r,n)):(r=this.findAngle(e,t),o=this.transform(e,r,n)),o},e.direction=function(t,e){return Math.abs(e.x-t.x)>Math.abs(e.y-t.y)?t.x<e.x?"Right":"Left":t.y<e.y?"Bottom":"Top"},e.prototype.getClassName=function(){return"Point"},qu([W(0)],e.prototype,"x",void 0),qu([W(0)],e.prototype,"y",void 0),e}(Rp),Zu=function(){function t(t,e,i,n){this.x=Number.MAX_VALUE,this.y=Number.MAX_VALUE,this.width=0,this.height=0,void 0===t||void 0===e?(t=e=Number.MAX_VALUE,i=n=0):(void 0===i&&(i=0),void 0===n&&(n=0)),this.x=t,this.y=e,this.width=i,this.height=n}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topLeft",{get:function(){return{x:this.left,y:this.top}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topRight",{get:function(){return{x:this.right,y:this.top}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomLeft",{get:function(){return{x:this.left,y:this.bottom}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomRight",{get:function(){return{x:this.right,y:this.bottom}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"middleLeft",{get:function(){return{x:this.left,y:this.y+this.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"middleRight",{get:function(){return{x:this.right,y:this.y+this.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topCenter",{get:function(){return{x:this.x+this.width/2,y:this.top}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomCenter",{get:function(){return{x:this.x+this.width/2,y:this.bottom}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"center",{get:function(){return{x:this.x+this.width/2,y:this.y+this.height/2}},enumerable:!0,configurable:!0}),t.prototype.equals=function(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height},t.prototype.uniteRect=function(t){var e=Math.max(Number.NaN===this.right||this.x===Number.MAX_VALUE?t.right:this.right,t.right),i=Math.max(Number.NaN===this.bottom||this.y===Number.MAX_VALUE?t.bottom:this.bottom,t.bottom);return this.x=Math.min(this.left,t.left),this.y=Math.min(this.top,t.top),this.width=e-this.x,this.height=i-this.y,this},t.prototype.unitePoint=function(t){if(this.x===Number.MAX_VALUE)return this.x=t.x,void(this.y=t.y);var e=Math.min(this.left,t.x),i=Math.min(this.top,t.y),n=Math.max(this.right,t.x),r=Math.max(this.bottom,t.y);this.x=e,this.y=i,this.width=n-this.x,this.height=r-this.y},t.prototype.Inflate=function(t){return this.x-=t,this.y-=t,this.width+=2*t,this.height+=2*t,this},t.prototype.intersects=function(t){return!(this.right<t.left||this.left>t.right||this.top>t.bottom||this.bottom<t.top)},t.prototype.containsRect=function(t){return this.left<=t.left&&this.right>=t.right&&this.top<=t.top&&this.bottom>=t.bottom},t.prototype.containsPoint=function(t,e){return void 0===e&&(e=0),this.left-e<=t.x&&this.right+e>=t.x&&this.top-e<=t.y&&this.bottom+e>=t.y},t.toBounds=function(e){for(var i=new t,n=0,r=e;n<r.length;n++){var o=r[n];i.unitePoint(o)}return i},t.empty=new t(Number.MAX_VALUE,Number.MIN_VALUE,0,0),t}();!function(t){t[t.Identity=0]="Identity",t[t.Translation=1]="Translation",t[t.Scaling=2]="Scaling",t[t.Unknown=4]="Unknown"}(Jp||(Jp={}));var $u,Ku=function(){return function(t,e,i,n,r,o,s){this.m11=t,this.m12=e,this.m21=i,this.m22=n,this.offsetX=r,this.offsetY=o,this.type=s}}(),Ju=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),tg=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},eg=function(t){if(t){if(f())return ag;switch(t.type){case"Linear":return lg;case"Radial":return hg;default:return lg}}return lg},ig=function(){return function(t,e,i,n){this.left=t,this.right=e,this.top=i,this.bottom=n}}(),ng=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ju(e,t),tg([W(0)],e.prototype,"left",void 0),tg([W(0)],e.prototype,"right",void 0),tg([W(0)],e.prototype,"top",void 0),tg([W(0)],e.prototype,"bottom",void 0),e}(Rp),rg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ju(e,t),tg([W(45)],e.prototype,"angle",void 0),tg([W(5)],e.prototype,"distance",void 0),tg([W(.7)],e.prototype,"opacity",void 0),tg([W("lightgrey")],e.prototype,"color",void 0),e}(Rp),og=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ju(e,t),e.prototype.getClassName=function(){return"Stop"},tg([W("")],e.prototype,"color",void 0),tg([W(0)],e.prototype,"offset",void 0),tg([W(1)],e.prototype,"opacity",void 0),e}(Rp),sg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ju(e,t),tg([q([],og)],e.prototype,"stops",void 0),tg([W("None")],e.prototype,"type",void 0),tg([W("")],e.prototype,"id",void 0),e}(Rp),ag=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ju(e,t),tg([W(0)],e.prototype,"x1",void 0),tg([W(0)],e.prototype,"x2",void 0),tg([W(0)],e.prototype,"y1",void 0),tg([W(0)],e.prototype,"y2",void 0),tg([W(0)],e.prototype,"cx",void 0),tg([W(0)],e.prototype,"cy",void 0),tg([W(0)],e.prototype,"fx",void 0),tg([W(0)],e.prototype,"fy",void 0),tg([W(50)],e.prototype,"r",void 0),e}(sg),lg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ju(e,t),tg([W(0)],e.prototype,"x1",void 0),tg([W(0)],e.prototype,"x2",void 0),tg([W(0)],e.prototype,"y1",void 0),tg([W(0)],e.prototype,"y2",void 0),e}(sg),hg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ju(e,t),tg([W(0)],e.prototype,"cx",void 0),tg([W(0)],e.prototype,"cy",void 0),tg([W(0)],e.prototype,"fx",void 0),tg([W(0)],e.prototype,"fy",void 0),tg([W(50)],e.prototype,"r",void 0),e}(sg),cg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ju(e,t),tg([W("white")],e.prototype,"fill",void 0),tg([W("black")],e.prototype,"strokeColor",void 0),tg([W("")],e.prototype,"strokeDashArray",void 0),tg([W(1)],e.prototype,"strokeWidth",void 0),tg([W(1)],e.prototype,"opacity",void 0),tg([X(eg)],e.prototype,"gradient",void 0),e}(Rp),dg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ju(e,t),tg([W("transparent")],e.prototype,"fill",void 0),e}(cg),pg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ju(e,t),tg([W("black")],e.prototype,"color",void 0),tg([W("Arial")],e.prototype,"fontFamily",void 0),tg([W(12)],e.prototype,"fontSize",void 0),tg([W(!1)],e.prototype,"italic",void 0),tg([W(!1)],e.prototype,"bold",void 0),tg([W("CollapseSpace")],e.prototype,"whiteSpace",void 0),tg([W("WrapWithOverflow")],e.prototype,"textWrapping",void 0),tg([W("Center")],e.prototype,"textAlign",void 0),tg([W("None")],e.prototype,"textDecoration",void 0),tg([W("Wrap")],e.prototype,"textOverflow",void 0),tg([W("transparent")],e.prototype,"fill",void 0),e}(cg),ug=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ju(e,t),tg([W("white")],e.prototype,"fill",void 0),tg([W("Wrap")],e.prototype,"textOverflow",void 0),tg([W(1)],e.prototype,"strokeWidth",void 0),tg([X(eg)],e.prototype,"gradient",void 0),tg([W(1)],e.prototype,"opacity",void 0),tg([W(!1)],e.prototype,"italic",void 0),tg([W("")],e.prototype,"strokeDashArray",void 0),tg([W("black")],e.prototype,"color",void 0),tg([W(12)],e.prototype,"fontSize",void 0),tg([W("Arial")],e.prototype,"fontFamily",void 0),tg([W("CollapseSpace")],e.prototype,"whiteSpace",void 0),tg([W("Center")],e.prototype,"textAlign",void 0),tg([W("None")],e.prototype,"textDecoration",void 0),tg([W(!1)],e.prototype,"bold",void 0),tg([W("black")],e.prototype,"strokeColor",void 0),tg([W("WrapWithOverflow")],e.prototype,"textWrapping",void 0),e}(Rp);!function(t){t[t.Default=0]="Default",t[t.expandNode=2]="expandNode",t[t.interaction=4]="interaction",t[t.GroupingInProgress=8]="GroupingInProgress",t[t.GroupClipboardInProcess=16]="GroupClipboardInProcess",t[t.ClearObject=32]="ClearObject"}($u||($u={}));var gg;!function(t){t[t.Visible=1]="Visible",t[t.Hidden=2]="Hidden",t[t.Hover=4]="Hover",t[t.Connect=8]="Connect"}(gg||(gg={}));var mg;!function(t){t[t.None=0]="None",t[t.ShowHorizontalLines=1]="ShowHorizontalLines",t[t.ShowVerticalLines=2]="ShowVerticalLines",t[t.ShowLines=3]="ShowLines",t[t.SnapToHorizontalLines=4]="SnapToHorizontalLines",t[t.SnapToVerticalLines=8]="SnapToVerticalLines",t[t.SnapToLines=12]="SnapToLines",t[t.SnapToObject=16]="SnapToObject",t[t.All=31]="All"}(mg||(mg={}));var fg;!function(t){t[t.None=1]="None",t[t.ConnectorSourceThumb=2]="ConnectorSourceThumb",t[t.ConnectorTargetThumb=4]="ConnectorTargetThumb",t[t.ResizeSouthEast=8]="ResizeSouthEast",t[t.ResizeSouthWest=16]="ResizeSouthWest",t[t.ResizeNorthEast=32]="ResizeNorthEast",t[t.ResizeNorthWest=64]="ResizeNorthWest",t[t.ResizeEast=128]="ResizeEast",t[t.ResizeWest=256]="ResizeWest",t[t.ResizeSouth=512]="ResizeSouth",t[t.ResizeNorth=1024]="ResizeNorth",t[t.Rotate=2048]="Rotate",t[t.UserHandle=4096]="UserHandle",t[t.ToolTip=8192]="ToolTip",t[t.ResizeAll=2046]="ResizeAll",t[t.All=16382]="All"}(fg||(fg={}));var vg;!function(t){t.SamePoint="SamePoint",t.DifferentPoint="DifferentPoint"}(vg||(vg={}));var yg;!function(t){t.Linear="Linear",t.Nonlinear="Nonlinear"}(yg||(yg={}));var bg;!function(t){t[t.None=1]="None",t[t.Select=2]="Select",t[t.Delete=4]="Delete",t[t.Drag=8]="Drag",t[t.DragSourceEnd=16]="DragSourceEnd",t[t.DragTargetEnd=32]="DragTargetEnd",t[t.DragSegmentThumb=64]="DragSegmentThumb",t[t.AllowDrop=128]="AllowDrop",t[t.Bridging=256]="Bridging",t[t.BridgeObstacle=512]="BridgeObstacle",t[t.InheritBridging=1024]="InheritBridging",t[t.PointerEvents=2048]="PointerEvents",t[t.Tooltip=4096]="Tooltip",t[t.InheritTooltip=8192]="InheritTooltip",t[t.Interaction=4218]="Interaction",t[t.ReadOnly=16384]="ReadOnly",t[t.LineRouting=32768]="LineRouting",t[t.InheritLineRouting=65536]="InheritLineRouting",t[t.ConnectToNearByNode=131072]="ConnectToNearByNode",t[t.ConnectToNearByPort=262144]="ConnectToNearByPort",t[t.ConnectToNearByElement=393216]="ConnectToNearByElement",t[t.Default=470590]="Default"}(bg||(bg={}));var Sg;!function(t){t[t.ReadOnly=2]="ReadOnly",t[t.InheritReadOnly=4]="InheritReadOnly",t[t.Select=8]="Select",t[t.Drag=16]="Drag",t[t.Resize=32]="Resize",t[t.Rotate=64]="Rotate",t[t.Interaction=120]="Interaction",t[t.None=0]="None"}(Sg||(Sg={}));var wg;!function(t){t[t.None=0]="None",t[t.Select=2]="Select",t[t.Drag=4]="Drag",t[t.Rotate=8]="Rotate",t[t.Shadow=16]="Shadow",t[t.PointerEvents=32]="PointerEvents",t[t.Delete=64]="Delete",t[t.InConnect=128]="InConnect",t[t.OutConnect=256]="OutConnect",t[t.Individual=512]="Individual",t[t.Expandable=1024]="Expandable",t[t.AllowDrop=2048]="AllowDrop",t[t.Inherit=78]="Inherit",t[t.ResizeNorthEast=4096]="ResizeNorthEast",t[t.ResizeEast=8192]="ResizeEast",t[t.ResizeSouthEast=16384]="ResizeSouthEast",t[t.ResizeSouth=32768]="ResizeSouth",t[t.ResizeSouthWest=65536]="ResizeSouthWest",t[t.ResizeWest=131072]="ResizeWest",t[t.ResizeNorthWest=262144]="ResizeNorthWest",t[t.ResizeNorth=524288]="ResizeNorth",t[t.Resize=1044480]="Resize",t[t.AspectRatio=1048576]="AspectRatio",t[t.Tooltip=2097152]="Tooltip",t[t.InheritTooltip=4194304]="InheritTooltip",t[t.ReadOnly=8388608]="ReadOnly",t[t.HideThumbs=16777216]="HideThumbs",t[t.AllowMovingOutsideLane=33554432]="AllowMovingOutsideLane",t[t.Default=5240814]="Default"}(wg||(wg={}));var Ig;!function(t){t[t.None=0]="None",t[t.ElementIsPort=2]="ElementIsPort",t[t.ElementIsGroup=4]="ElementIsGroup",t[t.HorizontalLaneHeader=8]="HorizontalLaneHeader"}(Ig||(Ig={}));var xg;!function(t){t[t.Rotate=2]="Rotate",t[t.ConnectorSource=4]="ConnectorSource",t[t.ConnectorTarget=8]="ConnectorTarget",t[t.ResizeNorthEast=16]="ResizeNorthEast",t[t.ResizeEast=32]="ResizeEast",t[t.ResizeSouthEast=64]="ResizeSouthEast",t[t.ResizeSouth=128]="ResizeSouth",t[t.ResizeSouthWest=256]="ResizeSouthWest",t[t.ResizeWest=512]="ResizeWest",t[t.ResizeNorthWest=1024]="ResizeNorthWest",t[t.ResizeNorth=2048]="ResizeNorth",t[t.Default=4094]="Default"}(xg||(xg={}));var Mg;!function(t){t[t.None=1]="None",t[t.Bridging=2]="Bridging",t[t.UndoRedo=4]="UndoRedo",t[t.Tooltip=8]="Tooltip",t[t.UserInteraction=16]="UserInteraction",t[t.ApiUpdate=32]="ApiUpdate",t[t.PageEditable=48]="PageEditable",t[t.Zoom=64]="Zoom",t[t.PanX=128]="PanX",t[t.PanY=256]="PanY",t[t.Pan=384]="Pan",t[t.ZoomTextEdit=512]="ZoomTextEdit",t[t.Virtualization=1024]="Virtualization",t[t.LineRouting=2048]="LineRouting",t[t.Default=500]="Default"}(Mg||(Mg={}));var Cg;!function(t){t[t.None=0]="None",t[t.SingleSelect=1]="SingleSelect",t[t.MultipleSelect=2]="MultipleSelect",t[t.ZoomPan=4]="ZoomPan",t[t.DrawOnce=8]="DrawOnce",t[t.ContinuousDraw=16]="ContinuousDraw",t[t.Default=3]="Default"}(Cg||(Cg={}));var Ng;!function(t){t[t.Self=1]="Self",t[t.Parent=2]="Parent"}(Ng||(Ng={}));var Eg;!function(t){t[t.Canvas=0]="Canvas",t[t.Svg=1]="Svg"}(Eg||(Eg={}));var Dg;!function(t){t[t.None=0]="None",t[t.Control=1]="Control",t[t.Meta=1]="Meta",t[t.Alt=2]="Alt",t[t.Shift=4]="Shift"}(Dg||(Dg={}));var Tg;!function(t){t[t.None=null]="None",t[t.Number0=0]="Number0",t[t.Number1=1]="Number1",t[t.Number2=2]="Number2",t[t.Number3=3]="Number3",t[t.Number4=4]="Number4",t[t.Number5=5]="Number5",t[t.Number6=6]="Number6",t[t.Number7=7]="Number7",t[t.Number8=8]="Number8",t[t.Number9=9]="Number9",t[t.A=65]="A",t[t.B=66]="B",t[t.C=67]="C",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.G=71]="G",t[t.H=72]="H",t[t.I=73]="I",t[t.J=74]="J",t[t.K=75]="K",t[t.L=76]="L",t[t.M=77]="M",t[t.N=78]="N",t[t.O=79]="O",t[t.P=80]="P",t[t.Q=81]="Q",t[t.R=82]="R",t[t.S=83]="S",t[t.T=84]="T",t[t.U=85]="U",t[t.V=86]="V",t[t.W=87]="W",t[t.X=88]="X",t[t.Y=89]="Y",t[t.Z=90]="Z",t[t.Left=37]="Left",t[t.Up=38]="Up",t[t.Right=39]="Right",t[t.Down=40]="Down",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.Delete=46]="Delete",t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.BackSpace=8]="BackSpace",t[t.F1=112]="F1",t[t.F2=113]="F2",t[t.F3=114]="F3",t[t.F4=115]="F4",t[t.F5=116]="F5",t[t.F6=117]="F6",t[t.F7=118]="F7",t[t.F8=119]="F8",t[t.F9=120]="F9",t[t.F10=121]="F10",t[t.F11=122]="F11",t[t.F12=123]="F12",t[t.Star=56]="Star",t[t.Plus=187]="Plus",t[t.Minus=189]="Minus"}(Tg||(Tg={}));var Og;!function(t){t[t.Render=2]="Render",t[t.PublicMethod=4]="PublicMethod",t[t.ToolAction=8]="ToolAction",t[t.UndoRedo=16]="UndoRedo",t[t.TextEdit=32]="TextEdit",t[t.Group=64]="Group",t[t.Clear=128]="Clear",t[t.PreventClearSelection=256]="PreventClearSelection",t[t.Interactions=512]="Interactions",t[t.PreventHistory=1024]="PreventHistory",t[t.PreventIconsUpdate=2048]="PreventIconsUpdate",t[t.PreventCollectionChangeOnDragOver=4096]="PreventCollectionChangeOnDragOver",t[t.PreventZIndexOnDragging=8192]="PreventZIndexOnDragging",t[t.isGroupDragging=16384]="isGroupDragging",t[t.DragUsingMouse=32768]="DragUsingMouse",t[t.DecoratorPropertyChange=65536]="DecoratorPropertyChange",t[t.PreventLaneContainerUpdate=131072]="PreventLaneContainerUpdate"}(Og||(Og={}));var Lg;!function(t){t[t.None=2]="None",t[t.DrawSelectorBorder=4]="DrawSelectorBorder",t[t.PreventRenderSelector=8]="PreventRenderSelector"}(Lg||(Lg={}));var Ag;!function(t){t[t.None=0]="None",t[t.PreventDrag=2]="PreventDrag",t[t.PreventScale=4]="PreventScale",t[t.PreventDataInit=8]="PreventDataInit",t[t.hScrollbarMoved=16]="hScrollbarMoved",t[t.vScrollbarMoved=32]="vScrollbarMoved",t[t.AnimationClick=64]="AnimationClick",t[t.EnableGroupAction=128]="EnableGroupAction",t[t.PanInProgress=256]="PanInProgress",t[t.OverViewAction=512]="OverViewAction"}(Ag||(Ag={}));var zg;!function(t){t[t.None=0]="None",t[t.PropertyChange=1024]="PropertyChange",t[t.Interaction=2048]="Interaction"}(zg||(zg={}));var kg;!function(t){t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Three=3]="Three",t[t.Four=4]="Four",t[t.Five=5]="Five"}(kg||(kg={}));var jg;!function(t){t[t.collectionChange=0]="collectionChange",t[t.rotateChange=1]="rotateChange",t[t.positionChange=2]="positionChange",t[t.propertyChange=3]="propertyChange",t[t.selectionChange=4]="selectionChange",t[t.sizeChange=5]="sizeChange",t[t.drop=6]="drop",t[t.sourcePointChange=7]="sourcePointChange",t[t.targetPointChange=8]="targetPointChange",t[t.connectionChange=9]="connectionChange",t[t.animationComplete=10]="animationComplete",t[t.click=11]="click",t[t.doubleClick=12]="doubleClick",t[t.scrollChange=13]="scrollChange",t[t.dragEnter=14]="dragEnter",t[t.dragLeave=15]="dragLeave",t[t.dragOver=16]="dragOver",t[t.textEdit=17]="textEdit",t[t.paletteSelectionChange=18]="paletteSelectionChange",t[t.historyChange=19]="historyChange",t[t.mouseEnter=20]="mouseEnter",t[t.mouseLeave=21]="mouseLeave",t[t.mouseOver=22]="mouseOver",t[t.expandStateChange=23]="expandStateChange",t[t.segmentCollectionChange=24]="segmentCollectionChange",t[t.commandExecute=25]="commandExecute",t[t.historyStateChange=26]="historyStateChange",t[t.onUserHandleMouseDown=27]="onUserHandleMouseDown",t[t.onUserHandleMouseUp=28]="onUserHandleMouseUp",t[t.onUserHandleMouseEnter=29]="onUserHandleMouseEnter",t[t.onUserHandleMouseLeave=30]="onUserHandleMouseLeave",t[t.onImageLoad=31]="onImageLoad",t[t.onDoBindingInit=32]="onDoBindingInit",t[t.keyUp=33]="keyUp",t[t.keyDown=34]="keyDown",t[t.fixedUserHandleClick=35]="fixedUserHandleClick",t[t.elementDraw=36]="elementDraw",t[t.mouseWheel=37]="mouseWheel",t[t.segmentChange=38]="segmentChange"}(jg||(jg={}));var Pg;!function(t){t[t.None=1]="None",t[t.Drag=2]="Drag",t[t.Draw=4]="Draw",t[t.InConnect=8]="InConnect",t[t.OutConnect=16]="OutConnect",t[t.Default=24]="Default"}(Pg||(Pg={}));var Rg,Bg="contextMenuClick",Hg="contextMenuOpen",Ug="contextMenuBeforeItemRender";!function(t){t[t.None=1]="None",t[t.Source=2]="Source",t[t.Target=4]="Target",t[t.Intermediate=8]="Intermediate",t[t.All=14]="All"}(Rg||(Rg={}));var Vg;!function(t){t[t.None=0]="None",t[t.SymmetricAngle=2]="SymmetricAngle",t[t.SymmetricDistance=4]="SymmetricDistance",t[t.Default=6]="Default"}(Vg||(Vg={}));var _g,Fg,Yg,Wg,Qg,Xg,qg,Gg=function(){function t(){this.pivot={x:.5,y:.5},this.isDirt=!0,this.isExport=!1,this.exportScaleValue={x:0,y:0},this.exportScaleOffset={x:0,y:0},this.canApplyStyle=!0,this.visible=!0,this.offsetX=0,this.offsetY=0,this.cornerRadius=0,this.minHeight=void 0,this.minWidth=void 0,this.maxWidth=void 0,this.maxHeight=void 0,this.width=void 0,this.height=void 0,this.rotateAngle=0,this.margin={left:0,right:0,top:0,bottom:0},this.horizontalAlignment="Auto",this.verticalAlignment="Auto",this.flip="None",this.relativeMode="Point",this.transform=Ng.Self|Ng.Parent,this.style={fill:"white",strokeColor:"black",opacity:1,strokeWidth:1},this.desiredSize=new Qu,this.actualSize=new Qu,this.parentTransform=0,this.preventContainer=!1,this.isSvgRender=!1,this.bounds=new Zu(0,0,0,0),this.shadow=null,this.description="",this.staticSize=!1,this.shapeType="",this.isRectElement=!1,this.isCalculateDesiredSize=!0,this.flipOffset={x:0,y:0},this.elementActions=Ig.None,this.inversedAlignment=!0,this.position=void 0,this.unitMode=void 0,this.float=!1,this.floatingBounds=void 0}return t.prototype.setOffsetWithRespectToBounds=function(t,e,i){this.unitMode=i,this.position={x:t,y:e}},t.prototype.getAbsolutePosition=function(t){if(void 0!==this.position)return"Absolute"===this.unitMode?this.position:{x:this.position.x*t.width,y:this.position.y*t.height}},Object.defineProperty(t.prototype,"outerBounds",{get:function(){return this.floatingBounds||this.bounds},set:function(t){this.floatingBounds=t},enumerable:!0,configurable:!0}),t.prototype.measure=function(t,e,i){var n=void 0!==this.width?this.width:(t.width||0)-this.margin.left-this.margin.right,r=void 0!==this.height?this.height:(t.height||0)-this.margin.top-this.margin.bottom;return this.id&&0===r&&this.elementActions&Ig.HorizontalLaneHeader&&(r=this.actualSize.height),this.desiredSize=new Qu(n,r),this.isCalculateDesiredSize&&(this.desiredSize=this.validateDesiredSize(this.desiredSize,t)),this.desiredSize},t.prototype.arrange=function(t){return this.actualSize=t,this.updateBounds(),this.actualSize},t.prototype.updateBounds=function(){this.bounds=ma(this)},t.prototype.validateDesiredSize=function(t,e){return!this.isRectElement||this.width||this.minWidth||this.maxWidth||(t.width=50),!this.isRectElement||this.height||this.minHeight||this.maxHeight||(t.height=50),(void 0===t||void 0!==this.width&&void 0!==this.height)&&((t=t||new Qu).width=void 0===this.width?(e.width||0)-this.margin.left-this.margin.right:this.width,t.height=void 0===this.height?(e.height||0)-this.margin.top-this.margin.bottom:this.height),void 0!==this.minWidth&&(t.width=Math.max(t.width,this.minWidth)),void 0!==this.minHeight&&(t.height=Math.max(t.height,this.minHeight)),void 0!==this.maxWidth&&0!==this.maxWidth&&(t.width=Math.min(t.width,this.maxWidth)),void 0!==this.maxHeight&&0!==this.maxHeight&&(t.height=Math.min(t.height,this.maxHeight)),t},t}(),Zg=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),$g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.padding=new ig(0,0,0,0),e.desiredBounds=void 0,e.measureChildren=!0,e.prevRotateAngle=0,e}return Zg(e,t),e.prototype.hasChildren=function(){return void 0!==this.children&&this.children.length>0},e.prototype.measure=function(t,i,n){this.desiredBounds=void 0;var r,o,s=void 0;if(this.hasChildren()){for(var a=0;a<this.children.length;a++){"Stretch"!==(r=this.children[parseInt(a.toString(),10)]).horizontalAlignment||t.width||(t.width=r.bounds.width),"Stretch"!==r.verticalAlignment||t.height||(t.height=r.bounds.height);var l="Stretch"===r.horizontalAlignment||"Stretch"===r.verticalAlignment;(this.measureChildren||l||r instanceof e&&void 0!==r.measureChildren)&&r.measure(t,i,n),o=this.GetChildrenBounds(r),"Stretch"!==r.horizontalAlignment&&"Stretch"!==r.verticalAlignment?void 0===this.desiredBounds?this.desiredBounds=o:this.desiredBounds.uniteRect(o):!this.actualSize||this.actualSize.width||this.actualSize.height||r.preventContainer||"Stretch"!==r.horizontalAlignment||"Stretch"!==r.verticalAlignment||(void 0===this.desiredBounds?this.desiredBounds=r.bounds:this.desiredBounds.uniteRect(r.bounds))}if(void 0!==this.desiredBounds&&0!==this.rotateAngle){var h={x:this.desiredBounds.x+this.desiredBounds.width*this.pivot.x,y:this.desiredBounds.y+this.desiredBounds.height*this.pivot.y},c=Da(this.rotateAngle,void 0,void 0,h);this.desiredBounds.x=c.x-this.desiredBounds.width*this.pivot.x,this.desiredBounds.y=c.y-this.desiredBounds.height*this.pivot.y}void 0!==this.desiredBounds&&(this.desiredBounds.width+=this.padding.left+this.padding.right,this.desiredBounds.height+=this.padding.top+this.padding.bottom,this.desiredBounds.x-=this.padding.left,this.desiredBounds.y-=this.padding.top),this.desiredBounds&&(s=new Qu(this.desiredBounds.width,this.desiredBounds.height))}return s=this.validateDesiredSize(s,t),this.stretchChildren(s),this.desiredSize=s,s},e.prototype.arrange=function(t){var i,n=this.desiredBounds;if(n){this.offsetX,this.offsetY;if(this.offsetX=n.x+n.width*this.pivot.x,this.offsetY=n.y+n.height*this.pivot.y,this.hasChildren())for(var r=0;r<this.children.length;r++){var o=!1;"Stretch"===(i=this.children[parseInt(r.toString(),10)]).horizontalAlignment&&(i.offsetX=this.offsetX,i.parentTransform=this.parentTransform+this.rotateAngle,this.flip&&this.elementActions&Ig.ElementIsGroup&&(i.parentTransform="Horizontal"===this.flip||"Vertical"===this.flip?-i.parentTransform:i.parentTransform),o=!0),"Stretch"===i.verticalAlignment&&(i.offsetY=this.offsetY,i.parentTransform=this.parentTransform+this.rotateAngle,o=!0),(o||this.measureChildren||i instanceof e&&void 0!==i.measureChildren)&&i.arrange(i.desiredSize)}}return this.actualSize=t,this.updateBounds(),this.prevRotateAngle=this.rotateAngle,t},e.prototype.stretchChildren=function(t){if(this.hasChildren())for(var i=0,n=this.children;i<n.length;i++){var r=n[i];"Stretch"!==r.horizontalAlignment&&void 0!==r.desiredSize.width||(r.desiredSize.width=t.width-r.margin.left-r.margin.right),"Stretch"!==r.verticalAlignment&&void 0!==r.desiredSize.height||(r.desiredSize.height=t.height-r.margin.top-r.margin.bottom),r instanceof e&&r.stretchChildren(r.desiredSize)}},e.prototype.applyPadding=function(t){t.width+=this.padding.left+this.padding.right,t.height+=this.padding.top+this.padding.bottom},e.prototype.findChildOffsetFromCenter=function(t,e){var i=Ta({x:e.x-t.desiredSize.width/2,y:e.y-t.desiredSize.height/2},t);i=Da(t.rotateAngle,e.x,e.y,i),i=Da(this.rotateAngle+this.parentTransform,this.offsetX,this.offsetY,i),t.offsetX=i.x,t.offsetY=i.y},e.prototype.GetChildrenBounds=function(t){var e=t.desiredSize.clone(),i=(t.rotateAngle,this.rotateAngle,t.offsetX),n=t.offsetY,r=i-e.width*t.pivot.x,o=n-e.height*t.pivot.y,s=r+e.width,a=o+e.height,l={x:r,y:o},h={x:s,y:o},c={x:r,y:a},d={x:s,y:a};return l=Da(t.rotateAngle,t.offsetX,t.offsetY,l),h=Da(t.rotateAngle,t.offsetX,t.offsetY,h),c=Da(t.rotateAngle,t.offsetX,t.offsetY,c),d=Da(t.rotateAngle,t.offsetX,t.offsetY,d),0!==this.rotateAngle&&(l=Da(-this.rotateAngle,void 0,void 0,l),h=Da(-this.rotateAngle,void 0,void 0,h),c=Da(-this.rotateAngle,void 0,void 0,c),d=Da(-this.rotateAngle,void 0,void 0,d)),Zu.toBounds([l,h,c,d])},e}(Gg),Kg=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Jg=function(t){function e(){var e=t.call(this)||this;return e.textContent="",e.canMeasure=!0,e.isLaneOrientation=!1,e.canConsiderBounds=!0,e.hyperlink={color:"blue"},e.doWrap=!0,e.textNodes=[],e.style={color:"black",fill:"transparent",strokeColor:"black",strokeWidth:1,fontFamily:"Arial",fontSize:12,whiteSpace:"CollapseSpace",textWrapping:"WrapWithOverflow",textAlign:"Center",italic:!1,bold:!1,textDecoration:"None",strokeDashArray:"",opacity:5,gradient:null,textOverflow:"Wrap"},e.style.fill="transparent",e.style.strokeColor="transparent",e}return Kg(e,t),Object.defineProperty(e.prototype,"content",{get:function(){return this.textContent},set:function(t){this.textContent!==t&&(this.textContent=t,this.isDirt=!0,this.doWrap=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"childNodes",{get:function(){return this.textNodes},set:function(t){this.textNodes=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wrapBounds",{get:function(){return this.textWrapBounds},set:function(t){this.textWrapBounds=t},enumerable:!0,configurable:!0}),e.prototype.refreshTextElement=function(){this.isDirt=!0},e.prototype.measure=function(t){var e;return e=this.isDirt&&this.canMeasure?Rs(this,this.style,this.content,this.isLaneOrientation?t.height:this.width||t.width):this.desiredSize,void 0===this.width||void 0===this.height?this.desiredSize=new Qu(e.width,e.height):this.desiredSize=new Qu(this.width,this.height),this.desiredSize=this.validateDesiredSize(this.desiredSize,t),this.desiredSize},e.prototype.arrange=function(t){return(t.width!==this.actualSize.width||t.height!==this.actualSize.height||this.isDirt)&&(this.doWrap=!0),this.actualSize=t,this.updateBounds(),this.isDirt=!1,this.actualSize},e}(Gg),tm=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),em=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.measureChildren=void 0,e}return tm(e,t),e.prototype.measure=function(e,i,n){var r=void 0,o=void 0;if(this.hasChildren()){for(var s=0,a=this.children;s<a.length;s++){var l=a[s];l instanceof Jg?l.canMeasure&&(e.width=e.width||this.maxWidth||this.minWidth,l.measure(e)):l instanceof Jg||l.measure(e,i,n);var h=l.desiredSize.clone();0!==l.rotateAngle&&(h=Ea(h,l.rotateAngle));var c=h.width+l.margin.right,d=h.height+l.margin.bottom,p=new Zu(l.margin.left,l.margin.top,c,d);if(l.float){if(void 0!==l.getAbsolutePosition(h))continue}l instanceof Jg&&!(l instanceof Jg&&l.canConsiderBounds)||(void 0===o?o=p:o.uniteRect(p))}if(o){var u=0,g=0;u=Math.max(o.left,0),g=Math.max(o.top,0),r=new Qu(o.width+u,o.height+g)}}return r=t.prototype.validateDesiredSize.call(this,r,e),t.prototype.stretchChildren.call(this,r),r.width+=this.padding.left+this.padding.right,r.height+=this.padding.top+this.padding.bottom,this.desiredSize=r,r},e.prototype.arrange=function(e,i){if(this.outerBounds=new Zu,this.hasChildren())for(var n=this.offsetY-e.height*this.pivot.y+this.padding.top,r=this.offsetX-e.width*this.pivot.x+this.padding.left,o=0,s=this.children;o<s.length;o++){var a=s[o];if(0!=(a.transform&Ng.Parent)){a.parentTransform=this.parentTransform+this.rotateAngle,("None"!==this.flip||this.elementActions&Ig.ElementIsGroup)&&(a.parentTransform="Horizontal"===this.flip||"Vertical"===this.flip?-a.parentTransform:a.parentTransform);var l=a.desiredSize.clone(),h=void 0,c={x:0,y:0},d=r,p=n;if("Point"===a.relativeMode){var u=a.getAbsolutePosition(e);void 0!==u&&(d+=u.x,p+=u.y)}c={x:(h="Object"===a.relativeMode?this.alignChildBasedOnParent(a,l,e,d,p):this.alignChildBasedOnaPoint(a,d,p)).x+l.width/2,y:h.y+l.height/2},t.prototype.findChildOffsetFromCenter.call(this,a,c)}!i||"Stretch"!==a.horizontalAlignment&&"Stretch"!==a.verticalAlignment?a instanceof Jg&&a.canMeasure?(a.arrange(a.desiredSize),this.outerBounds.uniteRect(a.outerBounds)):a instanceof Jg||(a.arrange(a.desiredSize),this.outerBounds.uniteRect(a.outerBounds)):a.arrange(e)}return this.actualSize=e,this.updateBounds(),this.outerBounds.uniteRect(this.bounds),e},e.prototype.alignChildBasedOnParent=function(t,e,i,n,r){switch(t.horizontalAlignment){case"Auto":case"Left":n+=t.margin.left;break;case"Right":n+=i.width-e.width-t.margin.right;break;case"Stretch":case"Center":n+=i.width/2-e.width/2}switch(t.verticalAlignment){case"Auto":case"Top":r+=t.margin.top;break;case"Bottom":r+=i.height-e.height-t.margin.bottom;break;case"Stretch":case"Center":r+=i.height/2-e.height/2}return{x:n,y:r}},e.prototype.alignChildBasedOnaPoint=function(t,e,i){switch(e+=t.margin.left-t.margin.right,i+=t.margin.top-t.margin.bottom,t.horizontalAlignment){case"Auto":case"Left":e=t.inversedAlignment?e:e-t.desiredSize.width;break;case"Stretch":case"Center":e-=t.desiredSize.width*t.pivot.x;break;case"Right":e=t.inversedAlignment?e-t.desiredSize.width:e}switch(t.verticalAlignment){case"Auto":case"Top":i=t.inversedAlignment?i:i-t.desiredSize.height;break;case"Stretch":case"Center":i-=t.desiredSize.height*t.pivot.y;break;case"Bottom":i=t.inversedAlignment?i-t.desiredSize.height:i}return{x:e,y:i}},e}($g),im={Rectangle:"M0,0 L50,0 L50,50 L0,50 z",Ellipse:"M80.5,12.5 C80.5,19.127417 62.59139,24.5 40.5,24.5 C18.40861,24.5 0.5,19.127417 0.5,12.5C0.5,5.872583 18.40861,0.5 40.5,0.5 C62.59139,0.5 80.5,5.872583 80.5,12.5 z",Hexagon:"M30,0 L60,0 L90,30 L60,60 L30,60 L0,30 L30,0 z",Parallelogram:"M30,0 L60,0 L45,30 L15,30 z",Triangle:"M45,0 L90,45 L0,45 L45,0 z",Plus:"M696.6084,158.2656 L674.8074,158.2656 L674.8074,136.4656 L658.4084,136.4656 L658.4084,158.2656 L636.6084,158.2656L636.6084,174.6646 L658.4084,174.6646 L658.4084,196.4656 L674.8074,196.4656 L674.8074,174.6646 L696.6084,174.6646L696.6084,158.2656 z",Star:"M540.3643,137.9336 L546.7973,159.7016 L570.3633,159.7296 L550.7723,171.9366 L558.9053,194.9966 L540.3643,179.4996L521.8223,194.9966 L529.9553,171.9366 L510.3633,159.7296 L533.9313,159.7016 L540.3643,137.9336 z",Pentagon:"M30,0 L60,30 L50,70 L10,70 L0,30 L30,0 z",Heptagon:"M223.7783,195.7134 L207.1303,174.8364 L213.0713,148.8034 L237.1303,137.2174 L261.1883,148.8034 L267.1303,174.8364L250.4813,195.7134 L223.7783,195.7134 z",Octagon:"M98.7319,196.4653 L81.1579,178.8923 L81.1579,154.0393 L98.7319,136.4653 L123.5849,136.4653L141.1579,154.0393 L141.1579,178.8923 L123.5849,196.4653 L98.7319,196.4653 z",Trapezoid:"M127.2842,291.4492 L95.0322,291.4492 L81.1582,256.3152 L141.1582,256.3152 L127.2842,291.4492 z",Decagon:"M657.3379,302.4141 L642.3369,291.5161 L636.6089,273.8821 L642.3369,256.2481 L657.3379,245.3511 L675.8789,245.3511L690.8789,256.2481 L696.6089,273.8821L690.8789,291.5161 L675.8789,302.4141 L657.3379,302.4141 z",RightTriangle:"M836.293,292.9238 L776.293,292.9238 L776.293,254.8408 L836.293,292.9238 z",Cylinder:"M 542.802,362.009C 542.802,368.452 525.341,373.676 503.802,373.676C 482.263,373.676 464.802,368.452 464.802,362.009L 464.802,466.484C 464.802,472.928 482.263,478.151 503.802,478.151C 525.341,478.151 542.802,472.928 542.802,466.484L 542.802,362.016C 542.802,368.459 525.341,373.534 503.802,373.534C 482.263,373.534 464.802,368.31 464.802,361.867L 464.802,362.016C 464.802,355.572 482.263,350.349 503.802,350.349C 525.341,350.349 542.802,355.572 542.802,362.016",Diamond:"M397.784,287.875 L369.5,316.159 L341.216,287.875 L369.5,259.591 L397.784,287.875 z"},nm=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),rm=function(t){function e(){var e=t.call(this)||this;return e.pathData="",e.transformPath=!0,e.absolutePath="",e.canMeasurePath=!1,e.absoluteBounds=new Zu,e}return nm(e,t),Object.defineProperty(e.prototype,"data",{get:function(){return this.pathData},set:function(t){this.pathData!==t&&(this.pathData=t,this.isDirt=!0)},enumerable:!0,configurable:!0}),e.prototype.getPoints=function(){var t=this;return this.pointTimer||(this.pointTimer=setTimeout(function(){t.points=null,t.pointTimer=null},200)),this.points=this.points||function(t){var e,i,n=[],r="measureElement";window[""+r].style.visibility="visible";var o=zs(window[""+r].children[2])[0];o.setAttributeNS(null,"d",t.data);var s=Bs(t,t.absoluteBounds);o.setAttributeNS(null,"d",s);var a=o.getTotalLength();for(i=0;i<=a;i+=10)e=o.getPointAtLength(i),n.push({x:e.x,y:e.y});return window[""+r].style.visibility="hidden",n}(this),function(t,e){for(var i=[],n=0,r=e;n<r.length;n++){var o=r[n],s={x:t.offsetX-t.actualSize.width*t.pivot.x+o.x,y:t.offsetY-t.actualSize.height*t.pivot.y+o.y},a=void 0,l=t.rotateAngle+t.parentTransform;l&&kt(a=Lt(),l,t.offsetX,t.offsetY),a&&(s=At(a,s)),i.push(s)}return i}(this,this.points)},e.prototype.measure=function(t){return this.staticSize&&void 0!==this.width&&void 0!==this.height?this.absoluteBounds=new Zu(this.offsetX-this.width*this.pivot.x,this.offsetY-this.height*this.pivot.y,this.width,this.height):(!this.isDirt||!this.transformPath&&void 0!==this.width&&void 0!==this.height||this.absoluteBounds&&0!==this.absoluteBounds.height)&&!this.canMeasurePath||(this.absoluteBounds=ks(this.data?this.data:"")),void 0===this.width?this.desiredSize=new Qu(this.absoluteBounds.width,this.height||this.absoluteBounds.height):void 0===this.height?this.desiredSize=new Qu(this.width||this.absoluteBounds.width,this.absoluteBounds.height):this.desiredSize=new Qu(this.width,this.height),this.desiredSize=this.validateDesiredSize(this.desiredSize,t),this.canMeasurePath=!1,this.desiredSize},e.prototype.arrange=function(t){return(this.isDirt||this.actualSize.width!==t.width||this.actualSize.height!==t.height)&&(this.isDirt=!0,this.absolutePath=this.updatePath(this.data,this.absoluteBounds,t),this.staticSize||(this.points=null)),this.actualSize=this.desiredSize,this.updateBounds(),this.isDirt=!1,this.actualSize},e.prototype.updatePath=function(t,e,i){var n=!1,r="",o=-e.x,s=-e.y,a=[];return i.width===e.width&&i.height===e.height||(o=i.width/Number(e.width?e.width:1),s=i.height/Number(e.height?e.height:1),n=!0),a=bt(t),a=Dt(a),r=(n||this.isDirt)&&this.transformPath?Ct(a,o,s,n,e.x,e.y,0,0):Tt(a),n=!1,r},e}(Gg),om=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),sm=function(t){function e(){var e=t.call(this)||this;return e.imageSource="",e.imageScale="None",e.imageAlign="None",e.stretch="Stretch",e}return om(e,t),Object.defineProperty(e.prototype,"source",{get:function(){return this.imageSource},set:function(t){this.imageSource=t,this.isDirt=!0},enumerable:!0,configurable:!0}),e.prototype.measure=function(t,e,i){return this.isDirt&&("Stretch"!==this.stretch||void 0===this.width&&void 0===this.height)&&(this.contentSize=function(t,e,i,n){var r="measureElement";window[""+r].style.visibility="visible";var o=window[""+r].children[1];o.setAttribute("src",t);var s=o.getBoundingClientRect(),a=s.width,l=s.height;e=new Qu(a,l),window[""+r].style.visibility="hidden";var h=document.createElement("img");return h.setAttribute("src",t),aa(h,{id:i+"sf-imageNode",style:"display: none;"}),document.body.appendChild(h),h.onload=function(t){var e=t.currentTarget;n&&n(i,{width:e.width,height:e.height})},e}(this.source,this.contentSize,e,i),this.isDirt=!1),void 0!==this.width&&void 0!==this.height?(this.desiredSize=new Qu(this.width,this.height),this.contentSize=this.desiredSize):this.desiredSize=this.contentSize,this.desiredSize=this.validateDesiredSize(this.desiredSize,t),this.desiredSize},e.prototype.arrange=function(t){return this.actualSize=new Qu(this.desiredSize.width,this.desiredSize.height),this.updateBounds(),this.actualSize},e}(Gg),am=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),lm=function(t){function e(e,i){var n=t.call(this)||this;return n.data="",n.nodeId="",n.diagramId="",n.scale="Stretch",n.diagramId=i,n.nodeId=e,n}return am(e,t),Object.defineProperty(e.prototype,"content",{get:function(){return this.data},set:function(t){this.data=t,this.canReset||(this.canReset=!0,this.template=ra(this,!1),this.canReset=!1,this.isDirt=!0)},enumerable:!0,configurable:!0}),e.prototype.measure=function(t){if(this.isDirt){var e=function(t){var e="measureElement";window[e].style.visibility="visible";var i=window[e].children[2];i.appendChild(t);var n=t.getBoundingClientRect(),r=i.getBoundingClientRect(),o=n;return o.x=n.left-r.left,o.y=n.top-r.top,i.removeChild(t),window[e].style.visibility="hidden",o}(this.template);this.contentSize=new Qu,this.contentSize.width=e.width,this.contentSize.height=e.height;var i=e.x,n=e.y;this.templatePosition={x:i,y:n},this.isDirt=!1}if(void 0===this.width||void 0===this.height){var r=function(t){var e="measureElement";window[e].style.visibility="visible";var i=window[e].children[2];i.appendChild(t);var n=i.getBoundingClientRect();return i.removeChild(t),window[e].style.visibility="hidden",n}(this.template);this.desiredSize=new Qu(r.width,r.height)}else this.desiredSize=new Qu(this.width,this.height);return this.desiredSize=this.validateDesiredSize(this.desiredSize,t),this.desiredSize},e.prototype.arrange=function(t){return this.actualSize=new Qu(this.desiredSize.width,this.desiredSize.height),this.updateBounds(),this.actualSize},e}(Gg),hm=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),cm=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},dm=function(t){function e(e,i,n,r){var o=t.call(this,e,i,n,r)||this;return o.inEdges=[],o.outEdges=[],o}return hm(e,t),cm([W("")],e.prototype,"id",void 0),cm([W("Center")],e.prototype,"horizontalAlignment",void 0),cm([W("Center")],e.prototype,"verticalAlignment",void 0),cm([Q({},ng)],e.prototype,"margin",void 0),cm([W(12)],e.prototype,"width",void 0),cm([W(12)],e.prototype,"height",void 0),cm([Q({},cg)],e.prototype,"style",void 0),cm([W("Square")],e.prototype,"shape",void 0),cm([W(gg.Connect)],e.prototype,"visibility",void 0),cm([W("")],e.prototype,"pathData",void 0),cm([W(Pg.Default)],e.prototype,"constraints",void 0),cm([W()],e.prototype,"addInfo",void 0),cm([W()],e.prototype,"outEdges",void 0),cm([W()],e.prototype,"inEdges",void 0),e}(Rp),pm=function(t){function e(e,i,n,r){return t.call(this,e,i,n,r)||this}return hm(e,t),e.prototype.getClassName=function(){return"PointPort"},cm([Q({x:.5,y:.5},Gu)],e.prototype,"offset",void 0),e}(dm),um=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),gm=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},mm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return um(e,t),gm([W("blue")],e.prototype,"color",void 0),gm([W("")],e.prototype,"content",void 0),gm([W("")],e.prototype,"link",void 0),gm([W("None")],e.prototype,"textDecoration",void 0),gm([W("NewTab")],e.prototype,"hyperlinkOpenState",void 0),e}(Rp),fm=function(t){function e(e,i,n,r){var o=t.call(this,e,i,n,r)||this;return n.id||(e.parentObj&&e.parentObj.propName&&"phases"===e.parentObj.propName?o.id=e.parentObj.id:o.id=da()),o}return um(e,t),gm([W("")],e.prototype,"content",void 0),gm([W(void 0)],e.prototype,"template",void 0),gm([W("String")],e.prototype,"annotationType",void 0),gm([W(!0)],e.prototype,"visibility",void 0),gm([W(Sg.InheritReadOnly)],e.prototype,"constraints",void 0),gm([Q(void 0,mm)],e.prototype,"hyperlink",void 0),gm([W("")],e.prototype,"id",void 0),gm([W()],e.prototype,"width",void 0),gm([W()],e.prototype,"height",void 0),gm([W(0)],e.prototype,"rotateAngle",void 0),gm([Q({strokeWidth:0,strokeColor:"transparent",fill:"transparent"},pg)],e.prototype,"style",void 0),gm([W("Center")],e.prototype,"horizontalAlignment",void 0),gm([W("Center")],e.prototype,"verticalAlignment",void 0),gm([Q({},ng)],e.prototype,"margin",void 0),gm([Q({top:void 0,bottom:void 0,left:void 0,right:void 0},ng)],e.prototype,"dragLimit",void 0),gm([W("Shape")],e.prototype,"type",void 0),gm([W()],e.prototype,"addInfo",void 0),e}(Rp),vm=function(t){function e(e,i,n,r){return t.call(this,e,i,n,r)||this}return um(e,t),e.prototype.getClassName=function(){return"ShapeAnnotation"},gm([Q({x:.5,y:.5},Gu)],e.prototype,"offset",void 0),e}(fm),ym=function(t){function e(e,i,n,r){return t.call(this,e,i,n,r)||this}return um(e,t),e.prototype.getClassName=function(){return"PathAnnotation"},gm([W(.5)],e.prototype,"offset",void 0),gm([Q({x:0,y:0},Gu)],e.prototype,"displacement",void 0),gm([W("Center")],e.prototype,"alignment",void 0),gm([W(!1)],e.prototype,"segmentAngle",void 0),e}(fm),bm={X:"M14,14 L106,106 M106,14 L14,106",Circle:"M0,50 A50,50,0 1 1 100,50 A50,50,0 1 1 0,50 Z",Square:"M0,0 L10,0 L10,10 L0,10 z"},Sm={OpenArrow:"M15.9,23 L5,16 L15.9,9 L17,10.7 L8.7,16 L17,21.3Z",Square:"M0,0 L10,0 L10,10 L0,10 z",Fletch:"M14.8,10c0,0-3.5,6,0.2,12c0,0-2.5-6-10.9-6C4.1,16,11.3,16,14.8,10z",OpenFetch:"M6,17c-0.6,0-1-0.4-1-1s0.4-1,1-1c10.9,0,11-5,11-5c0-0.6,0.4-1,1-1s1,0.4,1,1C19,10.3,18.9,17,6,17C6,17,6,17,6,17z M18,23c-0.5,0-1-0.4-1-1c0-0.2-0.3-5-11-5c-0.6,0-1-0.5-1-1s0.4-1,1-1c0,0,0,0,0,0c12.9,0,13,6.7,13,7    C19,22.6,18.6,23,18,23z",IndentedArrow:"M17,10c0,0-4.5,5.5,0,12L5,16L17,10z",OutdentedArrow:"M14.6,10c0,0,5.4,6,0,12L5,16L14.6,10z",DoubleArrow:"M19,10 L19,22 L13,16Z M12,10 L12,22 L6,16Z",Arrow:"M15,10 L15,22 L5,16Z",Diamond:"M12,23l-7-7l7-7l6.9,7L12,23z",Circle:"M0,50 A50,50,0 1 1 100,50 A50,50,0 1 1 0,50 Z"},wm={Square:"M0,0 L10,0 L10,10 L0,10 z",Rhombus:"M10,5 L5,10 L0,5 L5,0 L10,5 Z ",Rectangle:"M0,0 L15,0 L15,10 L0,10 z ",OpenArrow:"M15.9,23 L5,16 L15.9,9 L17,10.7 L8.7,16 L17,21.3Z",Fletch:"M9.82,0 C9.82,0,6.61,5,10,10 C10,10,7.71,5,0,5 C0,5,6.61,5,9.82,0 Z ",OpenFetch:"M0.71,5.71 C0.29,5.71,0,5.43,0,5 C0,4.57,0.29,4.29,0.71,4.29 C8.5,4.29,8.57,0.71,8.57,0.71 C8.57,0.29,8.86,0,9.29,0 C9.719999999999999,0,10,0.29,10,0.71 C10,0.93,9.93,5.71,0.71,5.71 C0.71,5.71,0.71,5.71,0.71,5.71 Z M9.29,10 C8.93,10,8.57,9.71,8.57,9.29 C8.57,9.14,8.36,5.71,0.71,5.71 C0.29,5.71,0,5.36,0,5 C0,4.64,0.29,4.29,0.71,4.29 C0.71,4.29,0.71,4.29,0.71,4.29 C9.93,4.29,10,9.07,10,9.29 C10,9.71,9.71,10,9.29,10 Z ",IndentedArrow:"M10,0 C10,0,6.25,4.58,10,10 L0,5 L10,0 Z ",OutdentedArrow:"M8,0 C8,0,12.5,5,8,10 L0,5 L8,0 Z ",DoubleArrow:"M19,10 L19,22 L13,16Z M12,10 L12,22 L6,16Z",Arrow:"M15,10 L15,22 L5,16Z",Diamond:"M10,5 L5,10 L0,5 L5,0 L10,5 Z  ",Circle:"M10,5 C10,7.76,7.76,10,5,10 C2.24,10,0,7.76,0,5 C0,2.24,2.24,0,5,0 C7.76,0,10,2.24,10,5 Z ",Ellipse:"M15,5 C15,7.76,11.64,10,7.5,10 C3.36,10,0,7.76,0,5 C0,2.24,3.36,0,7.5,0 C11.64,0,15,2.24,15,5 Z  "},Im={Square:"M0,0 L10,0 L10,10 L0,10 z",Rhombus:"M10,5 L5,10 L0,5 L5,0 L10,5 Z ",Rectangle:"M0,0 L15,0 L15,10 L0,10 z",OpenArrow:"M23,15.9 L16,5 L9,15.9 L10.7,17 L16,8.7 L21,17.3Z",Fletch:"M9.82,0 C9.82,0,6.61,5,10,10 C10,10,7.71,5,0,5 C0,5,6.61,5,9.82,0 Z ",OpenFetch:"M0.71,5.71 C0.29,5.71,0,5.43,0,5 C0,4.57,0.29,4.29,0.71,4.29 C8.5,4.29,8.57,0.71,8.57,0.71 C8.57,0.29,8.86,0,9.29,0 C9.719999999999999,0,10,0.29,10,0.71 C10,0.93,9.93,5.71,0.71,5.71 C0.71,5.71,0.71,5.71,0.71,5.71 Z M9.29,10 C8.93,10,8.57,9.71,8.57,9.29 C8.57,9.14,8.36,5.71,0.71,5.71 C0.29,5.71,0,5.36,0,5 C0,4.64,0.29,4.29,0.71,4.29 C0.71,4.29,0.71,4.29,0.71,4.29 C9.93,4.29,10,9.07,10,9.29 C10,9.71,9.71,10,9.29,10 Z ",IndentedArrow:"M10,0 C10,0,6.25,4.58,10,10 L0,5 L10,0 Z ",OutdentedArrow:"M8,0 C8,0,12.5,5,8,10 L0,5 L8,0 Z ",DoubleArrow:"M10,19 L22,19 L16,13Z M10,12 L22,12 L16,6Z",Arrow:"M10,15 L22,15 L16,5Z",Diamond:"M10,5 L5,10 L0,5 L5,0 L10,5 Z ",Circle:"M10,5 C10,7.76,7.76,10,5,10 C2.24,10,0,7.76,0,5 C0,2.24,2.24,0,5,0 C7.76,0,10,2.24,10,5 Z ",Ellipse:"M15,5 C15,7.76,11.64,10,7.5,10 C3.36,10,0,7.76,0,5 C0,2.24,3.36,0,7.5,0 C11.64,0,15,2.24,15,5 Z   "},xm={Process:"M419.511,76.687L359.511,76.687L359.511,43.086L419.511,43.086z",Decision:"M 253.005,115.687L 200.567,146.071L 148.097,115.687L 200.534,85.304L 253.005,115.687 Z",Document:"M 60 31.9 c 0 0 -11 -7.7 -30 0 s -30 0 -30 0 V 0 h 60 V 31.9 Z",PreDefinedProcess:"M 0,0 L 50,0 L 50,50 L 0,50 Z  M 8.334,0 L 8.334,50 M 41.667,0 L 41.667,50",Terminator:"M 269.711,29.33C 269.71,44.061 257.77,56 243.04,56L 158.058,56C 143.33,56 131.39,44.061 131.39,29.33L 131.39,29.33C 131.391,14.6057 143.33,2.669 158.058,2.669L 243.044,2.669C 257.772,2.669 269.711,14.6057 269.711,29.333 Z",PaperTap:"M0.0009,17.2042 L0.0009,47.165 C0.001,47.165 14.403,53.5455 25.00,47.165 C35.599,40.7852 44.403,43.5087 50.00,47.165L50.001,17.2042 M50.001,32.7987 L50.001,2.8405 C50.001,2.8405 35.599,-3.5427 25.001,2.8405C14.403,9.2237 5.599,6.494 0.0009,2.8405 L0.0009,32.7987",DirectData:"M 132.62 0 L 17.38 0 C 7.78 0 0 13.43 0 30 C 0 46.57 7.78 60 17.38 60 L 132.62 60 M 132.62 0C 123.02 0 115.24 13.43 115.24 30 C 115.24 46.57 123.02 60 132.62 60 C 142.22 60 150 46.57 150 30 C 150 13.43 142.22 0 132.62 0 z ",SequentialData:"M0.0029,24.999 C0.0029,11.1922 10.433,0.0021 23.295,0.0021 C36.159,0.00216 46.585,11.1922 46.585,24.999C46.585,38.8057 36.159,49.9979 23.295,49.9979 C10.433,49.9979 0.0029,38.8057 0.0029,24.999 z M23.294,49.999 L50.002,49.999",Sort:"M50.001,24.9971 L25.001,49.9971 L0.00097,24.9971 L25.001,-0.00286865 L50.001,24.9971 z M0.000976562,24.9971 L50.001,24.9971",MultiDocument:"M43.6826,40 C44.8746,40.6183 45.8586,41.3502 46.8366,42.1122 L46.8366,4.74487 L3.09857,4.74487 L3.09857,10.9544 M46.837,35.143 C48.027,35.765 49.025,36.604 50.003,37.369 L50.003,0.002 L6.264,0.002 L6.264,4.744 M43.682,47.113 L43.682,10.765 L0.0025,10.7652 L0.0025,47.1132 C0.0025,47.1132 12.5846,53.6101 21.8426,47.1132 C31.1006,40.6163 38.792,43.393 43.6826,47.1132 z",Collate:"M50.001,0.0028 L25.001,25.0029 L0.00097,0.0028 L50.001,0.002 z M0.0009,50.002 L25.001,25.002L50.001,50.002 L0.0009,50.0029 z",SummingJunction:"M7.3252,42.6768 L42.6772,7.3247 M42.6768,42.6768 L7.3248,7.3247 M0.0009,25.001 C0.0009,11.193 11.197,0.0009 25.001,0.0009 C38.809,0.0009 50.001,11.193 50.001,25.001 C50.001,38.809 38.809,50.001 25.001,50.001 C11.197,50.00 0.0009,38.809 0.0009,25.00 z",Or:"M 0 50 L 100 50 M 50 100 L 50 0.0 M 0 50 C 0 22.384 22.392 0 50 0 C 77.616 0 100 22.384 100 50 C 100 77.616 77.616 100 50 100 C 22.392 100 0 77.616 0 50 Z",InternalStorage:"M 0 3.81946A 2.5,3.81946 0 0,1 2.5,0L 47.5 0A 2.5,3.81946 0 0,1 50,3.81946L 50 45.836A 2.5,3.819446 0 0,1 47.5,49.652778L 2.5 49.652778A 2.5,3.819446 0 0,1 0,45.8336L 0 3.819446ZM 0 11.45834L 50 11.4583334M 12.5 0L 12.5 49.652778",Extract:"M0,35 L30,0 L60,35 Z",ManualOperation:"M46.4,28.8 L14.8,28.8 L0,0 L60,0 Z",Merge:"M60,0 L30,35 L0,0 Z",OffPageReference:"M60,33.3 L30.1,39 L0,33.3 L0,0 L60,0 Z",SequentialAccessStorage:"M 60 30 C 60 13.4 46.6 0 30 0 S 0 13.4 0 30 s 13.4 30 30 30 h 28.6 v -6.5 h -9.9C 55.5 48 60 39.5 60 30 Z",Annotation:"M49.9984,50.0029 L-0.00271199,50.0029 L-0.00271199,0.00286865 L49.9984,0.00286865",Annotation2:"M49.9977,50.0029 L25.416,50.0029 L25.416,0.00286865 L49.9977,0.00286865 M25.4166,25.0029 L-0.00227869,25.0029",Data:"M 10 0 L 40 0 L 30 40 L 0 40 Z",Card:"M275,60 L400,60 L400,110 L260,110 L260,75 Z",Delay:"M0,0 L12.029,0 C14.212999,0 16,1.7869979 16,3.9709952 C16,6.1549926 14.212999,7.9409904 12.029,7.9409904 L0,7.9409904 z",Preparation:"M 1048.17 572 C 1051.06 568.86 1055.17 567.05 1059.5 567 L 1094.51 567 C 1098.84 567.05 1102.95 568.86 1105.84 572 L 1126.43 595 C 1127.01 596.28 1127.01 597.72 1126.43 599 L 1105.84 622 C 1102.95 625.14 1098.84 626.95 1094.51 627 L 1059.5 627 C 1055.17 626.95 1051.06 625.14 1048.17 622 L 1027.58 599 C 1027 597.72 1027 596.28 1027.58 595 L 1048.17 572 Z",Display:"M47.8809,19.2914 L32.7968,-0.00594145 L11.3902,-0.00594145 C7.93166,-0.00594145 0.00124586,11.187 0.00124586,24.9968C0.00124586,38.8032 7.93166,49.9962 11.3902,49.9962 L32.7968,49.99 L47.615,31.038 C47.615,31.0388 52.798,24.9968 47.880,19.2914 z",ManualInput:"M 912 732 L 1006.85 707 C 1008.2 707 1009.5 707.53 1010.46 708.46 C 1011.41 709.4 1011.95 710.67 1011.95 712 L 1011.95 762C 1012 764.41 1010.28 766.52 1007.87 767 L 917.1 767 C 915.75 767 914.45 766.47 913.49 765.54 C 912.54 764.6 912 763.33 912 762 L 912 732 Z",LoopLimit:"M 8 9 L 27 9 L 33 15 L 33 26 C 33 27 33 27 32 27 L 4 27 C 3 27 2 27 2 26 L 2 15 L 8 9 Z",StoredData:"M 5.55 0L 50 0A 1.5,30 0 0,1 50,0A 5.555,25 0 0,0 50,50A 1.5,30 0 0,1 50,50L 5.555 50A 5.55,25 0 0,1 5.555,0Z"},Mm=!1,Cm=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Nm=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Em=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Cm(e,t),Nm([W("left")],e.prototype,"X",void 0),Nm([W("top")],e.prototype,"Y",void 0),e}(Rp),Dm="e-popup",Tm="e-rtl",Om="e-popup-open",Lm="e-popup-close",Am=function(t){function e(e,i){return t.call(this,i,e)||this}return Cm(e,t),e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"width":P(this.element,{width:m(t.width)});break;case"height":P(this.element,{height:m(t.height)});break;case"zIndex":P(this.element,{zIndex:t.zIndex});break;case"enableRtl":this.setEnableRtl();break;case"position":case"relateTo":this.refreshPosition();break;case"offsetX":var r=t.offsetX-e.offsetX;this.element.style.left=(parseInt(this.element.style.left,10)+r).toString()+"px";break;case"offsetY":var o=t.offsetY-e.offsetY;this.element.style.top=(parseInt(this.element.style.top,10)+o).toString()+"px";break;case"content":this.setContent();break;case"actionOnScroll":"none"!==t.actionOnScroll?this.wireScrollEvents():this.unwireScrollEvents()}}},e.prototype.getModuleName=function(){return"popup"},e.prototype.resolveCollision=function(){this.checkCollision()},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.destroy=function(){this.element.classList.contains("e-popup-open")&&this.unwireEvents(),this.element.classList.remove(Dm,Tm,Om,Lm),t.prototype.destroy.call(this)},e.prototype.render=function(){this.element.classList.add(Dm);var t={};1e3!==this.zIndex&&(t.zIndex=this.zIndex),"auto"!==this.width&&(t.width=m(this.width)),"auto"!==this.height&&(t.height=m(this.height)),P(this.element,t),this.fixedParent=!1,this.setEnableRtl(),this.setContent()},e.prototype.wireEvents=function(){Np.isDevice&&Ep.add(window,"orientationchange",this.orientationOnChange,this),"none"!==this.actionOnScroll&&this.wireScrollEvents()},e.prototype.wireScrollEvents=function(){if(this.getRelateToElement())for(var t=0,e=this.getScrollableParent(this.getRelateToElement());t<e.length;t++){var i=e[t];Ep.add(i,"scroll",this.scrollRefresh,this)}},e.prototype.unwireEvents=function(){Np.isDevice&&Ep.remove(window,"orientationchange",this.orientationOnChange),"none"!==this.actionOnScroll&&this.unwireScrollEvents()},e.prototype.unwireScrollEvents=function(){if(this.getRelateToElement())for(var t=0,e=this.getScrollableParent(this.getRelateToElement());t<e.length;t++){var i=e[t];Ep.remove(i,"scroll",this.scrollRefresh)}},e.prototype.getRelateToElement=function(){var t=""===this.relateTo||h(this.relateTo)?document.body:this.relateTo;return this.setProperties({relateTo:t},!0),"string"==typeof this.relateTo?document.querySelector(this.relateTo):this.relateTo},e.prototype.scrollRefresh=function(t){if("reposition"===this.actionOnScroll?h(this.element)||this.element.offsetParent===t.target||this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&null==t.target.parentElement||this.refreshPosition():"hide"===this.actionOnScroll&&this.hide(),"none"!==this.actionOnScroll&&this.getRelateToElement()){var e=this.isElementOnViewport(this.getRelateToElement(),t.target);e||this.targetInvisibleStatus?e&&(this.targetInvisibleStatus=!1):(this.trigger("targetExitViewport"),this.targetInvisibleStatus=!0)}},e.prototype.isElementOnViewport=function(t,e){for(var i=this.getScrollableParent(t),n=0;n<i.length;n++)if(!this.isElementVisible(t,i[n]))return!1;return!0},e.prototype.isElementVisible=function(t,e){var i=this.checkGetBoundingClientRect(t);if(!i.height||!i.width)return!1;if(h(this.checkGetBoundingClientRect(e))){var n=window,r=n.scrollY,o=n.scrollX,s=n.scrollX+n.outerWidth,a=n.scrollY+n.outerHeight,l=je(t),c=l.top,d=l.left,p=l.left+i.width,u=l.top+i.height;return a-c>0&&s-d>0&&p-o>0&&u-r>0}var g=e.getBoundingClientRect();return!(i.bottom<g.top||i.bottom>g.bottom||i.right>g.right||i.left<g.left)},e.prototype.preRender=function(){},e.prototype.setEnableRtl=function(){this.reposition(),this.enableRtl?this.element.classList.add(Tm):this.element.classList.remove(Tm)},e.prototype.setContent=function(){if(!h(this.content))if(this.element.innerHTML="","string"==typeof this.content)this.element.textContent=this.content;else{var t=this.getRelateToElement(),e=this.content.props;t.classList.contains("e-dropdown-btn")&&!h(e)||this.element.appendChild(this.content)}},e.prototype.orientationOnChange=function(){var t=this;setTimeout(function(){t.refreshPosition()},200)},e.prototype.refreshPosition=function(t,e){h(t)||this.checkFixedParent(t),this.reposition(),e||this.checkCollision()},e.prototype.reposition=function(){var t,e,i=this.getRelateToElement();if("number"==typeof this.position.X&&"number"==typeof this.position.Y)t={left:this.position.X,top:this.position.Y};else if("string"==typeof this.position.X&&"number"==typeof this.position.Y||"number"==typeof this.position.X&&"string"==typeof this.position.Y){var n=void 0,r=this.element.style.display;this.element.style.display="block",this.element.classList.contains("e-dlg-modal")&&(n=this.element.parentElement.style.display,this.element.parentElement.style.display="block"),e=this.getAnchorPosition(i,this.element,this.position,this.offsetX,this.offsetY),t="string"==typeof this.position.X?{left:e.left,top:this.position.Y}:{left:this.position.X,top:e.top},this.element.style.display=r,this.element.classList.contains("e-dlg-modal")&&(this.element.parentElement.style.display=n)}else if(i){r=this.element.style.display;this.element.style.display="block",t=this.getAnchorPosition(i,this.element,this.position,this.offsetX,this.offsetY),this.element.style.display=r}else t={left:0,top:0};h(t)||(this.element.style.left=t.left+"px",this.element.style.top=t.top+"px")},e.prototype.checkGetBoundingClientRect=function(t){try{return t.getBoundingClientRect()}catch(t){return null}},e.prototype.getAnchorPosition=function(t,e,i,n,r){var o=this.checkGetBoundingClientRect(e),s=this.checkGetBoundingClientRect(t);if(h(o)||h(s))return null;var a=t,l={left:0,top:0};switch(e.offsetParent&&"BODY"===e.offsetParent.tagName&&"BODY"===t.tagName?l=je(t):(e.classList.contains("e-dlg-modal")&&"BODY"!==a.tagName&&(e=e.parentElement),l=function(t,e){var i=!1,n={left:0,top:0},r=t;if(!t||!e)return n;for(h(e.offsetParent)&&"fixed"===e.style.position&&(i=!0);(e.offsetParent||i)&&t&&e.offsetParent!==t;)n.left+=t.offsetLeft,n.top+=t.offsetTop,t=t.offsetParent;for(t=r;(e.offsetParent||i)&&t&&e.offsetParent!==t;)n.left-=t.scrollLeft,n.top-=t.scrollTop,t=t.parentElement;return n}(a,e)),i.X){default:case"left":break;case"center":e.classList.contains("e-dlg-modal")&&"BODY"===a.tagName&&"container"===this.targetType?l.left+=window.innerWidth/2-o.width/2:"container"===this.targetType?l.left+=s.width/2-o.width/2:l.left+=s.width/2;break;case"right":e.classList.contains("e-dlg-modal")&&"BODY"===a.tagName&&"container"===this.targetType?l.left+=window.innerWidth-o.width:"container"===this.targetType?l.left+=s.width-o.width:l.left+=s.width}switch(i.Y){default:case"top":break;case"center":e.classList.contains("e-dlg-modal")&&"BODY"===a.tagName&&"container"===this.targetType?l.top+=window.innerHeight/2-o.height/2:"container"===this.targetType?l.top+=s.height/2-o.height/2:l.top+=s.height/2;break;case"bottom":e.classList.contains("e-dlg-modal")&&"BODY"===a.tagName&&"container"===this.targetType?l.top+=window.innerHeight-o.height:"container"===this.targetType?l.top+=s.height-o.height:l.top+=s.height}return l.left+=n,l.top+=r,l},e.prototype.callFlip=function(t){var e=this.getRelateToElement();qe(this.element,e,this.offsetX,this.offsetY,this.position.X,this.position.Y,this.viewPortElement,t,this.fixedParent)},e.prototype.callFit=function(t){if(0!==Xe(this.element,this.viewPortElement).length)if(h(this.viewPortElement)){var e=Qe(this.element,this.viewPortElement,t);t.X&&(this.element.style.left=e.left+"px"),t.Y&&(this.element.style.top=e.top+"px")}else{var i=this.checkGetBoundingClientRect(this.element),n=this.checkGetBoundingClientRect(this.viewPortElement);if(h(i)||h(n))return null;t&&!0===t.Y&&(n.top>i.top?this.element.style.top="0px":n.bottom<i.bottom&&(this.element.style.top=parseInt(this.element.style.top,10)-(i.bottom-n.bottom)+"px")),t&&!0===t.X&&(n.right<i.right?this.element.style.left=parseInt(this.element.style.left,10)-(i.right-n.right)+"px":n.left>i.left&&(this.element.style.left=parseInt(this.element.style.left,10)+(n.left-i.left)+"px"))}},e.prototype.checkCollision=function(){var t=this.collision.X,e=this.collision.Y;"none"===t&&"none"===e||("flip"===t&&"flip"===e?this.callFlip({X:!0,Y:!0}):"fit"===t&&"fit"===e?this.callFit({X:!0,Y:!0}):("flip"===t?this.callFlip({X:!0,Y:!1}):"flip"===e&&this.callFlip({Y:!0,X:!1}),"fit"===t?this.callFit({X:!0,Y:!1}):"fit"===e&&this.callFit({X:!1,Y:!0})))},e.prototype.show=function(t,e){var i=this;if(this.getRelateToElement().classList.contains("e-filemanager")&&(this.fmDialogContainer=this.element.getElementsByClassName("e-file-select-wrap")[0]),this.wireEvents(),!h(this.fmDialogContainer)&&Np.isIos&&(this.fmDialogContainer.style.display="block"),1e3===this.zIndex||!h(e)){var n=h(e)?this.element:e;this.zIndex=ui(n),P(this.element,{zIndex:this.zIndex})}t=h(t)||"object"!=typeof t?this.showAnimation:t,"none"===this.collision.X&&"none"===this.collision.Y||(x([this.element],Lm),I([this.element],Om),this.checkCollision(),x([this.element],Om),I([this.element],Lm)),h(t)?(x([this.element],Lm),I([this.element],Om),this.trigger("open")):(t.begin=function(){i.isDestroyed||(x([i.element],Lm),I([i.element],Om))},t.end=function(){i.isDestroyed||i.trigger("open")},new zp(t).animate(this.element))},e.prototype.hide=function(t){var e=this;h(t=h(t)||"object"!=typeof t?this.hideAnimation:t)?(x([this.element],Om),I([this.element],Lm),this.trigger("close")):(t.end=function(){e.isDestroyed||(x([e.element],Om),I([e.element],Lm),e.trigger("close"))},new zp(t).animate(this.element)),this.unwireEvents()},e.prototype.getScrollableParent=function(t){return this.checkFixedParent(t),pi(t,this.fixedParent)},e.prototype.checkFixedParent=function(t){for(var e=t.parentElement;e&&"HTML"!==e.tagName;){var i=getComputedStyle(e);"fixed"===i.position&&!h(this.element)&&this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&"hidden"!==getComputedStyle(this.element.offsetParent).overflow&&(this.element.style.top=window.scrollY>parseInt(this.element.style.top,10)?m(window.scrollY-parseInt(this.element.style.top,10)):m(parseInt(this.element.style.top,10)-window.scrollY),this.element.style.position="fixed",this.fixedParent=!0),e=e.parentElement,!h(this.element)&&h(this.element.offsetParent)&&"fixed"===i.position&&"fixed"===this.element.style.position&&(this.fixedParent=!0)}},Nm([W("auto")],e.prototype,"height",void 0),Nm([W("auto")],e.prototype,"width",void 0),Nm([W(null)],e.prototype,"content",void 0),Nm([W("container")],e.prototype,"targetType",void 0),Nm([W(null)],e.prototype,"viewPortElement",void 0),Nm([W({X:"none",Y:"none"})],e.prototype,"collision",void 0),Nm([W("")],e.prototype,"relateTo",void 0),Nm([Q({},Em)],e.prototype,"position",void 0),Nm([W(0)],e.prototype,"offsetX",void 0),Nm([W(0)],e.prototype,"offsetY",void 0),Nm([W(1e3)],e.prototype,"zIndex",void 0),Nm([W(!1)],e.prototype,"enableRtl",void 0),Nm([W("reposition")],e.prototype,"actionOnScroll",void 0),Nm([W(null)],e.prototype,"showAnimation",void 0),Nm([W(null)],e.prototype,"hideAnimation",void 0),Nm([Z()],e.prototype,"open",void 0),Nm([Z()],e.prototype,"close",void 0),Nm([Z()],e.prototype,"targetExitViewport",void 0),e=Nm([$],e)}(Kp),zm=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),km=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};!function(t){t.Left="Left",t.Right="Right",t.Top="Top",t.Bottom="Bottom"}(qg||(qg={}));var jm,Pm="e-rtl",Rm="e-btn",Bm="e-primary",Hm="e-icon-btn",Um=function(t){function e(e,i){return t.call(this,e,i)||this}return zm(e,t),e.prototype.preRender=function(){},e.prototype.render=function(){this.initialize(),this.removeRippleEffect=et(this.element,{selector:"."+Rm}),this.renderComplete()},e.prototype.initialize=function(){if(this.cssClass&&I([this.element],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.isPrimary&&this.element.classList.add(Bm),!f()||f()&&"progress-btn"!==this.getModuleName()){if(this.content){var t=this.enableHtmlSanitizer?Yu.sanitize(this.content):this.content;this.element.innerHTML=t}this.setIconCss()}this.enableRtl&&this.element.classList.add(Pm),this.disabled?this.controlStatus(this.disabled):this.wireEvents()},e.prototype.controlStatus=function(t){this.element.disabled=t},e.prototype.setIconCss=function(){if(this.iconCss){var t=this.createElement("span",{className:"e-btn-icon "+this.iconCss});this.element.textContent.trim()?(t.classList.add("e-icon-"+this.iconPosition.toLowerCase()),"Top"!==this.iconPosition&&"Bottom"!==this.iconPosition||this.element.classList.add("e-"+this.iconPosition.toLowerCase()+"-icon-btn")):this.element.classList.add(Hm);var e=this.element.childNodes[0];!e||"Left"!==this.iconPosition&&"Top"!==this.iconPosition?this.element.appendChild(t):this.element.insertBefore(t,e)}},e.prototype.wireEvents=function(){this.isToggle&&Ep.add(this.element,"click",this.btnClickHandler,this)},e.prototype.unWireEvents=function(){this.isToggle&&Ep.remove(this.element,"click",this.btnClickHandler)},e.prototype.btnClickHandler=function(){this.element.classList.contains("e-active")?this.element.classList.remove("e-active"):this.element.classList.add("e-active")},e.prototype.destroy=function(){var e=[Bm,Pm,Hm,"e-success","e-info","e-danger","e-warning","e-flat","e-outline","e-small","e-bigger","e-active","e-round","e-top-icon-btn","e-bottom-icon-btn"];this.cssClass&&(e=e.concat(this.cssClass.split(" "))),t.prototype.destroy.call(this),x([this.element],e),this.element.getAttribute("class")||this.element.removeAttribute("class"),this.disabled&&this.element.removeAttribute("disabled"),this.content&&(this.element.innerHTML=this.element.innerHTML.replace(this.content,""));var i=this.element.querySelector("span.e-btn-icon");i&&T(i),this.unWireEvents(),kp&&this.removeRippleEffect()},e.prototype.getModuleName=function(){return"btn"},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.Inject=function(){},e.prototype.onPropertyChanged=function(t,e){for(var i=this.element.querySelector("span.e-btn-icon"),n=0,r=Object.keys(t);n<r.length;n++){switch(r[n]){case"isPrimary":t.isPrimary?this.element.classList.add(Bm):this.element.classList.remove(Bm);break;case"disabled":this.controlStatus(t.disabled);break;case"iconCss":i?t.iconCss?(i.className="e-btn-icon "+t.iconCss,this.element.textContent.trim()&&("Left"===this.iconPosition?i.classList.add("e-icon-left"):i.classList.add("e-icon-right"))):T(i):this.setIconCss();break;case"iconPosition":x([this.element],["e-top-icon-btn","e-bottom-icon-btn"]),(i=this.element.querySelector("span.e-btn-icon"))&&T(i),this.setIconCss();break;case"cssClass":e.cssClass&&x([this.element],e.cssClass.split(" ")),t.cssClass&&I([this.element],t.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"enableRtl":t.enableRtl?this.element.classList.add(Pm):this.element.classList.remove(Pm);break;case"content":mi(this.element)||this.element.classList.remove(Hm),(!f()||f()&&!this.isServerRendered&&"progress-btn"!==this.getModuleName())&&(this.enableHtmlSanitizer&&(t.content=Yu.sanitize(t.content)),this.element.innerHTML=t.content,this.setIconCss());break;case"isToggle":t.isToggle?Ep.add(this.element,"click",this.btnClickHandler,this):(Ep.remove(this.element,"click",this.btnClickHandler),x([this.element],["e-active"]))}}},e.prototype.click=function(){this.element.click()},e.prototype.focusIn=function(){this.element.focus()},km([W("Left")],e.prototype,"iconPosition",void 0),km([W("")],e.prototype,"iconCss",void 0),km([W(!1)],e.prototype,"disabled",void 0),km([W(!1)],e.prototype,"isPrimary",void 0),km([W("")],e.prototype,"cssClass",void 0),km([W("")],e.prototype,"content",void 0),km([W(!1)],e.prototype,"isToggle",void 0),km([W()],e.prototype,"locale",void 0),km([W(!1)],e.prototype,"enableHtmlSanitizer",void 0),km([Z()],e.prototype,"created",void 0),e=km([$],e)}(Kp),Vm=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),_m=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Fm="e-checkbox-disabled",Ym="e-frame",Wm="e-ripple-container",Qm="e-ripple-check",Xm="e-ripple-stop",qm="e-checkbox-wrapper",Gm=["title","class","style","disabled","readonly","name","value"],Zm=(function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.isFocused=!1,n.isMouseClick=!1,n.clickTriggered=!1,n.validCheck=!0,n}Vm(e,t),e.prototype.changeState=function(t,e){var i,n=this.getWrapper().getElementsByClassName(Ym)[0];kp&&(i=this.getWrapper().getElementsByClassName(Wm)[0]),"check"===t?(n.classList.remove("e-stop"),n.classList.add("e-check"),i&&(i.classList.remove(Xm),i.classList.add(Qm)),this.element.checked=!0,(this.element.required||this.element.closest("form")&&this.element.closest("form").classList.contains("e-formvalidator"))&&this.validCheck&&!e?(this.element.checked=!1,this.validCheck=!1):(this.element.required||this.element.closest("form")&&this.element.closest("form").classList.contains("e-formvalidator"))&&(this.validCheck=!0)):"uncheck"===t?(x([n],["e-check","e-stop"]),i&&x([i],[Qm,Xm]),this.element.checked=!1,(this.element.required||this.element.closest("form")&&this.element.closest("form").classList.contains("e-formvalidator"))&&this.validCheck&&!e?(this.element.checked=!0,this.validCheck=!1):(this.element.required||this.element.closest("form")&&this.element.closest("form").classList.contains("e-formvalidator"))&&(this.validCheck=!0)):(n.classList.remove("e-check"),n.classList.add("e-stop"),i&&(i.classList.remove(Qm),i.classList.add(Xm)),this.element.indeterminate=!0,this.indeterminate=!0)},e.prototype.clickHandler=function(t){if("INPUT"===t.target.tagName&&this.clickTriggered)return this.isVue&&this.changeState(this.checked?"check":"uncheck"),void(this.clickTriggered=!1);"SPAN"!==t.target.tagName&&"LABEL"!==t.target.tagName||(this.clickTriggered=!0),this.isMouseClick&&(this.focusOutHandler(),this.isMouseClick=!1),this.indeterminate?(this.changeState(this.checked?"check":"uncheck"),this.indeterminate=!1,this.element.indeterminate=!1):this.checked?(this.changeState("uncheck"),this.checked=!1):(this.changeState("check"),this.checked=!0);var e={checked:this.updateVueArrayModel(!1),event:t};this.trigger("change",e),t.stopPropagation()},e.prototype.destroy=function(){var e=this,i=this.getWrapper();t.prototype.destroy.call(this),this.wrapper&&(i=this.wrapper,this.disabled||this.unWireEvents(),"INPUT"===this.tagName?(this.getWrapper()&&i.parentNode&&i.parentNode.insertBefore(this.element,i),T(i),this.element.checked=!1,this.indeterminate&&(this.element.indeterminate=!1),["name","value","disabled"].forEach(function(t){e.element.removeAttribute(t)})):(["class"].forEach(function(t){i.removeAttribute(t)}),i.innerHTML=""))},e.prototype.focusHandler=function(){this.isFocused=!0},e.prototype.focusOutHandler=function(){var t=this.getWrapper();t&&t.classList.remove("e-focus"),this.isFocused=!1},e.prototype.getModuleName=function(){return"checkbox"},e.prototype.getPersistData=function(){return this.addOnPersist(["checked","indeterminate"])},e.prototype.getWrapper=function(){return this.element&&this.element.parentElement?this.element.parentElement.parentElement:null},e.prototype.initialize=function(){h(this.initialCheckedValue)&&(this.initialCheckedValue=this.checked),this.name&&this.element.setAttribute("name",this.name),this.value&&(this.element.setAttribute("value",this.value),this.isVue&&"boolean"==typeof this.value&&!0===this.value&&this.setProperties({checked:!0},!0)),this.checked&&this.changeState("check",!0),this.indeterminate&&this.changeState(),this.disabled&&this.setDisabled()},e.prototype.initWrapper=function(){var t=this.element.parentElement;t.classList.contains(qm)||(t=this.createElement("div",{className:qm}),this.element.parentNode.insertBefore(t,this.element));var e=this.createElement("label",{attrs:{for:this.element.id}}),i=this.createElement("span",{className:"e-icons "+Ym});if(t.classList.add("e-wrapper"),this.enableRtl&&t.classList.add("e-rtl"),this.cssClass&&I([t],this.cssClass.replace(/\s+/g," ").trim().split(" ")),t.appendChild(e),e.appendChild(this.element),yi(this,e),e.appendChild(i),kp){var n=this.createElement("span",{className:Wm});"Before"===this.labelPosition?e.appendChild(n):e.insertBefore(n,i),et(n,{duration:400,isCenterRipple:!0})}this.label&&this.setText(this.label)},e.prototype.keyUpHandler=function(){this.isFocused&&this.getWrapper().classList.add("e-focus")},e.prototype.labelMouseDownHandler=function(t){this.isMouseClick=!0;vi(t,this.getWrapper().getElementsByClassName(Wm)[0])},e.prototype.labelMouseUpHandler=function(t){this.isMouseClick=!0;var e=this.getWrapper().getElementsByClassName(Wm)[0];if(e){for(var i=e.querySelectorAll(".e-ripple-element"),n=0;n<i.length-1;n++)e.removeChild(e.childNodes[n]);vi(t,e)}},e.prototype.onPropertyChanged=function(t,e){for(var i=this.getWrapper(),n=0,r=Object.keys(t);n<r.length;n++){switch(r[n]){case"checked":this.indeterminate=!1,this.element.indeterminate=!1,this.changeState(t.checked?"check":"uncheck");break;case"indeterminate":t.indeterminate?this.changeState():(this.element.indeterminate=!1,this.changeState(this.checked?"check":"uncheck"));break;case"disabled":t.disabled?(this.setDisabled(),this.wrapper=this.getWrapper(),this.unWireEvents()):(this.element.disabled=!1,i.classList.remove(Fm),i.setAttribute("aria-disabled","false"),this.wireEvents());break;case"cssClass":e.cssClass&&x([i],e.cssClass.split(" ")),t.cssClass&&I([i],t.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"enableRtl":t.enableRtl?i.classList.add("e-rtl"):i.classList.remove("e-rtl");break;case"label":this.setText(t.label);break;case"labelPosition":var o=i.getElementsByClassName("e-label")[0],s=i.getElementsByTagName("label")[0];T(o),"After"===t.labelPosition?s.appendChild(o):s.insertBefore(o,i.getElementsByClassName(Ym)[0]);break;case"name":this.element.setAttribute("name",t.name);break;case"value":if(this.isVue&&"object"==typeof t.value)break;this.element.setAttribute("value",t.value);break;case"htmlAttributes":this.updateHtmlAttributeToWrapper()}}},e.prototype.preRender=function(){var t=this.element;this.tagName=this.element.tagName,t=gi(this.createElement,"EJS-CHECKBOX","checkbox",t,qm),this.element=t,"checkbox"!==this.element.getAttribute("type")&&this.element.setAttribute("type","checkbox"),this.element.id||(this.element.id=d("e-"+this.getModuleName()))},e.prototype.render=function(){this.initWrapper(),this.initialize(),this.disabled||this.wireEvents(),this.updateHtmlAttributeToWrapper(),this.updateVueArrayModel(!0),this.renderComplete(),this.wrapper=this.getWrapper()},e.prototype.setDisabled=function(){var t=this.getWrapper();this.element.disabled=!0,t.classList.add(Fm),t.setAttribute("aria-disabled","true")},e.prototype.setText=function(t){var e=this.getWrapper();if(e){var i=e.getElementsByClassName("e-label")[0];if(i)i.textContent=t;else{t=this.enableHtmlSanitizer?Yu.sanitize(t):t,i=this.createElement("span",{className:"e-label",innerHTML:t});var n=e.getElementsByTagName("label")[0];"Before"===this.labelPosition?n.insertBefore(i,e.getElementsByClassName(Ym)[0]):n.appendChild(i)}}},e.prototype.changeHandler=function(t){t.stopPropagation()},e.prototype.formResetHandler=function(){this.checked=this.initialCheckedValue,this.element.checked=this.initialCheckedValue},e.prototype.unWireEvents=function(){var t=this.wrapper;Ep.remove(t,"click",this.clickHandler),Ep.remove(this.element,"keyup",this.keyUpHandler),Ep.remove(this.element,"focus",this.focusHandler),Ep.remove(this.element,"focusout",this.focusOutHandler);var e=t.getElementsByTagName("label")[0];Ep.remove(e,"mousedown",this.labelMouseDownHandler),Ep.remove(e,"mouseup",this.labelMouseUpHandler);var i=j(this.element,"form");i&&Ep.remove(i,"reset",this.formResetHandler),"EJS-CHECKBOX"===this.tagName&&Ep.remove(this.element,"change",this.changeHandler)},e.prototype.wireEvents=function(){var t=this.getWrapper();Ep.add(t,"click",this.clickHandler,this),Ep.add(this.element,"keyup",this.keyUpHandler,this),Ep.add(this.element,"focus",this.focusHandler,this),Ep.add(this.element,"focusout",this.focusOutHandler,this);var e=t.getElementsByTagName("label")[0];Ep.add(e,"mousedown",this.labelMouseDownHandler,this),Ep.add(e,"mouseup",this.labelMouseUpHandler,this);var i=j(this.element,"form");i&&Ep.add(i,"reset",this.formResetHandler,this),"EJS-CHECKBOX"===this.tagName&&Ep.add(this.element,"change",this.changeHandler,this)},e.prototype.updateVueArrayModel=function(t){if(this.isVue&&"object"==typeof this.value){var e=this.element.value;if(e&&this.value){if(!t){var i=this.value.indexOf(e);return this.checked?i<0&&this.value.push(e):i>-1&&this.value.splice(i,1),this.value}for(var n=0;n<this.value.length;n++)e===this.value[n]&&(this.changeState("check"),this.setProperties({checked:!0},!0))}}return this.validCheck?this.element.checked:!this.element.checked},e.prototype.updateHtmlAttributeToWrapper=function(){if(!h(this.htmlAttributes))for(var t=0,e=Object.keys(this.htmlAttributes);t<e.length;t++){var i=e[t];if(Gm.indexOf(i)>-1){var n=this.getWrapper();if("class"===i)I([n],this.htmlAttributes[""+i].split(" "));else if("title"===i)n.setAttribute(i,this.htmlAttributes[""+i]);else if("style"===i){this.getWrapper().getElementsByClassName(Ym)[0].setAttribute(i,this.htmlAttributes[""+i])}else"disabled"===i?("true"===this.htmlAttributes[""+i]&&this.setDisabled(),this.element.setAttribute(i,this.htmlAttributes[""+i])):this.element.setAttribute(i,this.htmlAttributes[""+i])}}},e.prototype.click=function(){this.element.click()},e.prototype.focusIn=function(){this.element.focus()},_m([Z()],e.prototype,"change",void 0),_m([Z()],e.prototype,"created",void 0),_m([W(!1)],e.prototype,"checked",void 0),_m([W("")],e.prototype,"cssClass",void 0),_m([W(!1)],e.prototype,"disabled",void 0),_m([W(!1)],e.prototype,"indeterminate",void 0),_m([W("")],e.prototype,"label",void 0),_m([W("After")],e.prototype,"labelPosition",void 0),_m([W("")],e.prototype,"name",void 0),_m([W("")],e.prototype,"value",void 0),_m([W(!1)],e.prototype,"enableHtmlSanitizer",void 0),_m([W({})],e.prototype,"htmlAttributes",void 0),e=_m([$],e)}(Kp),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),$m=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Km="e-ripple-container",Jm="e-radio-wrapper",tf=["title","class","style","disabled","readonly","name","value"],ef=(function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.isFocused=!1,n}Zm(e,t),i=e,e.prototype.changeHandler=function(t){this.checked=!0,this.dataBind();var e=this.element.getAttribute("value");e=this.isVue&&e?this.element.value:this.value,this.trigger("change",{value:e,event:t}),this.isAngular&&t.stopPropagation()},e.prototype.updateChange=function(){for(var t,e,n=this.getRadioGroup(),r=0;r<n.length;r++)(t=n[r])!==this.element&&((e=y(t,i)).checked=!1,"EJS-RADIOBUTTON"===this.tagName&&(e.angularValue=this.value))},e.prototype.destroy=function(){var e=this,i=this.wrapper;t.prototype.destroy.call(this),i&&(this.disabled||this.unWireEvents(),"INPUT"===this.tagName?(i.parentNode&&i.parentNode.insertBefore(this.element,i),T(i),this.element.checked=!1,["name","value","disabled"].forEach(function(t){e.element.removeAttribute(t)})):(["role","aria-checked","class"].forEach(function(t){i.removeAttribute(t)}),i.innerHTML=""))},e.prototype.focusHandler=function(){this.isFocused=!0},e.prototype.focusOutHandler=function(){var t=this.getLabel();t&&t.classList.remove("e-focus")},e.prototype.getModuleName=function(){return"radio"},e.prototype.getSelectedValue=function(){for(var t,e=this.getRadioGroup(),i=0,n=e.length;i<n;i++)if((t=e[i]).checked)return t.value;return""},e.prototype.getRadioGroup=function(){return document.querySelectorAll('input.e-radio[name="'+this.element.getAttribute("name")+'"]')},e.prototype.getPersistData=function(){return this.addOnPersist(["checked"])},e.prototype.getWrapper=function(){return this.element?this.element.parentElement:null},e.prototype.getLabel=function(){return this.element?this.element.nextElementSibling:null},e.prototype.initialize=function(){h(this.initialCheckedValue)&&(this.initialCheckedValue=this.checked),this.initWrapper(),this.updateHtmlAttribute(),this.name&&this.element.setAttribute("name",this.name);var t=this.element.getAttribute("value");this.isVue&&t&&t===this.value&&(this.checked=!0),(this.isVue?this.value&&!t:this.value)&&this.element.setAttribute("value",this.value),this.checked&&(this.element.checked=!0),this.disabled&&this.setDisabled()},e.prototype.initWrapper=function(){var t,e=this.element.parentElement;e.classList.contains(Jm)||(e=this.createElement("div",{className:Jm}),this.element.parentNode.insertBefore(e,this.element));var i=this.createElement("label",{attrs:{for:this.element.id}});e.appendChild(this.element),e.appendChild(i),kp&&(t=this.createElement("span",{className:Km}),i.appendChild(t),et(t,{duration:400,isCenterRipple:!0})),e.classList.add("e-wrapper"),this.enableRtl&&i.classList.add("e-rtl"),this.cssClass&&I([e],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.label&&this.setText(this.label)},e.prototype.keyUpHandler=function(){this.isFocused&&this.getLabel().classList.add("e-focus")},e.prototype.labelRippleHandler=function(t){vi(t,this.getLabel().getElementsByClassName(Km)[0])},e.prototype.formResetHandler=function(){this.checked=this.initialCheckedValue,this.initialCheckedValue&&L(this.element,{checked:"true"})},e.prototype.onPropertyChanged=function(t,e){for(var i=this.getWrapper(),n=this.getLabel(),r=0,o=Object.keys(t);r<o.length;r++){switch(o[r]){case"checked":t.checked&&this.updateChange(),this.element.checked=t.checked;break;case"disabled":t.disabled?(this.setDisabled(),this.unWireEvents()):(this.element.disabled=!1,this.wireEvents());break;case"cssClass":e.cssClass&&x([i],e.cssClass.split(" ")),t.cssClass&&I([i],t.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"enableRtl":t.enableRtl?n.classList.add("e-rtl"):n.classList.remove("e-rtl");break;case"label":this.setText(t.label);break;case"labelPosition":"Before"===t.labelPosition?n.classList.add("e-right"):n.classList.remove("e-right");break;case"name":this.element.setAttribute("name",t.name);break;case"value":if(!h(this.htmlAttributes)&&this.htmlAttributes.value)break;this.element.setAttribute("value",t.value);break;case"htmlAttributes":this.updateHtmlAttribute()}}},e.prototype.preRender=function(){var t=this.element;if(this.formElement=j(this.element,"form"),this.tagName=this.element.tagName,t=gi(this.createElement,"EJS-RADIOBUTTON","radio",t,Jm),this.element=t,"radio"!==this.element.getAttribute("type")&&this.element.setAttribute("type","radio"),this.element.id||(this.element.id=d("e-"+this.getModuleName())),"EJS-RADIOBUTTON"===this.tagName){var e=this.element.getAttribute("formcontrolname");e&&(this.setProperties({name:e},!0),this.element.setAttribute("name",e))}},e.prototype.render=function(){this.initialize(),this.disabled||this.wireEvents(),this.renderComplete(),this.wrapper=this.getWrapper()},e.prototype.setDisabled=function(){this.element.disabled=!0},e.prototype.setText=function(t){var e=this.getLabel(),i=e.getElementsByClassName("e-label")[0];i?i.textContent=t:(t=this.enableHtmlSanitizer?Yu.sanitize(t):t,i=this.createElement("span",{className:"e-label",innerHTML:t}),e.appendChild(i)),"Before"===this.labelPosition?this.getLabel().classList.add("e-right"):this.getLabel().classList.remove("e-right")},e.prototype.updateHtmlAttribute=function(){if(!h(this.htmlAttributes))for(var t=0,e=Object.keys(this.htmlAttributes);t<e.length;t++){var i=e[t];if(tf.indexOf(i)>-1){var n=this.element.parentElement;"class"===i?I([n],this.htmlAttributes[""+i].replace(/\s+/g," ").trim().split(" ")):"title"===i||"style"===i?n.setAttribute(i,this.htmlAttributes[""+i]):this.element.setAttribute(i,this.htmlAttributes[""+i])}}},e.prototype.unWireEvents=function(){var t=this.wrapper;Ep.remove(this.element,"change",this.changeHandler),Ep.remove(this.element,"focus",this.focusHandler),Ep.remove(this.element,"focusout",this.focusOutHandler),Ep.remove(this.element,"keyup",this.keyUpHandler);var e=t.getElementsByTagName("label")[0];e&&(Ep.remove(e,"mousedown",this.labelRippleHandler),Ep.remove(e,"mouseup",this.labelRippleHandler)),this.formElement&&Ep.remove(this.formElement,"reset",this.formResetHandler)},e.prototype.wireEvents=function(){var t=this.getLabel();Ep.add(this.element,"change",this.changeHandler,this),Ep.add(this.element,"keyup",this.keyUpHandler,this),Ep.add(this.element,"focus",this.focusHandler,this),Ep.add(this.element,"focusout",this.focusOutHandler,this);var e=t.getElementsByClassName("e-label")[0];e&&(Ep.add(e,"mousedown",this.labelRippleHandler,this),Ep.add(e,"mouseup",this.labelRippleHandler,this)),this.formElement&&Ep.add(this.formElement,"reset",this.formResetHandler,this)},e.prototype.click=function(){this.element.click()},e.prototype.focusIn=function(){this.element.focus()};var i;$m([Z()],e.prototype,"change",void 0),$m([Z()],e.prototype,"created",void 0),$m([W(!1)],e.prototype,"checked",void 0),$m([W("")],e.prototype,"cssClass",void 0),$m([W(!1)],e.prototype,"disabled",void 0),$m([W("")],e.prototype,"label",void 0),$m([W("After")],e.prototype,"labelPosition",void 0),$m([W("")],e.prototype,"name",void 0),$m([W("")],e.prototype,"value",void 0),$m([W(!1)],e.prototype,"enableHtmlSanitizer",void 0),$m([W({})],e.prototype,"htmlAttributes",void 0),e=i=$m([$],e)}(Kp),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),nf=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},rf="e-switch-disabled",of="e-ripple-container",sf="e-switch-wrapper",af=["title","class","style","disabled","readonly","name","value","aria-label","id"],lf=(function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.isFocused=!1,n.isDrag=!1,n.isWireEvents=!1,n}ef(e,t),e.prototype.changeState=function(t){var e,i=this.getWrapper(),n=i.querySelector(".e-switch-inner"),r=i.querySelector(".e-switch-handle");kp&&(e=i.getElementsByClassName(of)[0]),t?(I([n,r],"e-switch-active"),this.element.checked=!0,this.checked=!0,e&&I([e],["e-ripple-check"])):(x([n,r],"e-switch-active"),this.element.checked=!1,this.checked=!1,e&&x([e],["e-ripple-check"]))},e.prototype.clickHandler=function(t){this.isDrag=!1,this.focusOutHandler(),this.changeState(!this.checked),this.element.focus();var e={checked:this.element.checked,event:t};this.trigger("change",e)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.disabled||this.unWireEvents(),function(t,e,i){"INPUT"===i?(e.parentNode.insertBefore(t.element,e),T(e),t.element.checked=!1,["name","value","disabled"].forEach(function(e){t.element.removeAttribute(e)})):(["role","aria-checked","class"].forEach(function(t){e.removeAttribute(t)}),e.innerHTML="")}(this,this.getWrapper(),this.tagName)},e.prototype.focusHandler=function(){this.isFocused=!0},e.prototype.focusOutHandler=function(){this.getWrapper().classList.remove("e-focus")},e.prototype.getModuleName=function(){return"switch"},e.prototype.getPersistData=function(){return this.addOnPersist(["checked"])},e.prototype.getWrapper=function(){return this.element.parentElement},e.prototype.initialize=function(){h(this.initialSwitchCheckedValue)&&(this.initialSwitchCheckedValue=this.checked),this.name&&this.element.setAttribute("name",this.name),this.value&&this.element.setAttribute("value",this.value),this.checked&&this.changeState(!0),this.disabled&&this.setDisabled(),(this.onLabel||this.offLabel)&&this.setLabel(this.onLabel,this.offLabel)},e.prototype.initWrapper=function(){var t=this.element.parentElement;t.classList.contains(sf)||(t=this.createElement("div",{className:sf}),this.element.parentNode.insertBefore(t,this.element));var e=this.createElement("span",{className:"e-switch-inner"}),i=this.createElement("span",{className:"e-switch-on"}),n=this.createElement("span",{className:"e-switch-off"}),r=this.createElement("span",{className:"e-switch-handle"});if(t.appendChild(this.element),yi(this,t),e.appendChild(i),e.appendChild(n),t.appendChild(e),t.appendChild(r),kp){var o=this.createElement("span",{className:of});r.appendChild(o),et(o,{duration:400,isCenterRipple:!0})}t.classList.add("e-wrapper"),this.enableRtl&&t.classList.add("e-rtl"),this.cssClass&&I([t],this.cssClass.replace(/\s+/g," ").trim().split(" "))},e.prototype.onPropertyChanged=function(t,e){for(var i=this.getWrapper(),n=0,r=Object.keys(t);n<r.length;n++){switch(r[n]){case"checked":this.changeState(t.checked);break;case"disabled":t.disabled?(this.setDisabled(),this.unWireEvents(),this.isWireEvents=!1):(this.element.disabled=!1,i.classList.remove(rf),i.setAttribute("aria-disabled","false"),this.isWireEvents||(this.wireEvents(),this.isWireEvents=!0));break;case"value":this.element.setAttribute("value",t.value);break;case"name":this.element.setAttribute("name",t.name);break;case"onLabel":case"offLabel":this.setLabel(t.onLabel,t.offLabel);break;case"enableRtl":t.enableRtl?i.classList.add("e-rtl"):i.classList.remove("e-rtl");break;case"cssClass":e.cssClass&&x([i],e.cssClass.split(" ")),t.cssClass&&I([i],t.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"htmlAttributes":this.updateHtmlAttribute()}}},e.prototype.preRender=function(){var t=this.element;this.formElement=j(this.element,"form"),this.tagName=this.element.tagName,function(t,e,i,n,r){n=gi(t.createElement,e,"checkbox",n,i),t.element=n,"checkbox"!==t.element.getAttribute("type")&&t.element.setAttribute("type","checkbox"),t.element.id||(t.element.id=d("e-"+r))}(this,"EJS-SWITCH",sf,t,this.getModuleName())},e.prototype.render=function(){this.initWrapper(),this.initialize(),this.disabled||this.wireEvents(),this.renderComplete(),this.updateHtmlAttribute()},e.prototype.rippleHandler=function(t){vi(t,this.getWrapper().getElementsByClassName(of)[0]),"mousedown"===t.type&&t.currentTarget.classList.contains("e-switch-wrapper")&&1===t.which&&(this.isDrag=!0,this.isFocused=!1)},e.prototype.rippleTouchHandler=function(t){var e=this.getWrapper().getElementsByClassName(of)[0];if(e){var i=document.createEvent("MouseEvents");i.initEvent(t,!1,!0),e.dispatchEvent(i)}},e.prototype.setDisabled=function(){var t=this.getWrapper();this.element.disabled=!0,t.classList.add(rf),t.setAttribute("aria-disabled","true")},e.prototype.setLabel=function(t,e){var i=this.getWrapper();t&&(i.querySelector(".e-switch-on").textContent=t),e&&(i.querySelector(".e-switch-off").textContent=e)},e.prototype.updateHtmlAttribute=function(){if(!h(this.htmlAttributes))for(var t=0,e=Object.keys(this.htmlAttributes);t<e.length;t++){var i=e[t];if(af.indexOf(i)>-1){var n=this.getWrapper();"class"===i?I([n],this.htmlAttributes[""+i].split(" ")):"title"===i?n.setAttribute(i,this.htmlAttributes[""+i]):"style"===i?n.setAttribute(i,this.htmlAttributes[""+i]):"disabled"===i?("true"===this.htmlAttributes[""+i]&&this.setDisabled(),this.element.setAttribute(i,this.htmlAttributes[""+i])):this.element.setAttribute(i,this.htmlAttributes[""+i])}}},e.prototype.switchFocusHandler=function(){this.isFocused&&this.getWrapper().classList.add("e-focus")},e.prototype.switchMouseUp=function(t){var e=t.target;"touchmove"===t.type&&t.preventDefault(),"touchstart"===t.type&&(this.isDrag=!0,this.rippleTouchHandler("mousedown")),this.isDrag&&("mouseup"===t.type&&e.className.indexOf("e-switch")<0||"touchend"===t.type)&&(this.clickHandler(t),this.rippleTouchHandler("mouseup"),t.preventDefault())},e.prototype.formResetHandler=function(){this.checked=this.initialSwitchCheckedValue,this.element.checked=this.initialSwitchCheckedValue},e.prototype.toggle=function(){this.clickHandler()},e.prototype.wireEvents=function(){var t=this.getWrapper();this.delegateMouseUpHandler=this.switchMouseUp.bind(this),this.delegateKeyUpHandler=this.switchFocusHandler.bind(this),Ep.add(t,"click",this.clickHandler,this),Ep.add(this.element,"focus",this.focusHandler,this),Ep.add(this.element,"focusout",this.focusOutHandler,this),Ep.add(this.element,"mouseup",this.delegateMouseUpHandler,this),Ep.add(this.element,"keyup",this.delegateKeyUpHandler,this),Ep.add(t,"mousedown mouseup",this.rippleHandler,this),Ep.add(t,"touchstart touchmove touchend",this.switchMouseUp,this),this.formElement&&Ep.add(this.formElement,"reset",this.formResetHandler,this)},e.prototype.unWireEvents=function(){var t=this.getWrapper();Ep.remove(t,"click",this.clickHandler),Ep.remove(this.element,"focus",this.focusHandler),Ep.remove(this.element,"focusout",this.focusOutHandler),Ep.remove(this.element,"mouseup",this.delegateMouseUpHandler),Ep.remove(this.element,"keyup",this.delegateKeyUpHandler),Ep.remove(t,"mousedown mouseup",this.rippleHandler),Ep.remove(t,"touchstart touchmove touchend",this.switchMouseUp),this.formElement&&Ep.remove(this.formElement,"reset",this.formResetHandler)},e.prototype.click=function(){this.element.click()},e.prototype.focusIn=function(){this.element.focus()},nf([Z()],e.prototype,"change",void 0),nf([Z()],e.prototype,"created",void 0),nf([W(!1)],e.prototype,"checked",void 0),nf([W("")],e.prototype,"cssClass",void 0),nf([W(!1)],e.prototype,"disabled",void 0),nf([W("")],e.prototype,"name",void 0),nf([W("")],e.prototype,"onLabel",void 0),nf([W("")],e.prototype,"offLabel",void 0),nf([W("")],e.prototype,"value",void 0),nf([W({})],e.prototype,"htmlAttributes",void 0),e=nf([$],e)}(Kp),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),hf=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},cf={chipSet:"e-chip-set",chip:"e-chip",avatar:"e-chip-avatar",text:"e-chip-text",icon:"e-chip-icon",delete:"e-chip-delete",deleteIcon:"e-dlt-btn",multiSelection:"e-multi-selection",singleSelection:"e-selection",active:"e-active",chipWrapper:"e-chip-avatar-wrap",iconWrapper:"e-chip-icon-wrap",focused:"e-focused",disabled:"e-disabled",rtl:"e-rtl"},df=(function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.multiSelectedChip=[],n}lf(e,t),e.prototype.preRender=function(){},e.prototype.chipType=function(){return this.chips&&this.chips.length&&this.chips.length>0},e.prototype.render=function(){this.type=this.chips.length?"chipset":this.text||this.element.innerText?"chip":"chipset",this.setAttributes(),this.createChip(),this.setRtl(),this.select(this.selectedChips,void 0),this.wireEvent(!1),this.rippleFunction=et(this.element,{selector:".e-chip"}),this.renderComplete()},e.prototype.createChip=function(){this.innerText=this.element.innerText&&0!==this.element.innerText.length?this.element.innerText.trim():this.element.innerText,this.element.innerHTML="",this.chipCreation("chip"===this.type?[this.innerText?this.innerText:this.text]:this.chips)},e.prototype.setAttributes=function(){"chip"===this.type?(this.enabled&&(this.element.tabIndex=0),this.element.setAttribute("role","option")):(this.element.classList.add(cf.chipSet),this.element.setAttribute("role","listbox"),"Multiple"===this.selection?(this.element.classList.add(cf.multiSelection),this.element.setAttribute("aria-multiselectable","true")):"Single"===this.selection?(this.element.classList.add(cf.singleSelection),this.element.setAttribute("aria-multiselectable","false")):this.element.setAttribute("aria-multiselectable","false"))},e.prototype.setRtl=function(){this.element.classList[this.enableRtl?"add":"remove"](cf.rtl)},e.prototype.chipCreation=function(t){for(var e=[],i=[],n=0;n<t.length;n++){var r=this.getFieldValues(t[n]),o=r.htmlAttributes;i.push(o);var s=this.elementCreation(r),a=(cf.chip+" "+(r.enabled?" ":cf.disabled)+" "+(r.avatarIconCss||r.avatarText?cf.chipWrapper:r.leadingIconCss?cf.iconWrapper:" ")+" "+r.cssClass).split(" ").filter(function(t){return t});if(this.chipType()){var l=this.createElement("DIV",{className:a.join(" "),attrs:{tabIndex:"0",role:"option","aria-label":r.text,"aria-selected":"false"}});if(r.value&&l.setAttribute("data-value",r.value.toString()),r.enabled?l.setAttribute("aria-disabled","false"):(l.removeAttribute("tabindex"),l.setAttribute("aria-disabled","true")),!h(i[n])&&i.length>n&&Object.keys(i[n]).length){var c=[];c=Object.keys(i[n]);for(var d=0;d<c.length;d++)l.setAttribute(c[d],i[n][c[d]])}E(s,l),e.push(l)}else e=s,I([this.element],a),this.element.setAttribute("aria-label",r.text),r.value&&this.element.setAttribute("data-value",r.value.toString())}E(e,this.element)},e.prototype.getFieldValues=function(t){var e=!("false"===this.enabled.toString());return{text:"object"==typeof t?t.text?t.text.toString():this.text.toString():this.chipType()?t.toString():this.innerText?this.innerText:this.text.toString(),cssClass:"object"==typeof t&&t.cssClass?t.cssClass.toString():this.cssClass.toString(),leadingIconCss:"object"==typeof t&&t.leadingIconCss?t.leadingIconCss.toString():this.leadingIconCss.toString(),avatarIconCss:"object"==typeof t&&t.avatarIconCss?t.avatarIconCss.toString():this.avatarIconCss.toString(),avatarText:"object"==typeof t&&t.avatarText?t.avatarText.toString():this.avatarText.toString(),trailingIconCss:"object"==typeof t&&t.trailingIconCss?t.trailingIconCss.toString():this.trailingIconCss.toString(),enabled:"object"==typeof t?h(t.enabled)?e:"false"!==t.enabled.toString():e,value:"object"==typeof t&&t.value?t.value.toString():null,leadingIconUrl:"object"==typeof t&&t.leadingIconUrl?t.leadingIconUrl.toString():this.leadingIconUrl,trailingIconUrl:"object"==typeof t&&t.trailingIconUrl?t.trailingIconUrl.toString():this.trailingIconUrl,htmlAttributes:"object"==typeof t&&t.htmlAttributes?t.htmlAttributes:this.htmlAttributes}},e.prototype.elementCreation=function(t){var e=[];if(t.avatarText||t.avatarIconCss){var i=(cf.avatar+" "+t.avatarIconCss).trim(),n=this.createElement("span",{className:i});n.innerText=t.avatarText,e.push(n)}else if(t.leadingIconCss){i=(cf.icon+" "+t.leadingIconCss).trim();var r=this.createElement("span",{className:i});e.push(r)}else if(t.leadingIconUrl){i=(cf.avatar+" image-url").trim();(r=this.createElement("span",{className:i})).style.backgroundImage="url("+t.leadingIconUrl+")",e.push(r)}var o=this.createElement("span",{className:cf.text});if(o.innerText=t.text,e.push(o),t.trailingIconCss||this.chipType()&&this.enableDelete){i=(cf.delete+" "+(t.trailingIconCss?t.trailingIconCss:cf.deleteIcon)).trim();var s=this.createElement("span",{className:i});e.push(s)}else if(t.trailingIconUrl){i="trailing-icon-url".trim();var a=this.createElement("span",{className:i});a.style.backgroundImage="url("+t.trailingIconUrl+")",e.push(a)}return e},e.prototype.find=function(t){var e,i=t instanceof HTMLElement?t:this.element.querySelectorAll("."+cf.chip)[t];return i&&this.chipType()&&((e={text:void 0,index:void 0,element:void 0,data:void 0}).index=Array.prototype.slice.call(this.element.querySelectorAll("."+cf.chip)).indexOf(i),e.text="object"==typeof this.chips[e.index]?this.chips[e.index].text?this.chips[e.index].text.toString():"":this.chips[e.index].toString(),e.data=this.chips[e.index],e.element=i),e},e.prototype.add=function(t){var e;if("chip"!==this.type){var i=t instanceof Array?t:[t];(e=this.chips).push.apply(e,i),this.chipCreation(i)}},e.prototype.select=function(t,e){this.onSelect(t,!1,e)},e.prototype.multiSelection=function(t){for(var e=this.element.querySelectorAll(".e-chip"),i=0;i<t.length;i++)if("string"==typeof t[i]){for(var n=0;n<e.length;n++)if(t[i]!==n&&t[i]===e[n].attributes[5].value){this.multiSelectedChip.push(n);break}}else this.multiSelectedChip.push(t[i])},e.prototype.onSelect=function(t,e,i){var n,r,o;if(this.chipType()&&"None"!==this.selection){if(e)for(var s=this.element.querySelectorAll("."+cf.chip),a=0;a<s.length;a++)s[a].setAttribute("aria-selected","false"),s[a].classList.remove(cf.active);var l=t instanceof Array?t:[t];for(a=0;a<l.length;a++){var h=l[a]instanceof HTMLElement?l[a]:this.element.querySelectorAll("."+cf.chip)[l[a]];if("index"!==i)for(var c=0;c<this.chips.length;c++){r=this.element.querySelectorAll("."+cf.chip)[c];var d=this.getFieldValues(this.chips[c]);"value"===i?null!==d.value&&(o=r.dataset.value):"text"===i&&(o=r.innerText),o===l[a].toString()&&(n=c,h=this.element.querySelectorAll("."+cf.chip)[n])}h instanceof HTMLElement&&this.selectionHandler(h)}}},e.prototype.remove=function(t){var e=this;if(this.chipType()){var i=t instanceof Array?t:[t],n=[],r=this.element.querySelectorAll("."+cf.chip);i.forEach(function(t){var e=t instanceof HTMLElement?t:r[t];e instanceof HTMLElement&&n.push(e)}),n.forEach(function(t){var i=e.element.querySelectorAll("."+cf.chip),n=Array.prototype.slice.call(i).indexOf(t);e.deleteHandler(t,n)})}},e.prototype.getSelectedChips=function(){var t;if(this.chipType()&&"None"!==this.selection){for(var e={texts:[],Indexes:[],data:[],elements:[]},i=this.element.querySelectorAll("."+cf.active),n=0;n<i.length;n++){var r=i[n];e.elements.push(r);var o=Array.prototype.slice.call(this.element.querySelectorAll("."+cf.chip)).indexOf(r);e.Indexes.push(o),e.data.push(this.chips[o]);var s="object"==typeof this.chips[o]?this.chips[o].text?this.chips[o].text.toString():null:this.chips[o].toString();e.texts.push(s)}var a={text:e.texts[0],index:e.Indexes[0],data:e.data[0],element:e.elements[0]};t=h(a.index)?void 0:"Multiple"===this.selection?e:a}return t},e.prototype.wireEvent=function(t){t?(Ep.remove(this.element,"click",this.clickHandler),Ep.remove(this.element,"focusout",this.focusOutHandler),Ep.remove(this.element,"keydown",this.keyHandler),Ep.remove(this.element,"keyup",this.keyHandler)):(Ep.add(this.element,"click",this.clickHandler,this),Ep.add(this.element,"focusout",this.focusOutHandler,this),Ep.add(this.element,"keydown",this.keyHandler,this),Ep.add(this.element,"keyup",this.keyHandler,this))},e.prototype.keyHandler=function(t){t.target.classList.contains(cf.chip)&&("keydown"===t.type?13===t.keyCode||32===t.keyCode?this.clickHandler(t):46===t.keyCode&&this.enableDelete&&this.clickHandler(t,!0):9===t.keyCode&&this.focusInHandler(t.target))},e.prototype.focusInHandler=function(t){t.classList.contains(cf.focused)||t.classList.add(cf.focused)},e.prototype.focusOutHandler=function(t){var e=j(t.target,"."+cf.chip),i=this.chipType()?this.element.querySelector("."+cf.focused):this.element.classList.contains(cf.focused)?this.element:null;e&&i&&i.classList.remove(cf.focused)},e.prototype.clickHandler=function(t,e){var i=this;void 0===e&&(e=!1);var n=j(t.target,"."+cf.chip);if(n){var r=void 0;if(this.chipType())r=this.find(n);else{var o=Array.prototype.slice.call(this.element.querySelectorAll("."+cf.chip)).indexOf(n);r={text:this.innerText?this.innerText:this.text,element:n,data:this.text,index:o}}r.event=t,r.cancel=!1,this.trigger("beforeClick",r,function(n){n.cancel||i.clickEventHandler(n.element,t,e)})}},e.prototype.clickEventHandler=function(t,e,i){var n=this;if(this.chipType()){var r=this.find(t);r.event=e;if((e.target.classList.contains(cf.deleteIcon)?e.target:i?t.querySelector("."+cf.deleteIcon):void 0)&&this.enableDelete){r.cancel=!1;var o=r;this.trigger("delete",o,function(e){if(!e.cancel){n.deleteHandler(e.element,e.index),n.selectionHandler(t),r.selected=e.element.classList.contains(cf.active);var i=r;n.trigger("click",i);var o=n.element.querySelectorAll("."+cf.chip)[e.index];o&&(o.focus(),n.focusInHandler(o))}})}else if("None"!==this.selection){this.selectionHandler(t),r.selected=t.classList.contains(cf.active);var s=r;this.trigger("click",s)}else{this.focusInHandler(t);var a=r;this.trigger("click",a)}}else{this.focusInHandler(t);a={text:this.innerText?this.innerText:this.text,element:t,data:this.text,event:e};this.trigger("click",a)}},e.prototype.selectionHandler=function(t){if("Single"===this.selection){var e=this.element.querySelector("."+cf.active);e&&e!==t&&(e.classList.remove(cf.active),e.setAttribute("aria-selected","false")),this.setProperties({selectedChips:null},!0)}else this.setProperties({selectedChips:[]},!0);t.classList.contains(cf.active)?(t.classList.remove(cf.active),t.setAttribute("aria-selected","false")):(t.classList.add(cf.active),t.setAttribute("aria-selected","true")),this.updateSelectedChips()},e.prototype.updateSelectedChips=function(){for(var t,e=this.element.querySelectorAll(".e-chip"),i=[],n=[],r=null,o=0;o<e.length;o++){var s=this.element.querySelectorAll(".e-chip")[o];if("true"===s.getAttribute("aria-selected")){if(t=s.getAttribute("data-value"),"Single"===this.selection&&s.classList.contains("e-active")){r=t||o;break}r=t?n.push(t):i.push(o)}}this.setProperties({selectedChips:"Single"===this.selection?r:t?n:i},!0)},e.prototype.deleteHandler=function(t,e){var i=this.find(t);this.chips.splice(e,1),this.setProperties({chips:this.chips},!0),T(t),this.trigger("deleted",i)},e.prototype.destroy=function(){x([this.element],[cf.chipSet,cf.chip,cf.rtl,cf.multiSelection,cf.singleSelection,cf.disabled,cf.chipWrapper,cf.iconWrapper,cf.active,cf.focused].concat(this.cssClass.toString().split(" ").filter(function(t){return t}))),this.removeMultipleAttributes(["tabindex","role","aria-label","aria-multiselectable"],this.element),this.wireEvent(!0),this.rippleFunction(),t.prototype.destroy.call(this),this.element.innerHTML="",this.element.innerText=this.innerText},e.prototype.removeMultipleAttributes=function(t,e){t.forEach(function(t){e.removeAttribute(t)})},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.getModuleName=function(){return"chip-list"},e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"chips":case"text":case"avatarText":case"avatarIconCss":case"leadingIconCss":case"trailingIconCss":case"selection":case"enableDelete":case"enabled":this.refresh();break;case"cssClass":this.chipType()?this.refresh():(x([this.element],e.cssClass.toString().split(" ").filter(function(t){return t})),I([this.element],t.cssClass.toString().split(" ").filter(function(t){return t})));break;case"selectedChips":x(this.element.querySelectorAll(".e-active"),"e-active"),"Multiple"===this.selection?(this.multiSelectedChip=[],this.multiSelection(t.selectedChips),this.onSelect(this.multiSelectedChip,!0,void 0),this.updateSelectedChips()):this.onSelect(t.selectedChips,!0,void 0);break;case"enableRtl":this.setRtl()}}},hf([W([])],e.prototype,"chips",void 0),hf([W("")],e.prototype,"text",void 0),hf([W("")],e.prototype,"avatarText",void 0),hf([W("")],e.prototype,"avatarIconCss",void 0),hf([W("")],e.prototype,"htmlAttributes",void 0),hf([W("")],e.prototype,"leadingIconCss",void 0),hf([W("")],e.prototype,"trailingIconCss",void 0),hf([W("")],e.prototype,"leadingIconUrl",void 0),hf([W("")],e.prototype,"trailingIconUrl",void 0),hf([W("")],e.prototype,"cssClass",void 0),hf([W(!0)],e.prototype,"enabled",void 0),hf([W([])],e.prototype,"selectedChips",void 0),hf([W("None")],e.prototype,"selection",void 0),hf([W(!1)],e.prototype,"enableDelete",void 0),hf([Z()],e.prototype,"created",void 0),hf([Z()],e.prototype,"click",void 0),hf([Z()],e.prototype,"beforeClick",void 0),hf([Z()],e.prototype,"delete",void 0),hf([Z()],e.prototype,"deleted",void 0),e=hf([$],e)}(Kp),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),pf=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};!function(t){t.TopLeft="TopLeft",t.TopCenter="TopCenter",t.TopRight="TopRight",t.MiddleLeft="MiddleLeft",t.MiddleCenter="MiddleCenter",t.MiddleRight="MiddleRight",t.BottomLeft="BottomLeft",t.BottomCenter="BottomCenter",t.BottomRight="BottomRight"}(jm||(jm={}));var uf,gf=function(t){function e(e,i){return t.call(this,e,i)||this}return df(e,t),e.prototype.render=function(){t.prototype.render.call(this),this.initializeFab()},e.prototype.preRender=function(){t.prototype.preRender.call(this),this.element.id||(this.element.id=d("e-"+this.getModuleName()))},e.prototype.getPersistData=function(){return t.prototype.getPersistData.call(this),this.addOnPersist([])},e.prototype.getModuleName=function(){return"fab"},e.prototype.initializeFab=function(){this.element.classList.add("e-"+t.prototype.getModuleName.call(this)),this.checkTarget(),this.setPosition(),this.setVisibility(),Ep.add(window,"resize",this.resizeHandler,this)},e.prototype.checkTarget=function(){this.isFixed=!0,this.target&&(this.targetEle="string"==typeof this.target?A(this.target):this.target,this.targetEle&&(this.isFixed=!1,this.targetEle.appendChild(this.element))),this.element.classList[this.isFixed?"add":"remove"]("e-fab-fixed")},e.prototype.setVisibility=function(){this.element.classList[this.visible?"remove":"add"]("e-fab-hidden")},e.prototype.setPosition=function(){this.setVerticalPosition(),this.setHorizontalPosition()},e.prototype.setVerticalPosition=function(){if(-1!==["MiddleLeft","MiddleRight","MiddleCenter"].indexOf(this.position)){var t=((this.isFixed?window.innerHeight:this.targetEle.clientHeight)-this.element.offsetHeight)/2;this.element.style.setProperty("--fabVertDist",t+"px"),this.element.classList.add("e-fab-middle")}this.element.classList.add(-1!==["BottomLeft","BottomCenter","BottomRight"].indexOf(this.position)?"e-fab-bottom":"e-fab-top")},e.prototype.setHorizontalPosition=function(){if(-1!==["TopCenter","BottomCenter","MiddleCenter"].indexOf(this.position)){var t=((this.isFixed?window.innerWidth:this.targetEle.clientWidth)-this.element.offsetWidth)/2;this.element.style.setProperty("--fabHorzDist",t+"px"),this.element.classList.add("e-fab-center")}var e=-1!==["TopRight","MiddleRight","BottomRight"].indexOf(this.position);this.element.classList.add(!this.enableRtl&&!e||this.enableRtl&&e?"e-fab-left":"e-fab-right")},e.prototype.clearPosition=function(){this.element.style.removeProperty("--fabVertDist"),this.element.classList.remove("e-fab-top","e-fab-bottom","e-fab-middle"),this.clearHorizontalPosition()},e.prototype.clearHorizontalPosition=function(){this.element.style.removeProperty("--fabHorzDist"),this.element.classList.remove("e-fab-right","e-fab-left","e-fab-center")},e.prototype.refreshPosition=function(){this.resizeHandler()},e.prototype.resizeHandler=function(){this.setPosition()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.element.classList.remove("e-"+t.prototype.getModuleName.call(this),"e-fab-fixed"),this.clearPosition(),Ep.remove(window,"resize",this.resizeHandler)},e.prototype.onPropertyChanged=function(e,i){t.prototype.onPropertyChanged.call(this,e,i);for(var n=0,r=Object.keys(e);n<r.length;n++){switch(r[n]){case"enableRtl":this.clearHorizontalPosition(),this.setHorizontalPosition();break;case"visible":this.setVisibility();break;case"position":this.clearPosition(),this.setPosition();break;case"target":this.checkTarget(),this.setPosition()}}},pf([W("BottomRight")],e.prototype,"position",void 0),pf([W("")],e.prototype,"target",void 0),pf([W(!0)],e.prototype,"visible",void 0),pf([W(!0)],e.prototype,"isPrimary",void 0),e=pf([$],e)}(Um),mf=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ff=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},vf=["TopLeft","TopCenter","TopRight"],yf=["BottomLeft","BottomCenter","BottomRight"],bf=["TopLeft","MiddleLeft","BottomLeft"],Sf=["TopRight","MiddleRight","BottomRight"],wf="e-speeddial-hidden",If="e-speeddial-fixed",xf="e-speeddial",Mf="e-speeddial-hover-open",Cf="e-speeddial-radial",Nf="e-speeddial-linear",Ef="e-speeddial-template",Df="e-speeddial-popup",Tf="e-speeddial-ul",Of="e-speeddial-li",Lf="e-speeddial-li-active",Af="e-speeddial-li-icon",zf="e-disabled",kf="e-speeddial-vert-bottom",jf="e-speeddial-vert-right",Pf="e-speeddial-horz-top",Rf="e-speeddial-horz-left",Bf="e-speeddial-horz-right",Hf="e-speeddial-overflow",Uf="e-speeddial-vert-overflow",Vf="e-speeddial-horz-overflow",_f="e-speeddial-top",Ff="e-speeddial-bottom",Yf="e-speeddial-right",Wf="e-speeddial-left",Qf="e-speeddial-middle",Xf="e-speeddial-center",qf="e-speeddial-top-left",Gf="e-speeddial-bottom-right",Zf="e-speeddial-top-right",$f="e-speeddial-bottom-left",Kf="--speeddialVertDist",Jf="--speeddialHorzDist",tv="--speeddialRadialOffset",ev="--speeddialRadialMinHeight",iv="--speeddialRadialMinWidth",nv="--speeddialOverflowLimit";!function(t){t.Linear="Linear",t.Radial="Radial"}(uf||(uf={}));var rv;!function(t){t.Up="Up",t.Down="Down",t.Right="Right",t.Left="Left",t.Auto="Auto"}(rv||(rv={}));var ov;!function(t){t.Clockwise="Clockwise",t.AntiClockwise="AntiClockwise",t.Auto="Auto"}(ov||(ov={}));var sv;!function(t){t.Fade="Fade",t.FadeZoom="FadeZoom",t.FlipLeftDown="FlipLeftDown",t.FlipLeftUp="FlipLeftUp",t.FlipRightDown="FlipRightDown",t.FlipRightUp="FlipRightUp",t.FlipXDown="FlipXDown",t.FlipXUp="FlipXUp",t.FlipYLeft="FlipYLeft",t.FlipYRight="FlipYRight",t.SlideBottom="SlideBottom",t.SlideLeft="SlideLeft",t.SlideRight="SlideRight",t.SlideTop="SlideTop",t.Zoom="Zoom",t.None="None"}(sv||(sv={}));var av,lv,hv,cv,dv,pv,uv,gv,mv,fv,vv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mf(e,t),ff([W("Fade")],e.prototype,"effect",void 0),ff([W(400)],e.prototype,"duration",void 0),ff([W(0)],e.prototype,"delay",void 0),e}(Rp),yv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mf(e,t),ff([W("Auto")],e.prototype,"direction",void 0),ff([W(-1)],e.prototype,"endAngle",void 0),ff([W("100px")],e.prototype,"offset",void 0),ff([W(-1)],e.prototype,"startAngle",void 0),e}(Rp),bv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mf(e,t),ff([W("")],e.prototype,"iconCss",void 0),ff([W("")],e.prototype,"id",void 0),ff([W("")],e.prototype,"text",void 0),ff([W("")],e.prototype,"title",void 0),ff([W(!1)],e.prototype,"disabled",void 0),e}(Rp),Sv=(function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.isMenuOpen=!1,n.isClock=!0,n.isVertical=!0,n.isControl=!1,n.focusedIndex=-1,n}mf(e,t),e.prototype.render=function(){this.initialize()},e.prototype.preRender=function(){this.keyConfigs={space:"space",enter:"enter",end:"end",home:"home",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",esc:"escape"},this.validateDirection()},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.getModuleName=function(){return"speed-dial"},e.prototype.initialize=function(){this.element.id||(this.element.id=d("e-"+this.getModuleName())),this.fab=new gf({content:this.content,cssClass:this.cssClass?xf+" "+this.cssClass:xf,disabled:this.disabled,enablePersistence:this.enablePersistence,enableRtl:this.enableRtl,iconCss:this.openIconCss,iconPosition:this.iconPosition,position:this.position,target:this.target,visible:this.visible}),this.fab.appendTo(this.element),(this.items.length>0||this.popupTemplate)&&this.createPopup(),this.wireEvents()},e.prototype.wireEvents=function(){Ep.add(window,"resize",this.resizeHandler,this),Ep.add(document.body,"click",this.bodyClickHandler,this),this.opensOnHover?this.wireFabHover():this.wireFabClick()},e.prototype.wirePopupEvents=function(){this.removeRippleEffect=et(this.popupEle,{selector:"."+Af}),this.keyboardModule=new pu(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.popupKeyboardModule=new pu(this.popupEle,{keyAction:this.popupKeyActionHandler.bind(this),keyConfigs:{esc:"escape"},eventName:"keydown"}),Ep.add(this.popupEle,"click",this.popupClick,this),Ep.add(this.popupEle,"mouseleave",this.popupMouseLeaveHandle,this)},e.prototype.wireFabClick=function(){Ep.add(this.fab.element,"click",this.fabClick,this)},e.prototype.wireFabHover=function(){this.popupEle.classList.add(Mf),Ep.add(this.fab.element,"mouseover",this.mouseOverHandle,this),Ep.add(this.element,"mouseleave",this.mouseLeaveHandle,this)},e.prototype.createPopup=function(){var t=Df+" "+wf;t=this.enableRtl?t+" e-rtl":t,t=this.cssClass?t+" "+this.cssClass:t,this.popupEle=this.createElement("div",{className:t,id:this.element.id+"_popup"}),this.element.insertAdjacentElement("afterend",this.popupEle),L(this.element,{"aria-expanded":"false","aria-haspopup":"true","aria-controls":this.popupEle.id}),this.setPopupContent(),this.modal&&this.createOverlay(),this.checkTarget(),this.setPositionProps(),this.wirePopupEvents()},e.prototype.createOverlay=function(){this.overlayEle=this.createElement("div",{id:this.element.id+"_overlay",className:("e-speeddial-overlay"+(this.isMenuOpen?"":" "+wf)+" "+this.cssClass).trim()}),this.element.insertAdjacentElement("beforebegin",this.overlayEle)},e.prototype.popupClick=function(){this.isControl=!0},e.prototype.bodyClickHandler=function(t){this.isControl?this.isControl=!1:this.isMenuOpen&&this.hidePopupEle(t)},e.prototype.fabClick=function(t){this.isControl=!0,this.isMenuOpen?this.hidePopupEle(t):this.showPopupEle(t)},e.prototype.setPopupContent=function(){this.popupEle.classList.remove(Cf,Nf,Ef),this.popupTemplate?(this.popupEle.classList.add(Ef),this.appendTemplate()):(this.popupEle.classList.add("Radial"===this.mode?Cf:Nf),this.createUl(),this.createItems()),this.renderReactTemplates()},e.prototype.appendTemplate=function(){var t=this.createElement("div",{className:"e-speeddial-template-container"});E([t],this.popupEle);E(this.getTemplateString(this.popupTemplate)({},this,"fabPopupTemplate",this.element.id+"popupTemplate",this.isStringTemplate),t)},e.prototype.getTemplateString=function(t){var e="";try{var i=A(t);e=i?"SCRIPT"===i.tagName?i.innerHTML:i.outerHTML:t}catch(i){e=t}return gt(e)},e.prototype.updatePopupTemplate=function(){if(this.popupEle){for(this.popupEle.querySelector("."+Of)&&(this.clearItems(),this.popupEle.classList.remove(Cf,Nf),this.popupEle.classList.add(Ef));this.popupEle.firstElementChild;)O(this.popupEle.firstElementChild);this.setPopupContent(),this.updatePositionProperties()}else this.createPopup()},e.prototype.createUl=function(){var t=this.createElement("ul",{className:Tf,id:this.element.id+"_ul",attrs:{role:"menu"}});this.popupEle.appendChild(t)},e.prototype.createItems=function(){var t=this;this.focusedIndex=-1;for(var e=this.popupEle.querySelector("."+Tf),i=function(i){var r=n.items[parseInt(i.toString(),10)],o=n.createElement("li",{className:Of+" "+wf,id:r.id?r.id:n.element.id+"_li_"+i,attrs:{role:"menuitem"}});if(r.text&&o.setAttribute("aria-label",r.text),n.itemTemplate){E(n.getTemplateString(n.itemTemplate)(r,n,"fabItemTemplate",n.element.id+"itemTemplate",n.isStringTemplate),o)}else{if(r.iconCss){var s=n.createElement("span",{className:Af+" "+r.iconCss});o.appendChild(s)}if(r.text){var a=n.createElement("span",{className:"e-speeddial-li-text"});a.innerText=r.text,o.appendChild(a),r.iconCss||o.classList.add("e-speeddial-text-li")}}r.disabled?(o.classList.add(zf),o.setAttribute("aria-disabled","true")):Ep.add(o,"click",function(e){return t.triggerItemClick(e,r)},n),r.title&&o.setAttribute("title",r.title);var l={element:o,item:r};n.trigger("beforeItemRender",l,function(t){e.appendChild(t.element)})},n=this,r=0;r<this.items.length;r++)i(r)},e.prototype.setRTL=function(){this.popupEle.classList[this.enableRtl?"add":"remove"]("e-rtl"),this.clearHorizontalPosition(),this.popupTemplate||"Radial"===this.mode?this.setHorizontalPosition():this.setLinearHorizontalPosition()},e.prototype.checkTarget=function(){this.isFixed=!0,this.target&&(this.targetEle="string"==typeof this.target?A(this.target):this.target,this.targetEle&&(this.targetEle.appendChild(this.element),this.isFixed=!1)),this.isFixed?(this.popupEle&&this.popupEle.classList.add(If),this.overlayEle&&this.overlayEle.classList.add(If)):(this.popupEle&&this.popupEle.classList.remove(If),this.overlayEle&&this.overlayEle.classList.remove(If))},e.prototype.setVisibility=function(t){this.setProperties({visible:t},!0),this.fab.setProperties({visible:t})},e.prototype.popupMouseLeaveHandle=function(t){var e=t.relatedTarget;!this.opensOnHover||e.classList.contains(xf)||j(e,"."+xf)||this.hidePopupEle(t)},e.prototype.mouseOverHandle=function(t){this.showPopupEle(t)},e.prototype.mouseLeaveHandle=function(t){var e=t.relatedTarget;e.classList.contains(Df)||j(e,"."+Df)||this.hidePopupEle(t)},e.prototype.popupKeyActionHandler=function(t){switch(t.action){case"esc":this.hidePopupEle(t)}},e.prototype.keyActionHandler=function(t){switch(t.preventDefault(),t.action){case"enter":case"space":this.isMenuOpen?-1!==this.focusedIndex?this.triggerItemClick(t,this.items[this.focusedIndex]):this.hidePopupEle(t):this.showPopupEle(t);break;case"esc":this.hidePopupEle(t);break;default:if(this.popupTemplate||!this.isMenuOpen)break;switch(t.action){case"end":this.focusLastElement();break;case"home":this.focusFirstElement();break;case"moveRight":"Radial"===this.mode?this.focusLeftRightElement(!1):this.focusLinearElement(!1);break;case"moveDown":"Radial"===this.mode?this.focusUpDownElement(!1):this.focusLinearElement(!1);break;case"moveLeft":"Radial"===this.mode?this.focusLeftRightElement(!0):this.focusLinearElement(!0);break;case"moveUp":"Radial"===this.mode?this.focusUpDownElement(!0):this.focusLinearElement(!0)}}},e.prototype.focusFirstElement=function(){for(var t=z("."+Of,this.popupEle),e=0;t[parseInt(e.toString(),10)].classList.contains(zf);)if(++e>t.length-1)return;this.setFocus(e,t[parseInt(e.toString(),10)])},e.prototype.focusLastElement=function(){for(var t=z("."+Of,this.popupEle),e=t.length-1;t[parseInt(e.toString(),10)].classList.contains(zf);)if(--e<0)return;this.setFocus(e,t[parseInt(e.toString(),10)])},e.prototype.focusLinearElement=function(t){(this.popupEle.classList.contains(kf)||this.popupEle.classList.contains(Bf))!==t?this.focusPrevElement():this.focusNextElement()},e.prototype.focusLeftRightElement=function(t){var e=-1!==["TopLeft","TopCenter","TopRight","MiddleLeft"].indexOf(this.position);e&&t!==this.isClock||!e&&t===this.isClock?this.focusPrevElement():this.focusNextElement()},e.prototype.focusUpDownElement=function(t){var e=-1!==["TopRight","MiddleRight","BottomRight","BottomCenter"].indexOf(this.position);e&&t!==this.isClock||!e&&t===this.isClock?this.focusPrevElement():this.focusNextElement()},e.prototype.focusPrevElement=function(){var t=z("."+Of,this.popupEle),e=this.focusedIndex;do{if(--e<0)return void this.setFocus(-1)}while(t[parseInt(e.toString(),10)].classList.contains(zf));this.setFocus(e,t[parseInt(e.toString(),10)])},e.prototype.focusNextElement=function(){var t=z("."+Of,this.popupEle),e=this.focusedIndex;do{if(++e>t.length-1)return}while(t[parseInt(e.toString(),10)].classList.contains(zf));this.setFocus(e,t[parseInt(e.toString(),10)])},e.prototype.setFocus=function(t,e){this.removeFocus(),e&&e.classList.add(Lf),this.focusedIndex=t},e.prototype.removeFocus=function(){var t=A("."+Lf,this.popupEle);t&&t.classList.remove(Lf)},e.prototype.updatePositionProperties=function(){this.hidePopupEle(),this.clearPosition(),this.validateDirection(),this.setPositionProps()},e.prototype.setPositionProps=function(){this.popupTemplate?this.setPosition():"Radial"===this.mode?(this.setRadialPosition(),this.setPosition()):(this.setLinearPosition(),this.setMaxSize())},e.prototype.validateDirection=function(){switch(this.direction){case"Up":this.actualLinDirection=-1!==vf.indexOf(this.position)?"Auto":"Up";break;case"Down":this.actualLinDirection=-1!==yf.indexOf(this.position)?"Auto":"Down";break;case"Right":this.actualLinDirection=-1!==Sf.indexOf(this.position)?"Auto":"Right";break;case"Left":this.actualLinDirection=-1!==bf.indexOf(this.position)?"Auto":"Left";break;case"Auto":default:this.actualLinDirection="Auto"}this.isVertical=!("Left"===this.actualLinDirection||"Right"===this.actualLinDirection)},e.prototype.setMaxSize=function(){var t=this.element.offsetTop,e=this.element.offsetLeft,i=(this.isFixed?window.innerHeight:this.targetEle.clientHeight)-this.element.offsetTop-this.element.offsetHeight,n=(this.isFixed?window.innerWidth:this.targetEle.clientWidth)-this.element.offsetLeft-this.element.offsetWidth,r=0,o=this.popupEle.querySelector("."+Tf);this.isVertical?(r="Up"===this.actualLinDirection||"Auto"===this.actualLinDirection&&-1===vf.indexOf(this.position)?t:i)<o.offsetHeight&&(this.popupEle.classList.add(Hf,Uf),o.style.setProperty(nv,r+"px")):(r="Right"===this.direction?n:e)<o.offsetWidth&&(this.popupEle.classList.add(Hf,Vf),o.style.setProperty(nv,r+"px"))},e.prototype.setLinearPosition=function(){var t=0,e="Down"===this.actualLinDirection||"Auto"===this.actualLinDirection&&-1!==vf.indexOf(this.position)||!this.isVertical&&-1===yf.indexOf(this.position);e?(t=this.element.offsetTop+(this.isVertical?this.element.offsetHeight:0),this.isVertical||this.popupEle.classList.add(Pf)):(t=(t=this.isFixed?window.innerHeight:this.targetEle.clientHeight)-this.element.offsetTop-(this.isVertical?0:this.element.offsetHeight),this.isVertical&&this.popupEle.classList.add(kf)),this.popupEle.classList.add(e?_f:Ff),this.popupEle.style.setProperty(Kf,t+"px"),this.setLinearHorizontalPosition()},e.prototype.setLinearHorizontalPosition=function(){"Right"===this.actualLinDirection||this.isVertical&&-1===Sf.indexOf(this.position)?(this.enableRtl?this.setRight():this.setLeft(),this.isVertical||this.popupEle.classList.add(Rf)):(this.enableRtl?this.setLeft():this.setRight(),this.popupEle.classList.add(this.isVertical?jf:Bf))},e.prototype.setLeft=function(){var t=this.element.offsetLeft+(this.isVertical?0:this.element.offsetWidth);this.popupEle.style.setProperty(Jf,t+"px"),this.popupEle.classList.add(Wf)},e.prototype.setRight=function(){var t=this.isFixed?window.innerWidth:this.targetEle.clientWidth;t=t-this.element.offsetLeft-(this.isVertical?this.element.offsetWidth:0),this.popupEle.style.setProperty(Jf,t+"px"),this.popupEle.classList.add(Yf)},e.prototype.setPosition=function(){if(-1!==["MiddleLeft","MiddleRight","MiddleCenter"].indexOf(this.position)){this.popupEle.classList.add(Qf);var t=((this.isFixed?window.innerHeight:this.targetEle.clientHeight)-this.popupEle.offsetHeight)/2;this.popupEle.style.setProperty(Kf,t+"px")}this.popupEle.classList.add(-1===yf.indexOf(this.position)?_f:Ff),this.setHorizontalPosition()},e.prototype.setHorizontalPosition=function(){if(-1!==["TopCenter","BottomCenter","MiddleCenter"].indexOf(this.position)){this.popupEle.classList.add(Xf);var t=((this.isFixed?window.innerWidth:this.targetEle.clientWidth)-this.popupEle.offsetWidth)/2;this.popupEle.style.setProperty(Jf,t+"px")}var e=-1!==Sf.indexOf(this.position);this.popupEle.classList.add(!this.enableRtl&&!e||this.enableRtl&&e?Wf:Yf)},e.prototype.setRadialPosition=function(){this.setRadialCorner();var t=this.getActualRange();this.isClock="Clockwise"===t.direction;var e=m(t.offset),i=z("."+Of,this.popupEle);this.popupEle.style.setProperty(tv,e),this.popupEle.style.setProperty(ev,i[0].offsetHeight+"px"),this.popupEle.style.setProperty(iv,i[0].offsetWidth+"px");for(var n=Math.abs(t.endAngle-t.startAngle),r=n/(360===n||0===n?i.length:i.length-1),o=0;o<i.length;o++){var s=i[parseInt(o.toString(),10)],a=this.isClock?t.startAngle+r*o:t.startAngle-r*o;a%=360,s.style.setProperty("--speeddialRadialAngle",a+"deg")}},e.prototype.setRadialCorner=function(){-1!==["TopLeft","TopCenter","MiddleLeft","MiddleCenter"].indexOf(this.position)&&this.popupEle.classList.add(this.enableRtl?Zf:qf),-1!==["TopRight","TopCenter","MiddleRight","MiddleCenter"].indexOf(this.position)&&this.popupEle.classList.add(this.enableRtl?qf:Zf),-1!==["BottomLeft","BottomCenter","MiddleLeft","MiddleCenter"].indexOf(this.position)&&this.popupEle.classList.add(this.enableRtl?Gf:$f),-1!==["BottomRight","BottomCenter","MiddleRight","MiddleCenter"].indexOf(this.position)&&this.popupEle.classList.add(this.enableRtl?$f:Gf)},e.prototype.getActualRange=function(){var t,e={offset:this.radialSettings.offset},i=this.radialSettings.startAngle,n=this.radialSettings.endAngle;switch(this.position){case"TopLeft":case"TopRight":"TopLeft"===this.position!==this.enableRtl?(t="Clockwise"===this.radialSettings.direction,this.checkAngleRange(i,n,e,t,0,90,!1)):(t="AntiClockwise"!==this.radialSettings.direction,this.checkAngleRange(i,n,e,t,90,180,!1));break;case"TopCenter":t="Clockwise"===this.radialSettings.direction,this.checkAngleRange(i,n,e,t,0,180,!1);break;case"MiddleLeft":case"MiddleRight":if("MiddleLeft"===this.position!==this.enableRtl){t="Clockwise"===this.radialSettings.direction,i=h(i)||i<0||i>360||i>90&&i<270?t?270:90:i,n=h(n)||n<0||n>360||n>90&&n<270?t?90:270:n,i=i<91?i+360:i,n=n<91?n+360:n;var r=t&&n<i||!t&&n>i;e.startAngle=r?n:i,e.endAngle=r?i:n}else t="AntiClockwise"!==this.radialSettings.direction,this.checkAngleRange(i,n,e,t,90,270,!1);break;case"MiddleCenter":t="AntiClockwise"!==this.radialSettings.direction,i=h(i)||i<0||i>360?t?0:360:i,n=h(n)||n<0||n>360?t?360:0:n,e.startAngle=!t&&i<=n?i+360:i,e.endAngle=t&&n<=i?n+360:n;break;case"BottomLeft":case"BottomRight":"BottomLeft"===this.position!==this.enableRtl?(t="Clockwise"===this.radialSettings.direction,this.checkAngleRange(i,n,e,t,270,360,!0)):(t="AntiClockwise"!==this.radialSettings.direction,this.checkAngleRange(i,n,e,t,180,270,!0));break;case"BottomCenter":t="AntiClockwise"!==this.radialSettings.direction,this.checkAngleRange(i,n,e,t,180,360,!0)}return e.direction=t?"Clockwise":"AntiClockwise",e},e.prototype.checkAngleRange=function(t,e,i,n,r,o,s){t=this.checkAngle(t,n,r,o,s),e=this.checkAngle(e,!n,r,o,s);var a=n&&e<t||!n&&e>t;i.startAngle=a?e:t,i.endAngle=a?t:e},e.prototype.checkAngle=function(t,e,i,n,r){return h(t)||t<0||t>360?e?i:n:(t=r?0===t?360:t:360===t?0:t)>=i&&t<=n?t:e?i:n},e.prototype.clearPosition=function(){this.popupEle.style.removeProperty(tv),this.popupEle.style.removeProperty(ev),this.popupEle.style.removeProperty(iv),this.popupEle.classList.remove(qf,Zf,$f,Gf),this.popupEle.classList.remove(_f,Ff,Qf),this.popupEle.classList.remove(Pf,kf),this.popupEle.style.removeProperty(Kf),this.clearHorizontalPosition(),this.clearOverflow()},e.prototype.clearHorizontalPosition=function(){this.popupEle.style.removeProperty(Jf),this.popupEle.classList.remove(Yf,Wf,Xf),this.popupEle.classList.remove(jf,Rf,Bf)},e.prototype.clearOverflow=function(){this.popupEle.classList.remove(Hf,Uf,Vf),this.popupEle.style.removeProperty(nv)},e.prototype.hidePopupEle=function(t){var e=this;if(this.popupEle&&this.isMenuOpen){var i={element:this.popupEle,event:t,cancel:!1};this.trigger("beforeClose",i,function(t){if(!t.cancel)if("None"!==e.animation.effect){var i={name:e.animation.effect+"Out",timingFunction:"easeOut"},n=e.popupTemplate?[e.popupEle.firstElementChild]:z("."+Of,e.popupEle),r=e.animation.duration/(n.length+1);i.duration=2*r;var o=function(t){var s=n[parseInt(t.toString(),10)];if(i.delay=t===n.length-1?e.animation.delay:0,i.begin=function(){t===n.length-1&&e.startHide()},i.end=function(){s.classList.add(wf),0===t&&e.endHide()},new zp(i).animate(s),0!==t){var a=t-1;setTimeout(function(){o(a)},r)}};o(n.length-1)}else{if(e.startHide(),!e.popupTemplate){z("."+Of,e.popupEle).forEach(function(t){t.classList.add(wf)})}e.endHide()}})}},e.prototype.startHide=function(){this.element.setAttribute("aria-expanded","false"),this.removeFocus(),this.isMenuOpen=!1},e.prototype.endHide=function(){this.fab.setProperties({iconCss:this.openIconCss}),this.popupEle.classList.add(wf),this.popupTemplate&&this.setVisibility(!0),this.toggleOverlay(),this.popupTemplate&&this.popupEle.removeAttribute("tabindex"),this.trigger("onClose",{element:this.popupEle})},e.prototype.showPopupEle=function(t){var e=this;if(this.popupEle&&!this.isMenuOpen){var i={element:this.popupEle,event:t,cancel:!1};this.trigger("beforeOpen",i,function(t){if(!t.cancel)if("None"!==e.animation.effect){var i={name:e.animation.effect+"In",timingFunction:"easeIn"},n=e.popupTemplate?[e.popupEle.firstElementChild]:z("."+Of,e.popupEle),r=e.animation.duration/(n.length+1);i.duration=2*r;var o=function(t){var s=n[parseInt(t.toString(),10)];if(i.delay=0===t?e.animation.delay:0,i.begin=function(){0===t&&e.startShow(),s.classList.remove(wf)},i.end=function(){t===n.length-1&&e.endShow()},new zp(i).animate(s),t!==n.length-1){var a=t+1;setTimeout(function(){o(a)},r)}};o(0)}else{if(e.startShow(),!e.popupTemplate){z("."+Of,e.popupEle).forEach(function(t){t.classList.remove(wf)})}e.endShow()}})}},e.prototype.startShow=function(){this.element.setAttribute("aria-expanded","true"),this.isMenuOpen=!0,this.toggleOverlay(),this.popupEle.classList.remove(wf),this.popupTemplate&&this.setVisibility(!1)},e.prototype.endShow=function(){this.closeIconCss&&this.fab.setProperties({iconCss:this.closeIconCss}),this.popupTemplate&&(this.popupEle.setAttribute("tabindex","1"),this.popupEle.focus()),this.trigger("onOpen",{element:this.popupEle})},e.prototype.toggleOverlay=function(){this.overlayEle&&this.overlayEle.classList[this.isMenuOpen?"remove":"add"](wf)},e.prototype.removeOverlayEle=function(){this.overlayEle&&(O(this.overlayEle),this.overlayEle=void 0)},e.prototype.updatePopupItems=function(){this.popupEle?(this.hidePopupEle(),this.clearItems(),this.createItems(),this.updatePositionProperties()):this.createPopup()},e.prototype.handleResize=function(t){this.popupEle&&(this.hidePopupEle(t),this.clearOverflow(),this.setPositionProps())},e.prototype.triggerItemClick=function(t,e){var i=t.target,n={element:i=i.classList.contains(Of)?i:j(i,"."+Of),item:e,event:t};this.trigger("clicked",n),this.hidePopupEle(t)},e.prototype.show=function(){this.showPopupEle()},e.prototype.hide=function(){this.hidePopupEle()},e.prototype.refreshPosition=function(){this.fab.refreshPosition(),this.resizeHandler()},e.prototype.resizeHandler=function(t){this.handleResize(t)},e.prototype.clearItems=function(){z("."+Of,this.popupEle).forEach(function(t){O(t)})},e.prototype.unwireEvents=function(){Ep.remove(window,"resize",this.resizeHandler),Ep.remove(document.body,"click",this.bodyClickHandler),this.opensOnHover?this.unwireFabHover():this.unwireFabClick()},e.prototype.unwireFabClick=function(){Ep.remove(this.fab.element,"click",this.fabClick)},e.prototype.unwireFabHover=function(){this.popupEle.classList.remove(Mf),Ep.remove(this.fab.element,"mouseover",this.mouseOverHandle),Ep.remove(this.element,"mouseleave",this.mouseLeaveHandle)},e.prototype.unwirePopupEvents=function(){kp&&this.removeRippleEffect(),this.removeRippleEffect=null,this.keyboardModule.destroy(),this.popupKeyboardModule.destroy(),this.keyboardModule=null,this.popupKeyboardModule=null,Ep.remove(this.popupEle,"click",this.popupClick),Ep.remove(this.popupEle,"mouseleave",this.popupMouseLeaveHandle)},e.prototype.destroy=function(){var e=this;t.prototype.destroy.call(this),this.unwireEvents(),["aria-expanded","aria-haspopup","aria-controls"].forEach(function(t){e.element.removeAttribute(t)}),this.popupEle&&(this.unwirePopupEvents(),O(this.popupEle),this.popupEle=void 0),this.removeOverlayEle(),this.fab.destroy(),this.fab=void 0},e.prototype.onPropertyChanged=function(t,e){for(var i=["content","cssClass","disabled","enablePersistence","enableRtl","iconPosition","position","target","template","title","visible"],n=l({},t),r=0,s=Object.keys(n);r<s.length;r++){var a=s[r];i.indexOf(a)<0&&o(n,a)}this.fab.setProperties(n);for(var h=0,c=Object.keys(t);h<c.length;h++){switch(a=c[h]){case"cssClass":if(!this.popupEle)break;e.cssClass&&x(this.overlayEle?[this.popupEle,this.overlayEle]:[this.popupEle],e.cssClass.split(" ")),t.cssClass&&I(this.overlayEle?[this.popupEle,this.overlayEle]:[this.popupEle],t.cssClass.split(" "));break;case"visible":case"disabled":this.hide();break;case"enableRtl":if(!this.popupEle)break;this.setRTL();break;case"openIconCss":this.isMenuOpen||this.fab.setProperties({iconCss:this.openIconCss});break;case"closeIconCss":this.isMenuOpen&&this.fab.setProperties({iconCss:this.closeIconCss});break;case"position":if(!this.popupEle)break;this.updatePositionProperties();break;case"direction":if(!this.popupEle||this.popupTemplate)break;this.updatePositionProperties();break;case"popupTemplate":this.updatePopupTemplate();break;case"target":if(this.hidePopupEle(),this.checkTarget(),this.overlayEle&&this.element.insertAdjacentElement("beforebegin",this.overlayEle),!this.popupEle)break;this.element.insertAdjacentElement("afterend",this.popupEle),this.updatePositionProperties();break;case"items":case"itemTemplate":if(this.popupTemplate)break;this.updatePopupItems();break;case"modal":t.modal?this.createOverlay():this.removeOverlayEle();break;case"mode":if(!this.popupEle||this.popupTemplate)break;this.popupEle.classList.remove(Cf,Nf),this.popupEle.classList.add("Radial"===this.mode?Cf:Nf),this.updatePositionProperties();break;case"radialSettings":this.popupEle&&"Radial"===this.mode&&!this.popupTemplate&&this.setRadialPosition();break;case"opensOnHover":this.opensOnHover?(this.unwireFabClick(),this.wireFabHover()):(this.unwireFabHover(),this.wireFabClick())}}},ff([Q({},vv)],e.prototype,"animation",void 0),ff([W("")],e.prototype,"content",void 0),ff([W("")],e.prototype,"closeIconCss",void 0),ff([W("")],e.prototype,"cssClass",void 0),ff([W("Auto")],e.prototype,"direction",void 0),ff([W(!1)],e.prototype,"disabled",void 0),ff([W("Left")],e.prototype,"iconPosition",void 0),ff([q([],bv)],e.prototype,"items",void 0),ff([W("")],e.prototype,"itemTemplate",void 0),ff([W("Linear")],e.prototype,"mode",void 0),ff([W("")],e.prototype,"openIconCss",void 0),ff([W(!1)],e.prototype,"opensOnHover",void 0),ff([W("BottomRight")],e.prototype,"position",void 0),ff([W(!1)],e.prototype,"modal",void 0),ff([W("")],e.prototype,"popupTemplate",void 0),ff([Q({},yv)],e.prototype,"radialSettings",void 0),ff([W("")],e.prototype,"target",void 0),ff([W(!0)],e.prototype,"visible",void 0),ff([Z()],e.prototype,"beforeClose",void 0),ff([Z()],e.prototype,"beforeItemRender",void 0),ff([Z()],e.prototype,"beforeOpen",void 0),ff([Z()],e.prototype,"created",void 0),ff([Z()],e.prototype,"clicked",void 0),ff([Z()],e.prototype,"onClose",void 0),ff([Z()],e.prototype,"onOpen",void 0),e=ff([$],e)}(Kp),["north-west","north","north-east","west","east","south-west","south","south-east"]),wv="e-resize-handle",Iv="e-focused-handle",xv="e-dlg-resizable",Mv=["e-restrict-left"],Cv="e-resize-viewport",Nv=["north","west","east","south"],Ev=0,Dv=0,Tv=0,Ov=0,Lv=0,Av=0,zv=null,kv=null,jv=null,Pv=!0,Rv=0,Bv=!0,Hv=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Uv=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Vv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Hv(e,t),Uv([W(!0)],e.prototype,"isFlat",void 0),Uv([W()],e.prototype,"buttonModel",void 0),Uv([W("Button")],e.prototype,"type",void 0),Uv([Z()],e.prototype,"click",void 0),e}(Rp),_v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Hv(e,t),Uv([W("Fade")],e.prototype,"effect",void 0),Uv([W(400)],e.prototype,"duration",void 0),Uv([W(0)],e.prototype,"delay",void 0),e}(Rp),Fv="e-dialog",Yv="e-dlg-header-content",Wv="e-footer-content",Qv="e-dlg-modal",Xv="e-icon-dlg-close",qv="e-dlg-target",Gv="e-scroll-disabled",Zv="e-dlg-fullscreen",$v="e-dlg-closeicon-btn",Kv="Information",Jv="e-scroll-disabled",ty="e-alert-dialog",ey="e-confirm-dialog",iy="e-dlg-resizable",ny="e-restrict-left",ry="e-resize-viewport",oy="user action",sy=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.needsID=!0,n}return Hv(e,t),e.prototype.render=function(){this.initialize(),this.initRender(),this.wireEvents(),"100%"===this.width&&(this.element.style.width=""),""!==this.minHeight&&(this.element.style.minHeight=m(this.minHeight)),this.enableResize&&(this.setResize(),"None"===this.animationSettings.effect&&this.getMinHeight()),this.renderComplete()},e.prototype.initializeValue=function(){this.dlgClosedBy=oy},e.prototype.preRender=function(){var t=this;this.initializeValue(),this.headerContent=null,this.allowMaxHeight=!0,this.preventVisibility=!0,this.clonedEle=this.element.cloneNode(!0),this.closeIconClickEventHandler=function(e){t.dlgClosedBy="close icon",t.hide(e)},this.dlgOverlayClickEventHandler=function(e){t.dlgClosedBy="overlayClick",e.preventFocus=!1,t.trigger("overlayClick",e,function(e){e.preventFocus||t.focusContent(),t.dlgClosedBy=oy})};if(this.l10n=new uu("dialog",{close:"Close"},this.locale),this.checkPositionData(),h(this.target)){var e=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.target=document.body,this.isProtectedOnChange=e}},e.prototype.updatePersistData=function(){this.enablePersistence&&this.setProperties({width:parseFloat(this.element.style.width),height:parseFloat(this.element.style.height),position:{X:parseFloat(this.dragObj.element.style.left),Y:parseFloat(this.dragObj.element.style.top)}},!0)},e.prototype.isNumberValue=function(t){return/^[-+]?\d*\.?\d+$/.test(t)},e.prototype.checkPositionData=function(){if(!h(this.position)){if(!h(this.position.X)&&"number"!=typeof this.position.X){if(this.isNumberValue(this.position.X)){var t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.X=parseFloat(this.position.X),this.isProtectedOnChange=t}}if(!h(this.position.Y)&&"number"!=typeof this.position.Y){if(this.isNumberValue(this.position.Y)){t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.Y=parseFloat(this.position.Y),this.isProtectedOnChange=t}}}},e.prototype.getEle=function(t,e){for(var i=void 0,n=0;n<t.length;n++)if(t[n].classList.contains(e)){i=t[n];break}return i},e.prototype.getMinHeight=function(){var t="0px",e="0px";h(this.element.querySelector("."+Yv))||(t=getComputedStyle(this.headerContent).height);var i=this.getEle(this.element.children,Wv);h(i)||(e=getComputedStyle(i).height);var n=parseInt(t.slice(0,t.indexOf("p")),10),r=parseInt(e.slice(0,e.indexOf("p")),10);return function(t){hv=t}(n+30+(isNaN(r)?0:r)),n+30+r},e.prototype.onResizeStart=function(t,e){return e.trigger("resizeStart",t),t.cancel},e.prototype.onResizing=function(t,e){e.trigger("resizing",t)},e.prototype.onResizeComplete=function(t,e){e.trigger("resizeStop",t),this.updatePersistData()},e.prototype.setResize=function(){if(this.enableResize){if(this.isBlazorServerRender()&&!h(this.element.querySelector(".e-icons.e-resize-handle")))return;this.element.classList.add(iy);for(var t=getComputedStyle(this.element).minHeight,e=getComputedStyle(this.element).minWidth,i="",n=0;n<this.resizeHandles.length;n++){if("All"===this.resizeHandles[n]){i="south north east west north-east north-west south-east south-west";break}var r="";switch(this.resizeHandles[n].toString()){case"SouthEast":r="south-east";break;case"SouthWest":r="south-west";break;case"NorthEast":r="north-east";break;case"NorthWest":r="north-west";break;default:r=this.resizeHandles[n].toString()}i+=r.toLocaleLowerCase()+" "}this.enableRtl&&"south-east"===i.trim()?i="south-west":this.enableRtl&&"south-west"===i.trim()&&(i="south-east"),this.isModal&&this.enableRtl?this.element.classList.add(ny):this.isModal&&this.target===document.body&&this.element.classList.add(ry),bi({element:this.element,direction:i,minHeight:parseInt(t.slice(0,e.indexOf("p")),10),maxHeight:this.targetEle.clientHeight,minWidth:parseInt(e.slice(0,e.indexOf("p")),10),maxWidth:this.targetEle.clientWidth,boundary:this.target===document.body?null:this.targetEle,resizeBegin:this.onResizeStart.bind(this),resizeComplete:this.onResizeComplete.bind(this),resizing:this.onResizing.bind(this),proxy:this}),this.wireWindowResizeEvent()}else zi(),this.unWireWindowResizeEvent(),this.isModal?this.element.classList.remove(ny):this.element.classList.remove(ry),this.element.classList.remove(iy)},e.prototype.getFocusElement=function(t){var e=t.querySelectorAll('input,select,textarea,button:enabled,a,[contenteditable="true"],[tabindex]');return{element:e[e.length-1]}},e.prototype.keyDown=function(t){var e=this;if(9===t.keyCode&&this.isModal){var i=void 0;h(this.btnObj)||(i=this.btnObj[this.btnObj.length-1]),h(this.btnObj)&&!h(this.ftrTemplateContent)&&(i=this.getFocusElement(this.ftrTemplateContent)),h(this.btnObj)&&h(this.ftrTemplateContent)&&!h(this.contentEle)&&(i=this.getFocusElement(this.contentEle)),h(i)||document.activeElement!==i.element||t.shiftKey||(t.preventDefault(),this.focusableElements(this.element).focus()),document.activeElement===this.focusableElements(this.element)&&t.shiftKey&&(t.preventDefault(),h(i)||i.element.focus())}var n=document.activeElement,r=["input","textarea"].indexOf(n.tagName.toLowerCase())>-1,o=!1;if(r||(o=n.hasAttribute("contenteditable")&&"true"===n.getAttribute("contenteditable")),27===t.keyCode&&this.closeOnEscape){this.dlgClosedBy="escape";var s=document.querySelector(".e-popup-open:not(.e-dialog)");(h(s)||s.classList.contains("e-toolbar-pop"))&&this.hide(t)}if(13===t.keyCode&&!t.ctrlKey&&"textarea"!==n.tagName.toLowerCase()&&r&&!h(this.primaryButtonEle)||13===t.keyCode&&t.ctrlKey&&("textarea"===n.tagName.toLowerCase()||o)&&!h(this.primaryButtonEle)){var a;this.buttons.some(function(t,e){a=e;var i=t.buttonModel;return!h(i)&&!0===i.isPrimary})&&"function"==typeof this.buttons[a].click&&setTimeout(function(){e.buttons[a].click.call(e,t)})}},e.prototype.initialize=function(){h(this.target)||(this.targetEle="string"==typeof this.target?document.querySelector(this.target):this.target),this.isBlazorServerRender()||I([this.element],Fv),Np.isDevice&&I([this.element],"e-device"),this.isBlazorServerRender()||this.setCSSClass(),this.setMaxHeight()},e.prototype.initRender=function(){var t=this;if(this.initialRender=!0,this.isBlazorServerRender()||L(this.element,{role:"dialog"}),1e3===this.zIndex?(this.setzIndex(this.element,!1),this.calculatezIndex=!0):this.calculatezIndex=!1,this.isBlazorServerRender()&&h(this.headerContent)&&(this.headerContent=this.element.getElementsByClassName("e-dlg-header-content")[0]),this.isBlazorServerRender()&&h(this.contentEle)&&(this.contentEle=this.element.querySelector("#"+this.element.id+"_dialog-content")),this.isBlazorServerRender()||(this.setTargetContent(),""===this.header||h(this.header)||this.setHeader(),this.renderCloseIcon(),this.setContent(),""===this.footerTemplate||h(this.footerTemplate)?h(this.buttons[0].buttonModel)||this.setButton():this.setFooterTemplate()),this.isBlazorServerRender()&&(h(this.buttons[0].buttonModel)||""!==this.footerTemplate||this.setButton()),this.allowDragging&&!h(this.headerContent)&&this.setAllowDragging(),this.isBlazorServerRender()||(L(this.element,{"aria-modal":this.isModal?"true":"false"}),this.isModal&&this.setIsModal()),this.isBlazorServerRender()&&h(this.dlgContainer)){this.dlgContainer=this.element.parentElement;for(var e=0,i=this.dlgContainer.children;e<i.length;e++)i[e].classList.contains("e-dlg-overlay")&&(this.dlgOverlay=i[e])}if(!0!==this.element.classList.contains(ty)&&!0!==this.element.classList.contains(ey)&&!h(this.element.parentElement)){var n=this.isModal?this.dlgContainer.parentElement:this.element.parentElement;this.refElement=this.createElement("div",{className:"e-dlg-ref-element"}),n.insertBefore(this.refElement,this.isModal?this.dlgContainer:this.element)}h(this.targetEle)||(this.isModal?this.targetEle.appendChild(this.dlgContainer):this.targetEle.appendChild(this.element)),this.popupObj=new Am(this.element,{height:this.height,width:this.width,zIndex:this.zIndex,relateTo:this.target,actionOnScroll:"none",enableRtl:this.enableRtl,open:function(e){var i={container:t.isModal?t.dlgContainer:t.element,element:t.element,target:t.target,preventFocus:!1};t.enableResize&&t.resetResizeIcon(),t.trigger("open",i,function(e){e.preventFocus||t.focusContent()})},close:function(e){t.isModal&&I([t.dlgOverlay],"e-fade"),t.unBindEvent(t.element),t.isModal&&(t.dlgContainer.style.display="none"),t.trigger("close",t.closeArgs);var i=document.activeElement;h(i)||h(i.blur)||i.blur(),h(t.storeActiveElement)||h(t.storeActiveElement.focus)||t.storeActiveElement.focus()}}),this.positionChange(),this.setEnableRTL(),this.isBlazorServerRender()||(I([this.element],"e-popup-close"),this.isModal&&this.setOverlayZindex()),this.visible?this.show():this.isModal&&(this.dlgOverlay.style.display="none"),this.initialRender=!1},e.prototype.resetResizeIcon=function(){var t=this.getMinHeight();if(this.targetEle.offsetHeight<t){var e=this.enableRtl?"e-south-west":"e-south-east",i=this.element.querySelector("."+e);h(i)||(i.style.bottom="-"+t.toString()+"px")}},e.prototype.setOverlayZindex=function(t){var e;e=h(t)?parseInt(this.element.style.zIndex,10)?parseInt(this.element.style.zIndex,10):this.zIndex:t,this.dlgOverlay.style.zIndex=(e-1).toString(),this.dlgContainer.style.zIndex=e.toString()},e.prototype.positionChange=function(){this.isModal&&(isNaN(parseFloat(this.position.X))||isNaN(parseFloat(this.position.Y)))?!isNaN(parseFloat(this.position.X))&&isNaN(parseFloat(this.position.Y))||isNaN(parseFloat(this.position.X))&&!isNaN(parseFloat(this.position.Y))?this.setPopupPosition():(this.element.style.top="0px",this.element.style.left="0px",this.dlgContainer.classList.add("e-dlg-"+this.position.X+"-"+this.position.Y)):this.setPopupPosition()},e.prototype.setPopupPosition=function(){this.popupObj.setProperties({position:{X:this.position.X,Y:this.position.Y}})},e.prototype.setAllowDragging=function(){var t=this;this.element.classList.contains("e-draggable")||(this.dragObj=new ou(this.element,{clone:!1,isDragScroll:!0,abort:".e-dlg-closeicon-btn",handle:".e-dlg-header-content",dragStart:function(e){t.trigger("dragStart",e,function(t){f()&&t.bindEvents(e.dragElement)})},dragStop:function(e){t.isModal&&(h(t.position)||t.dlgContainer.classList.remove("e-dlg-"+t.position.X+"-"+t.position.Y),t.element.style.position="relative"),t.trigger("dragStop",e),t.element.classList.remove(ny),t.updatePersistData()},drag:function(e){t.trigger("drag",e)}}),h(this.targetEle)||(this.dragObj.dragArea=this.targetEle))},e.prototype.setButton=function(){if(!this.isBlazorServerRender()){this.buttonContent=[],this.btnObj=[];for(var t=0;t<this.buttons.length;t++){var e=h(this.buttons[t].type)?"button":this.buttons[t].type.toLowerCase(),i=this.createElement("button",{className:this.cssClass,attrs:{type:e}});this.buttonContent.push(i.outerHTML)}this.setFooterTemplate()}t=0;for(var n,r=this.element.children;t<r.length;t++)r[t].classList.contains(Wv)&&(n=r[t].querySelectorAll("button"));for(t=0;t<this.buttons.length;t++)this.isBlazorServerRender()||(this.btnObj[t]=new Um(this.buttons[t].buttonModel)),this.isBlazorServerRender()&&(this.ftrTemplateContent=this.element.querySelector("."+Wv)),!h(this.ftrTemplateContent)&&n.length>0&&("function"==typeof this.buttons[t].click&&Ep.add(n[t],"click",this.buttons[t].click,this),"object"==typeof this.buttons[t].click&&Ep.add(n[t],"click",this.buttonClickHandler.bind(this,t),this)),this.isBlazorServerRender()||h(this.ftrTemplateContent)||(this.btnObj[t].appendTo(this.ftrTemplateContent.children[t]),this.buttons[t].isFlat&&this.btnObj[t].element.classList.add("e-flat"),this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0])},e.prototype.buttonClickHandler=function(t){this.trigger("buttons["+t+"].click",{})},e.prototype.setContent=function(){this.contentEle=this.createElement("div",{className:"e-dlg-content",id:this.element.id+"_dialog-content"}),this.innerContentElement?this.contentEle.appendChild(this.innerContentElement):(h(this.content)||""===this.content)&&this.initialRender||(("string"!=typeof this.content||f())&&this.content instanceof HTMLElement?this.contentEle.appendChild(this.content):this.setTemplate(this.content,this.contentEle,"content")),h(this.headerContent)?this.element.insertBefore(this.contentEle,this.element.children[0]):this.element.insertBefore(this.contentEle,this.element.children[1]),"auto"===this.height&&(this.isBlazorServerRender()||!Np.isIE||""!==this.element.style.width||h(this.width)||(this.element.style.width=m(this.width)),this.setMaxHeight())},e.prototype.setTemplate=function(t,e,i){var n,r;r=e.classList.contains("e-dlg-header")?this.element.id+"header":e.classList.contains(Wv)?this.element.id+"footerTemplate":this.element.id+"content";var o;h(t.outerHTML)?("string"==typeof t||"string"!=typeof t||f()&&!this.isStringTemplate)&&("string"==typeof t&&(t=this.sanitizeHelper(t)),this.isVue||"string"!=typeof t?(n=gt(t),o=t):e.innerHTML=t):e.appendChild(t);var s=[];if(!h(n)){for(var a=0,l=n({},this,i,r,!(f()&&!this.isStringTemplate&&0===o.indexOf("<div>Blazor"))||this.isStringTemplate);a<l.length;a++){var c=l[a];s.push(c)}E([].slice.call(s),e)}},e.prototype.sanitizeHelper=function(t){if(this.enableHtmlSanitizer){var e=Yu.beforeSanitize();l(e,e,{cancel:!1,helper:null}),this.trigger("beforeSanitizeHtml",e),e.cancel&&!h(e.helper)?t=e.helper(t):e.cancel||(t=Yu.serializeValue(e,t))}return t},e.prototype.setMaxHeight=function(){if(this.allowMaxHeight){var t=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=!h(this.target)&&this.targetEle.offsetHeight<window.innerHeight?this.targetEle.offsetHeight-20+"px":window.innerHeight-20+"px",this.element.style.display=t,Np.isIE&&"auto"===this.height&&!h(this.contentEle)&&this.element.offsetHeight<this.contentEle.offsetHeight&&(this.element.style.height="inherit")}},e.prototype.setEnableRTL=function(){this.isBlazorServerRender()||(this.enableRtl?I([this.element],"e-rtl"):x([this.element],"e-rtl")),h(this.element.querySelector(".e-resize-handle"))||(zi(),this.setResize())},e.prototype.setTargetContent=function(){var t=this;if(h(this.content)||""===this.content){var e=""!==this.element.innerHTML.replace(/\s|<(\/?|\/?)(!--!--)>/g,"");(this.element.children.length>0||e)&&(this.innerContentElement=document.createDocumentFragment(),[].slice.call(this.element.childNodes).forEach(function(e){8!==e.nodeType&&t.innerContentElement.appendChild(e)}))}},e.prototype.setHeader=function(){this.headerEle?this.headerEle.innerHTML="":this.headerEle=this.createElement("div",{id:this.element.id+"_title",className:"e-dlg-header"}),this.createHeaderContent(),this.headerContent.appendChild(this.headerEle),this.setTemplate(this.header,this.headerEle,"header"),L(this.element,{"aria-labelledby":this.element.id+"_title"}),this.element.insertBefore(this.headerContent,this.element.children[0]),this.allowDragging&&!h(this.headerContent)&&this.setAllowDragging()},e.prototype.setFooterTemplate=function(){this.ftrTemplateContent?this.ftrTemplateContent.innerHTML="":this.ftrTemplateContent=this.createElement("div",{className:Wv}),""===this.footerTemplate||h(this.footerTemplate)?this.ftrTemplateContent.innerHTML=this.buttonContent.join(""):this.setTemplate(this.footerTemplate,this.ftrTemplateContent,"footerTemplate"),this.element.appendChild(this.ftrTemplateContent)},e.prototype.createHeaderContent=function(){h(this.headerContent)&&(this.headerContent=this.createElement("div",{id:this.element.id+"_dialog-header",className:Yv}))},e.prototype.renderCloseIcon=function(){this.showCloseIcon&&(this.closeIcon=this.createElement("button",{className:$v,attrs:{type:"button"}}),this.closeIconBtnObj=new Um({cssClass:"e-flat",iconCss:Xv+" e-icons"}),this.closeIconTitle(),h(this.headerContent)?(this.createHeaderContent(),N([this.closeIcon],this.headerContent),this.element.insertBefore(this.headerContent,this.element.children[0])):N([this.closeIcon],this.headerContent),this.closeIconBtnObj.appendTo(this.closeIcon))},e.prototype.closeIconTitle=function(){this.l10n.setLocale(this.locale);var t=this.l10n.getConstant("close");this.closeIcon.setAttribute("title",t),this.closeIcon.setAttribute("aria-label",t)},e.prototype.setCSSClass=function(t){t&&(x([this.element],t.split(" ")),this.isModal&&!h(this.dlgContainer)&&x([this.dlgContainer],t.split(" "))),this.cssClass&&(I([this.element],this.cssClass.split(" ")),this.isModal&&!h(this.dlgContainer)&&I([this.dlgContainer],this.cssClass.split(" ")))},e.prototype.setIsModal=function(){this.dlgContainer=this.createElement("div",{className:"e-dlg-container"}),this.setCSSClass(),this.element.classList.remove("e-popup-open"),this.element.parentNode.insertBefore(this.dlgContainer,this.element),this.dlgContainer.appendChild(this.element),I([this.element],Qv),this.dlgOverlay=this.createElement("div",{className:"e-dlg-overlay"}),this.dlgOverlay.style.zIndex=(this.zIndex-1).toString(),this.dlgContainer.appendChild(this.dlgOverlay)},e.prototype.getValidFocusNode=function(t){for(var e,i=0;i<t.length;i++){if(((e=t[i]).clientHeight>0||"a"===e.tagName.toLowerCase()&&e.hasAttribute("href"))&&e.tabIndex>-1&&!e.disabled&&!this.disableElement(e,'[disabled],[aria-disabled="true"],[type="hidden"]'))return e;e=null}return e},e.prototype.focusableElements=function(t){if(!h(t)){var e=t.querySelectorAll('input,select,textarea,button,a,[contenteditable="true"],[tabindex]');return this.getValidFocusNode(e)}return null},e.prototype.getAutoFocusNode=function(t){var e=t.querySelector("."+$v),i=t.querySelectorAll("[autofocus]"),n=this.getValidFocusNode(i);if(f()&&(this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0]),h(n)){if(n=this.focusableElements(this.contentEle),!h(n))return e=n;if(!h(this.primaryButtonEle))return this.element.querySelector(".e-primary")}else e=n;return e},e.prototype.disableElement=function(t,e){var i=t?t.matches||t.webkitMatchesSelector||t.msGetRegionContent:null;if(i)for(;t;t=t.parentNode)if(t instanceof Element&&i.call(t,e))return t;return null},e.prototype.focusContent=function(){var t=this.getAutoFocusNode(this.element),e=h(t)?this.element:t,i=Np.userAgent;(i.indexOf("MSIE ")>0||i.indexOf("Trident/")>0)&&this.element.focus(),e.focus(),this.unBindEvent(this.element),this.bindEvent(this.element)},e.prototype.bindEvent=function(t){Ep.add(t,"keydown",this.keyDown,this)},e.prototype.unBindEvent=function(t){Ep.remove(t,"keydown",this.keyDown)},e.prototype.updateSanitizeContent=function(){this.isBlazorServerRender()||(this.contentEle.innerHTML=this.sanitizeHelper(this.content))},e.prototype.isBlazorServerRender=function(){return f()&&this.isServerRendered},e.prototype.getModuleName=function(){return"dialog"},e.prototype.onPropertyChanged=function(t,e){if(this.element.classList.contains(Fv))for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"content":h(this.content)||""===this.content?h(this.contentEle)||(T(this.contentEle),this.contentEle=null):(this.isBlazorServerRender()&&(this.contentEle=this.element.querySelector(".e-dlg-content")),h(this.contentEle)||"dialog"===this.contentEle.getAttribute("role")?this.isBlazorServerRender()&&!h(this.element.querySelector(".e-dlg-content"))||this.setContent():(this.isBlazorServerRender()||(this.contentEle.innerHTML=""),"function"==typeof this.content?(this.clearTemplate(["content"]),T(this.contentEle),this.contentEle=null,this.setContent()):"string"==typeof this.content?this.isBlazorServerRender()&&""===this.contentEle.innerText?this.contentEle.insertAdjacentHTML("beforeend",this.sanitizeHelper(this.content)):this.updateSanitizeContent():this.contentEle.appendChild(this.content),this.setMaxHeight()));break;case"header":""===this.header||h(this.header)?this.headerEle&&(T(this.headerEle),this.headerEle=null):this.isBlazorServerRender()&&!h(this.element.querySelector(".e-dlg-header-content"))||this.setHeader();break;case"footerTemplate":if(""===this.footerTemplate||h(this.footerTemplate)){if(!this.ftrTemplateContent)return;T(this.ftrTemplateContent),this.ftrTemplateContent=null,this.buttons=[{}]}else this.isBlazorServerRender()&&!h(this.element.querySelector(".e-footer-content"))||this.setFooterTemplate(),this.buttons=[{}];break;case"showCloseIcon":this.element.getElementsByClassName(Xv).length>0?this.showCloseIcon||""!==this.header&&!h(this.header)?this.showCloseIcon?this.isBlazorServerRender()&&this.wireEvents():T(this.closeIcon):(T(this.headerContent),this.headerContent=null):(this.isBlazorServerRender()||this.renderCloseIcon(),this.wireEvents());break;case"locale":this.showCloseIcon&&this.closeIconTitle();break;case"visible":this.visible?this.show():this.hide();break;case"isModal":this.updateIsModal();break;case"height":P(this.element,{height:m(t.height)}),this.updatePersistData();break;case"width":P(this.element,{width:m(t.width)}),this.updatePersistData();break;case"zIndex":this.popupObj.zIndex=this.zIndex,this.isModal&&this.setOverlayZindex(this.zIndex),this.element.style.zIndex!==this.zIndex.toString()&&(this.calculatezIndex=!1);break;case"cssClass":this.setCSSClass(e.cssClass);break;case"buttons":var r=this.buttons.length;h(this.ftrTemplateContent)||this.isBlazorServerRender()||(T(this.ftrTemplateContent),this.ftrTemplateContent=null);for(var o=0;o<r;o++)h(this.buttons[o].buttonModel)||(this.footerTemplate="",this.setButton());break;case"allowDragging":this.allowDragging&&!h(this.headerContent)?this.setAllowDragging():this.dragObj.destroy();break;case"target":this.setTarget(t.target);break;case"position":if(this.checkPositionData(),this.isModal){var s=h(e.position.X)?this.position.X:e.position.X,a=h(e.position.Y)?this.position.Y:e.position.Y;this.dlgContainer.classList.contains("e-dlg-"+s+"-"+a)&&this.dlgContainer.classList.remove("e-dlg-"+s+"-"+a)}this.positionChange(),this.updatePersistData();break;case"enableRtl":this.setEnableRTL();break;case"enableResize":this.setResize();break;case"minHeight":""!==this.minHeight&&(this.element.style.minHeight=m(this.minHeight))}}},e.prototype.setTarget=function(t){this.popupObj.relateTo=t,this.target=t,this.targetEle="string"==typeof this.target?document.querySelector(this.target):this.target,this.dragObj&&(this.dragObj.dragArea=this.targetEle),this.setMaxHeight(),this.isModal&&this.updateIsModal(),this.enableResize&&this.setResize()},e.prototype.updateIsModal=function(){if(this.element.setAttribute("aria-modal",this.isModal?"true":"false"),this.isModal)h(this.dlgOverlay)&&(this.setIsModal(),this.element.style.top="0px",this.element.style.left="0px",h(this.targetEle)||this.targetEle.appendChild(this.dlgContainer));else{for(x([this.element],Qv),x([document.body],[qv,Gv]),T(this.dlgOverlay);this.dlgContainer.firstChild;)this.dlgContainer.parentElement.insertBefore(this.dlgContainer.firstChild,this.dlgContainer);this.dlgContainer.parentElement.removeChild(this.dlgContainer)}this.visible&&this.show(),this.positionChange(),this.isModal&&this.dlgOverlay&&Ep.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)},e.prototype.setzIndex=function(t,e){var i=this.isProtectedOnChange;this.isProtectedOnChange=!0;var n=ui(t);this.zIndex=n>this.zIndex?n:this.zIndex,this.isProtectedOnChange=i,e&&(this.popupObj.zIndex=this.zIndex)},e.prototype.windowResizeHandler=function(){!function(t){pv=t}(this.targetEle.clientWidth),function(t){cv=t}(this.targetEle.clientHeight),this.setMaxHeight()},e.prototype.getPersistData=function(){return this.addOnPersist(["width","height","position"])},e.prototype.destroy=function(){if(!this.isDestroyed){var e=["e-rtl",Qv,iy,ny,Zv,"e-device"],i=["role","aria-modal","aria-labelledby","aria-describedby","aria-grabbed","tabindex","style"];if(x([this.targetEle],[qv,Gv]),!h(this.element)&&this.element.classList.contains(Zv)&&x([document.body],[qv,Gv]),this.isModal&&x([h(this.targetEle)?document.body:this.targetEle],Gv),this.unWireEvents(),!h(this.btnObj))for(var n=0;n<this.btnObj.length;n++)this.btnObj[n].destroy();if(h(this.closeIconBtnObj)||this.closeIconBtnObj.destroy(),h(this.dragObj)||this.dragObj.destroy(),!h(this.popupObj.element)&&this.popupObj.element.classList.contains("e-popup")&&this.popupObj.destroy(),x([this.element],e),h(this.cssClass)||""===this.cssClass||x([this.element],this.cssClass.split(" ")),h(this.refElement)||h(this.refElement.parentElement)||(this.refElement.parentElement.insertBefore(this.isModal?this.dlgContainer:this.element,this.refElement),T(this.refElement),this.refElement=void 0),this.isModal&&!this.isBlazorServerRender()&&(T(this.dlgOverlay),this.dlgContainer.parentNode.insertBefore(this.element,this.dlgContainer),T(this.dlgContainer)),this.isBlazorServerRender()||(this.element.innerHTML=this.clonedEle.innerHTML),this.isBlazorServerRender()&&!h(this.element.children))for(n=0;n<=this.element.children.length;n++)n-=n,T(this.element.children[n]);for(n=0;n<i.length;n++)this.element.removeAttribute(i[n]);this.isBlazorServerRender()?this.isDestroyed=!0:t.prototype.destroy.call(this),this.isReact&&this.clearTemplate()}},e.prototype.wireWindowResizeEvent=function(){window.addEventListener("resize",this.windowResizeHandler.bind(this))},e.prototype.unWireWindowResizeEvent=function(){window.removeEventListener("resize",this.windowResizeHandler.bind(this))},e.prototype.wireEvents=function(){this.isBlazorServerRender()&&this.showCloseIcon&&(this.closeIcon=this.element.getElementsByClassName("e-dlg-closeicon-btn")[0]),this.showCloseIcon&&Ep.add(this.closeIcon,"click",this.closeIconClickEventHandler,this),this.isModal&&this.dlgOverlay&&Ep.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)},e.prototype.unWireEvents=function(){if(this.showCloseIcon&&Ep.remove(this.closeIcon,"click",this.closeIconClickEventHandler),this.isModal&&Ep.remove(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler),this.buttons.length>0&&!h(this.buttons[0].buttonModel)&&""===this.footerTemplate)for(var t=0;t<this.buttons.length;t++)"function"==typeof this.buttons[t].click&&Ep.remove(this.ftrTemplateContent.children[t],"click",this.buttons[t].click)},e.prototype.refreshPosition=function(){this.popupObj.refreshPosition()},e.prototype.getDimension=function(){return{width:this.element.offsetWidth,height:this.element.offsetHeight}},e.prototype.show=function(t){var e=this;if(this.element.classList.contains(Fv)){if(!this.element.classList.contains("e-popup-open")||!h(t)){h(t)||this.fullScreen(t);var i=f()?{cancel:!1,element:this.element,container:this.isModal?this.dlgContainer:this.element,maxHeight:this.element.style.maxHeight}:{cancel:!1,element:this.element,container:this.isModal?this.dlgContainer:this.element,target:this.target,maxHeight:this.element.style.maxHeight};this.trigger("beforeOpen",i,function(t){if(!t.cancel){e.element.style.maxHeight!==i.maxHeight&&(e.allowMaxHeight=!1,e.element.style.maxHeight=i.maxHeight),e.storeActiveElement=document.activeElement,e.element.tabIndex=-1,e.isModal&&!h(e.dlgOverlay)&&(e.dlgOverlay.style.display="block",e.dlgContainer.style.display="flex",x([e.dlgOverlay],"e-fade"),h(e.targetEle)?I([document.body],[qv,Gv]):(e.targetEle===document.body?e.dlgContainer.style.position="fixed":e.dlgContainer.style.position="absolute",e.dlgOverlay.style.position="absolute",e.element.style.position="relative",I([e.targetEle],[qv,Gv])));var n={name:e.animationSettings.effect+"In",duration:e.animationSettings.duration,delay:e.animationSettings.delay},r=e.isModal?e.element.parentElement:e.element;e.calculatezIndex&&(e.setzIndex(r,!0),P(e.element,{zIndex:e.zIndex}),e.isModal&&e.setOverlayZindex(e.zIndex)),"None"===e.animationSettings.effect?e.popupObj.show():e.popupObj.show(n),e.dialogOpen=!0;var o=e.isProtectedOnChange;e.isProtectedOnChange=!0,e.visible=!0,e.preventVisibility=!0,e.isProtectedOnChange=o}})}this.isReact&&this.renderReactTemplates()}},e.prototype.hide=function(t){var e=this;if(this.element.classList.contains(Fv)&&this.preventVisibility){var i=f()?{cancel:!1,isInteracted:!!t,element:this.element,container:this.isModal?this.dlgContainer:this.element,event:t}:{cancel:!1,isInteracted:!!t,element:this.element,target:this.target,container:this.isModal?this.dlgContainer:this.element,event:t,closedBy:this.dlgClosedBy};this.closeArgs=i,this.trigger("beforeClose",i,function(t){if(!t.cancel){e.isModal&&(h(e.targetEle)||x([e.targetEle],[qv,Gv])),document.body.classList.contains(qv)&&document.body.classList.contains(Gv)&&x([document.body],[qv,Gv]);var i={name:e.animationSettings.effect+"Out",duration:e.animationSettings.duration,delay:e.animationSettings.delay};"None"===e.animationSettings.effect?e.popupObj.hide():e.popupObj.hide(i),e.dialogOpen=!1;var n=e.isProtectedOnChange;e.isProtectedOnChange=!0,e.visible=!1,e.preventVisibility=!1,e.isProtectedOnChange=n}e.dlgClosedBy=oy})}},e.prototype.fullScreen=function(t){this.element.offsetTop,this.element.offsetLeft;if(t){this.element.style.top=document.scrollingElement.scrollTop+"px",I([this.element],Zv);var e=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=h(this.target)?window.innerHeight+"px":this.targetEle.offsetHeight+"px",this.element.style.display=e,I([document.body],[qv,Gv]),this.allowDragging&&!h(this.dragObj)&&this.dragObj.destroy()}else x([this.element],Zv),x([document.body],[qv,Gv]),this.allowDragging&&!h(this.headerContent)&&this.setAllowDragging();return t},e.prototype.getButtons=function(t){return h(t)?this.btnObj:this.btnObj[t]},Uv([W("")],e.prototype,"content",void 0),Uv([W(!0)],e.prototype,"enableHtmlSanitizer",void 0),Uv([W(!1)],e.prototype,"enablePersistence",void 0),Uv([W(!1)],e.prototype,"showCloseIcon",void 0),Uv([W(!1)],e.prototype,"isModal",void 0),Uv([W("")],e.prototype,"header",void 0),Uv([W(!0)],e.prototype,"visible",void 0),Uv([W(!1)],e.prototype,"enableResize",void 0),Uv([W(["South-East"])],e.prototype,"resizeHandles",void 0),Uv([W("auto")],e.prototype,"height",void 0),Uv([W("")],e.prototype,"minHeight",void 0),Uv([W("100%")],e.prototype,"width",void 0),Uv([W("")],e.prototype,"cssClass",void 0),Uv([W(1e3)],e.prototype,"zIndex",void 0),Uv([W(null)],e.prototype,"target",void 0),Uv([W("")],e.prototype,"footerTemplate",void 0),Uv([W(!1)],e.prototype,"allowDragging",void 0),Uv([q([{}],Vv)],e.prototype,"buttons",void 0),Uv([W(!0)],e.prototype,"closeOnEscape",void 0),Uv([Q({},_v)],e.prototype,"animationSettings",void 0),Uv([Q({X:"center",Y:"center"},Em)],e.prototype,"position",void 0),Uv([Z()],e.prototype,"created",void 0),Uv([Z()],e.prototype,"open",void 0),Uv([Z()],e.prototype,"beforeSanitizeHtml",void 0),Uv([Z()],e.prototype,"beforeOpen",void 0),Uv([Z()],e.prototype,"close",void 0),Uv([Z()],e.prototype,"beforeClose",void 0),Uv([Z()],e.prototype,"dragStart",void 0),Uv([Z()],e.prototype,"dragStop",void 0),Uv([Z()],e.prototype,"drag",void 0),Uv([Z()],e.prototype,"overlayClick",void 0),Uv([Z()],e.prototype,"resizeStart",void 0),Uv([Z()],e.prototype,"resizing",void 0),Uv([Z()],e.prototype,"resizeStop",void 0),Uv([Z()],e.prototype,"destroyed",void 0),e=Uv([$],e)}(Kp);!function(t){function e(t,e){var i=new sy(t);return i.appendTo(e),i}function i(t,e){return t.header=h(e.title)?Kv:e.title,t.content=h(e.content)?"":e.content,t.isModal=!!h(e.isModal)||e.isModal,t.showCloseIcon=!h(e.showCloseIcon)&&e.showCloseIcon,t.allowDragging=!h(e.isDraggable)&&e.isDraggable,t.closeOnEscape=!h(e.closeOnEscape)&&e.closeOnEscape,t.position=h(e.position)?{X:"center",Y:"top"}:e.position,t.animationSettings=h(e.animationSettings)?{effect:"Fade",duration:400,delay:0}:e.animationSettings,t.cssClass=h(e.cssClass)?"":e.cssClass,t.zIndex=h(e.zIndex)?1e3:e.zIndex,t.open=h(e.open)?null:e.open,t.width=h(e.width)?"auto":e.width,t.height=h(e.height)?"auto":e.height,t}function n(t,e,i){var n=i;return h(e.text)||(n.buttonModel.content=e.text),h(e.icon)||(n.buttonModel.iconCss=e.icon),h(e.cssClass)||(n.buttonModel.cssClass=e.cssClass),h(e.click)||(n.click=e.click),n}t.alert=function(t){var r=w("div",{className:ty});document.body.appendChild(r);var o;return o=e("string"==typeof t?{content:t,position:{X:"center",Y:"top"},isModal:!0,header:Kv,buttons:[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}]}:function(t){var e={};return e.buttons=[],e=i(e,t),e=function(t,e){var i=[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}];return h(e.okButton)?t.buttons=i:t.buttons[0]=n(t.buttons[0],e.okButton,i[0]),t}(e,t)}(t),r),o.close=function(){t&&t.close&&t.close.apply(o),o.destroy(),o.element.classList.contains("e-dlg-modal")?(o.element.parentElement.remove(),o.target.classList.remove(Jv)):o.element.remove()},o},t.confirm=function(t){var r=w("div",{className:ey});document.body.appendChild(r);var o;return o=e("string"==typeof t?{position:{X:"center",Y:"top"},content:t,isModal:!0,header:Kv,buttons:[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},{buttonModel:{content:"Cancel"},click:function(){this.hide()}}]}:function(t){var e={};return e.buttons=[],e=i(e,t),e=function(t,e){var i={buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},r={buttonModel:{content:"Cancel"},click:function(){this.hide()}};return h(e.okButton)?t.buttons[0]=i:t.buttons[0]=n(t.buttons[0],e.okButton,i),h(e.cancelButton)?t.buttons[1]=r:t.buttons[1]=n(t.buttons[1],e.cancelButton,r),t}(e,t)}(t),r),o.close=function(){t&&t.close&&t.close.apply(o),o.destroy(),o.element.classList.contains("e-dlg-modal")?(o.element.parentElement.remove(),o.target.classList.remove(Jv)):o.element.remove()},o}}(fv||(fv={}));var ay,ly,hy,cy,dy,py,uy,gy=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),my=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},fy="e-tooltip-wrap",vy="e-arrow-tip",yy="e-arrow-tip-outer",by="e-arrow-tip-inner",Sy="e-tip-bottom",wy="e-tip-right",Iy="e-popup-open",xy="e-popup-close",My="e-tooltip-popup-container",Cy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return gy(e,t),my([W({effect:"FadeIn",duration:150,delay:0})],e.prototype,"open",void 0),my([W({effect:"FadeOut",duration:150,delay:0})],e.prototype,"close",void 0),e}(Rp),Ny=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.mouseMoveEvent=null,n.mouseMoveTarget=null,n.containerElement=null,n.isBodyContainer=!0,n}return gy(e,t),e.prototype.initialize=function(){this.formatPosition(),I([this.element],"e-tooltip")},e.prototype.formatPosition=function(){var t,e;0===this.position.indexOf("Top")||0===this.position.indexOf("Bottom")?(t=this.position.split(/(?=[A-Z])/),this.tooltipPositionY=t[0],this.tooltipPositionX=t[1]):(e=this.position.split(/(?=[A-Z])/),this.tooltipPositionX=e[0],this.tooltipPositionY=e[1])},e.prototype.renderArrow=function(){this.setTipClass(this.position);var t=this.createElement("div",{className:vy+" "+this.tipClass});t.appendChild(this.createElement("div",{className:yy+" "+this.tipClass})),t.appendChild(this.createElement("div",{className:by+" "+this.tipClass})),this.tooltipEle.appendChild(t)},e.prototype.setTipClass=function(t){0===t.indexOf("Right")?this.tipClass="e-tip-left":0===t.indexOf("Bottom")?this.tipClass="e-tip-top":0===t.indexOf("Left")?this.tipClass=wy:this.tipClass=Sy},e.prototype.renderPopup=function(t){var e=this.mouseTrail?{top:0,left:0}:this.getTooltipPosition(t);this.tooltipEle.classList.remove("e-lib"),this.popupObj=new Am(this.tooltipEle,{height:this.height,width:this.width,position:{X:e.left,Y:e.top},enableRtl:this.enableRtl,open:this.openPopupHandler.bind(this),close:this.closePopupHandler.bind(this)})},e.prototype.getTooltipPosition=function(t){this.tooltipEle.style.display="block";var e=je(t,this.tooltipPositionX,this.tooltipPositionY,!this.isBodyContainer,this.isBodyContainer?null:this.containerElement.getBoundingClientRect()),i=this.calculateTooltipOffset(this.position),n=this.calculateElementPosition(e,i),r=n[0],o=n[1],s=this.collisionFlipFit(t,r,o);return this.tooltipEle.style.display="",s},e.prototype.windowResize=function(){this.reposition(this.findTarget())},e.prototype.reposition=function(t){if(this.popupObj&&t){var e=this.getTooltipPosition(t);this.popupObj.position={X:e.left,Y:e.top},this.popupObj.dataBind()}},e.prototype.openPopupHandler=function(){!this.mouseTrail&&this.needTemplateReposition()&&this.reposition(this.findTarget()),this.trigger("afterOpen",this.tooltipEventArgs),this.tooltipEventArgs=null},e.prototype.closePopupHandler=function(){!this.isReact||"Click"===this.opensOn&&"function"==typeof this.content||this.clearTemplate(["content"]),this.clear(),this.trigger("afterClose",this.tooltipEventArgs),this.tooltipEventArgs=null},e.prototype.calculateTooltipOffset=function(t){var e={top:0,left:0},i=this.tooltipEle.offsetWidth,n=this.tooltipEle.offsetHeight,r=A("."+vy,this.tooltipEle),o=r?r.offsetWidth:0,s=r?r.offsetHeight:0,a=this.showTipPointer?0:8,l=s/2+2+(this.tooltipEle.offsetHeight-this.tooltipEle.clientHeight),h=o/2+2+(this.tooltipEle.offsetWidth-this.tooltipEle.clientWidth);switch(this.mouseTrail&&(a+=2),t){case"RightTop":e.left+=o+a,e.top-=n-l;break;case"RightCenter":e.left+=o+a,e.top-=n/2;break;case"RightBottom":e.left+=o+a,e.top-=l;break;case"BottomRight":e.top+=s+a,e.left-=h;break;case"BottomCenter":e.top+=s+a,e.left-=i/2;break;case"BottomLeft":e.top+=s+a,e.left-=i-h;break;case"LeftBottom":e.left-=o+i+a,e.top-=l;break;case"LeftCenter":e.left-=o+i+a,e.top-=n/2;break;case"LeftTop":e.left-=o+i+a,e.top-=n-l;break;case"TopLeft":e.top-=n+s+a,e.left-=i-h;break;case"TopRight":e.top-=n+s+a,e.left-=h;break;default:e.top-=n+s+a,e.left-=i/2}return e.left+=this.offsetX,e.top+=this.offsetY,e},e.prototype.updateTipPosition=function(t){var e=z("."+vy+",."+yy+",."+by,this.tooltipEle);x(e,[Sy,"e-tip-top","e-tip-left",wy]),this.setTipClass(t),I(e,this.tipClass)},e.prototype.adjustArrow=function(t,e,i,n){if(!1!==this.showTipPointer){this.updateTipPosition(e);var r,o;this.tooltipEle.style.display="block";var s=this.tooltipEle.clientWidth,a=this.tooltipEle.clientHeight,l=A("."+vy,this.tooltipEle),h=A("."+by,this.tooltipEle),c=l.offsetWidth,d=l.offsetHeight;if(this.tooltipEle.style.display="",this.tipClass===Sy||"e-tip-top"===this.tipClass){if(this.tipClass===Sy?(o="99.9%",h.style.top="-"+(d-2)+"px"):(o=-(d-1)+"px",h.style.top="-"+(d-6)+"px"),t){r=(p="Center"!==i||s>t.offsetWidth||this.mouseTrail)&&"Left"===i||!p&&"End"===this.tipPointerPosition?s-c-2+"px":p&&"Right"===i||!p&&"Start"===this.tipPointerPosition?"2px":!p||"End"!==this.tipPointerPosition&&"Start"!==this.tipPointerPosition?s/2-c/2+"px":"End"===this.tipPointerPosition?t.offsetWidth+(this.tooltipEle.offsetWidth-t.offsetWidth)/2-c/2-2+"px":(this.tooltipEle.offsetWidth-t.offsetWidth)/2-c/2+2+"px"}}else{this.tipClass===wy?(r="99.9%",h.style.left="-"+(c-2)+"px"):(r=-(c-1)+"px",h.style.left=c-2-c+"px");var p;o=(p="Center"!==n||a>t.offsetHeight||this.mouseTrail)&&"Top"===n||!p&&"End"===this.tipPointerPosition?a-d-2+"px":p&&"Bottom"===n||!p&&"Start"===this.tipPointerPosition?"2px":a/2-d/2+"px"}l.style.top=o,l.style.left=r}},e.prototype.renderContent=function(t){var e=A(".e-tip-content",this.tooltipEle);if(this.cssClass&&I([this.tooltipEle],this.cssClass.split(" ")),t&&!h(t.getAttribute("title"))&&(t.setAttribute("data-content",t.getAttribute("title")),t.removeAttribute("title")),h(this.content))t&&!h(t.getAttribute("data-content"))&&(e.innerHTML=t.getAttribute("data-content"));else if(e.innerHTML="",this.content instanceof HTMLElement)e.appendChild(this.content);else if("string"==typeof this.content){this.enableHtmlSanitizer&&this.setProperties({content:Yu.sanitize(this.content)},!0);if(r=gt(this.content)({},this,"content",this.element.id+"content",void 0,void 0,e))if(this.enableHtmlParse)for(var i=r.length,n=0;n<i;n++)e[(E(r,e),"innerHTML")]=this.content;else e.textContent=this.content}else{var r;(r=gt(this.content)({},this,"content",this.element.id+"content",void 0,void 0,e))&&E(r,e),this.renderReactTemplates()}},e.prototype.renderCloseIcon=function(){if(this.isSticky){var t=this.createElement("div",{className:"e-icons e-tooltip-close"});this.tooltipEle.appendChild(t),Ep.add(t,Np.touchStartEvent,this.onStickyClose,this)}},e.prototype.addDataTooltipId=function(t,e){L(t,{"data-tooltip-id":e})},e.prototype.removeDataTooltipId=function(t){t.removeAttribute("data-tooltip-id")},e.prototype.tapHoldHandler=function(t){clearTimeout(this.autoCloseTimer),this.targetHover(t.originalEvent)},e.prototype.touchEndHandler=function(t){var e=this;if(!this.isSticky){this.autoCloseTimer=setTimeout(function(){e.close()},1500)}},e.prototype.targetClick=function(t){var e;h(e=this.target?j(t.target,this.target):this.element)||(null===e.getAttribute("data-tooltip-id")?this.targetHover(t):this.isSticky||this.hideTooltip(this.animation.close,t,e))},e.prototype.targetHover=function(t){var e;if(e=this.target?j(t.target,this.target):this.element,!(h(e)||null!==e.getAttribute("data-tooltip-id")&&0===this.closeDelay)){for(var i=0,n=[].slice.call(z('[data-tooltip-id= "'+this.ctrlId+'_content"]',document));i<n.length;i++){var r=n[i];this.restoreElement(r)}this.showTooltip(e,this.animation.open,t)}},e.prototype.mouseMoveBeforeOpen=function(t){this.mouseMoveEvent=t},e.prototype.mouseMoveBeforeRemove=function(){this.mouseMoveTarget&&Ep.remove(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen)},e.prototype.showTooltip=function(t,e,i){var n=this;clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.openDelay&&this.mouseTrail&&(this.mouseMoveBeforeRemove(),this.mouseMoveTarget=t,Ep.add(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen,this)),this.tooltipEventArgs={type:i?i.type:null,cancel:!1,target:t,event:i||null,element:this.tooltipEle,isInteracted:!h(i)};this.trigger("beforeRender",this.tooltipEventArgs,function(r){n.beforeRenderCallback(r,t,i,e)}.bind(this))},e.prototype.beforeRenderCallback=function(t,e,i,n){if(t.cancel)this.isHidden=!0,this.clear(),this.mouseMoveBeforeRemove();else if(this.isHidden=!1,h(this.tooltipEle)){if(this.ctrlId=this.element.getAttribute("id")?d(this.element.getAttribute("id")):d("tooltip"),this.tooltipEle=this.createElement("div",{className:fy+" e-popup e-lib",attrs:{role:"tooltip","aria-hidden":"false",id:this.ctrlId+"_content"},styles:"width:"+m(this.width)+";height:"+m(this.height)+";position:absolute;"}),0!==Object.keys(this.htmlAttributes).length)for(var r in this.htmlAttributes)"class"===r?this.tooltipEle.classList.add(this.htmlAttributes[""+r]):this.tooltipEle.setAttribute(r,this.htmlAttributes[""+r]);this.tooltipBeforeRender(e,this),this.tooltipAfterRender(e,i,n,this)}else e&&(this.adjustArrow(e,this.position,this.tooltipPositionX,this.tooltipPositionY),this.addDataTooltipId(e,this.ctrlId+"_content"),this.renderContent(e),zp.stop(this.tooltipEle),this.reposition(e),this.tooltipAfterRender(e,i,n,this))},e.prototype.appendContainer=function(t){"string"==typeof this.container?"body"===this.container?this.containerElement=document.body:(this.isBodyContainer=!1,this.containerElement=A(this.container,document)):this.container instanceof HTMLElement&&(this.containerElement=this.container,this.isBodyContainer="BODY"===this.containerElement.tagName),this.isBodyContainer||I([this.containerElement],My),this.containerElement.appendChild(t.tooltipEle)},e.prototype.tooltipBeforeRender=function(t,e){t&&(Np.isDevice&&I([e.tooltipEle],"e-bigger"),"auto"!==e.width&&(e.tooltipEle.style.maxWidth=m(e.width)),e.tooltipEle.appendChild(e.createElement("div",{className:"e-tip-content"})),this.appendContainer(e),x([e.tooltipEle],"e-hidden"),e.addDataTooltipId(t,e.ctrlId+"_content"),e.renderContent(t),I([e.tooltipEle],Iy),e.showTipPointer&&e.renderArrow(),e.renderCloseIcon(),e.renderPopup(t),e.adjustArrow(t,e.position,e.tooltipPositionX,e.tooltipPositionY),zp.stop(e.tooltipEle),e.reposition(t))},e.prototype.tooltipAfterRender=function(t,e,i,n){if(t){x([n.tooltipEle],Iy),I([n.tooltipEle],xy),n.tooltipEventArgs={type:e?e.type:null,cancel:!1,target:t,event:e||null,element:n.tooltipEle,isInteracted:!h(e)},n.needTemplateReposition()&&!n.mouseTrail&&(n.tooltipEle.style.display="none");n.trigger("beforeOpen",n.tooltipEventArgs,function(r){n.beforeOpenCallback(r,t,i,e)}.bind(n))}},e.prototype.beforeOpenCallback=function(t,e,i,n){var r=this;if(t.cancel)this.isHidden=!0,this.clear(),this.mouseMoveBeforeRemove(),this.restoreElement(e);else{var o={name:i.effect,duration:i.duration,delay:i.delay,timingFunction:"easeOut"};if("None"===i.effect&&(o=void 0),this.openDelay>0){this.showTimer=setTimeout(function(){r.mouseTrail&&Ep.add(e,"mousemove touchstart mouseenter",r.onMouseMove,r),r.popupObj&&(r.popupObj.show(o,e),r.mouseMoveEvent&&r.mouseTrail&&r.onMouseMove(r.mouseMoveEvent))},this.openDelay)}else this.popupObj&&this.popupObj.show(o,e)}n&&this.wireMouseEvents(n,e)},e.prototype.needTemplateReposition=function(){return!h(this.viewContainerRef)&&"string"!=typeof this.viewContainerRef},e.prototype.checkCollision=function(t,e,i){var n={left:e,top:i,position:this.position,horizontal:this.tooltipPositionX,vertical:this.tooltipPositionY},r=Xe(this.tooltipEle,this.checkCollideTarget(),e,i);return r.length>0&&(n.horizontal=r.indexOf("left")>=0?"Right":r.indexOf("right")>=0?"Left":this.tooltipPositionX,n.vertical=r.indexOf("top")>=0?"Bottom":r.indexOf("bottom")>=0?"Top":this.tooltipPositionY),n},e.prototype.calculateElementPosition=function(t,e){return[this.isBodyContainer?t.left+e.left:t.left-this.containerElement.offsetLeft+e.left+window.pageXOffset+this.containerElement.scrollLeft,this.isBodyContainer?t.top+e.top:t.top-this.containerElement.offsetTop+e.top+window.pageYOffset+this.containerElement.scrollTop]},e.prototype.collisionFlipFit=function(t,e,i){var n=this.checkCollision(t,e,i),r=n.position;this.tooltipPositionY!==n.vertical&&(r=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?n.vertical+this.tooltipPositionX:this.tooltipPositionX+n.vertical),this.tooltipPositionX!==n.horizontal&&(0===r.indexOf("Left")&&(n.vertical="LeftTop"===r||"LeftCenter"===r?"Top":"Bottom",r=n.vertical+"Left"),0===r.indexOf("Right")&&(n.vertical="RightTop"===r||"RightCenter"===r?"Top":"Bottom",r=n.vertical+"Right"),n.horizontal=this.tooltipPositionX),this.tooltipEventArgs={type:null,cancel:!1,target:t,event:null,element:this.tooltipEle,collidedPosition:r},this.trigger("beforeCollision",this.tooltipEventArgs);var o=n.vertical,s=n.horizontal;if(n.position!==r){var a=je(t,s,o,!this.isBodyContainer,this.isBodyContainer?null:this.containerElement.getBoundingClientRect());this.adjustArrow(t,r,s,o);var l=this.calculateTooltipOffset(r);l.top-=this.getOffSetPosition("TopBottom",r,this.offsetY),l.left-=this.getOffSetPosition("RightLeft",r,this.offsetX),n.position=r;var h=this.calculateElementPosition(a,l);n.left=h[0],n.top=h[1]}else this.adjustArrow(t,r,s,o);var c={left:n.left,top:n.top},d=this.isBodyContainer?Qe(this.tooltipEle,this.checkCollideTarget(),{X:!0,Y:!1},c).left:c.left;if(this.tooltipEle.style.display="block",this.showTipPointer&&(0===r.indexOf("Bottom")||0===r.indexOf("Top"))){var p=A("."+vy,this.tooltipEle),u=parseInt(p.style.left,10)-(d-n.left);u<0?u=0:u+p.offsetWidth>this.tooltipEle.clientWidth&&(u=this.tooltipEle.clientWidth-p.offsetWidth),p.style.left=u.toString()+"px"}return this.tooltipEle.style.display="",c.left=d,c},e.prototype.getOffSetPosition=function(t,e,i){return-1!==t.indexOf(this.position.split(/(?=[A-Z])/)[0])&&-1!==t.indexOf(e.split(/(?=[A-Z])/)[0])?2*i:0},e.prototype.checkCollideTarget=function(){return!this.windowCollision&&this.target?this.element:null},e.prototype.hideTooltip=function(t,e,i){var n=this;if(this.closeDelay>0){clearTimeout(this.hideTimer),clearTimeout(this.showTimer);this.hideTimer=setTimeout(function(){n.closeDelay&&n.tooltipEle&&n.isTooltipOpen||n.tooltipHide(t,e,i)},this.closeDelay)}else this.tooltipHide(t,e,i)},e.prototype.tooltipHide=function(t,e,i){var n,r=this;n=e?this.target?i||e.target:this.element:A('[data-tooltip-id= "'+this.ctrlId+'_content"]',document),this.tooltipEventArgs={type:e?e.type:null,cancel:!1,target:n,event:e||null,element:this.tooltipEle,isInteracted:!h(e)},this.trigger("beforeClose",this.tooltipEventArgs,function(e){e.cancel?r.isHidden=!1:(r.mouseMoveBeforeRemove(),r.popupHide(t,n))}),this.tooltipEventArgs=null},e.prototype.popupHide=function(t,e){e&&this.restoreElement(e),this.isHidden=!0;var i={name:t.effect,duration:t.duration,delay:t.delay,timingFunction:"easeIn"};"None"===t.effect&&(i=void 0),this.popupObj&&this.popupObj.hide(i)},e.prototype.restoreElement=function(t){this.unwireMouseEvents(t),h(t.getAttribute("data-content"))||(t.setAttribute("title",t.getAttribute("data-content")),t.removeAttribute("data-content")),this.removeDataTooltipId(t)},e.prototype.clear=function(){this.tooltipEle&&(x([this.tooltipEle],xy),I([this.tooltipEle],Iy)),this.isHidden&&(this.popupObj&&this.popupObj.destroy(),this.tooltipEle&&O(this.tooltipEle),this.tooltipEle=null,this.popupObj=null)},e.prototype.tooltipHover=function(t){this.tooltipEle&&(this.isTooltipOpen=!0)},e.prototype.tooltipMouseOut=function(t){this.isTooltipOpen=!1,this.hideTooltip(this.animation.close,t,this.findTarget())},e.prototype.onMouseOut=function(t){var e=t.relatedTarget;if(e&&!this.mouseTrail){var i=j(e,"."+fy+".e-lib.e-popup");i?Ep.add(i,"mouseleave",this.tooltipElementMouseOut,this):(this.hideTooltip(this.animation.close,t,this.findTarget()),0===this.closeDelay&&this.clear())}else this.hideTooltip(this.animation.close,t,this.findTarget()),this.clear()},e.prototype.tooltipElementMouseOut=function(t){this.hideTooltip(this.animation.close,t,this.findTarget()),Ep.remove(this.element,"mouseleave",this.tooltipElementMouseOut),this.clear()},e.prototype.onStickyClose=function(t){this.close()},e.prototype.onMouseMove=function(t){var e=0,i=0;t.type.indexOf("touch")>-1?(t.preventDefault(),e=t.touches[0].pageX,i=t.touches[0].pageY):(e=t.pageX,i=t.pageY),zp.stop(this.tooltipEle),x([this.tooltipEle],xy),I([this.tooltipEle],Iy),this.adjustArrow(t.target,this.position,this.tooltipPositionX,this.tooltipPositionY);var n=this.calculateTooltipOffset(this.position),r=e+n.left+this.offsetX,o=i+n.top+this.offsetY,s=this.checkCollision(t.target,r,o);if(this.tooltipPositionX!==s.horizontal||this.tooltipPositionY!==s.vertical){var a=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?s.vertical+s.horizontal:s.horizontal+s.vertical;s.position=a,this.adjustArrow(t.target,s.position,s.horizontal,s.vertical);var l=this.calculateTooltipOffset(s.position);s.left=e+l.left-this.offsetX,s.top=i+l.top-this.offsetY}this.tooltipEle.style.left=s.left+"px",this.tooltipEle.style.top=s.top+"px"},e.prototype.keyDown=function(t){this.tooltipEle&&27===t.keyCode&&this.close()},e.prototype.touchEnd=function(t){this.tooltipEle&&null===j(t.target,".e-tooltip")&&!this.isSticky&&this.close()},e.prototype.scrollHandler=function(t){this.tooltipEle&&(j(t.target,"."+fy+".e-lib.e-popup")||this.close())},e.prototype.render=function(){this.initialize(),this.wireEvents(this.opensOn),this.renderComplete()},e.prototype.preRender=function(){this.tipClass=Sy,this.tooltipPositionX="Center",this.tooltipPositionY="Top",this.isHidden=!0},e.prototype.wireEvents=function(t){for(var e=0,i=this.getTriggerList(t);e<i.length;e++){var n=i[e];if("Custom"===n)return;"Focus"===n&&(this.wireFocusEvents(),Ep.add(this.element,"DOMNodeInserted",this.updateTarget,this)),"Click"===n&&Ep.add(this.element,Np.touchStartEvent,this.targetClick,this),"Hover"===n&&(Np.isDevice?(this.touchModule=new yu(this.element,{tapHoldThreshold:500,tapHold:this.tapHoldHandler.bind(this)}),Ep.add(this.element,Np.touchEndEvent,this.touchEndHandler,this)):Ep.add(this.element,"mouseover",this.targetHover,this))}Ep.add(document,"touchend",this.touchEnd,this),Ep.add(document,"scroll wheel",this.scrollHandler,this),Ep.add(window,"resize",this.windowResize,this),Ep.add(document,"keydown",this.keyDown,this)},e.prototype.updateTarget=function(t){if(!h(this.targetsList)&&!h(this.target)){[].slice.call(z(this.target,this.element)).length!==this.targetsList.length&&(this.unwireEvents(this.opensOn),this.wireEvents(this.opensOn))}},e.prototype.getTriggerList=function(t){return"Auto"===t&&(t=Np.isDevice?"Hover":"Hover Focus"),t.split(" ")},e.prototype.wireFocusEvents=function(){if(h(this.target))Ep.add(this.element,"focus",this.targetHover,this);else{var t=[].slice.call(z(this.target,this.element));this.targetsList=t;for(var e=0,i=t;e<i.length;e++){var n=i[e];Ep.add(n,"focus",this.targetHover,this)}}},e.prototype.wireMouseEvents=function(t,e){this.tooltipEle&&(this.isSticky||("focus"===t.type&&Ep.add(e,"blur",this.onMouseOut,this),"mouseover"===t.type&&Ep.add(e,"mouseleave",this.onMouseOut,this),this.closeDelay&&(Ep.add(this.tooltipEle,"mouseenter",this.tooltipHover,this),Ep.add(this.tooltipEle,"mouseleave",this.tooltipMouseOut,this))),this.mouseTrail&&0===this.openDelay&&Ep.add(e,"mousemove touchstart mouseenter",this.onMouseMove,this))},e.prototype.unwireEvents=function(t){for(var e=0,i=this.getTriggerList(t);e<i.length;e++){var n=i[e];if("Custom"===n)return;"Focus"===n&&(this.unwireFocusEvents(),Ep.remove(this.element,"DOMNodeInserted",this.updateTarget)),"Click"===n&&Ep.remove(this.element,Np.touchStartEvent,this.targetClick),"Hover"===n&&(Np.isDevice?(this.touchModule&&this.touchModule.destroy(),Ep.remove(this.element,Np.touchEndEvent,this.touchEndHandler)):Ep.remove(this.element,"mouseover",this.targetHover))}Ep.remove(document,"touchend",this.touchEnd),Ep.remove(document,"scroll wheel",this.scrollHandler),Ep.remove(window,"resize",this.windowResize),Ep.remove(document,"keydown",this.keyDown)},e.prototype.unwireFocusEvents=function(){if(h(this.target))Ep.remove(this.element,"focus",this.targetHover);else for(var t=0,e=[].slice.call(z(this.target,this.element));t<e.length;t++){var i=e[t];Ep.remove(i,"focus",this.targetHover)}},e.prototype.unwireMouseEvents=function(t){if(!this.isSticky){for(var e=0,i=this.getTriggerList(this.opensOn);e<i.length;e++){var n=i[e];"Focus"===n&&Ep.remove(t,"blur",this.onMouseOut),"Hover"!==n||Np.isDevice||Ep.remove(t,"mouseleave",this.onMouseOut)}this.closeDelay&&(Ep.remove(t,"mouseenter",this.tooltipHover),Ep.remove(t,"mouseleave",this.tooltipMouseOut))}this.mouseTrail&&Ep.remove(t,"mousemove touchstart mouseenter",this.onMouseMove)},e.prototype.findTarget=function(){return A('[data-tooltip-id= "'+this.ctrlId+'_content"]',document)},e.prototype.getModuleName=function(){return"tooltip"},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.onPropertyChanged=function(t,e){for(var i=this.findTarget(),n=0,r=Object.keys(t);n<r.length;n++){switch(r[n]){case"width":this.tooltipEle&&i&&(this.tooltipEle.style.width=this.tooltipEle.style.maxWidth=m(t.width),this.reposition(i));break;case"height":this.tooltipEle&&i&&(this.tooltipEle.style.height=m(t.height),this.reposition(i));break;case"content":this.tooltipEle&&this.renderContent();break;case"opensOn":this.unwireEvents(e.opensOn),this.wireEvents(t.opensOn);break;case"position":if(this.formatPosition(),this.tooltipEle&&i){var o=A("."+by,this.tooltipEle);o.style.top=o.style.left=null,this.reposition(i)}break;case"tipPointerPosition":this.tooltipEle&&i&&this.reposition(i);break;case"offsetX":if(this.tooltipEle){var s=t.offsetX-e.offsetX;this.tooltipEle.style.left=(parseInt(this.tooltipEle.style.left,10)+s).toString()+"px"}break;case"offsetY":if(this.tooltipEle){var a=t.offsetY-e.offsetY;this.tooltipEle.style.top=(parseInt(this.tooltipEle.style.top,10)+a).toString()+"px"}break;case"cssClass":this.tooltipEle&&(e.cssClass&&x([this.tooltipEle],e.cssClass.split(" ")),t.cssClass&&I([this.tooltipEle],t.cssClass.split(" ")));break;case"enableRtl":this.tooltipEle&&(this.enableRtl?I([this.tooltipEle],"e-rtl"):x([this.tooltipEle],"e-rtl"));break;case"container":h(this.containerElement)||x([this.containerElement],My),this.container=t.container,this.tooltipEle&&i&&(this.appendContainer(this),this.reposition(i))}}},e.prototype.open=function(t,e){h(e)&&(e=this.animation.open),h(t)&&(t=this.element),"none"!==t.style.display&&this.showTooltip(t,e)},e.prototype.close=function(t){t||(t=this.animation.close),this.hideTooltip(t)},e.prototype.refresh=function(t){this.tooltipEle&&this.renderContent(t),this.popupObj&&t&&this.reposition(t)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.tooltipEle&&O(this.tooltipEle),this.popupObj&&this.popupObj.destroy(),x([this.element],"e-tooltip"),this.unwireEvents(this.opensOn),this.unwireMouseEvents(this.element),this.tooltipEle=null,this.popupObj=null},my([W("auto")],e.prototype,"width",void 0),my([W("auto")],e.prototype,"height",void 0),my([W()],e.prototype,"content",void 0),my([W("body")],e.prototype,"container",void 0),my([W()],e.prototype,"target",void 0),my([W("TopCenter")],e.prototype,"position",void 0),my([W(0)],e.prototype,"offsetX",void 0),my([W(0)],e.prototype,"offsetY",void 0),my([W(!0)],e.prototype,"showTipPointer",void 0),my([W(!0)],e.prototype,"enableHtmlParse",void 0),my([W(!1)],e.prototype,"windowCollision",void 0),my([W("Auto")],e.prototype,"tipPointerPosition",void 0),my([W("Auto")],e.prototype,"opensOn",void 0),my([W(!1)],e.prototype,"mouseTrail",void 0),my([W(!1)],e.prototype,"isSticky",void 0),my([Q({},Cy)],e.prototype,"animation",void 0),my([W(0)],e.prototype,"openDelay",void 0),my([W(0)],e.prototype,"closeDelay",void 0),my([W()],e.prototype,"cssClass",void 0),my([W(!1)],e.prototype,"enableHtmlSanitizer",void 0),my([W("")],e.prototype,"htmlAttributes",void 0),my([Z()],e.prototype,"beforeRender",void 0),my([Z()],e.prototype,"beforeOpen",void 0),my([Z()],e.prototype,"afterOpen",void 0),my([Z()],e.prototype,"beforeClose",void 0),my([Z()],e.prototype,"afterClose",void 0),my([Z()],e.prototype,"beforeCollision",void 0),my([Z()],e.prototype,"created",void 0),my([Z()],e.prototype,"destroyed",void 0),e=my([$],e)}(Kp),Ey={},Dy=30,Ty=30,Oy=30,Ly=30,Ay=30,zy=36,ky=36,jy="e-spin-show",Py="e-spin-hide",Ry="e-spin-material",By="e-spin-material3",Hy="e-spin-fabric",Uy="e-spin-fluent",Vy="e-spin-tailwind",_y="e-spin-bootstrap",Fy="e-spin-bootstrap4",Yy="e-spin-bootstrap5",Wy="e-spin-high-contrast",Qy="e-spinner-pane",Xy="e-spinner-inner",qy="e-path-circle",Gy="e-path-arc",Zy="e-spin-label",$y="e-spin-template",Ky=null,Jy=null,tb=!1,eb=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ib=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},nb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return eb(e,t),ib([W({effect:"FadeIn",duration:150,delay:0})],e.prototype,"open",void 0),ib([W({effect:"FadeOut",duration:150,delay:0})],e.prototype,"close",void 0),e}(Rp),rb="e-arrow-tip",ob="e-arrow-tip-outer",sb="e-arrow-tip-inner",ab="e-tip-bottom",lb="e-tip-right",hb="e-popup-open",cb="e-popup-close",db="e-popup-open",pb="e-popup-close",ub=function(){function t(t){this.isBlazorTooltip=!1,this.contentEvent=null,this.width="auto",this.height="auto",this.content="",this.target="",this.position="TopCenter",this.offsetX=0,this.offsetY=0,this.tipPointerPosition="Auto",this.openDelay=0,this.closeDelay=0,this.cssClass="",this.element=t,this.tipClass=ab,this.tooltipPositionX="Center",this.tooltipPositionY="Top",this.isHidden=!0,this.showTipPointer=!0}return t.prototype.open=function(t,e,i){h(this.animation.open)&&(this.animation.open=this.element.tooltip&&this.element.tooltip.animation&&this.element.tooltip.animation.open),this.showTooltip(t,e)},t.prototype.updateTooltip=function(t){this.tooltipEle&&(this.addDescribedBy(t,this.ctrlId+"_content"),this.renderContent(t),this.reposition(t),this.adjustArrow(t,this.position,this.tooltipPositionX,this.tooltipPositionY))},t.prototype.formatPosition=function(){var t,e;0===this.position.indexOf("Top")||0===this.position.indexOf("Bottom")?(t=this.position.split(/(?=[A-Z])/),this.tooltipPositionY=t[0],this.tooltipPositionX=t[1]):(e=this.position.split(/(?=[A-Z])/),this.tooltipPositionX=e[0],this.tooltipPositionY=e[1])},t.prototype.destroy=function(){},t.prototype.close=function(){if(this.tooltipEle){x([this.tooltipEle],cb),I([this.tooltipEle],hb),zp.stop(this.tooltipEle);var t=void 0,e=this;e.isHidden=!0,this.animation.close&&(t={name:this.animation.close.effect,duration:this.animation.close.duration||0,delay:this.animation.close.delay||0,timingFunction:"easeOut"}),h(t)?(x([this.tooltipEle],db),I([this.tooltipEle],pb),O(this.tooltipEle),this.tooltipEle=null):(t.end=function(){e.isHidden&&(O(e.tooltipEle),e.tooltipEle=null)},new zp(t).animate(this.tooltipEle))}},t.prototype.showTooltip=function(t,e,i){var n=this;clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.tooltipEventArgs={type:i?i.type:null,cancel:!1,target:t,event:i||null,element:this.tooltipEle,isInteracted:!h(i)};this.element.trigger("beforeRender",this.tooltipEventArgs,function(r){n.beforeRenderCallback(r,t,i,e)}.bind(this))},t.prototype.beforeRenderCallback=function(t,e,i,n){this.formatPosition(),t.cancel?this.isHidden=!0:(this.isHidden=!1,h(this.tooltipEle)?(this.ctrlId=this.element.element.id,this.tooltipEle=w("div",{className:"e-tooltip-wrap e-popup e-lib",attrs:{role:"tooltip","aria-hidden":"false",id:this.ctrlId+"_content"},styles:"width:"+m(this.width)+";height:"+m(this.height)+";position:absolute; pointer-events:none;"}),this.beforeRenderBlazor(e,this),zp.stop(this.tooltipEle),this.afterRenderBlazor(e,i,n,this)):e&&(this.addDescribedBy(e,this.ctrlId+"_content"),this.renderContent(e),zp.stop(this.tooltipEle),this.reposition(e),this.afterRenderBlazor(e,i,n,this),this.adjustArrow(e,this.position,this.tooltipPositionX,this.tooltipPositionY)))},t.prototype.afterRenderBlazor=function(t,e,i,n){var r=this;if(t){x([n.tooltipEle],hb),I([n.tooltipEle],cb),n.tooltipEventArgs={type:e?e.type:null,cancel:!1,target:t,event:e||null,element:n.tooltipEle,isInteracted:!h(e)};var o=void 0;this.animation.open&&(o={name:this.animation.open.effect,duration:this.animation.open.duration||0,delay:this.animation.open.delay||0,timingFunction:"easeIn"}),h(o)?(x([n.tooltipEle],cb),I([n.tooltipEle],hb)):(o.begin=function(){x([n.tooltipEle],pb),I([n.tooltipEle],db)},o.end=function(){r.element.trigger("open")},new zp(o).animate(this.tooltipEle))}},t.prototype.setTipClass=function(t){0===t.indexOf("Right")?this.tipClass="e-tip-left":0===t.indexOf("Bottom")?this.tipClass="e-tip-top":0===t.indexOf("Left")?this.tipClass=lb:this.tipClass=ab},t.prototype.renderArrow=function(){this.setTipClass(this.position);var t=w("div",{className:rb+" "+this.tipClass});t.appendChild(w("div",{className:ob+" "+this.tipClass})),t.appendChild(w("div",{className:sb+" "+this.tipClass})),this.tooltipEle.appendChild(t)},t.prototype.getTooltipPosition=function(t){this.tooltipEle.style.display="block";var e=Gi(t,this.tooltipPositionX,this.tooltipPositionY),i=this.calculateTooltipOffset(this.position),n=this.collisionFlipFit(t,e.left+i.left,e.top+i.top);return this.tooltipEle.style.display="",n},t.prototype.checkCollision=function(t,e,i){var n={left:e,top:i,position:this.position,horizontal:this.tooltipPositionX,vertical:this.tooltipPositionY},r=an(this.tooltipEle,this.target?this.element.element:null,e,i);return r.length>0&&(n.horizontal=r.indexOf("left")>=0?"Right":r.indexOf("right")>=0?"Left":this.tooltipPositionX,n.vertical=r.indexOf("top")>=0?"Bottom":r.indexOf("bottom")>=0?"Top":this.tooltipPositionY),n},t.prototype.collisionFlipFit=function(t,e,i){var n=this.checkCollision(t,e,i),r=n.position;if(this.tooltipPositionY!==n.vertical&&(r=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?n.vertical+this.tooltipPositionX:this.tooltipPositionX+n.vertical),this.tooltipPositionX!==n.horizontal&&(0===r.indexOf("Left")&&(n.vertical="LeftTop"===r||"LeftCenter"===r?"Top":"Bottom",r=n.vertical+"Left"),0===r.indexOf("Right")&&(n.vertical="RightTop"===r||"RightCenter"===r?"Top":"Bottom",r=n.vertical+"Right"),n.horizontal=this.tooltipPositionX),this.tooltipEventArgs={type:null,cancel:!1,target:t,event:null,element:this.tooltipEle,collidedPosition:r},this.element.trigger("beforeCollision",this.tooltipEventArgs),n.position!==r){var o=Gi(t,n.horizontal,n.vertical);this.adjustArrow(t,r,n.horizontal,n.vertical);var s=this.calculateTooltipOffset(r);s.top-=-1!=="TopBottom".indexOf(this.position.split(/(?=[A-Z])/)[0])&&-1!=="TopBottom".indexOf(r.split(/(?=[A-Z])/)[0])?2*this.offsetY:0,s.left-=-1!=="RightLeft".indexOf(this.position.split(/(?=[A-Z])/)[0])&&-1!=="RightLeft".indexOf(r.split(/(?=[A-Z])/)[0])?2*this.offsetX:0,n.position=r,n.left=o.left+s.left,n.top=o.top+s.top}else this.adjustArrow(t,r,n.horizontal,n.vertical);var a={left:n.left,top:n.top},l=function(t,e,i,n){if(void 0===e&&(e=null),void 0===i&&(i={X:!1,Y:!1}),!i.Y&&!i.X)return{left:0,top:0};var r=t.getBoundingClientRect();if(py=e,dy=t.ownerDocument,n||(n=Gi(t,"left","top")),i.X){var o=py?ln():bn(),s=un(),a=gn(),l=s-n.left,h=n.left+r.width-a;r.width>o?n.left=l>0&&h<=0?a-r.width:h>0&&l<=0?s:l>h?a-r.width:s:l>0?n.left+=l:h>0&&(n.left-=h)}if(i.Y){var c=py?hn():yn(),d=pn(),p=mn(),u=d-n.top,g=n.top+r.height-p;r.height>c?n.top=u>0&&g<=0?p-r.height:g>0&&u<=0?d:u>g?p-r.height:d:u>0?n.top+=u:g>0&&(n.top-=g)}return n}(this.tooltipEle,this.target?this.element.element:null,{X:!0,Y:!1},a).left;if(this.tooltipEle.style.display="block",this.showTipPointer&&(0===r.indexOf("Bottom")||0===r.indexOf("Top"))){var h=this.tooltipEle.querySelector("."+rb),c=parseInt(h.style.left,10)-(l-n.left);c<0?c=0:c+h.offsetWidth>this.tooltipEle.clientWidth&&(c=this.tooltipEle.clientWidth-h.offsetWidth),h.style.left=c.toString()+"px"}return this.tooltipEle.style.display="",a.left=l,a},t.prototype.calculateTooltipOffset=function(t){var e={top:0,left:0},i=this.tooltipEle.offsetWidth,n=this.tooltipEle.offsetHeight,r=this.tooltipEle.querySelector("."+rb),o=r?r.offsetWidth:0,s=r?r.offsetHeight:0,a=this.showTipPointer?0:8,l=s/2+2+(this.tooltipEle.offsetHeight-this.tooltipEle.clientHeight),h=o/2+2+(this.tooltipEle.offsetWidth-this.tooltipEle.clientWidth);switch(t){case"RightTop":e.left+=o+a,e.top-=n-l;break;case"RightCenter":e.left+=o+a,e.top-=n/2;break;case"RightBottom":e.left+=o+a,e.top-=l;break;case"BottomRight":e.top+=s+a,e.left-=h;break;case"BottomCenter":e.top+=s+a,e.left-=i/2;break;case"BottomLeft":e.top+=s+a,e.left-=i-h;break;case"LeftBottom":e.left-=o+i+a,e.top-=l;break;case"LeftCenter":e.left-=o+i+a,e.top-=n/2;break;case"LeftTop":e.left-=o+i+a,e.top-=n-l;break;case"TopLeft":e.top-=n+s+a,e.left-=i-h;break;case"TopRight":e.top-=n+s+a,e.left-=h;break;default:e.top-=n+s+a,e.left-=i/2}return e.left+=this.offsetX,e.top+=this.offsetY,e},t.prototype.reposition=function(t){var e=this.getTooltipPosition(t);this.tooltipEle.style.left=e.left+"px",this.tooltipEle.style.top=e.top+"px"},t.prototype.beforeRenderBlazor=function(t,e){if(t){Np.isDevice&&I([e.tooltipEle],"e-bigger"),"auto"!==e.width&&(e.tooltipEle.style.maxWidth=m(e.width)),e.tooltipEle.appendChild(w("div",{className:"e-tip-content e-diagramTooltip-content"})),document.body.appendChild(e.tooltipEle),I([e.tooltipEle],hb),x([e.tooltipEle],"e-hidden"),e.addDescribedBy(t,e.ctrlId+"_content"),e.renderContent(t),I([e.tooltipEle],hb),this.showTipPointer&&e.renderArrow();var i=this.getTooltipPosition(t);this.tooltipEle.classList.remove("e-lib"),this.tooltipEle.style.left=i.left+"px",this.tooltipEle.style.top=i.top+"px",e.reposition(t),e.adjustArrow(t,e.position,e.tooltipPositionX,e.tooltipPositionY)}},t.prototype.addDescribedBy=function(t,e){var i=(t.getAttribute("aria-describedby")||"").split(/\s+/);i.indexOf(e)<0&&i.push(e),L(t,{"aria-describedby":i.join(" ").trim(),"data-tooltip-id":e})},t.prototype.renderContent=function(t){var e=this.tooltipEle.querySelector(".e-tip-content");if(this.cssClass&&I([this.tooltipEle],this.cssClass.split(" ")),t&&!h(t.getAttribute("title"))&&(t.setAttribute("data-content",t.getAttribute("title")),t.removeAttribute("title")),h(this.content))t&&!h(t.getAttribute("data-content"))&&(e.innerHTML=t.getAttribute("data-content"));else if(this.isBlazorTooltip,e.innerHTML="",this.content instanceof HTMLElement)e.appendChild(this.content);else if("string"==typeof this.content&&this.content.indexOf("<div>Blazor")<0)e.innerHTML=this.content;else{E(gt(this.content)({},null,null,this.element.element.id+"content"),e),"string"==typeof this.content&&this.content.indexOf("<div>Blazor")>=0&&(this.isBlazorTemplate=!0,mt(this.element.element.id+"content","Content",this))}},t.prototype.updateTipPosition=function(t){var e=this.tooltipEle.querySelectorAll("."+rb+",."+ob+",."+sb);x(e,[ab,"e-tip-top","e-tip-left",lb]),this.setTipClass(t),I(e,this.tipClass)},t.prototype.adjustArrow=function(t,e,i,n){if(this.showTipPointer){this.updateTipPosition(e);var r,o;this.tooltipEle.style.display="block";var s=this.tooltipEle.clientWidth,a=this.tooltipEle.clientHeight,l=this.tooltipEle.querySelector("."+rb),h=this.tooltipEle.querySelector("."+sb),c=l.offsetWidth,d=l.offsetHeight;if(this.tooltipEle.style.display="",this.tipClass===ab||"e-tip-top"===this.tipClass){if(this.tipClass===ab?(o="99.9%",h.style.top="-"+(d-2)+"px"):(o=-(d-1)+"px",h.style.top="-"+(d-6)+"px"),t){r=(p="Center"!==i||s>t.offsetWidth)&&"Left"===i||!p&&"End"===this.tipPointerPosition?s-c-2+"px":p&&"Right"===i||!p&&"Start"===this.tipPointerPosition?"2px":s/2-c/2+"px"}}else{this.tipClass===lb?(r="99.9%",h.style.left="-"+(c-2)+"px"):(r=-(c-1)+"px",h.style.left=c-2-c+"px");var p;o=(p="Center"!==n||a>t.offsetHeight)&&"Top"===n||!p&&"End"===this.tipPointerPosition?a-d-2+"px":p&&"Bottom"===n||!p&&"Start"===this.tipPointerPosition?"2px":a/2-d/2+"px"}l.style.top=o,l.style.left=r}},t.prototype.getModuleName=function(){return"BlazorTooltip"},t}(),gb=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),mb=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},fb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return gb(e,t),mb([W("")],e.prototype,"content",void 0),mb([W("TopLeft")],e.prototype,"position",void 0),mb([W("Mouse")],e.prototype,"relativeMode",void 0),mb([W(!0)],e.prototype,"showTipPointer",void 0),mb([W("auto")],e.prototype,"width",void 0),mb([W("auto")],e.prototype,"height",void 0),mb([W("Auto")],e.prototype,"openOn",void 0),mb([W()],e.prototype,"animation",void 0),e}(Rp),vb=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),yb=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},bb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return vb(e,t),yb([W()],e.prototype,"width",void 0),yb([W()],e.prototype,"height",void 0),e}(Rp),Sb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return vb(e,t),yb([W()],e.prototype,"width",void 0),yb([W()],e.prototype,"height",void 0),yb([W()],e.prototype,"fit",void 0),yb([W()],e.prototype,"description",void 0),yb([W()],e.prototype,"template",void 0),yb([W()],e.prototype,"tooltip",void 0),e}(Rp),wb=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ib=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},xb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wb(e,t),Ib([W("")],e.prototype,"id",void 0),Ib([W(-1)],e.prototype,"zIndex",void 0),Ib([Q({},ng)],e.prototype,"margin",void 0),Ib([W(!0)],e.prototype,"visible",void 0),Ib([Q({},fb)],e.prototype,"tooltip",void 0),Ib([W(!1)],e.prototype,"excludeFromLayout",void 0),Ib([W()],e.prototype,"addInfo",void 0),Ib([W("None")],e.prototype,"flip",void 0),Ib([W("All")],e.prototype,"flipMode",void 0),Ib([Q({},Sb)],e.prototype,"symbolInfo",void 0),e}(Rp),Mb=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Cb=function(t){function e(e,i,n,r){var o=t.call(this)||this;return o.data="",o.nodeId="",o.annotationId="",o.diagramId="",o.diagramId=i,o.nodeId=e,o.annotationId=n,o.templateFn=ua(r),o}return Mb(e,t),e.prototype.getNodeTemplate=function(){return this.templateFn},Object.defineProperty(e.prototype,"content",{get:function(){return this.data},set:function(t){this.data=t,this.canReset||(this.canReset=!0,this.isTemplate||(this.template=ra(this,!0)),this.canReset=!1,this.isDirt=!0)},enumerable:!0,configurable:!0}),e}(Gg),Nb=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Eb=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Db=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Nb(e,t),Eb([W("")],e.prototype,"id",void 0),Eb([W("transparent")],e.prototype,"fill",void 0),Eb([W("black")],e.prototype,"iconStrokeColor",void 0),Eb([W(0)],e.prototype,"iconStrokeWidth",void 0),Eb([W(!0)],e.prototype,"visibility",void 0),Eb([W(10)],e.prototype,"width",void 0),Eb([W(10)],e.prototype,"height",void 0),Eb([W("transparent")],e.prototype,"handleStrokeColor",void 0),Eb([W(1)],e.prototype,"handleStrokeWidth",void 0),Eb([W("")],e.prototype,"pathData",void 0),Eb([W(0)],e.prototype,"cornerRadius",void 0),Eb([Q({left:0,right:0,top:0,bottom:0},ng)],e.prototype,"padding",void 0),e}(Rp),Tb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Nb(e,t),Eb([Q({x:0,y:0},Gu)],e.prototype,"offset",void 0),Eb([Q({},ng)],e.prototype,"margin",void 0),e}(Db),Ob=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Nb(e,t),Eb([W(.5)],e.prototype,"offset",void 0),Eb([W("Center")],e.prototype,"alignment",void 0),Eb([Q({x:0,y:0},Gu)],e.prototype,"displacement",void 0),e}(Db),Lb=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ab=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.childTable=[],e.cellStyle={},e.desiredRowHeight=[],e.desiredCellWidth=[],e}return Lb(e,t),e.prototype.rowDefinitions=function(){return this.rowDefns},e.prototype.columnDefinitions=function(){return this.colDefns},e.prototype.addObject=function(t,e,i,n,r){if(this.rows.length>=e){var o=this.rows[parseInt(e.toString(),10)];if(o.cells.length>i){r=r||1,n=n||1;var s=o.cells[parseInt(i.toString(),10)];s.columnSpan=Math.max(r,s.columnSpan),s.rowSpan=Math.max(n,s.rowSpan);var a=new Rb;(a=t).rowId=e,a.columnId=i,a.columnSpan=r,this.childTable[a.id]=a,this.addObjectToCell(a,s)}}},e.prototype.addObjectToCell=function(t,e){e.children||(e.children=[]),t.style.strokeColor="black",t.style.strokeWidth=1,t.style.fill="white",e.children.push(t)},e.prototype.updateProperties=function(t,e,i,n){this.offsetX=t,this.offsetY=e,this.width=i,this.height=n},e.prototype.setDefinitions=function(t,e){this.rowDefns=t,this.colDefns=e,this.children=[],this.rows=this.rows||[];for(var i=0;i<t.length;i++){var n=t[parseInt(i.toString(),10)],r=new jb;r.cells=[];var o=new kb;o.width=this.width;var s=this.colDefns;(void 0===s||s.length<1)&&(s=[o]),this.addCellInRow(s,n,r),this.rows.push(r)}},e.prototype.addCellInRow=function(t,e,i){for(var n=0;n<t.length;n++){var r=t[parseInt(n.toString(),10)],o=new Pb;o.children=[],this.cellStyle.fill="none",this.cellStyle.strokeColor="none",o.id=da(),o.style=this.cellStyle,o.desiredCellWidth=o.minWidth=r.width,o.desiredCellHeight=o.minHeight=e.height,i.cells.push(o),this.children.push(o)}},e.prototype.calculateSize=function(){for(var t=this.rows||[],e=0,i=0,n=0;n<t.length;n++){var r=this.rows[parseInt(n.toString(),10)];i=0;for(var o=0;o<r.cells.length;o++)if(i+=r.cells[parseInt(o.toString(),10)].desiredCellWidth,o===r.cells.length-1&&(this.width&&this.width!==i&&(r.cells[parseInt(o.toString(),10)].desiredCellWidth+=this.width-i,r.cells[parseInt(o.toString(),10)].minWidth=r.cells[parseInt(o.toString(),10)].desiredCellWidth,r.cells[parseInt(o.toString(),10)].children&&r.cells[parseInt(o.toString(),10)].children.length&&(r.cells[parseInt(o.toString(),10)].children[0].width=r.cells[parseInt(o.toString(),10)].desiredCellWidth),this.colDefns[parseInt(o.toString(),10)].width=r.cells[parseInt(o.toString(),10)].desiredCellWidth),e+=r.cells[parseInt(o.toString(),10)].desiredCellHeight,n===t.length-1&&this.height&&this.height!==e)){var s=this.height-e;if(s>0){for(var a=0;a<r.cells.length;a++)r.cells[parseInt(a.toString(),10)].desiredCellHeight+=s,r.cells[parseInt(a.toString(),10)].minHeight=r.cells[parseInt(a.toString(),10)].desiredCellHeight=r.cells[parseInt(a.toString(),10)].desiredCellHeight,r.cells[parseInt(a.toString(),10)].children&&r.cells[parseInt(a.toString(),10)].children.length&&(r.cells[parseInt(a.toString(),10)].children[0].height=r.cells[parseInt(a.toString(),10)].desiredCellHeight);this.rowDefns[parseInt(n.toString(),10)].height+=s}}}},e.prototype.updateRowHeight=function(t,e,i,n){var r=this.rows[parseInt(t.toString(),10)];this.rowDefns[parseInt(t.toString(),10)].height=e,void 0!==this.height&&(this.height+=e-r.cells[0].desiredCellHeight);for(var o=0;o<r.cells.length;o++)r.cells[parseInt(o.toString(),10)].desiredCellHeight=r.cells[parseInt(o.toString(),10)].minHeight=e,r.cells[parseInt(o.toString(),10)].children&&r.cells[parseInt(o.toString(),10)].children.length&&(r.cells[parseInt(o.toString(),10)].children[0].height=e,this.setTextRefresh(r.cells[parseInt(o.toString(),10)].children[0]));if(this.desiredRowHeight[parseInt(t.toString(),10)]=e,this.measure(new Qu(this.width,this.height)),this.arrange(this.desiredSize),i){var s=void 0!==n?this.calculateCellHeightBasedOnChildren(t,n):this.calculateCellHeight(t);s>e&&this.updateRowHeight(t,s,!1)}},e.prototype.setTextRefresh=function(t){if(t.children&&t.children.length)for(var e=t.children,i=0;i<e.length;i++)e[parseInt(i.toString(),10)]instanceof Jg&&e[parseInt(i.toString(),10)].refreshTextElement(),e[parseInt(i.toString(),10)]instanceof em&&this.setTextRefresh(e[parseInt(i.toString(),10)])},e.prototype.updateColumnWidth=function(t,e,i,n){this.colDefns[parseInt(t.toString(),10)].width=e,void 0!==this.width&&(this.width+=e-this.rows[this.rows.length-1].cells[parseInt(t.toString(),10)].desiredCellWidth);for(var r=0;r<this.rows.length;r++)this.setTextRefresh(this.rows[parseInt(r.toString(),10)].cells[0]),this.rows[parseInt(r.toString(),10)].cells[parseInt(t.toString(),10)].desiredCellWidth=this.rows[parseInt(r.toString(),10)].cells[parseInt(t.toString(),10)].minWidth=e,this.rows[parseInt(r.toString(),10)].cells[parseInt(t.toString(),10)].children&&this.rows[parseInt(r.toString(),10)].cells[parseInt(t.toString(),10)].children.length&&(this.rows[parseInt(r.toString(),10)].cells[parseInt(t.toString(),10)].children[0].width=e);if(this.desiredCellWidth[parseInt(t.toString(),10)]=e,this.measure(new Qu(this.width,this.height)),this.arrange(this.desiredSize),i){var o=void 0!==n?this.calculateCellWidthBasedOnChildren(t,n):this.calculateCellWidth(t);o>e&&this.updateColumnWidth(t,o,!1)}},e.prototype.calculateCellWidth=function(t){for(var e,i,n,r=0;r<this.rows.length;r++)1===(n=this.rows[parseInt(r.toString(),10)].cells[parseInt(t.toString(),10)]).columnSpan&&(i=n.outerBounds.width>n.bounds.width&&(0===n.children.length||void 0===n.children[0].maxWidth)?n.outerBounds.width:n.bounds.width,e=e?e<i?i:e:i);return e},e.prototype.calculateCellHeight=function(t){for(var e,i,n,r=this.rows[parseInt(t.toString(),10)],o=0;o<r.cells.length;o++)i=(n=r.cells[parseInt(o.toString(),10)]).outerBounds.height>n.bounds.height?n.outerBounds.height:n.bounds.height,e=e?e<i?i:e:i;return e},e.prototype.calculateCellSizeBasedOnChildren=function(t,e,i,n){var r,o=t&&t.children.length>0?t.children[0]:void 0;if(o&&1===t.columnSpan){r="Width"===e?o.bounds.right:o.bounds.bottom,n||(n="Width"===e?o.bounds.width:o.bounds.height);for(var s=0;s<o.children.length;s++){var a=o.children[parseInt(s.toString(),10)];if(a instanceof em&&-1===a.id.indexOf("header")){var l=("Width"===e?a.bounds.right:a.bounds.bottom)+i;if(l>r){var h=l-r+("Width"===e?o.bounds.width:o.bounds.height);n&&(n=n<h?h:n)}}}}return n},e.prototype.calculateCellWidthBasedOnChildren=function(t,e){for(var i,n,r=0;r<this.rows.length;r++)n=this.rows[parseInt(r.toString(),10)].cells[parseInt(t.toString(),10)],i=this.calculateCellSizeBasedOnChildren(n,"Width",e,i);return i},e.prototype.calculateCellHeightBasedOnChildren=function(t,e){for(var i,n,r=this.rows[parseInt(t.toString(),10)],o=0;o<r.cells.length;o++)n=r.cells[parseInt(o.toString(),10)],i=this.calculateCellSizeBasedOnChildren(n,"Height",e,i);return i},e.prototype.addRow=function(t,e,i){this.rowDefns.length>0?this.rowDefns.splice(t,0,e):this.rowDefns.push(e);var n=new jb;n.cells=[];(new kb).width=this.width;var r=this.colDefns;this.addCellInRow(r,e,n),t>this.rows.length-1?this.rows.push(n):this.rows.splice(t,0,n),i&&(this.measure(new Qu(this.width,this.height)),this.arrange(this.desiredSize))},e.prototype.addColumn=function(t,e,i){var n,r,o,s,a=this.rows;this.colDefns.length>0?this.colDefns.splice(t,0,e):this.colDefns.push(e),void 0!==this.width&&(this.width+=e.width);for(var l=0;l<a.length;l++)n=a[parseInt(l.toString(),10)],r=this.rowDefns[parseInt(l.toString(),10)],o=e,(s=new Pb).style=this.cellStyle,s.desiredCellWidth=s.minWidth=o.width,s.desiredCellHeight=s.minHeight=r.height,s.children=[],t>n.cells.length-1?n.cells.push(s):n.cells.splice(t,0,s),this.children.push(s);i&&(this.measure(new Qu(this.width,this.height)),this.arrange(this.desiredSize))},e.prototype.removeRow=function(t){var e,i,n=this.rows[parseInt(t.toString(),10)];this.height-=this.rowDefns[parseInt(t.toString(),10)].height;for(var r=0;r<n.cells.length;r++)e=n.cells[parseInt(r.toString(),10)],this.children.splice(this.children.indexOf(e),1),(i=document.getElementById(e.id+"_groupElement"))&&i.parentElement&&i.parentElement.removeChild(i);this.rows.splice(t,1),this.rowDefns.splice(t,1),this.measure(new Qu(this.width,this.height)),this.arrange(this.desiredSize)},e.prototype.removeColumn=function(t){var e,i,n=this.rows;this.width-=this.colDefns[parseInt(t.toString(),10)].width;for(var r=0;r<n.length;r++)e=n[parseInt(r.toString(),10)].cells[parseInt(t.toString(),10)],this.children.splice(this.children.indexOf(e),1),(i=document.getElementById(e.id+"_groupElement"))&&i.parentElement&&i.parentElement.removeChild(i),n[parseInt(r.toString(),10)].cells.splice(t,1);this.colDefns.splice(t,1),this.measure(new Qu(this.width,this.height)),this.arrange(this.desiredSize)},e.prototype.updateRowIndex=function(t,e){var i=this.rows[parseInt(t.toString(),10)];this.rows.splice(t,1),this.rows.splice(e,0,i);var n=this.rowDefns[parseInt(t.toString(),10)];this.rowDefns.splice(t,1),this.rowDefns.splice(e,0,n),this.measure(new Qu(this.width,this.height)),this.arrange(this.desiredSize)},e.prototype.updateColumnIndex=function(t,e,i){for(var n,r,o=t;o<this.rows.length;o++)n=this.rows[parseInt(o.toString(),10)],r=this.rows[parseInt(o.toString(),10)].cells[parseInt(e.toString(),10)],n.cells.splice(e,1),n.cells.splice(i,0,r);var s=this.colDefns[parseInt(e.toString(),10)];this.colDefns.splice(e,1),this.colDefns.splice(i,0,s);var a=this.desiredCellWidth[parseInt(e.toString(),10)];this.desiredCellWidth.splice(e,1),this.desiredCellWidth.splice(i,0,a),this.measure(new Qu(this.width,this.height)),this.arrange(this.desiredSize)},e.prototype.measure=function(e){var i=void 0;if(void 0!==this.rows&&this.rows.length>0){var n=0,r=0;i=new Qu(0,0),this.calculateSize();for(var o=0,s=this.rows;o<s.length;o++){r=0;for(var a=0,l=(u=s[o]).cells;a<l.length;a++){var h=(v=l[a]).measure(new Qu(v.desiredCellWidth,v.desiredCellHeight));1===v.rowSpan&&(0===r||void 0===this.desiredRowHeight[parseInt(n.toString(),10)]?this.desiredRowHeight[parseInt(n.toString(),10)]=h.height:this.desiredRowHeight[parseInt(n.toString(),10)]=Math.max(h.height,this.desiredRowHeight[parseInt(n.toString(),10)])),1===v.columnSpan&&(0===n||void 0===this.desiredCellWidth[parseInt(r.toString(),10)]?this.desiredCellWidth[parseInt(r.toString(),10)]=h.width:this.desiredCellWidth[parseInt(r.toString(),10)]=Math.max(h.width,this.desiredCellWidth[parseInt(r.toString(),10)]),n===this.rows.length-1&&(i.width+=this.desiredCellWidth[parseInt(r.toString(),10)])),r++}i.height+=this.desiredRowHeight[parseInt(n.toString(),10)],n++}n=r=0;for(var c=0,d=0,p=this.rows;d<p.length;d++){var u;r=0;for(var g=0,m=0,f=(u=p[d]).cells;m<f.length;m++){var v;if(1!==(v=f[m]).columnSpan){v.desiredSize.width=0;for(var y=0;y<v.columnSpan;y++)y+r<u.cells.length&&(v.desiredSize.width+=this.desiredCellWidth[y+r],v.minWidth=v.desiredSize.width,v.measure(v.desiredSize));r++}else v.desiredSize.width=this.desiredCellWidth[parseInt(g.toString(),10)],v.measure(v.desiredSize);if(1!==v.rowSpan){v.desiredSize.height=0;for(y=0;y<v.rowSpan;y++)y+c<this.rows.length&&(v.desiredSize.height+=this.desiredRowHeight[y+c],v.minHeight=v.desiredSize.height,v.measure(v.desiredSize))}else v.desiredSize.height=this.desiredRowHeight[parseInt(c.toString(),10)],v.measure(v.desiredSize);n++,g++}c++}}return void 0===i&&(i=t.prototype.validateDesiredSize.call(this,i,e)),t.prototype.stretchChildren.call(this,i),this.desiredSize=i,i},e.prototype.arrange=function(t,e){var i=0,n=0;if(void 0!==this.rows&&this.rows.length>0){for(var r=this.offsetX-t.width*this.pivot.x,o=this.offsetY-t.height*this.pivot.y,s=r,a=0,l=this.rows;a<l.length;a++){s=r,i=0;for(var h=0,c=(g=l[a]).cells;h<c.length;h++){var d=c[h],p=Math.max(this.desiredCellWidth[parseInt(i.toString(),10)],d.desiredSize.width),u=Math.max(this.desiredRowHeight[parseInt(n.toString(),10)],d.desiredSize.height);d.offsetX=s+p*d.pivot.x,d.offsetY=o+u*d.pivot.y,s+=this.desiredCellWidth[parseInt(i.toString(),10)],d.arrange(new Qu(p,u)),i++}o+=this.desiredRowHeight[parseInt(n.toString(),10)],n++}if(e){d=void 0;var g=void 0,m=void 0,f=void 0,v=void 0;for(n=0;n<this.rows.length;n++)for(g=this.rows[parseInt(n.toString(),10)],i=0;i<g.cells.length;i++)if((d=g.cells[parseInt(i.toString(),10)]).columnSpan>1&&this.children.splice(this.children.indexOf(d)+1,d.columnSpan-1),d.rowSpan>1)for(m=n,f=0;m+d.rowSpan-1<this.rows.length&&f<d.rowSpan-1;m++,f++)v=this.rows[m+1].cells[parseInt(i.toString(),10)],this.children.splice(this.children.indexOf(v),1)}}return this.actualSize=t,this.updateBounds(),t},e}($g),zb=function(){return function(){this.height=void 0}}(),kb=function(){return function(){this.width=void 0}}(),jb=function(){return function(){this.cells=null}}(),Pb=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.columnSpan=1,e.rowSpan=1,e}return Lb(e,t),e}(em),Rb=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rowId=0,e.columnId=0,e.rowSpan=1,e.columnSpan=1,e}return Lb(e,t),e}(Gg),Bb={None:"default",Rotate:"crosshair",Select:"default",Drag:"move",ResizeWest:"w-resize",ResizeEast:"e-resize",ResizeSouth:"s-resize",ResizeNorth:"n-resize",Draw:"crosshair",PortDraw:"crosshair",ResizeNorthEast:"ne-resize",ResizeNorthWest:"nw-resize",ResizeSouthEast:"se-resize",ResizeSouthWest:"sw-resize",ConnectorSourceEnd:"move",ConnectorTargetEnd:"move",BezierSourceThumb:"move",BezierTargetThumb:"move",OrthoThumb:"move",SegmentEnd:"move",Pan:"grab",Hyperlink:"pointer",PortDrag:"pointer",LabelSelect:"pointer",LabelDrag:"move",LabelRotate:"crosshair",LabelResizeWest:"w-resize",LabelResizeEast:"e-resize",LabelResizeSouth:"s-resize",LabelResizeNorth:"n-resize",LabelResizeNorthEast:"ne-resize",LabelResizeNorthWest:"nw-resize",LabelResizeSouthEast:"se-resize",LabelResizeSouthWest:"sw-resize"},Hb=function(){function t(){this.valueCreated="created",this.valueUpdated="updated",this.valueDeleted="deleted",this.valueUnchanged="unchanged",this.newNodeObject=[],this.newConnectorObject=[],this.diagramObject={}}return t.prototype.updateObjectCollection=function(t,e){for(var i=0;i<t.length;i++)t[i].objects?t[i].objects=e.layers[i].objects:(t[i].objects=[],t[i].objects=e.layers[i].objects)},t.prototype.getOldObject=function(t,e,i){for(var n=e?i.oldNodeObjects:i.oldConnectorObjects,r=0;r<n.length;r++)if(n[r].id===t)return n[r]},t.prototype.changeSegments=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){var r=n[i];if("segments"===r){var o=this.removeNullValues(e[r]);t[r]=o}}return t},t.prototype.removeNullValues=function(t){for(var e=[],i={},n=0;n<t.length;n++)i=this.removeNullObjectValues(t[n]),e.push(i);return e},t.prototype.removeNullObjectValues=function(t){for(var e={},i=0,n=Object.keys(t);i<n.length;i++){var r=n[i];void 0!==t[r]&&(e[r]=t[r]instanceof Object?this.removeNullObjectValues(t[r]):t[r])}return e},t.prototype.getDifferenceValues=function(t,e,i,n){var r,o,s,a,l=t instanceof Pw;if(t&&(a=l?this.getOldObject(t.id,!0,n):this.getOldObject(t.id,!1,n))){var h=fa(t);if(s=this.map(h,a),r=this.frameObject({},s),o=this.removeEmptyValues(r),(o=this.changeSegments(o,h)).children&&(o.children=fa(t).children),o.ports&&o.ports.length)for(var c=0;c<o.ports.length;c++)h.ports[c].outEdges&&(o.ports[c].outEdges=h.ports[c].outEdges),h.ports[c].inEdges&&(o.ports[c].inEdges=h.ports[c].inEdges);return this.getDiagramObjects(o,t.id,l,e,i,n)}},t.prototype.getLayerObject=function(t,e,i){if(f()){var n={};n.layers=[];var r={};r.layers=[];for(var o=0;o<i.layers.length;o++)r.layers.push(fa(i.layers[o]));var s=void 0;for(o=0;o<r.layers.length;o++){s=e?this.map(t.layers[o],fa(r.layers[o])):this.map(fa(r.layers[o]),t.layers[o]);var a=this.frameObject({},s),l=this.removeEmptyValues(a);n.layers[o]=l}return this.updateObjectCollection(n.layers,i),n}},t.prototype.getDiagramObjects=function(t,e,i,n,r,o){var s=0;if(s=pa(o,e),t.sfIndex=s,i?this.newNodeObject.push(t):this.newConnectorObject.push(t),n&&(n.sourceWrapper instanceof Jg&&r||n.portId)){var a=void 0,l=void 0;l=i?n.portId?this.newNodeObject[0].ports:this.newNodeObject[0].annotations:this.newConnectorObject[0].annotations||[];for(var h=0;h<l.length;h++)if(Object.keys(l[h]).length>0){var c=o.nameTable[e];if(a=l[h],n.portId)this.newNodeObject[0].ports=[a];else{for(var d=0;d<c.annotations.length;d++)n.sourceWrapper.id===c.id+"_"+c.annotations[d].id&&(a.sfIndex=d);i?this.newNodeObject[0].annotations=[a]:this.newConnectorObject[0].annotations=[a]}}}this.diagramObject={nodes:this.newNodeObject,connectors:this.newConnectorObject}},t.prototype.removeArrayValues=function(t){var e=[];if(JSON.stringify(t)!==JSON.stringify({data:[]}))for(var i=0;i<t.length;i++)if(t[i]instanceof Object){var n=this.removeEmptyValues(t[i]);e.push(n)}else e.push(t[i]);return e},t.prototype.removeEmptyValues=function(t){for(var e={},i=0,n=Object.keys(t);i<n.length;i++){var r=n[i];if("wrapper"!==r&&("data"!==r||"data"===r&&!(t[r]instanceof Array))){var o=t[r],s=JSON.stringify(o);if(o instanceof Array){var a=this.removeArrayValues(o);"[]"!==JSON.stringify(a)&&(e[r]=a)}else if(o instanceof Object){if(s!==JSON.stringify({data:[]})){a=this.removeEmptyValues(o);"{}"!==JSON.stringify(a)&&(e[r]=a)}}else s!==JSON.stringify(["data"])&&s!==JSON.stringify("data")&&s!==JSON.stringify({data:[]})&&"version"!==r&&"ejsAction"!==r&&(e[r]=t[r])}}return e},t.prototype.map=function(t,e,i){if(this.isFunction(t)||this.isFunction(e))throw"Invalid argument. Function given, object expected.";if(this.isValue(t)||this.isValue(e))return{type:this.compareValues(t,e),data:void 0===t?e:t};var n={};if(this.isArray(t))for(var r=0;r<t.length;r++){n[i]||(n[i]=[]);var o=this.map(t[r],e[r]);n[i].push(o)}else for(var s in t)if(!this.isFunction(t[s])){var a=void 0;void 0!==e[s]&&(a=e[s]);var l=this.map(t[s],a,this.isArray(a)?s:void 0);this.isArray(a)?n[s]=l[s]:n[s]=l}if(this.isArray(e))for(var h=e.length-1;h>=0;h--)if(n[i]||(n[i]=[]),this.isFunction(e[h])||void 0!==n[i][h])n[i][h].type&&n[i][h].type!==this.valueUpdated&&delete n[i];else{o=this.map(void 0,e[h]);n[i][h]=o}else for(var s in e)if(this.isFunction(e[s])||void 0!==n[s])n[s].type&&n[s].type!==this.valueUpdated&&n[s].type!==this.valueDeleted&&delete n[s];else{l=this.map(void 0,e[s]);n[s]=l}return n},t.prototype.compareValues=function(t,e){return t===e?this.valueUnchanged:this.isDate(t)&&this.isDate(e)&&t.getTime()===e.getTime()?this.valueUnchanged:void 0===t?this.valueCreated:void 0===e?this.valueDeleted:this.valueUpdated},t.prototype.isFunction=function(t){return"[object Function]"===Object.prototype.toString.call(t)},t.prototype.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},t.prototype.isDate=function(t){return"[object Date]"===Object.prototype.toString.call(t)},t.prototype.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)},t.prototype.isValue=function(t){return!this.isObject(t)&&!this.isArray(t)},t.prototype.frameObject=function(t,e){for(var i in e)if(this.isArray(e[i])){t[i]||(t[i]=[]);for(var n=0;n<e[i].length;n++){var r=this.frameObject({},e[i][n]);t[i].push(r)}}else if("type"!=i||"type"==i&&e[i]!==this.valueUpdated&&e[i]!==this.valueUnchanged&&e[i]!==this.valueDeleted&&e[i]!==this.valueCreated){if(this.isFunction(e[i]))continue;if(this.isValue(e[i]))return e.data;r=this.frameObject({},e[i]);(this.isValue(r)||Object.keys(r).length>0)&&(t[i]=r)}return t},t}(),Ub=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Vb=function(t,e,i,n){return new(i||(i=Promise))(function(r,o){function s(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){t.done?r(t.value):new i(function(e){e(t.value)}).then(s,a)}l((n=n.apply(t,e||[])).next())})},_b=function(t,e){function i(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}var n,r,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},Fb=function(){function t(t,e){void 0===e&&(e=!1),this.commandHandler=null,this.deepDiffer=new Hb,this.inAction=!1,this.isProtectChange=!1,this.currentElement=null,this.blocked=!1,this.isTooltipVisible=!1,this.childTable={},this.undoElement={nodes:[],connectors:[]},this.checkProperty=!0,this.undoParentElement={nodes:[],connectors:[]},this.commandHandler=t,this.isProtectChange=e}return t.prototype.startAction=function(t){this.currentElement=t,this.inAction=!0},t.prototype.mouseDown=function(t){f()&&(this.commandHandler.enableCloneObject(!0),this.commandHandler.ismouseEvents(!0)),this.currentElement=t.source,this.startPosition=this.currentPosition=this.prevPosition=t.position,this.isTooltipVisible=!0,this.startAction(t.source),this.checkProperty=!0,this.mouseDownElement=t.source},t.prototype.checkPropertyValue=function(){this.checkProperty&&this.commandHandler.startTransaction(this.isProtectChange)},t.prototype.mouseMove=function(t){return this.currentPosition=t.position,this.inAction&&(this.commandHandler.startTransaction(this.isProtectChange),this.checkProperty=!1),!this.blocked},t.prototype.mouseUp=function(t){this.checkPropertyValue(),this.currentPosition=t.position,this.isTooltipVisible=!1,this.commandHandler.endTransaction(this.isProtectChange),f()&&(this.commandHandler.enableCloneObject(!1),this.commandHandler.ismouseEvents(!1),this.commandHandler.getBlazorOldValues(t,this instanceof rS)),this.endAction(),this.mouseDownElement=null},t.prototype.endAction=function(){this.isTooltipVisible||this.commandHandler.closeTooltip(),this.commandHandler=null,this.currentElement=null,this.currentPosition=null,this.inAction=!1,this.blocked=!1},t.prototype.mouseWheel=function(t){this.currentPosition=t.position},t.prototype.mouseLeave=function(t){this.mouseUp(t)},t.prototype.updateSize=function(t,e,i,n,r,o){t=this.commandHandler.renderContainerHelper(t)||t;var s,a={snapped:!1,offset:0,left:!1,right:!1},l={snapped:!1,offset:0,top:!1,bottom:!1},h=this.currentPosition.x-this.startPosition.x,c=this.currentPosition.y-this.startPosition.y,d=!(t instanceof Jg)&&this.commandHandler.snappingModule&&this.commandHandler.snappingModule.canSnap(),p=d?this.commandHandler.snappingModule.getLayer():null,u=t instanceof Jg?o:t.rotateAngle;kt(s=Lt(),-u,0,0);t.offsetX,t.offsetY;var g=t.width,m=t.height;t.pivot.x,t.pivot.y;var f,v=0,y=0,b=t instanceof Jg?t.actualSize.width:t.width,S=t instanceof Jg?t.actualSize.height:t.height;switch(n){case"ResizeWest":h=(f=At(s,{x:h,y:c})).x,c=f.y,y=1,h=d?this.commandHandler.snappingModule.snapLeft(a,l,p,h,c,t,i===e,r):h,c=0,v=(r.width-h)/b;break;case"ResizeEast":h=(f=At(s,{x:h,y:c})).x,c=f.y,h=d?this.commandHandler.snappingModule.snapRight(a,l,p,h,c,t,i===e,r):h,c=0,v=(r.width+h)/b,y=1;break;case"ResizeNorth":v=1,h=(f=At(s,{x:h,y:c})).x,c=f.y,c=d?this.commandHandler.snappingModule.snapTop(a,l,p,h,c,t,i===e,r):c,y=(r.height-c)/S;break;case"ResizeSouth":v=1,h=(f=At(s,{x:h,y:c})).x,c=f.y,c=d?this.commandHandler.snappingModule.snapBottom(a,l,p,h,c,t,i===e,r):c,y=(r.height+c)/S;break;case"ResizeNorthEast":h=(f=At(s,{x:h,y:c})).x,c=f.y,h=d?this.commandHandler.snappingModule.snapRight(a,l,p,h,c,t,i===e,r):h,c=d?this.commandHandler.snappingModule.snapTop(a,l,p,h,c,t,i===e,r):c,v=(r.width+h)/b,y=(r.height-c)/S;break;case"ResizeNorthWest":h=(f=At(s,{x:h,y:c})).x,c=f.y,c=d?this.commandHandler.snappingModule.snapTop(a,l,p,h,c,t,i===e,r):c,h=d?this.commandHandler.snappingModule.snapLeft(a,l,p,h,c,t,i===e,r):h,v=(r.width-h)/b,y=(r.height-c)/S;break;case"ResizeSouthEast":h=(f=At(s,{x:h,y:c})).x,c=f.y,c=d?this.commandHandler.snappingModule.snapBottom(a,l,p,h,c,t,i===e,r):c,h=d?this.commandHandler.snappingModule.snapRight(a,l,p,h,c,t,i===e,r):h,y=(r.height+c)/S,v=(r.width+h)/b;break;case"ResizeSouthWest":h=(f=At(s,{x:h,y:c})).x,c=f.y,c=d?this.commandHandler.snappingModule.snapBottom(a,l,p,h,c,t,i===e,r):c,h=d?this.commandHandler.snappingModule.snapLeft(a,l,p,h,c,t,i===e,r):h,v=(r.width-h)/b,y=(r.height+c)/S}return{width:v,height:y}},t.prototype.getPivot=function(t){switch(t){case"ResizeWest":return{x:1,y:.5};case"ResizeEast":return{x:0,y:.5};case"ResizeNorth":return{x:.5,y:1};case"ResizeSouth":return{x:.5,y:0};case"ResizeNorthEast":return{x:0,y:1};case"ResizeNorthWest":return{x:1,y:1};case"ResizeSouthEast":return{x:0,y:0};case"ResizeSouthWest":return{x:1,y:0}}return{x:.5,y:.5}},t.prototype.getShapeType=function(){return this.commandHandler.diagram.drawingObject.shape.type,this.commandHandler.diagram.drawingObject.shape.type},t.prototype.triggerElementDrawEvent=function(t,e,i,n,r){var o={source:t,state:e,objectType:i,cancel:!1,elementType:n};this.commandHandler.triggerEvent(jg.elementDraw,o),r&&o.cancel&&this.commandHandler.diagram.resetTool()},t}(),Yb=function(t){function e(e,i,n){var r=t.call(this,e,!0)||this;return r.action=n,r}return Ub(e,t),e.prototype.mouseDown=function(e){this.inAction=!0,t.prototype.mouseDown.call(this,e)},e.prototype.mouseMove=function(e){if(t.prototype.mouseMove.call(this,e),this.inAction&&!1===Gu.equals(this.currentPosition,this.prevPosition)){var i=Zu.toBounds([this.prevPosition,this.currentPosition]);this.mouseDownElement&&!Nn(this.mouseDownElement)?this.commandHandler.clearObjectSelection(this.mouseDownElement):(this.commandHandler.clearSelectedItems(),this.commandHandler.drawSelectionRectangle(i.x,i.y,i.width,i.height))}return!this.blocked},e.prototype.mouseUp=function(e){if(this.checkPropertyValue(),!this.commandHandler.isUserHandle(this.currentPosition))if(!1===Gu.equals(this.currentPosition,this.prevPosition)&&this.inAction){var i=Zu.toBounds([this.prevPosition,this.currentPosition]);this.commandHandler.doRubberBandSelection(i)}else{var n=this.commandHandler.getSelectedObject();this.commandHandler.hasSelection()&&e.info&&e.info.ctrlKey?e&&e.source&&(this.commandHandler.isSelected(e.source)?1===e.clickCount&&(this.commandHandler.unSelect(e.source),this.commandHandler.updateBlazorSelector()):this.commandHandler.selectObjects([e.source],!0)):(this.commandHandler.clearSelection(null===e.source),"LabelSelect"===this.action?this.commandHandler.labelSelect(e.source,e.sourceWrapper):e.source&&this.commandHandler.selectObjects([e.source],!1,n))}this.inAction=!1,t.prototype.mouseUp.call(this,e)},e.prototype.mouseLeave=function(t){this.inAction&&this.mouseUp(t)},e}(Fb),Wb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ub(e,t),e.prototype.mouseUp=function(e){this.checkPropertyValue(),this.inAction=!1;for(var i,n=e.source,r=e.sourceWrapper.id,o=0;o<n.fixedUserHandles.length;o++)r.indexOf(n.fixedUserHandles[parseInt(o.toString(),10)].id)>-1&&(i=n.fixedUserHandles[parseInt(o.toString(),10)]);if(f()){var s=VS(e.source)===ES?{connector:e.source}:{node:e.source},a={fixedUserHandle:VS(e.source)===ES?{connectorFixedUserHandle:i}:{nodeFixedUserHandle:i},element:s},l=jg.fixedUserHandleClick;this.commandHandler.triggerEvent(l,a),t.prototype.mouseUp.call(this,e)}else{a={fixedUserHandle:i,element:e.source},l=jg.fixedUserHandleClick;this.commandHandler.triggerEvent(l,a),t.prototype.mouseUp.call(this,e)}},e}(Fb),Qb=function(t){function e(e,i){var n=t.call(this,e,!0)||this;return n.isConnected=!1,n.endPoint=i,n}return Ub(e,t),e.prototype.mouseDown=function(e){return Vb(this,void 0,void 0,function(){var i,n,r,o,s,a,l,h;return _b(this,function(c){if(f()&&e&&e.source&&(this.commandHandler.insertSelectedObjects(),this.commandHandler.insertBlazorConnector(e.source),(i=e.source).connectors&&(n=i.connectors[0],this.oldConnector=fa(n),r={connector:xs(n),oldValue:{connectorTargetValue:{portId:void 0,nodeId:void 0}},newValue:{connectorTargetValue:{portId:void 0,nodeId:void 0}},cancel:!1,state:"Changing",connectorEnd:this.endPoint},this.tempArgs=r)),this.inAction=!0,this.undoElement=void 0,this instanceof $b||(this.undoElement=fa(e.source)),t.prototype.mouseDown.call(this,e),e.source&&e.source.connectors&&({x:this.prevPosition.x,y:this.prevPosition.y},o=e.source.connectors[0],this.oldConnector=fa(o)),"BezierSourceThumb"===this.endPoint||"BezierTargetThumb"===this.endPoint)for(s=0;s<o.segments.length;s++)a=o.segments[parseInt(s.toString(),10)],l=Gu.isEmptyPoint(a.point1)?a.bezierPoint1:a.point1,h=Gu.isEmptyPoint(a.point2)?a.bezierPoint2:a.point2,this.currentElement.handleSize!==o.hitPadding&&(o.hitPadding=this.currentElement.handleSize),(Zr(this.currentPosition,l,o.hitPadding)||Zr(this.currentPosition,h,o.hitPadding))&&(this.selectedSegment=a);return this.currentPosition=e.position,[2]})})},e.prototype.mouseUp=function(e){return Vb(this,void 0,void 0,function(){var i,n,r,o,s,a,l,h,c,d,p,u,g,m,v,y;return _b(this,function(b){switch(b.label){case 0:return f()?(g=jg.connectionChange,i=void 0,this.tempArgs&&this.oldConnector?(this.commandHandler.updatePropertiesToBlazor(e,!1),this.tempArgs.state="Changed",a="ConnectorSourceEnd"===this.endPoint?"sourceID":"targetID",l="ConnectorSourceEnd"===this.endPoint?"sourcePortID":"targetPortID",this.tempArgs.oldValue="ConnectorSourceEnd"===this.endPoint?{connectorSourceValue:{nodeId:this.oldConnector[""+a],portId:this.oldConnector[""+l]}}:{connectorTargetValue:{nodeId:this.oldConnector[""+a],portId:this.oldConnector[""+l]}},i={state:this.tempArgs.state,oldValue:this.tempArgs.oldValue,newValue:this.tempArgs.newValue,cancel:this.tempArgs.cancel,connectorEnd:this.tempArgs.connectorEnd},n="diagram",r="sfBlazor",o="Blazor",window&&window[""+o]&&this.commandHandler[""+n].connectionChange?(s={EventName:"connectionChange",args:JSON.stringify(this.tempArgs)},[4,window[""+r].updateBlazorDiagramEvents(s,this.commandHandler[""+n])]):[3,2]):[3,3]):[3,3];case 1:i=b.sent(),b.label=2;case 2:i&&this.commandHandler.updateConnectorValue(i),b.label=3;case 3:return!f()&&this.isConnected&&e.source.connectors&&(y=e.source.connectors[0],a="ConnectorSourceEnd"===this.endPoint?"sourceID":"targetID",l="ConnectorSourceEnd"===this.endPoint?"sourcePortID":"targetPortID",u={connector:xs(y),oldValue:{nodeId:this.oldConnector[""+a],portId:this.oldConnector[""+l]},newValue:{nodeId:y[""+a],portId:y[""+l]},cancel:!1,state:"Changed",connectorEnd:this.endPoint},y[""+a]!==this.oldConnector[""+a]&&(this.commandHandler.triggerEvent(jg.connectionChange,u),this.isConnected=!1)),this.checkPropertyValue(),this.commandHandler.updateSelector(),this.commandHandler.removeSnap(),this.commandHandler.changeAnnotationDrag(e),this instanceof $b||("ConnectorSourceEnd"!==this.endPoint||!e.source.connectors.length||Gu.equals(e.source.connectors[0].sourcePoint,this.undoElement.connectors[0].sourcePoint)&&e.source.connectors[0].sourceID===this.undoElement.connectors[0].sourceID)&&("ConnectorTargetEnd"!==this.endPoint||Gu.equals(e.source.connectors[0].targetPoint,this.undoElement.connectors[0].targetPoint)&&e.source.connectors[0].targetID===this.undoElement.connectors[0].targetID)?this instanceof $b||"BezierTargetThumb"!==this.endPoint&&"BezierSourceThumb"!==this.endPoint||this.undoElement&&e.source&&(m=fa(e.source),v={type:"SegmentChanged",redoObject:m,undoObject:this.undoElement,category:"Internal"},this.commandHandler.addHistoryEntry(v)):(h=void 0,y=void 0,e.source&&e.source.connectors&&(h={x:this.prevPosition.x,y:this.prevPosition.y},y=e.source.connectors[0]),c=void 0,d=void 0,e.target&&((p=this.commandHandler.findTarget(e.targetWrapper,e.target,"ConnectorSourceEnd"===this.endPoint,!0))instanceof pm?c=p.id:d=p.id),u={connector:y,state:"Completed",targetNode:d,oldValue:h,newValue:h,cancel:!1,targetPort:c},f()&&(u={connector:xs(y),state:"Completed",targetNode:d,oldValue:xs(h),newValue:h,cancel:u.cancel,targetPort:c}),g="ConnectorSourceEnd"===this.endPoint?jg.sourcePointChange:jg.targetPointChange,this.commandHandler.triggerEvent(g,u),this.commandHandler.removeTerminalSegment(y,!0),this.undoElement&&e.source&&(m=void 0,m=fa(e.source),v={type:"ConnectionChanged",redoObject:fa(m),undoObject:fa(this.undoElement),category:"Internal"},this.commandHandler.addHistoryEntry(v))),this.commandHandler.updateBlazorSelector(),this.canCancel=void 0,this.tempArgs=void 0,e.source&&e.source.connectors&&(y=e.source.connectors[0]).isBezierEditing&&(y.isBezierEditing=!1),t.prototype.mouseUp.call(this,e),[2]}})})},e.prototype.mouseMove=function(e){t.prototype.mouseMove.call(this,e);var i;if(!(this instanceof $b)&&("ConnectorSourceEnd"===this.endPoint&&Gu.equals(e.source.connectors[0].sourcePoint,this.undoElement.connectors[0].sourcePoint)||"ConnectorTargetEnd"===this.endPoint&&Gu.equals(e.source.connectors[0].targetPoint,this.undoElement.connectors[0].targetPoint))){var n=void 0,r=void 0;e.source&&e.source.connectors&&(n={x:this.prevPosition.x,y:this.prevPosition.y},r=e.source.connectors[0]);var o=void 0,s=void 0;if(e.target){s=e.target.id;(y=this.commandHandler.findTarget(e.targetWrapper,e.target,"ConnectorSourceEnd"===this.endPoint,!0))instanceof pm||y instanceof Sw?o=y.id:s=y.id}var a={connector:r,state:"Start",targetNode:s,oldValue:n,newValue:n,cancel:!1,targetPort:o};f()&&(a={connector:xs(r),state:"Start",targetNode:s,oldValue:n,newValue:n,cancel:a.cancel,targetPort:o});var l="ConnectorSourceEnd"===this.endPoint?jg.sourcePointChange:jg.targetPointChange;this.commandHandler.triggerEvent(l,a)}if(this.currentPosition=e.position,this.currentPosition&&this.prevPosition){var h=this.currentPosition.x-this.prevPosition.x,c=this.currentPosition.y-this.prevPosition.y,d=void 0,p=(n=void 0,void 0),u=void 0;this.currentPosition=this.commandHandler.snapConnectorEnd(this.currentPosition);var g=void 0;e.source&&e.source.connectors&&(d={x:this.currentPosition.x,y:this.currentPosition.y},n={x:this.prevPosition.x,y:this.prevPosition.y},g=e.source.connectors[0]);var m=void 0,v=void 0;if(e.target){(y=this.commandHandler.findTarget(e.targetWrapper,e.target,"ConnectorSourceEnd"===this.endPoint,!0))instanceof pm?m=y.id:v=y.id}a={connector:g,state:"Progress",targetNode:v,oldValue:n,newValue:d,cancel:!1,targetPort:m};if(f()&&(a={connector:xs(g),state:"Progress",targetNode:v,oldValue:n,newValue:d,cancel:a.cancel,targetPort:m}),!(this instanceof $b)){l="ConnectorSourceEnd"===this.endPoint?jg.sourcePointChange:jg.targetPointChange;this.commandHandler.triggerEvent(l,a)}if(e.target&&(p=ps(e.target,!0),u=ps(e.target,!1)),!a.cancel&&this.inAction&&void 0!==this.endPoint&&0!==h||0!==c)if(a.cancel||(this.blocked=!this.commandHandler.dragConnectorEnds(this.endPoint,e.source,this.currentPosition,this.selectedSegment,e.target,m),this.commandHandler.updateSelector()),e.target&&("ConnectorSourceEnd"===this.endPoint&&(Pn(e.target)||Rn(u))||"ConnectorTargetEnd"===this.endPoint&&(kn(e.target)||jn(p)))){this.commandHandler.canDisconnect(this.endPoint,e,m,v)&&(i=this.commandHandler.disConnect(e.source,this.endPoint,this.canCancel),this.isConnected=!0);var y;if((y=this.commandHandler.findTarget(e.targetWrapper,e.target,"ConnectorSourceEnd"===this.endPoint,!0))instanceof Pw)(kn(y)&&"ConnectorTargetEnd"===this.endPoint||Pn(y)&&"ConnectorSourceEnd"===this.endPoint)&&(i=this.commandHandler.connect(this.endPoint,e,this.canCancel),this.isConnected=!0);else{this.checkConnect(y)&&(this.isConnected=!0,i=this.commandHandler.connect(this.endPoint,e,this.canCancel))}}else-1===this.endPoint.indexOf("Bezier")&&(this.isConnected=!0,i=this.commandHandler.disConnect(e.source,this.endPoint,this.canCancel),this.commandHandler.updateSelector());if(this.commandHandler.canEnableDefaultTooltip()){var b=this.getTooltipContent(e.position);this.commandHandler.showTooltip(e.source,e.position,b,"ConnectTool",this.isTooltipVisible),this.isTooltipVisible=!1}i&&(this.tempArgs=i)}return this.prevPosition=this.currentPosition,!this.blocked},e.prototype.mouseLeave=function(t){this.mouseUp(t)},e.prototype.getTooltipContent=function(t){return"X:"+Math.round(t.x)+" Y:"+Math.round(t.y)},e.prototype.checkConnect=function(t){return!(!jn(t)||"ConnectorTargetEnd"!==this.endPoint)||(!(!Rn(t)||"ConnectorSourceEnd"!==this.endPoint)||!(t.constraints&Pg.None||jn(t)||Rn(t))&&(void 0==t.constraints||(t.constraints&Pg.Default&~(Pg.InConnect|Pg.OutConnect))>0))},e.prototype.endAction=function(){t.prototype.endAction.call(this),this.prevPosition=null,this.endPoint=null},e}(Fb),Xb=function(t){function e(e,i){var n=t.call(this,e,!0)||this;return n.currentTarget=null,n.canCancel=!1,n.canTrigger=!1,n.objectType=i,n}return Ub(e,t),e.prototype.mouseDown=function(e){if(e.source instanceof Pw||e.source instanceof ES){var i=this.commandHandler.getSelectedObject();this.commandHandler.selectObjects([e.source],e.info&&e.info.ctrlKey,i);var n={nodes:[],connectors:[]};e.source instanceof Pw?n.nodes.push(fa(e.source)):n.connectors.push(fa(e.source)),this.undoElement=fa(n)}else this.undoElement=fa(e.source);this.undoParentElement=this.commandHandler.getSubProcess(e.source),"Port"===this.objectType&&(this.portId=e.sourceWrapper.id),this.commandHandler.insertBlazorConnector(e.source);var r;if(f()){this.commandHandler.insertSelectedObjects(),this.startPosition=this.currentPosition=this.prevPosition=e.position,this.initialOffset={x:0,y:0},e.source&&(r={offsetX:e.source.wrapper.offsetX,offsetY:e.source.wrapper.offsetY});var o={source:fa(e.source),state:"Start",oldValue:r,newValue:{},target:fa(e.target),targetPosition:e.position,allowDrop:!0,cancel:!1};this.tempArgs=o}t.prototype.mouseDown.call(this,e),this.initialOffset={x:0,y:0}},e.prototype.mouseUp=function(e,i){return Vb(this,void 0,void 0,function(){var n,r,o,s,a,l,h,c,d,p,u,g,m,v,y,b,S,w,I,x,M;return _b(this,function(C){switch(C.label){case 0:return f()&&"Port"!==this.objectType?(this.commandHandler.updatePropertiesToBlazor(e,!1),e.source&&(r={offsetX:e.source.wrapper.offsetX,offsetY:e.source.wrapper.offsetY},n={offsetX:e.source.wrapper.offsetX,offsetY:e.source.wrapper.offsetY}),b={state:"Completed",oldValue:xs(this.tempArgs.oldValue),newValue:xs(r),target:xs(this.currentTarget),targetPosition:xs(this.currentPosition),allowDrop:!0,cancel:!1},o=void 0,s="diagram",a="sfBlazor",l="Blazor",window&&window[""+l]&&this.commandHandler[""+s].positionChange?(h={EventName:"positionChange",args:JSON.stringify(b)},[4,window[""+a].updateBlazorDiagramEvents(h,this.commandHandler[""+s])]):[3,2]):[3,3];case 1:o=C.sent(),C.label=2;case 2:o&&o.cancel&&(this.commandHandler.enableCloneObject(!0),this.commandHandler.ismouseEvents(!0),this.canCancel=!0),this.canCancel&&(this.commandHandler.insertBlazorObject(e.source),c=this.tempArgs.oldValue.offsetX-e.source.wrapper.offsetX,d=this.tempArgs.oldValue.offsetY-e.source.wrapper.offsetY,this.commandHandler.dragSelectedObjects(c,d)),C.label=3;case 3:return this.checkPropertyValue(),u=!1,m={nodes:[],connectors:[]},"Port"===this.objectType?[3,8]:(e.source instanceof Pw||e.source instanceof ES?(e.source instanceof Pw?m.nodes.push(fa(e.source)):m.connectors.push(fa(e.source)),p=fa(m),v=e.source.wrapper,p.offsetX=v.offsetX,p.offsetY=v.offsetY):p=fa(e.source),"helper"!==(g=this.commandHandler.renderContainerHelper(e.source)||e.source||this.commandHandler.renderContainerHelper(e.source)).id&&"helper"===g.id||(!(g instanceof _w&&(Math.round(g.width)===Math.round(this.undoElement.width)&&Math.round(g.height)===Math.round(this.undoElement.height)||g.selectedObjects&&1===g.selectedObjects.length))&&g instanceof _w||g.offsetX===this.undoElement.offsetX&&g.offsetY===this.undoElement.offsetY&&g.sourcePoint===this.undoElement.sourcePoint&&g.targetPoint===this.undoElement.targetPoint)&&!this.isSelectionHasConnector(g)||(e.source&&(r={offsetX:e.source.wrapper.offsetX,offsetY:e.source.wrapper.offsetY},n={offsetX:e.source.wrapper.offsetX,offsetY:e.source.wrapper.offsetY}),b={source:e.source,state:"Completed",oldValue:n,newValue:r,target:this.currentTarget,targetPosition:this.currentPosition,allowDrop:!0,cancel:!1},b={source:xs(e.source),state:"Completed",oldValue:xs(n),newValue:xs(r),target:xs(this.currentTarget),targetPosition:xs(this.currentPosition),allowDrop:b.allowDrop,cancel:b.cancel},f()&&(b=this.getBlazorPositionChangeEventArgs(b,this.currentTarget)),f()||("helper"===g.id?this.canTrigger&&(this.commandHandler.triggerEvent(jg.positionChange,b),this.connectorEndPointChangeEvent(b)):(this.commandHandler.triggerEvent(jg.positionChange,b),this.connectorEndPointChangeEvent(b))),i||(this.commandHandler.startGroupAction(),u=!0,M={type:"PositionChanged",redoObject:fa(p),undoObject:fa(this.undoElement),category:"Internal"},p.nodes[0]&&p.nodes[0].processId&&(y={type:"SizeChanged",category:"Internal",undoObject:this.undoParentElement,redoObject:this.commandHandler.getSubProcess(e.source)},this.commandHandler.addHistoryEntry(y)),this.commandHandler.addHistoryEntry(M))),this.commandHandler.snapPoint(this.prevPosition,this.currentPosition,0,0),this.commandHandler.removeSnap(),this.commandHandler.removeHighlighter(),e.source&&this.currentTarget&&Hn(this.currentTarget)&&this.commandHandler.isDroppable(e.source,this.currentTarget)?(this.commandHandler.drop(this.currentElement,this.currentTarget,this.currentPosition),this.currentTarget&&this.currentTarget instanceof ES&&1==this.commandHandler.diagram.enableConnectorSplit&&this.currentElement&&(this.currentElement&&this.currentElement instanceof Pw?this.commandHandler.connectorSplit(this.currentElement,this.currentTarget):this.currentElement instanceof _w&&!this.commandHandler.PreventConnectorSplit&&this.currentElement.nodes.length>0&&(this.commandHandler.connectorSplit(this.currentElement.nodes[0],this.currentTarget),this.commandHandler.PreventConnectorSplit=!1)),b={element:e.source,target:this.currentTarget,position:this.currentPosition,cancel:!1},f()?(b=ws(e,b),[4,this.commandHandler.triggerEvent(jg.drop,b)]):[3,5]):[3,7]);case 4:return b=C.sent()||b,[3,6];case 5:this.commandHandler.triggerEvent(jg.drop,b),C.label=6;case 6:if(!b.cancel&&e.source&&this.commandHandler.isParentAsContainer(this.currentTarget)){for(S=e.source instanceof _w?e.source.nodes:[e.source],w=!1,I=void 0,x=0;x<S.length;x++){if(S[0].parentId!==S[parseInt(x.toString(),10)].parentId){I=!1;break}I=!0}for(x=0;x<S.length;x++)!S[parseInt(x.toString(),10)].container&&I&&(w=!0,this.commandHandler.updateLaneChildrenZindex(S[parseInt(x.toString(),10)],this.currentTarget),this.commandHandler.dropChildToContainer(this.currentTarget,S[parseInt(x.toString(),10)]),this.commandHandler.renderContainerHelper(S[parseInt(x.toString(),10)]));u&&this.commandHandler.isContainer&&w&&this.commandHandler.endGroupAction()}C.label=7;case 7:return e.source&&this.currentTarget&&this.commandHandler.dropAnnotation(e.source,this.currentTarget),this.commandHandler.updateSelector(),u&&!this.commandHandler.isContainer&&this.commandHandler.endGroupAction(),[3,9];case 8:m.nodes.push(fa(e.source)),e.portId=this.portId,p=fa(m),M={type:"PortPositionChanged",objectId:this.portId,redoObject:fa(p),undoObject:fa(this.undoElement),category:"Internal"},this.commandHandler.addHistoryEntry(M),C.label=9;case 9:return this.commandHandler.updateBlazorSelector(),t.prototype.mouseUp.call(this,e),[2]}})})},e.prototype.connectorEndPointChangeEvent=function(t,e){var i=t.source;if(i instanceof _w&&i.nodes.length>0)for(var n=0;n<i.nodes.length;n++){var r=i.nodes[parseInt(n.toString(),10)];if(r&&r.inEdges.length>0)for(var o=0;o<r.inEdges.length;o++){var s=this.commandHandler.diagram.getObject(r.inEdges[parseInt(o.toString(),10)]);this.triggerEndPointEvent(s,t,e,"targetPointChange")}if(r&&r.outEdges.length>0)for(o=0;o<r.outEdges.length;o++){s=this.commandHandler.diagram.getObject(r.outEdges[parseInt(o.toString(),10)]);this.triggerEndPointEvent(s,t,e,"sourcePointChange")}}},e.prototype.triggerEndPointEvent=function(t,e,i,n){var r={connector:t,state:e.state,targetNode:t.targetID,targetPort:t.targetPortID,sourceNode:t.sourceID,sourcePort:t.sourcePortID,oldValue:{x:t.targetPoint.x,y:t.targetPoint.y},newValue:{x:t.targetPoint.x+(i?i.x:0),y:t.targetPoint.y+(i?i.y:0)},cancel:e.cancel};this.commandHandler.triggerEvent("targetPointChange"===n?jg.targetPointChange:jg.sourcePointChange,r)},e.prototype.isSelectionHasConnector=function(t){return!(!(t.nodes&&t.connectors&&t.nodes.length>0&&t.connectors.length>0)||t.width===this.undoElement.width&&t.height===this.undoElement.height)},e.prototype.getBlazorPositionChangeEventArgs=function(t,e){return t={source:xs(t.source),state:t.state,oldValue:t.oldValue,newValue:t.newValue,target:VS(e)===ES?{connector:xs(e)}:{node:xs(e)},targetPosition:this.currentPosition,allowDrop:!0,cancel:!1}},e.prototype.mouseMove=function(e){t.prototype.mouseMove.call(this,e);var i,n=!1;(i=this.commandHandler.renderContainerHelper(e.source)||e.source)instanceof Pw||i instanceof ES?i instanceof Pw?i.offsetX===this.undoElement.nodes[0].offsetX&&i.offsetY===this.undoElement.nodes[0].offsetY&&(n=!0):Gu.equals(i.sourcePoint,this.undoElement.connectors[0].sourcePoint)&&Gu.equals(i.targetPoint,this.undoElement.connectors[0].targetPoint)&&(n=!0):i.wrapper.offsetX===this.undoElement.wrapper.offsetX&&i.wrapper.offsetY===this.undoElement.wrapper.offsetY&&(n=!0);var r;i&&(r={offsetX:i.wrapper.offsetX,offsetY:i.wrapper.offsetY});var o={source:i,state:"Start",oldValue:r,newValue:r,target:e.target,targetPosition:e.position,allowDrop:!0,cancel:!1};if(o={source:xs(i),state:"Start",oldValue:xs(r),newValue:xs(r),target:e.target,targetPosition:e.position,allowDrop:o.allowDrop,cancel:o.cancel},n&&!f()&&(this.commandHandler.triggerEvent(jg.positionChange,o),this.connectorEndPointChangeEvent(o)),this.currentPosition=e.position,"Port"!==this.objectType){this.currentPosition.x,this.prevPosition.x,this.currentPosition.y,this.prevPosition.y;var s=this.initialOffset.x+(this.currentPosition.x-this.prevPosition.x),a=this.initialOffset.y+(this.currentPosition.y-this.prevPosition.y);this.commandHandler.dragOverElement(e,this.currentPosition),this.commandHandler.disConnect(e.source),this.commandHandler.removeSnap();var l,h=void 0,c=this.commandHandler.snapPoint(this.prevPosition,this.currentPosition,s,a);this.initialOffset.x=s-c.x,this.initialOffset.y=a-c.y,i&&(l={offsetX:i.wrapper.offsetX,offsetY:i.wrapper.offsetY},h={offsetX:i.wrapper.offsetX+c.x,offsetY:i.wrapper.offsetY+c.y}),this.currentTarget&&e.target!==this.currentTarget&&this.commandHandler.removeChildFromBPmn(e.source,e.target,this.currentTarget),this.currentTarget=e.target;var d={source:i,state:"Progress",oldValue:l,newValue:h,target:e.target,targetPosition:e.position,allowDrop:!0,cancel:!1};if(f()&&(d=this.getBlazorPositionChangeEventArgs(d,e.target)),f()||(this.commandHandler.triggerEvent(jg.positionChange,d),this.canTrigger=!0,this.connectorEndPointChangeEvent(d,c)),!d.cancel&&!this.canCancel){this.blocked=!this.commandHandler.dragSelectedObjects(c.x,c.y);var p=!this.commandHandler.mouseOver(this.currentElement,this.currentTarget,this.currentPosition);this.blocked=this.blocked||p}if(this.commandHandler.removeStackHighlighter(),this.commandHandler.renderStackHighlighter(e),this.currentTarget&&e.source!==this.currentTarget&&this.commandHandler.isDroppable(e.source,this.currentTarget)&&"helper"!==e.source.id){var u=e.source instanceof _w?e.source.nodes[0]:e.source;this.commandHandler.isParentAsContainer(u,!0)||"SwimLane"===u.shape.type||u.shape.isPhase||(this.currentTarget.isLane?this.commandHandler.renderStackHighlighter(e,this.currentTarget):this.commandHandler.drawHighlighter(this.currentTarget))}else this.commandHandler.removeHighlighter();if(this.commandHandler.canEnableDefaultTooltip()){var g=this.getTooltipContent(e.source);this.commandHandler.showTooltip(e.source,e.position,g,"MoveTool",this.isTooltipVisible),this.isTooltipVisible=!1}}else{var m=Lt(),v=e.source;kt(m,-v.rotateAngle,v.offsetX,v.offsetY);var y=At(m,{x:this.prevPosition.x,y:this.prevPosition.y}),b=At(m,{x:e.position.x,y:e.position.y});this.commandHandler.portDrag(e.source,e.sourceWrapper,b.x-y.x,b.y-y.y)}return this.prevPosition=this.currentPosition,!this.blocked},e.prototype.getTooltipContent=function(t){return"X:"+Math.round(t.wrapper.bounds.x)+" Y:"+Math.round(t.wrapper.bounds.y)},e.prototype.mouseLeave=function(t){this.mouseUp(t)},e.prototype.endAction=function(){t.prototype.endAction.call(this),this.currentTarget=null,this.prevPosition=null},e}(Fb),qb=function(t){function e(e){return t.call(this,e,!0)||this}return Ub(e,t),e.prototype.mouseDown=function(e){if(f()){var i={rotateAngle:(this.commandHandler.renderContainerHelper(e.source)||e.source).wrapper.rotateAngle},n={source:xs(e.source),state:"Start",oldValue:i,newValue:void 0,cancel:!1};this.tempArgs=n,this.tempArgs&&this.tempArgs.cancel&&(this.canCancel=!0)}if(this.undoElement=fa(e.source),this.undoElement.nodes[0]&&this.undoElement.nodes[0].children)for(var r=this.commandHandler.getAllDescendants(this.undoElement.nodes[0],[]),o=0;o<r.length;o++){var s=this.commandHandler.cloneChild(r[parseInt(o.toString(),10)].id);this.childTable[r[parseInt(o.toString(),10)].id]=fa(s)}t.prototype.mouseDown.call(this,e)},e.prototype.mouseUp=function(e){return Vb(this,void 0,void 0,function(){var i,n,r,o,s,a,l,h,c,d,p,u;return _b(this,function(g){switch(g.label){case 0:return this.checkPropertyValue(),f()?(i="diagram",n="sfBlazor",r="Blazor",this.commandHandler.updatePropertiesToBlazor(e,!1),o=this.commandHandler.renderContainerHelper(e.source)||e.source,c={rotateAngle:this.tempArgs.oldValue.rotateAngle},s={rotateAngle:o.wrapper.rotateAngle},d={state:"Completed",oldValue:c,newValue:s,cancel:!1},a=void 0,window&&window[""+r]&&this.commandHandler[""+i].rotateChange?(l={EventName:"rotateChange",args:JSON.stringify(d)},[4,window[""+n].updateBlazorDiagramEvents(l,this.commandHandler[""+i])]):[3,2]):[3,3];case 1:a=g.sent(),g.label=2;case 2:a&&a.cancel&&(this.commandHandler.enableCloneObject(!0),this.commandHandler.ismouseEvents(!0),this.canCancel=!0),this.canCancel&&(this.commandHandler.insertBlazorObject(e.source),this.commandHandler.rotatePropertyChnage(this.tempArgs.oldValue.rotateAngle)),g.label=3;case 3:return h=this.commandHandler.renderContainerHelper(e.source)||e.source,this.undoElement.rotateAngle!==h.wrapper.rotateAngle&&(c={rotateAngle:h.wrapper.rotateAngle},d={source:e.source,state:"Completed",oldValue:c,newValue:c,cancel:!1},f()||this.commandHandler.triggerEvent(jg.rotateChange,d),p=void 0,p=fa(e.source),u={type:"RotationChanged",redoObject:fa(p),undoObject:fa(this.undoElement),category:"Internal",childTable:this.childTable},this.commandHandler.addHistoryEntry(u),this.commandHandler.updateSelector()),this.commandHandler.updateBlazorSelector(),this.canCancel=void 0,this.tempArgs=void 0,t.prototype.mouseUp.call(this,e),[2]}})})},e.prototype.mouseMove=function(e){t.prototype.mouseMove.call(this,e);var i;if(i=this.commandHandler.renderContainerHelper(e.source)||e.source,this.undoElement.rotateAngle===i.wrapper.rotateAngle){var n={rotateAngle:i.wrapper.rotateAngle},r={source:e.source,state:"Start",oldValue:n,newValue:n,cancel:!1};f()||this.commandHandler.triggerEvent(jg.rotateChange,r)}this.currentPosition=e.position;var o={x:i.wrapper.offsetX,y:i.wrapper.offsetY},s=Gu.findAngle(o,this.currentPosition)+90,a=this.commandHandler.snapAngle(s);s=((s=0!==a?a:s)+360)%360;var l={rotateAngle:i.wrapper.rotateAngle},h={rotateAngle:s},c=(e.source,!1),d={source:xs(e.source),state:"Progress",oldValue:xs(l),newValue:xs(h),cancel:c};if(f()||this.commandHandler.triggerEvent(jg.rotateChange,d),(!f()&&!d.cancel||f()&&!this.canCancel)&&(this.blocked=!this.commandHandler.rotateSelectedItems(s-i.wrapper.rotateAngle)),this.commandHandler.canEnableDefaultTooltip()){var p=this.getTooltipContent(e.source);this.commandHandler.showTooltip(e.source,e.position,p,"RotateTool",this.isTooltipVisible),this.isTooltipVisible=!1}return!this.blocked},e.prototype.getTooltipContent=function(t){return Math.round(t.rotateAngle%360).toString()+"°"},e.prototype.mouseLeave=function(t){this.mouseUp(t)},e.prototype.endAction=function(){t.prototype.endAction.call(this)},e}(Fb),Gb=function(t){function e(e,i){var n=t.call(this,e,!0)||this;return n.initialBounds=new Zu,n.canCancel=!1,n.corner=i,n}return Ub(e,t),e.prototype.mouseDown=function(e){var i;if(f()){this.commandHandler.insertSelectedObjects(),this.startPosition=this.currentPosition=this.prevPosition=e.position,this.currentElement=e.source,this.initialBounds.x=e.source.wrapper.offsetX,this.initialBounds.y=e.source.wrapper.offsetY,this.initialBounds.height=e.source.wrapper.actualSize.height,this.initialBounds.width=e.source.wrapper.actualSize.width,e.source&&(i={offsetX:e.source.wrapper.offsetX,offsetY:e.source.wrapper.offsetY,width:e.source.wrapper.actualSize.width,height:e.source.wrapper.actualSize.height});var n={source:xs(e.source),state:"Start",oldValue:i,newValue:xs(this.currentElement),cancel:!1};this.tempArgs=n}if(this.undoElement=fa(e.source),this.undoParentElement=this.commandHandler.getSubProcess(e.source),t.prototype.mouseDown.call(this,e),this.undoElement.nodes[0]&&this.undoElement.nodes[0].children)for(var r=this.commandHandler.getAllDescendants(this.undoElement.nodes[0],[]),o=0;o<r.length;o++){var s=this.commandHandler.cloneChild(r[parseInt(o.toString(),10)].id);this.childTable[r[parseInt(o.toString(),10)].id]=fa(s)}this.commandHandler.checkSelection(e.source,this.corner),t.prototype.mouseDown.call(this,e),this.initialBounds.x=e.source.wrapper.offsetX,this.initialBounds.y=e.source.wrapper.offsetY,this.initialBounds.height=e.source.wrapper.actualSize.height,this.initialBounds.width=e.source.wrapper.actualSize.width},e.prototype.mouseUp=function(e,i){return Vb(this,void 0,void 0,function(){var n,r,o,s,a,l,h,c,d,p,u,g,m,v,y;return _b(this,function(b){switch(b.label){case 0:return f()?(n="diagram",r="sfBlazor",o="Blazor",this.commandHandler.updatePropertiesToBlazor(e,!1),m=fa(e.source),s={width:e.source.wrapper.actualSize.width,height:e.source.wrapper.actualSize.height,offsetX:e.source.wrapper.offsetX,offsetY:e.source.wrapper.offsetY},g={oldValue:this.tempArgs.oldValue,newValue:s,cancel:!1,state:"Completed"},this.canCancel?[3,3]:(a=void 0,window&&window[""+o]&&this.commandHandler[""+n].sizeChange?(l={EventName:"sizeChange",args:JSON.stringify(g)},[4,window[""+r].updateBlazorDiagramEvents(l,this.commandHandler[""+n])]):[3,2])):[3,4];case 1:a=b.sent(),b.label=2;case 2:a&&a.cancel&&(this.commandHandler.enableCloneObject(!0),this.commandHandler.ismouseEvents(!0),this.commandHandler.insertBlazorObject(e.source),h=this.tempArgs.oldValue.width/m.wrapper.actualSize.width,c=this.tempArgs.oldValue.height/m.wrapper.actualSize.height,this.commandHandler.scaleSelectedItems(h,c,this.getPivot(this.corner))),b.label=3;case 3:this.tempArgs=void 0,this.canCancel=void 0,b.label=4;case 4:return this.checkPropertyValue(),this.commandHandler.removeSnap(),this.commandHandler.updateSelector(),d=this.commandHandler.renderContainerHelper(e.source)||e.source,this.undoElement.offsetX===d.wrapper.offsetX&&this.undoElement.offsetY===d.wrapper.offsetY&&this.undoElement.width===d.wrapper.bounds.width&&this.undoElement.height===d.wrapper.bounds.height||(f()||(p=this.updateSize(e.source,this.currentPosition,this.prevPosition,this.corner,this.initialBounds),this.blocked=this.scaleObjects(p.width,p.height,this.corner,this.currentPosition,this.prevPosition,d),u={offsetX:e.source.wrapper.offsetX,offsetY:e.source.wrapper.offsetY,width:e.source.wrapper.actualSize.width,height:e.source.wrapper.actualSize.height},g={source:xs(e.source),state:"Completed",oldValue:u,newValue:u,cancel:!1},this.commandHandler.triggerEvent(jg.sizeChange,g)),m=fa(e.source),v={type:"SizeChanged",redoObject:fa(m),undoObject:fa(this.undoElement),category:"Internal",childTable:this.childTable},i||(this.commandHandler.startGroupAction(),this.commandHandler.addHistoryEntry(v),m.nodes[0]&&m.nodes[0].processId&&(y={type:"SizeChanged",redoObject:this.commandHandler.getSubProcess(e.source),undoObject:this.undoParentElement,category:"Internal"},this.commandHandler.addHistoryEntry(y)),this.commandHandler.endGroupAction())),this.commandHandler.updateBlazorSelector(),t.prototype.mouseUp.call(this,e),[2,!this.blocked]}})})},e.prototype.mouseMove=function(e){t.prototype.mouseMove.call(this,e);var i;if(i=this.commandHandler.renderContainerHelper(e.source)||e.source,this.undoElement.offsetX===i.wrapper.offsetX&&this.undoElement.offsetY===i.wrapper.offsetY){var n={offsetX:e.source.wrapper.offsetX,offsetY:e.source.wrapper.offsetY,width:e.source.wrapper.actualSize.width,height:e.source.wrapper.actualSize.height},r={source:e.source,state:"Start",oldValue:n,newValue:this.currentElement,cancel:!1};f()||this.commandHandler.triggerEvent(jg.sizeChange,r)}this.currentPosition=e.position;var o={x:this.currentPosition.x-this.startPosition.x,y:this.currentPosition.y-this.startPosition.y};o=Da(-this.currentElement.wrapper.rotateAngle,void 0,void 0,o);this.currentElement.wrapper.actualSize.width,o.x,this.currentElement.wrapper.actualSize.width,this.currentElement.wrapper.actualSize.height,o.y,this.currentElement.wrapper.actualSize.height;o=this.getChanges(o),this.commandHandler.removeSnap();var s=this.updateSize(e.source,this.startPosition,this.currentPosition,this.corner,this.initialBounds);if(this.blocked=!this.scaleObjects(s.width,s.height,this.corner,this.startPosition,this.currentPosition,i),this.commandHandler.canEnableDefaultTooltip()){var a=this.getTooltipContent(e.source);this.commandHandler.showTooltip(e.source,e.position,a,"ResizeTool",this.isTooltipVisible),this.isTooltipVisible=!1}return this.prevPosition=this.currentPosition,!this.blocked},e.prototype.mouseLeave=function(t){this.mouseUp(t)},e.prototype.getTooltipContent=function(t){return"W:"+Math.round(t.wrapper.bounds.width)+" H:"+Math.round(t.wrapper.bounds.height)},e.prototype.getChanges=function(t){switch(this.corner){case"ResizeEast":return{x:t.x,y:0};case"ResizeSouthEast":return t;case"ResizeSouth":return{x:0,y:t.y};case"ResizeNorth":return{x:0,y:-t.y};case"ResizeNorthEast":return{x:t.x,y:-t.y};case"ResizeNorthWest":return{x:-t.x,y:-t.y};case"ResizeWest":return{x:-t.x,y:0};case"ResizeSouthWest":return{x:-t.x,y:t.y}}return t},e.prototype.scaleObjects=function(t,e,i,n,r,o){o instanceof _w&&1===o.nodes.length&&o.nodes[0].constraints&wg.AspectRatio&&("ResizeWest"===i||"ResizeEast"===i||"ResizeNorth"===i||"ResizeSouth"===i?1===e&&1===t||(e=t=Math.max(1===e?0:e,1===t?0:t)):e=t=n!==r?Math.max(e,t):0);var s={offsetX:o.offsetX,offsetY:o.offsetY,width:o.width,height:o.height};this.blocked=this.commandHandler.scaleSelectedItems(t,e,this.getPivot(this.corner));var a,l={offsetX:o.offsetX,offsetY:o.offsetY,width:o.width,height:o.height};a={source:o,state:"Progress",oldValue:s,newValue:l,cancel:!1};var h;return h={source:xs(o),state:"Progress",oldValue:xs(s),newValue:xs(l),cancel:a.cancel},f()||this.commandHandler.triggerEvent(jg.sizeChange,h),(h.cancel||this.canCancel)&&this.commandHandler.scaleSelectedItems(1/t,1/e,this.getPivot(this.corner)),this.blocked},e}(Fb),Zb=function(t){function e(e,i){var n=t.call(this,e,!0)||this;return n.sourceObject=i,n}return Ub(e,t),e.prototype.mouseDown=function(e){t.prototype.mouseDown.call(this,e),this.inAction=!0,this.commandHandler.setFocus(),this.triggerElementDrawEvent(e.source,"Start","Node",this.getShapeType(),!0)},e.prototype.mouseMove=function(e){t.prototype.mouseMove.call(this,e);var i,n={offsetX:this.currentPosition.x,width:3,height:3,offsetY:this.currentPosition.y};if(this.drawingObject||(this.drawingObject=this.commandHandler.drawObject(n)),this.triggerElementDrawEvent(this.drawingObject,"Progress","Node",this.getShapeType(),!1),this.inAction&&!1===Gu.equals(this.currentPosition,this.prevPosition)){var r=Zu.toBounds([this.prevPosition,this.currentPosition]);(i=this.commandHandler.checkBoundaryConstraints(void 0,void 0,r))&&this.commandHandler.updateNodeDimension(this.drawingObject,r)}return i},e.prototype.mouseUp=function(e){this.checkPropertyValue();var i=Zu.toBounds([this.prevPosition,this.currentPosition]);this.commandHandler.checkBoundaryConstraints(void 0,void 0,i),this.drawingObject&&this.drawingObject instanceof Pw&&(this.commandHandler.addObjectToDiagram(this.drawingObject),this.triggerElementDrawEvent(this.drawingObject,"Completed","Node",this.getShapeType(),!1),this.drawingObject=null),this.commandHandler.updateBlazorSelector(),t.prototype.mouseUp.call(this,e),this.inAction=!1},e.prototype.endAction=function(){t.prototype.endAction.call(this)},e.prototype.mouseLeave=function(t){this.inAction&&this.mouseUp(t)},e}(Fb),$b=function(t){function e(e,i,n){var r=t.call(this,e,i)||this;return r.sourceObject=n,r}return Ub(e,t),e.prototype.mouseDown=function(e){return Vb(this,void 0,void 0,function(){return _b(this,function(i){return t.prototype.mouseDown.call(this,e),this.inAction=!0,this.commandHandler.setFocus(),this.triggerElementDrawEvent(e.source,"Start","Connector",this.commandHandler.diagram.drawingObject.type,!0),[2]})})},e.prototype.mouseMove=function(e){if(this.commandHandler.enableServerDataBinding(!1),this.inAction){var i={sourcePoint:this.currentPosition,targetPoint:this.currentPosition};this.drawingObject||(this.drawingObject=this.commandHandler.drawObject(i)),e.source=this.drawingObject,this.triggerElementDrawEvent(e.source,"Progress","Connector",this.drawingObject.type,!1),(e.target&&e.target instanceof Pw||e.actualObject&&e.sourceWrapper&&XS(e.actualObject,e.sourceWrapper))&&("ConnectorTargetEnd"!==this.endPoint||kn(e.target))&&this.commandHandler.connect(this.endPoint,e),this.endPoint="ConnectorTargetEnd"}return this.inAction||(this.commandHandler.updateSelector(),e.source&&e.sourceWrapper&&this.commandHandler.renderHighlighter(e,!0)),t.prototype.mouseMove.call(this,e),this.commandHandler.enableServerDataBinding(!0),!this.blocked},e.prototype.mouseUp=function(e){return Vb(this,void 0,void 0,function(){return _b(this,function(i){return this.commandHandler.enableServerDataBinding(!1),this.checkPropertyValue(),this.drawingObject&&this.drawingObject instanceof ES&&(this.commandHandler.addObjectToDiagram(this.drawingObject),this.triggerElementDrawEvent(this.drawingObject,"Completed","Connector",this.drawingObject.type,!1),this.drawingObject=null),this.commandHandler.updateBlazorSelector(),this.inAction=!1,this.commandHandler.enableServerDataBinding(!0),t.prototype.mouseUp.call(this,e),[2]})})},e.prototype.endAction=function(){t.prototype.endAction.call(this)},e.prototype.mouseLeave=function(t){this.inAction&&this.mouseUp(t)},e}(Qb),Kb=function(t){function e(e){return t.call(this,e,!0)||this}return Ub(e,t),e.prototype.mouseDown=function(e){t.prototype.mouseDown.call(this,e),this.commandHandler.clearSelection();var i={shape:{type:"Text"},offsetX:this.currentPosition.x,offsetY:this.currentPosition.y};e.source||(this.drawingNode=this.commandHandler.drawObject(i))},e.prototype.mouseMove=function(e){if(t.prototype.mouseMove.call(this,e),this.drawingNode)this.drawingNode.style.strokeColor="black",this.drawingNode.style.strokeDashArray="2 2",this.drawingNode.style.fill="transparent";else{var i={shape:{type:"Text"},offsetX:this.currentPosition.x,width:30,height:30,offsetY:this.currentPosition.y};this.drawingNode=this.commandHandler.drawObject(i),this.drawingNode.style.strokeDashArray="2 2",this.drawingNode.style.fill="transparent"}if(this.inAction&&!1===Gu.equals(this.currentPosition,this.prevPosition)){var n=Zu.toBounds([this.prevPosition,this.currentPosition]);this.commandHandler.updateNodeDimension(this.drawingNode,n)}return!this.blocked},e.prototype.mouseUp=function(e){this.checkPropertyValue(),this.drawingNode?(this.drawingNode.style.strokeColor="none",this.drawingNode.style.fill="none"):this.drawingNode=e.source,this.drawingNode&&(this.drawingNode instanceof Pw||this.drawingNode instanceof ES)&&this.commandHandler.addText(this.drawingNode,this.currentPosition),t.prototype.mouseUp.call(this,e),this.inAction=!1},e.prototype.endAction=function(){t.prototype.endAction.call(this)},e}(Fb),Jb=function(t){function e(e,i){var n=t.call(this,e)||this;return n.zooming=i,n}return Ub(e,t),e.prototype.mouseDown=function(e){t.prototype.mouseDown.call(this,e),this.inAction=!0,this.commandHandler.setBlazorDiagramProps(!0)},e.prototype.mouseMove=function(e){if(t.prototype.mouseMove.call(this,e),this.inAction)if(this.zooming||!1!==Gu.equals(this.currentPosition,this.prevPosition)){if(e.moveTouches&&e.moveTouches.length&&e.moveTouches.length>=2){var i=e.startTouches[0],n=e.startTouches[1],r=e.moveTouches[0],o=e.moveTouches[1],s=this.getDistance(r,o)/this.getDistance(i,n),a=e.position;this.commandHandler.zoom(s,0,0,a),this.updateTouch(i,r),this.updateTouch(n,o)}}else{var l=this.currentPosition.x-this.prevPosition.x,h=this.currentPosition.y-this.prevPosition.y;this.commandHandler.scroll(l,h,this.currentPosition)}return this.commandHandler.dataBinding(),!this.blocked},e.prototype.mouseUp=function(e){this.commandHandler.setBlazorDiagramProps(!1),this.checkPropertyValue(),this.commandHandler.updatePanState(!1),t.prototype.mouseUp.call(this,e),this.inAction=!1},e.prototype.endAction=function(){t.prototype.endAction.call(this)},e.prototype.getDistance=function(t,e){var i=e.pageX-t.pageX,n=e.pageY-t.pageY;return Math.sqrt(i*i+n*n)},e.prototype.updateTouch=function(t,e){t.pageX=e.pageX,t.pageY=e.pageY},e}(Fb),tS=function(t){function e(e){return t.call(this,e,!0)||this}return Ub(e,t),e.prototype.mouseUp=function(e){this.checkPropertyValue(),this.commandHandler.initExpand(e),t.prototype.mouseUp.call(this,e)},e}(Fb),eS=function(t){function e(e){return t.call(this,e,!0)||this}return Ub(e,t),e.prototype.mouseUp=function(e){this.checkPropertyValue();var i="_blank",n="",r=window.innerHeight,o=window.innerWidth,s=window.screenTop,a=window.screenLeft;"CurrentTab"==e.sourceWrapper.hyperlink.hyperlinkOpenState?i="_self":"NewWindow"==e.sourceWrapper.hyperlink.hyperlinkOpenState&&(n="height="+r+",width="+o+",top="+s+",left="+a);window.open(e.sourceWrapper.hyperlink.link,i,n).focus(),t.prototype.mouseUp.call(this,e)},e}(Fb),iS=function(t){function e(e){return t.call(this,e,!0)||this}return Ub(e,t),e.prototype.mouseDown=function(e){if(t.prototype.mouseDown.call(this,e),this.inAction=!0,this.drawingObject){var i=void 0,n=this.drawingObject.shape;i={x:(i=n.points[n.points.length-1]).x,y:i.y},this.drawingObject.shape.points.push(i)}else{this.startPoint={x:this.startPosition.x,y:this.startPosition.y};var r={offsetX:this.currentPosition.x,offsetY:this.currentPosition.y,width:5,height:5,style:{strokeColor:"black",strokeWidth:1},shape:{type:"Basic",shape:"Polygon",points:[{x:this.startPoint.x,y:this.startPoint.y},{x:this.currentPosition.x,y:this.currentPosition.y}]}};f()&&"Basic"===r.shape.type&&(r.shape.basicShape="Polygon"),this.drawingObject=this.commandHandler.drawObject(r)}},e.prototype.mouseMove=function(e){if(t.prototype.mouseMove.call(this,e),this.inAction){var i=this.drawingObject.shape;if(this.drawingObject&&this.currentPosition&&(i.points[i.points.length-1].x=this.currentPosition.x,i.points[i.points.length-1].y=this.currentPosition.y,this.drawingObject.wrapper.children[0].data=It(this.drawingObject.shape.points),this.inAction&&!1===Gu.equals(this.currentPosition,this.prevPosition))){var n=Zu.toBounds(this.drawingObject.shape.points);this.commandHandler.updateNodeDimension(this.drawingObject,n)}}return!0},e.prototype.mouseUp=function(e,i){this.checkPropertyValue(),t.prototype.mouseMove.call(this,e),this.inAction&&(this.inAction=!1,this.drawingObject&&this.commandHandler.addObjectToDiagram(this.drawingObject)),this.endAction()},e.prototype.mouseWheel=function(e){t.prototype.mouseWheel.call(this,e),this.mouseMove(e)},e.prototype.endAction=function(){this.inAction=!1,this.drawingObject=null},e}(Fb),nS=function(t){function e(e){return t.call(this,e,!0)||this}return Ub(e,t),e.prototype.mouseMove=function(e){if(t.prototype.mouseMove.call(this,e),this.inAction){var i=this.drawingObject;i.targetPoint=this.currentPosition,this.commandHandler.updateConnectorPoints(i)}return!0},e.prototype.mouseDown=function(e){if(t.prototype.mouseDown.call(this,e),this.inAction=!0,this.drawingObject){var i=this.drawingObject,n=void 0;(n=new bS(i,"segments",{type:"Straight"},!0)).point=this.currentPosition,i.segments[i.segments.length-1]=n}else{var r={id:"Connector",type:"Straight",sourcePoint:this.currentPosition,targetPoint:this.currentPosition};this.drawingObject=this.commandHandler.drawObject(r)}},e.prototype.mouseWheel=function(e){t.prototype.mouseWheel.call(this,e),this.mouseMove(e)},e.prototype.mouseUp=function(e){if(this.checkPropertyValue(),t.prototype.mouseMove.call(this,e),this.inAction&&this.drawingObject){var i=this.drawingObject;i.segments[i.segments.length-1].point={x:0,y:0},this.commandHandler.addObjectToDiagram(this.drawingObject)}this.endAction()},e.prototype.endAction=function(){this.drawingObject=null,this.inAction=!1},e}(Fb),rS=function(t){function e(e){return t.call(this,e,!0)||this}return Ub(e,t),e.prototype.mouseDown=function(e){this.inAction=!0,this.undoElement=fa(e.source),this.annotationId=e.sourceWrapper.id,t.prototype.mouseDown.call(this,e)},e.prototype.mouseMove=function(e){t.prototype.mouseMove.call(this,e);var i=this.currentPosition.x-this.prevPosition.x,n=this.currentPosition.y-this.prevPosition.y,r=e.source;if(r instanceof Pw){var o=Lt();kt(o,-r.rotateAngle,0,0);var s=At(o,{x:i,y:n});i=s.x,n=s.y}return this.inAction&&(this.commandHandler.labelDrag(e.source,e.sourceWrapper,i,n),this.commandHandler.updateSelector()),this.prevPosition=this.currentPosition,!this.blocked},e.prototype.mouseUp=function(e){this.checkPropertyValue();var i=e.source;this.inAction=!1;var n={type:"AnnotationPropertyChanged",objectId:this.annotationId,undoObject:fa(this.undoElement),category:"Internal",redoObject:fa(i)};this.commandHandler.addHistoryEntry(n),t.prototype.mouseUp.call(this,e)},e.prototype.mouseLeave=function(t){this.mouseUp(t)},e}(Fb),oS=function(t){function e(e,i){var n=t.call(this,e,!0)||this;return n.corner=i,n}return Ub(e,t),e.prototype.mouseDown=function(e){this.inAction=!0;var i=e.source.nodes.length?e.source.nodes[0]:e.source.connectors[0];this.annotationId=e.source.wrapper.children[0].id,this.undoElement=fa(i);var n=e.source.wrapper.children[0];this.initialBounds={x:n.offsetX,y:n.offsetY,width:n.actualSize.width,height:n.actualSize.height},t.prototype.mouseDown.call(this,e)},e.prototype.mouseMove=function(e){return t.prototype.mouseMove.call(this,e),this.inAction&&this.resizeObject(e),!this.blocked},e.prototype.mouseUp=function(e){this.checkPropertyValue();var i=e.source.nodes.length?e.source.nodes[0]:e.source.connectors[0];this.inAction=!1;var n={type:"AnnotationPropertyChanged",objectId:this.annotationId,redoObject:fa(i),undoObject:fa(this.undoElement),category:"Internal"};this.commandHandler.addHistoryEntry(n),t.prototype.mouseUp.call(this,e)},e.prototype.mouseLeave=function(t){this.mouseUp(t)},e.prototype.resizeObject=function(t){var e;e=t.source.nodes.length?t.source.nodes[0]:t.source.connectors[0];var i,n,r=t.source.wrapper.children[0],o={x:r.offsetX,y:r.offsetY},s=r.rotateAngle;s=((s+=e instanceof Pw?e.rotateAngle:0)+360)%360;var a=Lt();kt(a,s,o.x,o.y);var l=this.corner.slice(5),h=this.updateSize(r,this.startPosition,this.currentPosition,l,this.initialBounds,s),c=r.offsetX-r.actualSize.width*r.pivot.x,d=r.offsetY-r.actualSize.height*r.pivot.y,p=this.getPivot(l),u=At(a,p={x:c+r.actualSize.width*p.x,y:d+r.actualSize.height*p.y});h.x=u.x,h.y=u.y,i=h.width,n=h.height,i=i<0?1:i,n=n<0?1:n,this.commandHandler.labelResize(e,t.source.annotation,i,n,h,t.source),this.commandHandler.updateSelector()},e}(Fb),sS=function(t){function e(e){return t.call(this,e,!0)||this}return Ub(e,t),e.prototype.mouseDown=function(e){this.inAction=!0,this.annotationId=e.source.wrapper.children[0].id;var i=e.source.nodes.length?e.source.nodes[0]:e.source.connectors[0];this.undoElement=fa(i),t.prototype.mouseDown.call(this,e)},e.prototype.mouseMove=function(e){if(t.prototype.mouseMove.call(this,e),e.source&&this.inAction){var i=e.source.nodes[0]?e.source.nodes[0]:e.source.connectors[0],n=void 0;n=e.source.annotation,this.commandHandler.labelRotate(i,n,this.currentPosition,e.source),this.commandHandler.updateSelector()}return this.prevPosition=this.currentPosition,!this.blocked},e.prototype.mouseUp=function(e){this.checkPropertyValue(),this.inAction=!1;var i=e.source.nodes.length?e.source.nodes[0]:e.source.connectors[0],n={type:"AnnotationPropertyChanged",objectId:this.annotationId,redoObject:fa(i),undoObject:fa(this.undoElement),category:"Internal"};this.commandHandler.addHistoryEntry(n),t.prototype.mouseUp.call(this,e)},e.prototype.mouseLeave=function(t){this.mouseUp(t)},e}(Fb),aS=function(t){function e(e){return t.call(this,e,!0)||this}return Ub(e,t),e.prototype.mouseMove=function(e){if(t.prototype.mouseMove.call(this,e),this.inAction){var i=this.drawingObject.shape;if(this.drawingObject&&this.currentPosition){var n=this.currentPosition;if(i.points.push(n),this.drawingObject.wrapper.children[0].data=xt(this.drawingObject.shape.points),i.data=xt(i.points),this.inAction&&!1===Gu.equals(this.currentPosition,this.prevPosition)){var r=Zu.toBounds(this.drawingObject.shape.points);this.commandHandler.updateNodeDimension(this.drawingObject,r)}}}return!0},e.prototype.mouseDown=function(e){if(t.prototype.mouseDown.call(this,e),this.inAction=!0,!this.drawingObject){this.startPoint={x:this.startPosition.x,y:this.startPosition.y};var i={offsetX:this.currentPosition.x,offsetY:this.currentPosition.y,width:5,height:5,style:{strokeColor:"black",strokeWidth:1,fill:"transparent"},shape:{type:"Path",points:[{x:this.startPoint.x,y:this.startPoint.y},{x:this.currentPosition.x,y:this.currentPosition.y}]}};this.drawingObject=this.commandHandler.drawObject(i)}},e.prototype.mouseUp=function(e){this.checkPropertyValue();if(this.inAction&&(this.inAction=!1,this.drawingObject)){var i=this.drawingObject.shape,n=i.points;this.commandHandler.addObjectToDiagram(this.drawingObject);var r=this.drawingObject.id,o=this.commandHandler.diagram.nameTable[""+r];this.commandHandler.diagram.remove(o),n=this.pointReduction(n,10);var s={id:"newConnector"+da(),type:"Bezier",sourcePoint:{x:n[0].x,y:n[0].y},targetPoint:{x:n[n.length-1].x,y:n[n.length-1].y},segments:[],targetDecorator:{shape:"None"},bezierSettings:{allowSegmentsReset:!1}};this.drawingObject=this.commandHandler.drawObject(s),this.drawingObject=this.bezierCurveSmoothness(n,.5,this.drawingObject,i),this.commandHandler.updateConnectorPoints(this.drawingObject),this.commandHandler.addObjectToDiagram(this.drawingObject),t.prototype.mouseUp.call(this,e)}},e.prototype.pointReduction=function(t,e){if(null===t||t.length<3)return t;var i=t.length-1,n=[];for(n.push(0),n.push(i);t[parseInt((0).toString(),10)]===t[parseInt(i.toString(),10)];)i--;this.reduction(t,0,i,e,n);var r=[];return n.sort(function(t,e){return t-e}),n.forEach(function(e){r.push(t[parseInt(e.toString(),10)])}),r},e.prototype.reduction=function(t,e,i,n,r){for(var o=0,s=0,a=e;a<i;a++){var l=this.perpendicularDistance(t[parseInt(e.toString(),10)],t[parseInt(i.toString(),10)],t[parseInt(a.toString(),10)]);l>o&&(o=l,s=a)}o>n&&0!==s&&(r.push(s),this.reduction(t,e,s,n,r),this.reduction(t,s,i,n,r))},e.prototype.perpendicularDistance=function(t,e,i){return Math.abs(.5*(t.x*e.y-e.x*t.y+(e.x*i.y-i.x*e.y)+(i.x*t.y-t.x*i.y)))/Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))*2},e.prototype.bezierCurveSmoothness=function(t,e,i,n){if(t.length<3)return i;for(var r=0;r<t.length-1;r++){var o=t[parseInt(r.toString(),10)].x,s=t[parseInt(r.toString(),10)].y,a=t[r+1].x,l=t[r+1].y,h=void 0,c=void 0;if(0===r){var d=t[parseInt(r.toString(),10)];h=d.x,c=d.y}else h=t[r-1].x,c=t[r-1].y;var p=void 0,u=void 0;if(r===t.length-2){var g=t[r+1];p=g.x,u=g.y}else p=t[r+2].x,u=t[r+2].y;var m=(h+o)/2,f=(c+s)/2,v=(o+a)/2,y=(s+l)/2,b=(a+p)/2,S=(l+u)/2,w={},I={},x={},M={};w.x=h,w.y=c,I.x=o,I.y=s,x.x=a,x.y=l,M.x=p,M.y=u;var C=Gu.findLength(w,I),N=Gu.findLength(I,x),E=C/(C+N),D=N/(N+Gu.findLength(x,M)),T=m+(v-m)*E,O=f+(y-f)*E,L=v+(b-v)*D,A=y+(S-y)*D,z=T+(v-T)*e+o-T,k=O+(y-O)*e+s-O,j=L+(v-L)*e+a-L,P=A+(y-A)*e+l-A,R=new SS(n,"segments",{type:"Bezier"},!0),B={x:z,y:k},H={x:j,y:P},U={x:o,y:s},V={x:a,y:l};R.type="Bezier",i.segments[parseInt(r.toString(),10)]=R,0===r&&(B={x:o,y:s}),r===t.length-2&&(H={x:a,y:l}),i.segments[parseInt(r.toString(),10)].vector1={angle:ge(U,B),distance:Gu.findLength(U,B)},i.segments[parseInt(r.toString(),10)].vector2={angle:ge(V,H),distance:Gu.findLength(V,H)},i.segments[parseInt(r.toString(),10)].point=V}return i},e}(Fb),lS=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),hS=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},cS=function(t){if(f())return NS;if(t)switch(t.type){case"Bpmn":return vS;case"UmlActivity":return fS;case"UmlClassifier":return CS;default:return mS}return mS},dS=function(t){if(t){if(f())return IS;switch(t.type){case"Straight":return bS;case"Bezier":return SS;case"Orthogonal":return wS;default:return bS}}},pS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return lS(e,t),hS([W(10)],e.prototype,"width",void 0),hS([W(10)],e.prototype,"height",void 0),hS([W("Arrow")],e.prototype,"shape",void 0),hS([Q({fill:"black",strokeColor:"black",strokeWidth:1},cg)],e.prototype,"style",void 0),hS([Q({x:0,y:.5},Gu)],e.prototype,"pivot",void 0),hS([W("")],e.prototype,"pathData",void 0),e}(Rp),uS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return lS(e,t),hS([W(0)],e.prototype,"angle",void 0),hS([W(0)],e.prototype,"distance",void 0),e}(Rp),gS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return lS(e,t),hS([W(Rg.All)],e.prototype,"controlPointsVisibility",void 0),hS([W("FreeForm")],e.prototype,"segmentEditOrientation",void 0),hS([W(Vg.Default)],e.prototype,"smoothness",void 0),hS([W(!0)],e.prototype,"allowSegmentsReset",void 0),e}(Rp),mS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return lS(e,t),hS([W("None")],e.prototype,"type",void 0),e}(Rp),fS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return lS(e,t),hS([W("Object")],e.prototype,"flow",void 0),hS([W(30)],e.prototype,"exceptionFlowHeight",void 0),e}(mS),vS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return lS(e,t),hS([W("Sequence")],e.prototype,"flow",void 0),hS([W("Normal")],e.prototype,"sequence",void 0),hS([W("Default")],e.prototype,"message",void 0),hS([W("Default")],e.prototype,"association",void 0),e}(mS),yS=function(t){function e(e,i,n,r){var o=t.call(this,e,i,n,r)||this;return o.points=[],o}return lS(e,t),hS([W("Straight")],e.prototype,"type",void 0),hS([W(!0)],e.prototype,"allowDrag",void 0),e}(Rp),bS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return lS(e,t),e.prototype.getClassName=function(){return"StraightSegment"},hS([Q({x:0,y:0},Gu)],e.prototype,"point",void 0),e}(yS),SS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return lS(e,t),e.prototype.getClassName=function(){return"BezierSegment"},e.prototype.getPoints=function(t,e){var i=[];if(i.length>0||null!=e){var n=i.length>0?i[i.length-1]:e,r=this.bezireToPoly(n,t);i.push.apply(i,r)}return i},e.prototype.bezireToPoly=function(t,e){var i=[];if(e){var n=e,r=t,o=n.bezierPoint1,s=n.bezierPoint2,a={x:n.points[1].x,y:n.points[1].y};this.flattenCubicBezier(i,r,o,s,a,10)}return i},e.prototype.flattenCubicBezier=function(t,e,i,n,r,o){var s,a=(Gu.findLength(e,i)+Gu.findLength(i,n)+Gu.findLength(n,r))/o;for(s=0;s<=a;s++){var l=s/a,h=(1-l)*(1-l)*(1-l)*e.x+3*l*(1-l)*(1-l)*i.x+3*l*l*(1-l)*n.x+l*l*l*r.x,c=(1-l)*(1-l)*(1-l)*e.y+3*l*(1-l)*(1-l)*i.y+3*l*l*(1-l)*n.y+l*l*l*r.y;t.push({x:h,y:c})}},hS([W("Horizontal")],e.prototype,"orientation",void 0),hS([Q({x:0,y:0},Gu)],e.prototype,"point1",void 0),hS([Q({x:0,y:0},Gu)],e.prototype,"point2",void 0),hS([Q({angle:0,distance:0},uS)],e.prototype,"vector1",void 0),hS([Q({angle:0,distance:0},uS)],e.prototype,"vector2",void 0),e}(bS),wS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return lS(e,t),e.prototype.getClassName=function(){return"OrthogonalSegment"},hS([W(null)],e.prototype,"length",void 0),hS([W(null)],e.prototype,"direction",void 0),e}(yS),IS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return lS(e,t),e.prototype.getClassName=function(){return"DiagramConnectorSegment"},hS([W("Straight")],e.prototype,"type",void 0),hS([W(!0)],e.prototype,"allowDrag",void 0),hS([Q({x:0,y:0},Gu)],e.prototype,"point",void 0),hS([Q({x:0,y:0},Gu)],e.prototype,"point1",void 0),hS([Q({x:0,y:0},Gu)],e.prototype,"point2",void 0),hS([Q({angle:0,distance:0},uS)],e.prototype,"vector1",void 0),hS([Q({angle:0,distance:0},uS)],e.prototype,"vector2",void 0),hS([W(null)],e.prototype,"length",void 0),hS([W(null)],e.prototype,"direction",void 0),e}(Rp),xS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return lS(e,t),hS([W(!0)],e.prototype,"optional",void 0),hS([W(void 0)],e.prototype,"lowerBounds",void 0),hS([W(void 0)],e.prototype,"upperBounds",void 0),e}(Rp),MS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return lS(e,t),hS([W("OneToOne")],e.prototype,"type",void 0),hS([Q({},xS)],e.prototype,"target",void 0),hS([Q({},xS)],e.prototype,"source",void 0),e}(Rp),CS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return lS(e,t),hS([W("UmlClassifier")],e.prototype,"type",void 0),hS([W("Aggregation")],e.prototype,"relationship",void 0),hS([W("Directional")],e.prototype,"associationType",void 0),hS([Q({},MS)],e.prototype,"multiplicity",void 0),e}(mS),NS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return lS(e,t),hS([W("None")],e.prototype,"type",void 0),hS([W("Directional")],e.prototype,"associationType",void 0),hS([W("Aggregation")],e.prototype,"relationship",void 0),hS([Q({},MS)],e.prototype,"multiplicity",void 0),hS([W("Sequence")],e.prototype,"bpmnFlow",void 0),hS([W("Default")],e.prototype,"message",void 0),hS([W("Normal")],e.prototype,"sequence",void 0),hS([W("Default")],e.prototype,"association",void 0),hS([W("Object")],e.prototype,"umlActivityFlow",void 0),hS([W(30)],e.prototype,"exceptionFlowHeight",void 0),e}(Rp),ES=function(t){function e(e,i,n,r){var o=t.call(this,e,i,n,r)||this;return o.parentId="",o.bridges=[],o.status="None",o.shape&&"UmlActivity"===o.shape.type&&wo(n,o),n&&n.shape&&"None"!==n.shape.type&&Io(n,o),o}return lS(e,t),e.prototype.setPortID=function(t,e){if(this.targetID&&this.sourceID)for(var i=t.nameTable[this.targetID],n=t.nameTable[this.sourceID],r=e?i&&i.ports:n&&n.ports,o=void 0,s=0;r&&s<r.length;s++)o=r[parseInt(s.toString(),10)],this.targetPortID===o.id&&e?!(o.constraints&Pg.None)&&o.constraints&Pg.InConnect||(this.targetPortID=""):this.sourcePortID!==o.id||e||!(o.constraints&Pg.None)&&o.constraints&Pg.OutConnect||(this.sourcePortID="")},e.prototype.init=function(t){this.id||(this.id=da()),this.sourcePortID&&this.setPortID(t),this.targetPortID&&this.setPortID(t,!0);var e,i=new em,n=new rm;n.id=this.id+"_path";var r=new rm,o=new rm;n=this.getSegmentElement(this,n);var s=[];s="Bezier"===this.type?this.intermediatePoints:this.getConnectorPoints(this.type),s=this.clipDecorators(this,s);var a=Zu.toBounds(s);switch(i.width=a.width,i.height=a.height,i.offsetX=a.x+i.pivot.x*a.width,i.offsetY=a.y+i.pivot.y*a.height,this.shape.type){case"Bpmn":switch(f()?this.shape.bpmnFlow:this.shape.flow){case"Sequence":e=this.getBpmnSequenceFlow();break;case"Association":(e=new rm).visible=!1,this.getBpmnAssociationFlow();break;case"Message":e=this.getBpmnMessageFlow(),n=this.getSegmentElement(this,n),this.updateShapePosition(this,e)}break;case"UmlActivity":switch(f()?this.shape.umlActivityFlow:this.shape.flow){case"Object":this.getUMLObjectFlow();break;case"Exception":this.getUMLExceptionFlow(n)}break;case"UmlClassifier":this.getConnectorRelation()}var l=this.intermediatePoints;if("Bezier"===this.type){var h=this.segments[0],c=this.segments[this.segments.length-1];l=[Gu.isEmptyPoint(c.point2)?c.bezierPoint2:c.point2,Gu.isEmptyPoint(h.point1)?h.bezierPoint1:h.point1]}var d=t.getDescription;if(r=this.getDecoratorElement(s[0],l[1],this.sourceDecorator,!0,d),o=this.getDecoratorElement(s[s.length-1],l[l.length-2],this.targetDecorator,!1,d),r.id=this.id+"_srcDec",o.id=this.id+"_tarDec",n.style=this.style,n.style.fill="transparent",void 0!==d){var p=d(this,t);n.description=p||this.id}i.style.strokeColor="transparent",i.style.fill="transparent",i.style.strokeWidth=0,i.children=[n,r,o],i.id=this.id,void 0!==e&&i.children.push(e),i.offsetX=n.offsetX,i.offsetY=n.offsetY,i.width=n.width,i.height=n.height;for(var u=0;this.annotations,u<this.annotations.length;u++)i.children.push(this.getAnnotationElement(this.annotations[parseInt(u.toString(),10)],this.intermediatePoints,a,d,t.element.id,t.annotationTemplate));for(u=0;this.fixedUserHandles,u<this.fixedUserHandles.length;u++)i.children.push(this.getfixedUserHandle(this.fixedUserHandles[parseInt(u.toString(),10)],this.intermediatePoints,a));return this.wrapper=i,i},e.prototype.getConnectorRelation=function(){var t=this.shape;"Association"===t.relationship?(this.segments[0].type="Straight",this.sourceDecorator.shape="None",this.targetDecorator.shape="Arrow"):"Inheritance"===t.relationship?(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="None",this.targetDecorator.shape="Arrow"):"Composition"===t.relationship?(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="Diamond",this.targetDecorator.shape="None"):"Aggregation"===t.relationship?(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="Diamond",this.targetDecorator.shape="None"):"Dependency"===t.relationship?(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="None",this.targetDecorator.shape="OpenArrow"):"Realization"===t.relationship&&(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="None",this.targetDecorator.shape="Arrow"),"BiDirectional"===t.associationType&&(this.sourceDecorator.shape="None",this.targetDecorator.shape="None");var e="",i="",n="",r="";t.multiplicity.source&&(t.multiplicity.source.lowerBounds=t.multiplicity.source.lowerBounds,t.multiplicity.source.upperBounds=t.multiplicity.source.upperBounds),t.multiplicity.target&&(t.multiplicity.target.lowerBounds=t.multiplicity.target.lowerBounds,t.multiplicity.target.upperBounds=t.multiplicity.target.upperBounds);var o=t.multiplicity.source,s=t.multiplicity.target;r=o.upperBounds?o.lowerBounds+"..."+o.upperBounds:o.lowerBounds,e=s.upperBounds?s.lowerBounds+"..."+s.upperBounds:s.lowerBounds,"ManyToOne"===t.multiplicity.type&&(t.multiplicity.target.optional=!1,i=r||"*",n="1"),"OneToMany"===t.multiplicity.type&&(t.multiplicity.source.optional=!1,n=e||"*",i="1"),"ManyToOne"===t.multiplicity.type&&(i=r||"*",n=e||"*"),"OneToOne"===t.multiplicity.type&&(t.multiplicity.target.optional=!1,t.multiplicity.source.optional=!1,i="1",n="1"),this.annotations=[{id:this.id+"sourcelabel",content:i,offset:0,alignment:"Before",margin:{right:5,bottom:5}},{id:this.id+"targetlabel",content:n,offset:1,alignment:"Before",margin:{right:5,bottom:5}}]},e.prototype.getBpmnSequenceFlow=function(){var t=new rm,e=new rm;if("Normal"===this.shape.sequence&&"Bezier"!==this.type&&(this.targetDecorator.shape="Arrow"),"Default"===this.shape.sequence){t=this.getSegmentElement(this,t);var i=this.intermediatePoints;e=QS(i,this),this.targetDecorator.shape="Arrow"}return"Conditional"===this.shape.sequence&&(this.targetDecorator.shape="Arrow",this.sourceDecorator.shape="Diamond",e.id=this.id+this.shape.type),e},e.prototype.getUMLObjectFlow=function(){if(this.annotations)for(var t=0;t<this.annotations.length;t++)this.annotations[parseInt(t.toString(),10)].content="["+this.annotations[parseInt(t.toString(),10)].content+"]"},e.prototype.getUMLExceptionFlow=function(t){this.type="Straight";var e=this.shape.exceptionFlowHeight/2,i={x:(this.targetPoint.x+this.sourcePoint.x)/2,y:(this.targetPoint.y+this.sourcePoint.y)/2},n=i.x-this.sourcePoint.x,r=i.y-this.sourcePoint.y,o=e/Math.sqrt(n*n+r*r),s={x:i.x-n*o,y:i.y-r*o},a={x:i.x+n*o,y:i.y+r*o},l=Lt();kt(l,315,i.x,i.y),this.segments=[];var h=new bS(this,"segments",{type:"Straight",point:At(l,a)},!0);this.segments.push(h),h=new bS(this,"segments",{type:"Straight",point:At(l,s)},!0),this.segments.push(h),t=this.getSegmentElement(this,t)},e.prototype.getBpmnAssociationFlow=function(){"Default"===this.shape.association&&(this.targetDecorator.shape="None",this.style.strokeDashArray="2 2"),"Directional"===this.shape.association&&(this.targetDecorator.shape="OpenArrow",this.style.strokeDashArray="2 2"),"BiDirectional"===this.shape.association&&(this.targetDecorator.shape="OpenArrow",this.sourceDecorator.shape="OpenArrow",this.style.strokeDashArray="2 2")},e.prototype.getfixedUserHandle=function(t,e,i){var n=new em;n.float=!0;t.id=t.id||da(),n.id=this.id+"_"+t.id,n.children=[],n.visible=t.visibility,n.width=t.width,n.height=t.height,n.style.strokeWidth=t.handleStrokeWidth,n.style.fill=t.fill,n.style.strokeColor=t.handleStrokeColor,n.cornerRadius=t.cornerRadius,this.updateAnnotation(t,e,i,n);var r=jo(t,n);return n.children.push(r),n.description=n.id,n},e.prototype.getBpmnMessageFlow=function(){var t=new rm;return this.targetDecorator.shape="Arrow",this.targetDecorator.width=10,this.targetDecorator.height=10,this.sourceDecorator.shape="Circle",this.sourceDecorator.style.fill="white",this.targetDecorator.style.fill="white","InitiatingMessage"!==this.shape.message&&"NonInitiatingMessage"!==this.shape.message||(t.id=this.id+"_"+this.shape.message,t.width=25,t.height=15,t.data="M0,0 L19.8,12.8 L40,0 L0, 0 L0, 25.5 L40, 25.5 L 40, 0",t.horizontalAlignment="Center",t.verticalAlignment="Center",t.transform=Ng.Self,t.style.fill="NonInitiatingMessage"===this.shape.message?"lightgrey":"white"),t},e.prototype.distance=function(t,e){return ZS(t,e)},e.prototype.findPath=function(t,e){return qS(t,e)},e.prototype.getAnnotationElement=function(t,e,i,n,r,o){t.id=t.id||da();var s;f()&&"Template"===t.annotationType&&(t.template=t.template?t.template:""),r&&(t.template||"Template"===t.annotationType||o&&""===t.content)?s=ca(s=new Cb(this.id,r,t.id,o),t,o):((s=new Jg).content=t.content,s.style.textOverflow="Wrap"),s.constraints=t.constraints,s.visible=t.visibility,s.rotateAngle=t.rotateAngle,s.horizontalAlignment=t.horizontalAlignment,s.verticalAlignment=t.verticalAlignment,s.width=t.width,s.height=t.height,void 0===i.width||t.template||(s.width=(t.width||i.width)-t.margin.left-t.margin.right),s.margin=t.margin,s.id=this.id+"_"+t.id,0===i.width&&(i.width=this.style.strokeWidth),0===i.height&&(i.height=this.style.strokeWidth),s.style=t.style;var a,l=Oa(n);return l&&(a=l(t,this)),s.description=a||s.id,this.updateAnnotation(t,e,i,s),s},e.prototype.updateAnnotation=function(t,e,i,n,r){var o={x:0,y:0};n instanceof Cb||Gg||r||n.refreshTextElement(),n.width=t.width||i.width;var s=Ro(e,t),a=s.point;t instanceof ym&&t.segmentAngle&&(n.rotateAngle=t.rotateAngle+s.angle,n.rotateAngle=(n.rotateAngle+360)%360),0===i.width&&(i.width=this.style.strokeWidth),0===i.height&&(i.height=this.style.strokeWidth);var l=(a.x-i.x)/i.width,h=(a.y-i.y)/i.height;o.x=i.width*l,o.y=i.height*h;var c,d,p=Uo(t,s.angle,e),u=p.hAlign,g=p.vAlign;"left"===u?(c="Left",o.x+=t.displacement.x):"right"===u?(c="Right",o.x-=t.displacement.x):"center"===u&&(c="Center"),"top"===g?(d="Top",o.y+=t.displacement.y):"bottom"===g?(d="Bottom",o.y-=t.displacement.y):"center"===g&&(d="Center"),n.horizontalAlignment=c,n.verticalAlignment=d,n.setOffsetWithRespectToBounds(o.x,o.y,"Absolute"),n.relativeMode="Point"},e.prototype.getConnectorPoints=function(t,e,i,n){var r=Xt(this,i,n).slice(0);return r&&r.length>0&&(this.sourcePoint=r[0],this.targetPoint=r[r.length-1]),r},e.prototype.clipDecorator=function(t,e,i,n){var r={x:0,y:0},o={x:0,y:0},s={x:0,y:0},a=e.length;o=i?e[0]:e[a-1],s=i?e[1]:e[a-2];var l=Gu.distancePoints(o,s);l=0===l?1:l;var h=1,c=i?t.sourceWrapper:t.targetWrapper;c&&(h=c.style.strokeWidth,n&&n&Og.DecoratorPropertyChange&&(h=1));var d=h-1;return r.x=Math.round(o.x+d*(s.x-o.x)/l),r.y=Math.round(o.y+d*(s.y-o.y)/l),(i&&"None"!==t.sourceDecorator.shape||!i&&"None"!==t.targetDecorator.shape)&&(r=Gu.adjustPoint(r,s,!0,n&Og.DecoratorPropertyChange?0:h/2)),r},e.prototype.clipDecorators=function(t,e,i){return"None"!==t.sourceDecorator.shape&&(e[0]=this.clipDecorator(t,e,!0,i)),"None"!==t.targetDecorator.shape&&(e[e.length-1]=this.clipDecorator(t,e,!1,i)),e},e.prototype.updateSegmentElement=function(t,e,i,n){var r=new Zu,o=this.getSegmentPath(t,e,n);if("Bezier"===t.type){if(this.segments.length>0)for(var s=0;s<this.segments.length;s++){var a=this.segments[parseInt(s.toString(),10)],l=t.segments[parseInt(s.toString(),10)],h=Gu.isEmptyPoint(a.point1)?l.bezierPoint1:l.point1,c=Gu.isEmptyPoint(a.point2)?l.bezierPoint2:l.point2;r.uniteRect(ro(a.points[0],h,c,a.points[1],t))}}else r=Zu.toBounds(e);return i.width=r.width,i.height=r.height,i.offsetX=r.x+i.width/2,i.offsetY=r.y+i.height/2,i.data=o,t.wrapper&&(t.wrapper.offsetX=i.offsetX,t.wrapper.offsetY=i.offsetY,t.wrapper.width=r.width,t.wrapper.height=r.height),i},e.prototype.getSegmentElement=function(t,e,i,n,r){void 0===r&&(r=!0);var o=[];return r&&_S(t),o=this.getConnectorPoints(t.type,void 0,i),this.intermediatePoints=o,e.staticSize=!0,e=this.updateSegmentElement(t,o,e,n)},e.prototype.getDecoratorElement=function(t,e,i,n,r){var o=new rm;if(o.transform=Ng.Self,this.updateDecoratorElement(o,t,e,i),void 0!==r){var s=r(i,this);o.description=s||"source"}return o},e.prototype.bridgePath=function(t,e,i){var n=e;if(t.bridges.length>0)if("Straight"===t.type&&t.segments.length<2)for(var r=0;r<t.bridges.length;r++){(o=t.bridges[parseInt(r.toString(),10)]).rendered||(n+=" L"+o.startPoint.x+" "+o.startPoint.y,n+=o.path,o.rendered=!0)}else if("Orthogonal"===t.type||"Straight"===t.type&&t.segments.length>1)for(r=0;r<t.bridges.length;r++){var o;(o=t.bridges[parseInt(r.toString(),10)]).segmentPointIndex===i&&(o.rendered||o.segmentPointIndex===i&&(n+=" L"+o.startPoint.x+" "+o.startPoint.y,n+=o.path,o.rendered=!0))}return n},e.prototype.updateDecoratorElement=function(t,e,i,n){t.offsetX=e.x,t.offsetY=e.y;var r=Gu.findAngle(e,i),o=_t(n.shape,n),s=new Qu(n.width,n.height);t.pivot.x=n.pivot.x,t.pivot.y=n.pivot.y,t.style=n.style,t.rotateAngle=r,t.data=o,t.canMeasurePath=!0,t.width=s.width,t.height=s.height},e.prototype.getSegmentPath=function(t,e,i){for(var n,r,o,s="",a=[],l=0;l<e.length;)a.push({x:e[parseInt(l.toString(),10)].x,y:e[parseInt(l.toString(),10)].y}),l++;for(var h=0;h<t.bridges.length;h++){t.bridges[parseInt(h.toString(),10)].rendered=!1}if(a=this.clipDecorators(t,a,i),this.cornerRadius>0&&"Bezier"!==this.type)for(var c=0;c<a.length-1;c++){n=a[parseInt(c.toString(),10)],0===c&&(s="M"+n.x+" "+n.y);var d=Gu.distancePoints(a[parseInt(c.toString(),10)],a[c+1]);d>0&&(r=c<a.length-2?d<2*this.cornerRadius?Gu.adjustPoint(a[parseInt(c.toString(),10)],a[c+1],!1,d/2):Gu.adjustPoint(a[parseInt(c.toString(),10)],a[c+1],!1,this.cornerRadius):a[c+1],c>0&&(d<2*this.cornerRadius?(o=Gu.adjustPoint(a[parseInt(c.toString(),10)],a[c+1],!0,d/2),c<a.length-2&&(r=null)):o=Gu.adjustPoint(a[parseInt(c.toString(),10)],a[c+1],!0,this.cornerRadius)),o&&(s+="Q"+n.x+" "+n.y+" "+o.x+" "+o.y),r&&(t.bridges.length>0&&(s=this.bridgePath(t,s,c),"Orthogonal"===t.type&&(s=this.bridgePath(t,s,c+1))),s+=" L"+r.x+" "+r.y))}else if("Bezier"===this.type){var p=void 0,u=void 0;if(this.parentObj.element){var g=this.parentObj.element.ej2_instances[0].eventHandler.action;p=this.parentObj.element.ej2_instances[0].eventHandler.tool instanceof Gb,u=g.includes("PortDraw")||g.includes("Drag")}for(var m=void 0,f=this.segments,v=0;v<f.length;v++)a.length>2&&(f[parseInt(v.toString(),10)].bezierPoint1={x:0,y:0},f[parseInt(v.toString(),10)].bezierPoint2={x:0,y:0}),!Gu.isEmptyPoint(f[parseInt(v.toString(),10)].point1)||f[parseInt(v.toString(),10)].vector1.angle||f[parseInt(v.toString(),10)].vector1.distance?f[parseInt(v.toString(),10)].vector1.angle||f[parseInt(v.toString(),10)].vector1.distance?f[parseInt(v.toString(),10)].bezierPoint1=Gu.transform(a[parseInt(v.toString(),10)],f[parseInt(v.toString(),10)].vector1.angle,f[parseInt(v.toString(),10)].vector1.distance):f[parseInt(v.toString(),10)].bezierPoint1={x:f[parseInt(v.toString(),10)].point1.x||f[parseInt(v.toString(),10)].bezierPoint1.x,y:f[parseInt(v.toString(),10)].point1.y||f[parseInt(v.toString(),10)].bezierPoint1.y}:(!t.sourceID&&!this.sourcePortID||!this.sourceWrapper||u||p||(m=eo(this.sourceWrapper.bounds,a[parseInt(v.toString(),10)],!0)),f[parseInt(v.toString(),10)].bezierPoint1=no(a[parseInt(v.toString(),10)],a[v+1],m)),!Gu.isEmptyPoint(f[parseInt(v.toString(),10)].point2)||f[parseInt(v.toString(),10)].vector2.angle||f[parseInt(v.toString(),10)].vector2.distance?f[parseInt(v.toString(),10)].vector2.angle||f[parseInt(v.toString(),10)].vector2.distance?f[parseInt(v.toString(),10)].bezierPoint2=Gu.transform(a[v+1],f[parseInt(v.toString(),10)].vector2.angle,f[parseInt(v.toString(),10)].vector2.distance):f[parseInt(v.toString(),10)].bezierPoint2={x:f[parseInt(v.toString(),10)].point2.x||f[parseInt(v.toString(),10)].bezierPoint2.x,y:f[parseInt(v.toString(),10)].point2.y||f[parseInt(v.toString(),10)].bezierPoint2.y}:(!t.targetID&&!this.targetPortID||!this.targetWrapper||u||p||(m=eo(this.targetWrapper.bounds,a[v+1],!0)),f[parseInt(v.toString(),10)].bezierPoint2=no(a[v+1],a[parseInt(v.toString(),10)],m));a.splice(1,0,{x:f[0].bezierPoint1.x,y:f[0].bezierPoint1.y}),a.splice(a.length-1,0,{x:f[f.length-1].bezierPoint2.x,y:f[f.length-1].bezierPoint2.y}),a=this.clipDecorators(t,a,i);for(var y=0;y<f.length;y++){0===y&&(s="M"+a[0].x+" "+a[0].y);var b=y===f.length-1?a[a.length-1].x+" "+a[a.length-1].y:f[parseInt(y.toString(),10)].points[f[parseInt(y.toString(),10)].points.length-1].x+" "+f[parseInt(y.toString(),10)].points[f[parseInt(y.toString(),10)].points.length-1].y;s+="C"+f[parseInt(y.toString(),10)].bezierPoint1.x+" "+f[parseInt(y.toString(),10)].bezierPoint1.y+" "+f[parseInt(y.toString(),10)].bezierPoint2.x+" "+f[parseInt(y.toString(),10)].bezierPoint2.y+" "+b}}else for(var S=0;S<a.length;S++)n=a[parseInt(S.toString(),10)],0===S&&(s="M"+n.x+" "+n.y),S>0&&(s=this.bridgePath(t,s,S),s+=" L"+n.x+" "+n.y);return s},e.prototype.updateShapeElement=function(t){var e;switch(t.shape.type){case"Bpmn":t.wrapper.children[3]instanceof rm&&(e=t.wrapper.children[3]),("Message"===t.shape.flow||f()&&"Message"===t.shape.bpmnFlow)&&this.updateShapePosition(t,e);break;case"UmlActivity":("Exception"===t.shape.flow||f()&&"Exception"===t.shape.umlActivityFlow)&&this.getUMLExceptionFlow(t.wrapper.children[0])}},e.prototype.updateShapePosition=function(t,e){for(var i,n,r=0,o=this.intermediatePoints,s=0;s<o.length-1;s++){var a=.5*(r+=this.distance(o[parseInt(s.toString(),10)],o[s+1]));r>=a&&(i=ge(o[parseInt(s.toString(),10)],o[s+1]),n=Gu.transform(o[parseInt(s.toString(),10)],i,a))}e.offsetX=n.x,e.offsetY=n.y},e.prototype.scale=function(t,e,i,n,r){var o=0,s=0;if(this.wrapper&&this.wrapper.outerBounds){var a=ze(this),l=Math.abs((this.wrapper.bounds.width||this.style.strokeWidth||1)-2),h=Math.abs((this.wrapper.bounds.height||this.style.strokeWidth||1)-2);o=a.width-l,s=a.height-h,t=Math.abs((i-Math.max(o,s))/l),e=Math.abs((n-Math.max(o,s))/h),o=s=Math.min(o,s)}t=e=Math.min(t,e);var c=Lt();kt(c,-(r=r||this.wrapper).rotateAngle,r.offsetX,r.offsetY),jt(c,t,e,r.offsetX,r.offsetY),kt(c,r.rotateAngle,r.offsetX,r.offsetY);var d=zt(c,this.intermediatePoints);return this.sourcePoint=d[0],this.targetPoint=d[d.length-1],d=this.intermediatePoints=Xt(this),rs(this,d),{x:o,y:s}},e.prototype.getClassName=function(){return"Connector"},hS([X(cS)],e.prototype,"shape",void 0),hS([W(bg.Default)],e.prototype,"constraints",void 0),hS([W(10)],e.prototype,"bridgeSpace",void 0),hS([q([],ym)],e.prototype,"annotations",void 0),hS([Q({},Gu)],e.prototype,"sourcePoint",void 0),hS([Q({},Gu)],e.prototype,"targetPoint",void 0),hS([q([],Ob)],e.prototype,"fixedUserHandles",void 0),hS([G(dS)],e.prototype,"segments",void 0),hS([W("")],e.prototype,"sourceID",void 0),hS([W("")],e.prototype,"targetID",void 0),hS([W(10)],e.prototype,"hitPadding",void 0),hS([W(0)],e.prototype,"connectionPadding",void 0),hS([W("Straight")],e.prototype,"type",void 0),hS([W(0)],e.prototype,"cornerRadius",void 0),hS([Q({shape:"None"},pS)],e.prototype,"sourceDecorator",void 0),hS([Q({shape:"Arrow"},pS)],e.prototype,"targetDecorator",void 0),hS([Q({},fb)],e.prototype,"tooltip",void 0),hS([W("")],e.prototype,"sourcePortID",void 0),hS([W("")],e.prototype,"targetPortID",void 0),hS([W(0)],e.prototype,"sourcePadding",void 0),hS([Q({},bb)],e.prototype,"previewSize",void 0),hS([Q({},bb)],e.prototype,"dragSize",void 0),hS([W(0)],e.prototype,"targetPadding",void 0),hS([W(13)],e.prototype,"connectorSpacing",void 0),hS([Q({strokeWidth:1,strokeColor:"black"},dg)],e.prototype,"style",void 0),hS([W(null)],e.prototype,"maxSegmentThumb",void 0),hS([W(!1)],e.prototype,"allowNodeOverlap",void 0),hS([Q({},gS)],e.prototype,"bezierSettings",void 0),hS([W(null)],e.prototype,"wrapper",void 0),e}(xb),DS=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),TS=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},OS=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.offset=0,n.scale=1,n}return DS(e,t),e.prototype.preRender=function(){this.unWireEvents(),this.wireEvents()},e.prototype.render=function(){this.updateRulerGeometry(),this.renderComplete()},e.prototype.getModuleName=function(){return"Ruler"},e.prototype.destroy=function(){this.unWireEvents(),this.notify("destroy",{}),t.prototype.destroy.call(this),this.element.classList.remove("e-ruler")},e.prototype.getPersistData=function(){return this.addOnPersist(["loaded"])},e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"length":case"interval":case"segmentWidth":case"tickAlignment":case"markerColor":case"thickness":this.updateRuler()}}},e.prototype.updateRulerGeometry=function(){this.element.style.textAlign="left",this.renderRulerSpace(),this.updateRuler()},e.prototype.renderRulerSpace=function(){var t=this.getRulerGeometry(),e=document.getElementById(this.element.id+"_ruler_space");return e||(e=Ks("div",{id:this.element.id+"_ruler_space",style:"height:"+t.height+"px;width:"+t.width+"px;cssFloat:left;"}),this.element.appendChild(e)),e},e.prototype.updateRuler=function(){var t=this.getRulerSize(),e=this.getRulerGeometry(),i=0,n=0,r=new Qu,o=this.getRulerSVG(e);if(o&&(i=this.length,r.height=t,n=this.offset,i&&i!==1/0)){var s=i+this.segmentWidth,a=n;this.updateSegments(a,s+Math.abs(a),o,t)}},e.prototype.updateSegments=function(t,e,i,n){for(var r=t,o={trans:0};r<e;){var s=this.getNewSegment(r,i);s&&(i.appendChild(s.segment),r=this.updateSegment(t,e,s,r,o,n))}},e.prototype.updateSegment=function(t,e,i,n,r,o){var s=this.updateSegmentWidth(this.scale);n===t?(this.startValue=Math.floor(t/s)*s/this.scale,this.startValue=this.startValue%1!=0?Number(this.startValue.toFixed(1)):this.startValue,i.label.textContent=this.startValue.toString(),this.defStartValue=n=this.startValue*this.scale,"Horizontal"===this.orientation?this.hRulerOffset=t-n:this.vRulerOffset=t-n):(this.startValue=n/this.scale,this.startValue=this.startValue%1!=0?Number(this.startValue.toFixed(1)):this.startValue,i.label.textContent=this.startValue.toString()),this.updateTickLabel(i,o);var a="Horizontal"===this.orientation?r.trans+.5+",0.5":"0.5,"+(r.trans+.5);return i.segment.setAttribute("transform","translate("+a+")"),r.trans+=s,n+=s},e.prototype.updateTickLabel=function(t,e){var i=t.segment.lastChild.getBBox(),n="Horizontal"===this.orientation,r="RightOrBottom"===this.tickAlignment,o=n?2:0,s=n?r?e/2+5.5-5.5:e/2+5.5:i.height,a=r?-(i.width+2)+","+(e/2-i.height):-(i.width+2)+","+(e/2-i.height/2),l=n?{x:o,y:s}:{x:o,y:s,transform:"rotate(270)translate("+a+")"};oa(t.segment.lastChild,l)},e.prototype.getNewSegment=function(t,e){var i=this.createNewTicks(t,e);return{segment:i,label:this.createTickLabel(e,i)}},e.prototype.createNewTicks=function(t,e){for(var i,n,r=this.updateSegmentWidth(this.scale),o=Js("g",{class:"e-ruler-segment"}),s=0;s<this.interval;s++)n=r/this.interval,i=this.createTick(e,n,s+1,t),o.appendChild(i);return o},e.prototype.getLinePoint=function(t,e,i){var n=this.updateSegmentWidth(this.scale),r=this.getRulerSize();return e*=i-1,i=e%n==0?r:.3*r},e.prototype.createTick=function(t,e,i,n){var r=this.getLinePoint(t,e,i),o=this.getRulerSize(),s="Horizontal"===this.orientation,a="RightOrBottom"===this.tickAlignment,l=Oa(this.arrangeTick),h={ruler:void 0,tickLength:r,tickInterval:this.segmentWidth/this.interval*(i-1)};l&&l(h),r=h.tickLength;var c=e*(i-1),d=Js("line",{x1:s?c:a?o:0,y1:s?a?o:o-(o-r):c,x2:s?c:a?o-r:o-(o-r),y2:s?a?o-r:0:c,"stroke-width":"1",stroke:"black"});return d.setAttribute("class","e-ruler-tick"),d},e.prototype.createTickLabel=function(t,e){var i;if(e){i=Js("text",{class:"e-ruler-tick-label"}),e.appendChild(i)}return i},e.prototype.updateSegmentWidth=function(t){if(100!==this.segmentWidth)return this.segmentWidth;var e,i=1;for(e=100,e=100/Math.pow(2,Math.round(Math.log(t)/Math.log(2)));e>100;)i/=10,e/=10;for(;e<25;)i*=10,e*=10;return e>=25&&e%25!=0&&(e=25*Math.round(e/25)),e*t/i},e.prototype.createMarkerLine=function(t,e,i){var n;return e&&((n=t.getElementById(e.id+"_marker"))&&n.parentNode.removeChild(n),n=Js("line",i)),n},e.prototype.drawRulerMarker=function(t,e,i){var n,r,o,s,a,l,h,c="Horizontal"===this.orientation,d=t.getElementsByTagName("svg");for(a=0;a<d.length;a++){d[parseInt(a.toString(),10)]&&(n=d[parseInt(a.toString(),10)]);break}if(n){r=this.getRulerSize(),l={id:t.id+"_marker",x1:0,y1:0,x2:c?0:r,y2:c?r:0,stroke:this.markerColor,"stroke-width":1.5,class:"e-d-ruler-marker"},h=this.createMarkerLine(n,t,l),o=this.scale,s=this.offset-this.defStartValue;var p=(c?e.x:e.y)*o+i+s;h.setAttribute("transform","translate("+(c?p+.5+" 0.5":"0.5 "+(p+.5))+")"),n.appendChild(h)}},e.prototype.getRulerGeometry=function(){return new Qu(this.element?this.element.getBoundingClientRect().width:0,this.element?this.element.getBoundingClientRect().height:0)},e.prototype.getRulerSize=function(){return this.thickness},e.prototype.getRulerSVG=function(t){var e,i,n=this.getRulerSize();if(this.element&&(e=document.getElementById(this.element.id+"_ruler_space"))){if(i=Js("svg",{id:this.element.id+"_Ruler_svg",width:"Horizontal"===this.orientation?t.width+200:n+"px",height:"Horizontal"===this.orientation?n:t.height+200+"px",style:"position:inherit;"}),e.childNodes.length>0)for(var r=e.childNodes.length-1;r>=0;r--)e.childNodes[parseInt(r.toString(),10)].parentNode.removeChild(e.childNodes[parseInt(r.toString(),10)]);e.appendChild(i)}return i},e.prototype.wireEvents=function(){},e.prototype.unWireEvents=function(){},TS([W(5)],e.prototype,"interval",void 0),TS([W(100)],e.prototype,"segmentWidth",void 0),TS([W("Horizontal")],e.prototype,"orientation",void 0),TS([W("RightOrBottom")],e.prototype,"tickAlignment",void 0),TS([W("red")],e.prototype,"markerColor",void 0),TS([W(25)],e.prototype,"thickness",void 0),TS([W(null)],e.prototype,"arrangeTick",void 0),TS([W(400)],e.prototype,"length",void 0),e}(Kp),LS=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),AS=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},zS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return LS(e,t),e.prototype.getClassName=function(){return"UserHandle"},AS([W("")],e.prototype,"name",void 0),AS([W("")],e.prototype,"pathData",void 0),AS([W("")],e.prototype,"content",void 0),AS([W("")],e.prototype,"source",void 0),AS([W("#000000")],e.prototype,"backgroundColor",void 0),AS([W("Top")],e.prototype,"side",void 0),AS([W("")],e.prototype,"borderColor",void 0),AS([W(.5)],e.prototype,"borderWidth",void 0),AS([W(25)],e.prototype,"size",void 0),AS([W("white")],e.prototype,"pathColor",void 0),AS([W(10)],e.prototype,"displacement",void 0),AS([W(!0)],e.prototype,"visible",void 0),AS([W(0)],e.prototype,"offset",void 0),AS([Q({},ng)],e.prototype,"margin",void 0),AS([W("Center")],e.prototype,"horizontalAlignment",void 0),AS([W("Center")],e.prototype,"verticalAlignment",void 0),AS([W(!1)],e.prototype,"disableNodes",void 0),AS([W(!1)],e.prototype,"disableConnectors",void 0),AS([Q({},fb)],e.prototype,"tooltip",void 0),AS([W("")],e.prototype,"template",void 0),e}(Rp),kS={Action:"M 90 82.895 C 90 86.819 86.776 90 82.8 90 H 7.2 C 3.224 90 0 86.819 0 82.895 V 7.105 C 0 3.181 3.224 0 7.2 0 h 75.6 C 86.776 0 90 3.181 90 7.105 V 82.895 Z",Decision:"M10,19.707L0.293,10L10,0.293L19.707,10L10,19.707z",MergeNode:"M10,19.707L0.293,10L10,0.293L19.707,10L10,19.707z",InitialNode:"M10,19.5c-5.238,0-9.5-4.262-9.5-9.5S4.762,0.5,10,0.5s9.5,4.262,9.5,9.5S15.238,19.5,10,19.5z",ForkNode:"m0.75,0.75l636.00002,0l0,290l-636.00002,0l0,-290z",JoinNode:"m0.75,0.75l636.00002,0l0,290l-636.00002,0l0,-290z",TimeEvent:"M50.001,0.00286865 L25.001,25.0029 L0.000976562,0.00286865 L50.001,0.00286865 z M0.000976562,50.0029 L25.001,25.0029 L50.001,50.0029 L0.000976562,50.0029 z",AcceptingEvent:"M17.8336 32.164 L29.64 24 L17.32 16 L48.1664 16 L48.5 32 Z",SendSignal:"M48.164 31.8336 L56 23.832 L47.836 16 L16.168 16 L16.1668 31.8336 Z",ReceiveSignal:"M48.1664 31.8336 L39.836 24 L47.836 16 L16.168 16 L16.168 31.836 Z",StructuredNode:"M0,0 L50,0 L50,50 L0,50 z",Note:"M20 12 L4 12 L4 22 L22 22 L22 14 L20 14 L20 12 L22 14 Z"},jS=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),PS=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},RS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return jS(e,t),PS([W()],e.prototype,"key",void 0),PS([W()],e.prototype,"keyModifiers",void 0),e}(Rp),BS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return jS(e,t),e.prototype.getClassName=function(){return"Command"},PS([W("")],e.prototype,"name",void 0),PS([W()],e.prototype,"canExecute",void 0),PS([W()],e.prototype,"execute",void 0),PS([Q({},RS)],e.prototype,"gesture",void 0),PS([W("")],e.prototype,"parameter",void 0),e}(Rp),HS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return jS(e,t),PS([q([],BS)],e.prototype,"commands",void 0),e}(Rp),US=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return jS(e,t),PS([W()],e.prototype,"show",void 0),PS([W()],e.prototype,"showCustomMenuOnly",void 0),PS([W()],e.prototype,"items",void 0),e}(Rp),VS=function(t){return t&&(t=void 0!==t.sourceID||void 0!==t.sourcePoint||void 0!==t.targetID||void 0!==t.targetPoint||void 0!==t.type?ES:Pw),t},_S=function(t){if(!t.sourceID&&!t.targetID){var e={x:t.sourcePoint.x,y:t.sourcePoint.y},i={x:t.targetPoint.x,y:t.targetPoint.y};"Horizontal"===t.flip?(t.sourcePoint.x=i.x,t.targetPoint.x=e.x):"Vertical"===t.flip?(t.sourcePoint.y=i.y,t.targetPoint.y=e.y):"Both"===t.flip&&(t.sourcePoint=i,t.targetPoint=e)}},FS=function(t,e,i){var n=i.offset.x,r=i.offset.y;return"Horizontal"===e?(n=1-i.offset.x,r=i.offset.y):"Vertical"===e?(n=i.offset.x,r=1-i.offset.y):"Both"===e&&(n=1-i.offset.x,r=1-i.offset.y),t.setOffsetWithRespectToBounds(n,r,"Fraction"),t},YS=function(t,e,i,n,r){if(t.hasChildren())for(var o=0,s=t.children;o<s.length;o++){var a=s[o],l=e-a.offsetX+e,h=i-a.offsetY+i;"Horizontal"!==r&&"Both"!==r||(a.offsetX=l,a.flipOffset.x=l-a.desiredSize.width/2),"Vertical"!==r&&"Both"!==r||(a.offsetY=h,a.flipOffset.y=h-a.desiredSize.height/2),(a instanceof em||a instanceof $g)&&YS(a,e,i,n,r),a.measure(new Qu(a.bounds.width,a.bounds.height)),a.arrange(a.desiredSize);var c=n.nameTable[a.id];c&&n.updateConnectorEdges(c)}},WS=function(t){var e=t.selectedItems.nodes,i=t.selectedItems.connectors,n=t.allowServerDataBinding,r=t.isProtectedOnChange;t.protectPropertyChange(!0),t.allowServerDataBinding=!1,t.selectedItems.nodes=[],t.selectedItems.connectors=[],t.allowServerDataBinding=n,t.protectPropertyChange(r);for(var o=fa(t.selectedItems),s=0;s<e.length;s++)t.selectedItems.nodes.push(t.nameTable[e[s].id]);for(s=0;s<i.length;s++)t.selectedItems.connectors.push(t.nameTable[i[s].id]);return o},QS=function(t,e){for(var i,n=new rm,r=0;r<t.length-1;r++)i=qS(t[r],t[r+1]),n.data=i[0],n.id=e.id+"_"+e.shape.sequence,n.offsetX=i[1].x,n.offsetY=i[1].y,n.rotateAngle=45,n.transform=Ng.Self;return n},XS=function(t,e){if(t instanceof Pw)for(var i=0;i<t.ports.length;i++)if(t.ports[i].id===e.id.split("_")[1])return!0;return!1},qS=function(t,e){var i={x:t.x,y:t.y},n=ZS(t,e);n=Math.min(30,n/2);var r=ge(t,e),o=Gu.transform({x:i.x,y:i.y},r,n),s=Gu.transform({x:o.x,y:o.y},r,-12),a=Gu.transform({x:s.x,y:s.y},r,24);return["M"+s.x+" "+s.y+" L"+a.x+" "+a.y,o]},GS=function(t,e){return Math.abs(e.x-t.x)>Math.abs(e.y-t.y)?t.x<e.x?"Right":"Left":t.y<e.y?"Bottom":"Top"},ZS=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},$S=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),KS=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},JS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $S(e,t),KS([W("None")],e.prototype,"shape",void 0),KS([W("white")],e.prototype,"fill",void 0),KS([W("Auto")],e.prototype,"horizontalAlignment",void 0),KS([W("Auto")],e.prototype,"verticalAlignment",void 0),KS([W(10)],e.prototype,"width",void 0),KS([W(10)],e.prototype,"height",void 0),KS([Q({x:.5,y:1},Gu)],e.prototype,"offset",void 0),KS([W("#1a1a1a")],e.prototype,"borderColor",void 0),KS([W(1)],e.prototype,"borderWidth",void 0),KS([Q({},ng)],e.prototype,"margin",void 0),KS([W("")],e.prototype,"pathData",void 0),KS([W("")],e.prototype,"content",void 0),KS([W(0)],e.prototype,"cornerRadius",void 0),KS([Q({left:2,right:2,top:2,bottom:2},ng)],e.prototype,"padding",void 0),e}(Rp),tw=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ew=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.orientation="Vertical",e.measureChildren=void 0,e.considerPadding=!0,e}return tw(e,t),e.prototype.measure=function(t){var e="Horizontal"===this.orientation?this.updateHorizontalStack:this.updateVerticalStack;return this.desiredSize=this.measureStackPanel(t,e),this.desiredSize},e.prototype.arrange=function(t){var e="Horizontal"===this.orientation?this.arrangeHorizontalStack:this.arrangeVerticalStack;return this.actualSize=this.arrangeStackPanel(t,e),this.updateBounds(),this.actualSize},e.prototype.measureStackPanel=function(e,i){var n=void 0;if(void 0!==this.children&&this.children.length>0)for(var r=0,o=this.children;r<o.length;r++){var s=o[r];s.parentTransform=this.rotateAngle+this.parentTransform,this.measureChildren?s.measure(s.desiredSize):s.measure(e);var a=s.desiredSize.clone();this.applyChildMargin(s,a),0!==s.rotateAngle&&(a=Ea(a,s.rotateAngle)),void 0===n?n=a:s.preventContainer||i(a,n)}return n=t.prototype.validateDesiredSize.call(this,n,e),this.stretchChildren(n),this.considerPadding&&this.applyPadding(n),n},e.prototype.arrangeStackPanel=function(e,i){if(void 0!==this.children&&this.children.length>0){var n=void 0,r=void 0;n=this.offsetX-e.width*this.pivot.x+this.padding.left,r=this.offsetY-e.height*this.pivot.y+this.padding.top;for(var o=0,s=this.children;o<s.length;o++){var a=s[o],l=a.desiredSize.clone(),h=l;"Vertical"===this.orientation?r+=a.margin.top:n+=a.margin.left,0!==a.rotateAngle&&(h=Ea(l,a.rotateAngle));var c=i(n,r,a,this,e,h);t.prototype.findChildOffsetFromCenter.call(this,a,c),a.arrange(l,!0),"Vertical"===this.orientation?r+=h.height+a.margin.bottom:n+=h.width+a.margin.right}}return e},e.prototype.updateHorizontalStack=function(t,e){e.height=Math.max(t.height,e.height),e.width+=t.width},e.prototype.updateVerticalStack=function(t,e){e.width=Math.max(t.width,e.width),e.height+=t.height},e.prototype.arrangeHorizontalStack=function(t,e,i,n,r,o){var s=0;if("Top"===i.verticalAlignment)s=e+i.margin.top+o.height/2;else if("Bottom"===i.verticalAlignment){s=n.offsetY+r.height*(1-n.pivot.y)-n.padding.bottom-i.margin.bottom-o.height/2}else s=n.offsetY-r.height*n.pivot.y+r.height/2,i.margin.top&&(s=e+i.margin.top+o.height/2);return{x:t+o.width/2,y:s}},e.prototype.arrangeVerticalStack=function(t,e,i,n,r,o){var s=0;if("Left"===i.horizontalAlignment)s=t+i.margin.left+o.width/2;else if("Right"===i.horizontalAlignment){s=n.offsetX+r.width*(1-n.pivot.x)-n.padding.right-i.margin.right-o.width/2}else s=n.offsetX-r.width*n.pivot.x+r.width/2,i.margin.left&&(s=t+i.margin.left+o.width/2);return{x:s,y:e+o.height/2}},e.prototype.stretchChildren=function(t){if(void 0!==this.children&&this.children.length>0)for(var e=0,i=this.children;e<i.length;e++){var n=i[e];"Vertical"===this.orientation?"Stretch"===n.horizontalAlignment&&(n.desiredSize.width=t.width-(n.margin.left+n.margin.right)):"Stretch"===n.verticalAlignment&&(n.desiredSize.height=t.height-(n.margin.top+n.margin.bottom))}},e.prototype.applyChildMargin=function(t,e){e.height+=t.margin.top+t.margin.bottom,e.width+=t.margin.left+t.margin.right},e}($g),iw=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),nw=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},rw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return iw(e,t),nw([W("Horizontal")],e.prototype,"orientation",void 0),nw([W("Center")],e.prototype,"type",void 0),nw([W(void 0)],e.prototype,"offset",void 0),nw([W(!1)],e.prototype,"enableRouting",void 0),nw([W([])],e.prototype,"children",void 0),nw([W("")],e.prototype,"assistants",void 0),nw([W("")],e.prototype,"level",void 0),nw([W("")],e.prototype,"hasSubTree",void 0),nw([W("")],e.prototype,"rows",void 0),e}(Rp),ow=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),sw=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},aw=function(t){if(t){if(f())return jw;switch(t.type){case"Basic":return gw;case"Flow":return mw;case"Path":return hw;case"Image":return pw;case"Text":return uw;case"Bpmn":return Cw;case"Native":return cw;case"HTML":return dw;case"UmlActivity":return Nw;case"UmlClassifier":return kw;case"SwimLane":return Uw;default:return gw}}return f()?jw:gw},lw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ow(e,t),sw([W("Basic")],e.prototype,"type",void 0),e}(Rp),hw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ow(e,t),e.prototype.getClassName=function(){return"Path"},sw([W("Path")],e.prototype,"type",void 0),sw([W("")],e.prototype,"data",void 0),e}(lw),cw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ow(e,t),e.prototype.getClassName=function(){return"Native"},sw([W("Native")],e.prototype,"type",void 0),sw([W("")],e.prototype,"content",void 0),sw([W("Stretch")],e.prototype,"scale",void 0),e}(lw),dw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ow(e,t),e.prototype.getClassName=function(){return"Html"},sw([W("HTML")],e.prototype,"type",void 0),sw([W("")],e.prototype,"content",void 0),e}(lw),pw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ow(e,t),e.prototype.getClassName=function(){return"Image"},sw([W("Image")],e.prototype,"type",void 0),sw([W("")],e.prototype,"source",void 0),sw([W("None")],e.prototype,"scale",void 0),sw([W("None")],e.prototype,"align",void 0),e}(lw),uw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ow(e,t),e.prototype.getClassName=function(){return"Text"},sw([W("Text")],e.prototype,"type",void 0),sw([W("")],e.prototype,"content",void 0),sw([Q({},ng)],e.prototype,"margin",void 0),e}(lw),gw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ow(e,t),e.prototype.getClassName=function(){return"BasicShape"},sw([W("Basic")],e.prototype,"type",void 0),sw([W("Rectangle")],e.prototype,"shape",void 0),sw([W(0)],e.prototype,"cornerRadius",void 0),sw([q([],Gu)],e.prototype,"points",void 0),e}(lw),mw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ow(e,t),e.prototype.getClassName=function(){return"FlowShape"},sw([W("Flow")],e.prototype,"type",void 0),sw([W("Terminator")],e.prototype,"shape",void 0),e}(lw),fw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ow(e,t),e.prototype.getClassName=function(){return"BpmnGateway"},sw([W("None")],e.prototype,"type",void 0),e}(Rp),vw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ow(e,t),e.prototype.getClassName=function(){return"BpmnDataObject"},sw([W("None")],e.prototype,"type",void 0),sw([W(!1)],e.prototype,"collection",void 0),e}(Rp),yw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ow(e,t),sw([W("None")],e.prototype,"type",void 0),sw([W("None")],e.prototype,"loop",void 0),sw([W(!1)],e.prototype,"call",void 0),sw([W(!1)],e.prototype,"compensation",void 0),e}(Rp),bw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ow(e,t),e.prototype.getClassName=function(){return"BpmnEvent"},sw([W("Start")],e.prototype,"event",void 0),sw([W("None")],e.prototype,"trigger",void 0),e}(Rp),Sw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ow(e,t),e.prototype.getClassName=function(){return"BpmnSubEvent"},sw([W("None")],e.prototype,"trigger",void 0),sw([W("Start")],e.prototype,"event",void 0),sw([W("")],e.prototype,"id",void 0),sw([Q({},Gu)],e.prototype,"offset",void 0),sw([q([],vm)],e.prototype,"annotations",void 0),sw([q([],pm)],e.prototype,"ports",void 0),sw([W()],e.prototype,"width",void 0),sw([W()],e.prototype,"height",void 0),sw([Q({},ng)],e.prototype,"margin",void 0),sw([W("Center")],e.prototype,"horizontalAlignment",void 0),sw([W("Center")],e.prototype,"verticalAlignment",void 0),sw([W(!0)],e.prototype,"visible",void 0),e}(Rp),ww=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ow(e,t),sw([Q({id:"success",event:"End",offset:{x:1,y:.5}},Sw)],e.prototype,"success",void 0),sw([Q({id:"failure",event:"Intermediate",trigger:"Error",offset:{x:.25,y:1}},Sw)],e.prototype,"failure",void 0),sw([Q({id:"cancel",event:"Intermediate",trigger:"Cancel",offset:{x:.75,y:1}},Sw)],e.prototype,"cancel",void 0),e}(Rp),Iw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ow(e,t),sw([W("None")],e.prototype,"type",void 0),sw([W(!1)],e.prototype,"adhoc",void 0),sw([W("Default")],e.prototype,"boundary",void 0),sw([W(!1)],e.prototype,"compensation",void 0),sw([W("None")],e.prototype,"loop",void 0),sw([W(!0)],e.prototype,"collapsed",void 0),sw([q([],Sw)],e.prototype,"events",void 0),sw([Q({},ww)],e.prototype,"transaction",void 0),sw([W(void 0)],e.prototype,"processes",void 0),e}(Rp),xw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ow(e,t),e.prototype.getClassName=function(){return"BpmnActivity"},sw([W("Task")],e.prototype,"activity",void 0),sw([Q({},yw)],e.prototype,"task",void 0),sw([Q({},Iw)],e.prototype,"subProcess",void 0),e}(Rp),Mw=function(t){function e(e,i,n,r){return t.call(this,e,i,n,r)||this}return ow(e,t),e.prototype.getClassName=function(){return"BpmnAnnotation"},sw([W("")],e.prototype,"text",void 0),sw([W("")],e.prototype,"id",void 0),sw([W(0)],e.prototype,"angle",void 0),sw([W()],e.prototype,"height",void 0),sw([W()],e.prototype,"width",void 0),sw([W(0)],e.prototype,"length",void 0),e}(Rp),Cw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ow(e,t),e.prototype.getClassName=function(){return"BpmnShape"},sw([W("Bpmn")],e.prototype,"type",void 0),sw([W("Event")],e.prototype,"shape",void 0),sw([Q({},bw)],e.prototype,"event",void 0),sw([Q({},fw)],e.prototype,"gateway",void 0),sw([Q({},vw)],e.prototype,"dataObject",void 0),sw([Q({},xw)],e.prototype,"activity",void 0),sw([Q({},Mw)],e.prototype,"annotation",void 0),sw([q([],Mw)],e.prototype,"annotations",void 0),e}(lw),Nw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ow(e,t),e.prototype.getClassName=function(){return"UmlActivityShape"},sw([W("UmlActivity")],e.prototype,"type",void 0),sw([W("Action")],e.prototype,"shape",void 0),e}(lw),Ew=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ow(e,t),e.prototype.getClassName=function(){return"MethodArguments"},sw([W("")],e.prototype,"name",void 0),sw([W("")],e.prototype,"type",void 0),sw([Q({},pg)],e.prototype,"style",void 0),e}(Rp),Dw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ow(e,t),e.prototype.getClassName=function(){return"UmlClassAttribute"},sw([W("Public")],e.prototype,"scope",void 0),sw([W(!1)],e.prototype,"isSeparator",void 0),e}(Ew),Tw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ow(e,t),e.prototype.getClassName=function(){return"UmlClassMethod"},sw([q([],Ew)],e.prototype,"parameters",void 0),e}(Dw),Ow=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ow(e,t),e.prototype.getClassName=function(){return"UmlClass"},sw([W("")],e.prototype,"name",void 0),sw([q([],Dw)],e.prototype,"attributes",void 0),sw([q([],Tw)],e.prototype,"methods",void 0),sw([Q({},pg)],e.prototype,"style",void 0),e}(Rp),Lw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ow(e,t),e.prototype.getClassName=function(){return"UmlInterface"},sw([W(!1)],e.prototype,"isSeparator",void 0),e}(Ow),Aw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ow(e,t),e.prototype.getClassName=function(){return"UmlEnumerationMember"},sw([W("")],e.prototype,"name",void 0),sw([W("")],e.prototype,"value",void 0),sw([W(!1)],e.prototype,"isSeparator",void 0),sw([Q({},pg)],e.prototype,"style",void 0),e}(Rp),zw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ow(e,t),e.prototype.getClassName=function(){return"UmlEnumeration"},sw([W("")],e.prototype,"name",void 0),sw([q([],Aw)],e.prototype,"members",void 0),sw([Q({},pg)],e.prototype,"style",void 0),e}(Rp),kw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ow(e,t),e.prototype.getClassName=function(){return"UmlClassifierShape"},sw([W("UmlClassifier")],e.prototype,"type",void 0),sw([Q({},Ow)],e.prototype,"classShape",void 0),sw([Q({},Lw)],e.prototype,"interfaceShape",void 0),sw([Q({},zw)],e.prototype,"enumerationShape",void 0),sw([W("Class")],e.prototype,"classifier",void 0),e}(lw),jw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ow(e,t),e.prototype.getClassName=function(){return"DiagramShape"},sw([W("Basic")],e.prototype,"type",void 0),sw([W("Rectangle")],e.prototype,"basicShape",void 0),sw([W("Terminator")],e.prototype,"flowShape",void 0),sw([W("Event")],e.prototype,"bpmnShape",void 0),sw([W("Action")],e.prototype,"umlActivityShape",void 0),sw([W("")],e.prototype,"data",void 0),sw([W("")],e.prototype,"content",void 0),sw([W("")],e.prototype,"textContent",void 0),sw([W("Stretch")],e.prototype,"scale",void 0),sw([W("")],e.prototype,"source",void 0),sw([W("None")],e.prototype,"align",void 0),sw([Q({},ng)],e.prototype,"margin",void 0),sw([W(0)],e.prototype,"cornerRadius",void 0),sw([q([],Gu)],e.prototype,"points",void 0),sw([Q({},vw)],e.prototype,"dataObject",void 0),sw([Q({},bw)],e.prototype,"event",void 0),sw([Q({},fw)],e.prototype,"gateway",void 0),sw([q([],Mw)],e.prototype,"annotations",void 0),sw([Q({},xw)],e.prototype,"activity",void 0),sw([Q({},Mw)],e.prototype,"annotation",void 0),sw([Q({},zw)],e.prototype,"enumerationShape",void 0),sw([W("Class")],e.prototype,"classifier",void 0),sw([Q({},Ow)],e.prototype,"classShape",void 0),sw([Q({},Lw)],e.prototype,"interfaceShape",void 0),e}(Rp),Pw=function(t){function e(e,i,n,r){var o=t.call(this,e,i,n,r)||this;o.isCanvasUpdate=!1,o.status="None",o.parentId="",o.processId="",o.umlIndex=-1,o.outEdges=[],o.inEdges=[],o.isHeader=!1,o.isLane=!1,o.isPhase=!1,o.isTextNode=!1;var s;return o.children&&o.children.length>0&&((s=n).style&&s.style.fill||(o.style.fill="transparent"),s.style&&s.style.strokeColor||(o.style.strokeColor="transparent")),o.shape&&"UmlActivity"===o.shape.type&&wo(n,o),o.shape&&"SwimLane"===o.shape.type&&vo(n,o),o.ports&&o.ports.length&&So(o),o}return ow(e,t),Object.defineProperty(e.prototype,"actualSize",{get:function(){return null!==this.wrapper?this.wrapper.actualSize:new Qu(this.width||0,this.height||0)},enumerable:!0,configurable:!0}),e.prototype.init=function(t){var e;e="SwimLane"!==this.shape.type?new Gg:new Ab;var i;switch(this.shape.changedProperties={},this.shape.oldProperties={},this.shape.type){case"Path":if(f()||"Freehand"!==this.type){var n=new rm;n.data=this.shape.data,e=n}else{(s=new rm).data=xt(this.shape.points),e=s}break;case"Image":var r=new sm;r.source=this.shape.source,r.imageAlign=this.shape.align,r.imageScale=this.shape.scale,e=r;break;case"Text":var o=new Jg;o.content=f()?this.shape.textContent:this.shape.content,e=o,i=this.style,e.style=i;break;case"Basic":if(!f()&&"Rectangle"===this.shape.shape||f()&&"Rectangle"===this.shape.basicShape){(e=a=new Gg).cornerRadius=this.shape.cornerRadius}else if(!f()&&"Polygon"===this.shape.shape||f()&&"Polygon"===this.shape.basicShape){var s;(s=new rm).data=It(this.shape.points),e=s}else{var a=new rm,l=Ut(f()?this.shape.basicShape:this.shape.shape);a.data=l,e=a}break;case"Flow":var h=new rm,c=Qt(f()?this.shape.flowShape:this.shape.shape);h.data=c,e=h;break;case"UmlActivity":e=es(new rm,e,this);break;case"Bpmn":if(t.bpmnModule){e=t.bpmnModule.initBPMNContent(e,this,t),this.wrapper.elementActions=this.wrapper.elementActions|Ig.ElementIsGroup;var d=this.shape.activity.subProcess;if(d.processes&&d.processes.length)for(var p=0,u=this.shape.activity.subProcess.processes;p<u.length;p++){var g=u[p];!t.nameTable[""+g]||t.nameTable[""+g].processId&&t.nameTable[""+g].processId!==this.id||(t.nameTable[""+g].processId=this.id,d.collapsed&&t.updateElementVisibility(t.nameTable[""+g].wrapper,t.nameTable[""+g],!d.collapsed),e.children.push(t.nameTable[""+g].wrapper))}}break;case"Native":var m=new lm(this.id,t.element.id);m.content=this.shape.content,m.scale=this.shape.scale,e=m;break;case"HTML":var v=new Cb(this.id,t.element.id,void 0,t.nodeTemplate);this.shape.content?v.content=this.shape.content:t.nodeTemplate&&(v.isTemplate=!0,v.template=v.content=ra(v,!0,this)),e=v;break;case"UmlClassifier":e=Os(e,this,t);break;case"SwimLane":this.annotations=[],this.ports=[],e.cellStyle.fill="none",e.cellStyle.strokeColor="none",this.container={type:"Grid",orientation:this.shape.orientation},e.id=this.id,this.container.orientation=this.shape.orientation,this.constraints|=wg.HideThumbs,tr(e,t,this)}return e.id=this.id+"_content",e.relativeMode="Object","Basic"===this.shape.type&&"Rectangle"===this.shape.shape?e.shapeType="Rectangle":e.shapeType="Others",void 0!==this.width&&(e.width=this.width),e.horizontalAlignment="Stretch",void 0!==this.height&&(e.height=this.height),void 0!==this.minHeight&&(e.minHeight=this.minHeight),void 0!==this.maxHeight&&(e.maxHeight=this.maxHeight),void 0!==this.minWidth&&(e.minWidth=this.minWidth),void 0!==this.maxWidth&&(e.maxWidth=this.maxWidth),(!f()&&"Rectangle"===this.shape.shape&&!this.shape.cornerRadius||f()&&"Rectangle"===this.shape.basicShape&&"Basic"===this.shape.type&&!this.shape.cornerRadius)&&(e.isRectElement=!0),e.verticalAlignment="Stretch",(this.shape instanceof uw||f()&&"Text"===this.shape.type)&&(e.margin=this.shape.margin),zn(this)&&0!=(this.constraints&wg.Shadow)&&(e.shadow=this.shadow),("Bpmn"!==this.shape.type||!f()&&"Message"===this.shape.shape||f()&&"Message"===this.shape.bpmnShape||!f()&&"DataSource"===this.shape.shape||f()&&"DataSource"===this.shape.bpmnShape)&&("UmlActivity"!==this.shape.type||!f()&&"FinalNode"!==this.shape.shape||f()&&"FinalNode"!==this.shape.umlActivityShape)&&"Text"!==this.shape.type&&(e.style=this.style,this.oldGradientValue=this.style.gradient?fa(this.style.gradient):null),(this.wrapper.elementActions&Ig.ElementIsGroup||"Horizontal"!==this.flip)&&"Vertical"!==this.flip||(e.flip=this.flip),e},e.prototype.initContainer=function(){this.id||(this.id=da());var t;if(!this.container||this.shape instanceof Uw)t=this.children?new $g:new em;else switch(this.container.type){case"Canvas":t=new em;break;case"Stack":t=new ew;break;case"Grid":(t=new Ab).setDefinitions(this.rows,this.columns)}return t.id=this.id,t.offsetX=this.offsetX,t.offsetY=this.offsetY,t.visible=this.visible,t.horizontalAlignment=this.horizontalAlignment,t.verticalAlignment=this.verticalAlignment,this.container&&(t.width=this.width,t.height=this.height,"Stack"===this.container.type&&(t.orientation=this.container.orientation)),t.style.fill=this.backgroundColor,t.style.strokeColor=this.borderColor,t.style.strokeWidth=this.borderWidth,t.rotateAngle=this.rotateAngle,t.minHeight=this.minHeight,t.minWidth=this.minWidth,t.maxHeight=this.maxHeight,t.maxWidth=this.maxWidth,t.pivot=this.pivot,t.margin=this.margin,t.flip=this.flip,this.wrapper=t,t},e.prototype.initPorts=function(t,e){for(var i=0;this.ports,i<this.ports.length;i++)this.initPort(t,e,this.ports[parseInt(i.toString(),10)])},e.prototype.initPort=function(t,e,i){var n,r=this.wrapper;n=this.initPortWrapper(i,this);var o,s=Oa(t);s&&(o=s(n,this)),n.description=o||n.id,n.inversedAlignment=r.inversedAlignment,n.elementActions=n.elementActions|Ig.ElementIsPort,e.children.push(n)},e.prototype.getIconOffet=function(t,e){var i,n;return"BottomToTop"===t.orientation?(i=e.offset.x,n=1-e.offset.y):"LeftToRight"===t.orientation?(i=e.offset.y,n=e.offset.x):"RightToLeft"===t.orientation?(i=1-e.offset.y,n=e.offset.x):(i=e.offset.x,n=e.offset.y),{x:i,y:n}},e.prototype.initIcons=function(t,e,i,n){var r,o=this.wrapper,s=this.isExpanded?this.expandIcon:this.collapseIcon;if("None"!==s.shape){var a=new em;a.float=!0;a.id=this.id+"_icon_content",a.children=[],a.height=s.height,a.width=s.width,a.style.strokeColor="transparent",a.margin=s.margin,a.horizontalAlignment="Center",a.verticalAlignment="Center",a.visible=this.visible,r=this.getIconOffet(e,s),a.setOffsetWithRespectToBounds(r.x,r.y,"Fraction"),a.relativeMode="Point",this.initIconSymbol(s,a,t,n);var l=void 0,h=Oa(t);h&&(l=h(s,this)),a.description=l||a.id,a.inversedAlignment=o.inversedAlignment,i.children.push(a)}},e.prototype.initfixedUserHandles=function(t){var e=this.wrapper,i=new em;i.float=!0;t.id=t.id||da(),i.id=this.id+"_"+t.id,i.children=[],i.height=t.height,i.width=t.width,i.style.strokeColor=t.handleStrokeColor,i.style.fill=t.fill,i.style.strokeWidth=t.handleStrokeWidth,i.margin=t.margin,i.visible=t.visibility,i.cornerRadius=t.cornerRadius,i.horizontalAlignment="Center",i.verticalAlignment="Center";var n=this.getfixedUserHandleOffet(t);i.setOffsetWithRespectToBounds(n.x,n.y,"Fraction"),i.relativeMode="Point";var r=jo(t,i);return i.children.push(r),i.description=i.id,i.inversedAlignment=e.inversedAlignment,i},e.prototype.getfixedUserHandleOffet=function(t){return{x:t.offset.x,y:t.offset.y}},e.prototype.initAnnotations=function(t,e,i,n,r){for(var o,s=0;this.annotations,s<this.annotations.length;s++){o=this.initAnnotationWrapper(this.annotations[parseInt(s.toString(),10)],i,n,s,r);var a=void 0,l=Oa(t);l&&(a=l(o,this)),o.description=a||o.id,o.inversedAlignment=e.inversedAlignment,e.children.push(o)}},e.prototype.initPortWrapper=function(t,e){t.id=t.id||da();var i=new rm;i.height=t.height,i.width=t.width;var n="Custom"===t.shape?t.pathData:Vt(t.shape);i.id=this.id+"_"+t.id,i.margin=t.margin,i.data=n;var r=t.style;return i.style={fill:r.fill,strokeColor:r.strokeColor,gradient:null,opacity:r.opacity,strokeDashArray:r.strokeDashArray,strokeWidth:r.strokeWidth},i.horizontalAlignment=t.horizontalAlignment,i.verticalAlignment=t.verticalAlignment,i=e&&"Label"!==e.flipMode&&"None"!==e.flipMode?FS(i,this.flip,t):FS(i,"None",t),void 0===this.width&&void 0===this.height||(i.float=!0),i.relativeMode="Point",i.visible=!(!hs(t,gg.Visible)||hs(t,gg.Hover)||hs(t,gg.Connect)),i.elementActions=i.elementActions|Ig.ElementIsPort,i},e.prototype.initAnnotationWrapper=function(t,e,i,n,r){t.id=t.id||n+"annotation"||da();var o,s=t;if(f()&&"Template"===t.annotationType&&(t.template=t.template?t.template:""),e&&(t.template||"Template"===t.annotationType||r&&""===t.content))o=ca(o=new Cb(this.id,e,t.id,r),t,r);else{(o=new Jg).canMeasure=!i;var a=t.style,l=t.hyperlink.link?t.hyperlink:void 0;o.style={fill:a.fill,strokeColor:a.strokeColor,strokeWidth:a.strokeWidth,bold:a.bold,textWrapping:a.textWrapping,color:l?l.color||o.hyperlink.color:a.color,whiteSpace:a.whiteSpace,fontFamily:a.fontFamily,fontSize:a.fontSize,italic:a.italic,gradient:null,opacity:a.opacity,strokeDashArray:a.strokeDashArray,textAlign:a.textAlign,textOverflow:t.style.textOverflow,textDecoration:l?l.textDecoration||o.hyperlink.textDecoration:a.textDecoration},o.hyperlink.link=t.hyperlink.link||void 0,o.hyperlink.hyperlinkOpenState=t.hyperlink.hyperlinkOpenState||void 0,o.hyperlink.content=t.hyperlink.content||void 0,o.hyperlink.textDecoration=t.hyperlink.textDecoration||void 0,o.content=l?l.content||o.hyperlink.link:t.content}return o.constraints=t.constraints,o.height=t.height,o.width=t.width,o.visible=t.visibility,o.rotateAngle=t.rotateAngle,o.id=this.id+"_"+t.id,void 0===this.width||t.template||(void 0===t.width||t.width>this.width&&("Wrap"===t.style.textWrapping||"WrapWithOverflow"===t.style.textWrapping))&&(o.width=this.width),o.margin=t.margin,o.horizontalAlignment=t.horizontalAlignment,o.verticalAlignment=t.verticalAlignment,o.setOffsetWithRespectToBounds(s.offset.x,s.offset.y,"Fraction"),void 0===this.width&&void 0===this.height||(o.float=!0),o.relativeMode="Point",o},e.prototype.initIconContainer=function(t,e){var i=new Gg;return i.id=e.id+"_rect",i.height=t.height,i.width=t.width,i.visible=e.visible,i.margin=t.margin,i.cornerRadius=t.cornerRadius,i.style={fill:t.fill,strokeColor:t.borderColor,strokeWidth:t.borderWidth},i.setOffsetWithRespectToBounds(.5,.5,"Fraction"),i.horizontalAlignment="Center",i.verticalAlignment="Center",i.relativeMode="Object",i.description=i.description||"Click here to expand or collapse",i},e.prototype.initIconSymbol=function(t,e,i,n){var r;if(e.children.push(this.initIconContainer(t,e)),"Template"===t.shape)(r=new lm(this.id,n)).content=t.content,r.height=10,r.width=10;else{(r=new rm).data=Wt(t);var o=ks(r.data);r.height=o.height<10?o.height:10-(t.padding.bottom+t.padding.top),r.width=o.width<10?o.width:10-(t.padding.left+t.padding.right)}r.id=e.id+"_shape",r.horizontalAlignment="Center",r.verticalAlignment="Center",r.visible=e.visible,r.visible=e.visible,r.style={fill:"black",strokeColor:t.borderColor,strokeWidth:t.borderWidth},r.setOffsetWithRespectToBounds(.5,.5,"Fraction"),r.relativeMode="Object",r.description=e.description||"Click here to expand or collapse",e.children.push(r)},e.prototype.getClassName=function(){return"Node"},sw([q([],vm)],e.prototype,"annotations",void 0),sw([W(0)],e.prototype,"offsetX",void 0),sw([Q({},rw)],e.prototype,"layoutInfo",void 0),sw([W(0)],e.prototype,"offsetY",void 0),sw([q([],pm)],e.prototype,"ports",void 0),sw([W(!0)],e.prototype,"isExpanded",void 0),sw([q([],Tb)],e.prototype,"fixedUserHandles",void 0),sw([Q({},JS)],e.prototype,"expandIcon",void 0),sw([Q({},JS)],e.prototype,"collapseIcon",void 0),sw([Q({x:.5,y:.5},Gu)],e.prototype,"pivot",void 0),sw([W()],e.prototype,"width",void 0),sw([W()],e.prototype,"height",void 0),sw([W()],e.prototype,"minWidth",void 0),sw([W()],e.prototype,"minHeight",void 0),sw([W()],e.prototype,"maxWidth",void 0),sw([W()],e.prototype,"maxHeight",void 0),sw([W(0)],e.prototype,"rotateAngle",void 0),sw([Q({fill:"white"},pg)],e.prototype,"style",void 0),sw([W("transparent")],e.prototype,"backgroundColor",void 0),sw([W("none")],e.prototype,"borderColor",void 0),sw([W(0)],e.prototype,"borderWidth",void 0),sw([W()],e.prototype,"data",void 0),sw([X(aw)],e.prototype,"shape",void 0),sw([Q({},bb)],e.prototype,"previewSize",void 0),sw([Q({},bb)],e.prototype,"dragSize",void 0),sw([W(null)],e.prototype,"wrapper",void 0),sw([W(wg.Default)],e.prototype,"constraints",void 0),sw([Q({},rg)],e.prototype,"shadow",void 0),sw([W()],e.prototype,"children",void 0),sw([Q({left:0,right:0,top:0,bottom:0},ng)],e.prototype,"padding",void 0),sw([W(null)],e.prototype,"container",void 0),sw([W("Left")],e.prototype,"horizontalAlignment",void 0),sw([W("Top")],e.prototype,"verticalAlignment",void 0),sw([W()],e.prototype,"rows",void 0),sw([W()],e.prototype,"columns",void 0),sw([W()],e.prototype,"rowIndex",void 0),sw([W()],e.prototype,"columnIndex",void 0),sw([W()],e.prototype,"rowSpan",void 0),sw([W()],e.prototype,"columnSpan",void 0),sw([W("")],e.prototype,"branch",void 0),e}(xb),Rw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ow(e,t),sw([W("")],e.prototype,"id",void 0),sw([Q({},fm)],e.prototype,"annotation",void 0),sw([Q({fill:"#E7F4FF",strokeColor:"#CCCCCC"},cg)],e.prototype,"style",void 0),sw([W(50)],e.prototype,"height",void 0),sw([W(50)],e.prototype,"width",void 0),e}(Rp),Bw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ow(e,t),e.prototype.getClassName=function(){return"Lane"},sw([W("")],e.prototype,"id",void 0),sw([Q({fill:"#F9F9F9",strokeColor:"#CCCCCC"},cg)],e.prototype,"style",void 0),sw([q([],Pw)],e.prototype,"children",void 0),sw([W(100)],e.prototype,"height",void 0),sw([W(100)],e.prototype,"width",void 0),sw([Q({style:{fill:"#E7F4FF",strokeColor:"#CCCCCC"},annotation:{content:"Function"}},Rw)],e.prototype,"header",void 0),sw([W(!0)],e.prototype,"canMove",void 0),sw([W()],e.prototype,"addInfo",void 0),e}(Rp),Hw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ow(e,t),e.prototype.getClassName=function(){return"Phase"},sw([W("")],e.prototype,"id",void 0),sw([Q({strokeColor:"#CCCCCC"},cg)],e.prototype,"style",void 0),sw([Q({annotation:{content:"Phase"}},Rw)],e.prototype,"header",void 0),sw([W(100)],e.prototype,"offset",void 0),sw([W()],e.prototype,"addInfo",void 0),e}(Rp),Uw=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.padding=20,e.hasHeader=!0,e}return ow(e,t),e.prototype.getClassName=function(){return"SwimLane"},sw([W("SwimLane")],e.prototype,"type",void 0),sw([W(20)],e.prototype,"phaseSize",void 0),sw([q([],Hw)],e.prototype,"phases",void 0),sw([W("Horizontal")],e.prototype,"orientation",void 0),sw([q([],Bw)],e.prototype,"lanes",void 0),sw([Q({style:{fill:"#E7F4FF",strokeColor:"#CCCCCC"},annotation:{content:"Function"}},Rw)],e.prototype,"header",void 0),sw([W(!1)],e.prototype,"isLane",void 0),sw([W(!1)],e.prototype,"isPhase",void 0),e}(lw),Vw=function(){function t(){}return t.prototype.getClassName=function(){return"ChildContainer"},sw([W("Canvas")],t.prototype,"type",void 0),sw([W("Vertical")],t.prototype,"orientation",void 0),t}(),_w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ow(e,t),e.prototype.init=function(t){var e=new $g;if(e.measureChildren=!1,e.children=[],this.annotation){var i=this.nodes.length>0?t.nameTable[this.nodes[0].id].wrapper:t.nameTable[this.connectors[0].id].wrapper,n=t.getWrapper(i,this.annotation.id);e.children.push(n)}else if(this.nodes||this.connectors){for(var r=0;r<this.nodes.length;r++){n=t.nameTable[this.nodes[parseInt(r.toString(),10)].id].wrapper;e.children.push(n)}for(var o=0;o<this.connectors.length;o++){n=t.nameTable[this.connectors[parseInt(o.toString(),10)].id].wrapper;e.children.push(n)}}var s=t.isProtectedOnChange;return t.protectPropertyChange(!1),this.wrapper=e,t.protectPropertyChange(s),e},sw([W(null)],e.prototype,"wrapper",void 0),sw([W(14)],e.prototype,"handleSize",void 0),sw([q([],Pw)],e.prototype,"nodes",void 0),sw([q([],ES)],e.prototype,"connectors",void 0),sw([W()],e.prototype,"width",void 0),sw([W()],e.prototype,"height",void 0),sw([W(0)],e.prototype,"rotateAngle",void 0),sw([W(0)],e.prototype,"offsetX",void 0),sw([W(0)],e.prototype,"offsetY",void 0),sw([Q({x:.5,y:.5},Gu)],e.prototype,"pivot",void 0),sw([W("CompleteIntersect")],e.prototype,"rubberBandSelectionMode",void 0),sw([q([],zS)],e.prototype,"userHandles",void 0),sw([W(fg.All)],e.prototype,"constraints",void 0),sw([W()],e.prototype,"setTooltipTemplate",void 0),sw([q([],Pw)],e.prototype,"selectedObjects",void 0),e}(Rp),Fw=function(){function t(){}return t.getContext=function(t){return t.getContext("2d")},t.setCanvasSize=function(t,e,i){t&&(t.setAttribute("width",e.toString()),t.setAttribute("height",i.toString()))},t.prototype.renderGradient=function(t,e,i,n){var r,o,s;if("None"!==t.gradient.type){for(var a=0;a<t.gradient.stops.length;a++)r=void 0!==r?t.gradient.stops[parseInt(a.toString(),10)].offset:Math.max(r,t.gradient.stops[parseInt(a.toString(),10)].offset),o=void 0!==o?t.gradient.stops[parseInt(a.toString(),10)].offset:Math.min(o,t.gradient.stops[parseInt(a.toString(),10)].offset);if("Linear"===t.gradient.type){var l=t.gradient;s=e.createLinearGradient(i+l.x1,n+l.y1,i+l.x2,n+l.y2)}else{var h=t.gradient;s=e.createRadialGradient(i+h.fx,n+h.fy,0,i+h.cx,n+h.cy,h.r)}for(a=0;a<t.gradient.stops.length;a++){var c=t.gradient.stops[parseInt(a.toString(),10)],d=o<0?(r+c.offset)/(2*r):c.offset/r;s.addColorStop(d,c.color)}e.fillStyle=s}return e},t.prototype.renderShadow=function(e,i,n){void 0===n&&(n=null);var r=t.getContext(i);r.save(),r.beginPath(),r.strokeStyle=r.fillStyle=e.shadow.color,r.globalAlpha=e.shadow.opacity;var o=Gu.transform({x:0,y:0},e.shadow.angle,e.shadow.distance),s=e.x+o.x,a=e.y+o.y,l=s+e.width*e.pivotX,h=a+e.height*e.pivotY;this.rotateContext(i,e.angle,l,h),n?(r.translate(s,a),this.renderPath(i,e,n),r.translate(-s,-a)):(r.rect(s,a,e.width,e.height),r.fillRect(s,a,e.width,e.height)),r.fill(),r.stroke(),r.closePath(),r.restore()},t.createCanvas=function(t,e,i){var n=Ks("canvas",{id:t});return this.setCanvasSize(n,e,i),n},t.prototype.setStyle=function(e,i){var n=t.getContext(e);"none"===i.fill&&(i.fill="transparent"),"none"===i.stroke&&(i.stroke="transparent"),n.strokeStyle=i.stroke,n.lineWidth=i.strokeWidth,0===i.strokeWidth&&(n.strokeStyle="transparent"),n.globalAlpha=i.opacity;var r=[];i.dashArray&&(r=this.parseDashArray(i.dashArray)),n.setLineDash(r),i.gradient&&"None"!==i.gradient.type?"Rectangle"===i.shapeType?this.renderGradient(i,n,i.x,i.y):this.renderGradient(i,n,0,0):n.fillStyle=i.fill},t.prototype.rotateContext=function(e,i,n,r){var o=t.getContext(e);o.translate(n,r),o.rotate(i*Math.PI/180),o.translate(-n,-r)},t.prototype.setFontStyle=function(e,i){var n=t.getContext(e),r="";i.italic&&(r+="italic "),i.bold&&(r+="bold "),r+=i.fontSize+"px ",r+=i.fontFamily,n.font=r},t.prototype.parseDashArray=function(t){for(var e=[],i=-1!==t.indexOf(" ")?" ":",",n=0,r=t.split(i);n<r.length;n++){var o=r[n];e.push(Number(o))}return e},t.prototype.drawRoundedRect=function(e,i){var n=t.getContext(e);n.beginPath();var r=i.x,o=i.y,s=i.width,a=i.height,l=r+s/2,h=o+a/2;n.beginPath(),this.setStyle(e,i),n.moveTo(r,h),n.quadraticCurveTo(r,o,l,o),n.quadraticCurveTo(r+s,o,r+s,h),n.quadraticCurveTo(r+s,o+a,l,o+a),n.quadraticCurveTo(r,o+a,r,h),n.stroke()},t.prototype.drawRectangle=function(e,i,n,r){if(!0===i.visible)if(i.cornerRadius)!r&&(i.width<30||i.height<30)?this.drawRoundedRect(e,i):(i.data=wt(i.cornerRadius,i.height,i.width),this.drawPath(e,i));else{var o=t.getContext(e);i.shadow&&this.renderShadow(i,e),o.save(),o.beginPath();i.cornerRadius;var s=i.x+i.width*i.pivotX,a=i.y+i.height*i.pivotY;this.rotateContext(e,i.angle,s,a),this.setStyle(e,i),o.rect(i.x,i.y,i.width,i.height),o.fillRect(i.x,i.y,i.width,i.height),o.fill(),o.stroke(),o.closePath(),o.restore()}},t.prototype.drawPath=function(e,i){var n=[];n=Mt(n=bt(i.data)),i.shadow&&this.renderShadow(i,e,n);var r=t.getContext(e);r.save(),r.beginPath();var o=i.y+i.height*i.pivotY,s=i.x+i.width*i.pivotX;"Horizontal"===i.flip||"Vertical"===i.flip?(r.translate(i.x+i.width/2,i.y+i.height/2),r.rotate(-i.angle*Math.PI/180),r.translate(-i.x-i.width/2,-i.y-i.height/2)):this.rotateContext(e,i.angle,s,o),this.setStyle(e,i),r.translate(i.x,i.y),"Horizontal"===i.flip?(r.scale(-1,1),r.translate(-1*i.width,0)):"Vertical"===i.flip?(r.scale(1,-1),r.translate(0,-1*i.height)):"Both"===i.flip&&(r.scale(-1,-1),r.translate(-1*i.width,-1*i.height)),this.renderPath(e,i,n),r.fill(),r.translate(-i.x,-i.y),r.stroke(),r.restore()},t.prototype.renderPath=function(e,i,n){if(!0===i.visible){var r,o=t.getContext(e),s=void 0,a=void 0,l=void 0,h=void 0,c=void 0,d=void 0,p=void 0,u=void 0,g=void 0,m=n;for(p=0,u=0,g=0,r=m.length;g<r;++g){var f=m[parseInt(g.toString(),10)],v=f.command;switch("x1"in f&&(l=f.x1),"x2"in f&&(c=f.x2),"y1"in f&&(h=f.y1),"y2"in f&&(d=f.y2),"x"in f&&(p=f.x),"y"in f&&(u=f.y),v){case"M":o.moveTo(p,u),f.x=p,f.y=u;break;case"L":o.lineTo(p,u),f.x=p,f.y=u;break;case"C":o.bezierCurveTo(l,h,c,d,p,u),f.x=p,f.y=u,f.x1=l,f.y1=h,f.x2=c,f.y2=d;break;case"Q":o.quadraticCurveTo(l,h,p,u),f.x=p,f.y=u,f.x1=l,f.y1=h;break;case"A":var y=s,b=a,S=f.r1,w=f.r2,I=f.angle*(Math.PI/180),x=f.largeArc,M=f.sweep,C=p,N=u,E={x:Math.cos(I)*(y-C)/2+Math.sin(I)*(b-N)/2,y:-Math.sin(I)*(y-C)/2+Math.cos(I)*(b-N)/2},D=Math.pow(E.x,2)/Math.pow(S,2)+Math.pow(E.y,2)/Math.pow(w,2);D>1&&(S*=Math.sqrt(D),w*=Math.sqrt(D));var T=Math.pow(w,2)*Math.pow(E.x,2),O=(x===M?-1:1)*Math.sqrt((Math.pow(S,2)*Math.pow(w,2)-Math.pow(S,2)*Math.pow(E.y,2)-T)/(Math.pow(S,2)*Math.pow(E.y,2)+Math.pow(w,2)*Math.pow(E.x,2)));isNaN(O)&&(O=0);var L=O*S*E.y/w,A=O*-w*E.x/S,z={x:(y+C)/2+Math.cos(I)*L-Math.sin(I)*A,y:(b+N)/2+Math.sin(I)*L+Math.cos(I)*A},k=this.a([1,0],[(E.x-L)/S,(E.y-A)/w]),j=[(E.x-L)/S,(E.y-A)/w],P=[(-E.x-L)/S,(-E.y-A)/w],R=this.a(j,P);if(this.r(j,P)<=-1&&(R=Math.PI),this.r(j,P)>=1&&(R=0),f.centp=z,f.xAxisRotation=I,f.rx=S,f.ry=w,f.a1=k,f.ad=R,f.sweep=M,null!=o){var B=S>w?S:w,H=S>w?1:S/w,U=S>w?w/S:1;o.save(),o.translate(z.x,z.y),o.rotate(I),o.scale(H,U),o.arc(0,0,B,k,k+R,!M),o.scale(1/H,1/U),o.rotate(-I),o.translate(-z.x,-z.y),o.restore()}break;case"Z":case"z":o.closePath(),p=s,u=a}s=p,a=u}}},t.prototype.drawText=function(e,i,n,r,o,s,a){if(i.content&&!0===i.visible){var l=t.getContext(e);l.save(),this.setStyle(e,i),s&&(i.fontSize*=s);var h=i.x+i.width*i.pivotX,c=i.y+i.height*i.pivotY;this.rotateContext(e,i.angle,h,c),this.setFontStyle(e,i);var d=0,p=[];p=i.childNodes;var u=i.wrapBounds;if(l.fillStyle=i.color,u){var g=this.labelAlign(i,u,p);for(d=0;d<p.length;d++){var m=p[parseInt(d.toString(),10)];m.x=ha(m,p,d,i);var f=g.x+(s?m.x*s:m.x)-u.x,v=g.y+(s?m.dy*s:m.dy)*d+.8*i.fontSize;if(u.width>i.width&&"Wrap"!==i.textOverflow&&"NoWrap"===i.textWrapping&&(m.text=Ca(m.text,i)),"Clip"!==i.textOverflow&&"Ellipsis"!==i.textOverflow||"Wrap"!==i.textWrapping)l.fillText(m.text,f,v);else if(v<a.actualSize.height+a.bounds.y){if("Ellipsis"===i.textOverflow&&p[d+1]){var y=p[d+1];g.y+y.dy*(d+1)+.8*i.fontSize>a.actualSize.height+a.bounds.y&&(m.text=m.text.slice(0,m.text.length-3),m.text=m.text.concat("..."))}l.fillText(m.text,f,v)}if("Underline"===i.textDecoration||"Overline"===i.textDecoration||"LineThrough"===i.textDecoration){var b=f,S=void 0,w=f+l.measureText(m.text).width,I=void 0;switch(i.textDecoration){case"Underline":S=v+2,I=v+2;break;case"Overline":S=g.y+m.dy*d,I=g.y+m.dy*d;break;case"LineThrough":S=(v+g.y+m.dy*d)/2+2,I=(v+g.y+m.dy*d)/2+2}l.beginPath(),l.moveTo(b,S),l.lineTo(w,I),l.strokeStyle=i.color,l.lineWidth=.08*i.fontSize,l.globalAlpha=i.opacity,l.stroke()}}}l.restore()}},t.prototype.loadImage=function(t,e,i,n,r){this.rotateContext(i,e.angle,n,r);var o=new Image;o.src=e.source,this.image(t,o,e.x,e.y,e.width,e.height,e)},t.prototype.drawImage=function(e,i,n,r){var o=this;if(i.visible){var s=t.getContext(e);s.save();var a=i.x+i.width*i.pivotX,l=i.y+i.height*i.pivotY,h=new Image;h.src=i.source;var c=s.canvas.id.split("_");c[c.length-1];r?h.onload=function(){o.loadImage(s,i,e,a,l)}:this.loadImage(s,i,e,a,l),s.restore()}},t.prototype.image=function(t,e,i,n,r,o,s){t.beginPath();var a=e.width,l=e.height,h=r,c=o,d=0,p=0;if(s&&"None"!==s.alignment){var u=s.alignment.toLowerCase().substr(1,3),g=s.alignment.toLowerCase().substr(5,3);if("Slice"===s.scale){var m=function(){d=h,p=l*h/a},f=function(){d=a*c/l,p=c};h>c?(m(),c>p&&f()):h===c?a>l?f():m():(f(),h>d&&m());var v=this.getSliceOffset(u,d,h,a),y=this.getSliceOffset(g,p,c,l),b=a-v,S=l-y,w=d-v*(d/a),I=p-y*(p/l),x=Ks("canvas",{width:r.toString(),height:o.toString()});x.getContext("2d").drawImage(e,v,y,b,S,0,0,w,I),t.drawImage(x,i,n,r,o)}else if("Meet"===s.scale){var M=l/a,C=c/h;d=C>M?h:c/M,p=C>M?h*M:c,i+=this.getMeetOffset(u,d,h),n+=this.getMeetOffset(g,p,c),t.drawImage(e,0,0,a,l,i,n,d,p)}else t.drawImage(e,i,n,r,o)}else if("None"!==s.flip){var N=1,E=1;"Horizontal"!==s.flip&&"Both"!==s.flip||(i=-i,r=-r,N=-1),"Vertical"!==s.flip&&"Both"!==s.flip||(n=-n,o=-o,E=-1),t.scale(N,E),t.drawImage(e,i,n,r,o)}else t.drawImage(e,i,n,r,o);t.closePath()},t.prototype.getSliceOffset=function(t,e,i,n){switch(t){case"min":return 0;case"mid":return(e-i)/2*n/e;case"max":return(e-i)*n/e;default:return 0}},t.prototype.getMeetOffset=function(t,e,i){var n=Math.max(e,i),r=Math.min(e,i);switch(t){case"min":return 0;case"mid":return(n-r)/2;case"max":return n-r;default:return 0}},t.prototype.m=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},t.prototype.r=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(this.m(t)*this.m(e))},t.prototype.a=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(this.r(t,e))},t.prototype.labelAlign=function(t,e,i){var n=new Qu(e.width,i.length*(1.2*t.fontSize)),r={x:0,y:0},o=t.x,s=t.y,a=.5*t.width,l=.5*t.height;return"left"===t.textAlign?a=0:"center"===t.textAlign?a=e.width>t.width&&("Ellipsis"===t.textOverflow||"Clip"===t.textOverflow)&&"NoWrap"===t.textWrapping?0:.5*t.width:"right"===t.textAlign&&(a=1*t.width),r.x=o+a+(e?e.x:0),r.y=s+l-n.height/2,r},t}(),Yw=function(){function t(){}return t.prototype.renderShadow=function(t,e,i,n){void 0===i&&(i=null);var r,o,s=Gu.transform({x:0,y:0},t.shadow.angle,t.shadow.distance);n&&(o=n.getElementById(e.id+"_shadow")),o||(r=i?"path":"rect",o=document.createElementNS("http://www.w3.org/2000/svg",r),e.appendChild(o));var a={id:e.id+"_shadow",fill:t.shadow.color,stroke:t.shadow.color,opacity:t.shadow.opacity.toString(),transform:"rotate("+t.angle+","+(t.x+t.width*t.pivotX)+","+(t.y+t.height*t.pivotY)+")translate("+(t.x+s.x)+","+(t.y+s.y)+")"};if(n){var l=n.getElementById(e.id);l&&l.insertBefore(o,l.firstChild)}oa(o,a),i?i&&this.renderPath(o,t,i):oa(o,{width:t.width,height:t.height})},t.prototype.parseDashArray=function(t){return[]},t.prototype.drawRectangle=function(t,e,i,n,r,o,s,a,l){e.shadow&&!n&&this.renderShadow(e,t,void 0,o);var h;h=e.id===t.id?e.id+"_container":e.id;var c;o&&(c=o.getElementById(h)),c&&!r||(c=document.createElementNS("http://www.w3.org/2000/svg","rect"),t.appendChild(c));var d;o&&!e.shadow&&(d=o.getElementById(e.id+"_groupElement_shadow"))&&d.parentNode.removeChild(d);var p;p=a?{id:h,x:e.x.toString(),y:e.y.toString(),width:e.width.toString(),height:e.height.toString(),visibility:e.visible?"visible":"hidden",transform:"rotate("+e.angle+","+(e.x+e.width/2)+","+(e.y+e.height/2)+")",rx:e.cornerRadius||0,ry:e.cornerRadius||0,opacity:e.opacity}:{id:h,x:e.x.toString(),y:e.y.toString(),width:e.width.toString(),height:e.height.toString(),visibility:e.visible?"visible":"hidden",transform:"rotate("+e.angle+","+(e.x+e.width*e.pivotX)+","+(e.y+e.height*e.pivotY)+")",rx:e.cornerRadius||0,ry:e.cornerRadius||0,opacity:e.opacity},s&&(p.role="img",p["aria-label"]=s);var u=e.class||"";l||(u.includes("e-diagram-resize-handle")||u.includes("e-diagram-endpoint-handle")||u.includes("e-diagram-bezier-control-handle"))&&(u+=" e-disabled"),e.class&&(p.class=u);s||(p["pointer-events"]="none"),oa(c,p),this.setSvgStyle(c,e,i)},t.prototype.updateSelectionRegion=function(t,e){var i;i=t.parentNode.getElementById(e.id);var n={id:e.id,x:e.x.toString(),y:e.y.toString(),width:e.width.toString(),height:e.height.toString(),transform:"rotate("+e.angle+","+(e.x+e.width*e.pivotX)+","+(e.y+e.height*e.pivotY)+")",class:"e-diagram-selected-region"};i||(i=document.createElementNS("http://www.w3.org/2000/svg","rect"),t.appendChild(i)),this.setSvgStyle(i,e),oa(i,n)},t.prototype.createGElement=function(t,e){return Js(t,e)},t.prototype.drawLine=function(t,e){var i=document.createElementNS("http://www.w3.org/2000/svg","line");this.setSvgStyle(i,e);var n=e.x+e.width*e.pivotX,r=e.y+e.height*e.pivotY,o={id:e.id,x1:e.startPoint.x+e.x,y1:e.startPoint.y+e.y,x2:e.endPoint.x+e.x,y2:e.endPoint.y+e.y,stroke:e.stroke,"stroke-width":e.strokeWidth.toString(),opacity:e.opacity.toString(),transform:"rotate("+e.angle+" "+n+" "+r+")",visibility:e.visible?"visible":"hidden"};e.class&&(o.class=e.class),oa(i,o),t.appendChild(i)},t.prototype.drawCircle=function(t,e,i,n){var r=document.createElementNS("http://www.w3.org/2000/svg","circle");this.setSvgStyle(r,e);var o=e.class||"";i||(o+=" e-disabled");var s={id:e.id,cx:e.centerX,cy:e.centerY,r:e.radius,visibility:e.visible?"visible":"hidden",class:o};n&&(s.role="img",s["aria-label"]=n),r.style.display=e.visible?"block":"none",oa(r,s),t.appendChild(r)},t.prototype.drawPath=function(t,e,i,n,r,o,s){var a=[];a=Mt(a=bt(e.data)),e.shadow&&this.renderShadow(e,t,a,r);var l;r&&!e.shadow&&(l=r.getElementById(e.id+"_groupElement_shadow"))&&l.parentNode.removeChild(l);var h;r&&(h=r.getElementById(e.id)),h&&!n||(h=document.createElementNS("http://www.w3.org/2000/svg","path"),t.appendChild(h)),this.renderPath(h,e,a);var c={};c=s?{id:e.id,transform:"rotate("+e.angle+","+(e.x+e.width*e.pivotX)+","+(e.y+e.height*e.pivotY)+")translate("+e.x+","+e.y+"),scale("+s+")",visibility:e.visible?"visible":"hidden",opacity:e.opacity}:{id:e.id,transform:"rotate("+e.angle+","+(e.x+e.width*e.pivotX)+","+(e.y+e.height*e.pivotY)+")translate("+e.x+","+e.y+")",visibility:e.visible?"visible":"hidden",opacity:e.opacity},o&&(c.role="img",c["aria-label"]=o),e.class&&(c.class=e.class),oa(h,c),this.setSvgStyle(h,e,i)},t.prototype.renderPath=function(t,e,i){var n,r,o,s,a,l,h,c,d=i,p="";for(a=0,l=0,c=0,h=d.length;c<h;++c){var u=d[parseInt(c.toString(),10)],g=u.command;switch("x1"in u&&(n=u.x1),"x2"in u&&(o=u.x2),"y1"in u&&(r=u.y1),"y2"in u&&(s=u.y2),"x"in u&&(a=u.x),"y"in u&&(l=u.y),g){case"M":p=p+"M"+a.toString()+","+l.toString()+" ";break;case"L":p=p+"L"+a.toString()+","+l.toString()+" ";break;case"C":p=p+"C"+n.toString()+","+r.toString()+","+o.toString()+","+s.toString()+",",p+=a.toString()+","+l.toString()+" ";break;case"Q":p=p+"Q"+n.toString()+","+r.toString()+","+a.toString()+","+l.toString()+" ";break;case"A":p=p+"A"+u.r1.toString()+","+u.r2.toString()+","+u.angle.toString()+",",p+=u.largeArc.toString()+","+u.sweep+","+a.toString()+","+l.toString()+" ";break;case"Z":case"z":p+="Z "}}t.setAttribute("d",p)},t.prototype.setSvgFontStyle=function(t,e){t.style.fontStyle=e.italic?"italic":"normal",t.style.fontWeight=e.bold?"bold":"normal",t.style.fontSize=e.fontSize.toString()+"px",t.style.fontFamily=e.fontFamily},t.prototype.drawText=function(t,e,i,n,r,o,s){if(void 0!==e.content){var a=void 0,l=void 0,h=void 0,c=void 0,d=void 0,p=void 0,u=0,g=0,m=0,f=void 0,v=void 0;if(i&&(f=i.getElementById(e.id+"_text")),f){if(e.doWrap)for(;f.firstChild;)f.removeChild(f.firstChild)}else if(e.doWrap=!0,f=document.createElementNS("http://www.w3.org/2000/svg","text"),"pre-wrap"===e.whiteSpace&&f.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),s&&(v=document.getElementById(s.id+"_content_groupElement")),v&&s&&s.children&&s.children[0]instanceof lm){var y=this.createGElement("g",{id:n+"_groupElement"});v.appendChild(y),y.appendChild(f)}else t.appendChild(f);var b=e.x+e.width*e.pivotX,S=e.y+e.height*e.pivotY,w=0;if(e.doWrap||"Wrap"!==e.textOverflow){for(;f.firstChild;)f.removeChild(f.firstChild);for(this.setSvgStyle(f,e,r),this.setSvgFontStyle(f,e),a=document.createTextNode(e.content),l=e.childNodes,h=e.wrapBounds,c=this.svgLabelAlign(e,h,l),h.width>e.width&&"Wrap"!==e.textOverflow&&"NoWrap"===e.textWrapping&&(l[0].text=Ca(e.content,e)),m=0;m<l.length;m++)if(p=document.createElementNS("http://www.w3.org/2000/svg","tspan"),a=document.createTextNode(l[parseInt(m.toString(),10)].text),d=l[parseInt(m.toString(),10)],d.x=ha(d,l,m,e),u=c.x+d.x-h.x,g=c.y+d.dy*m+.8*e.fontSize,"Clip"!==e.textOverflow&&"Ellipsis"!==e.textOverflow||"WrapWithOverflow"!==e.textWrapping&&"Wrap"!==e.textWrapping||!s)this.setText(f,p,d,a,u,g);else{var I=e.isHorizontalLane?s.actualSize.width:s.actualSize.height;if(!(g<I))break;if("Ellipsis"===e.textOverflow&&l[m+1]){var x=l[m+1];c.y+x.dy*(m+1)+.8*e.fontSize>I&&(d.text=d.text.slice(0,d.text.length-3),d.text=d.text.concat("..."),a.data=d.text)}this.setText(f,p,d,a,u,g),w+=d.dy}}w&&e.isHorizontalLane&&(b=e.parentOffsetX+e.pivotX,S=e.parentOffsetY+e.pivotY,e.y=e.parentOffsetY-w*e.pivotY+.5),e.textDecoration&&"LineThrough"===e.textDecoration&&(e.textDecoration=Ia(e.textDecoration));var M={id:e.id+"_text",fill:e.color,visibility:e.visible?"visible":"hidden","text-decoration":e.textDecoration,transform:"rotate("+e.angle+","+b+","+S+")translate("+e.x+","+e.y+")",opacity:e.opacity};n&&(M.role="img",M["aria-label"]=n),oa(f,M)}},t.prototype.setText=function(t,e,i,n,r,o){oa(e,{x:r.toString(),y:o.toString()}),t.setAttribute("fill",i.text),e.appendChild(n),t.appendChild(e)},t.prototype.drawImage=function(t,e,i,n){var r;i&&(r=i.getElementById(e.id+"image")),r||(r=document.createElementNS("http://www.w3.org/2000/svg","image"),t.appendChild(r));var o=new Image;o.src=e.source;var s="None"!==e.scale?e.scale:"";f()&&"None"===e.alignment&&"Stretch"===s&&(s="");var a=e.alignment,l=a.charAt(0).toLowerCase()+a.slice(1);"Stretch"!==s&&(l+=" "+s.charAt(0).toLowerCase()+s.slice(1));oa(r,{id:e.id+"image",x:e.x.toString(),y:e.y.toString(),transform:"rotate("+e.angle+","+(e.x+e.width*e.pivotX)+","+(e.y+e.height*e.pivotY)+")",width:e.width.toString(),visibility:e.visible?"visible":"hidden",height:e.height.toString(),preserveAspectRatio:l,opacity:(e.opacity||1).toString()}),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o.src.toString())},t.prototype.drawHTMLContent=function(t,e,i,n,r){var o,s;if(e){var a=void 0,l=void 0,h=void 0;for(a=0;a<e.childNodes.length;a++)for(h=e.childNodes[parseInt(a.toString(),10)],l=0;l<h.childNodes.length;l++)if(h.childNodes[parseInt(l.toString(),10)].id===t.id+"_html_element"){o=h.childNodes[parseInt(l.toString(),10)];break}}if(!o){if(!(s=e.querySelector("#"+t.id+"_html_element")||e.querySelector("#"+t.nodeId+"_html_element"))){s=Ks("div",{id:t.nodeId+"_html_element",class:"foreign-object"})}o=Ks("div",{id:t.id+"_html_element",class:"foreign-object"});var c=!1;e.parentNode&&e.parentNode.parentNode&&e.parentNode.parentNode.parentNode&&e.parentNode.parentNode.parentNode.classList.contains("e-overview")&&(c=!0),c?o.appendChild(t.template.cloneNode(!0)):t.isTemplate?o.appendChild(t.template):o.appendChild(t.template.cloneNode(!0)),void 0!==r&&e.childNodes.length>r&&e.insertBefore(o,e.childNodes[parseInt(r.toString(),10)]),s.appendChild(o),e.appendChild(s)}var d=ga(t).topLeft;o.setAttribute("style","height:"+t.actualSize.height+"px; width:"+t.actualSize.width+"px;left:"+d.x+"px; top:"+d.y+"px;position:absolute;transform:rotate("+(t.rotateAngle+t.parentTransform)+"deg);pointer-events:"+(n?"all":"none")+";visibility:"+(t.visible?"visible":"hidden")+";opacity:"+t.style.opacity+";")},t.prototype.drawNativeContent=function(t,e,i,n,r){var o,s;if(r&&(o=r.getElementById(t.id+"_native_element"),s=r.getElementById(t.id+"_clip")),!o){(o=document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("id",t.id+"_native_element"),o.appendChild(t.template.cloneNode(!0));var a=this.createGElement("g",{id:t.id+"_inner_native_element"});a.appendChild(o),e.appendChild(a)}s&&o.removeChild(s),o.setAttribute("style","visibility:"+(t.visible?"visible":"hidden")+";opacity:"+t.style.opacity+";"),this.setNativTransform(t,o,i,n),"Slice"===t.scale&&this.drawClipPath(t,o,i,n,r),oa(o,t.description?{role:"img","aria-label":t.description}:{})},t.prototype.setNativTransform=function(t,e,i,n){var r=0!==t.contentSize.width?t.contentSize.width:1,o=0!==t.contentSize.height?t.contentSize.height:1,s=t.templatePosition.x*n/r,a=t.templatePosition.y*i/o;e.setAttribute("transform","rotate("+t.parentTransform+","+t.offsetX+","+t.offsetY+") translate("+(t.offsetX-s-n*t.pivot.x)+","+(t.offsetY-a-i*t.pivot.y)+") scale("+n/r+","+i/o+")")},t.prototype.drawClipPath=function(t,e,i,n,r){var o=t.contentSize.width,s=t.contentSize.height,a=t.width/(n/o),l=t.height/(i/s),h=t.templatePosition.x+(t.width>=t.height?0:(o-a)/2),c=t.templatePosition.y+(t.height>=t.width?0:(s-l)/2),d=r.getElementById(t.id+"_clip");(d=document.createElementNS("http://www.w3.org/2000/svg","clipPath")).setAttribute("id",t.id+"_clip"),e.appendChild(d);var p=r.getElementById(t.id+"_clip_rect");p=document.createElementNS("http://www.w3.org/2000/svg","rect"),d.appendChild(p);return oa(p,{id:t.id+"_clip_rect",width:a.toString(),height:l.toString(),x:h.toString(),y:c.toString()}),Ms()?e.setAttribute("clip-path","url("+location.protocol+"//"+location.host+location.pathname+"#"+t.id+"_clip)"):e.setAttribute("clip-path","url(#"+t.id+"_clip)"),e},t.prototype.renderGradient=function(t,e,i){var n,r,o,s=qs(i),a=s.getElementById(i+"gradient_pattern");a||(a=Js("defs",{id:i+"gradient_pattern"}),s.insertBefore(a,s.firstChild));var l,h;if(is(e.id),"None"!==t.gradient.type){for(var c=0;c<t.gradient.stops.length;c++)n=n?Math.max(n,t.gradient.stops[parseInt(c.toString(),10)].offset):t.gradient.stops[parseInt(c.toString(),10)].offset,r=r?Math.min(r,t.gradient.stops[parseInt(c.toString(),10)].offset):t.gradient.stops[parseInt(c.toString(),10)].offset;"Linear"===t.gradient.type?((h=t.gradient).id=e.id+"_linear",o=this.createLinearGradient(h),a.appendChild(o)):((l=t.gradient).id=e.id+"_radial",o=this.createRadialGradient(l),a.appendChild(o));for(c=0;c<t.gradient.stops.length;c++){var d=t.gradient.stops[parseInt(c.toString(),10)],p=r<0?(n+d.offset)/(2*n):d.offset/n,u=document.createElementNS("http://www.w3.org/2000/svg","stop");oa(u,{offset:p.toString(),style:"stop-color:"+d.color}),o.appendChild(u)}}return o},t.prototype.createLinearGradient=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","linearGradient");return oa(e,{id:t.id,x1:t.x1+"%",y1:t.y1+"%",x2:t.x2+"%",y2:t.y2+"%"}),e},t.prototype.createRadialGradient=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","radialGradient");return oa(e,{id:t.id,cx:t.cx+"%",cy:t.cy+"%",r:t.r+"%",fx:t.fx+"%",fy:t.fy+"%"}),e},t.prototype.setSvgStyle=function(t,e,i){if(e.canApplyStyle||void 0===e.canApplyStyle){"none"===e.fill&&(e.fill="transparent"),"none"===e.stroke&&(e.stroke="transparent");var n=[],r=void 0;if(e.dashArray){n=(new Fw).parseDashArray(e.dashArray)}if(e.gradient&&"None"!==e.gradient.type&&i){var o=this.renderGradient(e,t,i);r=Ms()?"url("+location.protocol+"//"+location.host+location.pathname+"#"+o.id+")":"url(#"+o.id+")"}else r=e.fill;e.stroke&&t.setAttribute("stroke",e.stroke),void 0!==e.strokeWidth&&null!==e.strokeWidth&&t.setAttribute("stroke-width",e.strokeWidth.toString()),n&&t.setAttribute("stroke-dasharray",n.toString()||"none"),r&&t.setAttribute("fill",r)}},t.prototype.svgLabelAlign=function(t,e,i){var n=new Qu(e.width,i.length*(1.2*t.fontSize)),r={x:0,y:0},o=.5*t.width,s=.5*t.height;return"left"===t.textAlign?o=0:"center"===t.textAlign?o=e.width>t.width&&("Ellipsis"===t.textOverflow||"Clip"===t.textOverflow)&&"NoWrap"===t.textWrapping?0:.5*t.width:"right"===t.textAlign&&(o=1*t.width),r.x=0+o+(e?e.x:0),r.y=1.2+s-n.height/2,r},t}(),Ww=function(){function t(t,e,i){this.renderer=null,this.isSvgMode=!0,this.transform={x:0,y:0},this.diagramId=t,this.element=Us(this.diagramId),this.svgRenderer=e,this.isSvgMode=i,this.renderer=i?new Yw:new Fw}return t.prototype.setCursor=function(t,e){t.style.cursor=e},t.prototype.setLayers=function(){this.iconSvgLayer=this.element.getElementsByClassName("e-ports-expand-layer")[0],this.adornerSvgLayer=this.element.getElementsByClassName("e-adorner-layer")[0],this.nativeSvgLayer=this.element.getElementsByClassName("e-native-layer")[0],this.diagramSvgLayer=this.element.getElementsByClassName("e-diagram-layer")[0]},t.prototype.getAdornerLayer=function(){return Ys(this.diagramId)},t.prototype.getParentSvg=function(t,e,i){return this.diagramId&&t&&t.id?t.id.split("_icon_content").length>1||t.id.split("_nodeport").length>1||t.elementActions&Ig.ElementIsPort?this.iconSvgLayer:e&&"selector"===e?this.adornerSvgLayer:t instanceof lm?this.nativeSvgLayer:this.diagramSvgLayer:i},t.prototype.getParentElement=function(t,e,i,n){var r=e;if(i&&this.diagramId&&t&&t.id){t.id.split("_icon_content").length>1?(r=i.getElementById(this.diagramId+"_diagramExpander"),e=null):t.id.split("_nodeport").length>1?r=i.getElementById(this.diagramId+"_diagramPorts"):t instanceof lm?(r=i.getElementById(this.diagramId+"_nativeLayer"),e=null):t.elementActions&Ig.ElementIsPort?(r=i.getElementById(this.diagramId+"_diagramPorts"),e=null):r=i.getElementById(this.diagramId+"_diagramLayer");var o=this.getGroupElement(t,e||r,n);r=o.g,o.svg&&(i=o.svg)}return{g:r,svg:i}},t.prototype.getGroupElement=function(t,e,i){var n,r,o=this.getParentSvg(t);if(e&&o){if(o&&!(n=o.getElementById(t.id+"_groupElement"))&&o!==this.nativeSvgLayer){var s=this.nativeSvgLayer;n=s.getElementById(t.id+"_groupElement"),r=s}n||(n=this.svgRenderer.createGElement("g",{id:t.id+"_groupElement"}),void 0!==i&&e.childNodes.length>i?e.insertBefore(n,e.childNodes[parseInt(i.toString(),10)]):e.appendChild(n))}return{g:n,svg:r}},t.prototype.renderElement=function(t,e,i,n,r,o,s,a,l,h){t instanceof $g?(t.id=t.id?t.id:da(),this.renderContainer(t,e,i,n,r,o,s,a,l,h)):t instanceof sm?this.renderImageElement(t,e,n,r,s):t instanceof rm?this.renderPathElement(t,e,n,r,s,l):t instanceof Jg?this.renderTextElement(t,e,n,r,s,h):t instanceof lm?this.renderNativeElement(t,e,n,r,s):t instanceof Cb?this.renderHTMLElement(t,e,i,n,r,s,a):this.renderRect(t,e,n,r,l)},t.prototype.drawSelectionRectangle=function(t,e,i,n,r,o){t=(t+o.tx)*o.scale,e=(e+o.ty)*o.scale;var s={width:i*o.scale,height:n*o.scale,x:t+.5,y:e+.5,fill:"transparent",stroke:"gray",angle:0,pivotX:.5,pivotY:.5,strokeWidth:1,dashArray:"6 3",opacity:1,visible:!0,id:r.id+"_selected_region"},a=this.getAdornerLayer();this.svgRenderer.updateSelectionRegion(a,s)},t.prototype.renderHighlighter=function(t,e,i){var n=t.actualSize.width||2,r=t.actualSize.height||2,o=t.offsetX-n*t.pivot.x,s=t.offsetY-r*t.pivot.y;o=(o+i.tx)*i.scale,s=(s+i.ty)*i.scale;var a={width:n*i.scale,height:r*i.scale,x:o,y:s,fill:"transparent",stroke:"#8CC63F",angle:t.rotateAngle,pivotX:t.pivot.x,pivotY:t.pivot.y,strokeWidth:4,dashArray:"",opacity:1,cornerRadius:0,visible:!0,id:e.id+"_highlighter",class:"e-diagram-highlighter"};this.svgRenderer.drawRectangle(e,a,this.diagramId,void 0,void 0,e)},t.prototype.renderSelectionRectangle=function(t,e,i,n){var r=t.actualSize.width||2,o=t.actualSize.height||2,s=t.offsetX-r*t.pivot.x,a=t.offsetY-o*t.pivot.y;s=(s+i.tx)*i.scale,a=(a+i.ty)*i.scale;var l={width:r*i.scale,height:o*i.scale,x:s,y:a,fill:"transparent",stroke:"#00cc00",angle:t.rotateAngle,pivotX:t.pivot.x,pivotY:t.pivot.y,strokeWidth:n?2:1,dashArray:"",opacity:1,cornerRadius:0,visible:!0,id:t.id+"_highlighter",class:"e-diagram-selection-indicator"},h=this.getParentSvg(t,"selector");this.svgRenderer.drawRectangle(e,l,this.diagramId,void 0,void 0,h)},t.prototype.renderSelectionLine=function(t,e,i,n){var r=this.getBaseAttributes(t,i);r.data=t.absolutePath,r.id=r.id+"_highlighter";var o=t.description?t.description:t.id;this.isSvgMode||(r.x=t.flipOffset.x?t.flipOffset.x:r.x,r.y=t.flipOffset.y?t.flipOffset.y:r.y),i&&(r.x=r.x*i.scale,r.y=r.y*i.scale),r.stroke="#00cc00",r.strokeWidth=n?2:1,r.class="e-diagram-selection-indicator";var s=this.getParentSvg(t,"selector");this.svgRenderer.drawPath(e,r,this.diagramId,void 0,s,o,i.scale)},t.prototype.renderStackHighlighter=function(t,e,i,n,r,o,s){var a=t.actualSize.width||2,l=t.offsetX-a*t.pivot.x,h=t.actualSize.height||2,c=t.offsetY-h*t.pivot.y;l=(l+i.tx)*i.scale;var d,p=t.bounds,u="";if(c=(c+i.ty)*i.scale,n)if(o){d="M 0 0 L "+((f=a*i.scale)+2)+" 0 Z";var g=-p.x,m=-p.y;g=t.actualSize.width/Number(p.width?p.width:1)*i.scale,m=t.actualSize.height/Number(p.height?p.height:1)*i.scale;u=Ct(Dt(bt("M7,4 L8,4 8,7 11,7 11,8 8,8 8,11 7,11 7,8 4,8 4,7 7,7 z M7.5,0.99999994C3.9160004,1 1,3.9160004 0.99999994,7.5 1,11.084 3.9160004,14 7.5,14 11.084,14 14,11.084 14,7.5 14,3.9160004 11.084,1 7.5,0.99999994 z M7.5,0 C11.636002,0 15,3.3639984 15,7.5 15,11.636002 11.636002,15 7.5,15 3.3640003,15 0,11.636002 0,7.5 0,3.3639984 3.3640003,0 7.5,0 z")),g+f+2,m-8,!1,p.x,p.y,0,0),r.y>=t.offsetY&&(c+=h)}else{s&&r.y>=t.offsetY&&(c+=h);d="M -10 -10 L 0 0 Z M -10 10 L 0 0 Z M 0 0 L "+(f=a*i.scale)+" 0 Z M "+f+" 0 L "+(f+10)+" 10 Z L "+(f+10)+" -10 Z"}else{var f;d="M 10 -10 L 0 0 Z M -10 -10 L 0 0 Z M 0 0 L 0 "+(f=h*i.scale)+" Z M 0  "+f+" L -10  "+(f+10)+" Z L 10  "+(f+10)+" Z",r.x>=t.offsetX&&(l+=a)}var v={data:d+u,width:a*i.scale,height:h*i.scale,x:l,y:c,fill:"transparent",stroke:"#8CC63F",angle:t.rotateAngle,pivotX:t.pivot.x,pivotY:t.pivot.y,strokeWidth:1,dashArray:"",opacity:1,visible:!0,id:e.id+"_stack_highlighter",class:"e-diagram-highlighter"};this.svgRenderer.drawPath(e,v,this.diagramId)},t.prototype.drawLine=function(t,e){this.svgRenderer.drawLine(t,e)},t.prototype.drawPath=function(t,e){this.svgRenderer.drawPath(t,e,this.diagramId)},t.prototype.renderResizeHandle=function(t,e,i,n,r,o,s,a,l,h,c){var d=t.offsetX-t.actualSize.width*t.pivot.x,p=t.offsetY-t.actualSize.height*t.pivot.y,u=t.actualSize.height,g=t.actualSize.width;!h&&i&xg.Rotate&&Kn(this.rendererActions)&&!Jn(this.rendererActions)&&(this.renderPivotLine(t,e,o,r,s),this.renderRotateThumb(t,e,o,r,s)),this.renderBorder(t,e,o,a,l,h);var m=t.actualSize.width*n,f=t.actualSize.height*n;l||!Kn(this.rendererActions)||Jn(this.rendererActions)||(m>=40&&f>=40&&(r&fg.ResizeNorthWest&&this.renderCircularHandle("resizeNorthWest",t,d,p,e,as(r,"ResizeNorthWest"),i&xg.ResizeNorthWest,o,void 0,s,{"aria-label":"Thumb to resize the selected object on top left side direction"},void 0,"e-diagram-resize-handle e-northwest",c),r&fg.ResizeNorthEast&&this.renderCircularHandle("resizeNorthEast",t,d+g,p,e,as(r,"ResizeNorthEast"),i&xg.ResizeNorthEast,o,void 0,s,{"aria-label":"Thumb to resize the selected object on top right side direction"},void 0,"e-diagram-resize-handle e-northeast",c),r&fg.ResizeSouthWest&&this.renderCircularHandle("resizeSouthWest",t,d,p+u,e,as(r,"ResizeSouthWest"),i&xg.ResizeSouthWest,o,void 0,s,{"aria-label":"Thumb to resize the selected object on bottom left side direction"},void 0,"e-diagram-resize-handle e-southwest",c),r&fg.ResizeSouthEast&&this.renderCircularHandle("resizeSouthEast",t,d+g,p+u,e,as(r,"ResizeSouthEast"),i&xg.ResizeSouthEast,o,void 0,s,{"aria-label":"Thumb to resize the selected object on bottom right side direction"},void 0,"e-diagram-resize-handle e-southeast",c)),r&fg.ResizeNorth&&this.renderCircularHandle("resizeNorth",t,d+g/2,p,e,as(r,"ResizeNorth"),i&xg.ResizeNorth,o,void 0,s,{"aria-label":"Thumb to resize the selected object on top side direction"},void 0,"e-diagram-resize-handle e-north",c),r&fg.ResizeSouth&&this.renderCircularHandle("resizeSouth",t,d+g/2,p+u,e,as(r,"ResizeSouth"),i&xg.ResizeSouth,o,void 0,s,{"aria-label":"Thumb to resize the selected object on bottom side direction"},void 0,"e-diagram-resize-handle e-south",c),r&fg.ResizeWest&&this.renderCircularHandle("resizeWest",t,d,p+u/2,e,as(r,"ResizeWest"),i&xg.ResizeWest,o,void 0,s,{"aria-label":"Thumb to resize the selected object on left side direction"},void 0,"e-diagram-resize-handle e-west",c),r&fg.ResizeEast&&this.renderCircularHandle("resizeEast",t,d+g,p+u/2,e,as(r,"ResizeEast"),i&xg.ResizeEast,o,void 0,s,{"aria-label":"Thumb to resize the selected object on right side direction"},void 0,"e-diagram-resize-handle e-east",c))},t.prototype.renderEndPointHandle=function(t,e,i,n,r,o,s,a,l,h){var c,d,p=t.sourcePoint,u=t.targetPoint,g=t.wrapper;if(this.renderCircularHandle("connectorSourceThumb",g,p.x,p.y,e,as(n,"ConnectorSourceThumb"),i&xg.ConnectorSource,r,o,void 0,{"aria-label":"Thumb to move the source point of the connector"},void 0,"e-diagram-endpoint-handle e-sourceend",h),this.renderCircularHandle("connectorTargetThumb",g,u.x,u.y,e,as(n,"ConnectorTargetThumb"),i&xg.ConnectorTarget,r,s,void 0,{"aria-label":"Thumb to move the target point of the connector"},void 0,"e-diagram-endpoint-handle e-targetend",h),a)if(("Straight"===t.type||"Bezier"===t.type)&&t.segments.length>0)for(c=0;c<t.segments.length-1;c++){d=t.segments[parseInt(c.toString(),10)];var m="Bezier"===t.type?"e-diagram-bezier-segment-handle":"e-diagram-straight-segment-handle";this.renderCircularHandle("segementThumb_"+(c+1),g,d.point.x,d.point.y,e,!0,i&xg.ConnectorSource,r,o,null,null,c,m,h)}else if(t.maxSegmentThumb){var f=t.segments.length<=t.maxSegmentThumb?0:1,v=t.segments.length<=t.maxSegmentThumb?t.segments.length:t.segments.length-1;for(t.maxSegmentThumb>=3&&3===t.segments.length&&(f=1,v=t.segments.length-1),f=t.segments.length>t.maxSegmentThumb+2?2:f,v=t.segments.length>t.maxSegmentThumb+2?t.segments.length-2:v,1===t.segments.length&&t.segments[0].points.length<=2&&(f=1,v=t.segments.length),c=0;c<t.segments.length;c++){y=t.segments[parseInt(c.toString(),10)];c>=f&&c<v?this.renderOrthogonalThumbs("orthoThumb_"+(c+1),g,y,e,as(n,"ConnectorSourceThumb"),r,t):y.allowDrag=!1}}else for(c=0;c<t.segments.length;c++){var y=t.segments[parseInt(c.toString(),10)];this.renderOrthogonalThumbs("orthoThumb_"+(c+1),g,y,e,as(n,"ConnectorSourceThumb"),r,t)}if("Bezier"===t.type&&l){var b=t.segments.length-1,S=null!=t.bezierSettings?t.bezierSettings.controlPointsVisibility:null;for(c=0;c<=b;c++){var w=t.segments[parseInt(c.toString(),10)],I=Gu.isEmptyPoint(w.point1)?w.bezierPoint1:w.point1;(null!=S&&0==c&&ls(S,"Source")||0!=c&&ls(S,"Intermediate"))&&(this.renderCircularHandle("bezierPoint_"+(c+1)+"_1",g,I.x,I.y,e,as(n,"ConnectorSourceThumb"),i&xg.ConnectorSource,r,void 0,void 0,{"aria-label":"Thumb to move the source point of the connector"},void 0,"e-diagram-bezier-control-handle e-source",h),as(n,"ConnectorSourceThumb")&&this.renderBezierLine("bezierLine_"+(c+1)+"_1",g,e,w.points[0],Gu.isEmptyPoint(w.point1)?w.bezierPoint1:w.point1,r)),I=Gu.isEmptyPoint(w.point2)?w.bezierPoint2:w.point2,(null!=S&&c==b&&ls(S,"Target")||c!=b&&ls(S,"Intermediate"))&&(this.renderCircularHandle("bezierPoint_"+(c+1)+"_2",g,I.x,I.y,e,as(n,"ConnectorTargetThumb"),i&xg.ConnectorTarget,r,void 0,void 0,{"aria-label":"Thumb to move the target point of the connector"},void 0,"e-diagram-bezier-control-handle e-target",h),as(n,"ConnectorTargetThumb")&&this.renderBezierLine("bezierLine_"+(c+1)+"_2",g,e,w.points[1],Gu.isEmptyPoint(w.point2)?w.bezierPoint2:w.point2,r))}}},t.prototype.renderOrthogonalThumbs=function(t,e,i,n,r,o,s){var a,l,h,c=0;if(s.maxSegmentThumb){var d=i.points.length<3?0:1,p=i.points.length<3?i.points.length-1:i.points.length-2;for(d=1===s.segments.length?d:0,p=1===s.segments.length?p:i.points.length-1,c=d;c<p;c++)h=Gu.distancePoints(i.points[parseInt(c.toString(),10)],i.points[c+1]),a=i.points[parseInt(c.toString(),10)].y.toFixed(2)===i.points[c+1].y.toFixed(2)?"horizontal":"vertical",l=!!(h>=50&&i.allowDrag),this.renderOrthogonalThumb(t+"_"+(c+1),e,(i.points[parseInt(c.toString(),10)].x+i.points[c+1].x)/2,(i.points[parseInt(c.toString(),10)].y+i.points[c+1].y)/2,n,l,a,o)}else for(c=0;c<i.points.length-1;c++)h=Gu.distancePoints(i.points[parseInt(c.toString(),10)],i.points[c+1]),a=i.points[parseInt(c.toString(),10)].y.toFixed(2)===i.points[c+1].y.toFixed(2)?"horizontal":"vertical",l=!!(h>=50&&i.allowDrag),this.renderOrthogonalThumb(t+"_"+(c+1),e,(i.points[parseInt(c.toString(),10)].x+i.points[c+1].x)/2,(i.points[parseInt(c.toString(),10)].y+i.points[c+1].y)/2,n,l,a,o)},t.prototype.renderOrthogonalThumb=function(t,e,i,n,r,o,s,a){var l,h,c,d,p=document.getElementById(this.diagramId);if(p&&(d=p.ej2_instances[0]),"horizontal"===s)switch(l=Ft(d.segmentThumbShape),d.segmentThumbShape){case"Arrow":case"OpenArrow":case"DoubleArrow":h=-15,c=-15;break;case"Square":case"Rectangle":case"Ellipse":h=-5,c=-5;break;case"Rhombus":case"Circle":case"Diamond":h=-10,c=-5;break;case"IndentedArrow":case"OutdentedArrow":h=-5,c=-4;break;case"Fletch":case"OpenFetch":h=-5,c=-4.5}else switch(l=Yt(d.segmentThumbShape),d.segmentThumbShape){case"Arrow":case"OpenArrow":case"DoubleArrow":h=-15,c=-15;break;case"Square":case"IndentedArrow":case"OutdentedArrow":case"Fletch":case"OpenFetch":h=-5,c=-5;break;case"Rhombus":case"Diamond":h=-5,c=-15;break;case"Rectangle":h=-7,c=-5;break;case"Circle":h=-5,c=-7;break;case"Ellipse":h=-7,c=-7}var u={x:(i+a.tx)*a.scale+h,y:(n+a.ty)*a.scale+c,angle:0,fill:"#e2e2e2",stroke:"black",strokeWidth:1,dashArray:"",data:l,width:20,height:20,pivotX:0,pivotY:0,opacity:1,visible:o,id:t,class:"e-diagram-ortho-segment-handle"};this.svgRenderer.drawPath(r,u,this.diagramId)},t.prototype.renderPivotLine=function(t,e,i,n,r){var o=t,s=!!(n&fg.Rotate);r&&(s=!1);var a=this.getBaseAttributes(o,i);a.fill="None",a.stroke="black",a.strokeWidth=1,a.dashArray="2,3",a.visible=s;var l=i.scale;a.x*=l,a.y*=l,a.width*=l,a.height*=l,a.id="pivotLine",a.class="e-diagram-pivot-line";var h={x:o.actualSize.width*o.pivot.x*l,y:-20},c={x:o.actualSize.width*o.pivot.x*l,y:0};a.startPoint=h,a.endPoint=c,this.svgRenderer.drawLine(e,a)},t.prototype.renderBezierLine=function(t,e,i,n,r,o){var s=this.getBaseAttributes(e,o);s.id=t,s.stroke="black",s.strokeWidth=1,s.dashArray="3,3",s.fill="None",s.class="e-diagram-bezier-control-line",s.x=0,s.y=0;var a=o.scale,l={x:(n.x+o.tx)*a,y:(n.y+o.ty)*a},h={x:(r.x+o.tx)*a,y:(r.y+o.ty)*a};s.startPoint=l,s.endPoint=h,this.svgRenderer.drawLine(i,s)},t.prototype.renderCircularHandle=function(t,e,i,n,r,o,s,a,l,h,c,d,p,u){var g=e,m={x:i,y:n};if(0!==g.rotateAngle||0!==g.parentTransform){var f=Lt();kt(f,g.rotateAngle+g.parentTransform,g.offsetX,g.offsetY),m=At(f,m)}var v=this.getBaseAttributes(g);v.stroke="black",v.strokeWidth=1,void 0!==d?(v.id="segmentEnd_"+d,v.fill="#e2e2e2"):v.fill=l?"#8CC63F":"white",v.cornerRadius=u/2,v.angle=e.rotateAngle,v.id=t,v.visible=o,v.class=p,v.width=u,v.height=u,v.x=(m.x+a.tx)*a.scale,v.y=(m.y+a.ty)*a.scale,v.x=v.x-v.width/2,v.y=v.y-v.height/2,l&&(v.class+=" e-connected"),h&&(v.visible=!1);var y=this.getParentSvg(e,"selector");this.svgRenderer.drawRectangle(r,v,this.diagramId,!0,!0,y,c,!0,s)},t.prototype.renderBorder=function(t,e,i,n,r,o){var s=t,a=this.getBaseAttributes(s,i);a.x*=i.scale,a.y*=i.scale,a.width*=i.scale,a.height*=i.scale,a.fill="transparent",a.stroke="#097F7F",a.strokeWidth=1.2,a.gradient=null,a.dashArray="6,3",a.class="e-diagram-selector",o&&(a.class+=" e-diagram-lane"),a.id="borderRect",a.id=this.rendererActions&Lg.DrawSelectorBorder?"borderRect_symbol":"borderRect",n||(a.class+=" e-disabled"),r&&(a.class+=" e-thick-border"),a.cornerRadius=0;var l=this.getParentSvg(t,"selector");this.svgRenderer.drawRectangle(e,a,this.diagramId,void 0,!0,l)},t.prototype.renderUserHandler=function(t,e,i,n){for(var r,o=t.wrapper,s=0,a=t.userHandles;s<a.length;s++){var l=a[s];r=!0,(l.disableConnectors&&t.connectors.length>0||l.disableNodes&&t.nodes.length>0)&&(r=!1);var h=document.getElementById(l.name+"_template_hiddenUserHandle");h&&(l.template=h.childNodes[0].cloneNode(!0));var c=os(t,l,i);if(c.x=(c.x+i.tx)*i.scale,c.y=(c.y+i.ty)*i.scale,l.visible&&(l.visible=!!(t.constraints&fg.UserHandle)),r)if(l.pathData){var d=l.pathData?l.pathData:l.content,p=this.getBaseAttributes(o);p.id=l.name+"_userhandle",p.fill=l.backgroundColor,p.stroke=l.borderColor,p.strokeWidth=l.borderWidth,p.centerX=c.x,p.centerY=c.y,p.radius=.5*l.size,p.class="e-diagram-userhandle-circle",p.angle=0,p.visible=l.visible,p.opacity=1,this.svgRenderer.drawCircle(e,p,1,{"aria-label":l.name+"user handle"});var u=[];u=Dt(u=bt(d));var g=ks(d),m=Ct(u,(l.size-.45*l.size)/g.width,(l.size-.45*l.size)/g.height,!0,g.x,g.y,0,0);g=ks(m);var f={x:c.x-g.width/2,y:c.y-g.height/2,angle:0,id:"",class:"e-diagram-userhandle-path",fill:l.pathColor,stroke:l.backgroundColor,strokeWidth:.5,dashArray:"",data:m,width:l.size-5,height:l.size-5,pivotX:0,pivotY:0,opacity:1,visible:l.visible};this.svgRenderer.drawPath(e,f,this.diagramId,void 0,void 0,{"aria-label":l.name+"user handle"})}else if(l.content){var v=new lm(l.name,this.diagramId);v.content=l.content,v.offsetX=c.x,v.offsetY=c.y,v.id=l.name+"_shape",v.horizontalAlignment="Center",v.verticalAlignment="Center",v.visible=l.visible,v.setOffsetWithRespectToBounds(c.x,c.y,"Fraction"),v.relativeMode="Object",v.description=l.name||"User handle",v.measure(new Qu(l.size,l.size)),v.arrange(v.desiredSize),this.svgRenderer.drawNativeContent(v,e,l.size,l.size,this.adornerSvgLayer)}else if(l.source){var y=new sm;(f=this.getBaseAttributes(y,i)).width=l.size,f.height=l.size,f.x=c.x-l.size/2,f.y=c.y-l.size/2,f.sourceWidth=l.size,f.sourceHeight=l.size,f.alignment=y.imageAlign,f.source=l.source,f.scale=y.imageScale,f.visible=l.visible,f.description=l.name||"User handle",f.id=l.name+"_",this.renderer.drawImage(e,f,this.adornerSvgLayer,!1)}else{var b=new Cb(l.name,this.diagramId);b.offsetX=c.x,b.offsetY=c.y,b.id=l.name+"_shape",b.visible=l.visible,b.relativeMode="Object",b.template=l.template,b.measure(new Qu(l.size,l.size)),b.arrange(b.desiredSize),this.svgRenderer.drawHTMLContent(b,n,void 0,!0,void 0)}}},t.prototype.renderRotateThumb=function(t,e,i,n,r){new rm;var o,s=new Qu;s.width=18,s.height=16;var a=t.offsetY-t.actualSize.height*t.pivot.y,l=t.offsetX-t.actualSize.width*t.pivot.x,h=!!(n&fg.Rotate);r&&(h=!1);var c=l+t.pivot.x*t.actualSize.width,d=a;if(c=(c+i.tx)*i.scale,d=(d+i.ty)*i.scale,o={x:c-.5*s.width,y:d-30-.5*s.height},0!==t.rotateAngle||0!==t.parentTransform){var p=Lt();kt(p,t.rotateAngle+t.parentTransform,(i.tx+t.offsetX)*i.scale,(i.ty+t.offsetY)*i.scale),o=At(p,o)}var u={x:o.x,y:o.y,angle:t.rotateAngle+t.parentTransform,fill:"#231f20",stroke:"black",strokeWidth:.5,dashArray:"",data:"M 16.856144362449648 10.238890446662904 L 18.000144362449646 3.437890446662903L 15.811144362449646 4.254890446662903 C 14.837144362449646 2.5608904466629028 13.329144362449647  1.2598904466629026 11.485144362449645 0.5588904466629026 C 9.375144362449646 - 0.24510955333709716 7.071144362449646  - 0.18010955333709716 5.010144362449646 0.7438904466629028 C 2.942144362449646 1.6678904466629028 1.365144362449646 3.341890446662903 0.558144362449646 5.452890446662903 C - 0.244855637550354 7.567890446662903 - 0.17985563755035394 9.866890446662904 0.7431443624496461 11.930890446662904 C 1.6681443624496461 13.994890446662904 3.343144362449646 15.575890446662903 5.457144362449647 16.380890446662903 C 6.426144362449647 16.7518904466629 7.450144362449647 16.9348904466629 8.470144362449647 16.9348904466629 C 9.815144362449647 16.9348904466629 11.155144362449647 16.6178904466629 12.367144362449647 15.986890446662901 L 11.351144362449647 14.024890446662901 C 9.767144362449647 14.8468904466629 7.906144362449647 14.953890446662902 6.237144362449647 14.3178904466629 C 4.677144362449647 13.7218904466629 3.444144362449647 12.5558904466629 2.758144362449647 11.028890446662901 C 2.078144362449646 9.501890446662903 2.031144362449646 7.802890446662903 2.622144362449646 6.243890446662903 C 3.216144362449646 4.6798904466629025 4.387144362449646 3.442890446662903 5.914144362449646 2.760890446662903 C 7.437144362449646 2.078890446662903 9.137144362449646 2.0298904466629026 10.700144362449645 2.6258904466629027 C 11.946144362449646 3.100890446662903 12.971144362449646 3.9538904466629026 13.686144362449646 5.049890446662903 L 11.540144362449645 5.850890446662903 L 16.856144362449648 10.238890446662904 Z",width:20,height:20,pivotX:0,pivotY:0,opacity:1,visible:h,id:t.id,class:"e-diagram-rotate-handle"};u.id="rotateThumb",this.svgRenderer.drawPath(e,u,this.diagramId,!0,void 0,{"aria-label":"Thumb to rotate the selected object"})},t.prototype.renderPathElement=function(t,e,i,n,r,o){var s=this.getBaseAttributes(t,i,o);s.data=t.absolutePath,s.data=t.absolutePath;var a=t.description?t.description:t.id;if(this.isSvgMode||(s.x=t.flipOffset.x?t.flipOffset.x:s.x,s.y=t.flipOffset.y?t.flipOffset.y:s.y),t.isExport){var l=t.absoluteBounds;s.data=Bs(t,l,0,s)}this.renderer.drawPath(e,s,this.diagramId,void 0,n,a)},t.prototype.renderSvgGridlines=function(t,e,i,n,r,o){var s=document.createElementNS("http://www.w3.org/2000/svg","pattern"),a=document.createElementNS("http://www.w3.org/2000/svg","defs");a.setAttribute("id",this.diagramId+"_grid_pattern_defn"),(t.constraints&mg.ShowHorizontalLines||t.constraints&mg.ShowVerticalLines)&&s.setAttribute("id",this.diagramId+"_pattern");var l=0,h=0,c=0,d=0,p=1,u=!1,g="Lines"===t.gridType,m=g?t.verticalGridlines.lineIntervals:t.verticalGridlines.dotIntervals,f=g?t.horizontalGridlines.lineIntervals:t.horizontalGridlines.dotIntervals;if(n.showRulers&&n.dynamicGrid&&r&&o)c=o.updateSegmentWidth(i.scale),d=r.updateSegmentWidth(i.scale),t.horizontalGridlines.scaledIntervals=[c/r.interval],t.verticalGridlines.scaledIntervals=[d/o.interval],u=!0;else{for(var v=0;v<m.length;v+=1)l+=m[parseInt(v.toString(),10)];for(v=0;v<f.length;v+=1)h+=f[parseInt(v.toString(),10)];p=this.scaleSnapInterval(t,i.scale)}l=u?d:l*p,h=u?c:h*p;oa(s,{id:this.diagramId+"_pattern",x:0,y:0,width:l,height:h,patternUnits:"userSpaceOnUse"}),this.horizontalSvgGridlines(s,l,h,p,t,n,o,u,g,f),this.verticalSvgGridlines(s,l,h,p,t,n,r,u,g,m),a.appendChild(s),e.appendChild(a)},t.prototype.horizontalSvgGridlines=function(t,e,i,n,r,o,s,a,l,h){var c,d=0,p=[];if(r.constraints&mg.ShowHorizontalLines){r.horizontalGridlines.lineDashArray&&(p=this.renderer.parseDashArray(r.horizontalGridlines.lineDashArray)),o.showRulers&&o.dynamicGrid&&s&&(h=this.updateLineIntervals(h,o,s,i,l)),h=bo(h,l);for(var u=0;u<h.length;u+=2){d=yo(h,l,u,d);c=document.createElementNS("http://www.w3.org/2000/svg",l?"path":"circle");var g=l?d+h[parseInt(u.toString(),10)]/2:d;g=a?g:g*n,l?(oa(c,""===p.toString()?{"stroke-width":h[parseInt(u.toString(),10)],d:"M0,"+g+" L"+e+","+g+" Z",class:1.25===h[parseInt(u.toString(),10)]?"e-diagram-thick-grid":"e-diagram-thin-grid",stroke:r.horizontalGridlines.lineColor}:{"stroke-width":h[parseInt(u.toString(),10)],stroke:r.horizontalGridlines.lineColor,d:"M0,"+g+" L"+e+","+g+" Z",class:1.25===h[parseInt(u.toString(),10)]?"e-diagram-thick-grid":"e-diagram-thin-grid",dashArray:p.toString()}),t.appendChild(c),d+=h[u+1]+h[parseInt(u.toString(),10)]):(this.renderDotGrid(u,t,r,0,g,n,!0),d+=h[parseInt(u.toString(),10)])}}},t.prototype.renderDotGrid=function(t,e,i,n,r,o,s){var a=s?i.verticalGridlines.dotIntervals:i.horizontalGridlines.dotIntervals;a=bo(a,!1);for(var l,h,c,d=1;d<a.length;d+=2)l=d===a.length-1?a[0]:a[d-1],c=n,c*=o,oa(h=document.createElementNS("http://www.w3.org/2000/svg","circle"),{cx:s?c:r,cy:s?r:c,fill:i.horizontalGridlines.lineColor,r:l}),e.appendChild(h),n+=a[parseInt(d.toString(),10)]+a[d-1]},t.prototype.verticalSvgGridlines=function(t,e,i,n,r,o,s,a,l,h){var c,d=0,p=[];if(r.constraints&mg.ShowVerticalLines){r.verticalGridlines.lineDashArray&&(p=this.renderer.parseDashArray(r.verticalGridlines.lineDashArray)),o.showRulers&&o.dynamicGrid&&s&&(h=this.updateLineIntervals(h,o,s,e,l));h=bo(h,l);for(var u=0;u<h.length;u+=2){d=yo(h,l,u,d);var g=l?d+h[parseInt(u.toString(),10)]/2:d;g=a?g:g*n,c=document.createElementNS("http://www.w3.org/2000/svg",l?"path":"circle");l?(oa(c,""===p.toString()?{"stroke-width":h[parseInt(u.toString(),10)],d:"M"+g+",0 L"+g+","+i+" Z",class:1.25===h[parseInt(u.toString(),10)]?"e-diagram-thick-grid":"e-diagram-thin-grid",stroke:r.verticalGridlines.lineColor}:{"stroke-width":h[parseInt(u.toString(),10)],class:1.25===h[parseInt(u.toString(),10)]?"e-diagram-thick-grid":"e-diagram-thin-grid",stroke:r.verticalGridlines.lineColor,d:"M"+g+",0 L"+g+","+i+" Z",dashArray:p.toString()}),t.appendChild(c),d+=h[u+1]+h[parseInt(u.toString(),10)]):(this.renderDotGrid(u,t,r,0,g,n,!1),d+=h[parseInt(u.toString(),10)])}}},t.prototype.updateGrid=function(t,e,i,n,r,o){var s=e.getElementById(this.diagramId+"_grid_rect"),a=!1;if(s){var l=e.getElementById(this.diagramId+"_pattern");l&&l.parentNode.removeChild(l);var h=0,c=0,d=1,p="Lines"===t.gridType,u=p?t.verticalGridlines.lineIntervals:t.verticalGridlines.dotIntervals,g=p?t.horizontalGridlines.lineIntervals:t.horizontalGridlines.dotIntervals;n.showRulers&&n.dynamicGrid&&o&&r?(h=o.updateSegmentWidth(i.scale),c=r.updateSegmentWidth(i.scale),a=!0,t.horizontalGridlines.scaledIntervals=[h/r.interval],t.verticalGridlines.scaledIntervals=[c/o.interval]):d=this.scaleSnapInterval(t,i.scale);for(var m=0,f=0;f<g.length;f+=1)m+=g[parseInt(f.toString(),10)];var v=0;for(f=0;f<u.length;f+=1)v+=u[parseInt(f.toString(),10)];var y={x:-i.tx*i.scale,y:-i.ty*i.scale};oa(s,y),v=a?c:v*d,m=a?h:m*d,y={id:this.diagramId+"_pattern",x:0,y:0,width:v,height:m,patternUnits:"userSpaceOnUse"},oa(l=document.createElementNS("http://www.w3.org/2000/svg","pattern"),y),this.horizontalSvgGridlines(l,v,m,d,t,n,o,a,p,g),this.verticalSvgGridlines(l,v,m,d,t,n,r,a,p,u);var b=e.getElementById(this.diagramId+"_grid_pattern_defn");b&&b.appendChild(l)}},t.prototype.updateLineIntervals=function(t,e,i,n,r){for(var o=[],s=n/i.interval,a=r?i.interval:i.interval+1,l=0;l<2*a;l++)o[parseInt(l.toString(),10)]=l%2==0?r?0===l?1.25:.25:0:r?s-o[l-1]:s;return o},t.prototype.scaleSnapInterval=function(t,e){if(e>=2)for(;e>=2;)e/=2;else if(e<=.5)for(;e<=.5;)e*=2;var i;if(t.horizontalGridlines.scaledIntervals=t.horizontalGridlines.snapIntervals,t.verticalGridlines.scaledIntervals=t.verticalGridlines.snapIntervals,1!==e){var n=t.horizontalGridlines;for(n.scaledIntervals=[],i=0;i<n.snapIntervals.length;i++)n.scaledIntervals[parseInt(i.toString(),10)]=n.snapIntervals[parseInt(i.toString(),10)]*e;for((n=t.verticalGridlines).scaledIntervals=[],i=0;i<n.snapIntervals.length;i++)n.scaledIntervals[parseInt(i.toString(),10)]=n.snapIntervals[parseInt(i.toString(),10)]*e}return e},t.prototype.renderTextElement=function(t,e,i,n,r,o){var s=this.getBaseAttributes(t,i);o&&(s.x=o.cx-2,s.y=o.cy-2,t.bounds.x=s.x,t.bounds.y=s.y,t.isExport&&(s.x=s.x*Math.min(t.exportScaleValue.x||t.exportScaleValue.y),s.y=s.y*Math.min(t.exportScaleValue.x||t.exportScaleValue.y))),s.cornerRadius=0,s.whiteSpace=Na(t.style.whiteSpace,t.style.textWrapping),s.content=t.content,s.breakWord=Ia(t.style.textWrapping),s.textAlign=wa(t.style.textAlign),s.color=t.style.color,s.italic=t.style.italic,s.bold=t.style.bold,s.fontSize=t.style.fontSize,s.fontFamily=t.style.fontFamily,s.textOverflow=t.style.textOverflow,s.textWrapping=t.style.textWrapping,s.textDecoration=t.style.textDecoration,s.doWrap=t.doWrap,s.wrapBounds=t.wrapBounds,s.childNodes=t.childNodes,s.isHorizontalLane=t.isLaneOrientation,s.id=t.id?t.id:da(),t.isLaneOrientation&&(s.parentOffsetX=this.groupElement.offsetX,s.parentOffsetY=this.groupElement.offsetY,s.parentWidth=this.groupElement.actualSize.width,s.parentHeight=this.groupElement.actualSize.height),s.dashArray="",s.strokeWidth=0,s.fill=t.style.fill;var a=t.description?t.description:t.content?t.content:t.id;("Wrap"===t.style.textWrapping||"WrapWithOverflow"===t.style.textWrapping)&&this.groupElement&&s.height>this.groupElement.actualSize.height&&("Clip"===t.style.textOverflow||"Ellipsis"===t.style.textOverflow)&&(s.y=s.y+(s.height-this.groupElement.actualSize.height)/2),this.renderer.drawRectangle(e,s,this.diagramId,void 0,void 0,n),this.renderer.drawText(e,s,n,a,this.diagramId,t.isExport&&Math.min(t.exportScaleValue.x||t.exportScaleValue.y),this.groupElement),this.isSvgMode&&(t.doWrap=!1)},t.prototype.renderNativeElement=function(t,e,i,n,r){var o,s,a=this.getParentSvg(t,void 0,e)||n,l=this.getParentElement(t,e,a).g||e,h=this.getBaseAttributes(t,i);switch(h.fill="transparent",h.cornerRadius=t.cornerRadius,h.stroke="transparent",this.renderer.drawRectangle(e,h,this.diagramId,void 0,void 0,n),t.scale){case"None":o=t.contentSize.width,s=t.contentSize.height;break;case"Stretch":o=t.actualSize.width,s=t.actualSize.height;break;case"Meet":o=s=t.actualSize.width<=t.actualSize.height?t.actualSize.width:t.actualSize.height;break;case"Slice":o=s=t.actualSize.width>=t.actualSize.height?t.actualSize.width:t.actualSize.height}this.svgRenderer&&this.svgRenderer.drawNativeContent(t,l,s,o,a)},t.prototype.renderHTMLElement=function(t,e,i,n,r,o,s){var a=this.getBaseAttributes(t,n);a.fill="transparent",a.cornerRadius=t.cornerRadius,a.stroke="transparent",this.renderer.drawRectangle(e,a,this.diagramId,void 0,void 0,r),this.svgRenderer&&this.svgRenderer.drawHTMLContent(t,i.children[0],n,Mo(i),s)},t.prototype.renderImageElement=function(t,e,i,n,r){var o=this.getBaseAttributes(t,i);o.cornerRadius=0,this.renderer.drawRectangle(e,o,this.diagramId,void 0,void 0,n);var s,a,l,h;if("Stretch"===t.stretch)s=t.actualSize.width,a=t.actualSize.height;else{var c=t.contentSize.width,d=t.contentSize.height,p=o.width/c,u=o.height/d,g=void 0;switch(t.stretch){case"Meet":s=c*(g=Math.min(p,u)),a=d*g,o.x+=Math.abs(o.width-s)/2,o.y+=Math.abs(o.height-a)/2;break;case"Slice":p=o.width/c,u=o.height/d,s=c*(g=Math.max(p,u)),a=d*g,l=o.width/s*c,h=o.height/a*d;break;case"None":s=c,a=d}}o.width=s,o.height=a,o.sourceWidth=l,o.sourceHeight=h,o.source=t.source,o.alignment=t.imageAlign,o.scale=t.imageScale,o.description=t.description?t.description:t.id,this.renderer.drawImage(e,o,n,r)},t.prototype.renderContainer=function(t,e,i,n,r,o,s,a,l,h){var c,d={svg:r,g:e},p=document.getElementById(this.diagramId);if(p&&(c=p.ej2_instances[0]),this.diagramId&&(r=this.getParentSvg(t)||r,this.isSvgMode)){var u=this.getParentElement(t,e,r,a).g||e;r=this.getParentSvg(this.hasNativeParent(t.children))||r;var g=this.getParentElement(this.hasNativeParent(t.children),u,r,a);d.svg=g.svg||r,d.g=g.g||u,o?(r&&(r.getElementById(d.g.id)||e.appendChild(d.g)),e=d.g):e=d.g}if(this.renderRect(t,e,n,r),this.groupElement=t,t.hasChildren()){for(var m,f=void 0,v=0,y=t.children;v<y.length;v++){var b=y[v];r=this.getParentSvg(this.hasNativeParent(t.children)||b)||r,this.isSvgMode&&(f=(m=this.getParentElement(this.hasNativeParent(t.children)||b,e,r)).g||e,m.svg&&(r=m.svg)),this.isSvgMode||(b.flip=t.flip),this.renderElement(b,f||e,i,n,r,!0,s,a,l,h),b instanceof Jg&&f&&!(t.elementActions&Ig.ElementIsGroup)&&this.renderFlipElement(b,f,b.flip),b.elementActions&Ig.ElementIsPort&&f&&this.renderFlipElement(t,f,b.flip),!(b instanceof Jg)&&"None"!==t.flip&&t.elementActions&Ig.ElementIsGroup&&this.renderFlipElement(b,f||e,t.flip)}var S=void 0;c&&c.selectedItems&&c.selectedItems.nodes&&c.selectedItems.nodes.length>0&&(S=c.selectedItems.nodes[0]);var w,I=void 0,x=void 0,M=!1;if(c&&c.selectedItems&&(w=c.getObject(t.id)),"None"!==t.flip&&(S=w),S&&S.flipMode&&(M=!0),"None"!==t.flip&&S&&"Label"!==S.flipMode&&"All"!==S.flipMode&&"None"!==S.flipMode){t.flip="None";for(var C=0;C<t.children.length;C++)t.children[parseInt(C.toString(),10)].flip="None"}if(!(t.elementActions&Ig.ElementIsGroup)&&c instanceof YI&&c.nameTable[t.id]&&"connectors"!==c.nameTable[t.id].propName&&M&&S){if(I=t.children&&t.children[0]instanceof lm?document.getElementById(S.id+"_content_inner_native_element"):document.getElementById(S.id+"_content_groupElement"),!(t.children[0]instanceof lm)&&"Text"!==S.shape.type&&"None"!==S.flipMode&&"Label"!==S.flipMode&&"All"!==S.flipMode||t.children[0]instanceof lm&&"Port"===S.flipMode)return void this.renderFlipElement(t,I,S.flip);if((t.children[0]instanceof lm&&("All"===S.flipMode||"Label"===S.flipMode)||"Basic"===S.shape.type&&"Label"===S.flipMode||"Image"===S.shape.type&&"Label"===S.flipMode)&&this.renderFlipElement(t,I,t.flip),"None"!==t.flip&&"None"===S.flipMode)"Text"===S.shape.type||this.renderFlipElement(t,I,t.flip);else if("None"!==t.flip&&"Label"===S.flipMode||t.children[0]instanceof lm&&S&&("None"===S.flipMode||"All"===S.flipMode)){for(var N=0;N<S.wrapper.children.length;N++)if(S.wrapper.children[parseInt(N.toString(),10)]instanceof Jg)return x=document.getElementById(S.wrapper.children[parseInt(N.toString(),10)].id+"_groupElement"),void this.renderFlipElement(t,x,t.flip)}else this.renderFlipElement(t,e,t.flip)}}},t.prototype.renderFlipElement=function(t,e,i){var n={},r=1,o=1,s=0,a=0,l=0,h=0;if("None"!==i?("Horizontal"!==i&&"Both"!==i||(s=t.bounds.center.x,l=-t.bounds.center.x,r=-1),"Vertical"!==i&&"Both"!==i||(a=t.bounds.center.y,h=-t.bounds.center.y,o=-1),n={transform:"translate("+s+","+a+") scale("+r+","+o+") translate("+l+","+h+")"}):n={transform:"translate(0,0)"},n)if(t&&t.children&&t.children.length&&t.children[0]instanceof Cb){var c=e.id.split("_preview");(e=(document.getElementById(c[0]+"_html_div")||$s(this.diagramId).children[0]).querySelector("#"+t.id+"_content_html_element"))&&(e.style.transform="scale("+r+","+o+")rotate("+(t.rotateAngle+t.parentTransform)+"deg)")}else oa(e,n)},t.prototype.hasNativeParent=function(t,e){if(t&&t.length>0){var i=t[0];if(i instanceof lm)return i;i.children&&i.children.length&&this.hasNativeParent(i.children,e++||0)}},t.prototype.renderRect=function(t,e,i,n,r){var o=this.getBaseAttributes(t,i,r);o.cornerRadius=t.cornerRadius||0,t.isExport&&(o.cornerRadius*=t.exportScaleValue.x);var s=t.description?t.description:t.id;this.renderer.drawRectangle(e,o,this.diagramId,t.isExport,void 0,n,s)},t.prototype.drawRect=function(t,e){e.cornerRadius=0,this.svgRenderer.drawRectangle(t,e,this.diagramId)},t.prototype.getBaseAttributes=function(t,e,i){var n={width:t.actualSize.width,height:t.actualSize.height,x:t.offsetX-t.actualSize.width*t.pivot.x+.5,y:t.offsetY-t.actualSize.height*t.pivot.y+.5,fill:t.style.fill,stroke:t.style.strokeColor,angle:t.rotateAngle+t.parentTransform,pivotX:t.pivot.x,pivotY:t.pivot.y,strokeWidth:t.style.strokeWidth,dashArray:t.style.strokeDashArray||"",opacity:t.style.opacity,shadow:t.shadow,gradient:t.style.gradient,visible:t.visible,id:t.id,description:t.description,canApplyStyle:t.canApplyStyle,shapeType:t.shapeType};return i&&(n.x=n.x-.5,n.y=n.y-.5),t.isExport&&(n.width*=t.exportScaleValue.x,n.height*=t.exportScaleValue.y,n.x*=t.exportScaleValue.x,n.y*=t.exportScaleValue.y,n.strokeWidth*=t.exportScaleValue.x),t.flip&&(n.flip=t.flip),e&&(n.x+=e.tx,n.y+=e.ty),n},t.renderSvgBackGroundImage=function(t,e,i,n,r,o){if(t.source){var s=qs(e.id).getElementById(e.id+"_image");if(!s){var a=function(t){return Us(t).getElementsByClassName("e-background-image-layer")[0]}(e.id);(s=document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("id",e.id+"_image"),a.appendChild(s)}var l=new Image;l.src=t.source,s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l.src.toString());var h="None"!==t.scale?t.scale:"",c=t.align,d=c.charAt(0).toLowerCase()+c.slice(1);h&&(d+=" "+h.charAt(0).toLowerCase()+h.slice(1));oa(s,{id:e.id+"_image",x:i,y:n,width:r,height:o,preserveAspectRatio:d})}},t.prototype.transformLayers=function(t,e){var i=t.tx*t.scale,n=t.ty*t.scale;if(i!==this.transform.x||n!==this.transform.y||0===i||0===n){if(e){window.domTable[this.diagramId+"_diagramLayer"]||(window.domTable[this.diagramId+"_diagramLayer"]=this.diagramSvgLayer.getElementById(this.diagramId+"_diagramLayer"));window.domTable[this.diagramId+"_diagramLayer"].setAttribute("transform","translate("+t.tx*t.scale+","+t.ty*t.scale+"),scale("+t.scale+")")}(function(t){var e=null;window.domTable[t+"_gridline"]?e=window.domTable[t+"_gridline"]:(e=Xs(t).getElementById(t+"_gridline"),window.domTable[t+"_gridline"]=e);return e})(this.diagramId).setAttribute("transform","translate("+t.tx*t.scale+","+t.ty*t.scale+")"),window.domTable[this.diagramId+"_diagramPorts"]||(window.domTable[this.diagramId+"_diagramPorts"]=this.iconSvgLayer.getElementById(this.diagramId+"_diagramPorts"));window.domTable[this.diagramId+"_diagramPorts"].setAttribute("transform","translate("+t.tx*t.scale+","+t.ty*t.scale+"),scale("+t.scale+")"),window.domTable[this.diagramId+"_diagramExpander"]||(window.domTable[this.diagramId+"_diagramExpander"]=this.iconSvgLayer.getElementById(this.diagramId+"_diagramExpander"));window.domTable[this.diagramId+"_diagramExpander"].setAttribute("transform","translate("+t.tx*t.scale+","+t.ty*t.scale+"),scale("+t.scale+")"),window.domTable[this.diagramId+"_nativeLayer"]||(window.domTable[this.diagramId+"_nativeLayer"]=this.nativeSvgLayer.getElementById(this.diagramId+"_nativeLayer"));window.domTable[this.diagramId+"_nativeLayer"].setAttribute("transform","translate("+t.tx*t.scale+","+t.ty*t.scale+"),scale("+t.scale+")");return $s(this.diagramId).children[0].style.transform="translate("+t.tx*t.scale+"px,"+t.ty*t.scale+"px)scale("+t.scale+")",this.transform={x:t.tx*t.scale,y:t.ty*t.scale},!0}return!1},t.prototype.updateNode=function(t,e,i,n,r,o){this.renderElement(t,e,i,n,this.getParentSvg(t),void 0,void 0,r,null,o)},t}(),Qw=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Xw=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},qw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Qw(e,t),Xw([W("")],e.prototype,"source",void 0),Xw([W("transparent")],e.prototype,"color",void 0),Xw([W("None")],e.prototype,"scale",void 0),Xw([W("None")],e.prototype,"align",void 0),e}(Rp),Gw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Qw(e,t),Xw([W("Page")],e.prototype,"mode",void 0),Xw([W("PageSettings")],e.prototype,"region",void 0),Xw([Q({top:25,bottom:25,left:25,right:25},ng)],e.prototype,"margin",void 0),Xw([W(!1)],e.prototype,"canZoomIn",void 0),Xw([W(void 0)],e.prototype,"customBounds",void 0),Xw([W(!1)],e.prototype,"canFit",void 0),e}(Rp),Zw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Qw(e,t),Xw([W(null)],e.prototype,"width",void 0),Xw([W(null)],e.prototype,"height",void 0),Xw([Q({},ng)],e.prototype,"margin",void 0),Xw([W("Landscape")],e.prototype,"orientation",void 0),Xw([W("Infinity")],e.prototype,"boundaryConstraints",void 0),Xw([Q({},qw)],e.prototype,"background",void 0),Xw([W(!1)],e.prototype,"multiplePage",void 0),Xw([W(!1)],e.prototype,"showPageBreaks",void 0),Xw([Q({},Gw)],e.prototype,"fitOptions",void 0),e}(Rp),$w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Qw(e,t),Xw([W(0)],e.prototype,"horizontalOffset",void 0),Xw([W(0)],e.prototype,"verticalOffset",void 0),Xw([W(1)],e.prototype,"currentZoom",void 0),Xw([W(0)],e.prototype,"viewPortWidth",void 0),Xw([W(0)],e.prototype,"viewPortHeight",void 0),Xw([W(.2)],e.prototype,"minZoom",void 0),Xw([W(30)],e.prototype,"maxZoom",void 0),Xw([W("Diagram")],e.prototype,"scrollLimit",void 0),Xw([W()],e.prototype,"scrollableArea",void 0),Xw([W(!1)],e.prototype,"canAutoScroll",void 0),Xw([Q({left:15,right:15,top:15,bottom:15},ng)],e.prototype,"autoScrollBorder",void 0),Xw([Q({left:0,right:0,top:0,bottom:0},ng)],e.prototype,"padding",void 0),Xw([W(.2)],e.prototype,"zoomFactor",void 0),e}(Rp),Kw=function(){function t(){this.services={}}return t.prototype.register=function(t,e){this.services[""+t]=e},t.prototype.getService=function(t){return this.services[""+t]},t}(),Jw=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),tI=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},eI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Jw(e,t),tI([W("lightgray")],e.prototype,"lineColor",void 0),tI([W("")],e.prototype,"lineDashArray",void 0),tI([W([1.25,18.75,.25,19.75,.25,19.75,.25,19.75,.25,19.75])],e.prototype,"lineIntervals",void 0),tI([W([1,19,.5,19.5,.5,19.5,.5,19.5,.5,19.5])],e.prototype,"dotIntervals",void 0),tI([W([20])],e.prototype,"snapIntervals",void 0),e}(Rp),iI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Jw(e,t),tI([Q({},eI)],e.prototype,"horizontalGridlines",void 0),tI([Q({},eI)],e.prototype,"verticalGridlines",void 0),tI([W(mg.All)],e.prototype,"constraints",void 0),tI([W(5)],e.prototype,"snapAngle",void 0),tI([W("Lines")],e.prototype,"gridType",void 0),tI([W(5)],e.prototype,"snapObjectDistance",void 0),tI([W("#07EDE1")],e.prototype,"snapLineColor",void 0),e}(Rp),nI=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),rI=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},oI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return nI(e,t),rI([W(5)],e.prototype,"interval",void 0),rI([W(100)],e.prototype,"segmentWidth",void 0),rI([W("Horizontal")],e.prototype,"orientation",void 0),rI([W("RightOrBottom")],e.prototype,"tickAlignment",void 0),rI([W("red")],e.prototype,"markerColor",void 0),rI([W(25)],e.prototype,"thickness",void 0),rI([W(null)],e.prototype,"arrangeTick",void 0),e}(Rp),sI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return nI(e,t),rI([W(!1)],e.prototype,"showRulers",void 0),rI([W(!0)],e.prototype,"dynamicGrid",void 0),rI([Q({orientation:"Horizontal"},oI)],e.prototype,"horizontalRuler",void 0),rI([Q({orientation:"Vertical"},oI)],e.prototype,"verticalRuler",void 0),e}(Rp),aI=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),lI=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},hI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return aI(e,t),lI([W("")],e.prototype,"property",void 0),lI([W("")],e.prototype,"field",void 0),e}(Rp),cI=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),dI=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},pI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return cI(e,t),dI([W("")],e.prototype,"read",void 0),dI([W("")],e.prototype,"create",void 0),dI([W("")],e.prototype,"update",void 0),dI([W("")],e.prototype,"destroy",void 0),dI([W()],e.prototype,"customFields",void 0),e}(Rp),uI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return cI(e,t),dI([W("")],e.prototype,"id",void 0),dI([W("")],e.prototype,"sourceID",void 0),dI([W("")],e.prototype,"targetID",void 0),dI([W(null)],e.prototype,"sourcePointX",void 0),dI([W(null)],e.prototype,"sourcePointY",void 0),dI([W(null)],e.prototype,"targetPointX",void 0),dI([W(null)],e.prototype,"targetPointY",void 0),dI([W(null)],e.prototype,"dataManager",void 0),dI([Q({},pI)],e.prototype,"crudAction",void 0),e}(Rp),gI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return cI(e,t),dI([W("")],e.prototype,"id",void 0),dI([W(null)],e.prototype,"dataManager",void 0),dI([W(null)],e.prototype,"dataSource",void 0),dI([W("")],e.prototype,"root",void 0),dI([W("")],e.prototype,"parentId",void 0),dI([W()],e.prototype,"doBinding",void 0),dI([q([],hI)],e.prototype,"dataMapSettings",void 0),dI([Q({},pI)],e.prototype,"crudAction",void 0),dI([Q({},uI)],e.prototype,"connectionDataSource",void 0),e}(Rp),mI=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),fI=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},vI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mI(e,t),fI([W("")],e.prototype,"fixedNode",void 0),fI([W(30)],e.prototype,"horizontalSpacing",void 0),fI([W("SamePoint")],e.prototype,"connectionPointOrigin",void 0),fI([W("Nonlinear")],e.prototype,"arrangement",void 0),fI([W(30)],e.prototype,"verticalSpacing",void 0),fI([W(30)],e.prototype,"maxIteration",void 0),fI([W(40)],e.prototype,"springFactor",void 0),fI([W(50)],e.prototype,"springLength",void 0),fI([Q({left:50,top:50,right:0,bottom:0},ng)],e.prototype,"margin",void 0),fI([W("Auto")],e.prototype,"horizontalAlignment",void 0),fI([W("Auto")],e.prototype,"verticalAlignment",void 0),fI([W("TopToBottom")],e.prototype,"orientation",void 0),fI([W("Auto")],e.prototype,"connectionDirection",void 0),fI([W("Default")],e.prototype,"connectorSegments",void 0),fI([W("None")],e.prototype,"type",void 0),fI([W()],e.prototype,"getLayoutInfo",void 0),fI([W()],e.prototype,"layoutInfo",void 0),fI([W()],e.prototype,"getBranch",void 0),fI([W()],e.prototype,"bounds",void 0),fI([W(!0)],e.prototype,"enableAnimation",void 0),fI([W(!1)],e.prototype,"enableRouting",void 0),fI([W("")],e.prototype,"root",void 0),e}(Rp),yI=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),bI=function(t){function e(e,i){var n=t.call(this,e,!0)||this;return n.oldValue=null,n.endPoint=i,n}return yI(e,t),e.prototype.mouseDown=function(e){var i,n=!0;if(e.source&&e.source.connectors&&(i=e.source.connectors[0]),e.info&&e.actualObject&&(n=e.info.ctrlKey&&"Orthogonal"!==e.actualObject.type),i&&n){this.inAction=!0,this.undoElement=fa(e.source),t.prototype.mouseDown.call(this,e);for(var r=0;r<i.segments.length;r++){var o=i.segments[parseInt(r.toString(),10)];if("OrthoThumb"===this.endPoint)for(var s=0;s<o.points.length-1;s++){var a={x:0,y:0};a.x=(o.points[parseInt(s.toString(),10)].x+o.points[s+1].x)/2,a.y=(o.points[parseInt(s.toString(),10)].y+o.points[s+1].y)/2,Zr(this.currentPosition,a,30)&&(this.selectedSegment=o,this.segmentIndex=s)}else Zr(this.currentPosition,o.point,10)&&(this.selectedSegment=o)}}},e.prototype.mouseMove=function(e){if(t.prototype.mouseMove.call(this,e),this.currentPosition=e.position,this.currentPosition&&this.prevPosition){var i=this.currentPosition.y-this.prevPosition.y,n=this.currentPosition.x-this.prevPosition.x;this.currentPosition=this.commandHandler.snapConnectorEnd(this.currentPosition);var r=void 0,o=void 0,s=!1;e.source&&e.source.connectors&&(r=e.source.connectors[0]),Gu.equals(this.startPosition,this.prevPosition)&&(s=!0),null===this.oldValue&&(this.oldValue=fa(this.selectedSegment));var a={source:r,state:"Start",oldValue:this.oldValue,newValue:this.oldValue,segment:this.selectedSegment,cancel:!1};if(a={source:xs(r),state:"Start",oldValue:xs(this.oldValue),newValue:xs(this.oldValue),segment:xs(this.selectedSegment),cancel:!1},s&&!f()&&this.commandHandler.triggerEvent(jg.segmentChange,a),a.cancel&&this.commandHandler.diagram.resetTool(),this.inAction&&void 0!==this.selectedSegment&&void 0!==this.endPoint&&(0!==n||0!==i)&&!a.cancel){if("OrthoThumb"===this.endPoint)this.blocked=!this.dragOrthogonalSegment(r,this.selectedSegment,this.currentPosition,this.segmentIndex),null===this.oldValue.length&&null===this.oldValue.direction&&(this.oldValue=fa(this.selectedSegment)),o=fa(this.selectedSegment);else{var l=this.currentPosition.x-this.selectedSegment.point.x,h=this.currentPosition.y-this.selectedSegment.point.y,c=r.segments.indexOf(this.selectedSegment);this.blocked=!this.commandHandler.dragControlPoint(r,l,h,!1,c),o=fa(this.selectedSegment)}this.commandHandler.updateSelector(),this.currentPosition=e.position;var d={source:xs(r),state:"Progress",oldValue:xs(this.oldValue),newValue:xs(o),segment:xs(this.selectedSegment),cancel:!1};this.commandHandler.triggerEvent(jg.segmentChange,d)}}return this.prevPosition=this.currentPosition,!this.blocked},e.prototype.mouseUp=function(e){var i,n;if(e.source&&e.source.connectors&&(n={segments:(i=e.source.connectors[0]).segments}),e&&e.source&&e.info&&e.info.ctrlKey&&e.info.shiftKey&&"Straight"===i.type)this.addOrRemoveSegment(i,this.currentPosition);else if("OrthoThumb"===this.endPoint&&this.selectedSegment){var r=i.segments.indexOf(this.selectedSegment),o=i.segments[r-1],s=i.segments[r+1];if(r===i.segments.length-2&&this.updateLastSegment(i,this.selectedSegment))i.segments.splice(i.segments.length-2,1);else if(o&&Math.abs(o.length)<5)1!==r&&this.removePrevSegment(i,r);else if(s){var a=Gu.distancePoints(s.points[0],s.points[1]),l=s.length||0===s.length?s.length:a;Math.abs(l)<=5&&this.removeNextSegment(i,r)}this.commandHandler.updateEndPoint(i,n),i.selectedSegmentIndex=0}if(this.undoElement){var h={type:"SegmentChanged",redoObject:fa(e.source),undoObject:this.undoElement,category:"Internal"};this.commandHandler.addHistoryEntry(h)}if(i.isBezierEditing&&(i.isBezierEditing=!1),this.prevPosition!==this.startPosition){var c={source:xs(i),state:"Completed",oldValue:xs(this.oldValue),newValue:fa(this.selectedSegment),cancel:!1,segment:xs(this.selectedSegment)};this.commandHandler.triggerEvent(jg.segmentChange,c)}t.prototype.mouseUp.call(this,e)},e.prototype.removePrevSegment=function(t,e){var i=t.segments[e-2],n=t.segments[e+1];if(!((n.length||0===n.length?n.length:Gu.distancePoints(n.points[0],n.points[1]))<=5)){var r=t.segments.slice(e-1,e+1),o={element:t,removeSegments:r,type:"Removal",cancel:!1};if(f()&&(o={element:xs(t),removeSegments:xs(r),type:"Removal",cancel:o.cancel}),this.commandHandler.triggerEvent(jg.segmentCollectionChange,o),!o.cancel){var s=t.segments[e+1];t.segments.splice(e-1,2);var a=this.selectedSegment;"Left"===a.direction||"Right"===a.direction?(i.points[i.points.length-1].x=s.points[0].x,s.points[0].y=i.points[i.points.length-1].y):(i.points[i.points.length-1].y=s.points[0].y,s.points[0].x=i.points[i.points.length-1].x),(a.length||0===a.length)&&this.findSegmentDirection(i),this.findSegmentDirection(s)}}},e.prototype.findSegmentDirection=function(t){t.direction&&(t.length||0===t.length)&&(t.length=Gu.distancePoints(t.points[0],t.points[t.points.length-1]),t.direction=Gu.direction(t.points[0],t.points[t.points.length-1]))},e.prototype.removeNextSegment=function(t,e){var i,n,r=this.selectedSegment,o=t.segments[e-1],s=t.segments[e+2],a=t.segments[e+1];if(a.length||0===a.length?(n={element:t,removeSegments:i=t.segments.slice(e,2),type:"Removal",cancel:!1},n={element:xs(t),removeSegments:xs(i),type:"Removal",cancel:!1},f()&&(n={element:xs(t),removeSegments:xs(i),type:"Removal",cancel:!1}),this.commandHandler.triggerEvent(jg.segmentCollectionChange,n),n.cancel||(t.segments.splice(e,2),"Top"===r.direction||"Bottom"===r.direction?(s.points[0].y=r.points[0].y,o.points[o.points.length-1].x=s.points[0].x):(s.points[0].x=r.points[0].x,o.points[o.points.length-1].y=s.points[0].y))):(n={element:t,removeSegments:i=t.segments.slice(e+1,1),type:"Removal",cancel:!1},f()&&(n={element:t,removeSegments:i,type:"Removal",cancel:!1}),this.commandHandler.triggerEvent(jg.segmentCollectionChange,n),n.cancel||(t.segments.splice(e+1,1),"Top"===r.direction||"Bottom"===r.direction?o.points[o.points.length-1].x=a.points[a.points.length-1].x:o.points[o.points.length-1].y=a.points[a.points.length-1].y,this.findSegmentDirection(o),r.length=r.direction=null)),o&&s&&!n.cancel&&(o.length=Gu.distancePoints(o.points[0],s.points[0]),o.direction=Gu.direction(o.points[0],s.points[0]),s.length||0===s.length)){s.length=Gu.distancePoints(o.points[o.points.length-1],s.points[s.points.length-1]);var l=o.points,h=s.points;s.direction=Gu.direction(l[l.length-1],h[h.length-1])}},e.prototype.addOrRemoveSegment=function(t,e){for(var i,n,r={segments:t.segments},o=0;o<t.segments.length;o++){Zr(e,(s=t.segments[parseInt(o.toString(),10)]).point,t.hitPadding)&&(n=o,i=!0)}if(i&&void 0!==n){if(t.segments&&t.segments[parseInt(n.toString(),10)]&&"Straight"===t.segments[parseInt(n.toString(),10)].type){var s=t.segments[parseInt(n.toString(),10)],a=t.segments[n+1];a&&(t.segments.splice(n,1),a.points[0]=s.points[0])}}else{this.commandHandler.enableServerDataBinding(!1);var l=this.findIndex(t,e);if(t.segments&&t.segments[parseInt(l.toString(),10)]&&"Straight"===t.segments[parseInt(l.toString(),10)].type){s=t.segments[parseInt(l.toString(),10)];var h=new bS(t,"segments",{type:"Straight",point:e},!0);h.points[0]=s.points[0],h.points[1]=e,s.points[0]=e,t.segments.splice(l,0,h),i=!0}this.commandHandler.enableServerDataBinding(!0)}i&&this.commandHandler.updateEndPoint(t,r)},e.prototype.findIndex=function(t,e){for(var i=[],n=0;n<t.segments.length;n++){var r=t.segments[parseInt(n.toString(),10)],o=Zu.toBounds([r.points[0],r.points[1]]);o.Inflate(t.hitPadding),o.containsPoint(e)&&i.push(r)}if(1===i.length)return t.segments.indexOf(i[0]);var s=void 0,a=void 0,l=void 0,h=void 0,c=void 0,d=void 0;for(n=0;n<i.length;n++)h=i[parseInt(n.toString(),10)],c=(e.y-h.points[0].y)/(h.points[1].y-e.y),d=(e.x-h.points[0].x)/(h.points[1].x-e.x),s=Math.abs(c-d),0===n&&(a=s,l=0),s<a&&(a=s,l=n);return t.segments.indexOf(i[parseInt(l.toString(),10)])},e.prototype.dragOrthogonalSegment=function(t,e,i,n){var r={x:0,y:0},o={segments:t.segments};r.x=(e.points[parseInt(n.toString(),10)].x+e.points[n+1].x)/2,r.y=(e.points[parseInt(n.toString(),10)].y+e.points[n+1].y)/2;var s=i.y-r.y,a=i.x-r.x,l=t.segments.indexOf(e),h=!1;return t.allowNodeOverlap&&(t.selectedSegmentIndex=l||n),-1!==l&&(0===l&&1===t.segments.length&&2===e.points.length?(l=this.addSegments(t,e,a,s,l),h=!0):l!==t.segments.length-1||null!==e.direction&&null!==e.length?0===l&&(l=this.insertFirstSegment(t,e,a,s,l),h=!0):(l=this.addTerminalSegment(t,e,a,s,n),h=!0),l&&(h&&(this.selectedSegment=e=t.segments[parseInt(l.toString(),10)],this.segmentIndex=0),this.updateAdjacentSegments(t,l,a,s),this.commandHandler.updateEndPoint(t,o))),!0},e.prototype.addSegments=function(t,e,i,n,r){var o,s=[],a=Gu.distancePoints(e.points[0],e.points[1]),l=Gu.direction(e.points[0],e.points[1]);s.push(new wS(t,"segments",{type:"Orthogonal",direction:l,length:a/4},!0));var h=e.points[0].y===e.points[1].y?n>0?"Bottom":"Top":i>0?"Right":"Left",c=e.points[0].x===e.points[1].x?n:i;s.push(new wS(t,"segments",{type:"Orthogonal",direction:h,length:c},!0)),s.push(new wS(t,"segments",{type:"Orthogonal",direction:l,length:a/2},!0));var d={element:t,addSegments:s,type:"Addition",cancel:!1};return f()&&(d={addSegments:xs(s),type:"Addition",cancel:d.cancel,element:xs(t)}),this.commandHandler.triggerEvent(jg.segmentCollectionChange,d),d.cancel||(t.segments=s.concat(t.segments),o=r+2),o},e.prototype.insertFirstSegment=function(t,e,i,n,r){var o,s,a,l,h,c=[];if(t.sourcePortID&&e.length&&t.segments[0].points.length>2)for(var d=void 0,p=0;p<e.points.length-1;p++){var u=Gu.distancePoints(e.points[parseInt(p.toString(),10)],e.points[p+1]),g=Gu.direction(e.points[parseInt(p.toString(),10)],e.points[p+1]);0===(h=new wS(t,"segments",{type:"Orthogonal",direction:g,length:u},!0)).length&&(!d||"Top"!==d.direction&&"Bottom"!==d.direction?h.direction=n>0?"Bottom":"Top":h.direction=i>0?"Right":"Left"),d=h,c.push(h)}else a={type:"Orthogonal",direction:e.direction,length:e.length/3},c.push(new wS(t,"segments",a,!0)),"Bottom"===e.direction||"Top"===e.direction?(s=Math.abs(i),o=i>0?"Right":"Left"):(s=Math.abs(n),o=n>0?"Bottom":"Top"),h=new wS(t,"segments",{type:"Orthogonal",direction:o,length:s},!0),c.push(h);var m={element:t,addSegments:c,type:"Addition",cancel:!1};if(f()&&(m={element:xs(t),addSegments:xs(c),type:"Addition",cancel:m.cancel}),this.commandHandler.triggerEvent(jg.segmentCollectionChange,m),!m.cancel){if(t.sourcePortID&&e.length&&t.segments[0].points.length>2)t.segments.splice(0,1),l=1;else{var v=t.segments[1];v&&v.length&&(v.length=o!==v.direction?v.length+s:v.length-s),l=2,e.length=2*e.length/3}t.segments=c.concat(t.segments)}return l},e.prototype.updateAdjacentSegments=function(t,e,i,n){var r=t.segments[parseInt(e.toString(),10)],o=r.points[r.points.length-1],s=r.points[0],a=!0;if("Orthogonal"===r.type){r.points[0]=s,r.points[r.points.length-1]=o;if(t.segments[e-1]&&(a=this.updatePreviousSegment(i,n,t,e)),t.segments.length-1>e&&a){var l=t.segments[e+1];this.updateNextSegment(t,r,l,i,n)}}},e.prototype.addTerminalSegment=function(t,e,i,n,r){var o,s,a,l,h=t.segments.indexOf(e),c=[],d=t.segments.pop(),p=t.segments[t.segments.length-1];o=p&&"Orthogonal"===p.type?p:null;for(var u=0;u<e.points.length-2;u++)a=Gu.distancePoints(e.points[parseInt(u.toString(),10)],e.points[u+1]),l=Gu.direction(e.points[parseInt(u.toString(),10)],e.points[u+1]),s=new wS(t,"segments",{type:"Orthogonal",length:a,direction:l},!0),c.push(s),o=s;var g=r;if((2===e.points.length||g===e.points.length-2)&&(o&&(o.length+=5),void 0!==g)){a=2*Gu.distancePoints(e.points[e.points.length-2],e.points[e.points.length-1])/3,l=Gu.direction(e.points[e.points.length-2],e.points[e.points.length-1]);var m=new wS(t,"segments",{type:"Orthogonal",length:a,direction:l});c.push(m)}var v=new wS(t,"segments",{type:"Orthogonal"},!0);c.push(v);var y,b=!1;return y={element:xs(t),addSegments:xs(c),type:"Addition",cancel:b},f()&&(y={element:xs(t),addSegments:xs(c),type:"Addition",cancel:b}),this.commandHandler.triggerEvent(jg.segmentCollectionChange,y),y.cancel?t.segments.push(d):(t.segments=t.segments.concat(c),h+=r),this.commandHandler.updateEndPoint(t),h},e.prototype.updatePortSegment=function(t,e,i,n,r){if(1===i&&2===t.points.length&&t.length<0){var o=e.sourceWrapper.corners,s=e.segments[parseInt(i.toString(),10)],a=e.segments[i+1],l=void 0,h=[];l=new wS(e,"segments",{type:"Orthogonal",length:13,direction:t.direction}),h.push(l);var c=void 0;c="Left"===s.direction?s.points[0].x-(o.middleLeft.x-20):"Right"===s.direction?o.middleRight.x+20-s.points[0].x:"Bottom"===s.direction?o.bottomCenter.y+20-s.points[0].y:s.points[0].y-(o.topCenter.y-20),l=new wS(e,"segments",{type:"Orthogonal",length:c,direction:s.direction}),h.push(l),s.length=s.length-c,a&&a.length&&a.direction&&(a.direction===t.direction?a.length-=13:a.direction===ke(t.direction)&&(a.length+=13)),e.segments=h.concat(e.segments),this.selectedSegment=e.segments[3]}},e.prototype.updatePreviousSegment=function(t,e,i,n){var r=i.segments[parseInt(n.toString(),10)],o=i.segments[n-1];o.points[o.points.length-1]=r.points[0];var s=!i.sourceID||""!==i.sourcePortID,a=!0;return"Orthogonal"===o.type&&("Bottom"===o.direction?o.length+=e:"Top"===o.direction?o.length-=e:"Right"===o.direction?o.length+=t:o.length-=t,""!==i.sourcePortID&&o.length<0&&!i.allowNodeOverlap?this.updatePortSegment(o,i,n,t,e):i.sourceID&&""===i.sourcePortID&&o.length<0&&1===n&&(a=!1,this.updateFirstSegment(i,r)),s&&this.changeSegmentDirection(o,i)),a},e.prototype.changeSegmentDirection=function(t,e){e.maxSegmentThumb||t.length<0&&(t.direction=ke(t.direction),t.length*=-1)},e.prototype.updateNextSegment=function(t,e,i,n,r){i.points[0]=e.points[e.points.length-1],i&&"Orthogonal"===i.type&&(i.length||0===i.length)&&("Left"===i.direction||"Right"===i.direction?0!==n&&(i.length="Right"===i.direction?i.length-n:i.length+n,(i.length||0===i.length)&&this.changeSegmentDirection(i,t)):0!==r&&(i.length="Bottom"===i.direction?i.length-r:i.length+r,(i.length||0===i.length)&&this.changeSegmentDirection(i,t)))},e.prototype.updateFirstSegment=function(t,e){var i,n=t.segments.indexOf(e),r=!1,o=t.segments[parseInt(n.toString(),10)],s=t.segments[n-1],a={segments:t.segments};if(s.length<0&&t.sourceID){var l=t.sourceWrapper.corners,h=[],c=void 0,d=!1;this.changeSegmentDirection(o,t);var p=t.segments[n+1],u=t.segments[n+2];switch(p&&this.changeSegmentDirection(p,t),u&&this.changeSegmentDirection(u,t),s.direction){case"Top":case"Bottom":i=o.length>0&&"Left"===o.direction?l.middleLeft:l.middleRight,o.length>l.width/2?Math.abs(s.length)<l.height/2&&(s.length=Gu.distancePoints(l.center,s.points[s.points.length-1]),o.points[0].x=i.x,o.length=Gu.distancePoints(o.points[0],o.points[o.points.length-1]),o.length-=20,r=!0):(p&&p.direction&&p.length&&(p.points[0].y=i.y,p.points[0].x=p.points[p.points.length-1].x="Right"===o.direction?i.x+20:i.x-20),r=!0,d=!0);break;case"Left":case"Right":i=o.length>0&&"Top"===o.direction?l.topCenter:l.bottomCenter,o.length>l.height/2?Math.abs(s.length)<l.width/2&&(s.length=Gu.distancePoints(l.center,s.points[s.points.length-1]),o.points[0].y=i.y,o.length=Gu.distancePoints(o.points[0],o.points[o.points.length-1]),o.length-=20,r=!0):(p&&p.direction&&p.length&&(p.points[0].x=i.x,p.points[0].y=p.points[p.points.length-1].y="Bottom"===o.direction?i.y+20:i.y-20),r=!0,d=!0)}this.changeSegmentDirection(s,t),this.changeSegmentDirection(o,t),r&&(c={type:"Orthogonal",direction:o.direction,length:20},h.push(new wS(t,"segments",c,!0)),d&&(p&&p.direction&&p.length&&(p.length=Gu.distancePoints(p.points[0],p.points[p.points.length-1])),u&&u.direction&&u.length&&(u.length=Gu.distancePoints(p.points[p.points.length-1],u.points[u.points.length-1])),t.segments.splice(n-1,2)),t.segments=h.concat(t.segments)),this.selectedSegment=d?t.segments[n-1]:t.segments[n+1],this.commandHandler.updateEndPoint(t,a)}},e.prototype.updateLastSegment=function(t,e){if(t.targetID&&""===t.targetPortID){var i=void 0,n=void 0,r=void 0,o=void 0,s=t.targetWrapper.corners,a=e.points[0],l=e.points[e.points.length-1];"Right"===e.direction||"Left"===e.direction?(i={x:a.x,y:a.y},n={x:"Left"===e.direction?l.x-s.width/2:l.x+s.width/2,y:l.y},r={x:s.center.x,y:s.center.y-s.height},o={x:s.center.x,y:s.center.y+s.height}):(i={x:a.x,y:a.y},n={x:l.x,y:"Bottom"===e.direction?l.y+s.height/2:l.y-s.height/2},r={x:s.center.x-s.width,y:s.center.y},o={x:s.center.x+s.width,y:s.center.y});return To({x1:i.x,y1:i.y,x2:n.x,y2:n.y},{x1:r.x,y1:r.y,x2:o.x,y2:o.y}).enabled}return!1},e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"ConnectorEditingTool"},e}(Fb),SI=function(){function t(t,e){this.currentAction="None",this.previousAction="None",this.focus=!1,this.isBlocked=!1,this.isMouseDown=!1,this.inAction=!1,this.doingAutoScroll=!1,this.diagram=null,this.objectFinder=null,this.tool=null,this.eventArgs=null,this.keyArgs={},this.diagram=t,this.objectFinder=new wI,this.commandHandler=e}return Object.defineProperty(t.prototype,"action",{get:function(){return this.currentAction},set:function(t){t!==this.currentAction&&("PortDraw"===this.currentAction&&(this.diagram.tool&=~Cg.DrawOnce,this.diagram.currentDrawingObject&&(this.diagram.currentDrawingObject=null),this.tool&&this.tool.mouseUp({position:this.currentPosition}),this.tool=null),"Rotate"===t||"LabelRotate"===t?this.diagram.diagramCanvas.classList.add("e-diagram-rotate"):"Rotate"!==this.currentAction&&"LabelRotate"!==this.currentAction||this.diagram.diagramCanvas.classList.remove("e-diagram-rotate"),this.currentAction=t,"None"!==this.currentAction&&"Select"!==this.currentAction&&!(this.diagram.diagramActions&Og.TextEdit)||this.commandHandler.isUserHandle(this.currentPosition)?this.diagram.diagramActions=this.diagram.diagramActions|Og.ToolAction:this.diagram.diagramActions=this.diagram.diagramActions&~Og.ToolAction,this.diagram.setCursor(this.diagram.getCursor(t,this.inAction)))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blocked",{get:function(){return this.isBlocked},set:function(t){this.isBlocked=t,this.blocked?this.diagram.setCursor("not-allowed"):this.diagram.setCursor(this.diagram.getCursor(this.action,this.inAction))},enumerable:!0,configurable:!0}),t.prototype.getMousePosition=function(t){var e,i,n;-1!==t.type.indexOf("touch")?(i=(e=t).changedTouches[0].clientX,n=e.changedTouches[0].clientY):(i=t.clientX,n=t.clientY);var r=new Qu;r=ho(this.diagram);var o=this.diagram.element.getBoundingClientRect();return i=i+this.diagram.diagramCanvas.scrollLeft-o.left-r.width,n=n+this.diagram.diagramCanvas.scrollTop-o.top-r.height,i/=this.diagram.scroller.transform.scale,n/=this.diagram.scroller.transform.scale,i-=this.diagram.scroller.transform.tx,n-=this.diagram.scroller.transform.ty,{x:i,y:n}},t.prototype.windowResize=function(t){var e=this;return this.resizeTo&&clearTimeout(this.resizeTo),this.resizeTo=setTimeout(function(){e.updateViewPortSize(e.diagram.element)},300),!1},t.prototype.updateViewPortSize=function(t){var e=document.getElementById(t.id);if(e){var i=e.getBoundingClientRect();this.diagram.scroller.setViewPortSize(i.width,i.height);var n=new Qu;n=ho(this.diagram);var r=this.diagram.getSizeValue(this.diagram.width,n.width),o=this.diagram.getSizeValue(this.diagram.height,n.height);this.diagram.diagramCanvas.style.width=r,this.diagram.diagramCanvas.style.height=o,this.diagram.scroller.setSize(),this.diagram.transformLayers(),this.diagram.rulerSettings.showRulers&&ao(this.diagram)}},t.prototype.canHideResizers=function(){return(this.tool instanceof Xb||this.tool instanceof qb)&&this.isMouseDown},t.prototype.updateCursor=function(){if(1===this.diagram.selectedItems.nodes.length||1===this.diagram.selectedItems.connectors.length){var t=[];t=t.concat(this.diagram.selectedItems.nodes,this.diagram.selectedItems.connectors),this.blocked=!(this.eventArgs&&this.eventArgs.source&&!Nn(this.eventArgs.source))&&(this.isMouseDown&&1===t.length&&this.tool instanceof Yb&&!Nn(t[0]))}},t.prototype.isForeignObject=function(t,e){var i=t;if(i)for(;null!==i.parentNode;){if("string"==typeof i.className&&(!e&&-1!==i.className.indexOf("foreign-object")||e&&-1!==i.className.indexOf("e-diagram-text-edit")))return i;i=i.parentNode}return null},t.prototype.isMetaKey=function(t){return"mousewheel"===t.type?t.ctrlKey:navigator.platform.match("Mac")?t.metaKey:t.ctrlKey},t.prototype.renderUmlHighLighter=function(t){this.diagram.commandHandler.removeStackHighlighter();var e=this.diagram.selectedItems.nodes[0];if(e&&e.container&&"Stack"===e.container.type&&"UmlClassifier"===e.shape.type){if(!e.wrapper.bounds.containsPoint(this.currentPosition)){var i=this.diagram.findObjectsUnderMouse({x:this.currentPosition.x-20,y:this.currentPosition.y}),n=this.diagram.findObjectUnderMouse(i,this.action,this.inAction);if(n&&n.parentId&&n.parentId===e.id){var r="Vertical"===this.diagram.nameTable[n.parentId].container.orientation;Qr(n.wrapper,r,t.position,this.diagram,!0)}}}},t.prototype.isDeleteKey=function(t,e){return navigator.platform.match("Mac")&&"Backspace"===t&&"delete"===e},t.prototype.isMouseOnScrollBar=function(t){var e,i,n,r,o,s=t.offsetX,a=t.offsetY,l=this.diagram.diagramCanvas,h=l.offsetHeight,c=l.offsetWidth;return!!(h<l.scrollHeight&&(e={x:c-17,y:0},i={x:c,y:0},n={x:c-17,y:h},r={x:c,y:h},o=Zu.toBounds([e,i,n,r]),0!==this.diagram.scroller.verticalOffset&&(o.x=o.x-this.diagram.scroller.horizontalOffset,o.y=o.y-this.diagram.scroller.verticalOffset),o.containsPoint({x:s,y:a})))||!!(c<l.scrollWidth&&(e={x:0,y:h-17},i={x:c,y:h-17},n={x:0,y:h},r={x:c,y:h},o=Zu.toBounds([e,i,n,r]),0!==this.diagram.scroller.horizontalOffset&&(o.x=o.x-this.diagram.scroller.horizontalOffset,o.y=o.y-this.diagram.scroller.verticalOffset),o.containsPoint({x:s,y:a})))},t.prototype.updateVirtualization=function(){var t=this,e=setInterval(function(i){t.diagram.removeVirtualObjects(e)},50);setTimeout(function(){t.diagram.deleteVirtualObject=!0},50)},t.prototype.checkPreviousAction=function(){if(this.action!==this.previousAction&&this.diagram.selectedItems.userHandles.length)for(var t=0;t<this.diagram.selectedItems.userHandles.length;t++)this.previousAction&&this.diagram.selectedItems.userHandles[parseInt(t.toString(),10)]&&(this.checkUserHandleEvent(jg.onUserHandleMouseLeave),this.previousAction="None")},t.prototype.checkUserHandleEvent=function(t){if(this.diagram.selectedItems&&this.diagram.selectedItems.userHandles.length>0)for(var e=t===jg.onUserHandleMouseLeave?this.previousAction:this.action,i={element:void 0},n=0;n<this.diagram.selectedItems.userHandles.length;n++)if(e===this.diagram.selectedItems.userHandles[parseInt(n.toString(),10)].name||t===jg.onUserHandleMouseUp&&"Select"===e){if(i.element=this.diagram.selectedItems.userHandles[parseInt(n.toString(),10)],t===jg.onUserHandleMouseEnter&&(this.previousAction=this.action,i.element.tooltip&&"Auto"===i.element.tooltip.openOn&&""!==i.element.tooltip.content)){xn(this.diagram,i.element);var r=void 0;r=i.element.pathData?document.getElementById(this.diagram.selectedItems.userHandles[parseInt(n.toString(),10)].name+"_userhandle"):i.element.source?document.getElementById(this.diagram.selectedItems.userHandles[parseInt(n.toString(),10)].name+"_image"):i.element.content?document.getElementById(this.diagram.selectedItems.userHandles[parseInt(n.toString(),10)].name+"_shape_native_element"):document.getElementById(this.diagram.selectedItems.userHandles[parseInt(n.toString(),10)].name+"_shape_html_element"),"Auto"===i.element.tooltip.openOn&&this.diagram.tooltipObject.open(r)}t===jg.onUserHandleMouseDown&&(this.userHandleObject=this.diagram.selectedItems.userHandles[parseInt(n.toString(),10)].name);var o=document.getElementById(this.diagram.selectedItems.userHandles[parseInt(n.toString(),10)].name+"_userhandle");t===jg.onUserHandleMouseUp&&this.commandHandler.isUserHandle(this.currentPosition)&&o&&o.id===this.userHandleObject+"_userhandle"&&this.diagram.triggerEvent(t,i),t===jg.onUserHandleMouseLeave?this.diagram.tooltipObject&&"Custom"!==this.diagram.tooltipObject.openOn&&this.diagram.tooltipObject.close():this.diagram.triggerEvent(t,i)}},t.prototype.mouseDown=function(t){if(!0!==this.inAction||!(this.tool instanceof Zb||this.tool instanceof $b)){this.focus=!0;var e=t.touches,i=!!document.getElementsByClassName("e-dragclone")[0];if(this.isMouseOnScrollBar(t)&&!i)return this.isScrolling=!0,void t.preventDefault();if(this.checkUserHandleEvent(jg.onUserHandleMouseDown),!this.checkEditBoxAsTarget(t)&&Xn(this.diagram)||Fn(this.diagram)&&!Qn(this.diagram))if("Select"!==this.action&&"Drag"!==this.action||this.diagram.updatePortVisibility(this.hoverElement,gg.Hover,!0),!(this.tool instanceof iS||this.tool instanceof nS)||2!==t.button&&2!==t.buttons)if(!0===this.inAction&&!0===this.isMouseDown&&(this.tool instanceof iS||this.tool instanceof nS))this.isMouseDown=!0,this.eventArgs={},this.getMouseEventArgs(this.currentPosition,this.eventArgs),this.eventArgs.position=this.currentPosition,this.tool.mouseDown(this.eventArgs);else{this.isMouseDown=!0,this.currentPosition=this.prevPosition=this.getMousePosition(t),this.eventArgs={},this.diagram.textEditing&&!this.isMouseOnScrollBar(t)&&(this.diagram.endEdit(),this.diagram.textEditing=!1,"Canvas"===this.diagram.mode&&1!==this.diagram.scroller.currentZoom&&this.diagram.refreshDiagramLayer());var n=this.getTargetElement();this.action=this.diagram.findActionToBeDone(n.obj,n.sourceElement,this.currentPosition,n.target);var r=this.isMetaKey(t);if(r&&t.shiftKey&&this.diagram.connectorEditingToolModule?this.action="SegmentEnd":!r&&!t.shiftKey||Fn(this.diagram)||(this.action="Select"),this.tool=this.diagram.getTool(this.action),this.tool||(this.action="Select",this.tool=this.diagram.getTool(this.action)),this.getMouseEventArgs(this.currentPosition,this.eventArgs),r||t.shiftKey){var o=r&&t.shiftKey?{ctrlKey:r,shiftKey:t.shiftKey}:{ctrlKey:!0};this.eventArgs.info=o}this.eventArgs.position=this.currentPosition,this.tool.mouseDown(this.eventArgs),this.initialEventArgs={source:this.eventArgs.source,sourceWrapper:this.eventArgs.sourceWrapper},this.initialEventArgs.position=this.currentPosition,this.initialEventArgs.info=this.eventArgs.info,this.inAction=!1,"touchstart"===t.type&&(e&&e.length>=2&&(this.touchStartList=ia(this.touchStartList,0,e)),e||t.preventDefault())}else{xs(this.diagram),xs(this.currentPosition),t.buttons,xs(this.eventArgs.actualObject),0===t.button||t.button;this.inAction=!1,this.tool.mouseUp(this.eventArgs)}this.isForeignObject(t.target)||this.isForeignObject(t.target,!0)||e||t.preventDefault()}},t.prototype.mouseMoveExtend=function(t,e){(this.tool instanceof iS||this.tool instanceof nS)&&this.tool.mouseMove(this.eventArgs),this.diagram.scrollSettings.canAutoScroll?this.checkAutoScroll(t):this.blocked||this.tool.mouseMove(this.eventArgs),this.eventArgs.target&&(this.hoverElement=this.eventArgs.target);var i=!(this.eventArgs.target instanceof Pw&&e instanceof Pw);this.tool instanceof Qb&&this.diagram.updatePortVisibility(this.hoverElement instanceof Pw?this.hoverElement:this.hoverNode,gg.Connect|gg.Hover,i),this.hoverElement instanceof Pw&&this.hoverNode instanceof Pw&&this.hoverNode&&this.hoverNode.id!==this.hoverElement.id&&this.diagram.updatePortVisibility(this.hoverNode,gg.Connect|gg.Hover,!0),this.hoverElement=i?null:e,this.hoverNode=i?null:e},t.prototype.checkAction=function(t){if("LabelSelect"===this.action&&this.eventArgs.sourceWrapper&&(this.eventArgs.sourceWrapper instanceof Jg||this.eventArgs.sourceWrapper instanceof Cb)){var e=this.commandHandler.findTarget(this.eventArgs.sourceWrapper,this.eventArgs.source);!Jr(this.diagram,e,!1,this.eventArgs.sourceWrapper)&&Nn(e)&&(this.action="LabelDrag",this.tool=this.getTool(this.action),this.tool.mouseDown(this.initialEventArgs))}else Nn(t)&&Cn(t)&&this.initialEventArgs&&this.initialEventArgs.source&&"Select"===this.action&&(!Jr(this.diagram,this.eventArgs.source,!1)&&this.eventArgs.source instanceof _w&&this.getMouseEventArgs(this.currentPosition,this.eventArgs),t instanceof ES&&(!(t instanceof ES)||Zr(this.currentPosition,t.sourcePoint,t.hitPadding)||Zr(this.currentPosition,t.targetPoint,t.hitPadding))||(this.action="Drag"),this.tool=this.getTool(this.action),this.tool.mouseDown(this.initialEventArgs))},t.prototype.isSwimlaneElements=function(t){return!t||!(t.isLane||t.isPhase||t.isHeader)},t.prototype.mouseMove=function(t,e){if(this.focus=!0,this.isScrolling)t.preventDefault();else if(Xn(this.diagram)||Fn(this.diagram)&&!Qn(this.diagram)){this.currentPosition=this.getMousePosition(t);var i=this.diagram.findObjectsUnderMouse(this.currentPosition),n=this.diagram.findObjectUnderMouse(i,this.action,this.inAction);!function(t,e){t.rulerSettings.showRulers&&(t.hRuler.drawRulerMarker(t.hRuler.element,e,t.scroller.horizontalOffset),t.vRuler.drawRulerMarker(t.vRuler.element,e,t.scroller.verticalOffset))}(this.diagram,this.currentPosition);var r=!1,o=void 0;if("touchmove"===t.type&&(e=t.touches)&&e.length>1&&(this.touchMoveList=ia(this.touchMoveList,0,e),"PinchZoom"!==this.action&&(r=!0)),!1===Gu.equals(this.currentPosition,this.prevPosition)||this.inAction){if(!1===this.isMouseDown||r){this.eventArgs={};var s=null;if(null!==n){if(s=this.diagram.findElementUnderMouse(n,this.currentPosition),n!==this.hoverElement){var a=this.getContent();this.hoverElement&&"Auto"===this.hoverElement.tooltip.openOn&&""!==a&&this.elementLeave(),this.diagram.updatePortVisibility(this.hoverElement,gg.Hover,!0),n instanceof Pw&&(this.hoverNode=n);var l=!0;!this.isSwimlaneElements(n)&&this.hoverElement&&this.isSwimlaneElements(this.hoverElement)&&(l=!1),this.hoverElement=l?n:this.hoverElement,l?this.elementEnter(this.currentPosition,!1):this.hoverElement=n}else this.hoverElement===n&&this.hoverElement.tooltip.content&&void 0!=this.diagram.tooltipObject&&"Mouse"===this.hoverElement.tooltip.relativeMode&&this.setTooltipOffset(this.currentPosition);s&&(o=this.commandHandler.findTarget(s,n))}this.action=this.diagram.findActionToBeDone(n,s,this.currentPosition,o),this.checkUserHandleEvent(jg.onUserHandleMouseEnter),this.checkPreviousAction(),this.getMouseEventArgs(this.currentPosition,this.eventArgs),this.tool=this.getTool(this.action),this.mouseEvents(),this.tool instanceof $b||this.tool instanceof nS||this.tool instanceof iS?this.tool.mouseMove(this.eventArgs):e&&this.tool instanceof Jb&&this.tool.mouseDown(this.eventArgs),this.updateCursor(),this.renderUmlHighLighter(this.eventArgs);var h=!1;(!this.hoverElement||this.tool instanceof Jb||!(n instanceof Pw)||!this.isSwimlaneElements(n)||0!==this.diagram.selectedItems.nodes.length&&Jr(this.diagram,this.hoverElement))&&(h=!0),this.diagram.updatePortVisibility(this.hoverElement,gg.Hover,h);var c=this.getContent();null===n&&this.hoverElement&&"Auto"===this.hoverElement.tooltip.openOn&&c&&(this.hoverElement=null,this.elementLeave()),r=!1}else{if(this.eventArgs.position=this.currentPosition,"Drag"===this.action&&!Jr(this.diagram,this.eventArgs.source,!1)&&this.eventArgs.source instanceof _w&&this.getMouseEventArgs(this.currentPosition,this.eventArgs),this.mouseEvents(),t.ctrlKey||t.shiftKey){var d=t.ctrlKey&&t.shiftKey?{ctrlKey:t.ctrlKey,shiftKey:t.shiftKey}:{ctrlKey:!0};this.eventArgs.info=d}this.checkAction(n);var p=this.getConnectorPadding(this.eventArgs);this.getMouseEventArgs(this.currentPosition,this.eventArgs,this.eventArgs.source,p),this.updateCursor(),this.inAction=!0,this.initialEventArgs=null,"Drag"!==this.action&&"Rotate"!==this.action||(this.diagram.diagramActions=this.diagram.diagramActions|Og.Interactions),this.mouseMoveExtend(t,n)}this.prevPosition=this.currentPosition,this.isForeignObject(t.target,!0)||t.preventDefault()}}},t.prototype.getContent=function(){var t,e=this.hoverElement instanceof Pw&&this.hoverElement.constraints&wg.Tooltip||this.hoverElement instanceof ES&&this.hoverElement.constraints&bg.Tooltip,i=this.hoverElement;i instanceof Pw&&i.children&&i.children.length>0&&(t=this.findIntersectChild(i));var n=e?this.hoverElement.tooltip.content:this.diagram.tooltip.content;return n=t?t.tooltip.content:n},t.prototype.findIntersectChild=function(t){for(var e,i=new Zu(this.currentPosition.x,this.currentPosition.y,8,8),n=0;n<t.children.length;n++)if((e=this.diagram.getObject(t.children[parseInt(n.toString(),10)])).wrapper.outerBounds.intersects(i))return e;return null},t.prototype.checkAutoScroll=function(t){var e=this.startAutoScroll(t);if(!e&&this.doingAutoScroll)this.doingAutoScroll=!1,clearInterval(this.timeOutValue);else if(e){if((this.tool instanceof Zb||this.tool instanceof $b||this.tool instanceof Xb||this.tool instanceof Gb||this.tool instanceof Yb||this.tool instanceof Qb)&&this.inAction){var i=this;this.diagram.scrollSettings.canAutoScroll&&e&&!this.doingAutoScroll&&(this.doingAutoScroll=!0,this.timeOutValue=setInterval(function(n){i.doAutoScroll(e,t,100)},100))}}else this.blocked=!this.tool.mouseMove(this.eventArgs)},t.prototype.mouseUp=function(t){this.checkUserHandleEvent(jg.onUserHandleMouseUp),"SVG"===this.diagram.mode&&Un(this.diagram)&&this.updateVirtualization(),this.diagram.previousSelectedObject=null,this.diagram.diagramRenderer.rendererActions=this.diagram.removeConstraints(this.diagram.diagramRenderer.rendererActions,Lg.DrawSelectorBorder);var e=t.touches;if(this.isScrolling)return this.isScrolling=!1,void t.preventDefault();if(!this.checkEditBoxAsTarget(t)&&Xn(this.diagram)||Fn(this.diagram)&&!Qn(this.diagram)){if(this.tool&&(!(this.tool instanceof iS||this.tool instanceof nS)||(this.tool instanceof iS||this.tool instanceof nS)&&2===t.detail)){if(!this.isForeignObject(t.target)&&this.isMouseDown&&document.getElementById(this.diagram.element.id+"content").focus(),!this.inAction&&3!==t.which&&"Drag"===this.action){this.action="Select";var i=this.diagram.selectedItems.nodes.concat(this.diagram.selectedItems.connectors),n=this.diagram.findObjectsUnderMouse(this.currentPosition),r=this.diagram.findObjectUnderMouse(n,this.action,this.inAction),o=!0;!t.ctrlKey&&this.isMouseDown&&this.diagram.selectedItems.nodes.length+this.diagram.selectedItems.connectors.length>1&&1===t.which&&!function(t){return!!(t&Og.PreventClearSelection)}(this.diagram.diagramActions)&&(o=!1,this.commandHandler.clearSelection()),Jr(this.diagram,r)&&o||this.commandHandler.selectObjects([r],void 0,i)}var s=!1,a=this.updateContainerProperties(),l=void 0;if(this.addUmlNode(),this.inAction=!1,this.isMouseDown=!1,this.currentPosition=this.getMousePosition(t),this.diagram.selectedObject.helperObject&&(l=this.updateContainerBounds()),this.tool&&(this.tool.prevPosition||this.tool instanceof eS)){this.eventArgs.position=this.currentPosition;var h=this.getConnectorPadding(this.eventArgs);this.getMouseEventArgs(this.currentPosition,this.eventArgs,this.eventArgs.source,h);var c=this.isMetaKey(t);if(c||t.shiftKey){var d=c&&t.shiftKey?{ctrlKey:c,shiftKey:t.shiftKey}:{ctrlKey:!0};this.eventArgs.info=d}if(this.diagram.diagramActions&Og.Interactions&&(this.diagram.diagramActions=this.diagram.diagramActions&~Og.Interactions),this.eventArgs.clickCount=t.detail,this.diagram.selectedObject.helperObject&&(this.tool instanceof Xb||this.tool instanceof Gb)){if(this.diagram.selectedObject.actualObject&&""!==this.diagram.selectedObject.actualObject.parentId){var p=this.diagram.getObject(this.diagram.selectedObject.actualObject.parentId);p&&p.isLane&&(this.commandHandler.isContainer=!0)}(s=this.diagram.lineRoutingModule&&this.diagram.nameTable.helper&&this.eventArgs.target&&this.eventArgs.target.isLane&&(this.eventArgs.source instanceof _w&&this.eventArgs.source.nodes.length>0&&""===this.eventArgs.source.nodes[0].parentId||""===this.eventArgs.source.parentId))&&(this.diagram.diagramActions=this.diagram.diagramActions|Og.PreventLaneContainerUpdate),this.tool.mouseUp(this.eventArgs,a.isPreventHistory)}else this.tool.mouseUp(this.eventArgs),!this.diagram.checkMenu||-1===window.navigator.userAgent.indexOf("Linux")&&-1===window.navigator.userAgent.indexOf("X11")||(!t.pageY&&t instanceof TouchEvent&&t.changedTouches?(window.getSelection().removeAllRanges(),this.diagram.contextMenuModule.contextMenu.open(t.changedTouches[0].pageY,t.changedTouches[0].pageX,this.diagram.element),t.preventDefault()):this.diagram.contextMenuModule.contextMenu.open(t.pageY,t.pageX,this.diagram.element),this.diagram.checkMenu=!1);a.hasStack&&this.diagram.endGroupAction()}if(l&&this.diagram.endGroupAction(),this.updateContainerBounds(!0),2!==this.eventArgs.clickCount&&(this.commandHandler.updateSelectedNodeProperties(this.eventArgs.source),s)){this.diagram.diagramActions=this.diagram.diagramActions&~Og.PreventLaneContainerUpdate;var u=this.eventArgs.source instanceof _w?this.eventArgs.source.nodes:[this.eventArgs.source];if(u)for(var g=0;g<u.length;g++)u[parseInt(g.toString(),10)].container||(this.commandHandler.dropChildToContainer(this.eventArgs.target,u[parseInt(g.toString(),10)]),this.commandHandler.renderContainerHelper(u[parseInt(g.toString(),10)]))}if(this.diagram.selectedObject&&this.diagram.selectedObject.helperObject&&(this.diagram.remove(this.diagram.selectedObject.helperObject),this.diagram.selectedObject={helperObject:void 0,actualObject:void 0},this.diagram.diagramActions&Og.PublicMethod&&this.diagram.constraints&Mg.LineRouting&&(this.diagram.diagramActions=this.diagram.diagramActions&~Og.PublicMethod)),this.blocked=!1,this.hoverElement){var m=gg.Connect;Jr(this.diagram,this.hoverElement)&&(m|=gg.Hover),this.diagram.updatePortVisibility(this.hoverElement,m,!0),this.hoverElement=null}this.touchStartList=null,this.touchMoveList=null,this.tool instanceof Kb||(this.tool=null)}e||t.preventDefault(),this.diagram.currentDrawingObject=void 0;var v=this.diagram.selectedItems,y=!1;if(this.commandHandler.isUserHandle(this.currentPosition)&&this.isForeignObject(t.target)&&(y=!0),!this.inAction&&v.wrapper&&v.userHandles.length>0&&!y&&this.diagram.renderSelector(!0),!this.inAction&&!this.diagram.currentSymbol&&this.eventArgs){var b=this.getTargetElement(),S={element:b.target instanceof pm?b.target:xs(this.eventArgs.source)||xs(this.diagram),position:xs(this.eventArgs.position),count:t.detail,actualObject:xs(this.eventArgs.actualObject),button:0===t.button?"Left":1===t.button?"Middle":"Right"};f()&&this.diagram.click&&(S=this.getBlazorClickEventArgs(S)),this.diagram.tool!==Cg.ZoomPan&&this.diagram.triggerEvent(jg.click,S)}this.eventArgs={}}this.diagram.diagramActions=this.diagram.diagramActions&~Og.PreventLaneContainerUpdate,this.eventArgs={},this.diagram.commandHandler.removeStackHighlighter()},t.prototype.getTargetElement=function(){var t,e=this.objectFinder.findObjectsUnderMouse(this.currentPosition,this.diagram,this.eventArgs,null,this.action),i=this.objectFinder.findObjectUnderMouse(this.diagram,e,this.action,this.inAction,this.eventArgs,this.currentPosition),n=null;null!==i&&(n=this.diagram.findElementUnderMouse(i,this.currentPosition))&&(t=this.commandHandler.findTarget(n,i));return{obj:i,sourceElement:n,target:t}},t.prototype.getConnectorPadding=function(t){var e,i=t.source;if(i&&i instanceof _w&&i.connectors.length){var n=i.connectors[0];e=n.constraints&bg.ConnectToNearByPort?n.connectionPadding:0}else i&&i instanceof ES&&"PortDraw"===this.action&&this.tool instanceof $b&&i.constraints&bg.ConnectToNearByPort&&(e=i.connectionPadding);return e||0},t.prototype.getBlazorClickEventArgs=function(t){return t={element:this.eventArgs.source?{selector:xs(this.eventArgs.source)}:{diagram:xs(this.diagram)},position:xs(this.eventArgs.position),count:t.count,actualObject:this.eventArgs.actualObject?{selector:xs(this.eventArgs.actualObject)}:{diagram:xs(this.diagram)},button:t.button},this.eventArgs.source instanceof Pw?(t.element.selector.nodes=[],t.element.selector.nodes.push(xs(this.eventArgs.source))):this.eventArgs.source instanceof ES&&(t.element.selector.connectors=[],t.element.selector.connectors.push(xs(this.eventArgs.source))),t},t.prototype.addSwimLaneObject=function(t){var e,i,n,r,o,s,a=0,l=t.shape,h=this.objectFinder.findObjectsUnderMouse(this.currentPosition,this.diagram,this.eventArgs,null,this.action);if(i||(i=this.diagram.findObjectUnderMouse(h,this.action,this.inAction)),this.diagram.clearSelectorLayer(),i&&!(i.isLane||i.isPhase||i.isHeader))for(var c=0;c<h.length;c++){var d=this.diagram.nameTable[h[parseInt(c.toString(),10)].id];(d.isLane||d.isPhase||d.isHeader)&&(i=d)}if(i&&(l.isPhase||l.isLane&&i.isLane)){var p=i.parentId;e=this.diagram.nameTable[""+p]}if(e&&(n=e.shape,o=l.isLane?l.orientation===n.orientation:l.orientation!==n.orientation),o&&i){if(n&&n.header&&n.hasHeader&&"Horizontal"===n.orientation&&(a=1),n.phases.length>0&&(a+=1),l.isPhase){s="Horizontal"===n.orientation?this.currentPosition.x-e.wrapper.bounds.x:this.currentPosition.y-(e.wrapper.bounds.y+n.header.height);var u={id:da(),offset:s,header:{annotation:{content:"Phase"}}};this.diagram.addPhases(e,[u])}else{var g={id:da(),style:l.lanes[0].style,header:{annotation:{content:l.lanes[0].header.annotation.content,style:l.lanes[0].header.annotation.style},style:l.lanes[0].header.style}};if("Horizontal"===l.orientation?g.height=l.lanes[0].height:g.width=l.lanes[0].width,"Horizontal"===n.orientation?(r=i.rowIndex?i.rowIndex:this.diagram.nameTable[i.parentId].rowIndex,i.wrapper.offsetY<this.currentPosition.y&&(r+=1)):(r=i.columnIndex?i.columnIndex:this.diagram.nameTable[i.parentId].columnIndex,this.currentPosition.x<i.wrapper.bounds.center.x&&(r-=1)),n.lanes.length>r)g.header.width=n.lanes[parseInt(r.toString(),10)].header.width,g.header.height=n.lanes[parseInt(r.toString(),10)].header.height;else{var m=void 0;m="Horizontal"===n.orientation?i.rowIndex<3?0:r-a-1:r-1,g.header.width=n.lanes[parseInt(m.toString(),10)].header.width,g.header.height=n.lanes[parseInt(m.toString(),10)].header.height}this.diagram.addLanes(e,[g],"Horizontal"===n.orientation?r-a:r)}this.commandHandler.select(e)}else if(l.isLane){var f={id:da(),width:t.width,height:t.height,addInfo:t.addInfo,shape:{type:"SwimLane",header:{annotation:{content:"Header"},height:50,style:l.lanes[0].header.style},phases:[{id:da(),header:{annotation:{content:"Phase"}}}],lanes:[{id:da(),height:t.height,width:t.width,style:l.lanes[0].style,header:{annotation:{content:l.lanes[0].header.annotation.content,style:l.lanes[0].header.annotation.style},style:l.lanes[0].header.style}}],orientation:l.orientation}};"Vertical"===l.orientation&&(f.width+=20),f.offsetX=this.currentPosition.x+f.width/2,f.offsetY=this.currentPosition.y+f.height/2,this.diagram.add(f)}},t.prototype.mouseLeave=function(t){if(this.tool&&this.inAction&&this.tool.mouseLeave(this.eventArgs),this.diagram.selectedObject.helperObject){this.updateContainerProperties();this.updateContainerBounds()&&this.diagram.endGroupAction()}this.eventArgs&&this.eventArgs.source&&(this.diagram.updatePortVisibility(this.eventArgs.source,gg.Hover,!0),this.hoverElement=null),this.eventArgs&&!this.eventArgs.source&&this.hoverElement&&(this.hoverElement=null),this.tool instanceof Qb&&this.eventArgs&&this.eventArgs.target&&this.eventArgs.target instanceof Pw&&(this.diagram.updatePortVisibility(this.eventArgs.target,gg.Hover|gg.Connect,!0),this.hoverElement=null);var e=this.diagram.selectedItems;e&&e.wrapper&&(Ts(this.diagram,e)||this.diagram.renderSelector(!0)),(this.diagram.diagramActions&Og.Interactions||this.diagram.diagramActions&Og.ToolAction)&&(this.diagram.diagramActions=this.diagram.diagramActions&~Og.ToolAction),this.isMouseDown=!1,this.focus=!1,this.touchStartList=null,this.touchMoveList=null,this.elementLeave(),this.commandHandler.removeSnap(),this.inAction=!1,this.eventArgs={},this.diagram.selectedObject&&this.diagram.selectedObject.helperObject&&(this.diagram.remove(this.diagram.selectedObject.helperObject),this.diagram.selectedObject={helperObject:void 0,actualObject:void 0}),this.tool=null,function(){var t,e,i=document.getElementsByClassName("e-d-ruler-marker");if(i&&i.length>0)for(e=i.length-1;e>=0;e--)(t=i[parseInt(e.toString(),10)])&&t.parentNode.removeChild(t)}(),"Rotate"===this.action&&this.diagram.diagramCanvas.classList.remove("e-diagram-rotate"),t.preventDefault()},t.prototype.mouseWheel=function(t){this.diagram.blazorActions|=$u.interaction;var e={event:t,cancel:!1};if(this.diagram.triggerEvent(jg.mouseWheel,e),!e.cancel){var i=t.wheelDelta>0||-40*t.detail>0,n=this.getMousePosition(t);this.diagram.tooltipObject.close();if(this.isMetaKey(t)){var r=this.diagram.scrollSettings.zoomFactor;i?this.diagram.zoomTo({type:"ZoomIn",zoomFactor:r,focusPoint:n}):this.diagram.zoomTo({type:"ZoomOut",zoomFactor:r,focusPoint:n}),t.preventDefault()}else{var o=this.diagram.scroller.horizontalOffset,s=this.diagram.scroller.verticalOffset,a=i?10:-10;this.tool&&(this.tool instanceof iS||this.tool instanceof nS)&&(this.eventArgs={},this.getMouseEventArgs(n,this.eventArgs),this.eventArgs.position=n,this.tool.mouseWheel(this.eventArgs)),this.diagram.scrollActions|=zg.Interaction;t.shiftKey||t.deltaX&&-0!==t.deltaX?this.diagram.scroller.zoom(1,a,0,n,!0):this.diagram.scroller.zoom(1,0,a,n,!0),this.diagram.scrollActions&=~zg.Interaction,o===this.diagram.scroller.horizontalOffset&&s===this.diagram.scroller.verticalOffset||t.preventDefault()}if(this.diagram.textEditing){if(this.diagram.isTriggerEvent=!0,this.diagram.activeLabel.parentId){var l=this.diagram.getObject(this.diagram.activeLabel.parentId);this.diagram.startTextEdit(l,this.diagram.activeLabel.id)}this.diagram.isTriggerEvent=!1}this.diagram.blazorActions=this.diagram.blazorActions&~$u.interaction}},t.prototype.keyDown=function(t){if(!(this.diagram.diagramActions&Og.TextEdit)&&!this.checkEditBoxAsTarget(t)||"Escape"===t.key||27===t.keyCode){var e=void 0,i=t.keyCode?t.keyCode:t.which,n=t.key,r=this.isMetaKey(t);if(this.diagram.commandManager&&this.diagram.commands)for(var o=this.diagram.commands,s=0,a=Object.keys(o);s<a.length;s++){var l=a[s];if((e=this.diagram.commands[""+l])&&(e.gesture.keyModifiers||e.gesture.key)&&(i===e.gesture.key||n===Tg[e.gesture.key]||this.isDeleteKey(n,l))&&(!e.gesture.keyModifiers&&!t.altKey&&!t.shiftKey&&!r||e.gesture.keyModifiers&&(r||t.altKey||t.shiftKey)&&this.altKeyPressed(e.gesture.keyModifiers)&&t.altKey||this.shiftKeyPressed(e.gesture.keyModifiers)&&t.shiftKey||this.ctrlKeyPressed(e.gesture.keyModifiers)&&r)){var h=Oa(e.canExecute);if(f()||h&&h({keyDownEventArgs:KeyboardEvent,parameter:e.parameter})){if(t.preventDefault(),"Escape"===t.key)if(this.checkEditBoxAsTarget(t))document.getElementById(this.diagram.diagramCanvas.id).focus();else if(this.diagram.currentSymbol){this.diagram.removeFromAQuad(this.diagram.currentSymbol),this.diagram.removeObjectsFromLayer(this.diagram.nameTable[this.diagram.currentSymbol.id]),this.diagram.removeElements(this.diagram.currentSymbol),_o(this.diagram.currentSymbol,this.diagram),delete this.diagram.nameTable[this.diagram.currentSymbol.id];this.diagram.droppable.sourceElement.draggable.intDestroy();var c=this.diagram.droppable.selectedSymbols;c.parentNode.removeChild(c);var d=this.diagram.diagramActions;this.diagram.diagramActions=this.diagram.addConstraints(d,Og.PreventClearSelection),this.tool.mouseUp(this.eventArgs),this.diagram.diagramRenderer.rendererActions=this.diagram.removeConstraints(this.diagram.diagramRenderer.rendererActions,Lg.DrawSelectorBorder),this.diagram.previousSelectedObject&&this.diagram.select(this.diagram.previousSelectedObject),this.action="Select",this.diagram.previousSelectedObject=null,this.diagram.currentSymbol=null,this.diagram.diagramActions=this.diagram.removeConstraints(d,Og.PreventClearSelection),this.isMouseDown=!1}else this.inAction&&this.diagram.drawingObject&&this.tool&&this.tool.inAction&&(this.tool.mouseUp(this.eventArgs),this.tool=null,this.isMouseDown=!1);if(e.execute&&this.diagram.tool!==Cg.ZoomPan){Oa(e.execute)({keyDownEventArgs:KeyboardEvent,parameter:e.parameter})}if(f()){var p={gesture:e.gesture};this.diagram.triggerEvent(jg.commandExecute,p)}break}}}}this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes:this.diagram.selectedItems.connectors;this.keyArgs={element:xs(this.diagram.selectedItems),key:t.key,keyCode:t.keyCode?t.keyCode:t.which},this.getKeyModifier(this.keyArgs,t),this.diagram.diagramActions&Og.TextEdit&&this.getlabel(this.keyArgs,t),this.diagram.triggerEvent(jg.keyDown,this.keyArgs)},t.prototype.getlabel=function(t,e){var i=this.diagram.activeLabel;t.target=this.diagram.element.id+"_editBox";var n=this.diagram.nameTable[i.parentId];if(document.getElementById(this.diagram.element.id+"_editBox")){t.text=document.getElementById(this.diagram.element.id+"_editBox").value;for(var r=0;r<n.annotations.length;r++)if(n.annotations[parseInt(r.toString(),10)].id===i.id){t.label=n.annotations[parseInt(r.toString(),10)];break}}},t.prototype.getKeyModifier=function(t,e){t.keyModifiers=Dg.None,e.ctrlKey&&(t.keyModifiers|=Dg.Control),e.shiftKey&&(t.keyModifiers|=Dg.Shift),e.altKey&&(t.keyModifiers|=Dg.Alt),this.isMetaKey(e)&&(t.keyModifiers|=Dg.Meta)},t.prototype.keyUp=function(t){this.keyArgs={element:xs(this.diagram.selectedItems),key:t.key,keyCode:t.keyCode?t.keyCode:t.which};this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes:this.diagram.selectedItems.connectors;this.getKeyModifier(this.keyArgs,t),this.diagram.diagramActions&Og.TextEdit&&this.getlabel(this.keyArgs,t),this.diagram.triggerEvent(jg.keyUp,this.keyArgs)},t.prototype.startAutoScroll=function(t){var e=this.getMousePosition(t);e.x*=this.diagram.scroller.currentZoom,e.y*=this.diagram.scroller.currentZoom;var i,n=ho(this.diagram),r=this.diagram.scrollSettings.autoScrollBorder;if("mozilla"===Np.info.name&&0===this.diagram.scroller.viewPortWidth){var o=document.getElementById(this.diagram.element.id).getBoundingClientRect();o.width!==this.diagram.scroller.viewPortWidth&&this.diagram.scroller.setViewPortSize(o.width,o.height)}return this.diagram.scrollSettings.canAutoScroll&&(e.x+this.diagram.scroller.horizontalOffset+r.right+n.width>=this.diagram.scroller.viewPortWidth-18?i="right":e.x+this.diagram.scroller.horizontalOffset<r.left?i="left":e.y+this.diagram.scroller.verticalOffset+r.bottom+n.height>this.diagram.scroller.viewPortHeight-18?i="bottom":e.y+this.diagram.scroller.verticalOffset<r.top&&(i="top")),i},t.prototype.doAutoScroll=function(t,e,i,n){var r=t;if((this.tool instanceof Zb||this.tool instanceof $b||this.tool instanceof Xb||this.tool instanceof Gb||this.tool instanceof Yb||this.tool instanceof Qb)&&this.inAction){var o=this.getMousePosition(e),s=(this.diagram.scrollSettings.autoScrollBorder,0),a=0,l=!1,h="",c={x:o.x,y:o.y};switch(this.tool instanceof Gb&&("ResizeSouthEast"===this.tool.corner||"ResizeSouthWest"===this.tool.corner||"ResizeNorthWest"===this.tool.corner||"ResizeNorthEast"===this.tool.corner)&&(l=!0,h=this.tool.corner),r){case"right":c.x=o.x+10,s=10,l&&("ResizeSouthEast"===h?(c.y=o.y+10,a=10):(c.y=o.y-10,a=-10));break;case"left":c.x=o.x-10,s=-10,l&&("ResizeNorthWest"===h?(c.y=o.y-10,a=-10):(c.y=o.y+10,a=10));break;case"bottom":c.y=o.y+10,a=10,l&&("ResizeSouthEast"===h?(c.x=o.x+10,s=10):(c.x=o.x-10,s=-10));break;case"top":c.y=o.y-10,a=-10,l&&("ResizeNorthEast"===h?(c.x=o.x+10,s=10):(c.x=o.x-10,s=-10))}this.eventArgs.position={x:c.x,y:c.y},this.currentPosition=this.eventArgs.position;var d=this.objectFinder.findObjectsUnderMouse(this.currentPosition,this.diagram,this.eventArgs,null,this.action);this.eventArgs.target=this.diagram.findObjectUnderMouse(d,this.action,this.inAction),this.tool.mouseMove(this.eventArgs),this.diagram.scrollActions|=zg.Interaction,this.diagram.scroller.zoom(1,-s,-a,o,!0),this.diagram.scrollActions&=~zg.Interaction}},t.prototype.mouseEvents=function(){for(var t=this.diagram.findObjectsUnderMouse(this.currentPosition),e=0;e<t.length;e++)this.eventArgs.actualObject===t[parseInt(e.toString(),10)]&&t.splice(e,1);var i={targets:{}};if(f()||(i={targets:xs(t),element:xs(this.eventArgs.source===this.eventArgs.actualObject?void 0:this.eventArgs.source),actualObject:xs(this.eventArgs.actualObject)}),f()&&(this.diagram.mouseEnter||this.diagram.mouseOver)&&(i.actualObject=VS(this.eventArgs.actualObject)===ES?{connector:xs(this.eventArgs.actualObject)}:{node:xs(this.eventArgs.actualObject)},i.targets.connector=[],i.targets.node=[],this.getBlazorCollectionObject(t,i)),this.lastObjectUnderMouse&&this.diagram.mouseLeave&&(!this.eventArgs.actualObject||this.lastObjectUnderMouse!==this.eventArgs.actualObject)){var n={targets:void 0,element:xs(this.lastObjectUnderMouse),actualObject:void 0};f()&&(n={targets:void 0,element:VS(this.lastObjectUnderMouse)===ES?{connector:xs(t)}:{node:xs(this.lastObjectUnderMouse)},actualObject:void 0}),this.diagram.triggerEvent(jg.mouseLeave,n),this.lastObjectUnderMouse=null}(!this.lastObjectUnderMouse&&this.eventArgs.source||this.lastObjectUnderMouse!==this.eventArgs.actualObject)&&(this.lastObjectUnderMouse=this.eventArgs.actualObject,void 0!==this.eventArgs.actualObject&&this.diagram.triggerEvent(jg.mouseEnter,i)),this.eventArgs.actualObject&&this.diagram.triggerEvent(jg.mouseOver,i)},t.prototype.getBlazorCollectionObject=function(t,e){if(t)for(var i=0;i<t.length;i++)VS(t[parseInt(i.toString(),10)])===ES?e.targets.connector.push(xs(t[parseInt(i.toString(),10)])):e.targets.node.push(xs(t[parseInt(i.toString(),10)]))},t.prototype.elementEnter=function(t,e){if(!e){var i=this.hoverElement instanceof Pw&&this.hoverElement.constraints&wg.Tooltip||this.hoverElement instanceof ES&&this.hoverElement.constraints&bg.Tooltip,n=this.getContent(),r=void 0;this.hoverElement&&this.hoverElement.children&&this.hoverElement.children.length>0&&(r=this.findIntersectChild(this.hoverElement)),"Auto"===this.hoverElement.tooltip.openOn&&""!==n&&xn(this.diagram,r||(i?this.hoverElement:void 0)),this.hoverElement.tooltip.content&&("Mouse"===this.hoverElement.tooltip.relativeMode?this.setTooltipOffset(t):(this.diagram.tooltipObject.offsetX=0,this.diagram.tooltipObject.offsetY=0));var o=this.diagram.findObjectsUnderMouse(this.currentPosition),s=this.diagram.findObjectUnderMouse(o,this.action,this.inAction);s instanceof Pw&&s.children&&s.children.length>0&&(s=r||s);var a=s.shape&&s.shape instanceof cw?"_content_native_element":"_groupElement",l=document.getElementById(s.id+a);"Auto"===this.hoverElement.tooltip.openOn&&""!==n&&(this.diagram.tooltipObject.close(),this.diagram.tooltipObject.openOn=this.hoverElement.tooltip.openOn,f()?this.diagram.tooltipObject.open(l,{}):this.diagram.tooltipObject.dataBind()),function(t,e){var i=0;return t instanceof ES?t.constraints&bg.Tooltip?i=t.constraints&bg.Tooltip:t.constraints&bg.InheritTooltip&&(i=e.constraints&Mg.Tooltip):t.constraints&wg.Tooltip?i=t.constraints&wg.Tooltip:t.constraints&wg.InheritTooltip&&(i=e.constraints&Mg.Tooltip),i}(this.hoverElement,this.diagram)&&"Auto"===this.hoverElement.tooltip.openOn&&(this.diagram.tooltipObject.target=this.hoverElement.id,"Mouse"===this.hoverElement.tooltip.relativeMode?this.diagram.tooltipObject.open(this.diagram.element):this.diagram.tooltipObject.open(l))}},t.prototype.elementLeave=function(){this.diagram.tooltipObject&&"Custom"!==this.diagram.tooltipObject.openOn&&this.diagram.tooltipObject.close()},t.prototype.setTooltipOffset=function(t){var e=zo(this.diagram,t,this.hoverElement);this.diagram.tooltipObject.offsetX=e.x,this.diagram.tooltipObject.offsetY=e.y},t.prototype.altKeyPressed=function(t){return!!(t&Dg.Alt)},t.prototype.ctrlKeyPressed=function(t){return!!(t&Dg.Control)},t.prototype.shiftKeyPressed=function(t){return!!(t&Dg.Shift)},t.prototype.scrolled=function(t){this.diagram.updateScrollOffset(),f()&&this.diagram.realActions&Ag.OverViewAction&&this.diagram.setBlazorDiagramProps(!1)},t.prototype.doubleClick=function(t){if(Xn(this.diagram)){var e=void 0,i=this.diagram.findObjectsUnderMouse(this.currentPosition),n=this.diagram.findObjectUnderMouse(i,this.action,this.inAction);if(null!==n&&Xn(this.diagram))if(e=this.diagram.findElementUnderMouse(n,this.currentPosition),this.tool&&(this.tool instanceof iS||this.tool instanceof nS)){xs(n)||xs(this.diagram),this.currentPosition,t.detail;this.tool.mouseUp(this.eventArgs),this.isMouseDown=!1,this.eventArgs={},this.tool=null,t.preventDefault()}else{var r=this.diagram.commandHandler.getObjectLayer(n.id);if(r&&!r.lock&&r.visible&&!(this.diagram.diagramActions&Og.TextEdit)){var o="";"TextAnnotation"===n.shape.shape&&(o=n.wrapper.children[1].id.split("_")[1]),this.diagram.startTextEdit(n,o||(e instanceof Jg?e.id.split(n.id+"_")[1]:void 0))}}var s={source:xs(n)||xs(this.diagram),position:this.currentPosition,count:t.detail};if(f()){var a=void 0;a=n instanceof Pw?{nodes:[xs(n)]}:n instanceof ES?{connectors:[xs(n)]}:xs(n),s={source:n?{selector:a}:{diagram:xs(this.diagram)},position:this.currentPosition,count:t.detail}}this.diagram.triggerEvent(jg.doubleClick,s)}},t.prototype.itemClick=function(t,e){var i=t;return Ur(this.diagram,i,!0)?i:null},t.prototype.inputChange=function(t){var e,i,n,r,o,s,a,l,h,c=document.getElementById(this.diagram.element.id+"_editBox"),d=document.getElementById(this.diagram.element.id+"_editTextBoxDiv"),p=c.value,u=p.split("\n");(!(r=this.diagram.selectedItems.nodes[0]?this.diagram.selectedItems.nodes[0]:this.diagram.selectedItems.connectors[0])&&this.tool instanceof Kb||r&&"SwimLane"===r.shape.type)&&(r=this.diagram.nameTable[this.diagram.activeLabel.parentId]),r&&("Text"!==r.shape.type&&r.annotations.length>0||"Text"===r.shape.type)&&(n=this.diagram.getWrapper(r.wrapper,this.diagram.activeLabel.id),e=(e=r.wrapper.bounds.width<n.bounds.width?r.wrapper.bounds.width:n.bounds.width)>90?e:90,a=Ps(n.style,p,void 0,void 0,e),i=Number(c.style.fontSize.split("px")[0]),u.length>1&&""===u[u.length-1]&&(a.height=a.height+i),l=this.diagram.scroller.transform,h=qn(this.diagram)?l.scale:1,s=(90>(s=a.width)?90:s)*h,o=(12>a.height?12:a.height)*h,r instanceof ES&&"Bezier"===r.type||(d.style.left=(n.bounds.center.x+l.tx)*l.scale-s/2-2.5+"px",d.style.top=(n.bounds.center.y+l.ty)*l.scale-o/2-3+"px"),d.style.width=s+"px",d.style.height=o+"px",c.style.minHeight="12px",c.style.minWidth="90px",c.style.width=s+"px",c.style.height=o+"px")},t.prototype.isAddTextNode=function(t,e){return!!(this.tool instanceof Kb||e)&&(this.tool=null,t&&!Yn(this.diagram)&&(this.diagram.drawingObject=void 0,this.diagram.currentDrawingObject=void 0),!(gs(this.diagram.nodes,t.id)||gs(this.diagram.connectors,t.id)||this.diagram.bpmnModule&&this.diagram.bpmnModule.textAnnotationConnectors.indexOf(t)>-1))},t.prototype.checkEditBoxAsTarget=function(t){return!(!t.target||t.target.id!==this.diagram.element.id+"_editBox")},t.prototype.getMouseEventArgs=function(t,e,i,n){e.position=t;var r,o;i?(o=this.diagram.findObjectsUnderMouse(this.currentPosition,i),r=this.diagram.findTargetObjectUnderMouse(o,this.action,this.inAction,e.position,i)):"Drag"===this.action||"ConnectorSourceEnd"===this.action||"SegmentEnd"===this.action||"OrthoThumb"===this.action||"BezierSourceThumb"===this.action||"BezierTargetThumb"===this.action||"ConnectorTargetEnd"===this.action||-1!==this.action.indexOf("Rotate")||-1!==this.action.indexOf("Resize")?(r=this.diagram.selectedItems,!this.diagram.currentSymbol&&"Drag"===this.action&&r&&this.diagram.selectedItems.nodes.length>0&&"SwimLane"===this.diagram.selectedItems.nodes[0].shape.type&&(o=this.diagram.findObjectsUnderMouse(this.currentPosition),r=this.diagram.findObjectUnderMouse(o,this.action,this.inAction))):(o=this.diagram.findObjectsUnderMouse(this.currentPosition),r=this.diagram.findObjectUnderMouse(o,this.action,this.inAction)),r&&r.isHeader&&(r=this.diagram.nameTable[r.parentId],this.eventArgs.actualObject=r);var s;if(r){var a=void 0,l=void 0,h=void 0;if(((s=this.diagram.findElementUnderMouse(r,this.currentPosition,n))&&r.ports&&r.ports.length&&!XS(r,s)||!s||!r)&&o&&o.length&&i instanceof _w)for(a=i.connectors[0],h=o.length-1;h>=0;h--)if((l=o[parseInt(h.toString(),10)])instanceof Pw&&a&&a.connectionPadding){if(r=l,s=this.diagram.findElementUnderMouse(r,this.currentPosition,n),a.constraints&bg.ConnectToNearByPort&&r&&r.ports&&r.ports.length&&XS(r,s))break;if(l instanceof Pw&&a&&a.connectionPadding&&l.wrapper.outerBounds.containsPoint(this.currentPosition)&&a.constraints&bg.ConnectToNearByNode&&!(a.constraints&bg.ConnectToNearByPort)){r=l,s=this.diagram.findElementUnderMouse(r,this.currentPosition,0);break}}}return i?(e.target=r,e.targetWrapper=s):(e.source=r,e.sourceWrapper=s),e.actualObject=this.eventArgs.actualObject,e.source instanceof _w&&void 0===e.actualObject&&(e.source.nodes.length>0||e.source.connectors.length>0)&&(e.actualObject=e.source.nodes.length>0?this.diagram.nameTable[e.source.nodes[0].id]:this.diagram.nameTable[e.source.connectors[0].id]),e.startTouches=this.touchStartList,e.moveTouches=this.touchMoveList,e},t.prototype.resetTool=function(){this.action="Select",this.hoverElement=null,this.hoverNode=null,this.tool=this.diagram.getTool(this.action),this.updateCursor()},t.prototype.getTool=function(t){switch(t){case"Select":return new Yb(this.commandHandler,!0);case"Drag":return new Xb(this.commandHandler);case"Rotate":return new qb(this.commandHandler);case"LayoutAnimation":return new tS(this.commandHandler);case"FixedUserHandle":return new Wb(this.commandHandler,!0);case"Hyperlink":return new eS(this.commandHandler);case"ResizeSouthEast":case"ResizeSouthWest":case"ResizeNorthEast":case"ResizeNorthWest":case"ResizeSouth":case"ResizeNorth":case"ResizeWest":case"ResizeEast":return new Gb(this.commandHandler,t);case"ConnectorSourceEnd":case"ConnectorTargetEnd":case"BezierSourceThumb":case"BezierTargetThumb":return new Qb(this.commandHandler,t);case"SegmentEnd":case"OrthoThumb":return new bI(this.commandHandler,t);case"Draw":var e=fo(this.diagram.drawingObject);if("Node"===e&&"Text"===this.diagram.drawingObject.shape.type)return new Kb(this.commandHandler);if("Connector"===e&&"Freehand"===this.diagram.drawingObject.type)return new aS(this.commandHandler);if("Node"===e&&("Polygon"===this.diagram.drawingObject.shape.shape||f()&&"Polygon"===this.diagram.drawingObject.shape.basicShape)&&!this.diagram.drawingObject.shape.points)return new iS(this.commandHandler);if("Node"===e||"Node"===e&&"Polygon"===this.diagram.drawingObject.shape.shape&&this.diagram.drawingObject.shape.points)return new Zb(this.commandHandler,this.diagram.drawingObject);if("Connector"===e&&"Polyline"===this.diagram.drawingObject.type)return new nS(this.commandHandler);if("Connector"===e)return new $b(this.commandHandler,"ConnectorSourceEnd",this.diagram.drawingObject);break;case"Pan":return new Jb(this.commandHandler,!1);case"PinchZoom":return new Jb(this.commandHandler,!0);case"PortDrag":return new Xb(this.commandHandler,"Port");case"PortDraw":return new $b(this.commandHandler,"ConnectorSourceEnd",this.diagram.drawingObject);case"LabelSelect":return new Yb(this.commandHandler,!0,"LabelSelect");case"LabelDrag":return new rS(this.commandHandler);case"LabelResizeSouthEast":case"LabelResizeSouthWest":case"LabelResizeNorthEast":case"LabelResizeNorthWest":case"LabelResizeSouth":case"LabelResizeNorth":case"LabelResizeWest":case"LabelResizeEast":return new oS(this.commandHandler,t);case"LabelRotate":return new sS(this.commandHandler)}return null},t.prototype.getCursor=function(t){var e=this.diagram.selectedItems.annotation?this.diagram.selectedItems.wrapper.children[0]:this.diagram.selectedItems;return to(t,this.diagram.selectedItems.annotation?e.rotateAngle+e.parentTransform:e.rotateAngle)},t.prototype.findElementUnderMouse=function(t,e,i){return this.objectFinder.findElementUnderSelectedItem(t,e,i)},t.prototype.findObjectsUnderMouse=function(t,e){return this.objectFinder.findObjectsUnderMouse(t,this.diagram,this.eventArgs,e)},t.prototype.findObjectUnderMouse=function(t,e,i){return this.objectFinder.findObjectUnderMouse(this.diagram,t,e,i,this.eventArgs,this.currentPosition)},t.prototype.findTargetUnderMouse=function(t,e,i,n,r){return this.objectFinder.findObjectUnderMouse(this.diagram,t,e,i,this.eventArgs,n,r)},t.prototype.findActionToBeDone=function(t,e,i,n){return qr(t,e,this.currentPosition,this.diagram,this.touchStartList,this.touchMoveList,n)},t.prototype.updateContainerBounds=function(t){var e=!1;if(this.diagram.selectedObject.helperObject&&this.diagram.selectedObject.actualObject instanceof Pw){var i=this.tool instanceof Gb,n=this.diagram.selectedObject.actualObject,r=this.diagram.nameTable[n.parentId];t?Pr(this.diagram,n,this.currentPosition,i):((!r||r&&"SwimLane"!==r.shape.type)&&this.diagram.updateDiagramObject(n),e=jr(this.diagram,n,this.currentPosition,i),this.diagram.updateSelector(),(n.isLane||n.isPhase)&&(this.diagram.clearSelection(),this.commandHandler.selectObjects([n])))}return e},t.prototype.updateContainerProperties=function(){var t,e,i,n,r=!1,o=!1,s={hasStack:!1,isPreventHistory:!1};if(this.diagram.selectedObject.helperObject){var a=this.diagram.findObjectsUnderMouse(this.currentPosition),l=this.diagram.findObjectUnderMouse(a,this.action,this.inAction);if(t=this.diagram.selectedObject.helperObject,(n=this.diagram.selectedObject.actualObject)instanceof Pw){if("SwimLane"===n.shape.type&&(i=sr(this.diagram,n.wrapper.children[0])),"SwimLane"!==n.shape.type&&n.parentId&&"SwimLane"===this.diagram.getObject(n.parentId).shape.type&&l instanceof Pw&&this.diagram.getObject(l.parentId)&&"SwimLane"!==this.diagram.getObject(l.parentId).shape.type&&(l=this.diagram.getObject(l.parentId)),"Drag"===this.currentAction&&n.container&&"Canvas"===n.container.type&&n.parentId&&"SwimLane"===this.diagram.getObject(n.parentId).shape.type&&l&&l!==n&&l.container&&"Canvas"===l.container.type&&l.isLane&&n.isLane&&l.parentId===n.parentId)gr(this.diagram,n,l,this.currentPosition),s.isPreventHistory=!0;else{var h=this.diagram.nameTable[n.parentId];if(!h||h&&"SwimLane"!==h.shape.type)if(h&&h.isLane&&n.constraints&wg.AllowMovingOutsideLane){var c=this.diagram.getObject(h.parentId),d=c.id+c.shape.lanes[0].id+"0",p=this.diagram.getObject(d),u=p.wrapper.bounds.x,g=p.wrapper.bounds.y,m=c.wrapper.bounds.bottomRight.x-u,f=c.wrapper.bounds.bottomRight.y-g;new Zu(u,g,m,f).containsPoint(this.currentPosition)&&(n.offsetX=t.offsetX,n.offsetY=t.offsetY,n.width=t.width,n.height=t.height,n.rotateAngle=t.rotateAngle)}else n.offsetX=t.offsetX,n.offsetY=t.offsetY,n&&n.shape&&"UmlClassifier"!==n.shape.type&&("Bpmn"!==n.shape.type||"Bpmn"===n.shape.type&&"TextAnnotation"!==n.shape.shape)&&(n.width=t.width,n.height=t.height),n.rotateAngle=t.rotateAngle;var v=void 0;if(h&&h.container&&"Stack"===h.container.type&&(this.diagram.startGroupAction(),o=!0),!l&&h&&h.container&&"Stack"===h.container.type&&"Drag"===this.action){var y=h.wrapper.children.indexOf(n.wrapper);if(v={targetIndex:void 0,target:void 0,sourceIndex:y,source:fa(n)},y>-1){var b=h.children;b.splice(b.indexOf(n.id),1),this.diagram.nameTable[n.id].parentId="",e=!0,h.wrapper.children.splice(y,1)}}if(Xr(n,l,this.diagram,this.action),(h=Ur(this.diagram,n)?this.diagram.nameTable[n.parentId]:this.diagram.nameTable[n.parentId]||n)&&h.container&&"Canvas"===h.container.type&&(h.wrapper.maxWidth=h.maxWidth=h.wrapper.actualSize.width,h.wrapper.maxHeight=h.maxHeight=h.wrapper.actualSize.height,r=!0),Ur(this.diagram,n,!0)&&h&&"Canvas"===h.container.type?Vr(this.diagram,n):s=this.updateContainerPropertiesExtend(h,n,i,t,s),this.diagram.lineRoutingModule&&this.diagram.constraints&Mg.LineRouting&&!Ur(this.diagram,n,!0)&&(n.children&&(this.diagram.realActions|=Ag.EnableGroupAction),this.diagram.nodePropertyChange(n,{},{width:n.width,height:n.height,offsetX:n.offsetX,offsetY:n.offsetY}),n.children&&(this.diagram.realActions&=~Ag.EnableGroupAction)),n.shape.lanes&&this.updateLaneChildNode(n),r&&(h.maxWidth=h.wrapper.maxWidth=void 0,h.maxHeight=h.wrapper.maxHeight=void 0),e){this.diagram.nodePropertyChange(h,{},{offsetX:h.offsetX,offsetY:h.offsetY,width:h.width,height:h.height,rotateAngle:h.rotateAngle});var S={redoObject:{sourceIndex:void 0,source:v.source},type:"StackChildPositionChanged",undoObject:v,category:"Internal"};this.diagram.diagramActions&Og.UndoRedo||this.diagram.addHistoryEntry(S)}n&&n.container&&("Stack"===n.container.type||"Canvas"===n.container.type&&""===n.parentId)&&(n&&n.shape&&"UmlClassifier"===n.shape.type&&(n.wrapper.measureChildren=!0),this.diagram.nodePropertyChange(n,{},{offsetX:n.offsetX,offsetY:n.offsetY,width:n.width,height:n.height,rotateAngle:n.rotateAngle}),n&&n.shape&&"UmlClassifier"===n.shape.type&&(n.wrapper.measureChildren=!1))}ur(i,this.diagram),s.hasStack=o}}return n&&(n.isPhase||n.isLane||n.shape&&"SwimLane"===n.shape.type)&&this.diagram.updateDiagramElementQuad(),s},t.prototype.updateLaneChildNode=function(t){for(var e=0;e<t.shape.lanes.length;e++)if(t.shape.lanes[parseInt(e.toString(),10)].children&&t.shape.lanes[parseInt(e.toString(),10)].children.length>0)for(var i=0;i<t.shape.lanes[parseInt(e.toString(),10)].children.length;i++){var n=t.shape.lanes[parseInt(e.toString(),10)].children[parseInt(i.toString(),10)].id,r=this.diagram.nameTable[""+n];r.offsetX=r.wrapper.offsetX,r.offsetY=r.wrapper.offsetY}},t.prototype.updateContainerPropertiesExtend=function(t,e,i,n,r){if("ResizeEast"===this.currentAction||"ResizeSouth"===this.currentAction||"SwimLane"===e.shape.type){var o=fa(e),s=!1;if(t&&t.container&&"Grid"===t.container.type){var a="SwimLane"===t.shape.type,l=a?t.wrapper.children[0]:t.wrapper,h=a?t.shape.padding:void 0,c=t.wrapper.bounds.x,d=t.wrapper.bounds.y;if(void 0!==e.columnIndex&&"Horizontal"===t.container.orientation&&(a&&e.isPhase||!a&&1===e.rowIndex)||"Vertical"===t.container.orientation&&(!a&&e.rowIndex>0&&e.columnIndex>0||a&&e.isLane)){if("Horizontal"===t.container.orientation&&e.isPhase&&e.wrapper.width>e.maxWidth&&(e.maxWidth=e.wrapper.width,e.wrapper.maxWidth=e.wrapper.width),mr(this.diagram,e,t,n),l.updateColumnWidth(e.columnIndex,n.width,!0,h),e.isPhase){var p=t.shape.phases[e.columnIndex].header.id,u=this.diagram.nameTable[""+p];u.maxWidth<n.width&&(u.maxWidth=n.width,u.wrapper.maxWidth=n.width)}"SwimLane"===t.shape.type&&(t.width=t.width?l.width:t.width,br(this.diagram,t),t.wrapper.width=t.width,i=sr(this.diagram,l,e.rowIndex))}else void 0!==e.rowIndex&&(s=!0,mr(this.diagram,e,t,n),l.updateRowHeight(e.rowIndex,n.height,!0,h),"SwimLane"===t.shape.type&&(t.height=t.height?l.height:t.height,t.wrapper.height=t.height,i=sr(this.diagram,l,e.rowIndex)));"SwimLane"===t.shape.type&&(r.isPreventHistory=!0),this.diagram.nodePropertyChange(t,{},{offsetX:t.offsetX,offsetY:t.offsetY,rotateAngle:t.rotateAngle}),this.diagram.drag(t,c-t.wrapper.bounds.x,d-t.wrapper.bounds.y)}else e&&e.shape&&"UmlClassifier"===e.shape.type&&(e.wrapper.measureChildren=!0),this.diagram.nodePropertyChange(e,{},{offsetX:e.offsetX,offsetY:e.offsetY,width:e.width,height:e.height,rotateAngle:e.rotateAngle}),e.wrapper.measureChildren=!1;if(e.wrapper.measure(new Qu(e.wrapper.width,e.wrapper.height)),e.wrapper.arrange(e.wrapper.desiredSize),"ResizeEast"===this.currentAction||"ResizeSouth"===this.currentAction){var g=fa(e),m={category:"Internal",type:s?"RowHeightChanged":"ColumnWidthChanged",undoObject:o,redoObject:g};this.diagram.addHistoryEntry(m)}}return ur(i,this.diagram),r},t.prototype.addUmlNode=function(){var t=this.diagram.selectedItems.nodes[0],e=this.diagram.findObjectsUnderMouse({x:this.currentPosition.x+20,y:this.currentPosition.y}),i=this.diagram.findObjectUnderMouse(e,this.action,this.inAction);if(i||(e=this.diagram.findObjectsUnderMouse({x:this.currentPosition.x-20,y:this.currentPosition.y}),i=this.diagram.findObjectUnderMouse(e,this.action,this.inAction)),t&&t.container&&"Stack"===t.container.type&&i&&i.parentId&&i.parentId===t.id){var n=i,r=_s(this.diagram.element.id);if(r.getElementById(r.id+"_stack_highlighter")){var o=t.wrapper.children.indexOf(i.wrapper)+1;this.diagram.enableServerDataBinding(!1);var s=new Pw(this.diagram,"nodes",{style:{fill:t.style.fill,strokeColor:"black"===t.style.strokeColor?"#ffffff00":t.style.strokeColor},annotations:i.annotations,verticalAlignment:"Stretch",horizontalAlignment:"Stretch",constraints:(wg.Default|wg.HideThumbs)&~(wg.Rotate|wg.Drag|wg.Resize),minHeight:25},!0);s.annotations[0].content=" + Name : Type";n.id.split("_");s.id=da()+s.id,s.parentId=t.id,s.zIndex=-1,s.umlIndex=o,this.diagram.startGroupAction();t.wrapper.children.indexOf(s.wrapper);this.diagram.enableServerDataBinding(!0),this.diagram.add(s),this.diagram.updateConnectorEdges(t),this.diagram.clearSelection(),this.diagram.select([this.diagram.nameTable[s.id]]),this.diagram.endGroupAction(),this.diagram.startTextEdit()}}},t}(),wI=function(){function t(){}return t.prototype.findObjectsUnderMouse=function(t,e,i,n,r){var o=[];n&&n instanceof _w&&n.nodes.length+n.connectors.length===1&&(n=n.nodes[0]||n.connectors[0]).children&&0===n.children.length&&(i.actualObject=n);for(var s,a,l,h,c,d=n&&n instanceof ES&&(n.constraints&bg.ConnectToNearByNode||n.constraints&bg.ConnectToNearByPort)&&n.connectionPadding||0,p={},u=0,g=e.spatialSearch.findObjects(new Zu(t.x-50-d,t.y-50-d,100+d,100+d));u<g.length;u++){var m=t;a=(C=g[u]).wrapper.outerBounds;var f=!C.rotateAngle&&a.containsPoint(m,d);if((C!==n||e.currentDrawingObject instanceof ES)&&C instanceof ES?C!==e.currentDrawingObject:C.wrapper.visible){if((I=e.commandHandler.getObjectLayer(C.id))&&!I.lock&&I.visible){if(c=p[I.zIndex]=p[I.zIndex]||[],C.rotateAngle){a=ga(s=C.wrapper);for(var v=0,y=s.children;v<y.length;v++)l=y[v],kt(h=Lt(),-(l.rotateAngle+l.parentTransform),l.offsetX,l.offsetY),m=At(h,t),ga(l).containsPoint(m,d)&&(f=!0)}if((!n||!1===Jr(e,C))&&En(C)&&(C instanceof ES?Do(C,t):f)){var b=C instanceof ES?C.hitPadding||0:0;this.findElementUnderMouse(C,t,d||b)&&"helper"!==C.id&&vs(C,"zIndex",c)}}}}for(var S=0,w=e.layers;S<w.length;S++)for(var I=w[S],x=0,M=o=o.concat(p[I.zIndex]||[]);x<M.length;x++){var C;if("Bpmn"===(C=M[x]).shape.type&&C.processId&&(!(e.eventHandler.tool instanceof Xb)||e.eventHandler.tool instanceof Xb&&Hn(C))){(L=o.indexOf(e.nameTable[C.processId]))>-1&&o.splice(L,1)}if("UmlClassifier"===C.shape.type&&C.container&&"Stack"===C.container.type){(L=o.indexOf(e.nameTable[e.nameTable[C.id].wrapper.children[0].id]))>-1&&o.splice(L,1)}}for(var N=0;N<o.length;N++){var E=e.nameTable[o[parseInt(N.toString(),10)].parentId];if(E)for(var D=this.findElementUnderMouse(E,t),T=0;T<E.ports.length;T++)if(D.id.match("_"+E.ports[parseInt(T.toString(),10)].id+"$")){var O=E.ports[parseInt(T.toString(),10)];if($n(O)||Zn(O))return o}for(;E;){var L;if(-1===(L=o.indexOf(E)))break;o.splice(L,1),E=e.nameTable[E.parentId]}}if(this.checkSwimlane(o,e),i&&!i.source)for(N=0;N<o.length;N++){var A=e.nameTable[o[parseInt(N.toString(),10)].parentId];if(A&&"SwimLane"===A.shape.type)for(T=0;T<o.length;T++){o[parseInt(T.toString(),10)]instanceof ES&&o.splice(N,1)}}return o},t.prototype.checkSwimlane=function(t,e){for(var i,n=0;n<t.length;n++){var r=t[parseInt(n.toString(),10)],o=void 0,s=void 0;r instanceof Pw&&(o=t[parseInt(n.toString(),10)].parentId,s=r),""===o&&(i="SwimLane"!==s.shape.type);var a=e.nameTable[""+o];if(a&&a.isLane&&e.nameTable[a.parentId].zIndex>r.zIndex&&(t[parseInt(n.toString(),10)]=a),n>0&&i&&s&&(s.isLane||s.isPhase||s.isHeader)&&t[parseInt(n.toString(),10)].zIndex<t[n-1].zIndex){var l=t[parseInt(n.toString(),10)];t[parseInt(n.toString(),10)]=t[n-1],t[n-1]=l}}if(t.length>=2)for(var h=t.length-1;h>=0;h--)if(t[parseInt(h.toString(),10)].parentId){var c=Ds(t[parseInt(h.toString(),10)],e,""),d=Ds(t[h-1],e,""),p=e.nameTable[""+c],u=e.nameTable[""+d];u&&c!==d&&p.zIndex<u.zIndex&&t.splice(h,1)}},t.prototype.isTarget=function(t,e,i){var n,r=e.selectedItems.connectors[0];if(!(n="ConnectorSourceEnd"===i?e.nameTable[r.targetID]:n=e.nameTable[r.sourceID])||(n.processId||t.processId)&&n.processId===t.processId||(n.processId!==t.processId&&(t=null),t&&t.parentId&&"UmlClassifier"===e.nameTable[t.parentId].shape.type&&(t=e.nameTable[t.parentId])),"ConnectorSourceEnd"===i&&r.targetID){var o=e.nameTable[r.targetID];if(o&&o.shape&&"TextAnnotation"===o.shape.shape){var s=r.id.split("_");("Bpmn"===o.shape.type&&"Bpmn"!==t.shape.type||s[0]===t.id||"TextAnnotation"===t.shape.shape)&&(t=null),t.parentId&&"UmlClassifier"===e.nameTable[t.parentId].shape.type&&(t=e.nameTable[t.parentId])}}return t},t.prototype.findObjectUnderMouse=function(t,e,i,n,r,o,s){var a,l,h="eventHandler",c=null;if(0!==e.length)if(s&&s instanceof _w&&s.nodes.length+s.connectors.length===1&&(s=s.nodes[0]||s.connectors[0]),"ConnectorSourceEnd"===i&&s||"PortDraw"===i||(Wn(t)||Yn(t))&&VS(t.drawingObject)===ES)for(var d=t.selectedItems.connectors[0],p=e.length-1;p>=0;p--){l=ps(e[parseInt(p.toString(),10)],!1),a=ps(e[parseInt(p.toString(),10)],!0);var u=t[""+h].tool,g=this.findTargetElement(e[parseInt(p.toString(),10)].wrapper,o,void 0);if("Draw"===i&&g&&e[parseInt(p.toString(),10)]instanceof Pw&&!XS(e[parseInt(p.toString(),10)],g)&&(u&&"ConnectorSourceEnd"===u.endPoint&&!Pn(e[parseInt(p.toString(),10)])||u&&"ConnectorTargetEnd"===u.endPoint&&!kn(e[parseInt(p.toString(),10)])))return c;if(e[parseInt(p.toString(),10)]instanceof Pw&&(Pn(e[parseInt(p.toString(),10)])||Rn(l)||kn(e[parseInt(p.toString(),10)])||jn(a)||"PortDraw"===i&&u instanceof Qb&&"ConnectorTargetEnd"===u.endPoint&&(kn(e[parseInt(p.toString(),10)])||jn(a))))return c=e[parseInt(p.toString(),10)],d&&(c=this.isTarget(c,t,i)),r.actualObject=c,c}else if("ConnectorTargetEnd"===i&&s){for(p=e.length-1;p>=0;p--)if(a=ps(e[parseInt(p.toString(),10)],!0),e[parseInt(p.toString(),10)]instanceof Pw&&(kn(e[parseInt(p.toString(),10)])||jn(a)))return c=e[parseInt(p.toString(),10)],c=this.isTarget(c,t,i),r.actualObject=c,c}else{if(s&&("Drag"===i||t[""+h].tool instanceof Xb)){var m=0;for(p=0;p<e.length;p++){var f=e[parseInt(p.toString(),10)];s!==f&&(f instanceof ES||!o||f.wrapper.bounds.containsPoint(o))&&Hn(f)&&(c?(c=m>=f.zIndex?c:f,m=Math.max(m,f.zIndex)):m=(c=f).zIndex)}return c&&"Bpmn"===c.shape.type&&(c=t.selectedItems.nodes.length>0&&"Bpmn"===t.selectedItems.nodes[0].shape.type?c:null),c&&(r.actualObject=c),c}if("Select"!==i&&"Pan"!==i||!t[""+h].tool)if("Pan"===i||"LayoutAnimation"===i){for(p=e.length-1;p>=0;p--)if(e[parseInt(p.toString(),10)]instanceof Pw||e[parseInt(p.toString(),10)]instanceof ES){g=this.findTargetElement(e[parseInt(p.toString(),10)].wrapper,o,void 0);if("Pan"===i||g&&(g.id.match("_icon_content_shape$")||g.id.match("_icon_content_rect$")))return e[parseInt(p.toString(),10)]}}else c=e[e.length-1],r&&c&&(r.actualObject=c);else{for(var p=e.length-1;p>=0;p--)if(e[parseInt(p.toString(),10)]instanceof ES){var v=e[p-1];if(e[p-1]instanceof Pw&&v.ports){if((g=this.findTargetElement(v.wrapper,o,void 0))&&(g.id.match("_icon_content_shape$")||g.id.match("_icon_content_rect$")))return v;for(var y=0;y<v.ports.length;y++)if(g&&g.id.match("_"+v.ports[parseInt(y.toString(),10)].id+"$")&&Zn(v.ports[parseInt(y.toString(),10)]))return v}}if(c=e[e.length-1],r.actualObject=c,!t[""+h].itemClick(c,!0)&&c.parentId)for(var b=c,S=Jr(t,b);b&&(!Jr(t,b)||S);)c=b,b=t.nameTable[b.parentId]}}return c},t.prototype.findElementUnderSelectedItem=function(t,e,i){return t instanceof _w?1!==t.nodes.length||t.connectors&&t.connectors.length?t.nodes&&!t.nodes.length||1!==t.connectors.length?null:this.findElementUnderMouse(t.connectors[0],e):this.findElementUnderMouse(t.nodes[0],e):this.findElementUnderMouse(t,e,i)},t.prototype.findElementUnderMouse=function(t,e,i){return this.findTargetElement(t.wrapper,e,i)},t.prototype.findTargetElement=function(t,e,i){for(var n=t.children.length-1;n>=0;n--){var r=t.children[parseInt(n.toString(),10)];if(r&&r.outerBounds.containsPoint(e,i||0)){if(r instanceof $g){var o=this.findTargetElement(r,e);if(o)return o}if(r.bounds.containsPoint(e,i||0)&&"Clip"!==r.style.textOverflow&&"Ellipsis"!==r.style.textOverflow)return r}}return t.bounds.containsPoint(e,i)&&"none"!==t.style.fill?t:null},t}(),II=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),xI=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},MI=function(t){function e(e,i,n,r){var o=t.call(this,e,i,n,r)||this;return o.objectZIndex=-1,o.zIndexTable={},o.objects=[],o}return II(e,t),xI([W("")],e.prototype,"id",void 0),xI([W(!0)],e.prototype,"visible",void 0),xI([W(!1)],e.prototype,"lock",void 0),xI([W()],e.prototype,"objects",void 0),xI([W()],e.prototype,"addInfo",void 0),xI([W(-1)],e.prototype,"zIndex",void 0),e}(Rp),CI=function(t,e,i,n){return new(i||(i=Promise))(function(r,o){function s(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){t.done?r(t.value):new i(function(e){e(t.value)}).then(s,a)}l((n=n.apply(t,e||[])).next())})},NI=function(t,e){function i(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}var n,r,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},EI=function(){function t(t){this.clipboardData={},this.diagramObject={},this.newSelectedObjects={},this.oldSelectedObjects={},this.connectorsTable=[],this.PreventConnectorSplit=!1,this.processTable={},this.deepDiffer=new Hb,this.isContainer=!1,this.canUpdateTemplate=!1,this.childTable={},this.parentTable={},this.blazor="Blazor",this.blazorInterop="sfBlazor",this.cloneGroupChildCollection=[],this.diagram=t}return Object.defineProperty(t.prototype,"snappingModule",{get:function(){return this.diagram.snappingModule},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"layoutAnimateModule",{get:function(){return this.diagram.layoutAnimateModule},enumerable:!0,configurable:!0}),t.prototype.startTransaction=function(t){this.state={element:this.diagram.selectedItems,backup:null},t&&this.diagram.protectPropertyChange(!0),Ys(this.diagram.element.id).style.pointerEvents="none"},t.prototype.endTransaction=function(t){this.state=null,t&&this.diagram.protectPropertyChange(!1),Ys(this.diagram.element.id).style.pointerEvents="all"},t.prototype.setFocus=function(){document.getElementById(this.diagram.element.id).focus()},t.prototype.showTooltip=function(t,e,i,n,r){var o,s,a=this,l=!1;if(t instanceof _w?1===t.nodes.length&&0===t.connectors.length?(o=t.nodes[0].id,t.nodes[0].shape&&t.nodes[0].shape instanceof cw&&(l=!0)):0===t.nodes.length&&1===t.connectors.length?o=t.connectors[0].id:s=document.getElementById(this.diagram.element.id+"_SelectorElement"):t instanceof Pw?(o=t.id,t.shape&&t.shape instanceof cw&&(l=!0)):o=t.id,h(s)&&!h(o)){var c=l?"_content_native_element":"_groupElement";s=document.getElementById(o+c)}if(r&&(this.diagram.tooltipObject.position="BottomCenter",this.diagram.tooltipObject.animation={open:{delay:0,duration:0}},this.diagram.tooltipObject.openDelay=0,this.diagram.tooltipObject.closeDelay=0),this.diagram.selectedItems.setTooltipTemplate){var d=void 0,p=Oa(this.diagram.selectedItems.setTooltipTemplate);p&&(d=p(t,this.diagram)),i=d instanceof HTMLElement?d.cloneNode(!0):d||i}f()&&r&&this.diagram.tooltipObject.close(),t.tooltip&&(this.diagram.tooltipObject.openOn=t.tooltip.openOn),this.diagram.tooltipObject.content=i,this.diagram.tooltipObject.offsetX=0,this.diagram.tooltipObject.offsetY=0,f()?this.diagram.tooltipObject.updateTooltip(s):this.diagram.tooltipObject.refresh(s),r&&setTimeout(function(){a.diagram.tooltipObject.open(s)},1)},t.prototype.connectorSplit=function(t,e){var i,n=t.id,r=fa(e);i=this.diagram.connectors.indexOf(e);var o;o=this.diagram.nodes.indexOf(t);var s=fa(t),a={},l={},h={offsetX:s.offsetX,offsetY:s.offsetY},c={sourceID:r.sourceID,sourcePoint:r.sourcePoint,sourcePortID:r.sourcePortID,targetID:r.targetID,targetPoint:r.targetPoint,targetPortID:r.targetPortID};a[parseInt(i.toString(),10)]=c,l[parseInt(o.toString(),10)]=h;var d={},p={},u={},g={};if(""!==r.sourceID&&""!==r.targetID?g.targetID=this.ConnectorTargetChange(e,n):""!==r.sourceID&&""===r.targetID?(this.nodeOffsetChange(u,s,e.targetPoint),g.targetID=this.ConnectorTargetChange(e,n)):(""===r.sourceID&&""===r.targetID||""===r.sourceID&&""!==r.targetID)&&(this.nodeOffsetChange(u,s,e.sourcePoint),g.sourceID=this.ConnectorSourceChange(e,n)),d[parseInt(i.toString(),10)]=g,p[parseInt(o.toString(),10)]=u,this.diagram.nodePropertyChange(t,h,u),this.diagram.updateSelector(),this.diagram.connectorPropertyChange(e,c,g),""!==r.sourceID&&""!==r.targetID){var m={id:"connector "+n,constraints:bg.Default|bg.AllowDrop,sourceID:n};""!==r.sourcePortID&&""!==r.targetPortID?(m.targetID=r.targetID,m.targetPortID=r.targetPortID):m.targetID=r.targetID,this.diagram.add(m)}var f={type:"PropertyChanged",redoObject:{nodes:p},undoObject:{nodes:l},category:"Internal"};this.diagram.addHistoryEntry(f);var v={type:"PropertyChanged",redoObject:{connectors:d},undoObject:{connectors:a},category:"Internal"};this.diagram.addHistoryEntry(v)},t.prototype.nodeOffsetChange=function(t,e,i){t.offsetX=e.offsetX=i.x,t.offsetY=e.offsetY=i.y},t.prototype.ConnectorTargetChange=function(t,e){return t.targetID=e,e},t.prototype.ConnectorSourceChange=function(t,e){return t.sourceID=e,e},t.prototype.closeTooltip=function(){this.diagram.tooltipObject.close()},t.prototype.canEnableDefaultTooltip=function(){return!!(this.diagram.selectedItems.constraints&fg.ToolTip)},t.prototype.updateSelector=function(){this.diagram.updateSelector()},t.prototype.updateConnectorValue=function(t){if(t.cancel){this.enableCloneObject(!0),this.ismouseEvents(!0),this.insertBlazorObject(t.connector);var e={},i={},n=this.diagram.nameTable[t.connector.id],r="ConnectorSourceEnd"===t.connectorEnd?"sourceID":"targetID",o="ConnectorSourceEnd"===t.connectorEnd?"sourcePortID":"targetPortID",s="ConnectorTargetEnd"===t.connectorEnd,a=s?t.newValue.connectorTargetValue:t.newValue.connectorSourceValue,l=s?t.oldValue.connectorTargetValue:t.oldValue.connectorSourceValue;i[""+r]=a.nodeId,i[""+o]=a.portId,e[""+r]=l.nodeId,e[""+o]=l.portId,t.cancel&&"ConnectorTargetEnd"!==t.connectorEnd&&(n.sourceID=l.nodeId,t.connector.sourcePortID&&(n.sourcePortID=l.portId),this.diagram.connectorPropertyChange(n,i,e)),t.cancel&&"ConnectorTargetEnd"===t.connectorEnd&&(t.connector.targetPortID&&(n.targetPortID=l.portId),n.targetID=l.nodeId,this.diagram.connectorPropertyChange(n,i,e))}},t.prototype.triggerEvent=function(t,e){return CI(this,void 0,void 0,function(){var i;return NI(this,function(n){switch(n.label){case 0:if(t===jg.drop||t===jg.positionChange||t===jg.connectionChange){if(this.diagram.currentSymbol)return[2];if(t===jg.drop&&(e.source=xs(this.diagram)),this.diagram.currentDrawingObject&&t!==jg.positionChange)return[2]}return[4,this.diagram.triggerEvent(t,e)];case 1:return i=n.sent(),[2,i]}})})},t.prototype.dragOverElement=function(t,e){if(this.diagram.currentSymbol){var i={element:xs(t.source),target:xs(t.target),mousePosition:xs(e),diagram:xs(this.diagram)};this.triggerEvent(jg.dragOver,i)}},t.prototype.disConnect=function(t,e,i){var n,r,o=f(),s={},a={};if(t instanceof _w?r=t.connectors[0]:t instanceof ES&&this.diagram.currentDrawingObject&&(r=this.diagram.currentDrawingObject),t&&r&&(Kr(this.diagram)||this.diagram.currentDrawingObject))if(f()&&this.diagram.insertValue(fa(r),!1),!e||"ConnectorSourceEnd"!==e&&"ConnectorTargetEnd"!==e){if("OrthoThumb"!==e&&"SegmentEnd"!==e&&(r.sourceID||r.targetID)){s={sourceID:r.sourceID,sourcePortID:r.sourcePortID,targetID:r.targetID,targetPortID:r.targetPortID},r.sourceID="",r.sourcePortID="",r.targetID="",r.targetPortID="",a={sourceID:r.sourceID,sourcePortID:r.sourcePortID,targetID:r.targetID,targetPortID:r.targetPortID};var l={connector:xs(r),oldValue:s,newValue:a,cancel:!1,state:"Changing",connectorEnd:e};f()&&(n=l={connector:xs(r),oldValue:{connector:xs(s)},newValue:{connector:xs(a)},cancel:!1,state:"Changed",connectorEnd:e}),o||this.triggerEvent(jg.connectionChange,l),l.cancel?(r.sourceID=s.sourceID,r.sourcePortID=s.sourcePortID,r.targetID=s.targetID,r.targetPortID=s.targetPortID):(this.diagram.connectorPropertyChange(r,s,a),this.diagram.updateDiagramObject(r),l={connector:r,oldValue:s,newValue:a,cancel:!1,state:"Changed",connectorEnd:e},f()&&(n=l={connector:xs(r),oldValue:{connector:s},newValue:{connector:a},cancel:!1,state:"Changed",connectorEnd:e}),o||this.triggerEvent(jg.connectionChange,l))}}else{var h="ConnectorSourceEnd"===e?"sourceID":"targetID",c="ConnectorSourceEnd"===e?"sourcePortID":"targetPortID";r[""+h]&&(s[""+h]=r[""+h],r[""+h]="",a[""+h]=r[""+h],(r.sourcePortID||r.targetPortID)&&(s[""+c]=r[""+c],r[""+c]="",a[""+c]=r[""+c]),n=this.connectionEventChange(r,s,a,e,i))}return n},t.prototype.connectionEventChange=function(t,e,i,n,r){var o,s=f(),a="ConnectorSourceEnd"===n?"sourceID":"targetID",l="ConnectorSourceEnd"===n?"sourcePortID":"targetPortID";if(this.enableCloneObject){var h=fa(o=this.diagram.nameTable[i[""+a]]);this.diagram.insertValue(h,!0)}var c,d={cancel:!1,state:"Changing",connectorEnd:n,connector:xs(t),oldValue:{nodeId:e[""+a],portId:e[""+l]},newValue:{nodeId:i[""+a],portId:i[""+l]}};if(f()&&(d={connector:xs(t),cancel:!1,state:"Changing",connectorEnd:n,oldValue:void 0,newValue:void 0},"ConnectorSourceEnd"===n?(d.oldValue={connectorSourceValue:{portId:e[""+l],nodeId:e[""+a]}},d.newValue={connectorSourceValue:{nodeId:i[""+a],portId:i[""+l]}}):(d.oldValue={connectorTargetValue:{nodeId:e[""+a],portId:e[""+l]}},d.newValue={connectorTargetValue:{nodeId:i[""+a],portId:i[""+l]}}),c=d),s||this.triggerEvent(jg.connectionChange,d),d.cancel||f()&&r?(t[""+a]=e[""+a],t[""+l]=e[""+l],i=e):(this.diagram.connectorPropertyChange(t,e,i),this.diagram.updateDiagramObject(t),d={connector:xs(t),oldValue:{nodeId:e[""+a],portId:e[""+l]},newValue:{nodeId:i[""+a],portId:i[""+l]},cancel:!1,state:"Changing",connectorEnd:n},f()&&(d={connector:xs(t),oldValue:void 0,newValue:void 0,cancel:!1,state:"Changing",connectorEnd:n},"ConnectorSourceEnd"===n?(d.newValue={connectorSourceValue:{portId:i[""+l],nodeId:i[""+a]}},d.oldValue={connectorSourceValue:{portId:e[""+l],nodeId:e[""+a]}}):(d.oldValue={connectorTargetValue:{nodeId:e[""+a],portId:e[""+l]}},d.newValue={connectorTargetValue:{portId:i[""+l],nodeId:i[""+a]}}),c=d)),this.enableCloneObject&&void 0===o){h=fa(o=this.diagram.nameTable[e[""+a]]);this.diagram.insertValue(h,!0)}return c},t.prototype.insertBlazorObject=function(t,e){var i,n;if(t instanceof _w){this.oldSelectedObjects=WS(this.diagram);for(var r=0;r<t.nodes.length;r++)i=this.diagram.getObject(t.nodes[parseInt(r.toString(),10)].id),this.diagram.insertValue(fa(i),!0);for(r=0;r<t.connectors.length;r++)n=this.diagram.getObject(t.connectors[parseInt(r.toString(),10)].id),this.diagram.insertValue(fa(n),!1)}else t=this.diagram.getObject(t.id),this.diagram.insertValue(fa(t),t instanceof Pw)},t.prototype.updatePropertiesToBlazor=function(t,e){this.enableCloneObject(!1),this.ismouseEvents(!1),this.getBlazorOldValues(t,e),this.updateBlazorSelector()},t.prototype.insertSelectedObjects=function(){this.oldSelectedObjects=WS(this.diagram)},t.prototype.findTarget=function(t,e,i,n){if(e instanceof Pw){if(t&&t.id===e.id+"_content")return e;if(i&&"Bpmn"===e.shape.type&&(!f()&&"Activity"===e.shape.shape||f()&&"Activity"===e.shape.bpmnShape)&&"Transaction"===e.shape.activity.subProcess.type){var r=e.shape.activity.subProcess.transaction;if(r.success.visible&&0===t.id.indexOf(e.id+"_success"))return r.success;if(r.cancel.visible&&0===t.id.indexOf(e.id+"_cancel"))return r.cancel;if(r.failure.visible&&0===t.id.indexOf(e.id+"_failure"))return r.failure}if(t instanceof rm)for(var o=0;o<e.ports.length;o++){var s=e.ports[parseInt(o.toString(),10)];if(t.id===e.id+"_"+s.id)return s}}if(!n){var a=void 0;for(o=0;o<e.annotations.length;o++)if(a=e.annotations[parseInt(o.toString(),10)],t.id===e.id+"_"+a.id)return a}return e},t.prototype.canDisconnect=function(t,e,i,n){var r;e.source instanceof _w?r=e.source.connectors[0]:e.source instanceof ES&&this.diagram.currentDrawingObject&&(r=this.diagram.currentDrawingObject);this.findTarget(e.targetWrapper,e.target,"ConnectorSourceEnd"===t,!0);var o="ConnectorSourceEnd"===t?"sourcePortID":"targetPortID";return r[""+("ConnectorSourceEnd"===t?"sourceID":"targetID")]!==n||r[""+o]!==i},t.prototype.changeAnnotationDrag=function(t){var e;if(t.source&&t.source.connectors&&t.source.connectors.length&&this.diagram.bpmnModule&&this.diagram.bpmnModule.textAnnotationConnectors.indexOf(t.source.connectors[0])>-1){t.source instanceof _w&&(e=t.source.connectors[0]);var i=e.id.split("_"),n=(i[i.length-1],i[i.length-3]||i[0]);if(t.target&&t.target.id!==n&&(!f()&&"TextAnnotation"!==t.target.shape.shape||f()&&"TextAnnotation"!==t.target.shape.bpmnShape)){this.diagram.startGroupAction();var r=this.diagram.nameTable[i[0]],o=this.getAnnotation(r,i[1]),s={id:i[1]+da(),angle:Gu.findAngle(e.intermediatePoints[0],e.intermediatePoints[1]),text:o.text,length:Gu.distancePoints(e.intermediatePoints[0],e.intermediatePoints[1]),shape:{shape:"TextAnnotation",type:"Bpmn"},nodeId:o.nodeId},a=new Mw(t.target.shape,"annotations",s,!0);this.diagram.bpmnModule.checkAndRemoveAnnotations(this.diagram.nameTable[e.targetID],this.diagram),this.diagram.refreshCanvasLayers(),a.id=i[1],this.diagram.addTextAnnotation(a,t.target),this.diagram.endGroupAction()}else e&&(e.sourceID=n,this.diagram.connectorPropertyChange(e,{},{sourceID:n}),this.diagram.updateDiagramObject(e))}},t.prototype.connect=function(t,e,i){var n,r,o,s,a={},l={};e.source instanceof _w?o=e.source.connectors[0]:e.source instanceof ES&&this.diagram.currentDrawingObject&&(o=this.diagram.currentDrawingObject);var h=this.findTarget(e.targetWrapper||e.sourceWrapper,e.target||e.actualObject,"ConnectorSourceEnd"===t,!0),c="ConnectorSourceEnd"===t?"sourceID":"targetID",d="ConnectorSourceEnd"===t?"sourcePortID":"targetPortID";if(h instanceof Pw)l[""+c]=o[""+c],o[""+c]=h.id,a[""+c]=o[""+c],l[""+d]=o[""+d],s=this.connectionEventChange(o,l,a,t,i);else{n=o[""+c],r=o[""+d],o[""+d]=h.id,o[""+c]=e.target&&e.target.id||e.actualObject.id,a[""+c]=o[""+c],a[""+d]=o[""+d];var p={connector:xs(o),oldValue:{nodeId:n,portId:r},newValue:{nodeId:a[""+c],portId:a[""+d]},cancel:!1,state:"Changing",connectorEnd:t};f()&&(p={connector:xs(o),oldValue:void 0,newValue:void 0,cancel:!1,state:"Changing",connectorEnd:t},"ConnectorSourceEnd"===t?(p.oldValue={connectorSourceValue:{portId:l[""+d],nodeId:l[""+c]}},p.newValue={connectorSourceValue:{portId:a[""+d],nodeId:a[""+c]}}):(p.newValue={connectorTargetValue:{portId:a[""+d],nodeId:a[""+c]}},p.oldValue={connectorTargetValue:{portId:l[""+d],nodeId:l[""+c]}}),s=p),this.triggerEvent(jg.connectionChange,p),p.cancel||f()&&i?(o[""+c]=n,o[""+d]=r,a[""+c]=n,a[""+d]=r):(this.diagram.connectorPropertyChange(o,l,a),this.diagram.updateDiagramObject(o),p={connector:xs(o),oldValue:{nodeId:n,portId:r},newValue:{nodeId:a[""+c],portId:a[""+d]},cancel:!1,state:"Changing",connectorEnd:t},f()&&(p={newValue:void 0,connector:xs(o),oldValue:void 0,cancel:!1,state:"Changing",connectorEnd:t},"ConnectorSourceEnd"===t?(p.oldValue={connectorSourceValue:{portId:l[""+d],nodeId:l[""+c]}},p.newValue={connectorTargetValue:{portId:a[""+d],nodeId:a[""+c]}}):(p.oldValue={connectorTargetValue:{portId:l[""+d],nodeId:l[""+c]}},p.newValue={connectorTargetValue:{portId:a[""+d],nodeId:a[""+c]}})))}return this.renderHighlighter(e,void 0,"ConnectorSourceEnd"===t),s},t.prototype.cut=function(){this.clipboardData.pasteIndex=0,this.diagram.undoRedoModule&&this.diagram.historyManager.startGroupAction(),this.clipboardData.clipObject=this.copyObjects(),this.diagram.undoRedoModule&&this.diagram.historyManager.endGroupAction(),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer()},t.prototype.UpdateBlazorDiagramModelLayers=function(t,e){var i=xs(t);if(window&&window.Blazor){var n={methodName:"UpdateBlazorDiagramModelLayers",diagramobj:JSON.stringify(i),isRemove:e};this.diagram.isLoading||window.sfBlazor.updateBlazorProperties(n,this.diagram)}},t.prototype.addLayer=function(t,e,i){void 0===i&&(i=!0),t.id=t.id||da(),t.zIndex=this.diagram.layers.length;var n=this.diagram.allowServerDataBinding;this.diagram.enableServerDataBinding(!1),t=new MI(this.diagram,"layers",t,!0),this.diagram.enableServerDataBinding(n),t.objectZIndex=-1,t.zIndexTable={},this.diagram.layers.push(t),i&&this.UpdateBlazorDiagramModelLayers(t,!1),this.diagram.layerZIndexTable[t.zIndex]=t.id,this.diagram.activeLayer=t;t.objects;if(e)for(var r=0;r<e.length;r++)this.diagram.add(e[parseInt(r.toString(),10)])},t.prototype.getObjectLayer=function(t){for(var e=this.diagram.layers,i=0;i<e.length;i++){if(e[parseInt(i.toString(),10)].objects.indexOf(t)>-1)return e[parseInt(i.toString(),10)]}return this.diagram.activeLayer},t.prototype.getLayer=function(t){for(var e=this.diagram.layers,i=0;i<e.length;i++)if(e[parseInt(i.toString(),10)].id===t)return e[parseInt(i.toString(),10)]},t.prototype.removeLayer=function(t,e){void 0===e&&(e=!0);var i=this.getLayer(t);if(i){for(var n=this.diagram.layers.indexOf(i),r=i.objects,o=r.length-1;o>=0;o--)this.diagram.unSelect(this.diagram.nameTable[r[parseInt(o.toString(),10)]]),this.diagram.remove(this.diagram.nameTable[r[parseInt(o.toString(),10)]]),"default_layer"!==i.id&&this.diagram.activeLayer.id===t&&(this.diagram.activeLayer=this.diagram.layers[this.diagram.layers.length-1]);e&&this.UpdateBlazorDiagramModelLayers(this.diagram.layers[parseInt(n.toString(),10)],!0),delete this.diagram.layerZIndexTable[i.zIndex],this.diagram.layers.splice(n,1),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer()}},t.prototype.moveObjects=function(t,e){var i=this.getLayer(e)||this.diagram.activeLayer;this.diagram.setActiveLayer(i.id);for(var n,r=0,o=t;r<o.length;r++){var s=o[r];this.getObjectLayer(s).objects.indexOf(s)>-1&&(n=this.diagram.nameTable[""+s],this.diagram.unSelect(n),this.diagram.remove(this.diagram.nameTable[""+s]),this.diagram.add(n))}},t.prototype.cloneLayer=function(t){this.diagram.layers;var e=this.getLayer(t);if(e){var i=[],n={id:t+"_"+da(),objects:[],visible:!0,lock:!1};this.addLayer(n,null,!0),n.zIndex=this.diagram.layers.length-1;for(var r=0,o=e.objects;r<o.length;r++){var s=o[r];i.push(this.diagram.nameTable[""+s])}this.paste(i)}},t.prototype.copy=function(){return this.clipboardData.pasteIndex=1,this.clipboardData.clipObject=this.copyObjects(),this.clipboardData.clipObject},t.prototype.copyObjects=function(){var t=[],e=[];if(this.clipboardData.childTable={},this.diagram.selectedItems.connectors.length>0){t=this.diagram.selectedItems.connectors;for(var i=0;i<t.length;i++){var n=void 0;n=this.diagram.bpmnModule&&this.diagram.bpmnModule.textAnnotationConnectors.indexOf(t[parseInt(i.toString(),10)])>-1?fa(this.diagram.nameTable[t[parseInt(i.toString(),10)].targetID]):fa(t[parseInt(i.toString(),10)]),e.push(n)}}if(this.diagram.selectedItems.nodes.length>0){t=t.concat(this.diagram.selectedItems.nodes);for(i=0;i<this.diagram.selectedItems.nodes.length;i++)if(!t[parseInt(i.toString(),10)].isPhase){var r=fa(this.diagram.selectedItems.nodes[parseInt(i.toString(),10)]);r.wrapper&&r.offsetX!==r.wrapper.offsetX&&(r.offsetX=r.wrapper.offsetX),r.wrapper&&r.offsetY!==r.wrapper.offsetY&&(r.offsetY=r.wrapper.offsetY),this.copyProcesses(r),e.push(fa(r));var o=Lt();if(kt(o,-r.rotateAngle,r.offsetX,r.offsetY),r.children){for(var s=this.clipboardData.childTable,a=void 0,l=this.getAllDescendants(r,[],!0),h=0;h<l.length;h++){var c=s[(a=this.diagram.nameTable[l[parseInt(h.toString(),10)].id]).id]=fa(a),d=At(o,{x:c.wrapper.offsetX,y:c.wrapper.offsetY});a instanceof Pw&&(c.offsetX=d.x,c.offsetY=d.y,c.rotateAngle-=r.rotateAngle)}this.clipboardData.childTable=s}if("SwimLane"===r.shape.type){var p=this.diagram.getObject(this.diagram.selectedItems.nodes[parseInt(i.toString(),10)].id),u=(s=this.clipboardData.childTable,sr(this.diagram,p.wrapper.children[0]));for(h=0;h<u.length;h++){var g=this.diagram.getObject(u[parseInt(h.toString(),10)]);s[g.id]=fa(g)}}if(r&&r.isLane){s=this.clipboardData.childTable,p=this.diagram.getObject(r.parentId);var m=zr(r,this.diagram);s[r.id]=fa(m),s[r.id].width=p.wrapper.actualSize.width}}}if(0===this.clipboardData.pasteIndex){this.startGroupAction();for(var f=0,v=t;f<v.length;f++){var y=v[f];this.diagram.nameTable[y.id]&&(this.diagram.bpmnModule&&this.diagram.bpmnModule.textAnnotationConnectors.indexOf(y)>-1?this.diagram.remove(this.diagram.nameTable[y.targetID]):this.diagram.remove(y))}this.endGroupAction()}return this.sortByZIndex(e,"zIndex"),e},t.prototype.copyProcesses=function(t){if("Bpmn"===t.shape.type&&t.shape.activity&&t.shape.activity.subProcess.processes&&t.shape.activity.subProcess.processes.length>0){for(var e=0,i=t.shape.activity.subProcess.processes;e<i.length;e++){var n=i[e];this.processTable[""+n]=fa(this.diagram.nameTable[""+n]),this.processTable[""+n].shape.activity.subProcess.processes&&this.processTable[""+n].shape.activity.subProcess.processes.length>0&&this.copyProcesses(this.processTable[""+n])}this.clipboardData.processTable=this.processTable}},t.prototype.group=function(){this.oldSelectedObjects=WS(this.diagram);var t=this.diagram.isProtectedOnChange;this.diagram.protectPropertyChange(!0),this.diagram.diagramActions=this.diagram.diagramActions|Og.Group;var e={};e.id="group"+da(),(e=new Pw(this.diagram,"nodes",e,!0)).children=[];for(var i=this.diagram.selectedItems.nodes.concat(this.diagram.selectedItems.connectors).sort(function(t,e){return t.zIndex-e.zIndex}),n=0;n<i.length;n++)i[parseInt(n.toString(),10)].parentId||e.children.push(i[parseInt(n.toString(),10)].id);var r=this.diagram.add(e);r&&this.select(r);var o={type:"Group",undoObject:e,redoObject:e,category:"Internal"};this.addHistoryEntry(o),this.diagram.diagramActions=this.diagram.diagramActions&~Og.Group,this.diagram.protectPropertyChange(t),this.updateBlazorSelector()},t.prototype.unGroup=function(t){var e=this.diagram.isProtectedOnChange;this.diagram.protectPropertyChange(!0),this.diagram.diagramActions=this.diagram.diagramActions|Og.Group;var i=[];t?i.push(t):i=this.diagram.selectedItems.nodes,this.diagram.startGroupAction();for(var n=0;n<i.length;n++){for(var r=i[parseInt(n.toString(),10)],o=fa(r),s=[],a=0;a<r.children.length;a++)s.push(r.children[parseInt(a.toString(),10)]);if(r.children){r.ports&&r.ports.length>0&&this.diagram.removePorts(r,r.ports),r.annotations&&r.annotations.length>0&&(!f()||f()&&""!==r.annotations[0].content)&&this.diagram.removeLabels(r,r.annotations);for(var l=this.diagram.nameTable[r.parentId],h=r.children.length-1;h>=0;h--)this.diagram.nameTable[r.children[parseInt(h.toString(),10)]].parentId="",this.diagram.deleteChild(this.diagram.nameTable[r.children[parseInt(h.toString(),10)]],r),r.parentId&&r.children[parseInt(h.toString(),10)]&&this.diagram.addChild(l,r.children[parseInt(h.toString(),10)]);this.resetDependentConnectors(r.inEdges,!0),this.resetDependentConnectors(r.outEdges,!1);var c={type:"UnGroup",undoObject:o,redoObject:o,category:"Internal"};this.diagram.diagramActions&Og.UndoRedo||this.addHistoryEntry(c),r.parentId&&this.diagram.deleteChild(r,l)}this.diagram.removeNode(r,s),this.clearSelection()}this.diagram.endGroupAction(),this.diagram.diagramActions=this.diagram.diagramActions&~Og.Group,this.diagram.protectPropertyChange(e)},t.prototype.resetDependentConnectors=function(t,e){for(var i=0;i<t.length;i++){var n=this.diagram.nameTable[t[parseInt(i.toString(),10)]],r=fa(n),o=void 0;e?(n.targetID="",n.targetPortID="",o={targetID:n.targetID,targetPortID:n.targetPortID}):(n.sourceID="",n.sourcePortID="",o={sourceID:n.sourceID,sourcePortID:n.sourcePortID}),this.diagram.connectorPropertyChange(n,{},o);var s={type:"ConnectionChanged",undoObject:{connectors:[r],nodes:[]},redoObject:{connectors:[fa(n)],nodes:[]},category:"Internal"};this.diagram.diagramActions&Og.UndoRedo||this.addHistoryEntry(s)}},t.prototype.paste=function(t){if(t||this.clipboardData.clipObject){this.diagram.protectPropertyChange(!0);var e=t?this.getNewObject(t):this.clipboardData.clipObject;if(e){var i=1!==e.length,n=!1,r={},o={};0!==this.clipboardData.pasteIndex&&this.clearSelection(),this.diagram.undoRedoModule&&(n=!0,this.diagram.historyManager.startGroupAction());for(var s=0,a=e;s<a.length;s++){r[(c=a[s]).id]=c}var l=[];i&&(this.diagram.isServerUpdate=!0);for(var h=0;h<e.length;h++){var c=e[parseInt(h.toString(),10)];if(VS(c)===ES){var d=fa(c),p=d.sourceID;d.sourceID="",r[""+p]&&o[""+p]&&(d.sourceID=o[""+p]),p=d.targetID,d.targetID="",r[""+p]&&o[""+p]&&(d.targetID=o[""+p]);var u=this.cloneConnector(d,i);l.push(u),o[c.id]=u.id}else{var g=this.cloneNode(c,i);if(f()&&g&&g.children&&g.children.length>0?(l=l.concat(this.cloneGroupChildCollection),this.cloneGroupChildCollection=[]):l.push(g),g){o[c.id]=g.id;var m=c.inEdges;if(m)for(var v=0,y=m;v<y.length;v++){if(r[""+(w=y[v])]&&o[""+w]){(I=this.diagram.nameTable[o[""+w]]).targetID=o[c.id],this.diagram.connectorPropertyChange(I,{targetID:"",targetPortID:""},{targetID:I.targetID,targetPortID:I.targetPortID})}}if(m=c.outEdges)for(var b=0,S=m;b<S.length;b++){var w;if(r[""+(w=S[b])]&&o[""+w]){var I;(I=this.diagram.nameTable[o[""+w]]).sourceID=o[c.id],this.diagram.connectorPropertyChange(I,{sourceID:"",sourcePortID:""},{sourceID:I.sourceID,sourcePortID:I.sourcePortID})}}}}}i&&(this.diagram.isServerUpdate=!1,this.diagram.UpdateBlazorDiagramModelCollection(e[0],l),this.getBlazorOldValues(),this.diagram.select(l,!0)),!0===n&&(this.diagram.historyManager.endGroupAction(),n=!1),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer(),this.clipboardData.pasteIndex++,this.diagram.protectPropertyChange(!1)}}},t.prototype.getNewObject=function(t){var e,i=[];this.clipboardData.pasteIndex=1;for(var n=0;n<t.length;n++)e=fa(t[parseInt(n.toString(),10)]),i.push(e);return i},t.prototype.cloneConnector=function(t,e){var i=fa(t);this.translateObject(i),i.zIndex=-1;var n=this.diagram.add(i);return this.diagram.isServerUpdate||this.selectObjects([n],e),n},t.prototype.cloneNode=function(t,e,i,n){var r,o,s={},a=fa(t),l=this.diagram.nameTable[t.parentId];if(t.shape&&"Bpmn"===t.shape.type&&t.shape.activity&&t.shape.activity.subProcess.processes&&t.shape.activity.subProcess.processes.length&&(o=a.shape.activity.subProcess.processes,a.zIndex=-1,a.shape.activity.subProcess.processes=void 0),t.shape&&"SwimLane"===t.shape.type)Cr(t,this.diagram,this.clipboardData);else if(l&&"SwimLane"===l.shape.type)Cr(fa(l),this.diagram,this.clipboardData,t,!0);else if(!t.children||!t.children.length||i&&i.length)if(t.shape&&(!f()&&"TextAnnotation"===t.shape.shape||f()&&"TextAnnotation"===t.shape.bpmnShape)&&-1!==t.id.indexOf("_textannotation_")&&this.diagram.nameTable[t.id])for(var h=t.id.split("_textannotation_"),c=this.diagram.nameTable[t.id],d=0;d<c.inEdges.length;d++){var p=this.diagram.nameTable[c.inEdges[parseInt(d.toString(),10)]];if(p){var u=this.diagram.nameTable[p.sourceID],g=this.getAnnotation(u,h[1]),m={id:h[1]+da(),angle:g.angle,text:g.text,length:g.length,shape:{shape:"TextAnnotation",type:"Bpmn"},nodeId:g.nodeId};this.diagram.addTextAnnotation(m,u)}}else this.translateObject(a,n),a.zIndex=-1,i&&(a.children=i),r=this.diagram.add(a);else r=this.cloneGroup(t,e);for(var v=0,y=Object.keys(s);v<y.length;v++){var b=y[v];this.diagram.add(s[""+b])}return o&&o.length&&(r.shape.activity.subProcess.processes=o,this.cloneSubProcesses(r)),r&&!this.diagram.isServerUpdate&&this.selectObjects([r],e),r},t.prototype.getAnnotation=function(t,e){var i=t.shape.annotations;if(i&&i.length)for(var n=0;n<=i.length;n++)if(i[parseInt(n.toString(),10)].id===e)return i[parseInt(n.toString(),10)]},t.prototype.cloneSubProcesses=function(t){var e=[],i={};if("Bpmn"===t.shape.type&&t.shape.activity&&t.shape.activity.subProcess.processes&&t.shape.activity.subProcess.processes.length)for(var n=t.shape.activity.subProcess.processes,r=0;r<n.length;r++){for(var o=this.diagram.nameTable[n[parseInt(r.toString(),10)]]||this.clipboardData.processTable[n[parseInt(r.toString(),10)]],s=0,a=o.outEdges;s<a.length;s++){var l=a[s];e.indexOf(l)<0&&e.push(l)}for(var h=0,c=o.inEdges;h<c.length;h++){l=c[h];e.indexOf(l)<0&&e.push(l)}var d=fa(this.clipboardData.processTable[n[parseInt(r.toString(),10)]]);d.processId=t.id;var p=this.cloneNode(d,!1);i[n[parseInt(r.toString(),10)]]=p.id,n[parseInt(r.toString(),10)]=p.id,this.diagram.addProcess(p,t.id);for(var u=0,g=e;u<g.length;u++){var m=g[u],f=fa(this.diagram.nameTable[""+m]||this.diagram.connectorTable[""+m]);i[f.sourceID]&&i[f.targetID]&&(f.zIndex=-1,f.id+=da(),f.sourceID=i[f.sourceID],f.targetID=i[f.targetID],e.splice(e.indexOf(m),1),this.diagram.add(f))}}},t.prototype.cloneGroup=function(t,e){var i,n=[],r=[],o=[],s=[];r=r.concat(t.children);var a=da(),l=[];if(this.diagram.blazorActions|=$u.GroupClipboardInProcess,this.clipboardData.childTable||t.children.length>0)for(var h=0;h<r.length;h++){var c=void 0;(c=this.clipboardData.childTable?this.clipboardData.childTable[r[parseInt(h.toString(),10)]]:this.diagram.nameTable[r[parseInt(h.toString(),10)]]).parentId="",c&&(VS(c)===ES?o.push(c):(i=this.cloneNode(c,e,void 0,a),s.push(c.id),n.push(i.id),l.push(i)))}for(var d=0;d<o.length;d++){if(o[parseInt(d.toString(),10)].sourceID||o[parseInt(d.toString(),10)].targetID)for(var p=0;p<s.length;p++)o[parseInt(d.toString(),10)].sourceID===s[parseInt(p.toString(),10)]&&(o[parseInt(d.toString(),10)].sourceID+=a),o[parseInt(d.toString(),10)].targetID===s[parseInt(p.toString(),10)]&&(o[parseInt(d.toString(),10)].targetID+=a);i=this.cloneConnector(o[parseInt(d.toString(),10)],e),n.push(i.id),l.push(i)}var u=this.cloneNode(t,e,n);return l.push(u),u&&u.container&&u.shape&&"UmlClassifier"===u.shape.type&&(this.diagram.updateDiagramObject(u),u.wrapper.measure(new Qu)),this.diagram.blazorActions&=~$u.GroupClipboardInProcess,this.diagram.isServerUpdate?this.cloneGroupChildCollection=l:this.diagram.UpdateBlazorDiagramModelCollection(void 0,l,void 0,!0),u},t.prototype.translateObject=function(t,e){t.id+=e||da();var i=10*this.clipboardData.pasteIndex;if(VS(t)===ES){if(t.sourcePoint={x:t.sourcePoint.x+i,y:t.sourcePoint.y+i},t.targetPoint={x:t.targetPoint.x+i,y:t.targetPoint.y+i},"Bezier"===t.type)for(var n=t.segments,r=0;r<n.length;r++)Gu.isEmptyPoint(n[parseInt(r.toString(),10)].point1)||(n[parseInt(r.toString(),10)].point1={x:n[parseInt(r.toString(),10)].point1.x+i,y:n[parseInt(r.toString(),10)].point1.y+i}),Gu.isEmptyPoint(n[parseInt(r.toString(),10)].point2)||(n[parseInt(r.toString(),10)].point2={x:n[parseInt(r.toString(),10)].point2.x+i,y:n[parseInt(r.toString(),10)].point2.y+i});if(("Straight"===t.type||"Bezier"===t.type)&&t.segments&&t.segments.length>0)for(n=t.segments,r=0;r<n.length-1;r++)n[parseInt(r.toString(),10)].point.x+=i,n[parseInt(r.toString(),10)].point.y+=i}else t.offsetX+=i,t.offsetY+=i},t.prototype.drawObject=function(t){var e;f()&&(e=this.diagram.getProtectPropertyChangeValue(),this.diagram.protectPropertyChange(!0));var i;t&&t.shape&&"Text"===t.shape.type&&(t.width=this.diagram.drawingObject.width?this.diagram.drawingObject.width:50,t.height=this.diagram.drawingObject.height?this.diagram.drawingObject.height:20);for(var n=fa(this.diagram.drawingObject),r=0,o=Object.keys(t);r<o.length;r++){var s=o[r];n[""+s]=t[""+s]}return VS(this.diagram.drawingObject)===Pw||VS(this.diagram.drawingObject)===ES&&"Freehand"===this.diagram.drawingObject.type&&"Bezier"!==t.type?(i=new Pw(this.diagram,"nodes",n,!0)).id=(this.diagram.drawingObject.id||"node")+da():(i=new ES(this.diagram,"connectors",n,!0),f()&&!this.diagram.drawingObject&&i.type,i.id=(this.diagram.drawingObject&&this.diagram.drawingObject.id?this.diagram.drawingObject.id:"connector")+da()),f()&&No(i,n,VS(this.diagram.drawingObject)===Pw?this.diagram.nodeDefaults:this.diagram.connectorDefaults),this.diagram.initObject(i),this.diagram.updateDiagramObject(i),this.diagram.currentDrawingObject=i,f()&&this.diagram.protectPropertyChange(e),i},t.prototype.addObjectToDiagram=function(t){this.diagram.removeFromAQuad(t),this.diagram.removeObjectsFromLayer(this.diagram.nameTable[t.id]),delete this.diagram.nameTable[t.id],t instanceof ES&&"Bezier"===t.type&&t.segments.length>0&&this.diagram.drawingObject&&"Bezier"===this.diagram.drawingObject.type&&(t.segments=[]);var e=this.diagram.add(t);"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer(),this.selectObjects([e]),t&&!Yn(this.diagram)&&(this.diagram.tool&=~Cg.DrawOnce,this.diagram.currentDrawingObject=void 0)},t.prototype.enableServerDataBinding=function(t){this.diagram.enableServerDataBinding(t)},t.prototype.addText=function(t,e){var i=this.diagram.findElementUnderMouse(t,e);this.diagram.startTextEdit(t,i instanceof Jg?i.id.split("_")[1]:void 0)},t.prototype.updateArgsObject=function(t,e,i){if(t)for(var n=0;n<t.length;n++)VS(t[parseInt(n.toString(),10)])===ES?i.connectorCollection.push(t[parseInt(n.toString(),10)].id):i.nodeCollection.push(t[parseInt(n.toString(),10)].id)},t.prototype.updateSelectionChangeEventArgs=function(t,e,i){if(f()){var n=(t={cause:this.diagram.diagramActions,newValue:{},oldValue:{},state:t.state,type:t.type,cancel:!1}).oldValue,r=t.newValue;return n.connectors=[],n.nodes=[],r.connectors=[],r.nodes=[],n.nodeCollection=[],n.connectorCollection=[],r.nodeCollection=[],r.connectorCollection=[],this.updateArgsObject(this.getSelectedObject(),t,r),this.updateArgsObject(i,t,n),t}return t},t.prototype.isUserHandle=function(t){var e=this.diagram.selectedItems;if(e.wrapper&&as(e.constraints,"UserHandle"))for(var i=0,n=e.userHandles;i<n.length;i++){var r=n[i];if(r.visible){if(Zr(t,os(e,r,this.diagram.scroller.transform),r.size/(2*this.diagram.scroller.transform.scale)))return!0}}return!1},t.prototype.selectObjects=function(t,e,i){return CI(this,void 0,void 0,function(){var n,r,o,s,a,l,h,c,d,p,u,g,m,v;return NI(this,function(y){switch(y.label){case 0:if(n={oldValue:i||this.getSelectedObject(),newValue:t,cause:this.diagram.diagramActions,state:"Changing",type:"Addition",cancel:!1},t.length>0&&t[0]&&t[0].isLane)for(r=this.diagram.getObject(t[0].parentId),t[0].shape.header=[],"",o=0;o<t.length;o++)for(v=0;v<r.shape.lanes.length;v++)s=t[0].id.split(t[0].parentId),s[1].slice(0,-1)===r.shape.lanes[parseInt(v.toString(),10)].id&&t[0].shape.header.push(r.shape.lanes[parseInt(v.toString(),10)].header);if(this.diagram.enableServerDataBinding(!1),!0,f()?this.oldSelectedObjects=WS(this.diagram):this.diagram.triggerEvent(jg.selectionChange,n),a=this.diagram.selectedItems.nodes.concat(this.diagram.selectedItems.connectors),l=_n(this.diagram),(h=Vn(this.diagram))||l){if(!l&&(t.length>1||e&&1===t.length)){if(1!==t.length)return[2];this.clearSelection()}if(!(h||l||1!==t.length||e&&$r(this.diagram)))return this.clearSelection(),[2]}if(n.cancel)return[3,5];for(v=0;v<t.length;v++)if(c=t[parseInt(v.toString(),10)])if(!0,$r(this.diagram)){if((v>0||e)&&c.children&&!c.parentId)for(d=0;d<this.diagram.selectedItems.nodes.length;d++)(p=this.diagram.nameTable[this.diagram.selectedItems.nodes[parseInt(d.toString(),10)].parentId])&&(p=this.findParent(p))&&c.id===p.id&&this.selectGroup(c);this.selectProcesses(c),this.selectBpmnSubProcesses(c)&&this.select(c,v>0||e,!0)}else this.select(c,v>0||e,!0);return void 0===i&&(i=a),n={oldValue:i||[],newValue:this.getSelectedObject(),cause:this.diagram.diagramActions,state:"Changed",type:"Addition",cancel:!1},this.diagram.renderSelector(e||t&&t.length>1),this.updateBlazorSelectorModel(i),f()&&this.diagram.selectionChange&&(n=this.updateSelectionChangeEventArgs(n,t,i||[]),this.updateBlazorSelector()),f()?[3,1]:(this.diagram.triggerEvent(jg.selectionChange,n),[3,4]);case 1:return u=void 0,window&&window[this.blazor]&&this.diagram.selectionChange?(g={EventName:"selectionChange",args:JSON.stringify(n)},[4,window[this.blazorInterop].updateBlazorDiagramEvents(g,this.diagram)]):[3,3];case 2:u=y.sent(),y.label=3;case 3:if(u&&u.cancel&&(m=[],u.oldValue.nodes.length>0&&(m=u.oldValue.nodes),u.oldValue.connectors.length>0&&(m=m.concat(u.oldValue.connectors)),m))if(m.length>0)for(v=0;v<m.length;v++)this.select(this.diagram.nameTable[m[parseInt(v.toString(),10)].id],0!==v&&m.length>1);else this.clearSelection();y.label=4;case 4:this.diagram.enableServerDataBinding(!0),this.updateBlazorSelector(),y.label=5;case 5:return[2]}})})},t.prototype.updateBlazorSelector=function(){if(f()&&this.oldSelectedObjects){this.newSelectedObjects=WS(this.diagram);var t=this.deepDiffer.map(fa(this.newSelectedObjects),this.oldSelectedObjects),e=this.deepDiffer.frameObject({},t),i=this.deepDiffer.removeEmptyValues(e);i.nodes=[];for(var n=0;n<this.diagram.selectedItems.nodes.length;n++)i.nodes.push(this.diagram.selectedItems.nodes[parseInt(n.toString(),10)].id);i.connectors=[];for(n=0;n<this.diagram.selectedItems.connectors.length;n++)i.connectors.push(this.diagram.selectedItems.connectors[parseInt(n.toString(),10)].id);if(window&&window.Blazor){var r={methodName:"UpdateBlazorProperties",diagramobj:{selectedItems:i}};window.sfBlazor.updateBlazorProperties(r,this.diagram)}this.oldSelectedObjects=void 0,this.newSelectedObjects=void 0}},t.prototype.findParent=function(t){return t.parentId&&(t=this.diagram.nameTable[t.parentId],this.findParent(t)),t},t.prototype.selectProcesses=function(t){if(this.hasProcesses(t))for(var e=t.shape.activity.subProcess.processes,i=0;i<e.length;i++){var n=this.diagram.nameTable[e[parseInt(i.toString(),10)]];this.hasProcesses(n)&&this.selectObjects([n],!0),this.unSelect(n)}},t.prototype.selectGroup=function(t){for(var e=0;e<t.children.length;e++){var i=this.diagram.nameTable[t.children[parseInt(e.toString(),10)]];i.children&&this.selectGroup(i),this.unSelect(this.diagram.nameTable[t.children[parseInt(e.toString(),10)]])}},t.prototype.selectBpmnSubProcesses=function(t){var e,i=!0;if(t.processId)i=!Jr(this.diagram,this.diagram.nameTable[t.processId])&&this.selectBpmnSubProcesses(this.diagram.nameTable[t.processId]);else if(t instanceof ES){if(t.sourceID&&this.diagram.nameTable[t.sourceID]&&this.diagram.nameTable[t.sourceID].processId&&(e=this.diagram.nameTable[t.sourceID].processId),t.targetID&&this.diagram.nameTable[t.targetID]&&this.diagram.nameTable[t.targetID].processId&&(e=this.diagram.nameTable[t.targetID].processId),e){if(Jr(this.diagram,this.diagram.nameTable[""+e]))return!1;i=this.selectBpmnSubProcesses(this.diagram.nameTable[""+e])}}else t.parentId&&this.diagram.nameTable[t.parentId]&&"UmlClassifier"===this.diagram.nameTable[t.parentId].shape.type&&Jr(this.diagram,this.diagram.nameTable[t.parentId])&&(i=!1);return i},t.prototype.hasProcesses=function(t){return!!(t&&"Bpmn"===t.shape.type&&t.shape.activity&&t.shape.activity.subProcess.processes&&t.shape.activity.subProcess.processes.length>0)},t.prototype.select=function(t,e,i){var n=this.getObjectLayer(t.id);if(Cn(t)&&!(t instanceof _w)&&!Jr(this.diagram,t)&&n&&!n.lock&&n.visible&&t.wrapper.visible){(e=!!$r(this.diagram)&&e)||this.clearSelection(),this.diagram.enableServerDataBinding(!1);var r=this.diagram.selectedItems;if(t instanceof Pw)if(t.isHeader){var o=this.diagram.nameTable[t.parentId];r.nodes.push(o)}else r.nodes.push(t);else r.connectors.push(t);if(r.selectedObjects.push(t),e)r.wrapper.rotateAngle=r.rotateAngle=0,r.wrapper.children.push(t.wrapper);else if(r.init(this.diagram),1===r.nodes.length&&0===r.connectors.length){var s=Nr(this.diagram,r);s&&(r.wrapper.children[0]=s),r.rotateAngle=r.nodes[0].rotateAngle,r.wrapper.rotateAngle=r.nodes[0].rotateAngle,r.wrapper.pivot=r.nodes[0].pivot}i||this.diagram.renderSelector(e),this.diagram.enableServerDataBinding(!0)}},t.prototype.getObjectCollectionId=function(t,e){for(var i=[],n=0,r=t?this.diagram.selectedItems.nodes:this.diagram.selectedItems.connectors;!e&&n<r.length;)i[parseInt(n.toString(),10)]=r[parseInt(n.toString(),10)].id,n++;return i},t.prototype.updateBlazorSelectorModel=function(t,e){if(window&&window.sfBlazor){for(var i=0,n=[];t&&i<t.length;)n[parseInt(i.toString(),10)]=t[parseInt(i.toString(),10)].id,i++;i=0;var r=xs({nodes:this.getObjectCollectionId(!0,e),connectors:this.getObjectCollectionId(!1,e)});window.sfBlazor.updateDiagramCollection&&window.sfBlazor.updateDiagramCollection.call(this.diagram,"selectedItems",r,n,!1,!0)}},t.prototype.labelSelect=function(t,e){this.oldSelectedObjects=WS(this.diagram);var i=this.diagram.selectedItems,n=this.diagram.allowServerDataBinding;this.diagram.allowServerDataBinding=!1,i.nodes=i.connectors=[],this.diagram.allowServerDataBinding=n,t instanceof Pw?i.nodes[0]=t:i.connectors[0]=t,i.annotation=this.findTarget(e,t),i.init(this.diagram),this.diagram.renderSelector(!1),this.updateBlazorSelector()},t.prototype.unSelect=function(t){var e=[];e.push(t);var i=this.diagram.selectedItems.nodes.concat(this.diagram.selectedItems.connectors),n=i.filter(function(e){return e.id!==t.id}),r={oldValue:i,newValue:n,cause:this.diagram.diagramActions,state:"Changing",type:"Removal",cancel:!1};if(this.diagram.currentSymbol||f()||this.diagram.triggerEvent(jg.selectionChange,r),Jr(this.diagram,t)){var o=this.diagram.selectedItems,s=void 0;if(t instanceof Pw?(s=o.nodes.indexOf(t,0),o.nodes.splice(s,1)):(s=o.connectors.indexOf(t,0),o.connectors.splice(s,1)),s=o.selectedObjects.indexOf(t,0),o.selectedObjects.splice(s,1),r={oldValue:i,newValue:n,cause:this.diagram.diagramActions,state:"Changed",type:"Removal",cancel:!1},this.updateBlazorSelectorModel(e),!(r={oldValue:xs(i),newValue:n,cause:this.diagram.diagramActions,state:"Changed",type:"Removal",cancel:r.cancel}).cancel&&(s=o.wrapper.children.indexOf(t.wrapper,0),o.wrapper.children.splice(s,1),this.diagram.updateSelector(),!this.diagram.currentSymbol))if(f()){if(r=this.updateSelectionChangeEventArgs(r,[],e),this.updateBlazorSelector(),window&&window[this.blazor]&&this.diagram.selectionChange){var a={EventName:"selectionChange",args:JSON.stringify(r)};window[this.blazorInterop].updateBlazorDiagramEvents(a,this.diagram)}}else this.diagram.triggerEvent(jg.selectionChange,r)}},t.prototype.getChildElements=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[parseInt(i.toString(),10)];n.children&&n.children.length>0?e.concat(this.getChildElements(n.children)):(e.push(n.id),n instanceof Jg&&e.push(n.id+"_text"))}return e},t.prototype.moveSvgNode=function(t,e){var i=Us(e+"_groupElement",this.diagram.element.id),n=Us(t+"_groupElement",this.diagram.element.id);i.parentNode.insertBefore(n,i)},t.prototype.sendLayerBackward=function(t){var e=this.getLayer(t);if(e&&0!==e.zIndex){var i=e.zIndex;if("SVG"===this.diagram.mode){var n=e.objects,r=this.getLayer(this.diagram.layerZIndexTable[i-1]).objects[0];if(r)for(var o=0,s=n;o<s.length;o++){var a=s[o];this.moveSvgNode(a,r)}}var l=this.getLayer(this.diagram.layerZIndexTable[i-1]);l.zIndex=l.zIndex+1,e.zIndex=e.zIndex-1;var h=this.diagram.layerZIndexTable[parseInt(i.toString(),10)];this.diagram.layerZIndexTable[parseInt(i.toString(),10)]=this.diagram.layerZIndexTable[i-1],this.diagram.layerZIndexTable[i-1]=h,"Canvas"===this.diagram.mode&&this.diagram.refreshDiagramLayer()}},t.prototype.bringLayerForward=function(t){var e=this.getLayer(t);if(e&&e.zIndex<this.diagram.layers.length-1){var i=e.zIndex,n=this.getLayer(this.diagram.layerZIndexTable[i+1]);if("SVG"===this.diagram.mode)for(var r=e.objects[0],o=0,s=n.objects;o<s.length;o++){var a=s[o];a&&this.moveSvgNode(a,r)}n.zIndex=n.zIndex-1,e.zIndex=e.zIndex+1;var l=this.diagram.layerZIndexTable[parseInt(i.toString(),10)];this.diagram.layerZIndexTable[parseInt(i.toString(),10)]=this.diagram.layerZIndexTable[i+1],this.diagram.layerZIndexTable[i+1]=l,"Canvas"===this.diagram.mode&&this.diagram.refreshDiagramLayer()}},t.prototype.sendToBack=function(t){if(this.diagram.protectPropertyChange(!0),$r(this.diagram)||t){var e=this.diagram.selectedItems,i=[];t&&t.id?i.push(t):i=(i=i.concat(e.nodes)).concat(e.connectors);for(var n=t&&t.id,r=0;r<i.length;r++){var o=fa(i[parseInt(r.toString(),10)]);n=i[parseInt(r.toString(),10)].id;var s=this.diagram.nameTable[""+n].zIndex,a=this.diagram.layers.indexOf(this.getObjectLayer(n)),l=this.diagram.layers[parseInt(a.toString(),10)].zIndexTable,h=JSON.parse(JSON.stringify(l)),c=fa(this.diagram.selectedItems),d=0;if(1!==this.diagram.nodes.length&&(void 0===this.diagram.nameTable[""+n].children||this.checkObjectBehind(n,l,s))){for(var p=this.diagram.nameTable[""+n],u=s;u>0;u--)l[parseInt(u.toString(),10)]&&(l[u-1]?(l[parseInt(u.toString(),10)]=l[u-1],this.diagram.nameTable[l[parseInt(u.toString(),10)]].zIndex=u):(l[u-1]=l[parseInt(u.toString(),10)],this.diagram.nameTable[l[u-1]].zIndex=u,delete l[parseInt(u.toString(),10)]));for(var g=s;g>0;g--)l[parseInt(g.toString(),10)]&&(this.diagram.nameTable[l[parseInt(g.toString(),10)]].zIndex=g);if("SwimLane"!==p.shape.type?(l[0]=this.diagram.nameTable[""+n].id,this.diagram.nameTable[""+n].zIndex=0):d=this.swapZIndexObjects(s,l,n,h),"SVG"===this.diagram.mode){var m=this.diagram.nameTable[""+n],v="SwimLane"!==m.shape.type?1:d;v!==d&&(v=m.children&&m.children.length>0?s:1);for(var y=l[parseInt(v.toString(),10)];!y&&v<s;)y=l[++v];(y=this.resetTargetNode(n,y,v,l))&&(y=this.diagram.nameTable[""+y].parentId?this.checkParentExist(y):y,this.moveSvgNode(n,y)),this.updateNativeNodeIndex(n)}else this.diagram.refreshCanvasLayers();var b={type:"SendToBack",category:"Internal",undoObject:c,redoObject:fa(this.diagram.selectedItems)};this.diagram.diagramActions&Og.UndoRedo||this.addHistoryEntry(b)}this.triggerOrderCommand(o,i[parseInt(r.toString(),10)],i[parseInt(r.toString(),10)])}}this.diagram.protectPropertyChange(!1),f()&&this.getZIndexObjects()},t.prototype.swapZIndexObjects=function(t,e,i,n){for(var r=0,o=0,s=-1,a=1,l=0;l<=t;l++)e[parseInt(l.toString(),10)]&&this.diagram.nameTable[e[parseInt(l.toString(),10)]].parentId===i&&(-1===s&&(s=l),o++);for(l=0;l<=t;l++)if(e[parseInt(l.toString(),10)]&&a<=o){for(;!e[parseInt(s.toString(),10)];)s++;e[parseInt(l.toString(),10)]=e[parseInt(s.toString(),10)],this.diagram.nameTable[e[parseInt(l.toString(),10)]].zIndex=l,s++,a++}var h=0;for(l=0;l<o;l++){for(;!e[parseInt(h.toString(),10)];)h++;r=this.diagram.nameTable[e[parseInt(h.toString(),10)]].zIndex,h++}for(r+=1;!e[parseInt(r.toString(),10)];)++r;h=0,e[parseInt(r.toString(),10)]=this.diagram.nameTable[""+i].id,this.diagram.nameTable[""+i].zIndex=r;for(l=r+=1;l<=t;l++)if(e[parseInt(l.toString(),10)]){for(;!n[parseInt(h.toString(),10)];)h++;e[parseInt(l.toString(),10)]=n[parseInt(h.toString(),10)],this.diagram.nameTable[e[parseInt(l.toString(),10)]].zIndex=l,h++}return r},t.prototype.resetTargetNode=function(t,e,i,n){return"SwimLane"===this.diagram.nameTable[""+t].shape.type&&void 0!==this.diagram.nameTable[""+e].parentId&&""!==this.diagram.nameTable[""+e].parentId&&this.diagram.nameTable[this.diagram.nameTable[""+e].parentId].isLane?(i+=1,n[parseInt(i.toString(),10)]?(e=n[parseInt(i.toString(),10)],e=this.resetTargetNode(t,e,i,n)):e):e},t.prototype.getZIndexObjects=function(){var t,e,i=[];for(t=0;t<this.diagram.nodes.length;t++)i.push(this.diagram.nodes[parseInt(t.toString(),10)]);for(e=0;e<this.diagram.connectors.length;e++)i.push(this.diagram.connectors[parseInt(e.toString(),10)]);this.updateBlazorZIndex(i)},t.prototype.updateBlazorZIndex=function(t){var e,i={},n=[],r=[];if(t&&t.length>0)for(e=0;e<t.length;e++){var o=t[parseInt(e.toString(),10)];o instanceof Pw?n.push(this.getBlazorObject(o)):o instanceof ES&&r.push(this.getBlazorObject(o))}if(i={nodes:n,connectors:r},window&&window.Blazor){var s={methodName:"UpdateBlazorProperties",diagramobj:i};window.sfBlazor.updateBlazorProperties(s,this.diagram)}},t.prototype.getBlazorObject=function(t){return{sfIndex:pa(this.diagram,t.id),zIndex:t.zIndex}},t.prototype.checkParentExist=function(t){for(var e=t;this.diagram.nameTable[""+e].parentId;)e=this.diagram.nameTable[""+e].parentId;return e},t.prototype.checkObjectBehind=function(t,e,i){for(var n=0;n<i;n++){var r=e[parseInt(n.toString(),10)];if(this.diagram.nameTable[""+r]&&t!==this.diagram.nameTable[""+r].parentId)return!0}return!1},t.prototype.bringToFront=function(t){var e=this;if(this.diagram.protectPropertyChange(!0),$r(this.diagram)||t){var i=t&&t.id,n=this.diagram.selectedItems,r=[];t&&t.id?r.push(t):r=(r=r.concat(n.nodes)).concat(n.connectors);for(var o=function(t){var n=fa(r[parseInt(t.toString(),10)]);i=r[parseInt(t.toString(),10)].id;for(var o=s.diagram.layers.indexOf(s.getObjectLayer(i)),a=s.diagram.layers[parseInt(o.toString(),10)].zIndexTable,l=fa(s.diagram.selectedItems),h=JSON.parse(JSON.stringify(a)),c=Number(Object.keys(a).sort(function(t,e){return Number(t)-Number(e)}).reverse()[0]),d=s.diagram.nameTable[""+i].zIndex,p=[],u=0;u<=c;u++)p.push(a[parseInt(u.toString(),10)]);var g=s.diagram.nameTable[""+i];if("SwimLane"===g.shape.type)for(var m=c;m>=d;m--)if(a[parseInt(m.toString(),10)]&&s.diagram.nameTable[a[parseInt(m.toString(),10)]].parentId!==i){c=m;break}for(var f=d;f<c;f++)a[parseInt(f.toString(),10)]&&(a[f+1]?(a[parseInt(f.toString(),10)]=a[f+1],s.diagram.nameTable[a[parseInt(f.toString(),10)]].zIndex=f):(a[f+1]=a[parseInt(f.toString(),10)],s.diagram.nameTable[a[f+1]].zIndex=f,delete a[parseInt(f.toString(),10)]));for(var v=d;v<c;v++)a[parseInt(v.toString(),10)]&&(s.diagram.nameTable[a[parseInt(v.toString(),10)]].zIndex=v);if("SwimLane"!==g.shape.type)a[parseInt(c.toString(),10)]=s.diagram.nameTable[""+i].id,s.diagram.nameTable[""+i].zIndex=c;else{for(var y=0,b=-1,S=0,w=0,I=JSON.parse(JSON.stringify(a)),x=0;x<=d;x++)if(a[parseInt(x.toString(),10)]&&s.diagram.nameTable[a[parseInt(x.toString(),10)]].parentId===i&&-1===b){b=x,S=x;break}for(var M=0;M<=c;M++)if(h[parseInt(M.toString(),10)]&&h[parseInt(M.toString(),10)]!==i&&s.diagram.nameTable[h[parseInt(M.toString(),10)]].parentId!==i){var C=s.diagram.nameTable[h[parseInt(M.toString(),10)]],N=s.diagram.nameTable[""+i];C.zIndex>=N.zIndex&&y++}for(var E=b,D=0;D<=y;D++){for(;!a[parseInt(E.toString(),10)];)E++;w=s.diagram.nameTable[a[parseInt(E.toString(),10)]].zIndex,E++}for(var T=w;T<=c;T++){for(;!I[parseInt(b.toString(),10)];)b++;for(;!a[parseInt(T.toString(),10)];)T++;a[parseInt(T.toString(),10)]=I[parseInt(b.toString(),10)],s.diagram.nameTable[a[parseInt(T.toString(),10)]].zIndex=T,b++}a[parseInt(c.toString(),10)]=s.diagram.nameTable[""+i].id,s.diagram.nameTable[""+i].zIndex=c,E=d+1;for(var O=S,L=0;L<y;L++){for(;!h[parseInt(E.toString(),10)];)E++;for(;s.diagram.nameTable[h[parseInt(E.toString(),10)]].parentId===i;)E++;for(;!a[parseInt(O.toString(),10)];)O++;a[parseInt(O.toString(),10)]=h[parseInt(E.toString(),10)],s.diagram.nameTable[a[parseInt(O.toString(),10)]].zIndex=O,E++,O++}}if("SVG"===s.diagram.mode){var A=s.diagram.diagramLayer,z=Us(i+"_groupElement",s.diagram.element.id),k=s.diagram.selectedItems.nodes;if(k.length>0&&("Native"===k[0].shape.type||"HTML"===k[0].shape.type)){z.parentNode.removeChild(z);for(O=0;O<s.diagram.views.length;O++){var j=(z=Us(i+("HTML"===k[0].shape.type?"_html_element":"_content_groupElement"),s.diagram.views[parseInt(O.toString(),10)])).parentNode.lastChild;j.parentNode.insertBefore(z,j.nextSibling)}var P=$s(s.diagram.element.id);s.diagram.diagramRenderer.renderElement(s.diagram.nameTable[""+i].wrapper,A,P)}else Object.keys(a).forEach(function(t){var n=a[""+t];if(n!==i&&e.diagram.nameTable[""+n].parentId!==i&&void 0!==n&&p.indexOf(i)<p.indexOf(n)){var r=e.diagram.nameTable[""+i],o=e.diagram.nameTable[""+n];""===r.parentId&&""===o.parentId&&void 0===o.parentId&&r.parentId!==o.id?(e.moveSvgNode(n,i),e.updateNativeNodeIndex(i)):e.checkGroupNode(i,n,e.diagram.nameTable)&&(e.moveSvgNode(n,i),e.updateNativeNodeIndex(i))}})}else s.diagram.refreshCanvasLayers();var R={type:"BringToFront",category:"Internal",undoObject:l,redoObject:fa(s.diagram.selectedItems)};s.diagram.diagramActions&Og.UndoRedo||s.addHistoryEntry(R),s.triggerOrderCommand(n,r[parseInt(t.toString(),10)],r[parseInt(t.toString(),10)])},s=this,a=0;a<r.length;a++)o(a)}this.diagram.protectPropertyChange(!1),f()&&this.getZIndexObjects()},t.prototype.triggerOrderCommand=function(t,e,i){var n={zIndex:fa(t).zIndex},r={zIndex:e.zIndex},o={element:i,cause:this.diagram.diagramActions,diagramAction:this.diagram.getDiagramAction(this.diagram.diagramActions),oldValue:n,newValue:r};this.diagram.triggerEvent(jg.propertyChange,o)},t.prototype.checkGroupNode=function(t,e,i){return i[""+e].parentId===i[""+t].parentId},t.prototype.sortByZIndex=function(t,e){var i=e||"zIndex";return t=t.sort(function(t,e){return t[""+i]-e[""+i]})},t.prototype.orderCommands=function(t,e,i){var n=e.nodes;if(n=n.concat(e.connectors),t)"SendBackward"===i?this.sendBackward(n[0]):"SendForward"===i?this.sendForward(n[0]):"BringToFront"===i?this.bringToFront(n[0]):"SendToBack"===i&&this.sendToBack(n[0]);else{var r=n[0].zIndex,o=this.diagram.nameTable[n[0].id].zIndex,s=n[0],a=this.getObjectLayer(s.id),l=a.zIndex,h=a.zIndexTable;if("SendBackward"===i||"SendForward"===i)for(var c=0;c<n.length;c++){var d=n[parseInt(c.toString(),10)],p=this.diagram.layers.indexOf(this.getObjectLayer(d.id));this.diagram.nameTable[n[parseInt(c.toString(),10)].id].zIndex=d.zIndex,this.diagram.layers[parseInt(p.toString(),10)].zIndexTable[d.zIndex]=d.id}else if("BringToFront"===i)if("SwimLane"===n[0].shape.type)this.sendToBack(n[0]);else for(var u=o;u>r;u--)h[parseInt(u.toString(),10)]&&(h[u-1]?(h[parseInt(u.toString(),10)]=h[u-1],this.diagram.nameTable[h[parseInt(u.toString(),10)]].zIndex=u):(h[u-1]=h[parseInt(u.toString(),10)],this.diagram.nameTable[h[u-1]].zIndex=u,delete h[parseInt(u.toString(),10)]));else if("SendToBack"===i)if("SwimLane"===n[0].shape.type)this.bringToFront(n[0]);else for(u=o;u<r;u++)h[parseInt(u.toString(),10)]&&(h[u+1]?(h[parseInt(u.toString(),10)]=h[u+1],this.diagram.nameTable[h[parseInt(u.toString(),10)]].zIndex=u):(h[u+1]=h[parseInt(u.toString(),10)],this.diagram.nameTable[h[u+1]].zIndex=u,delete h[parseInt(u.toString(),10)]));if("BringToFront"===i||"SendToBack"===i){this.diagram.nameTable[n[0].id].zIndex=s.zIndex,this.diagram.layers[parseInt(l.toString(),10)].zIndexTable[s.zIndex]=s.id}if("SVG"===this.diagram.mode){if("SendBackward"===i)this.moveObject(n[1].id,n[0].id);else if("SendForward"===i)this.moveObject(n[0].id,n[1].id);else if("BringToFront"===i)"SwimLane"!==n[0].shape.type&&this.moveObject(n[0].id,h[n[0].zIndex+1]);else if("SendToBack"===i&&"SwimLane"!==n[0].shape.type){var g=this.getObjectLayer(n[0].id);for(c=0;c<=n[0].zIndex;c++)g.objects[parseInt(c.toString(),10)]!==n[0].id&&(this.moveSvgNode(g.objects[parseInt(c.toString(),10)],n[0].id),this.updateNativeNodeIndex(n[0].id))}}else this.diagram.refreshCanvasLayers()}},t.prototype.moveObject=function(t,e){e&&(this.moveSvgNode(t,e),this.updateNativeNodeIndex(t,e))},t.prototype.sendForward=function(t){if(this.diagram.protectPropertyChange(!0),$r(this.diagram)||t){var e=t||(this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes[0]:this.diagram.selectedItems.connectors[0]),i=fa(e),n=t&&t.id;n=n||(this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes[0].id:this.diagram.selectedItems.connectors[0].id);var r=this.diagram.layers.indexOf(this.getObjectLayer(n)),o=this.diagram.layers[parseInt(r.toString(),10)].zIndexTable,s=this.diagram.nameTable[""+n],a=[],l=this.diagram.spatialSearch.findObjects(s.wrapper.bounds);l.length>2&&(l=this.sortByZIndex(l));for(var h=0,c=l;h<c.length;h++){var d=c[h];if(s.id!==d.id){if(r===this.getObjectLayer(d.id).zIndex&&Number(this.diagram.nameTable[""+n].zIndex)<Number(d.zIndex)&&s.wrapper.bounds.intersects(d.wrapper.bounds)){a.push(d);break}}}if(a.length>0){var p=this.diagram.nameTable[o[Number(a[0].zIndex)]];if(p.parentId){var u=Ds(p,this.diagram,""),g=this.diagram.nameTable[""+u];g.id!==n&&(a[0]=g)}var m=a[0].zIndex,v=s.zIndex,y=o[parseInt(m.toString(),10)],b=fa(this.diagram.selectedItems);this.diagram.nameTable[""+y]instanceof Pw?b.nodes.push(fa(this.diagram.nameTable[""+y])):b.connectors.push(fa(this.diagram.nameTable[""+y])),this.diagram.layers[0].zIndexTable[parseInt(m.toString(),10)]=s.id,this.diagram.nameTable[o[parseInt(m.toString(),10)]].zIndex=m,this.diagram.layers[0].zIndexTable[parseInt(v.toString(),10)]=a[0].id,this.diagram.nameTable[o[parseInt(v.toString(),10)]].zIndex=v,"SVG"===this.diagram.mode?(this.moveSvgNode(o[Number(a[0].zIndex)],n),this.updateNativeNodeIndex(o[Number(a[0].zIndex)],n)):this.diagram.refreshCanvasLayers();var S=fa(this.diagram.selectedItems);this.diagram.nameTable[y]instanceof Pw?S.nodes.push(fa(this.diagram.nameTable[y])):S.connectors.push(fa(this.diagram.nameTable[""+y]));var w={type:"SendForward",category:"Internal",undoObject:b,redoObject:S};this.diagram.diagramActions&Og.UndoRedo||this.addHistoryEntry(w)}if(f()){var I=[];I.push(s),I.push(a[a.length-1]),this.updateBlazorZIndex(I)}this.triggerOrderCommand(i,e,e)}this.diagram.protectPropertyChange(!1)},t.prototype.sendBackward=function(t){if(this.diagram.protectPropertyChange(!0),$r(this.diagram)||t){var e=t||(this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes[0]:this.diagram.selectedItems.connectors[0]),i=fa(e),n=t&&t.id;n=n||(this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes[0].id:this.diagram.selectedItems.connectors[0].id);var r=this.diagram.layers.indexOf(this.getObjectLayer(n)),o=this.diagram.layers[parseInt(r.toString(),10)].zIndexTable,s=this.diagram.nameTable[""+n],a=[],l=this.diagram.spatialSearch.findObjects(s.wrapper.bounds);l.length>2&&(l=this.sortByZIndex(l));for(var h=0,c=l;h<c.length;h++){var d=c[h];if(s.id!==d.id){r===this.getObjectLayer(d.id).zIndex&&Number(this.diagram.nameTable[""+n].zIndex)>Number(d.zIndex)&&s.wrapper.bounds.intersects(d.wrapper.bounds)&&a.push(d)}}for(d=a.length-1;d>=0;d--){(p=this.diagram.nameTable[a[parseInt(d.toString(),10)].id]).parentId===n&&a.splice(d,1)}if(a.length>0){var p;if((p=this.diagram.nameTable[a[a.length-1].id]).parentId){var u=Ds(p,this.diagram,""),g=this.diagram.nameTable[""+u];n!==g.id&&(a[a.length-1]=g)}var m=a[a.length-1].zIndex,v=s.zIndex,y=o[parseInt(m.toString(),10)],b=fa(this.diagram.selectedItems);if(this.diagram.nameTable[""+y]instanceof Pw?b.nodes.push(fa(this.diagram.nameTable[""+y])):b.connectors.push(fa(this.diagram.nameTable[""+y])),o[parseInt(m.toString(),10)]=s.id,this.diagram.nameTable[o[parseInt(m.toString(),10)]].zIndex=m,o[parseInt(v.toString(),10)]=a[a.length-1].id,this.diagram.nameTable[o[parseInt(v.toString(),10)]].zIndex=v,"SVG"===this.diagram.mode){this.moveSvgNode(n,o[a[a.length-1].zIndex]);var S=this.diagram.nameTable[o[a[a.length-1].zIndex]];if(S.children&&S.children.length>0?this.updateNativeNodeIndex(n):this.updateNativeNodeIndex(n,o[a[a.length-1].zIndex]),f()){var w=[];w.push(S),w.push(a[a.length-1]),this.updateBlazorZIndex(w)}}else this.diagram.refreshCanvasLayers();var I=fa(this.diagram.selectedItems);this.diagram.nameTable[""+y]instanceof Pw?I.nodes.push(fa(this.diagram.nameTable[""+y])):I.connectors.push(fa(this.diagram.nameTable[""+y]));var x={type:"SendBackward",category:"Internal",undoObject:b,redoObject:I};this.diagram.diagramActions&Og.UndoRedo||this.addHistoryEntry(x)}this.triggerOrderCommand(i,e,e)}this.diagram.protectPropertyChange(!1)},t.prototype.updateNativeNodeIndex=function(t,e){for(var i=this.diagram.selectedItems.nodes[0]||this.diagram.getObject(e),n=0;n<this.diagram.views.length;n++)if(i&&("HTML"===i.shape.type||"Native"===i.shape.type)){var r="HTML"===i.shape.type?"_html_element":"_content_groupElement",o=Us(t+r,this.diagram.views[parseInt(n.toString(),10)]),s=e?Us(e+r,this.diagram.views[parseInt(n.toString(),10)]):o.parentElement.firstChild;o&&s&&o.parentNode.id===s.parentNode.id&&s.parentNode.insertBefore(o,s)}},t.prototype.initSelectorWrapper=function(){var t=this.diagram.selectedItems;t.init(this.diagram),1===t.nodes.length&&0===t.connectors.length&&(t.rotateAngle=t.nodes[0].rotateAngle,t.wrapper.rotateAngle=t.nodes[0].rotateAngle,t.wrapper.pivot=t.nodes[0].pivot)},t.prototype.doRubberBandSelection=function(t){this.clearSelectionRectangle();var e=[],i=[];e=this.diagram.getNodesConnectors(e),(i="CompleteIntersect"===this.diagram.selectedItems.rubberBandSelectionMode?go(t,e):this.diagram.spatialSearch.findObjects(t)).length&&this.selectObjects(i,!0)},t.prototype.clearSelectionRectangle=function(){var t=_s(this.diagram.element.id).getElementById(this.diagram.element.id+"_diagramAdorner_selected_region");t&&O(t)},t.prototype.dragConnectorEnds=function(t,e,i,n,r,o){var s,a,l,h=!1;return e instanceof _w?s=e.connectors[0]:e instanceof ES&&this.diagram.currentDrawingObject&&(this.clearSelection(),s=this.diagram.currentDrawingObject),"BezierSourceThumb"!==t&&"BezierTargetThumb"!==t||(h=!0,s.isBezierEditing=!0),"ConnectorSourceEnd"===t||"BezierSourceThumb"===t?(a=i.x-(h?n.bezierPoint1.x:s.sourcePoint.x),l=i.y-(h?n.bezierPoint1.y:s.sourcePoint.y),this.dragSourceEnd(s,a,l,null,i,t,void 0,r,o,void 0,n)):(a=i.x-(h?n.bezierPoint2.x:s.targetPoint.x),l=i.y-(h?n.bezierPoint2.y:s.targetPoint.y),this.dragTargetEnd(s,a,l,null,i,t,void 0,n))},t.prototype.getSelectedObject=function(){var t=this.diagram.selectedItems;return t.nodes.concat(t.connectors)},t.prototype.updateBlazorProperties=function(t){if(t){if(window&&window.Blazor&&"{}"!==JSON.stringify(this.deepDiffer.diagramObject)){e={methodName:"UpdateBlazorProperties",diagramobj:this.deepDiffer.diagramObject};this.diagram.isLoading||window.sfBlazor.updateBlazorProperties(e,this.diagram)}}else if(window&&window.Blazor){var e={methodName:"UpdateBlazorProperties",diagramobj:this.diagramObject};window.sfBlazor.updateBlazorProperties(e,this.diagram)}this.deepDiffer.newNodeObject=[],this.deepDiffer.newConnectorObject=[],this.diagramObject=[],this.diagram.oldNodeObjects=[],this.diagram.oldConnectorObjects=[]},t.prototype.enableCloneObject=function(t){this.diagram.lineRoutingModule&&this.diagram.constraints&Mg.LineRouting||(this.diagram.canEnableBlazorObject=t)},t.prototype.ismouseEvents=function(t){this.diagram.blazorActions=t?this.diagram.addConstraints(this.diagram.blazorActions,$u.interaction):this.diagram.removeConstraints(this.diagram.blazorActions,$u.interaction)},t.prototype.updateLayerObject=function(t,e){if(f()){var i={};i=this.deepDiffer.getLayerObject(t,e,this.diagram),this.diagramObject=i,this.updateBlazorProperties()}},t.prototype.getDiagramOldValues=function(t,e){for(var i={},n=0;n<e.length;n++)i[e[parseInt(n.toString(),10)]]=fa(this.diagram[e[parseInt(n.toString(),10)]]);var r=fa(i),o=this.deepDiffer.map(r,t),s=this.deepDiffer.frameObject({},o),a=this.deepDiffer.removeEmptyValues(s);a=this.deepDiffer.changeSegments(a,r),this.diagramObject=a,this.diagram.blazorActions&$u.ClearObject||this.updateBlazorProperties()},t.prototype.getBlazorOldValues=function(t,e){if(f()){for(var i=this.diagram.oldNodeObjects,n=0;n<i.length;n++)i[parseInt(n.toString(),10)].id&&(this.diagram.oldNodeObjects[parseInt(n.toString(),10)]instanceof Pw&&(this.diagram.oldNodeObjects[parseInt(n.toString(),10)]=xs(this.diagram.oldNodeObjects[parseInt(n.toString(),10)])),this.deepDiffer.getDifferenceValues(this.diagram.nameTable[i[parseInt(n.toString(),10)].id],t,e,this.diagram));var r=this.diagram.oldConnectorObjects;for(n=0;n<r.length;n++)r[parseInt(n.toString(),10)].id&&(this.diagram.oldConnectorObjects[parseInt(n.toString(),10)]instanceof ES&&(this.diagram.oldConnectorObjects[parseInt(n.toString(),10)]=xs(this.diagram.oldConnectorObjects[parseInt(n.toString(),10)])),this.deepDiffer.getDifferenceValues(this.diagram.nameTable[r[parseInt(n.toString(),10)].id],t,e,this.diagram));(i.length>0||r.length>0)&&this.updateBlazorProperties(!0)}},t.prototype.getObjectChanges=function(t,e,i){for(var n=0;n<t.length;n++){var r=this.deepDiffer.map(e[parseInt(n.toString(),10)],t[parseInt(n.toString(),10)]),o=this.deepDiffer.frameObject({},r),s=this.deepDiffer.removeEmptyValues(o);s.children&&(s.children=fa(e[parseInt(n.toString(),10)]).children),(s=this.deepDiffer.changeSegments(s,e[parseInt(n.toString(),10)])).sfIndex=pa(this.diagram,e[parseInt(n.toString(),10)].id),i.push(s)}},t.prototype.clearObjectSelection=function(t){var e=this.diagram.selectedItems,i=[];-1===(i=i.concat(e.nodes,e.connectors)).indexOf(t)&&(this.clearSelection(i.length>0),this.selectObjects([t],!0))},t.prototype.clearSelection=function(t,e){return CI(this,void 0,void 0,function(){var i,n,r,o,s,a,l,h;return NI(this,function(c){switch(c.label){case 0:return i=this.diagram.allowServerDataBinding,this.diagram.enableServerDataBinding(!1),$r(this.diagram)?(n=this.diagram.selectedItems,r=this.getSelectedObject(),this.diagram.currentSymbol&&(this.diagram.previousSelectedObject=r),o={oldValue:r,newValue:[],cause:this.diagram.diagramActions,state:"Changing",type:"Removal",cancel:!1},this.updateBlazorSelectorModel(r,!0),t&&(f()?this.oldSelectedObjects=fa(n):this.diagram.triggerEvent(jg.selectionChange,o)),o.cancel?[3,4]:(n.offsetX=0,n.offsetY=0,n.width=0,n.height=0,n.rotateAngle=0,n.nodes=[],n.connectors=[],n.wrapper=null,n.annotation=void 0,n.selectedObjects=[],this.diagram.clearSelectorLayer(),t?(o={oldValue:xs(r),newValue:[],cause:this.diagram.diagramActions,state:"Changed",type:"Removal",cancel:!1},f()&&(o=this.updateSelectionChangeEventArgs(o,[],r),this.updateBlazorSelector()),f()?[3,1]:(this.diagram.triggerEvent(jg.selectionChange,o),[3,4])):[3,4])):[3,5];case 1:return s=void 0,window&&window[this.blazor]&&this.diagram.selectionChange?(a={EventName:"selectionChange",args:JSON.stringify(o)},[4,window[this.blazorInterop].updateBlazorDiagramEvents(a,this.diagram)]):[3,3];case 2:s=c.sent(),c.label=3;case 3:if(s&&s.cancel&&!e&&(l=[],s.oldValue.nodes.length>0&&(l=s.oldValue.nodes),s.oldValue.connectors.length>0&&(l=l.concat(s.oldValue.connectors)),l))for(h=0;h<l.length;h++)this.select(this.diagram.nameTable[l[parseInt(h.toString(),10)].id],0!==h&&l.length>1);c.label=4;case 4:this.updateBlazorSelector(),this.diagram.enableServerDataBinding(i),c.label=5;case 5:return[2]}})})},t.prototype.clearSelectedItems=function(){var t=this.diagram.selectedItems.nodes?this.diagram.selectedItems.nodes.length:0,e=this.diagram.selectedItems.connectors?this.diagram.selectedItems.connectors.length:0;this.clearSelection(t+e>0)},t.prototype.removeStackHighlighter=function(){var t=_s(this.diagram.element.id),e=t.getElementById(t.id+"_stack_highlighter");e&&e.parentNode.removeChild(e)},t.prototype.renderStackHighlighter=function(t,e){var i,n,r,o=this.diagram.selectedItems.nodes[0];if(!e){var s=this.diagram.findObjectsUnderMouse(t.position);if((e=this.diagram.findObjectUnderMouse(s,"Drag",!0))&&!(e.isLane||e.isPhase||e.isHeader))for(var a=0;a<s.length;a++){var l=this.diagram.nameTable[s[parseInt(a.toString(),10)].id];(!l.isLane||l.isPhase||l.isHeader)&&(e=l,this.diagram.parentObject=e)}}if(o&&e&&e.isLane&&o.shape&&!o.shape.isPhase&&(n=this.diagram.nameTable[e.parentId],this.diagram.currentSymbol&&"SwimLane"===n.shape.type&&(i=!0),o&&!o.parentId&&"SwimLane"!==o.shape.type||o&&o.parentId&&this.diagram.nameTable[o.parentId]&&this.diagram.nameTable[o.parentId].isLane&&o.parentId!==e.parentId&&o.parentId!==e.id)){r=this.diagram.selectedItems;(h=Nr(this.diagram,r,e.id,!0))&&(r.wrapper.children[0]=h),this.diagram.renderSelector(!1,!0),r.wrapper.children[0]=r.nodes[0].wrapper}if(o&&e&&e.parentId&&o.shape&&o.shape.isPhase){"SwimLane"===this.diagram.nameTable[e.parentId].shape.type&&(this.diagram.selectedItems.wrapper.children[0]=this.diagram.nameTable[e.parentId].wrapper,this.diagram.renderSelector(!1,!0))}if(i&&this.diagram.currentSymbol.shape.isLane||o&&e&&o.parentId&&e.parentId&&!o.isPhase&&o.parentId===e.parentId&&o.id!==e.id&&n&&n.container&&("Stack"===n.container.type||"Grid"===n.container.type)){var h=void 0,c="Vertical"===n.container.orientation,d="Stack"===n.container?c:!c;"Grid"===n.container.type&&e.isLane&&(!this.diagram.currentSymbol&&"Horizontal"===n.shape.orientation&&e.rowIndex!==o.rowIndex||"Vertical"===n.shape.orientation&&e.columnIndex!==o.columnIndex||this.diagram.currentSymbol&&this.diagram.currentSymbol.shape.orientation===n.container.orientation)&&(r=this.diagram.selectedItems,(o.isLane&&kr(o,this.diagram)||!o.isLane)&&(h=Nr(this.diagram,r,e.id,i)));var p="Stack"===n.container.type?e.wrapper:h;p&&Qr(p,d,t.position,this.diagram,!1,!0)}},t.prototype.insertBlazorConnector=function(t){if(t instanceof _w)for(var e=0;e<t.connectors.length;e++)this.diagram.insertBlazorConnector(t.connectors[parseInt(e.toString(),10)]);else this.diagram.insertBlazorConnector(t)},t.prototype.drag=function(t,e,i){var n;if(Nn(t)&&this.checkBoundaryConstraints(e,i,t.wrapper.bounds)&&Gn(this.diagram))if(t instanceof Pw){var r={offsetX:t.offsetX,offsetY:t.offsetY};if(t.offsetX+=e,t.offsetY+=i,t.children&&!t.container){Ur(this.diagram,t,!0)||(this.diagram.diagramActions=this.diagram.diagramActions|Og.isGroupDragging);for(var o=this.getAllDescendants(t,[]),s=0;s<o.length;s++)n=this.diagram.nameTable[o[parseInt(s.toString(),10)].id],this.drag(n,e,i);this.updateInnerParentProperties(t),this.diagram.diagramActions=this.diagram.diagramActions&~Og.isGroupDragging}if(Ur(this.diagram,t,!0)?Vr(this.diagram,t):(t&&t.shape&&"UmlClassifier"===t.shape.type&&(t.wrapper.measureChildren=!0),this.diagram.nodePropertyChange(t,r,{offsetX:t.offsetX,offsetY:t.offsetY},void 0,void 0,!1),t.wrapper.measureChildren=!1),"SwimLane"===t.shape.type&&!this.diagram.currentSymbol){var a=t.wrapper.children[0];ur(sr(this.diagram,a),this.diagram)}}else{var l=t,h=(r={sourcePoint:l.sourcePoint,targetPoint:l.targetPoint},"Bezier"===l.type),c=!1;l.sourceWrapper?c=!0:this.dragSourceEnd(l,e,i,!0,null,"",h),l.targetWrapper?c=!0:this.dragTargetEnd(l,e,i,!0,null,"",h);var d=!1;if(t instanceof ES&&(d=!0),!c||d){this.dragControlPoint(l,e,i,!0);var p={sourcePoint:l.sourcePoint,targetPoint:l.targetPoint};this.diagram.connectorPropertyChange(l,r,p)}}},t.prototype.connectorSegmentChange=function(t,e,i){var n,r,o=!0;if(!1===e.equals(e,t.wrapper.bounds)&&t.outEdges.length>0)for(var s=0;s<t.outEdges.length;s++){var a=this.diagram.nameTable[t.outEdges[parseInt(s.toString(),10)]];if(o=""!==a.targetID?!this.isSelected(this.diagram.nameTable[a.targetID]):!this.isSelected(this.diagram.nameTable[a.id]),"Orthogonal"===a.type&&a.segments&&a.segments.length>1)if(i){var l=a.segments[0],h=a.segments[1],c=me(ne(t.wrapper,t.wrapper.corners,t.wrapper.bounds),l.direction),d=xe({corners:void 0,point:c=ve(a,a.sourceWrapper,c,{x:a.sourceWrapper.offsetX,y:a.sourceWrapper.offsetY},!1),margin:void 0,direction:l.direction},{corners:void 0,point:h.points[1],margin:void 0,direction:void 0});l.length=Gu.distancePoints(d[0],d[1]),h.direction&&h.length&&(h.length=Gu.distancePoints(d[1],d[2]))}else if(o){switch(a.segments[0].direction){case"Bottom":n=t.wrapper.bounds.bottomCenter.x-e.bottomCenter.x,r=t.wrapper.bounds.bottomCenter.y-e.bottomCenter.y;break;case"Top":n=t.wrapper.bounds.topCenter.x-e.topCenter.x,r=t.wrapper.bounds.topCenter.y-e.topCenter.y;break;case"Left":n=t.wrapper.bounds.middleLeft.x-e.middleLeft.x,r=t.wrapper.bounds.middleLeft.y-e.middleLeft.y;break;case"Right":n=t.wrapper.bounds.middleRight.x-e.middleRight.x,r=t.wrapper.bounds.middleRight.y-e.middleRight.y}this.dragSourceEnd(a,n,r,!0,null,"ConnectorSourceEnd",void 0,void 0,void 0,!(t.parentId&&this.diagram.diagramActions&Og.isGroupDragging))}}},t.prototype.updateEndPoint=function(t,e){t.sourcePoint,t.targetPoint,t.sourceID&&t.sourceID,t.targetID&&t.targetID,t.sourcePortID&&t.sourcePortID,t.targetPortID&&t.targetPortID,t.segments&&t.segments;var i={sourcePoint:t.sourcePoint,targetPoint:t.targetPoint};t.sourceID&&(i.sourceID=t.sourceID),t.targetID&&(i.targetID=t.targetID),t.sourcePortID&&(i.sourcePortID=t.sourcePortID),t.targetPortID&&(i.targetPortID=t.targetPortID),t.segments&&(i.segments=t.segments),this.diagram.connectorPropertyChange(t,e||{},i),this.diagram.updateSelector()},t.prototype.dragSourceEnd=function(t,e,i,n,r,o,s,a,l,h,c){var d=this.diagram.nameTable[t.id],p={},u=this.checkBoundaryConstraints(e,i,d.wrapper.bounds);if(Tn(d)&&u&&"BezierSourceThumb"!==o&&Gn(this.diagram)&&(p=fa(p={sourcePoint:d.sourcePoint}),d.sourcePoint.x+=e,d.sourcePoint.y+=i,"ConnectorSourceEnd"===o&&"Orthogonal"===d.type&&this.changeSegmentLength(d,a,l,h),"Bpmn"===d.shape.type&&"Default"===d.shape.sequence&&"Sequence"===d.shape.flow&&this.updatePathElementOffset(d)),"Bezier"===d.type)if(p={sourcePoint:d.sourcePoint},c)this.translateBezierPoints(t,""===o?"ConnectorSourceEnd":o,e,i,c,r,!s);else for(var g=0;g<t.segments.length;g++)this.translateBezierPoints(t,""===o?"ConnectorSourceEnd":o,e,i,t.segments[parseInt(g.toString(),10)],r,!s);return n||this.updateEndPoint(d,p),this.diagram.realActions&Ag.AnimationClick||this.diagram.refreshCanvasLayers(),u},t.prototype.updatePathElementOffset=function(t){t.wrapper.children.splice(3,1);var e=new rm,i=t.intermediatePoints;e=QS(i,t),t.wrapper.children.splice(3,0,e)},t.prototype.changeSegmentLength=function(t,e,i,n){var r=!e||this.canConnect(t,e);if(t.segments&&null!==t.segments[0].direction&&(!e&&""===t.sourceID||n)&&r){var o=t.segments[0],s=t.segments[1],a=this.diagram.nameTable[t.sourceID],l=void 0;if(o.points[0]=t.sourcePoint,"Top"===o.direction||"Bottom"===o.direction?(o.points[o.points.length-1].x=t.sourcePoint.x,s.points[0].y=o.points[o.points.length-1].y):(o.points[o.points.length-1].y=t.sourcePoint.y,s.points[0].x=o.points[o.points.length-1].x),o.direction&&(o.length||0===o.length)&&(o.length=Gu.distancePoints(o.points[0],o.points[o.points.length-1])),s.direction&&(s.length||0===s.length)&&(s.length=Gu.distancePoints(o.points[o.points.length-1],s.points[s.points.length-1]),s.direction=Gu.direction(o.points[o.points.length-1],s.points[s.points.length-1])),""!==t.sourcePortID&&o.length<10)if(t.segments.length>2){var h=t.segments[2],c=Gu.direction(h.points[0],h.points[1]);o.direction===ke(c)?("Right"===o.direction?h.points[0].x=o.points[o.points.length-1].x=a.wrapper.corners.middleRight.x+20:"Left"===o.direction?h.points[0].x=o.points[o.points.length-1].x=a.wrapper.corners.middleLeft.x-20:"Top"===o.direction?h.points[0].y=o.points[o.points.length-1].y=a.wrapper.corners.topCenter.y-20:h.points[0].y=o.points[o.points.length-1].y=a.wrapper.corners.bottomCenter.y+20,h.direction&&h.length&&(h.length=Gu.distancePoints(h.points[0],h.points[h.points.length-1])),o.length=Gu.distancePoints(o.points[0],o.points[o.points.length-1])):o.direction===c&&h.direction&&h.length?("Top"===o.direction||"Bottom"===o.direction?(h.points[0]=o.points[0],h.points[h.points.length-1].x=h.points[0].x):(h.points[0]=o.points[0],h.points[h.points.length-1].y=h.points[0].y),h.length=Gu.distancePoints(h.points[0],h.points[h.points.length-1]),t.segments.splice(0,2)):o.length=20}else o.length=20;else if(o.length<1)if(""!==t.sourceID){if("Right"===s.direction?(l=a.wrapper.corners.middleRight,s.points[s.points.length-1].y=l.y):"Left"===s.direction?(l=a.wrapper.corners.middleLeft,s.points[s.points.length-1].y=l.y):"Top"===s.direction?(l=a.wrapper.corners.topCenter,s.points[s.points.length-1].x=l.x):(l=a.wrapper.corners.bottomCenter,s.points[s.points.length-1].x=l.x),s.length=Gu.distancePoints(l,s.points[s.points.length-1]),t.segments.length>2){(h=t.segments[2]).direction&&h.length&&(h.length=Gu.distancePoints(s.points[s.points.length-1],h.points[h.points.length-1]))}t.segments.splice(0,1)}else t.segments.splice(0,1)}else e&&!i&&t.sourceID!==e.id&&t.segments&&null!==t.segments[0].direction&&e&&e instanceof Pw&&r&&this.changeSourceEndToNode(t,e),e&&i&&t.sourcePortID!==i&&t.segments&&null!==t.segments[0].direction&&e&&e instanceof Pw&&r&&this.changeSourceEndToPort(t,e,i)},t.prototype.canConnect=function(t,e){return!(!kn(e)||!Pn(e))},t.prototype.changeSourceEndToPort=function(t,e,i){var n=this.diagram.getWrapper(e.wrapper,i),r={x:n.offsetX,y:n.offsetY},o=Ae(r,ga(e.wrapper),e.wrapper.bounds),s=t.segments[0],a=t.segments[1];if(s.direction!==o){var l=[],h={};if(s.direction===ke(o)){h={};var c=void 0;"Top"===o||"Bottom"===o?(c="Top"===o?{type:"Orthogonal",isTerminal:!0,direction:o,length:Math.abs(s.points[0].y-r.y)}:{type:"Orthogonal",isTerminal:!0,direction:o,length:Math.abs(r.y-s.points[0].y)},h=s.points[0].x>r.x?{type:"Orthogonal",isTerminal:!0,direction:"Right",length:s.points[0].x-r.x}:{type:"Orthogonal",isTerminal:!0,direction:"Left",length:r.x-s.points[0].x}):(c="Right"===o?{type:"Orthogonal",isTerminal:!0,direction:o,length:Math.abs(s.points[0].x-r.x)}:{type:"Orthogonal",isTerminal:!0,direction:o,length:Math.abs(r.x-s.points[0].x)},h=s.points[0].y>r.y?{type:"Orthogonal",direction:"Top",isTerminal:!0,length:s.points[0].y-r.y}:{type:"Orthogonal",direction:"Bottom",isTerminal:!0,length:r.y-s.points[0].y}),l.push(new wS(t,"segments",c,!0)),l.push(new wS(t,"segments",h,!0))}else h={type:"Orthogonal",direction:o,length:20,isTerminal:!0},l.push(new wS(t,"segments",h,!0));s.direction!==ke(o)&&("Top"===o||"Bottom"===o?(s.points[0].x=r.x,s.points[0].y=s.points[s.points.length-1].y="Top"===o?r.y-20:r.y+20):(s.points[0].y=r.y,s.points[0].x=s.points[s.points.length-1].x="Right"===o?r.x+20:r.x-20),s.length=Gu.distancePoints(s.points[0],s.points[s.points.length-1]),a.length=Gu.distancePoints(s.points[s.points.length-1],a.points[a.points.length-1])),t.segments=l.concat(t.segments)}else s.points[0]=r,"Top"===o||"Bottom"===o?s.points[s.points.length-1].x=r.x:s.points[s.points.length-1].y=r.y,s.length=Gu.distancePoints(s.points[0],s.points[s.points.length-1]),a.length=Gu.distancePoints(s.points[s.points.length-1],a.points[a.points.length-1])},t.prototype.removeTerminalSegment=function(t,e){for(var i=0;i<t.segments.length-2;i++){var n=t.segments[0];n.isTerminal&&(e?n.isTerminal=!1:(t.segments.splice(i,1),i--))}},t.prototype.changeSourceEndToNode=function(t,e){this.removeTerminalSegment(t);var i,n,r=e.wrapper.children[0].corners,o=t.segments[0],s=t.segments[1],a=[];if("Right"===o.direction||"Left"===o.direction)if(i="Left"===o.direction?r.middleLeft:r.middleRight,o.length>r.width||"Left"===o.direction&&i.x>=o.points[0].x||"Right"===o.direction&&i.x<=o.points[0].x)o.points[0].y=o.points[o.points.length-1].y=i.y,o.points[0].x=i.x,o.length=Gu.distancePoints(o.points[0],o.points[o.points.length-1]),s.length=Gu.distancePoints(o.points[o.points.length-1],s.points[s.points.length-1]);else{var l=void 0;n="Bottom"===(l=s.direction?s.direction:Gu.direction(s.points[0],s.points[s.points.length-1]))?r.bottomCenter:r.topCenter,s.length&&s.direction&&(s.length="Top"===l?o.points[o.points.length-1].y-(n.y+20):n.y+20-o.points[o.points.length-1].y),o.length=o.points[o.points.length-1].x-n.x,o.direction=o.length>0?"Right":"Left";var h={type:"Orthogonal",direction:l,length:20};a.push(new wS(t,"segments",h,!0)),t.segments=a.concat(t.segments)}else if(i="Bottom"===o.direction?r.bottomCenter:r.topCenter,o.length>r.height||"Top"===o.direction&&i.y>=o.points[0].y||"Bottom"===o.direction&&i.y<=o.points[0].y)o.points[0].x=o.points[o.points.length-1].x=i.x,o.points[0].y=i.y,o.length=Gu.distancePoints(o.points[0],o.points[o.points.length-1]),s.length=Gu.distancePoints(o.points[o.points.length-1],s.points[s.points.length-1]);else{n="Left"===s.direction?r.middleLeft:r.middleRight;l=void 0;l=s.direction?s.direction:Gu.direction(s.points[0],s.points[s.points.length-1]),s.length&&s.direction&&(s.length="Left"===l?o.points[o.points.length-1].x-(n.x+20):n.x+20-o.points[o.points.length-1].x),o.length=o.points[o.points.length-1].y-n.y,o.direction=o.length>0?"Bottom":"Top";h={type:"Orthogonal",direction:l,length:20};a.push(new wS(t,"segments",h,!0)),t.segments=a.concat(t.segments)}},t.prototype.translateBezierPoints=function(t,e,i,n,r,o,s){var a=t.segments.indexOf(r),l=t.segments[parseInt(a.toString(),10)],h=a>0?t.segments[a-1]:null,c=null!==h?h.point:t.sourcePoint,d=a===t.segments.length-1?t.targetPoint:l.point;if(l)if("BezierSourceThumb"===e&&(l.vector1.angle||l.vector1.distance)){var p=l.vector1.distance,u=l.vector1.angle;l.vector1={distance:t.distance(c,o),angle:Gu.findAngle(c,o)};var g=l.vector1.distance-p,m=l.vector1.angle-u;this.translateSubsequentSegment(t,r,!0,g,m)}else if("BezierTargetThumb"===e&&(l.vector2.angle||l.vector2.distance)){p=l.vector2.distance,u=l.vector2.angle;l.vector2={distance:t.distance(d,o),angle:Gu.findAngle(d,o)};g=l.vector2.distance-p,m=l.vector2.angle-u;this.translateSubsequentSegment(t,r,!1,g,m)}else("ConnectorSourceEnd"===e&&!t.sourceID||"ConnectorTargetEnd"===e&&!t.targetID)&&s&&io(l.vector1)&&io(l.vector2)?(Gu.isEmptyPoint(l.point1)&&(l.bezierPoint1=no(t.sourcePoint,t.targetPoint)),Gu.isEmptyPoint(l.point2)&&(l.bezierPoint2=no(t.targetPoint,t.sourcePoint))):"BezierSourceThumb"===e||"ConnectorSourceEnd"===e&&!s&&io(l.vector1)?(l.bezierPoint1.x+=i,l.bezierPoint1.y+=n,Gu.isEmptyPoint(l.point1)&&!s||(l.point1={x:l.bezierPoint1.x,y:l.bezierPoint1.y})):("BezierTargetThumb"===e||"ConnectorTargetEnd"===e&&!s&&io(l.vector2))&&(l.bezierPoint2.x+=i,l.bezierPoint2.y+=n,Gu.isEmptyPoint(l.point2)&&!s||(l.point2={x:l.bezierPoint2.x,y:l.bezierPoint2.y}))},t.prototype.translateSubsequentSegment=function(t,e,i,n,r){var o=t.segments.indexOf(e);t.segments[parseInt(o.toString(),10)];t.bezierSettings.smoothness&Vg.SymmetricAngle||(r=null),t.bezierSettings.smoothness&Vg.SymmetricDistance||(n=null),null==n&&null==r||(i?0!==o&&this.updatePreviousBezierSegment(t,o,n,r):o!==t.segments.length-1&&this.updateNextBezierSegment(t,o,n,r))},t.prototype.updatePreviousBezierSegment=function(t,e,i,n){var r=t.segments[e-1],o=r.vector2.distance+i,s=(r.vector2.angle+n)%360;s<0&&(s+=360),r.vector2={distance:o,angle:s}},t.prototype.updateNextBezierSegment=function(t,e,i,n){var r=t.segments[e+1],o=r.vector1.distance+i,s=(r.vector1.angle+n)%360;s<0&&(s+=360),r.vector1={distance:o,angle:s}},t.prototype.dragTargetEnd=function(t,e,i,n,r,o,s,a){var l,h=this.diagram.nameTable[t.id],c=this.checkBoundaryConstraints(e,i,h.wrapper.bounds);if(On(h)&&"BezierTargetThumb"!==o&&c&&Gn(this.diagram)){if(l={targetPoint:h.targetPoint},l=fa(l),h.targetPoint.x+=e,h.targetPoint.y+=i,"ConnectorTargetEnd"===o&&"Orthogonal"===h.type&&h.segments&&h.segments.length>0){var d=h.segments[h.segments.length-2];d&&2===h.segments[h.segments.length-1].points.length&&("Left"===d.direction||"Right"===d.direction?d.points[d.points.length-1].x=h.targetPoint.x:d.points[d.points.length-1].y=h.targetPoint.y,d.length=Gu.distancePoints(d.points[0],d.points[d.points.length-1]),d.direction=Gu.direction(d.points[0],d.points[d.points.length-1]))}"Bpmn"===h.shape.type&&"Default"===h.shape.sequence&&"Sequence"===h.shape.flow&&this.updatePathElementOffset(h)}if("Bezier"===h.type)if(l={targetPoint:h.targetPoint},a)this.translateBezierPoints(t,""===o?"ConnectorTargetEnd":o,e,i,a,r,!s);else for(var p=0;p<t.segments.length;p++)this.translateBezierPoints(t,""===o?"ConnectorTargetEnd":o,e,i,t.segments[parseInt(p.toString(),10)],r,!s);return n||this.updateEndPoint(h,l),this.diagram.realActions&Ag.AnimationClick||this.diagram.refreshCanvasLayers(),c},t.prototype.dragControlPoint=function(t,e,i,n,r){var o=this.diagram.nameTable[t.id];if(("Straight"===o.type||"Bezier"===o.type)&&o.segments.length>0){if(void 0!==r&&o.segments[parseInt(r.toString(),10)])if("Bezier"===o.type){var s=o.segments[parseInt(r.toString(),10)],a=s.isInternalSegment;a&&null!==o.bezierSettings&&"FreeForm"!==o.bezierSettings.segmentEditOrientation?("Horizontal"===s.orientation?s.point.x+=e:s.point.y+=i,this.updateDirectionalBezierCurve(o)):(s.point.x+=e,s.point.y+=i),a&&(o.isBezierEditing=!0)}else o.segments[parseInt(r.toString(),10)].point.x+=e,o.segments[parseInt(r.toString(),10)].point.y+=i;else for(var l=0;l<o.segments.length-1;l++)o.segments[parseInt(l.toString(),10)].point.x+=e,o.segments[parseInt(l.toString(),10)].point.y+=i;n||this.updateEndPoint(o)}return!0},t.prototype.updateDirectionalBezierCurve=function(t){if(!(t.segments.length<2)){var e=[];e.push(t.sourcePoint);for(var i=0;i<t.segments.length-1;i++){var n=t.segments[parseInt(i.toString(),10)];"Horizontal"===n.orientation?e.push({x:n.point.x,y:e[e.length-1].y}):e.push({x:e[e.length-1].x,y:n.point.y}),i===t.segments.length-2&&("Horizontal"===n.orientation?e.push({x:n.point.x,y:t.targetPoint.y}):e.push({x:t.targetPoint.x,y:n.point.y}))}e.push(t.targetPoint);var r=e[0],o=e[e.length-1];if(t.segments.length>1){var s=e[1],a=e[2],l={x:.5*(s.x+a.x),y:.5*(s.y+a.y)},h=t.segments[0];h.vector1.angle=ge(r,s),h.vector1.distance=.5*Gu.findLength(r,s),h.vector2.angle=ge(l,s),h.vector2.distance=.5*Gu.findLength(l,s),h.point=l;var c=t.segments[1];if(c.vector1.angle=ge(l,a),c.vector1.distance=.5*Gu.findLength(l,a),t.segments.length>2){var d=e[3],p={x:.5*(a.x+d.x),y:.5*(a.y+d.y)};c.vector2.angle=ge(p,a),c.vector2.distance=.5*Gu.findLength(p,a),c.point=p;var u=t.segments[2];if(u.vector1.angle=ge(p,d),u.vector1.distance=.5*Gu.findLength(p,d),t.segments.length>3){var g=e[4],m={x:.5*(d.x+g.x),y:.5*(d.y+g.y)};u.vector2.angle=ge(m,d),u.vector2.distance=.5*Gu.findLength(m,d),u.point=m;var f=t.segments[3];f.vector1.angle=ge(m,g),f.vector1.distance=.5*Gu.findLength(m,g),f.vector2.angle=ge(o,g),f.vector2.distance=.5*Gu.findLength(o,g)}else u.vector2.angle=ge(o,d),u.vector2.distance=.5*Gu.findLength(o,d)}else c.vector2.angle=ge(o,a),c.vector2.distance=.5*Gu.findLength(o,a)}}},t.prototype.rotatePropertyChnage=function(t){var e=this.diagram.selectedItems,i=[];i=(i=i.concat(e.nodes)).concat(e.connectors);var n={x:e.offsetX,y:e.offsetY};this.rotateObjects(e,i,t-e.rotateAngle,n),e.wrapper.rotateAngle=e.rotateAngle=t,this.diagram.updateSelector()},t.prototype.rotateObjects=function(t,e,i,n,r){n=n||{};var o=Lt();kt(o,i,n.x,n.y);for(var s=0,a=e;s<a.length;s++){var l=a[s];if(l instanceof Pw){if(An(l)&&Gn(this.diagram)){if(!1!==r||t!==l){({rotateAngle:l.rotateAngle}),l.rotateAngle+=i,l.rotateAngle=(l.rotateAngle+360)%360;var h=At(o,{x:l.offsetX,y:l.offsetY});l.offsetX=h.x,l.offsetY=h.y,this.diagram.nodePropertyChange(l,{},{offsetX:l.offsetX,offsetY:l.offsetY,rotateAngle:l.rotateAngle})}if(l.processId){var c=this.diagram.nameTable[l.processId],d=this.diagram.bpmnModule.getChildrenBound(c,l.id,this.diagram);this.diagram.bpmnModule.updateSubProcessess(d,l,this.diagram)}l.children&&l.children.length&&!l.container&&this.getChildren(l,e)}}else this.rotatePoints(l,i,n||{x:l.wrapper.offsetX,y:l.wrapper.offsetY});this.diagram.updateDiagramObject(l)}this.diagram.refreshCanvasLayers(),this.diagram.updateSelector()},t.prototype.snapConnectorEnd=function(t){return this.diagram.snapSettings.constraints&mg.SnapToLines&&this.snappingModule&&this.diagram.snappingModule.snapConnectorEnd(t),t},t.prototype.snapAngle=function(t){return this.diagram.snapSettings.constraints&mg.SnapToLines&&this.snappingModule?this.snappingModule.snapAngle(this.diagram,t):0},t.prototype.rotatePoints=function(t,e,i){if(!t.sourceWrapper||!t.targetWrapper){var n=Lt();kt(n,e,i.x,i.y),t.sourcePoint=At(n,t.sourcePoint),t.targetPoint=At(n,t.targetPoint),"Bpmn"===t.shape.type&&"Default"===t.shape.sequence&&"Sequence"===t.shape.flow&&this.updatePathElementOffset(t);var r={sourcePoint:t.sourcePoint,targetPoint:t.targetPoint};if(this.diagram.connectorPropertyChange(t,{},r),t.segments&&t.segments.length>0){this.diagram.protectPropertyChange(!0);var o=t;o.segments=[],this.diagram.connectorPropertyChange(o,{},{segments:o.segments}),this.diagram.protectPropertyChange(!1)}}},t.prototype.updateInnerParentProperties=function(t){var e=this.diagram.isProtectedOnChange;this.diagram.protectPropertyChange(!0);for(var i=this.getAllDescendants(t,[],!1,!0),n=0;n<i.length;n++){var r=this.diagram.nameTable[i[parseInt(n.toString(),10)].id];r.offsetX=r.wrapper.offsetX,r.offsetY=r.wrapper.offsetY,r.width=r.wrapper.width,r.height=r.wrapper.height}this.diagram.protectPropertyChange(e)},t.prototype.scale=function(t,e,i,n,r,o){var s=this.diagram.nameTable[t.id],a=s,l=s.wrapper;r||(r=t);var h=r.wrapper,c=Is(h.offsetX-h.actualSize.width*h.pivot.x,h.offsetY-h.actualSize.height*h.pivot.y,h.actualSize.width,h.actualSize.height,h.rotateAngle,h.offsetX,h.offsetY,n);if(void 0!==l.actualSize.width&&void 0!==l.actualSize.height&&Gn(this.diagram)){if(a.children&&!a.container){for(var d=0,p=this.getAllDescendants(a,[]);d<p.length;d++){var u=p[d];this.scaleObject(e,i,c,u,l,r)}t.wrapper.measure(new Qu),t.wrapper.arrange(t.wrapper.desiredSize),this.diagram.updateGroupOffset(s),this.updateInnerParentProperties(a)}else this.scaleObject(e,i,c,s,l,r);var g=ma(t.wrapper);if(!this.checkBoundaryConstraints(void 0,void 0,g)&&o)return this.scale(t,1/e,1/i,n,void 0,!0),!1;this.diagram.updateDiagramObject(t)}return!0},t.prototype.getAllDescendants=function(t,e,i,n){for(var r=t,o=[],s=0;s<r.children.length;s++)(t=this.diagram.nameTable[r.children[parseInt(s.toString(),10)]])&&(t.children?(i&&e.push(t),n&&o.push(t),e=this.getAllDescendants(t,e)):e.push(t));return n?o:e},t.prototype.getChildren=function(t,e){var i=t;if(t.children)for(var n=0;n<i.children.length;n++)t=this.diagram.nameTable[i.children[parseInt(n.toString(),10)]],e.push(t);return e},t.prototype.cloneChild=function(t){return this.diagram.nameTable[""+t]},t.prototype.scaleObject=function(t,e,i,n,r,o,s){t=t<0?1:t,e=e<0?1:e;var a={};if(1!==t||1!==e){var l=void 0,h=void 0;if(n instanceof Pw){var c=n,d=void 0,p=void 0;a={width:n.wrapper.actualSize.width,height:n.wrapper.actualSize.height,offsetX:n.wrapper.offsetX,offsetY:n.wrapper.offsetY,margin:{top:c.margin.top,left:c.margin.left}},"Bpmn"===c.shape.type&&c.shape.activity.subProcess.processes&&c.shape.activity.subProcess.processes.length>0&&(p=this.diagram.bpmnModule.getChildrenBound(c,c.id,this.diagram),d=c.wrapper.bounds.containsRect(p)),l=c.wrapper.actualSize.width*t,h=c.wrapper.actualSize.height*e,void 0!==c.maxWidth&&0!==c.maxWidth&&(l=Math.min(c.maxWidth,l)),void 0!==c.minWidth&&0!==c.minWidth&&(l=Math.max(c.minWidth,l)),void 0!==c.maxHeight&&0!==c.maxHeight&&(h=Math.min(c.maxHeight,h)),void 0!==c.minHeight&&0!==c.minHeight&&(h=Math.max(c.minHeight,h)),d&&(l=Math.max(l,p.right-c.wrapper.bounds.x),h=Math.max(h,p.bottom-c.wrapper.bounds.y)),t=l/c.actualSize.width,e=h/c.actualSize.height}var u=Lt();o||(o=n);var g=o.wrapper;if(kt(u,-g.rotateAngle,i.x,i.y),jt(u,t,e,i.x,i.y),kt(u,g.rotateAngle,i.x,i.y),n instanceof Pw){var m=At(u,{x:(c=n).wrapper.offsetX,y:c.wrapper.offsetY}),f=c.wrapper.offsetX-c.wrapper.actualSize.width*c.pivot.x,v=c.wrapper.offsetY-c.wrapper.actualSize.height*c.pivot.y;if(l>0)if(c.processId){var y=this.diagram.nameTable[c.processId];(!y.maxWidth||c.margin.left+l<y.maxWidth)&&(c.width=l,c.offsetX=m.x)}else c.width=l,c.offsetX=m.x;if(h>0)if(c.processId){var b=this.diagram.nameTable[c.processId];(!b.maxHeight||c.margin.top+h<b.maxHeight)&&(c.height=h,c.offsetY=m.y)}else c.height=h,c.offsetY=m.y;var S=c.wrapper.offsetX-c.wrapper.actualSize.width*c.pivot.x,w=c.wrapper.offsetY-c.wrapper.actualSize.height*c.pivot.y;this.diagram.nameTable[c.processId]&&(c.margin.top+(w-v)<=0||c.margin.left+(S-f)<=0)?this.diagram.nodePropertyChange(n,{},{margin:{top:c.margin.top,left:c.margin.left}}):Ur(this.diagram,n,!0)?Vr(this.diagram,n):s||this.diagram.nodePropertyChange(n,a,{width:c.width,height:c.height,offsetX:c.offsetX,offsetY:c.offsetY,margin:{top:c.margin.top+(w-v),left:c.margin.left+(S-f)}})}else{var I=n,x={sourcePoint:I.sourcePoint,targetPoint:I.targetPoint};I.sourceWrapper&&I.targetWrapper||this.scaleConnector(I,u,x,t,e,i)}var M=this.diagram.nameTable[n.processId];if(M){M.wrapper.bounds,n.wrapper.bounds,p=this.diagram.bpmnModule.getChildrenBound(M,n.id,this.diagram);this.diagram.bpmnModule.updateSubProcessess(p,n,this.diagram)}}},t.prototype.scaleConnector=function(t,e,i,n,r,o){t.sourcePoint=At(e,t.sourcePoint),t.targetPoint=At(e,t.targetPoint),"Bpmn"===t.shape.type&&"Default"===t.shape.sequence&&"Sequence"===t.shape.flow&&this.updatePathElementOffset(t);var s={sourcePoint:t.sourcePoint,targetPoint:t.targetPoint};this.diagram.connectorPropertyChange(t,i,s);var a=this.diagram.selectedItems;if(Ts(this.diagram,a)){var l=fa(this.diagram.selectedItems),h={offsetX:l.offsetX,offsetY:l.offsetY,height:l.height,width:l.width,rotateAngle:l.rotateAngle},c=new Pw(this.diagram,"nodes",h,!0);c.wrapper=l.wrapper,c.wrapper.rotateAngle=a.rotateAngle,this.scaleObject(n,r,o,c,c.wrapper,c,!0),a.wrapper.actualSize.width=c.width,a.wrapper.actualSize.height=c.height,a.wrapper.offsetX=c.offsetX,a.wrapper.offsetY=c.offsetY;this.diagram.selectedItems.connectors[0].id!==t.id&&this.measureSelector(a)}},t.prototype.measureSelector=function(t){var e,i=void 0,n=[];n=fa(this.diagram.selectedItems).connectors;for(var r={x:this.diagram.selectedItems.offsetX,y:this.diagram.selectedItems.offsetY},o=0;o<n.length;o++){var s=Lt();kt(s,-t.rotateAngle,r.x,r.y),n[parseInt(o.toString(),10)].sourcePoint=At(s,n[parseInt(o.toString(),10)].sourcePoint),n[parseInt(o.toString(),10)].targetPoint=At(s,n[parseInt(o.toString(),10)].targetPoint);var a={x:n[parseInt(o.toString(),10)].sourcePoint.x,y:n[parseInt(o.toString(),10)].sourcePoint.y},l={x:n[parseInt(o.toString(),10)].targetPoint.x,y:n[parseInt(o.toString(),10)].targetPoint.y};e=this.calculateBounds(a,l),void 0===i?i=e:i.uniteRect(e)}var h={};void 0!==i&&(h={x:i.x+i.width*t.wrapper.pivot.x,y:i.y+i.height*t.wrapper.pivot.y});var c={offsetX:h.x,offsetY:h.y,height:i.height,width:i.width,rotateAngle:0},d=new Pw(this.diagram,"nodes",c,!0),p=Lt();kt(p,t.rotateAngle,r.x,r.y),d.rotateAngle+=t.rotateAngle,d.rotateAngle=(d.rotateAngle+360)%360;var u=At(p,{x:d.offsetX,y:d.offsetY});d.offsetX=u.x,d.offsetY=u.y,t.wrapper.actualSize.width=i.width,t.wrapper.actualSize.height=i.height,t.wrapper.offsetX=d.offsetX,t.wrapper.offsetY=d.offsetY;var g=Fs(this.diagram.element.id);this.diagram.diagramRenderer.renderResizeHandle(t.wrapper,g,t.thumbsConstraints,this.diagram.scroller.currentZoom,t.constraints,this.diagram.scroller.transform,!1,Nn(t),null,null,t.handleSize)},t.prototype.calculateBounds=function(t,e){var i=Math.min(t.x,e.x),n=Math.max(t.x,e.x),r=Math.min(t.y,e.y),o=Math.max(t.y,e.y);return new Zu(i,r,n-i,o-r)},t.prototype.portDrag=function(t,e,i,n){var r,o,s=this.findTarget(e,t),a=ma(t.wrapper);s&&$n(s,this.diagram)&&(r=this.getPortChanges(t,s),s.offset.x+=i/a.width,s.offset.y+=n/a.height,o=this.getPortChanges(t,s),this.diagram.nodePropertyChange(t,r,o),this.diagram.updateDiagramObject(t))},t.prototype.labelDrag=function(t,e,i,n){var r=this.findTarget(e,t),o=ga(t.wrapper),s=this.getAnnotationChanges(t,r);r instanceof vm?(r.offset.x+=i/o.width,r.offset.y+=n/o.height):(this.updatePathAnnotationOffset(t,r,i,n),r instanceof ym&&(r.alignment="Center"));var a=this.getAnnotationChanges(t,r);t instanceof Pw?this.diagram.nodePropertyChange(t,s,a):this.diagram.connectorPropertyChange(t,s,a),this.diagram.updateDiagramObject(t),Jr(this.diagram,r,!1,e)||this.labelSelect(t,e)},t.prototype.updatePathAnnotationOffset=function(t,e,i,n,r,o){var s,a,l,h,c=this.diagram.getWrapper(t.wrapper,e.id),d=c.offsetX,p=c.offsetY,u=t.intermediatePoints,g=0,m=0;switch(e.verticalAlignment){case"Center":"Center"===e.horizontalAlignment?h=r||{x:d+i,y:p+n}:"Right"===e.horizontalAlignment?h=r||{x:d+c.actualSize.width/2+i,y:p+n}:"Left"===e.horizontalAlignment&&(h=r||{x:d-c.actualSize.width/2+i,y:p+n});break;case"Top":"Center"===e.horizontalAlignment?h=r||{x:d+i,y:p-c.actualSize.height/2+n}:"Right"===e.horizontalAlignment?h=r||{x:d+c.actualSize.width/2+i,y:p-c.actualSize.height/2+n}:"Left"===e.horizontalAlignment&&(h=r||{x:d-c.actualSize.width/2+i,y:p-c.actualSize.height/2+n});break;case"Bottom":"Center"===e.horizontalAlignment?h=r||{x:d+i,y:p+c.actualSize.height/2+n}:"Right"===e.horizontalAlignment?h=r||{x:d+c.actualSize.width/2+i,y:p+c.actualSize.height/2+n}:"Left"===e.horizontalAlignment&&(h=r||{x:d-c.actualSize.width/2+i,y:p+c.actualSize.height/2+n})}var f=this.getInterceptWithSegment(h,u),v=u[u.length-1];if(m=Gu.getLengthFromListOfPoints(u),f.length>0){if(e.dragLimit.top||e.dragLimit.bottom||e.dragLimit.left||e.dragLimit.right){var y={minDistance:null};v=this.getRelativeOffset(h,u,y);var b={minDistance:null};if(l=this.getRelativeOffset(h,f,b),null!=y&&b.minDistance<y.minDistance)v=l;else{v=Bo(t.intermediatePoints,e).point}}else v=l=f[f.length-1];if(v){var S=void 0;for(S=0;S<u.length;S++){if(null!=a){if(Zu.toBounds([a,u[parseInt(S.toString(),10)]]).containsPoint(v)){g+=Gu.findLength(a,v);break}g+=Gu.findLength(a,u[parseInt(S.toString(),10)])}a=u[parseInt(S.toString(),10)]}s={x:g/m,y:0}}this.updateLabelMargin(t,e,s,h,o,i,n)}else this.updateLabelMargin(t,e,null,h,o,i,n)},t.prototype.getRelativeOffset=function(t,e,i){var n,r,o,s;for(s=0;s<e.length;s++)o=e[parseInt(s.toString(),10)],r=Math.round(Math.sqrt(Math.pow(t.x-o.x,2)+Math.pow(t.y-o.y,2))),null!==i.minDistance&&Math.min(Math.abs(i.minDistance),Math.abs(r))!==Math.abs(r)||(n=o,i.minDistance=r);return n},t.prototype.dragLimitValue=function(t,e,i,n){var r=!1,o=!1;return i.x>=e.x-t.dragLimit.left-n.width/2&&i.x<=e.x+t.dragLimit.right+n.width/2&&(r=!0),i.y>=e.y-t.dragLimit.top-n.height/2&&i.y<=e.y+t.dragLimit.bottom+n.height/2&&(o=!0),{x:r,y:o}},t.prototype.updateLabelMargin=function(t,e,i,n,r,o,s){if(i=i||{x:e.offset,y:0},e&&i&&i.x>0&&i.x<1){var a=Gu.getLengthFromListOfPoints(t.intermediatePoints),l=this.getPointAtLength(a*i.x,t.intermediatePoints,0),h=this.diagram.scrollSettings.currentZoom,c=e.dragLimit;if(c.top||c.bottom||c.left||c.right){this.diagram.getWrapper(t.wrapper,e.id);var d=new Zu(0,0,0,0),p=this.diagram.getWrapper(t.wrapper,e.id);d.x=p.offsetX/h+o,d.y=p.offsetY/h+s,d.width=p.bounds.width/h,d.height=p.bounds.height/h;var u=new Zu(l.x-(c.left||0)-d.width/2,l.y-(c.top||0)-d.height/2,(c.left||0)+(c.right||0)+d.width,(c.top||0)+(c.bottom||0)+d.height);if(u.containsPoint(n))n=n;else for(var g=[l,n],m=0,f=this.boundsInterSects(g,u,!1);m<f.length;m++){n=f[m]}var v=this.dragLimitValue(e,l,n,d);e.margin={left:v.x?n.x-l.x:e.margin.left,top:v.y?n.y-l.y:e.margin.top,right:0,bottom:0}}else e.margin={left:n.x-l.x,top:n.y-l.y,right:0,bottom:0};e.offset=i.x,r&&(e.width=r.width,e.height=r.height)}},t.prototype.boundsInterSects=function(t,e,i){var n;if(e){var r=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height},{x:e.x,y:e.y}];n=this.intersect(t,r,i)}return n},t.prototype.intersect=function(t,e,i){for(var n=[],r=0;r<t.length-1;r++)for(var o=0;o<e.length-1;o++){var s=Oo(t[r],t[r+1],e[o],e[o+1]);0!==s.x&&0!==s.y&&n.push(s)}return n},t.prototype.getPointAtLength=function(t,e,i){for(var n,r,o=0,s={x:0,y:0},a=0;a<e.length;a++)if(r=e[a],n){var l=Gu.findLength(n,r),h=void 0,c=void 0,d=void 0,p=void 0;if(o+l>=t){h=t-o,c=Gu.findAngle(n,r),d=h*Math.cos(c*Math.PI/180),p=h*Math.sin(c*Math.PI/180),s={x:n.x+d,y:n.y+p},c;break}o+=l,n=r}else n=r;return s},t.prototype.getInterceptWithSegment=function(t,e){for(var i,n,r=[],o=[],s=[],a=Gu.findLength({x:0,y:0},{x:this.diagram.scroller.viewPortWidth,y:this.diagram.scroller.viewPortHeight}),l=1;l<e.length;l++){s=[e[l-1],e[l]],o=[],n=Math.round(Gu.findAngle(s[0],s[1])%360),i=Math.round(Gu.findAngle(s[1],s[0])%360);var h=n>0&&n<=90||n>180&&n<=270?90:-90;o.push(Gu.transform(t,n+h,a)),o.push(Gu.transform(t,i+h,a));var c=To({x1:s[0].x,y1:s[0].y,x2:s[1].x,y2:s[1].y},{x1:o[0].x,y1:o[0].y,x2:o[1].x,y2:o[1].y});c.enabled&&r.push(c.intersectPt)}return r},t.prototype.getAnnotationChanges=function(t,e){var i={};return i[us(t,e.id,!0)]={width:e.width,height:e.height,offset:t instanceof Pw?{x:e.offset.x,y:e.offset.y}:e.offset,rotateAngle:e.rotateAngle,margin:{left:e.margin.left,right:e.margin.right,top:e.margin.top,bottom:e.margin.bottom},horizontalAlignment:e.horizontalAlignment,verticalAlignment:e.verticalAlignment,alignment:t instanceof ES?e.alignment:void 0},{annotations:i}},t.prototype.getPortChanges=function(t,e){var i={};return i[us(t,e.id,!1)]={offset:e.offset},{ports:i}},t.prototype.labelRotate=function(t,e,i,n){var r,o;r=this.getAnnotationChanges(t,e);Lt(),e.rotateAngle;var s=this.diagram.getWrapper(t.wrapper,e.id),a=ge({x:s.offsetX,y:s.offsetY},i)+90,l=this.snapAngle(a);if(a=0!==l?l:a,e instanceof ym&&e.segmentAngle){a-=Ro(t.intermediatePoints,e,t.wrapper.bounds).angle}a=(a+360)%360,e.rotateAngle+=a-(e.rotateAngle+s.parentTransform),e instanceof ym&&(e.alignment="Center"),n.wrapper.rotateAngle=n.rotateAngle=e.rotateAngle,o=this.getAnnotationChanges(t,e),t instanceof Pw?this.diagram.nodePropertyChange(t,r,o):this.diagram.connectorPropertyChange(t,r,o),this.diagram.updateDiagramObject(t)},t.prototype.labelResize=function(t,e,i,n,r,o){var s,a,l;s=this.getAnnotationChanges(t,e);var h=o.wrapper.children[0];if(i&&1!==i||n&&1!==n){var c=Lt(),d=Lt();kt(c,-t.rotateAngle,t.offsetX,t.offsetY),kt(d,-(l=(h.rotateAngle+(t instanceof Pw?t.rotateAngle:0)+360)%360),r.x,r.y),jt(d,i,n,r.x,r.y),kt(d,l,r.x,r.y);var p=At(d,{x:h.offsetX,y:h.offsetY}),u=h.actualSize.height*n,g=h.actualSize.width*i,m=this.findTarget(h,t);if(m instanceof ym&&(p.y+="Top"===m.verticalAlignment?-u/2:"Bottom"===m.verticalAlignment?u/2:0,p.x+="Left"===m.horizontalAlignment?-g/2:"Right"===m.horizontalAlignment?g/2:0),m instanceof ym)this.updatePathAnnotationOffset(t,e,0,0,p,new Qu(g,u));else{var f=ga(t.wrapper);(p=At(c,p)).x=p.x-h.margin.left+h.margin.right,p.y=p.y-h.margin.top+h.margin.bottom,p.y+="Top"===m.verticalAlignment?-u/2:"Bottom"===m.verticalAlignment?u/2:0,p.x+="Left"===m.horizontalAlignment?-g/2:"Right"===m.horizontalAlignment?g/2:0;var v=f.width/(p.x-f.x),y=f.height/(p.y-f.y);g>1&&(m.width=g,m.offset.x=1/v),u>1&&(m.height=u,m.offset.y=1/y)}}e instanceof ym&&(e.alignment="Center"),a=this.getAnnotationChanges(t,e),t instanceof Pw?this.diagram.nodePropertyChange(t,s,a):this.diagram.connectorPropertyChange(t,s,a),this.diagram.updateDiagramObject(t)},t.prototype.getSubProcess=function(t){var e,i={nodes:[],connectors:[]};return t instanceof Pw?e=t.processId:t&&t.nodes&&t.nodes.length&&t.nodes[0].processId&&(e=t.nodes[0].processId),e?(i.nodes.push(fa(this.diagram.nameTable[e])),i):i},t.prototype.checkBoundaryConstraints=function(t,e,i){var n=this.diagram.pageSettings,r=this.diagram.pageSettings.boundaryConstraints,o=this.diagram.scroller;if("Page"===r||"Diagram"===r){var s=i?void 0:this.diagram.selectedItems.wrapper.bounds,a="Page"===r?n.width:o.viewPortWidth,l="Page"===r?n.height:o.viewPortHeight,h=i,c=(i?h.right:s.right)+(t||0),d=(i?h.left:s.left)+(t||0),p=(i?h.top:s.top)+(e||0),u=(i?h.bottom:s.bottom)+(e||0);return c<=a&&d>=0&&u<=l&&p>=0}return!0},t.prototype.dragSelectedObjects=function(t,e){var i=this.diagram.selectedItems;if(this.state&&!this.state.backup&&(this.state.backup={},this.state.backup.offsetX=i.offsetX,this.state.backup.offsetY=i.offsetY),i=Hr(this.diagram,i)||i,this.checkBoundaryConstraints(t,e)){this.diagram.diagramActions=this.diagram.diagramActions|Og.PreventZIndexOnDragging|Og.DragUsingMouse;var n=this.diagram.selectedObject.actualObject;return(n&&n instanceof Pw&&n.isLane&&kr(n,this.diagram)||!n||!n.isLane)&&this.diagram.drag(i,t,e),this.diagram.diagramActions=this.diagram.diagramActions&~(Og.PreventZIndexOnDragging|Og.DragUsingMouse),this.diagram.refreshCanvasLayers(),!0}return!1},t.prototype.scaleSelectedItems=function(t,e,i){var n=this.diagram.selectedItems;return this.state&&!this.state.backup&&(this.state.backup={},this.state.backup.offsetX=n.offsetX,this.state.backup.offsetY=n.offsetY,this.state.backup.width=n.width,this.state.backup.height=n.height,this.state.backup.pivot=i),n=Hr(this.diagram,n)||n,this.diagram.scale(n,t,e,i)},t.prototype.rotateSelectedItems=function(t){var e=this.diagram.selectedItems;return this.state&&!this.state.backup&&(this.state.backup={},this.state.backup.angle=e.rotateAngle),e=Hr(this.diagram,e)||e,this.diagram.rotate(e,t)},t.prototype.hasSelection=function(){return $r(this.diagram)},t.prototype.isSelected=function(t){return Jr(this.diagram,t)},t.prototype.initExpand=function(t){var e=this.diagram.isProtectedOnChange;this.diagram.protectPropertyChange(!0);var i=t.target||t.source,n={isExpanded:i.isExpanded};i.isExpanded=!i.isExpanded,this.diagram.preventNodesUpdate=!0,this.diagram.diagramActions|=Og.PreventIconsUpdate,this.diagram.nodePropertyChange(i,n,{isExpanded:i.isExpanded}),this.diagram.diagramActions=this.diagram.diagramActions&~Og.PreventIconsUpdate,this.diagram.preventNodesUpdate=!1;for(var r=0,o=this.diagram.views;r<o.length;r++){var s=o[r],a=this.diagram.views[s];a instanceof YI||this.diagram.refreshCanvasDiagramLayer(a)}this.diagram.protectPropertyChange(e)},t.prototype.expandNode=function(t,e,i){var n=this.diagram.preventNodesUpdate,r=t.isExpanded;this.diagram.preventNodesUpdate=!0,this.diagram.preventConnectorsUpdate=!0,this.expandCollapse(t,r,this.diagram),t.isExpanded=r;var o=this.diagram.layout.fixedNode;this.diagram.layout.fixedNode=t.id,this.diagram.diagramActions!=Og.Render&&this.diagram.layoutAnimateModule&&this.diagram.layout.enableAnimation&&this.diagram.organizationalChartModule&&(this.diagram.organizationalChartModule.isAnimation=!0),this.diagram.blazorActions|=$u.expandNode;var s={};if(i||(f()&&(this.canUpdateTemplate=!0),s=this.diagram.doLayout()),this.canUpdateTemplate=!1,this.diagram.blazorActions&=~$u.expandNode,this.diagram.preventNodesUpdate=n,this.diagram.preventConnectorsUpdate=!1,this.diagram.layoutAnimateModule&&this.diagram.organizationalChartModule&&!i)this.diagram.allowServerDataBinding=!1,this.layoutAnimateModule.expand(this.diagram.layout.enableAnimation,s,t,this.diagram);else{var a={element:xs(fa(t)),state:!!t.isExpanded};this.triggerEvent(jg.expandStateChange,a),this.diagram.lineRoutingModule&&this.diagram.constraints&Mg.LineRouting&&this.diagram.resetSegments()}return this.diagram.layout.fixedNode=""===o?"":this.diagram.layout.fixedNode,s},t.prototype.getparentexpand=function(t,e,i,n){for(var r,o=0;o<t.inEdges.length;o++){var s=e.nameTable[t.inEdges[o]],a=e.nameTable[s.sourceID];if(a.isExpanded&&!i&&a.id!==n.sourceID&&s.visible)return!1;r=!0}return r},t.prototype.expandCollapse=function(t,e,i){for(var n=0;n<t.outEdges.length;n++){var r=i.nameTable[t.outEdges[n]],o=i.nameTable[r.targetID],s=this.getparentexpand(o,i,e,r);r.visible=e;var a={visible:o.visible,style:{opacity:o.wrapper.style.opacity}},l={visible:o.visible,style:{opacity:o.wrapper.style.opacity}};s&&(o.isExpanded&&this.expandCollapse(o,e,i),o.visible=e,o.style.opacity=this.diagram.layoutAnimateModule&&this.diagram.layout.enableAnimation&&e?.1:o.style.opacity,i.nodePropertyChange(o,a,l)),i.connectorPropertyChange(r,a,l)}},t.prototype.updateNodeDimension=function(t,e){t instanceof Pw&&(t.offsetX=e.x+e.width/2,t.offsetY=e.y+e.height/2,t.width=e.width,t.height=e.height,t.wrapper.children[0].canMeasurePath=!0,this.diagram.nodePropertyChange(t,{},{width:e.width,height:e.height,offsetX:t.offsetX,offsetY:t.offsetY}),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer())},t.prototype.updateConnectorPoints=function(t,e){t instanceof ES&&"Bezier"!==t.type?(this.diagram.connectorPropertyChange(t,{},{targetPoint:t.targetPoint}),this.diagram.updateDiagramObject(t)):(this.diagram.connectorPropertyChange(t,{},{segments:t.segments}),this.diagram.updateDiagramObject(t))},t.prototype.updateSelectedNodeProperties=function(t){if(this.diagram.lineRoutingModule&&this.diagram.constraints&Mg.LineRouting){var e=[],i=[],n=[],r=[],o=[],s=[];this.diagram.protectPropertyChange(!0);var a=[],l=[],h=this.diagram.selectedObject.actualObject,c=this.diagram.selectedObject.helperObject;if(c&&h){var d=c.offsetX-h.offsetX,p=c.offsetY-h.offsetY,u=c.width-h.width,g=c.height-h.height,m=c.rotateAngle-h.rotateAngle;if(this.diagram.selectedItems.nodes.length+this.diagram.selectedItems.connectors.length>0&&(this.diagram.selectedItems.wrapper.rotateAngle=this.diagram.selectedItems.rotateAngle=c.rotateAngle),h instanceof Pw&&"SwimLane"!==h.shape.type&&!h.isLane&&!h.isPhase&&!h.isHeader)h.offsetX===h.wrapper.offsetX&&h.offsetY===h.wrapper.offsetY&&h.width===h.wrapper.width&&h.height===h.wrapper.height&&h.rotateAngle===h.wrapper.rotateAngle||(f()&&e.push(fa(h,void 0,void 0,!0)),h.offsetX+=d,h.offsetY+=p,h.width+=u,h.height+=g,h.rotateAngle+=m,this.diagram.nodePropertyChange(h,{},{offsetX:h.offsetX,offsetY:h.offsetY,width:h.width,height:h.height,rotateAngle:h.rotateAngle}),f()&&n.push(fa(h,void 0,void 0,!0))),a=this.diagram.spatialSearch.findObjects(h.wrapper.outerBounds);else if(h instanceof _w)for(var v=0;v<h.nodes.length;v++){var y=h.nodes[v];y instanceof Pw&&"SwimLane"!==y.shape.type&&!y.isLane&&!y.isPhase&&!y.isHeader&&(y.offsetX+=d,y.offsetY+=p,y.width+=u,y.height+=g,y.rotateAngle+=m,this.diagram.nodePropertyChange(y,{},{offsetX:y.offsetX,offsetY:y.offsetY,width:y.width,height:y.height,rotateAngle:y.rotateAngle}),a=a.concat(this.diagram.spatialSearch.findObjects(h.wrapper.outerBounds)))}}else t instanceof ES?a.push(t):t instanceof _w&&t.connectors.length&&(a=a.concat(t.connectors));for(v=0;v<a.length;v++)a[v]instanceof ES&&-1===l.indexOf(a[v].id)&&l.push(a[v].id);this.diagram.lineRoutingModule.renderVirtualRegion(this.diagram,!0);for(v=0;v<l.length;v++){var b=this.diagram.nameTable[l[v]];b instanceof ES&&"Orthogonal"===b.type&&(f()&&i.push(fa(b,void 0,void 0,!0)),b.sourceID!=b.targetID&&b.segments.length>1&&this.diagram.lineRoutingModule.refreshConnectorSegments(this.diagram,b,!0),f()&&r.push(fa(b,void 0,void 0,!0)))}if(this.updateSelector(),f()){this.getObjectChanges(e,n,o),this.getObjectChanges(i,r,s);var S={nodes:o,connectors:s};if(window&&window.Blazor&&s.length+o.length){var w={methodName:"UpdateBlazorProperties",diagramobj:S};window.sfBlazor.updateBlazorProperties(w,this.diagram)}}this.diagram.protectPropertyChange(!1)}},t.prototype.drawSelectionRectangle=function(t,e,i,n){this.diagram.drawSelectionRectangle(t,e,i,n)},t.prototype.startGroupAction=function(){this.diagram.startGroupAction()},t.prototype.endGroupAction=function(){this.diagram.endGroupAction()},t.prototype.removeChildFromBPmn=function(t,e,i){var n=this.diagram.nameTable[t.id]||t.nodes[0];if(i&&n&&n.processId&&n.processId===i.wrapper.id){var r=fa(n);r.processId=n.processId,this.diagram.startGroupAction();for(var o=[],s=(o=o.concat(n.outEdges,n.inEdges)).length-1;s>=0;s--){var a=this.diagram.nameTable[o[s]];a&&this.diagram.remove(a)}var l=this.diagram.nameTable[n.processId].shape.activity.subProcess.processes||[];l.splice(l.indexOf(n.id),1),this.diagram.bpmnModule.removeChildFromBPMN(this.diagram.nameTable[n.processId].wrapper,n.id),this.diagram.nameTable[n.id].processId="",n.offsetX=n.wrapper.offsetX,n.offsetY=n.wrapper.offsetY;var h={type:"PositionChanged",redoObject:{nodes:[fa(n)]},undoObject:{nodes:[r]},category:"Internal"};this.addHistoryEntry(h),this.diagram.endGroupAction()}},t.prototype.isDroppable=function(t,e){var i=this.diagram.nameTable[t.id]||t.nodes[0];return i instanceof Pw&&(!!(!f()&&"TextAnnotation"===i.shape.shape||f()&&"TextAnnotation"===i.shape.bpmnShape)||(!i||"Bpmn"!==i.shape.type||!(i.processId===e.id||i.id===e.processId||"Bpmn"===e.shape.type&&e.shape.activity.subProcess.collapsed)))},t.prototype.renderHighlighter=function(t,e,i){new Zu;if(t.target instanceof Pw||e&&t.source instanceof Pw){var n=e?t.source:t.target,r=e?t.sourceWrapper:t.targetWrapper,o=this.findTarget(r,n,i,!0),s=void 0;if(o instanceof Sw)for(var a=o.id,l=t.target,h=0,c=l.wrapper.children[0].children[0].children[2].children;h<c.length;h++){var d=c[h];if(d.id===l.id+"_"+a){s=d.children[0];break}}else s=o instanceof Pw?o.wrapper:e?t.sourceWrapper:t.targetWrapper;this.diagram.renderHighlighter(s)}},t.prototype.mouseOver=function(t,e,i){return!0},t.prototype.snapPoint=function(t,e,i,n){var r,o=this.diagram.selectedItems,s=e.x<t.x,a=e.y<t.y,l=r={x:i,y:n};return this.snappingModule&&(l=this.diagram.snappingModule.snapPoint(this.diagram,o,s,a,r,t,e)),l},t.prototype.removeSnap=function(){this.diagram.snapSettings.constraints&mg.SnapToObject&&this.snappingModule&&this.snappingModule.removeGuidelines(this.diagram)},t.prototype.dropAnnotation=function(t,e){if(t instanceof Pw||t instanceof _w){var i=t instanceof Pw?t:t.nodes[0];if(this.diagram.bpmnModule&&"Bpmn"===e.shape.type&&(!f()&&"TextAnnotation"===i.shape.shape||f()&&"TextAnnotation"===i.shape.bpmnShape)){i.hasTarget=e.id,i.shape.annotation.nodeId=e.id,this.diagram.currentSymbol||(this.diagram.addTextAnnotation(i.shape.annotation,e),i.shape.annotation.nodeId="",this.diagram.remove(i)),this.diagram.refreshDiagramLayer()}}},t.prototype.drop=function(t,e,i){if(this.diagram.bpmnModule){var n=t instanceof Pw?t:t.nodes[0];n&&"Bpmn"===n.shape.type&&"Bpmn"===e.shape.type&&(this.diagram.bpmnModule.dropBPMNchild(e,t instanceof Pw?t:t.nodes[0],this.diagram),this.diagram.refreshDiagramLayer())}},t.prototype.addHistoryEntry=function(t){this.diagram.addHistoryEntry(t)},t.prototype.align=function(t,e,i){if(t.length>0){var n=0;t[0]=this.diagram.nameTable[t[0].id]||t[0];var r="Object"===i?ma(t[0].wrapper):this.diagram.selectedItems.wrapper.bounds,o={nodes:[],connectors:[]},s={nodes:[],connectors:[]};for(n="Object"===i?n+1:n;n<t.length;n++){var a=0,l=0;t[n]=this.diagram.nameTable[t[n].id]||t[n];var h=ma(t[n].wrapper);"Left"===e?a=r.left+h.width/2-h.center.x:"Right"===e?a=r.right-h.width/2-h.center.x:"Top"===e?l=r.top+h.height/2-h.center.y:"Bottom"===e?l=r.bottom-h.height/2-h.center.y:"Center"===e?a=r.center.x-h.center.x:"Middle"===e&&(l=r.center.y-h.center.y),o=this.storeObject(o,t[n]),this.drag(t[n],a,l),this.diagram.updateSelector(),s=this.storeObject(s,t[n])}o=fa(o),s=fa(s);var c={type:"Align",category:"Internal",undoObject:fa(o),redoObject:fa(s)};this.addHistoryEntry(c)}},t.prototype.distribute=function(t,e){if(t.length>0){var i=0,n=0,r=0,o=0,s=0,a=0,l=0,h=0,c={nodes:[],connectors:[]},d={nodes:[],connectors:[]};for(i=0;i<t.length;i++)t[i]=this.diagram.nameTable[t[i].id]||t[i];for(t=Po(t,e),i=1;i<t.length;i++)n=n+t[i].wrapper.bounds.topRight.x-t[i-1].wrapper.bounds.topRight.x,r=r+t[i].wrapper.bounds.topLeft.x-t[i-1].wrapper.bounds.topLeft.x,o=o+t[i].wrapper.bounds.topRight.y-t[i-1].wrapper.bounds.topRight.y,s=s+t[i].wrapper.bounds.bottomRight.y-t[i-1].wrapper.bounds.bottomRight.y,a=a+t[i].wrapper.bounds.center.x-t[i-1].wrapper.bounds.center.x,l=l+t[i].wrapper.bounds.center.y-t[i-1].wrapper.bounds.center.y,h=h+t[i].wrapper.bounds.topRight.y-t[i-1].wrapper.bounds.bottomRight.y;for(i=1;i<t.length-1;i++){var p=0,u=0,g=ma(t[i-1].wrapper),m=ma(t[i].wrapper);"RightToLeft"===e||"Center"===e?p=g.center.x-m.center.x+a/(t.length-1):"Right"===e?p=g.topRight.x-m.topRight.x+n/(t.length-1):"Left"===e?p=g.topLeft.x-m.topLeft.x+r/(t.length-1):"Middle"===e?u=g.center.y-m.center.y+l/(t.length-1):"Top"===e?u=g.topRight.y-m.topRight.y+o/(t.length-1):"Bottom"===e?u=g.bottomRight.y-m.bottomRight.y+s/(t.length-1):"BottomToTop"===e&&(u=g.bottomRight.y-m.topRight.y+h/(t.length-1)),c=this.storeObject(c,t[i]),this.drag(t[i],p,u),this.diagram.updateSelector(),d=this.storeObject(d,t[i])}c=fa(c),d=fa(d);var f={type:"Distribute",category:"Internal",undoObject:fa(c),redoObject:fa(d)};this.addHistoryEntry(f)}},t.prototype.sameSize=function(t,e){if(t.length>0){var i=0,n={x:.5,y:.5};t[0]=this.diagram.nameTable[t[0].id]||t[0];var r=ma(t[0].wrapper),o={nodes:[],connectors:[]},s={nodes:[],connectors:[]};for(i=1;i<t.length;i++){t[parseInt(i.toString(),10)]=this.diagram.nameTable[t[parseInt(i.toString(),10)].id]||t[0];var a=ma(t[parseInt(i.toString(),10)].wrapper),l=1,h=1;"Width"===e?l=r.width/a.width:"Height"===e?h=r.height/a.height:"Size"===e&&(l=r.width/a.width,h=r.height/a.height),o=this.storeObject(o,t[parseInt(i.toString(),10)]),this.scale(t[parseInt(i.toString(),10)],l,h,n),s=this.storeObject(s,t[parseInt(i.toString(),10)])}this.diagram.updateSelector(),o=fa(o),s=fa(s);var c={type:"Sizing",category:"Internal",undoObject:fa(o),redoObject:fa(s)};this.addHistoryEntry(c)}},t.prototype.storeObject=function(t,e){return e instanceof Pw?t.nodes.push(fa(e)):t.connectors.push(fa(e)),t},t.prototype.updatePanState=function(t){if(t)this.diagram.realActions=this.diagram.realActions|Ag.PanInProgress;else{this.diagram.dataBind();var e=this.diagram.scrollSettings;this.diagram.realActions=this.diagram.realActions&~Ag.PanInProgress;var i={VerticalOffset:e.verticalOffset,HorizontalOffset:e.horizontalOffset,ViewportHeight:e.viewPortHeight,ViewportWidth:e.viewPortWidth,CurrentZoom:e.currentZoom},n={oldValue:i,newValue:i,source:this.diagram,panState:"Completed"};this.triggerEvent(jg.scrollChange,n)}},t.prototype.dataBinding=function(){this.diagram.dataBind()},t.prototype.setBlazorDiagramProps=function(t){this.diagram.setBlazorDiagramProps(t)},t.prototype.scroll=function(t,e,i){var n=function(t){return t.constraints&Mg.PanX}(this.diagram),r=function(t){return t.constraints&Mg.PanY}(this.diagram);f()?(this.diagram.setCursor("grabbing"),this.diagram.scroller.zoom(1,(t=n?t:0)*this.diagram.scroller.currentZoom,(e=r?e:0)*this.diagram.scroller.currentZoom,i)):this.diagram.pan((t=n?t:0)*this.diagram.scroller.currentZoom,(e=r?e:0)*this.diagram.scroller.currentZoom,i,!0)},t.prototype.drawHighlighter=function(t){this.diagram.renderHighlighter(t.wrapper)},t.prototype.removeHighlighter=function(){this.diagram.clearHighlighter()},t.prototype.renderContainerHelper=function(t){return Hr(this.diagram,t)},t.prototype.isParentAsContainer=function(t,e){return Ur(this.diagram,t,e)},t.prototype.dropChildToContainer=function(t,e){this.diagram.diagramActions&Og.PreventLaneContainerUpdate||"Bpmn"===e.shape.type&&"TextAnnotation"===e.shape.shape||Fr(this.diagram,t,e)},t.prototype.updateLaneChildrenZindex=function(t,e){var i=this.findLeastIndexObject(t,e),n=this.diagram.nameTable[e.parentId];if(n&&n.zIndex>i.zIndex){for(var r=this.diagram.layers.indexOf(this.diagram.getActiveLayer()),o=this.diagram.layers[parseInt(r.toString(),10)].zIndexTable,s=JSON.parse(JSON.stringify(o)),a=i.zIndex,l=n.zIndex,h=l;h>=a;h--)if(a!==h)o[h-1]?(o[parseInt(h.toString(),10)]=o[h-1],this.diagram.nameTable[o[parseInt(h.toString(),10)]].zIndex=h):(o[h-1]=o[parseInt(h.toString(),10)],this.diagram.nameTable[o[h-1]].zIndex=h,delete o[parseInt(h.toString(),10)]);else this.swapZIndexObjects(l,o,n.id,s);"SVG"===this.diagram.mode?(this.moveSvgNode(e.parentId,i.id),this.updateNativeNodeIndex(e.parentId,i.id)):this.diagram.refreshCanvasLayers()}},t.prototype.findLeastIndexConnector=function(t,e,i){for(var n=0;n<t.length;n++){var r=this.diagram.nameTable[t[parseInt(n.toString(),10)]];i.zIndex>r.zIndex&&(i=r)}return i},t.prototype.findLeastIndexObject=function(t,e){var i=t;return t instanceof Pw&&(i=this.findLeastIndexConnector(t.inEdges,e,i),i=this.findLeastIndexConnector(t.outEdges,e,i)),i},t.prototype.checkSelection=function(t,e){var i;if(1===t.nodes.length&&0===t.connectors.length)if(Ur(this.diagram,t.nodes[0],!0)){i="SwimLane"===t.nodes[0].shape?t.nodes[0]:this.diagram.nameTable[t.nodes[0].parentId];var n=t.nodes[0];if("SwimLane"===i.shape.type){var r="Horizontal"===i.shape.orientation;(n.isPhase&&(r&&"ResizeSouth"===e||!r&&"ResizeEast"===e)||n.isLane&&(r&&"ResizeEast"===e||!r&&"ResizeSouth"===e))&&Mr(this.diagram,i,e)}else if("Grid"===i.container.type)if("Horizontal"===i.container.orientation&&1===n.rowIndex||"Vertical"===i.container.orientation&&n.rowIndex>0&&n.columnIndex>0){if("ResizeSouth"===e)for(var o=0;o<this.diagram.nodes.length;o++){if((s=this.diagram.nodes[parseInt(o.toString(),10)]).rowIndex===i.rows.length-1&&0===s.columnIndex){this.select(s);break}}}else if("ResizeEast"===e)for(o=0;o<this.diagram.nodes.length;o++){var s;if(1===(s=this.diagram.nodes[parseInt(o.toString(),10)]).rowIndex&&s.columnIndex===i.columns.length-1){this.select(s);break}}}else Mr(this.diagram,t.nodes[0],e)},t.prototype.zoom=function(t,e,i,n){this.diagram.scroller.zoom(t,e*this.diagram.scroller.currentZoom,i*this.diagram.scroller.currentZoom,n)},t}(),DI=function(){function t(t){this.transform={tx:0,ty:0,scale:1},this.oldCollectionObjects=[],this.removeCollection=[],this.vPortWidth=0,this.vPortHeight=0,this.currentZoomFActor=1,this.hOffset=0,this.vOffset=0,this.scrolled=!1,this.hScrollSize=0,this.vScrollSize=0,this.diagram=t,this.objects=[],this.transform=t.scroller?t.scroller.transform:{tx:0,ty:0,scale:1},this.vPortWidth=t.scrollSettings.viewPortWidth,this.vPortHeight=t.scrollSettings.viewPortHeight,this.currentZoomFActor=t.scrollSettings.currentZoom,this.hOffset=t.scrollSettings.horizontalOffset,this.vOffset=t.scrollSettings.verticalOffset}return Object.defineProperty(t.prototype,"viewPortHeight",{get:function(){return this.vPortHeight},set:function(t){this.vPortHeight=t,this.diagram.scrollSettings.viewPortHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentZoom",{get:function(){return this.currentZoomFActor},set:function(t){this.currentZoomFActor=t,this.diagram.scrollSettings.currentZoom=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"viewPortWidth",{get:function(){return this.vPortWidth},set:function(t){this.vPortWidth=t,this.diagram.scrollSettings.viewPortWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"horizontalOffset",{get:function(){return this.hOffset},set:function(t){this.hOffset=t,Math.abs(this.hOffset-this.diagram.scrollSettings.horizontalOffset)>1&&(this.diagram.realActions=this.diagram.realActions|Ag.hScrollbarMoved,this.scrolled=!0),this.diagram.scrollSettings.horizontalOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"verticalOffset",{get:function(){return this.vOffset},set:function(t){this.vOffset=t,Math.abs(this.vOffset-this.diagram.scrollSettings.verticalOffset)>1&&(this.diagram.realActions=this.diagram.realActions|Ag.vScrollbarMoved,this.scrolled=!0),this.diagram.scrollSettings.verticalOffset=t},enumerable:!0,configurable:!0}),t.prototype.getBounds=function(){var t=this.diagram.spatialSearch.getPageBounds(0,0);return(t.x<0||t.y<0)&&!this.diagram.pageSettings.multiplePage?this.getPageBounds(void 0,void 0,!0,!0):this.getPageBounds(void 0,void 0,!0)},t.prototype.updateScrollOffsets=function(t,e){var i=0,n=0,r=this.getBounds();r.x*=this.currentZoom,r.y*=this.currentZoom,r.width*=this.currentZoom,r.height*=this.currentZoom,i=Math.max(0,t-r.left),n=Math.max(0,e-r.top),void 0!==t&&void 0!==e?(this.horizontalOffset=i,this.verticalOffset=n,this.diagram.setOffset(i,n)):this.diagram.setOffset(-this.horizontalOffset-r.x,-this.verticalOffset-r.y),this.transform={tx:Math.max(this.horizontalOffset,-r.left)/this.currentZoom,ty:Math.max(this.verticalOffset,-r.top)/this.currentZoom,scale:this.currentZoom}},t.prototype.setScrollOffset=function(t,e){this.scrolled=!1;var i=this.getBounds();i.x*=this.currentZoom,i.y*=this.currentZoom,i.width*=this.currentZoom,i.height*=this.currentZoom;var n=-i.left,r=-i.top,o=!1,s=this.viewPortWidth*this.currentZoom,a=this.viewPortHeight*this.currentZoom,l=n-t;if(l!==this.horizontalOffset){n<this.horizontalOffset&&(this.horizontalOffset>l?this.horizontalOffset-=t:this.horizontalOffset=l,o=!0);var h=Math.max(i.right+this.vScrollSize,s);if(!o&&h<-l+this.viewPortWidth){var c=-l+s-this.vScrollSize,d=-this.horizontalOffset+s-this.vScrollSize;c<d?this.horizontalOffset=l:c-i.right>c-d?this.horizontalOffset=l:this.horizontalOffset=-(i.right+this.vScrollSize-s),o=!0}o||(this.horizontalOffset=n-t)}o=!1;var p=r-e;if(p!==this.verticalOffset){r<this.verticalOffset&&(this.verticalOffset>p?this.verticalOffset-=e:this.verticalOffset=p,o=!0);var u=Math.max(i.bottom+this.hScrollSize,a);if(!o&&u<-p+a){var g=-p+a-this.hScrollSize,m=-this.verticalOffset+a-this.hScrollSize;g<m?this.verticalOffset=p:g-i.bottom>g-m?this.verticalOffset=p:this.verticalOffset=-(i.bottom+this.hScrollSize-a),o=!0}o||(this.verticalOffset=r-e)}this.transform={tx:Math.max(this.horizontalOffset,-i.left)/this.currentZoom,ty:Math.max(this.verticalOffset,-i.top)/this.currentZoom,scale:this.currentZoom},this.setSize()},t.prototype.getObjects=function(t,e){for(var i=[],n=0;n<t.length;n++){for(var r=!1,o=0;o<e.length;o++)if(t[parseInt(n.toString(),10)]===e[parseInt(o.toString(),10)]){r=!0;break}r||i.push(t[parseInt(n.toString(),10)])}return i},t.prototype.virtualizeElements=function(){for(var t=this.viewPortWidth/this.currentZoom,e=this.viewPortHeight/this.currentZoom,i=this.diagram.spatialSearch.findObjects(new Zu(-this.horizontalOffset/this.currentZoom,-this.verticalOffset/this.currentZoom,t,e)),n=[],r=[],o=0;o<i.length;o++){var s=i[parseInt(o.toString(),10)].shape;if("Bpmn"===s.type&&s&&s.activity&&s.activity.subProcess&&s.activity.subProcess.processes&&s.activity.subProcess.processes.length>0){for(var a=0;a<s.activity.subProcess.processes.length;a++)r.push(s.activity.subProcess.processes[parseInt(a.toString(),10)]);r.push(i[parseInt(o.toString(),10)].id)}else""!==i[parseInt(o.toString(),10)].processId&&void 0!==i[parseInt(o.toString(),10)].processId||r.push(i[parseInt(o.toString(),10)].id)}n=r;var l=[];for(o=0;o<i.length;o++){var h=i[parseInt(o.toString(),10)].shape;if("Bpmn"===h.type&&h&&h.activity&&h.activity.subProcess&&h.activity.subProcess.processes&&h.activity.subProcess.processes.length>0){l.push(i[parseInt(o.toString(),10)].id);for(var c=0;c<h.activity.subProcess.processes.length;c++)l.push(h.activity.subProcess.processes[parseInt(c.toString(),10)])}else""!==i[parseInt(o.toString(),10)].processId&&void 0!==i[parseInt(o.toString(),10)].processId||l.push(i[parseInt(o.toString(),10)].id)}for(o=0;o<i.length;o++)for(var d=0;d<l.length;d++)if(i[parseInt(o.toString(),10)].id===l[parseInt(d.toString(),10)]){i[parseInt(o.toString(),10)].zIndex=d;break}var p=this.getObjects(n,this.oldCollectionObjects);0===this.oldCollectionObjects.length&&(this.oldCollectionObjects=n);var u=this.getObjects(this.oldCollectionObjects,n);this.diagram.updateVirtualObjects(p,!1,u),this.oldCollectionObjects=n},t.prototype.setSize=function(t){var e=this.getPageBounds(void 0,void 0,!0);e.x*=this.currentZoom,e.y*=this.currentZoom,e.width*=this.currentZoom,e.height*=this.currentZoom;var i=Math.min(e.x,-this.horizontalOffset),n=Math.min(e.y,-this.verticalOffset),r=(this.horizontalOffset,this.viewPortWidth,e.right,this.verticalOffset,this.viewPortHeight,e.bottom,this.scrollerWidth),o=this.scrollerWidth;-this.verticalOffset<=e.y&&-this.verticalOffset+this.viewPortHeight>=e.bottom&&(o=0),-this.horizontalOffset<=e.x&&-this.horizontalOffset+this.viewPortWidth>=e.right&&(r=0),this.hScrollSize=r,this.vScrollSize=o;var s=this.diagramWidth,a=this.diagramHeight;this.diagramWidth=Math.max(e.right,-this.horizontalOffset+this.viewPortWidth-o)-i,this.diagramHeight=Math.max(e.bottom,-this.verticalOffset+this.viewPortHeight-r)-n,s===this.diagramWidth&&a===this.diagramHeight||"Diagram"===this.diagram.scrollSettings.scrollLimit||this.diagram.setSize(this.diagramWidth,this.diagramHeight),"Diagram"===this.diagram.scrollSettings.scrollLimit&&(s===this.diagramWidth&&a===this.diagramHeight&&1===this.currentZoom||this.diagram.diagramActions&&t&&(!this.diagram.diagramActions||!t||0===this.verticalOffset&&this.verticalOffset!==t.y||0===this.horizontalOffset&&this.horizontalOffset!==t.x)?t&&s===this.diagramWidth&&a===this.diagramHeight&&(this.diagram.diagramCanvas.scrollHeight>this.viewPortHeight&&t.y<0&&this.horizontalOffset===t.x&&0===this.verticalOffset||this.diagram.diagramCanvas.scrollWidth>this.viewPortWidth&&t.x<0&&this.verticalOffset===t.y&&0===this.horizontalOffset)&&(this.verticalOffset=t.y,this.horizontalOffset=t.x,this.transform={tx:Math.max(t.x,-e.left)/this.currentZoom,ty:Math.max(t.y,-e.top)/this.currentZoom,scale:this.currentZoom}):(this.diagram.scrollActions&zg.Interaction&&t&&(this.transform={tx:Math.max(t.x,-e.left/this.currentZoom)/this.currentZoom,ty:Math.max(t.y,-e.top/this.currentZoom)/this.currentZoom,scale:this.currentZoom},this.horizontalOffset=t.x,this.verticalOffset=t.y),this.diagram.setSize(this.diagramWidth,this.diagramHeight),this.diagram.scrollActions&zg.PropertyChange||!t||(this.horizontalOffset=t.x,this.verticalOffset=t.y,this.transform={tx:Math.max(t.x,-e.left)/this.currentZoom,ty:Math.max(t.y,-e.top)/this.currentZoom,scale:this.currentZoom}))),this.diagram.transformLayers(),this.diagram.element.style.overflow="hidden"},t.prototype.setViewPortSize=function(t,e){this.viewPortWidth=t,this.viewPortHeight=e},t.prototype.getPageBounds=function(t,e,i,n){var r,o=new Zu;if("Content"===e||n||null===this.diagram.pageSettings.width||null===this.diagram.pageSettings.height){var s=t?void 0:0;r=this.diagram.spatialSearch.getPageBounds(s,s)}else{var a=this.diagram.pageSettings.width,l=this.diagram.pageSettings.height,h=0,c=0;if(this.diagram.pageSettings.multiplePage){if((o=this.diagram.spatialSearch.getPageBounds(0,0)).right>a){a*=d=Math.ceil(o.right/a)}if(o.bottom>l){l*=d=Math.ceil(o.bottom/l)}if(o.left<0&&Math.abs(o.left)>h){var d=Math.ceil(Math.abs(o.left)/this.diagram.pageSettings.width);h=this.diagram.pageSettings.width*d}if(o.top<0&&Math.abs(o.top)>c){d=Math.ceil(Math.abs(o.top)/this.diagram.pageSettings.height);c=this.diagram.pageSettings.height*d}}r=new Zu(-h,-c,a+h,l+c)}if(i){var p=this.diagram.scrollSettings.padding;r.x-=p.left,r.y-=p.top,r.width+=p.left+p.right,r.height+=p.top+p.bottom}return r},t.prototype.getPageBreak=function(t){for(var e=0,i=0,n=-1,r=[],o=0,s=0,a=0,l=0,h=this.diagram.pageSettings.margin.left,c=this.diagram.pageSettings.margin.right,d=this.diagram.pageSettings.margin.top,p=this.diagram.pageSettings.margin.bottom,u=1,g=1,m={x1:o,y1:a,x2:s,y2:l};t.width>e;)(e+=this.diagram.pageSettings.width?this.diagram.pageSettings.width:t.width)===this.diagram.pageSettings.width&&(m={x1:t.left+h,y1:t.top+d,x2:t.left+h,y2:t.bottom-p},r[++n]=m),e<t.width&&(m={x1:o=t.topLeft.x+this.diagram.pageSettings.width*u,y1:a=t.topLeft.y+d,x2:s=t.bottomLeft.x+this.diagram.pageSettings.width*u,y2:l=t.bottomLeft.y-p},r[++n]=m,u++),t.width===e&&(m={x1:t.right-c,y1:t.top+d,x2:t.right-c,y2:t.bottom-p},r[++n]=m);for(;t.height>i;)(i+=this.diagram.pageSettings.height?this.diagram.pageSettings.height:t.height)===this.diagram.pageSettings.height&&(m={x1:t.left+h,y1:t.top+d,x2:t.right-c,y2:t.top+d},r[++n]=m),i<t.height&&(m={x1:o=t.topLeft.x+h,y1:a=t.topLeft.y+this.diagram.pageSettings.height*g,x2:s=t.topRight.x-c,y2:l=t.topRight.y+this.diagram.pageSettings.height*g},r[++n]=m,g++),t.height===i&&(m={x1:t.left+h,y1:t.bottom-p,x2:t.right-c,y2:t.bottom-p},r[++n]=m);return r},t.prototype.zoom=function(t,e,i,n,r,o){if(function(t){return t.constraints&Mg.Zoom}(this.diagram)&&1!==t||function(t){return t.constraints&Mg.Pan}(this.diagram)&&1===t){var s=Lt();if(jt(s,this.currentZoom,this.currentZoom),Pt(s,this.horizontalOffset,this.verticalOffset),n=n||{x:(this.viewPortWidth/2-this.horizontalOffset)/this.currentZoom,y:(this.viewPortHeight/2-this.verticalOffset)/this.currentZoom},n=At(s,n),this.currentZoom*t>=this.diagram.scrollSettings.minZoom&&this.currentZoom*t<=this.diagram.scrollSettings.maxZoom){this.currentZoom*=t;var a=this.getPageBounds(void 0,void 0,!0);a.x*=this.currentZoom,a.y*=this.currentZoom;var l=Lt();jt(l,t,t,n.x,n.y),Pt(l,e||0,i||0),Rt(s,l);var h=At(s,{x:0,y:0});1===t&&(h=this.applyScrollLimit(h.x,h.y,r,o)),!(this.diagram.scrollActions&zg.PropertyChange)&&this.diagram.scrollActions&zg.Interaction&&"Diagram"===this.diagram.scrollSettings.scrollLimit||(this.transform={tx:Math.max(h.x,-a.left)/this.currentZoom,ty:Math.max(h.y,-a.top)/this.currentZoom,scale:this.currentZoom},this.horizontalOffset=h.x,this.verticalOffset=h.y),this.setSize(h),"SVG"!==this.diagram.mode&&Un(this.diagram)&&this.diagram.scroller.virtualizeElements(),"SVG"===this.diagram.mode||Un(this.diagram)||this.diagram.refreshDiagramLayer(),this.diagram.setOffset(-this.horizontalOffset-a.x,-this.verticalOffset-a.y),ao(this.diagram)}}},t.prototype.fitToPage=function(t){var e=(t=t||{}).mode,i=t.region,n=t.margin||{},r=t.canZoomIn,o=t.customBounds;n.bottom=n.bottom||25,n.top=n.top||25,n.left=n.left||25,n.right=n.right||25;var s,a=o,l=-this.horizontalOffset,h=-this.verticalOffset;if("PageSettings"===(i=i||"PageSettings")&&this.diagram.pageSettings.width&&this.diagram.pageSettings.height||this.diagram.nodes.length>0||this.diagram.connectors.length>0){e=e||"Page","CustomBounds"!==i&&(a=this.getPageBounds(!0,i,!0));var c={x:0,y:0};c.x=(this.viewPortWidth-(n.left+n.right))/a.width,c.y=(this.viewPortHeight-(n.top+n.bottom))/a.height,!r&&a.width-this.horizontalOffset<this.viewPortWidth&&a.height-this.verticalOffset<this.viewPortHeight&&(c.x=Math.min(this.currentZoom,c.x),c.y=Math.min(this.currentZoom,c.y));var d=void 0,p=void 0,u=void 0;switch(e){case"Width":s=(d=c.x)/this.currentZoom,l+=(p=(this.viewPortWidth-a.width*d)/2-a.x*d)+(n.left-n.right)/2*d,h-=-this.verticalOffset*s,h="CustomBounds"!==i?h:h-this.verticalOffset*s;break;case"Height":s=(d=c.y)/this.currentZoom,p=(this.viewPortWidth-a.width*d)/2-a.x*d,u=(this.viewPortHeight-a.height*d)/2-a.y*d,l+=p+(n.left-n.right)/2*d,h+=u+(n.top-n.bottom)/2*d;break;case"Page":s=(d=Math.min(c.x,c.y))/this.currentZoom,p=(this.viewPortWidth-a.width*d)/2-a.x*d,u=(this.viewPortHeight-a.height*d)/2-a.y*d,l+=p+(n.left-n.right)/2*d,h+=u+(n.top-n.bottom)/2*d}this.zoom(s,l,h,{x:0,y:0},!0)}else s=1/this.currentZoom,this.zoom(s,l,h,{x:0,y:0},!0)},t.prototype.bringIntoView=function(t,e){var i=0,n=0,r=this.currentZoom,o=t,s=-this.horizontalOffset,a=-this.verticalOffset;o=new Zu(o.x*r,o.y*r,o.width*r,o.height*r);new Zu(s,a,this.viewPortWidth,this.viewPortHeight).containsRect(o)||(o.right>-s+this.viewPortWidth&&(i=o.right-this.viewPortWidth),o.x<-s&&(i=o.x),o.bottom>-a+this.viewPortHeight&&(n=o.bottom-this.viewPortHeight),o.y<-a&&(n=o.y),this.zoom(1,-this.horizontalOffset-i,-this.verticalOffset-n,null,void 0,e))},t.prototype.bringToCenter=function(t){var e=this.currentZoom,i=new Zu(t.x*e,t.y*e,t.width*e,t.height*e),n=i.x+i.width/2-this.viewPortWidth/2,r=i.y+i.height/2-this.viewPortHeight/2;n*=-1,r*=-1,this.zoom(1,-this.horizontalOffset-n,-this.verticalOffset-r,null)},t.prototype.applyScrollLimit=function(t,e,i,n){if("Infinity"===this.diagram.scrollSettings.scrollLimit&&void 0===i&&(t=-t,e=-e),"Infinity"!==this.diagram.scrollSettings.scrollLimit){var r=void 0;if("Limited"===this.diagram.scrollSettings.scrollLimit){var o=this.diagram.scrollSettings.scrollableArea;r=new Zu(o.x,o.y,o.width,o.height)}(r=r||this.getPageBounds(!0)).x*=this.currentZoom,r.y*=this.currentZoom,r.width*=this.currentZoom,r.height*=this.currentZoom,void 0!==i&&(t*=-1,e*=-1),n&&(t*=-1,e*=-1);var s=Math.max(r.right,this.viewPortWidth);if(!n&&!(t<=r.x&&(t+this.viewPortWidth>=r.right||t>=r.right-this.viewPortWidth)||t>=r.x&&t+this.viewPortWidth<=s))if(t>=r.x)t=Math.max(r.x,Math.min(t,t-(t+this.viewPortWidth-this.vScrollSize-s)));else{var a=r.right-this.viewPortWidth;t=Math.min(a,r.x)}var l=Math.max(r.bottom,this.viewPortHeight);if(!n&&!(e<=r.y&&e+this.viewPortHeight>=r.bottom||e>=r.y&&e+this.viewPortHeight<=l))if(e>=r.y)e=Math.max(r.y,Math.min(e,e-(e+this.viewPortHeight-this.hScrollSize-l)));else{a=r.bottom-this.viewPortHeight;e=Math.min(r.y,a)}t*=-1,e*=-1}return{x:t,y:e}},t}(),TI=function(){function t(t,e,i,n,r){this.objects=[],this.left=t,this.top=e,this.width=i,this.height=n,this.spatialSearch=r}return t.prototype.findQuads=function(t,e){null!=this.first&&this.first.isIntersect(t)&&this.first.findQuads(t,e),null!=this.second&&this.second.isIntersect(t)&&this.second.findQuads(t,e),null!=this.third&&this.third.isIntersect(t)&&this.third.findQuads(t,e),null!=this.fourth&&this.fourth.isIntersect(t)&&this.fourth.findQuads(t,e),this.objects.length>0&&e.push(this)},t.prototype.isIntersect=function(t){return!(this.left+this.width<t.left||this.top+this.height<t.top||this.left>t.right||this.top>t.bottom)},t.prototype.selectQuad=function(){for(var t,e=null,i=this;null!=i;)i=(t=i.getQuad(e)).source,e=t.target||e;return e},t.prototype.getQuad=function(e){var i=this.width/2,n=this.height/2;if(i>=1e3&&n>=1e3){var r=this.left+i,o=this.top+n;if(this.spatialSearch.childRight<=r){if(this.spatialSearch.childBottom<=o){if(!this.first){(s=new t(this.left,this.top,i,n,this.spatialSearch)).parent=this,this.first=s}return{source:this.first}}if(this.spatialSearch.childTop>=o){if(!this.third){(s=new t(this.left,o,i,n,this.spatialSearch)).parent=this,this.third=s}return{source:this.third}}}else if(this.spatialSearch.childLeft>=r){if(this.spatialSearch.childBottom<=o){if(!this.second){(s=new t(r,this.top,i,n,this.spatialSearch)).parent=this,this.second=s}return{source:this.second}}if(this.spatialSearch.childTop>=o){if(!this.fourth){var s;(s=new t(r,o,i,n,this.spatialSearch)).parent=this,this.fourth=s}return{source:this.fourth}}}}return this,this.objects.push(this.spatialSearch.childNode),{target:this}},t.prototype.isContained=function(){return this.spatialSearch.childLeft>=this.left&&this.spatialSearch.childRight<=this.left+this.width&&this.spatialSearch.childTop>=this.top&&this.spatialSearch.childBottom<=this.top+this.height},t.prototype.addIntoAQuad=function(t){var e={};this.spatialSearch.setCurrentNode(t);for(var i=null;!e.isAdded;)i=(e=this.spatialSearch.parentQuad.add(i)).quad;return i},t.prototype.add=function(e){if(e=null,this.isContained())return e=this.selectQuad(),{isAdded:!0,quad:e};var i=void 0,n=!(0!==this.objects.length||this.first||this.second||this.third||this.fourth),r=2*this.width,o=2*this.height;return this.spatialSearch.childLeft<this.left?this.spatialSearch.childTop<this.top?(i=new t(this.left-this.width,this.top-this.height,r,o,this.spatialSearch),n||(i.fourth=this)):(i=new t(this.left-this.width,this.top,r,o,this.spatialSearch),n||(i.second=this)):this.spatialSearch.childTop<this.top?(i=new t(this.left,this.top-this.height,r,o,this.spatialSearch),n||(i.third=this)):(i=new t(this.left,this.top,r,o,this.spatialSearch),n||(i.first=this)),this.parent=i,this.spatialSearch.parentQuad=i,{isAdded:!1,quad:e}},t}(),OI=function(){function t(t){this.quadSize=500,this.objectTable=t,this.parentQuad=new TI(0,0,2*this.quadSize,2*this.quadSize,this),this.pageLeft=Number.MAX_VALUE,this.pageRight=-Number.MAX_VALUE,this.pageTop=Number.MAX_VALUE,this.pageBottom=-Number.MAX_VALUE,this.quadTable={}}return t.prototype.removeFromAQuad=function(t){if(this.quadTable[t.id]){var e=this.quadTable[t.id],i=this.objectIndex(e.objects,t);-1!==i&&(e.objects.splice(i,1),this.update(e),delete this.quadTable[t.id])}},t.prototype.update=function(t){if(t.parent&&0===t.objects.length&&t.first&&t.second&&t.third&&t.fourth){var e=t.parent;e.first===t?e.first=null:e.second===t?e.second=null:e.third===t?e.third=null:e.fourth===t&&(e.fourth=null),this.update(t.parent)}else t!==this.parentQuad||t.first||t.second||t.third||t.fourth||(t.left=0,t.width=1e3,t.top=0,t.height=1e3)},t.prototype.addIntoAQuad=function(t){var e=this.parentQuad.addIntoAQuad(t);this.quadTable[t.id]=e},t.prototype.objectIndex=function(t,e){for(var i=0;i<t.length;i++)if(t[parseInt(i.toString(),10)].id===e.id)return i;return-1},t.prototype.updateQuad=function(t){this.setCurrentNode(t);var e=t.outerBounds;if(isNaN(e.x)||isNaN(e.y)||isNaN(e.width)||isNaN(e.height))return!1;if(this.quadTable[t.id]){this.quadTable[t.id].isContained()||(this.removeFromAQuad(t),this.addIntoAQuad(t))}else this.addIntoAQuad(t);if(!this.isWithinPageBounds(e)||this.leftElement===t||this.topElement===t||this.rightElement===t||this.bottomElement===t){var i=!1;return this.pageLeft===this.childLeft&&t===this.leftElement||(this.pageLeft>=this.childLeft?(this.pageLeft=this.childLeft,this.leftElement=t,i=!0):t===this.leftElement&&(this.pageLeft=Number.MAX_VALUE,this.findLeft(this.parentQuad),i=!0)),this.pageTop===this.childTop&&t===this.topElement||(this.pageTop>=this.childTop?(this.pageTop=this.childTop,this.topElement=t,i=!0):t===this.topElement&&(this.pageTop=Number.MAX_VALUE,this.findTop(this.parentQuad),i=!0)),this.pageBottom===this.childBottom&&t===this.bottomElement||(this.pageBottom<=this.childBottom?(i=!0,this.pageBottom=this.childBottom,this.bottomElement=t):t===this.bottomElement&&(this.pageBottom=-Number.MAX_VALUE,this.findBottom(this.parentQuad),i=!0)),this.pageRight===this.childRight&&t===this.rightElement||(this.pageRight<=this.childRight?(this.pageRight=this.childRight,this.rightElement=t,i=!0):t===this.rightElement&&(this.pageRight=-Number.MAX_VALUE,this.findRight(this.parentQuad),i=!0)),i}return this.setCurrentNode(null),!1},t.prototype.isWithinPageBounds=function(t){return t.left>=this.pageLeft&&t.right<=this.pageRight&&t.top>=this.pageTop&&t.bottom<=this.pageBottom},t.prototype.findQuads=function(t){var e=[];return this.parentQuad.findQuads(t,e),e},t.prototype.findObjects=function(t){for(var e=[],i=0,n=this.findQuads(t);i<n.length;i++)for(var r=0,o=n[i].objects;r<o.length;r++){var s=o[r];s.outerBounds.intersects(t)&&e.push(this.objectTable[s.id])}return e},t.prototype.updateBounds=function(t){var e=!1;return t===this.topElement&&(this.pageTop=Number.MAX_VALUE,this.topElement=null,this.findTop(this.parentQuad),e=!0),t===this.leftElement&&(this.pageLeft=Number.MAX_VALUE,this.leftElement=null,this.findLeft(this.parentQuad),e=!0),t===this.rightElement&&(this.pageRight=-Number.MAX_VALUE,this.rightElement=null,this.findRight(this.parentQuad),e=!0),t===this.bottomElement&&(this.pageBottom=-Number.MAX_VALUE,this.bottomElement=null,this.findBottom(this.parentQuad),e=!0),e},t.prototype.findBottom=function(t){t.third||t.fourth?(t.third&&this.findBottom(t.third),t.fourth&&this.findBottom(t.fourth)):(t.second&&this.findBottom(t.second),t.first&&this.findBottom(t.first));for(var e=0,i=t.objects;e<i.length;e++){var n=i[e];this.pageBottom<=n.outerBounds.bottom&&(this.pageBottom=n.outerBounds.bottom,this.bottomElement=n)}},t.prototype.findRight=function(t){(t.second||t.fourth)&&(t.second&&this.findRight(t.second),t.fourth&&this.findRight(t.fourth)),t.first&&this.findRight(t.first),t.third&&this.findRight(t.third);for(var e=0,i=t.objects;e<i.length;e++){var n=i[e];this.pageRight<=n.outerBounds.right&&(this.pageRight=n.outerBounds.right,this.rightElement=n)}},t.prototype.findLeft=function(t){t.first||t.third?(t.first&&this.findLeft(t.first),t.third&&this.findLeft(t.third)):(t.second&&this.findLeft(t.second),t.fourth&&this.findLeft(t.fourth));for(var e=0,i=t.objects;e<i.length;e++){var n=i[e];this.pageLeft>=n.outerBounds.left&&(this.pageLeft=n.outerBounds.left,this.leftElement=n)}},t.prototype.findTop=function(t){t.first||t.second?(t.first&&this.findTop(t.first),t.second&&this.findTop(t.second)):(t.third&&this.findTop(t.third),t.fourth&&this.findTop(t.fourth));for(var e=0,i=t.objects;e<i.length;e++){var n=i[e];this.pageTop>=n.outerBounds.top&&(this.pageTop=n.outerBounds.top,this.topElement=n)}},t.prototype.setCurrentNode=function(t){if(this.childNode=t,t){var e=t.outerBounds;this.childLeft=Number(e.left),this.childTop=Number(e.top),this.childRight=Number(e.right),this.childBottom=Number(e.bottom)}else this.childLeft=Number.MAX_VALUE,this.childTop=Number.MAX_VALUE,this.childRight=-Number.MAX_VALUE,this.childBottom=-Number.MAX_VALUE},t.prototype.getPageBounds=function(t,e){if(this.pageLeft===Number.MAX_VALUE)return new Zu(0,0,0,0);var i=void 0!==t?Math.min(this.pageLeft,0):this.pageLeft,n=void 0!==e?Math.min(this.pageTop,0):this.pageTop;return new Zu(Math.round(i),Math.round(n),Math.round(this.pageRight-i),Math.round(this.pageBottom-n))},t.prototype.getQuad=function(t){return this.quadTable[t.id]},t}(),LI=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),AI=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},zI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return LI(e,t),AI([W(!1)],e.prototype,"preventDefaults",void 0),e}(Rp),kI=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),jI=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},PI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return kI(e,t),jI([W("")],e.prototype,"action",void 0),jI([W("")],e.prototype,"cursor",void 0),e}(Rp),RI=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),BI=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},HI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return RI(e,t),BI([W(!0)],e.prototype,"inversedAlignment",void 0),e}(Rp),UI=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),VI=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},_I=function(t,e,i,n){return new(i||(i=Promise))(function(r,o){function s(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){t.done?r(t.value):new i(function(e){e(t.value)}).then(s,a)}l((n=n.apply(t,e||[])).next())})},FI=function(t,e){function i(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}var n,r,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},YI=function(t){function e(e,i){var n=t.call(this,e,i)||this;n.version=17.1,n.checkMenu=!1,n.isServerUpdate=!1,n.oldNodeObjects=[],n.oldDiagramObject={},n.oldConnectorObjects=[],n.canEnableBlazorObject=!1,n.connectorTable={},n.groupTable={},n.scrollActions=zg.None,n.blazorActions=$u.Default,n.activeLabel={id:"",parentId:"",isGroup:!1,text:void 0},n.textEditing=!1,n.isTriggerEvent=!1,n.preventNodesUpdate=!1,n.preventConnectorsUpdate=!1,n.callBlazorModel=!0,n.selectionConnectorsList=[],n.deleteVirtualObject=!1,n.canLayout=!0,n.swimlaneChildTable={},n.swimlaneZIndexTable={},n.canExpand=!1,n.changedConnectorCollection=[],n.changedNodesCollection=[],n.previousNodeCollection=[],n.previousConnectorCollection=[],n.crudDeleteNodes=[],n.previousSelectedObjects=[],n.blazorAddorRemoveCollection=[],n.blazorRemoveIndexCollection=[],n.diagramid=88123,n.selectedObject={helperObject:void 0,actualObject:void 0},n.renderTimer=null;var r,o,s=f()&&window&&window.Blazor&&!n.dataSourceSettings.dataSource;n.ignoreCollectionWatch=!0;for(var a=0;e&&e.nodes&&a<e.nodes.length;a++)r=e.nodes[parseInt(a.toString(),10)],o=n.nodes[parseInt(a.toString(),10)],r.children&&r.children.length>0&&(r.style&&r.style.fill||(o.style.fill="transparent"),r.style&&r.style.strokeColor||(o.style.strokeColor="transparent")),r.shape&&"UmlActivity"===r.shape.type&&wo(r,o),r.shape&&"SwimLane"===r.shape.type&&vo(r,o),s&&n.previousNodeCollection.push(fa(o,void 0,void 0,!0)),n.nodeDefaults&&No(o,r,n.nodeDefaults),n.updateAnnotationText(o.annotations);if(e&&e.connectors)for(a=0;e&&e.connectors&&a<e.connectors.length;a++)r=e.connectors[parseInt(a.toString(),10)],o=n.connectors[parseInt(a.toString(),10)],s&&n.previousConnectorCollection.push(fa(o,void 0,void 0,!0)),n.connectorDefaults&&No(o,r,n.connectorDefaults),n.updateAnnotationText(o.annotations);for(a=0;e&&e.connectors&&a<e.connectors.length;a++){var l=e.connectors[parseInt(a.toString(),10)],h=n.connectors[parseInt(a.toString(),10)];if(l.shape&&"None"!==l.shape.type&&Io(l,h),f()){var c=fa(n.bulkChanges);n.enableServerDataBinding(!0),n.protectPropertyChange(!0);for(var d=Object.keys(c),p=0;p<d.length;p++){var u=d[parseInt(p.toString(),10)],g=u.split("-");g&&g[0]&&("nodes"===g[0]&&(c[""+u].sfIndex=Number(g[1]),n.changedNodesCollection.push(c[""+u])),"connectors"===g[0]&&(c[""+u].sfIndex=Number(g[1]),n.changedConnectorCollection.push(c[""+u])))}}}return n}return UI(e,t),e.prototype.updateAnnotationText=function(t){if(f()&&t.length>0)for(var e=0;t&&e<t.length;e++){var i=t[parseInt(e.toString(),10)];i.content=i.content.split("\\n").join("\n")}},e.prototype.callFromServer=function(t){if("getParentID"===t.methodName){var e=t.id;return this.nameTable[""+e].parentId}if("getEdges"===t.methodName){var i=t.outEdge;e=t.id;return i?this.nameTable[""+e].outEdges:this.nameTable[""+e].inEdges}if("updateDiagramObjects"===t.methodName){var n=t.obj;if(this.isServerUpdate=!0,t.IsAdding){this.add.apply(this,n)}else{this.remove.apply(this,n)}this.isServerUpdate=!1}else if("invokeLoadDiagramMethod"===t.methodName){this.loadDiagram(t.data)}},e.prototype.clearCollection=function(t){for(var e,i=[],n=0,r=Object.keys(this.nameTable);n<r.length;n++){var o=r[n];(e=this.nameTable[""+o])&&(t&&e instanceof ES||!t&&e instanceof Pw)&&i.push(e)}this.clearObjects(i)},e.prototype.onPropertyChanged=function(i,n){var r=!0,o=!1,s=!1;if(this.diagramActions&Og.Render){for(var a=0,l=Object.keys(i);a<l.length;a++){switch(l[a]){case"width":case"height":this.element.style.width=this.getSizeValue(this.width),this.element.style.height=this.getSizeValue(this.height),this.eventHandler.updateViewPortSize(this.element);for(var h=0,c=this.views;h<c.length;h++){var d=c[h];(W=this.views[""+d])instanceof e||W.updateView(W)}break;case"nodes":if(i.nodes.length>0&&0===n.nodes.length)this.clearCollection(),s=!0;else{for(var p=0,u=Object.keys(i.nodes);p<u.length;p++){var g=u[p],m=Number(g),v=this.nodes[parseInt(m.toString(),10)],y=i.nodes[parseInt(m.toString(),10)];i.nodes[parseInt(m.toString(),10)].style&&i.nodes[parseInt(m.toString(),10)].style.gradient&&(this.updateGradient(i.nodes[parseInt(m.toString(),10)],n.nodes[parseInt(m.toString(),10)],this.nodes[parseInt(m.toString(),10)]),this.nodes[parseInt(m.toString(),10)].oldGradientValue=fa(i.nodes[parseInt(m.toString(),10)].style.gradient)),o=o||void 0!==y.excludeFromLayout,this.nodePropertyChange(v,n.nodes[parseInt(m.toString(),10)],y,void 0,!0,!0);var b={element:xs(v),cause:this.diagramActions,diagramAction:this.getDiagramAction(this.diagramActions),oldValue:xs(n.nodes[parseInt(m.toString(),10)]),newValue:xs(i.nodes[parseInt(m.toString(),10)])};f()&&(b.element={node:xs(v)},b.oldValue={node:xs(void 0)},b.newValue={node:xs(void 0)}),this.triggerEvent(jg.propertyChange,b),r&&(r=!1)}"Canvas"===this.mode&&this.refreshDiagramLayer()}break;case"connectors":if(i.connectors.length>0&&0===n.connectors.length)this.clearCollection(!0),s=!0;else{for(var S=0,w=Object.keys(i.connectors);S<w.length;S++){g=w[S],m=Number(g),v=this.connectors[parseInt(m.toString(),10)];(y=i.connectors[parseInt(m.toString(),10)])&&(y.sourceDecorator||y.targetDecorator)&&(this.diagramActions|=Og.DecoratorPropertyChange),this.connectorPropertyChange(v,n.connectors[parseInt(m.toString(),10)],y,!0,!0),y&&(y.sourceDecorator||y.targetDecorator)&&(this.diagramActions=this.diagramActions&~Og.DecoratorPropertyChange);b={element:xs(v),cause:this.diagramActions,diagramAction:this.getDiagramAction(this.diagramActions),oldValue:xs(n.connectors[parseInt(m.toString(),10)]),newValue:xs(i.connectors[parseInt(m.toString(),10)])};f()&&(b.element={connector:xs(v)},b.oldValue={connector:xs(void 0)},b.newValue={connector:xs(void 0)}),this.triggerEvent(jg.propertyChange,b),v&&v.parentId&&"UmlClassifier"===this.nameTable[v.parentId].shape.type&&this.updateConnectorEdges(this.nameTable[v.parentId]||v),r&&(r=!1)}this.updateBridging(),"Canvas"===this.mode&&this.refreshDiagramLayer()}break;case"bridgeDirection":this.updateBridging(),"Canvas"===this.mode&&this.refreshDiagramLayer();break;case"backgroundColor":this.intOffPageBackground();break;case"pageSettings":this.validatePageSize(),this.updatePage();break;case"selectedItems":if(i.selectedItems.userHandles&&this.selectedItems.wrapper&&this.selectedItems.userHandles&&this.selectedItems.userHandles.length>0){this.renderSelector(!0);break}if(i.selectedItems.constraints){this.renderSelector(!0);break}break;case"snapSettings":this.updateSnapSettings(i);break;case"commandManager":this.initCommands();break;case"layout":o=!0;break;case"segmentThumbShape":this.updateSelector();break;case"dataSourceSettings":this.clear(),this.initObjects(),"None"===this.layout.type?s=!0:o=!0;break;case"tooltip":Sn(this);break;case"rulerSettings":this.updateRulerSettings(i);break;case"layers":this.updateLayer(i);break;case"scrollSettings":this.scrollActions|=zg.PropertyChange,this.updateScrollSettings(i),this.scrollActions&=~zg.PropertyChange,this.scrollSettings.horizontalOffset=-this.scroller.horizontalOffset||0,this.scrollSettings.verticalOffset=-this.scroller.verticalOffset||0;break;case"locale":i.locale!==n.locale&&(this.realActions|=Ag.PreventDataInit,t.prototype.refresh.call(this),this.realActions&=~Ag.PreventDataInit);break;case"contextMenuSettings":if(void 0!==i.contextMenuSettings.showCustomMenuOnly&&(this.contextMenuSettings.showCustomMenuOnly=i.contextMenuSettings.showCustomMenuOnly),void 0!==i.contextMenuSettings.show&&(this.contextMenuSettings.show=i.contextMenuSettings.show),i.contextMenuSettings.items){for(var I=i.contextMenuSettings.items,x=0,M=Object.keys(I);x<M.length;x++){g=M[x],m=Number(g);this.contextMenuSettings.items[parseInt(m.toString(),10)]=I[parseInt(m.toString(),10)]}this.contextMenuModule&&this.contextMenuModule.refreshItems()}break;case"serializationSettings":void 0!==i.serializationSettings.preventDefaults&&(this.serializationSettings.preventDefaults=i.serializationSettings.preventDefaults)}}if(o&&!s){if(n.layout&&"DifferentPoint"===n.layout.connectionPointOrigin&&"SamePoint"===i.layout.connectionPointOrigin||n.layout&&i.layout&&!i.layout.enableRouting&&n.layout.enableRouting){for(var C=0;C<this.nodes.length;C++){var N=this.nodes[parseInt(C.toString(),10)];if(N.ports&&N.ports.length>0){for(var E=[],D=N.ports.length-1;D>=0;D--)"LineDistribution"===N.ports[parseInt(D.toString(),10)].id.split("_")[1]&&E.push(N.ports[parseInt(D.toString(),10)]);this.removePorts(N,E)}}for(D=0;D<this.connectors.length;D++){var T=this.connectors[parseInt(D.toString(),10)],O=T.sourcePortID,L=T.targetPortID;T.sourcePortID="",T.targetPortID="",T.sourcePortWrapper=void 0,T.targetPortWrapper=void 0,T.segments=[],this.connectorPropertyChange(T,{sourcePortID:O,targetPortID:L},{sourcePortID:"",targetPortID:""})}}this.doLayout(),this.renderReactTemplates()}if(r&&this.propertyChange){b={element:xs(this),cause:this.diagramActions,diagramAction:this.getDiagramAction(this.diagramActions),oldValue:xs(n),newValue:xs(i)};f()&&(b.element={diagram:xs(this)},b.oldValue={diagram:xs(void 0)},b.newValue={diagram:xs(void 0)}),this.triggerEvent(jg.propertyChange,b)}if(!s&&this.canLogChange()&&this.modelChanged(i,n)){var A=[],z=[],k=[];if(i.nodes&&Object.keys(i.nodes).length>0)for(var j=0,P=Object.keys(i.nodes);j<P.length;j++){g=P[j];var R=parseInt(g);z.push(this.nodes[parseInt(R.toString(),10)].id)}if(i.connectors&&Object.keys(i.connectors).length>0)for(var B=0,H=Object.keys(i.connectors);B<H.length;B++){g=H[B];var U=parseInt(g);k.push(this.connectors[parseInt(U.toString(),10)].id)}A=z.concat(k);var V={type:"PropertyChanged",undoObject:n,redoObject:i,category:"Internal"};this.historyManager&&this.addHistoryEntry(V,A)}this.resetDiagramActions(),s&&(this.initObjects(!0),this.refreshDiagramLayer(),o&&this.doLayout());var _=1===Object.keys(i).length&&void 0!==i.scrollSettings;if(!s)for(var F=0,Y=this.views;F<Y.length;F++){var W=Y[F];(d=this.views[""+W])instanceof e||(i.scrollSettings&&(i.scrollSettings.currentZoom,n.scrollSettings.currentZoom),_||this.refreshCanvasDiagramLayer(d))}}},e.prototype.updateSnapSettings=function(t){(void 0!==t.snapSettings.constraints||t.snapSettings.horizontalGridlines||t.snapSettings.verticalGridlines||t.snapSettings.gridType)&&this.diagramRenderer.updateGrid(this.snapSettings,Xs(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler)},e.prototype.updateGradient=function(t,e,i){if(i.oldGradientValue)for(var n=i,r=i,o=e.style.gradient,s=e.style.gradient,a=0,l=Object.keys(t.style.gradient);a<l.length;a++){switch(l[a]){case"type":n.type&&(o.type=n.type);break;case"x1":n.x1&&(o.x1=n.x1);break;case"x2":n.x2&&(o.x2=n.x2);break;case"y1":n.y1&&(o.y1=n.y1);break;case"y2":n.y2&&(o.y2=n.y2);break;case"cx":r.cx&&(s.cx=r.cx);break;case"cy":r.cy&&(s.cy=r.cy);break;case"fx":r.fx&&(s.fx=r.fx);break;case"fy":r.fy&&(s.fy=r.fy);break;case"r":r.r&&(s.r=r.r);break;case"stops":if(i.oldGradientValue.stops){var h=Object.values(fa(i.oldGradientValue.stops));h.pop(),e.style.gradient.stops=h}}}},e.prototype.updateRulerSettings=function(t){void 0!==t.rulerSettings.dynamicGrid&&this.diagramRenderer.updateGrid(this.snapSettings,Xs(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler),void 0!==t.rulerSettings.showRulers?(this.intOffPageBackground(),this.scroller.setSize(),this.renderRulers()):void 0===t.rulerSettings.horizontalRuler&&void 0===t.rulerSettings.verticalRuler||(void 0!==t.rulerSettings.horizontalRuler.thickness||void 0!==t.rulerSettings.verticalRuler.thickness?(lo(this),this.intOffPageBackground(),this.scroller.setSize(),this.renderRulers()):ao(this)),this.diagramRenderer.updateGrid(this.snapSettings,Xs(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler)},e.prototype.getPersistData=function(){return this.addOnPersist(["loaded"])},e.prototype.preRender=function(){this.initializePrivateVariables(),this.isProtectedOnChange=!0,this.serviceLocator=new Kw,this.initializeServices(),this.setCulture();window.measureElement&&(window.measureElement=null),this.initDiagram(),this.initViews(),this.unWireEvents(),this.wireEvents(),this.element.classList.add("e-diagram")},e.prototype.initializePrivateVariables=function(){if(""===this.element.id){var t=document.getElementsByClassName("e-diagram").length;this.element.id="diagram_"+this.diagramid+"_"+t}this.defaultLocale={Copy:"Copy",Cut:"Cut",Paste:"Paste",Undo:"Undo",Redo:"Redo",SelectAll:"Select All",Grouping:"Grouping",Group:"Group",UnGroup:"Un Group",Order:"Order",BringToFront:"Bring To Front",MoveForward:"Move Forward",SendToBack:"Send To Back",SendBackward:"Send Backward"},this.layerZIndex=-1,this.layerZIndexTable={},this.nameTable={},this.pathTable={},this.groupTable={},this.commands={},this.isLoading||(this.views=[]),this.commandHandler=new EI(this),this.eventHandler=new SI(this,this.commandHandler),this.spatialSearch=new OI(this.nameTable),this.scroller=new DI(this)},e.prototype.initializeServices=function(){this.serviceLocator.register("localization",this.localeObj=new uu(this.getModuleName(),this.defaultLocale,this.locale))},e.prototype.setCulture=function(){this.localeObj=new uu(this.getModuleName(),this.defaultLocale,this.locale)},e.prototype.render=function(){this.refreshing&&this.dataSourceSettings.dataSource&&!this.isLoading&&(this.nodes=[],this.connectors=[]),this.ignoreCollectionWatch=!0;window.domTable={};var t=[];if(f()){for(var e=[],i=[],n=0;n<this.changedNodesCollection.length;n++)e.push(this.commandHandler.deepDiffer.removeEmptyValues(this.changedNodesCollection[parseInt(n.toString(),10)]));for(n=0;n<this.changedConnectorCollection.length;n++)i.push(this.commandHandler.deepDiffer.removeEmptyValues(this.changedConnectorCollection[parseInt(n.toString(),10)]));var r="sfBlazor",o="Blazor",s={nodes:e,connectors:i};if(window&&window[""+o]&&!this.dataSourceSettings.dataSource&&(e.length>0||i.length>0)){var a={methodName:"UpdateBlazorProperties",diagramobj:s};window[""+r].updateBlazorProperties(a,this)}}this.dataSourceSettings.crudAction.read&&this.renderInitialCrud(),this.initHistory(),this.diagramRenderer=new Ww(this.element.id,new Yw,"SVG"===this.mode),this.initLayers(),this.initializeDiagramLayers(),this.diagramRenderer.setLayers(),this.initObjects(!0);var l=!1;if(f()&&!this.dataSourceSettings.dataSource&&"None"!==this.layout.type){for(var h=0,c=this.nodes;h<c.length;h++){a=c[h];this.insertValue(fa(a),!0)}for(var d=0,p=this.connectors;d<p.length;d++){a=p[d];this.insertValue(fa(a),!1)}l=!0}var u=this.nodes;for(n=0;n<u.length;n++)u[parseInt(n.toString(),10)].isExpanded||t.push(u[parseInt(n.toString(),10)]);if(t.length)for(n=t.length-1;n>=0;n--)0===n?this.commandHandler.expandNode(t[parseInt(n.toString(),10)],this,!1):this.commandHandler.expandNode(t[parseInt(n.toString(),10)],this,!0);if(this.canLayout&&this.doLayout(),l&&this.commandHandler.getBlazorOldValues(),this.lineRoutingModule){var g=[],m=[],v=[];if(f())for(var y=0,b=this.connectors;y<b.length;y++){a=b[y];g.push(fa(a,void 0,void 0,!0))}if(this.connectors.sourceID!==this.connectors.targetID&&this.lineRoutingModule.lineRouting(this),f()){for(var S=0,w=this.connectors;S<w.length;S++){a=w[S];m.push(fa(a,void 0,void 0,!0))}if(this.commandHandler.getObjectChanges(g,m,v),!(this.blazorActions&$u.ClearObject)){r="sfBlazor",o="Blazor",s={nodes:[],connectors:v};if(window&&window[""+o]){a={methodName:"UpdateBlazorProperties",diagramobj:s};window[""+r].updateBlazorProperties(a,this)}}}}this.validatePageSize(),this.renderPageBreaks(),this.diagramRenderer.renderSvgGridlines(this.snapSettings,Xs(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler),this.commandHandler.initSelectorWrapper(),this.notify("initial-load",{}),this.trigger("load"),this.scroller.setSize(),this.scroller.updateScrollOffsets(),this.refreshDiagramLayer(),(this.scrollSettings.verticalOffset>0||this.scrollSettings.horizontalOffset>0)&&this.updateScrollOffset(),Np.isDevice&&(this.tool=Cg.ZoomPan|Cg.SingleSelect),this.notify("initial-end",{}),this.isProtectedOnChange=!1,this.tooltipObject=Sn(this),this.diagramActions=Og.Render,this.initCommands();var I=document.getElementsByClassName(this.element.id+"_hiddenUserHandleTemplate");!function(t,e,i,n){var r,o,s,a,l,h=document.getElementById(n).ej2_instances[0];if(t&&e){r=ua(t);for(var c=0,d=i.userHandles;c<d.length;c++)if(o=d[c],r){for(s=r(fa(o),h,"userHandleTemplate_"+o.name,void 0,void 0,!1),a=0;a<s.length;a++)(l=Ks("div",{style:"height: 100%; width: 100%; pointer-events: all",id:o.name+"_template_hiddenUserHandle"})).appendChild(s[a]);e[0].appendChild(l)}}else if(f())for(var p=void 0,u=0,g=i.userHandles;u<g.length;u++)if(!(o=g[u]).pathData&&!o.content&&!o.source){for(a=0,p=(s=gt(o.content))(xs(o),h,"userHandleTemplate","diagramsf_userHandle_template");a<p.length;a++)(l=Ks("div",{style:"height: 100%; width: 100%; pointer-events: all",id:o.name+"_template_hiddenUserHandle"})).appendChild(p[a]);e[0].appendChild(l)}}(this.userHandleTemplate,I,this.selectedItems,this.element.id),f()&&this.layout&&"None"===this.layout.type&&this.updateTemplate(),this.isLoading=!1,this.renderComplete(),this.updateFitToPage(),this.refreshing&&this.renderReactTemplates()},e.prototype.updateFitToPage=function(){this.pageSettings&&this.pageSettings.fitOptions&&this.pageSettings.fitOptions.canFit&&this.fitToPage(this.pageSettings.fitOptions)},e.prototype.updateTemplate=function(){for(var t,e,i,n=0;n<this.nodes.length;n++)if("HTML"===(t=this.nodes[parseInt(n.toString(),10)]).shape.type||"Native"===t.shape.type){mt("diagramsf_node_template","NodeTemplate",this,!0);break}for(n=0;n<this.nodes.length;n++)if(t=this.nodes[parseInt(n.toString(),10)],(e=t.annotations[0])&&"Template"===e.annotationType){mt("diagramsf_annotation_template","AnnotationTemplate",this,!1);break}for(n=0;n<this.connectors.length;n++)if((i=this.connectors[parseInt(n.toString(),10)].annotations[0])&&"Template"===i.annotationType){mt("diagramsf_annotation_template","AnnotationTemplate",this,!1);break}for(n=0;n<this.selectedItems.userHandles.length;n++)if(this.selectedItems.userHandles[parseInt(n.toString(),10)].template){mt("diagramsf_userHandle_template","UserHandleTemplate",this,!1);break}},e.prototype.resetTemplate=function(){for(var t,e,i,n=0;n<this.nodes.length;n++)if("HTML"===(t=this.nodes[parseInt(n.toString(),10)]).shape.type&&""===t.shape.content){ft("diagramsf_node_template");break}for(n=0;n<this.nodes.length;n++)if(t=this.nodes[parseInt(n.toString(),10)],(e=t.annotations[0])&&"Template"===e.annotationType&&e.content instanceof HTMLElement){ft("diagramsf_annotation_template");break}for(n=0;n<this.connectors.length;n++)if((i=this.connectors[parseInt(n.toString(),10)].annotations[0])&&"Template"===i.annotationType&&i.content instanceof HTMLElement){ft("diagramsf_annotation_template");break}for(n=0;n<this.selectedItems.userHandles.length;n++)if(this.selectedItems.userHandles[parseInt(n.toString(),10)].template){mt("diagramsf_userHandle_template","UserHandleTemplate",this,!1);break}},e.prototype.renderInitialCrud=function(){var t=this;if(t.dataSourceSettings.crudAction.read){(e=new gp(t.dataSourceSettings.crudAction.read,"GET",!1)).onSuccess=function(e){t.dataSourceSettings.dataManager?t.dataSourceSettings.dataManager=JSON.parse(e):t.dataSourceSettings.dataSource=JSON.parse(e),t.dataBind()},e.send().then()}if(t.dataSourceSettings.connectionDataSource.crudAction.read){var e;(e=new gp(t.dataSourceSettings.connectionDataSource.crudAction.read,"GET",!1)).onSuccess=function(e){t.dataSourceSettings.connectionDataSource.dataManager=JSON.parse(e),t.dataBind()},e.send().then()}},e.prototype.getModuleName=function(){return"diagram"},e.prototype.getClassName=function(){return"Diagram"},e.prototype.requiredModules=function(){var t=[];return t.push({member:"Bpmn",args:[]}),t.push({member:"Bridging",args:[]}),t.push({member:"ConnectorEditingTool",args:[]}),f()&&t.push({member:"BlazorTooltip",args:[]}),this.constraints&Mg.UndoRedo&&t.push({member:"UndoRedo",args:[]}),("OrganizationalChart"===this.layout.type||"HierarchicalTree"===this.layout.type||this.layout.enableAnimation)&&t.push({member:"LayoutAnimate",args:[]}),this.snapSettings.constraints&&t.push({member:"Snapping",args:[this]}),t.push({member:"PrintandExport",args:[this]}),this.contextMenuSettings.show&&t.push({member:"contextMenu",args:[this,this.serviceLocator]}),"OrganizationalChart"!==this.layout.type&&"HierarchicalTree"!==this.layout.type||t.push({member:"OrganizationalChart",args:[this]}),"ComplexHierarchicalTree"===this.layout.type&&t.push({member:"ComplexHierarchicalTree",args:[]}),"MindMap"===this.layout.type&&t.push({member:"MindMapChart",args:[]}),"RadialTree"===this.layout.type&&t.push({member:"RadialTree",args:[]}),"SymmetricalLayout"===this.layout.type&&t.push({member:"SymmetricalLayout",args:[]}),(this.dataSourceSettings.dataManager||this.dataSourceSettings.dataSource||this.dataSourceSettings.crudAction.read||this.dataSourceSettings.connectionDataSource.crudAction.read)&&t.push({member:"DataBinding",args:[]}),this.constraints&Mg.LineRouting&&t.push({member:"LineRouting",args:[]}),(this.layout&&"DifferentPoint"===this.layout.connectionPointOrigin||"Linear"===this.layout.arrangement||this.layout.enableRouting)&&t.push({member:"LineDistribution",args:[]}),t},e.prototype.removeUserHandlesTemplate=function(){if(this.selectedItems.userHandles.length)for(var t=0;t<this.selectedItems.userHandles.length;t++)for(var e=0,i=this.views;e<i.length;e++){var n=i[e];na(this.selectedItems.userHandles[parseInt(t.toString(),10)].name+"_template_hiddenUserHandle",n)}},e.prototype.destroy=function(){if(clearInterval(this.renderTimer),this.renderTimer=null,this.hRuler&&this.vRuler&&(this.hRuler.destroy(),this.vRuler.destroy()),this.tooltipObject.destroy(),this.droppable.destroy(),this.unWireEvents(),this.notify("destroy",{}),t.prototype.destroy.call(this),this.removeUserHandlesTemplate(),this.clearTemplate(),document.getElementById(this.element.id)){this.element.classList.remove("e-diagram");for(var e=document.getElementsByClassName("e-diagram-tooltip");e.length>0;)e[0].parentNode.removeChild(e[0]);var i=document.getElementById(this.element.id+"content");i&&this.element.removeChild(i);var n="measureElement";if(window[""+n]){window[""+n].usageCount-=1;var r="measureElementCount";window[""+r]--,0===window[""+r]&&(window[""+n].parentNode.removeChild(window[""+n]),window[""+n]=null)}}window.domTable={};for(var o=0;o<this.layers.length;o++){this.layers[parseInt(o.toString(),10)].zIndexTable={}}this.diagramActions=void 0},e.prototype.wireEvents=function(){var t=Np.touchStartEvent,e=Np.touchEndEvent,i=Np.touchMoveEvent,n=Np.isPointer?"pointerleave":"mouseleave",r=Np.isPointer,o="mozilla"===Np.info.name?r?"mousewheel":"DOMMouseScroll":"mousewheel";Ep.add(this.diagramCanvas,t,this.eventHandler.mouseDown,this.eventHandler),Ep.add(this.diagramCanvas,i,this.eventHandler.mouseMove,this.eventHandler),Ep.add(this.diagramCanvas,e,this.eventHandler.mouseUp,this.eventHandler),Ep.add(this.diagramCanvas,n,this.eventHandler.mouseLeave,this.eventHandler),Ep.add(this.diagramCanvas,"keydown",this.eventHandler.keyDown,this.eventHandler),Ep.add(this.diagramCanvas,"keyup",this.eventHandler.keyUp,this.eventHandler),Ep.add(this.diagramCanvas,"dblclick",this.eventHandler.doubleClick,this.eventHandler),Ep.add(this.diagramCanvas,"scroll",this.eventHandler.scrolled,this.eventHandler),Ep.add(this.diagramCanvas,o,this.eventHandler.mouseWheel,this.eventHandler),Ep.add(window,"resize",this.eventHandler.windowResize,this.eventHandler),this.initDroppables()},e.prototype.unWireEvents=function(){var t=Np.touchStartEvent,e=Np.touchMoveEvent,i=Np.isPointer?"pointerleave":"mouseleave",n=Np.isPointer,r="mozilla"===Np.info.name?n?"mousewheel":"DOMMouseScroll":"mousewheel",o=Np.touchEndEvent;Ep.remove(this.diagramCanvas,t,this.eventHandler.mouseDown),Ep.remove(this.diagramCanvas,e,this.eventHandler.mouseMove),Ep.remove(this.diagramCanvas,o,this.eventHandler.mouseUp),Ep.remove(this.diagramCanvas,i,this.eventHandler.mouseLeave),Ep.remove(this.diagramCanvas,"keydown",this.eventHandler.keyDown),Ep.remove(this.diagramCanvas,"keyup",this.eventHandler.keyUp),Ep.remove(this.diagramCanvas,"dblclick",this.eventHandler.doubleClick),Ep.remove(this.diagramCanvas,"scroll",this.eventHandler.scrolled),Ep.remove(this.diagramCanvas,r,this.eventHandler.mouseWheel),Ep.remove(window,"resize",this.eventHandler.windowResize)},e.prototype.select=function(t,e,i){if(f()){for(var n=0;n<t.length;n++)t[parseInt(n.toString(),10)]=this.nameTable[t[parseInt(n.toString(),10)].id];t=this.nameTable[t.id]||t}null!=t&&this.commandHandler.selectObjects(t,e,i)},e.prototype.getDiagramAction=function(t){var e;return 2===t&&Og.Render?e="Render":t&Og.UndoRedo?e="UndoRedo":t&Og.PublicMethod?e="PublicMethod":t&Og.ToolAction?e="ToolAction":t&Og.TextEdit?e="TextEdit":t&Og.Group?e="Group":t&Og.Interactions?e="Interactions":t&Og.PreventHistory?e="PreventHistory":t&Og.DecoratorPropertyChange?e="DecoratorPropertyChange":t&Og.PreventZIndexOnDragging?e="PreventZIndexOnDragging":t&Og.isGroupDragging?e="isGroupDragging":t&Og.DragUsingMouse&&(e="DragUsingMouse"),e},e.prototype.selectAll=function(){var t=[];t=this.getObjectsOfLayer(this.activeLayer.objects),this.select(t)},e.prototype.unSelect=function(t){f()&&(this.commandHandler.oldSelectedObjects=fa(this.selectedItems),t=this.nameTable[t.id]||t),t&&Jr(this,t)&&(this.commandHandler.unSelect(t),this.commandHandler.updateBlazorSelector())},e.prototype.clearSelection=function(){this.commandHandler.clearSelection(!0)},e.prototype.updateViewPort=function(){var t=this.getZoomingAttribute();this.updateBlazorDiagramProperties(t),this.eventHandler.updateViewPortSize(this.element),this.updateBlazorDiagramProperties(t,!0)},e.prototype.cutCommand=function(){this.cut()},e.prototype.cut=function(){this.commandHandler.cut()},e.prototype.addProcess=function(t,e){this.bpmnModule&&this.bpmnModule.addProcess(t,e,this)},e.prototype.removeProcess=function(t){this.bpmnModule&&this.bpmnModule.removeProcess(t,this)},e.prototype.pasteCommand=function(){this.paste()},e.prototype.paste=function(t){this.commandHandler.paste(t)},e.prototype.fitToPage=function(t){var e=this.getZoomingAttribute();this.updateBlazorDiagramProperties(e),this.scroller.fitToPage(t),this.updateBlazorDiagramProperties(e,!0)},e.prototype.bringIntoView=function(t){var e=this.getZoomingAttribute();this.updateBlazorDiagramProperties(e),this.scroller.bringIntoView(t,!0),this.updateBlazorDiagramProperties(e,!0)},e.prototype.bringToCenter=function(t){var e=this.getZoomingAttribute();this.updateBlazorDiagramProperties(e),this.scroller.bringToCenter(t),this.updateBlazorDiagramProperties(e,!0)},e.prototype.copyCommand=function(){this.copy()},e.prototype.copy=function(){return this.commandHandler.copy()},e.prototype.group=function(){this.selectedItems.nodes.concat(this.selectedItems.connectors).length>1&&(this.callBlazorModel=!1,this.insertBlazorDiagramObjects(this.selectedItems),this.commandHandler.group(),this.callBlazorModel=!0,this.commandHandler.getBlazorOldValues())},e.prototype.unGroup=function(){this.callBlazorModel=!1,this.insertBlazorDiagramObjects(this.selectedItems),this.commandHandler.unGroup(),this.callBlazorModel=!0,this.commandHandler.getBlazorOldValues()},e.prototype.sendToBack=function(){this.commandHandler.sendToBack()},e.prototype.setActiveLayer=function(t){var e=this.commandHandler.getLayer(t);this.activeLayer=e},e.prototype.addLayer=function(t,e){this.commandHandler.addLayer(t,e)},e.prototype.addDiagramLayer=function(t,e){this.commandHandler.addLayer(t,e,!1)},e.prototype.removeLayer=function(t){this.commandHandler.removeLayer(t,f())},e.prototype.removeDiagramLayer=function(t){this.commandHandler.removeLayer(t,!1)},e.prototype.moveObjects=function(t,e){var i=fa(this.layers);this.enableServerDataBinding(!1),this.commandHandler.moveObjects(t,e);var n=this.commandHandler.deepDiffer.map(i,fa(this.layers)),r=this.commandHandler.deepDiffer.frameObject({},n);this.oldDiagramObject={layers:r},this.commandHandler.updateBlazorProperties()},e.prototype.layerObjectUpdate=function(){if(f()){this.enableServerDataBinding(!1),this.oldDiagramObject.layers=[];for(var t=0;t<this.layers.length;t++){var e=fa(this.layers[parseInt(t.toString(),10)]);e.sfIndex=this.layers[parseInt(t.toString(),10)].zIndex,this.oldDiagramObject.layers.push(e)}}},e.prototype.sendLayerBackward=function(t){this.layerObjectUpdate(),this.commandHandler.sendLayerBackward(t),this.commandHandler.updateLayerObject(this.oldDiagramObject,!0)},e.prototype.bringLayerForward=function(t){this.layerObjectUpdate(),this.commandHandler.bringLayerForward(t),this.commandHandler.updateLayerObject(this.oldDiagramObject)},e.prototype.cloneLayer=function(t){this.commandHandler.cloneLayer(t)},e.prototype.bringToFront=function(){this.commandHandler.bringToFront()},e.prototype.moveForward=function(){this.commandHandler.sendForward()},e.prototype.sendBackward=function(){this.commandHandler.sendBackward()},e.prototype.getObject=function(t){return this.nameTable[""+t]},e.prototype.getNodeObject=function(t){return fa(this.nameTable[""+t])},e.prototype.getConnectorObject=function(t){return fa(this.nameTable[""+t])},e.prototype.getActiveLayer=function(){return this.activeLayer},e.prototype.nudgeCommand=function(t,e,i){"object"!=typeof t&&(this.selectedItems.nodes.length||this.selectedItems.connectors.length)>0&&this.nudge(t)},e.prototype.nudge=function(t,e,i){var n=0,r=0;"Left"===t||"Right"===t?n=("Left"===t?-1:1)*(e||1):r=("Up"===t?-1:1)*(i||1);var o=this.selectedItems,s=this.selectedItems.wrapper.children[0];if(s instanceof Jg)this.commandHandler.labelDrag(o.nodes[0],s,n,r);else{var a=fa(this.selectedItems);this.protectPropertyChange(!0),this.drag(o,n,r),this.protectPropertyChange(!1);var l={type:"PositionChanged",redoObject:fa(this.selectedItems),undoObject:a,category:"Internal"};this.addHistoryEntry(l)}this.refreshCanvasLayers()},e.prototype.insertBlazorDiagramObjects=function(t){if(f()&&!(this.blazorActions&$u.interaction)){if(this.enableServerDataBinding(!1),t instanceof _w){for(var e=0;e<t.nodes.length;e++)this.insertBlazorDiagramObjects(t.nodes[parseInt(e.toString(),10)]);for(e=0;e<t.connectors.length;e++)this.insertBlazorDiagramObjects(t.connectors[parseInt(e.toString(),10)])}if(!(t instanceof _w)){if(t&&t.children&&t.children.length>0)for(e=0;e<t.children.length;e++)this.insertBlazorDiagramObjects(this.nameTable[t.children[parseInt(e.toString(),10)]]);var i=fa(this.nameTable[t.id]);this.insertValue(i,!(VS(t)===ES))}}},e.prototype.drag=function(t,e,i){if(this.insertBlazorDiagramObjects(t),f()&&t.id&&(t=this.nameTable[t.id]||t),this.bpmnModule&&t instanceof Pw){if(this.bpmnModule.updateAnnotationDrag(t,this,e,i))return}if(t instanceof _w){if(this.preventConnectorsUpdate=!0,t.nodes&&t.nodes.length){for(var n=0,r=t.nodes;n<r.length;n++){var o=r[n];if(this.callBlazorModel=!1,this.drag(o,e,i),o.parentId){var s=this.nameTable[o.parentId];if(s.isLane){Wr(s,this.nameTable[s.parentId],o,this)}}}this.callBlazorModel=!0}if(t.connectors&&t.connectors.length){this.callBlazorModel=!1;for(var a=0,l=t.connectors;a<l.length;a++){var h=l[a];this.drag(h,e,i),-1===this.selectionConnectorsList.indexOf(h)&&this.selectionConnectorsList.push(h)}this.callBlazorModel=!0}this.updateSelector(),this.diagramActions&Og.DragUsingMouse&&this.updatePage()}else t instanceof Pw&&this.bpmnModule&&this.bpmnModule.updateAnnotationDrag(t,this,e,i),this.commandHandler.drag(t,e,i);if(t instanceof _w){this.preventConnectorsUpdate=!1;for(var c=0,d=this.selectionConnectorsList;c<d.length;c++){var p=d[c];this.updateConnectorProperties(this.nameTable[p.id]),"Bpmn"===p.shape.type&&"Default"===p.shape.sequence&&"Sequence"===p.shape.flow&&this.commandHandler.updatePathElementOffset(p)}this.selectionConnectorsList=[]}this.diagramActions&Og.ToolAction||this.diagramActions&Og.DragUsingMouse||this.updateSelector(),!this.callBlazorModel||this.blazorActions&$u.interaction||this.blazorActions&$u.GroupClipboardInProcess||this.commandHandler.getBlazorOldValues()},e.prototype.disableStackContainerPadding=function(t,e){if(t instanceof ew&&(t.considerPadding=e),t.children)for(var i=0,n=t.children;i<n.length;i++){var r=n[i];this.disableStackContainerPadding(r,!1)}},e.prototype.scale=function(t,e,i,n){this.disableStackContainerPadding(t.wrapper,!1),this.insertBlazorDiagramObjects(t);var r=!0;if(t.id&&(t=this.nameTable[t.id]||t),t instanceof _w){if(t.nodes&&t.nodes.length){this.callBlazorModel=!1;for(var o=0,s=t.nodes;o<s.length;o++){var a=s[o];r=this.commandHandler.scale(a,e,i,n,t),this.commandHandler.checkBoundaryConstraints(void 0,void 0,t.wrapper.bounds)||this.commandHandler.scale(a,1/e,1/i,n,t)}this.callBlazorModel=!0}if(t.connectors&&t.connectors.length){this.callBlazorModel=!1;for(var l=0,h=t.connectors;l<h.length;l++){var c=h[l];this.commandHandler.scale(c,e,i,n,t),this.commandHandler.checkBoundaryConstraints(void 0,void 0,t.wrapper.bounds)||this.commandHandler.scale(c,1/e,1/i,n,t)}this.callBlazorModel=!0}Ts(this,this.selectedItems)||this.updateSelector(),this.refreshCanvasLayers()}else this.commandHandler.scale(t,e,i,n,t.children?t:void 0);return!this.callBlazorModel||this.blazorActions&$u.interaction||this.blazorActions&$u.GroupClipboardInProcess||this.commandHandler.getBlazorOldValues(),this.disableStackContainerPadding(t.wrapper,!0),r},e.prototype.rotate=function(t,e,i){this.insertBlazorDiagramObjects(t);var n;if(t.id&&(t=this.nameTable[t.id]||t),t)if(i=i||{x:t.wrapper.offsetX,y:t.wrapper.offsetY},t instanceof _w){this.callBlazorModel=!1,t.rotateAngle+=e,t.wrapper.rotateAngle+=e;var r=ma(t.wrapper);if(!(n=this.commandHandler.checkBoundaryConstraints(void 0,void 0,r)))return t.rotateAngle-=e,t.wrapper.rotateAngle-=e,n;var o=[];o=(o=o.concat(t.nodes)).concat(t.connectors),this.commandHandler.rotateObjects(t,o,e,i),this.callBlazorModel=!0}else this.commandHandler.rotateObjects(t,[t],e,i);return!this.callBlazorModel||this.blazorActions&$u.interaction||this.commandHandler.getBlazorOldValues(),n},e.prototype.dragSourceEnd=function(t,e,i){this.insertBlazorDiagramObjects(t),this.commandHandler.dragSourceEnd(t,e,i),this.callBlazorModel&&this.commandHandler.getBlazorOldValues()},e.prototype.dragTargetEnd=function(t,e,i){this.insertBlazorDiagramObjects(t),this.commandHandler.dragTargetEnd(t,e,i),this.callBlazorModel&&this.commandHandler.getBlazorOldValues()},e.prototype.findObjectsUnderMouse=function(t,e){return this.eventHandler.findObjectsUnderMouse(t,e)},e.prototype.findObjectUnderMouse=function(t,e,i){return this.eventHandler.findObjectUnderMouse(t,e,i)},e.prototype.findTargetObjectUnderMouse=function(t,e,i,n,r){return this.eventHandler.findTargetUnderMouse(t,e,i,n,r)},e.prototype.findElementUnderMouse=function(t,e,i){return this.eventHandler.findElementUnderMouse(t,e,i)},e.prototype.findActionToBeDone=function(t,e,i,n){return this.eventHandler.findActionToBeDone(t,e,i,n)},e.prototype.getTool=function(t){var e,i=Oa(this.getCustomTool);return i&&(e=i(t))?e:this.eventHandler.getTool(t)},e.prototype.getCursor=function(t,e){var i,n=Oa(this.getCustomCursor);if(n&&(i=n(t,e)))return i;if(this.customCursor.length)for(var r=0;r<this.customCursor.length;r++)if(this.customCursor[parseInt(r.toString(),10)].action===t)return this.customCursor[parseInt(r.toString(),10)].cursor;return this.eventHandler.getCursor(t)},e.prototype.initHistory=function(){this.undoRedoModule&&this.undoRedoModule.initHistory(this)},e.prototype.addHistoryEntry=function(t,e){if(this.undoRedoModule&&this.constraints&Mg.UndoRedo&&(!this.currentSymbol||this.checkCurrentSymbol(this.currentSymbol,t))){if(t.undoObject&&"helper"===t.undoObject.id)return;this.undoRedoModule.addHistoryEntry(t,this),"StartGroup"!==t.type&&"EndGroup"!==t.type&&this.historyChangeTrigger(t,"CustomAction",e)}},e.prototype.checkCurrentSymbol=function(t,e){var i=!1;if(e.undoObject&&e.redoObject){var n=e.undoObject,r=e.undoObject;return r.id&&n.id&&r.id!==t.id&&n.id!==t.id?i=!0:i}return i},e.prototype.addCustomHistoryEntry=function(t){f()&&this.undoRedoModule&&this.constraints&Mg.UndoRedo&&(t.type=void 0,t.category="External",this.undoRedoModule.addHistoryEntry(t,this))},e.prototype.historyChangeTrigger=function(t,e,i){var n={},r=[];if("Internal"===t.category){switch(t&&t.redoObject&&t.redoObject.nodes instanceof Array&&t.redoObject.connectors instanceof Array?r=t.redoObject.nodes.concat(t.redoObject.connectors):t.redoObject&&r.push(t.redoObject),n.type=t.type,f()&&(n.entryType=t.type),t.type){case"PositionChanged":n.oldValue={offsetX:t.undoObject.offsetX,offsetY:t.undoObject.offsetY},n.newValue={offsetX:t.redoObject.offsetX,offsetY:t.redoObject.offsetY};break;case"RotationChanged":n.oldValue={rotateAngle:t.undoObject.rotateAngle},n.newValue={rotateAngle:t.redoObject.rotateAngle};break;case"SizeChanged":n.oldValue={offsetX:t.undoObject.offsetX,offsetY:t.undoObject.offsetY,width:t.undoObject.width,height:t.undoObject.height},n.newValue={offsetX:t.redoObject.offsetX,offsetY:t.redoObject.offsetY,width:t.redoObject.width,height:t.redoObject.height};break;case"CollectionChanged":n[t.changeType]=r;break;case"ConnectionChanged":n.oldValue={offsetX:t.undoObject.offsetX,offsetY:t.undoObject.offsetY},n.newValue={offsetX:t.redoObject.offsetX,offsetY:t.redoObject.offsetY}}var o=void 0,s=[],a=[];if(void 0===i&&"PropertyChanged"===t.type){for(var l=0;l<Object.keys(t.undoObject).length;l++)if("nodes"===Object.keys(t.undoObject)[parseInt(l.toString(),10)])for(var h=0,c=Object.keys(t.undoObject.nodes);h<c.length;h++){var d=c[h],p=parseInt(d);s.push(this.nodes[parseInt(p.toString(),10)].id)}for(l=0;l<Object.keys(t.undoObject).length;l++)if("connectors"===Object.keys(t.undoObject)[parseInt(l.toString(),10)])for(var u=0,g=Object.keys(t.undoObject.connectors);u<g.length;u++){d=g[u],p=parseInt(d);a.push(this.connectors[parseInt(p.toString(),10)].id)}i=s.concat(a)}if(o={cause:t.category,source:xs(r),change:xs(n),action:e,sourceId:i},f()){var m=(o={cause:t.category,change:xs(n),source:{connectors:void 0,nodes:void 0},action:e}).source;m.connectors=[],m.nodes=[];var v=void 0;for(l=0;l<r.length;l++)v=xs(r[parseInt(l.toString(),10)]),VS(r[parseInt(l.toString(),10)])===ES?m.connectors.push(v):m.nodes.push(v);o.source=m}r.length&&this.triggerEvent(jg.historyChange,o)}},e.prototype.startGroupAction=function(){this.diagramActions&Og.UndoRedo||this.addHistoryEntry({type:"StartGroup",category:"Internal"})},e.prototype.endGroupAction=function(){this.diagramActions&Og.UndoRedo||this.addHistoryEntry({type:"EndGroup",category:"Internal"})},e.prototype.undo=function(){this.canEnableBlazorObject=!0,this.callBlazorModel=!1,this.undoRedoModule&&this.constraints&Mg.UndoRedo&&this.undoRedoModule.undo(this),this.commandHandler.getBlazorOldValues(),this.callBlazorModel=!0,this.canEnableBlazorObject=!1},e.prototype.redo=function(){this.canEnableBlazorObject=!0,this.callBlazorModel=!1,this.undoRedoModule&&this.constraints&Mg.UndoRedo&&this.undoRedoModule.redo(this),this.commandHandler.getBlazorOldValues(),this.callBlazorModel=!0,this.canEnableBlazorObject=!1},e.prototype.getBlazorDiagramObjects=function(t){if(t)for(var e=0;e<t.length;e++)this.insertBlazorDiagramObjects(t[parseInt(e.toString(),10)]);else this.insertBlazorDiagramObjects(this.selectedItems);this.callBlazorModel=!1,this.canEnableBlazorObject=!0},e.prototype.align=function(t,e,i){this.getBlazorDiagramObjects(e),e||(e=(e=[]).concat(this.selectedItems.nodes,this.selectedItems.connectors)),this.diagramActions=this.diagramActions|Og.PublicMethod,this.commandHandler.align(e,t,i||"Object"),this.commandHandler.getBlazorOldValues(),this.callBlazorModel=!0,this.canEnableBlazorObject=!1},e.prototype.distribute=function(t,e){this.getBlazorDiagramObjects(e),e||(e=(e=[]).concat(this.selectedItems.nodes,this.selectedItems.connectors)),this.diagramActions=this.diagramActions|Og.PublicMethod,this.commandHandler.distribute(e,t),this.commandHandler.getBlazorOldValues(),this.canEnableBlazorObject=!1,this.callBlazorModel=!0},e.prototype.sameSize=function(t,e){this.getBlazorDiagramObjects(e),e||(e=(e=[]).concat(this.selectedItems.nodes,this.selectedItems.connectors)),this.diagramActions=this.diagramActions|Og.PublicMethod,this.commandHandler.sameSize(e,t),this.commandHandler.getBlazorOldValues(),this.canEnableBlazorObject=!1,this.callBlazorModel=!0},e.prototype.updateBlazorDiagramProperties=function(t,e){if(f()&&!e){var i=this.allowServerDataBinding;this.enableServerDataBinding(!0);for(var n=0;n<t.length;n++)this.oldDiagramObject[t[parseInt(n.toString(),10)]]=fa(this[t[parseInt(n.toString(),10)]]);this.enableServerDataBinding(i)}e&&this.commandHandler.getDiagramOldValues(this.oldDiagramObject,t)},e.prototype.getZoomingAttribute=function(){var t=[];return t.push("scrollSettings"),t.push("snapSettings"),t},e.prototype.zoom=function(t,e){var i=this.getZoomingAttribute();this.updateBlazorDiagramProperties(i),this.scroller.zoom(t,0,0,e),this.blazorActions&$u.interaction||this.updateBlazorDiagramProperties(i,!0)},e.prototype.zoomTo=function(t){var e=this.getZoomingAttribute();this.updateBlazorDiagramProperties(e);var i=t.zoomFactor?t.zoomFactor:.2;i="ZoomOut"===t.type?1/(1+i):1+i,this.scroller.zoom(i,0,0,t.focusPoint),this.updateBlazorDiagramProperties(e,!0)},e.prototype.pan=function(t,e,i,n){var r=this.getZoomingAttribute();this.updateBlazorDiagramProperties(r),this.setCursor("grabbing"),this.scroller.zoom(1,t,e,i,n),this.updateBlazorDiagramProperties(r,!0)},e.prototype.reset=function(){var t=this.getZoomingAttribute();this.updateBlazorDiagramProperties(t),this.scroller.zoom(1/this.scroller.currentZoom,-this.scroller.horizontalOffset,-this.scroller.verticalOffset,{x:0,y:0}),this.updateBlazorDiagramProperties(t,!0)},e.prototype.resetSegments=function(){var t=[],e=[],i=[];if(f())for(var n=0,r=this.connectors;n<r.length;n++){var o=r[n];t.push(fa(o,void 0,void 0,!0))}if(this.constraints&Mg.LineRouting&&this.lineRoutingModule)this.lineRoutingModule.lineRouting(this);else{this.protectPropertyChange(!0);for(var s=void 0,a=0;a<this.connectors.length;a++)(s=this.connectors[parseInt(a.toString(),10)]).segments=[],this.connectorPropertyChange(s,{},{segments:s.segments});this.protectPropertyChange(!1)}if(f()){for(var l=0,h=this.connectors;l<h.length;l++){o=h[l];e.push(fa(o,void 0,void 0,!0))}this.commandHandler.getObjectChanges(t,e,i);var c={nodes:[],connectors:i};if(window&&window.Blazor){o={methodName:"UpdateBlazorProperties",diagramobj:c};window.sfBlazor.updateBlazorProperties(o,this)}}},e.prototype.setBlazorDiagramProps=function(t){var e=this.getZoomingAttribute();t?this.updateBlazorDiagramProperties(e):this.updateBlazorDiagramProperties(e,!0)},e.prototype.triggerEvent=function(t,e){return _I(this,void 0,void 0,function(){var i;return FI(this,function(n){switch(n.label){case 0:return e&&this.updateEventValue(e),[4,this.trigger(jg[""+t],e)];case 1:return i=n.sent(),f()&&"string"==typeof i&&(i=JSON.parse(i)),[2,i]}})})},e.prototype.updateEventValue=function(t){var e=t.element;t.element&&e instanceof _w&&e.nodes.length+e.connectors.length===1&&(t.element=1===e.nodes.length?e.nodes[0]:e.connectors[0])},e.prototype.addNodeToLane=function(t,e,i){if(this.nameTable[""+e]){var n=this.nameTable[""+e];if(this.protectPropertyChange(!0),this.undoRedoModule&&this.historyManager.startGroupAction(),this.nameTable[t.id]||(t.offsetX=n.wrapper.bounds.width+n.wrapper.bounds.x,t.offsetY=n.wrapper.bounds.height+n.wrapper.bounds.y,t=this.add(t)),t.parentId="",n.shape.phases.length)for(var r=0;r<n.shape.phases.length;r++){l=e+i+r;if(this.nameTable[""+l]&&this.nameTable[""+l].isLane){var o=this.nameTable[""+l].wrapper.bounds,s={x:o.x+(o.x-n.wrapper.bounds.x+t.margin.left+t.wrapper.bounds.width/2),y:o.y+n.wrapper.bounds.y-t.margin.top};if("Horizontal"===n.shape.orientation)s.y=o.y;else{s.x=o.x;var a=this.nameTable[""+l].parentId+n.shape.lanes[0].id+"_0_header";s.y=o.y+(n.wrapper.bounds.y-this.nameTable[""+a].wrapper.bounds.height+t.margin.top+t.wrapper.bounds.height/2)}if(o.containsPoint(s)||l===e+i+(n.shape.phases.length-1)){Fr(this,this.nameTable[""+l],t,void 0,!0),Wr(this.nameTable[""+l],n,t,this);break}}}else{var l=e+i+"0";this.nameTable[""+l]&&(Fr(this,this.nameTable[""+l],t,void 0,!0),Wr(this.nameTable[""+l],n,t,this))}this.undoRedoModule&&this.historyManager.endGroupAction(),this.protectPropertyChange(!1)}this.updateDiagramElementQuad()},e.prototype.showTooltip=function(t){t&&t.id&&!t.wrapper&&(t=this.nameTable[t.id]);var e=ma(t.wrapper),i={x:0,y:0},n=t.tooltip.content?t.tooltip.content:"X:"+Math.round(e.x)+" Y:"+Math.round(e.y);t&&"Custom"===t.tooltip.openOn&&(i=t instanceof Pw?{x:t.offsetX+t.width/2,y:t.offsetY+t.height/2}:{x:t.targetPoint.x,y:t.targetPoint.x},this.commandHandler.showTooltip(t,i,n,"SelectTool",!0))},e.prototype.hideTooltip=function(t){t&&"Custom"===t.tooltip.openOn&&this.tooltipObject.close()},e.prototype.addNode=function(t,e){return this.add(t,e)},e.prototype.addChildToGroup=function(t,e){var i=this.allowServerDataBinding;this.enableServerDataBinding(!1);var n=this.isProtectedOnChange;this.protectPropertyChange(!0),t=this.getObject(t.id),f()&&this.insertValue(t,!0);var r=!(this.diagramActions&Og.UndoRedo||this.diagramActions&Og.Group||this.diagramActions&Og.PreventHistory);r&&this.startGroupAction();var o=this.addChild(t,e);if(r){var s={};s[""+o]=fa(this.getObject(o));var a={type:"AddChildToGroupNode",changeType:"Insert",undoObject:fa(t),redoObject:fa(t),category:"Internal",objectId:o,childTable:s};this.addHistoryEntry(a),this.endGroupAction()}this.protectPropertyChange(n),this.enableServerDataBinding(i),this.updateSelector(),f()&&r&&this.commandHandler.getBlazorOldValues()},e.prototype.getHistoryStack=function(t){var e=[],i=t?this.historyManager.undoStack:this.historyManager.redoStack;if(void 0!==this.historyManager.stackLimit){for(var n=i.length-1;n>=0;n--)if(e.push(i[parseInt(n.toString(),10)]),e.length>this.historyManager.stackLimit)return e}else e=i;return e},e.prototype.getEdges=function(t){return t.outEdge?this.nameTable[t.id].outEdges:this.nameTable[t.id].inEdges},e.prototype.getParentId=function(t){return this.nameTable[""+t].parentId},e.prototype.addConnector=function(t){return this.add(t)},e.prototype.UpdateBlazorDiagramModelCollection=function(t,e,i,n){if(!(this.blazorActions&$u.ClearObject)){if(window&&window.Blazor){var r=void 0,o=[],s=[],a=[],l=[];if(n&&!e)for(var h=0;h<this.blazorAddorRemoveCollection.length;h++)a.push(VS(this.blazorAddorRemoveCollection[parseInt(h.toString(),10)])===ES?"Connector":"Node"),r=xs(this.blazorAddorRemoveCollection[parseInt(h.toString(),10)]),s.push(r),l=this.blazorRemoveIndexCollection;else if(!this.isServerUpdate||i){this.isServerUpdate=!0;var c=xs(t),d=void 0,p=[];if(!e){p=i||this.commandHandler.getChildren(t,[]);for(h=0;h<p.length;h++)c=xs(p[parseInt(h.toString(),10)]),s.push(c),d=VS(p[parseInt(h.toString(),10)])===ES?this.connectors.indexOf(p[parseInt(h.toString(),10)]):this.nodes.indexOf(p[parseInt(h.toString(),10)]),l.push(d),a.push(VS(p[parseInt(h.toString(),10)])===ES?"Connector":"Node");i||(s.push(xs(t)),l.push(this.nodes.indexOf(t)),a.push(VS(t)===ES?"Connector":"Node"))}if(e&&e.length>0)for(h=0;h<e.length;h++){c=xs(e[parseInt(h.toString(),10)]);e[parseInt(h.toString(),10)]instanceof Pw?s.push(c):o.push(c),a.push(VS(e[parseInt(h.toString(),10)])===ES?"Connector":"Node")}this.isServerUpdate=!1}var u={methodName:"UpdateBlazorDiagramObjects",diagramobj:{nodeObj:JSON.stringify(s),ObjectType:a,removalIndex:e?void 0:l,isMultipleObjects:!0,annotationIndex:void 0,connectorObj:JSON.stringify(o)}};window.sfBlazor.updateBlazorProperties(u,this),n&&!e&&(this.blazorAddorRemoveCollection=[],this.blazorRemoveIndexCollection=[])}}},e.prototype.UpdateBlazorDiagramModel=function(t,e,i,n){if(!(this.blazorActions&$u.GroupClipboardInProcess)){if(window&&window.Blazor&&!this.isServerUpdate&&!(this.diagramActions&Og.Clear)){var r=xs(t),o={methodName:"UpdateBlazorDiagramObjects",diagramobj:{nodeObj:JSON.stringify(r),ObjectType:e,removalIndex:i,isMultipleObjects:!1,annotationIndex:n,connectorObj:void 0}};window.sfBlazor.updateBlazorProperties(o,this)}}},e.prototype.UpdateBlazorLabelOrPortObjects=function(t,e,i,n){if(window&&window.Blazor&&t.length>0&&!this.isServerUpdate&&!(this.diagramActions&Og.Clear)){for(var r=[],o=[],s=[],a=0;a<t.length;a++)r.push(xs(t[parseInt(a.toString(),10)])),o.push(e),s.push(n);var l={methodName:"UpdateBlazorDiagramObjects",diagramobj:{nodeObj:JSON.stringify(r),ObjectType:o,removalIndex:i,isMultipleObjects:!0,annotationIndex:s,connectorObj:null,portIndex:"Port"===e?s:[]}};window.sfBlazor.updateBlazorProperties(l,this)}},e.prototype.addBlazorDiagramObjects=function(){var t=[],e=[];if(this.dataBindingModule&&!(this.realActions&Ag.PreventDataInit)){for(var i=0;i<this.nodes.length;i++)t.push(fa(this.nodes[parseInt(i.toString(),10)],void 0,void 0,!0));for(i=0;i<this.connectors.length;i++)e.push(fa(this.connectors[parseInt(i.toString(),10)],void 0,void 0,!0))}if(window&&window.Blazor){var n={methodName:"AddBlazorObjects",diagramobj:{nodeObj:JSON.stringify(t),isConnector:!1}};window.sfBlazor.updateBlazorProperties(n,this),n={methodName:"AddBlazorObjects",diagramobj:{nodeObj:JSON.stringify(e),isConnector:!0}},window.sfBlazor.updateBlazorProperties(n,this)}},e.prototype.removeNodeEdges=function(t,e,i){var n=this.nameTable[""+t],r=i?n.outEdges:n.inEdges;if(r.length>0)for(var o=0;o<r.length;o++)r[parseInt(o.toString(),10)]===e&&r.splice(o,1)},e.prototype.insertBlazorConnector=function(t){f()&&t instanceof ES&&(t.sourceID&&this.nameTable[t.sourceID]&&this.insertValue(fa(this.nameTable[t.sourceID]),!0),t.targetID&&this.nameTable[t.targetID]&&this.insertValue(fa(this.nameTable[t.targetID]),!0))},e.prototype.add=function(t,i){var n,r=this.isProtectedOnChange;if(this.protectPropertyChange(!0),t){var o=void 0;if(o={element:t=fa(t),cause:this.diagramActions,diagramAction:this.getDiagramAction(this.diagramActions),state:"Changing",type:"Addition",cancel:!1},this.parentObject&&(o.parentId=this.parentObject.id),f()&&(o=Ss(o,t,"Changing","Addition")),"helper"===t.id||this.diagramActions&Og.PreventCollectionChangeOnDragOver||this.triggerEvent(jg.collectionChange,o),o.cancel&&this.drawingObject){this.removeElements(o.element),this.tooltipObject.close();var s=this.getObject(o.element.sourceID),a=void 0;if(VS(o.element)===ES){if(o.element.sourceID&&(this.removeNodeEdges(o.element.sourceID,o.element.id,!0),s.ports.length>0)){for(var l=0;l<s.ports.length;l++){var h=s.ports[parseInt(l.toString(),10)];h.id===o.element.sourcePortID&&(a=!(h.outEdges.length>0))}this.removePortEdges(s,o.element.sourcePortID,o.element.id,a)}o.element.targetID&&this.removeNodeEdges(o.element.targetID,o.element.id,!1)}}this.diagramActions=this.diagramActions|Og.PublicMethod,t.id=t.id||da();var c=this.activeLayer;if(!o.cancel&&!c.lock){if(c.objects.indexOf(t.id)<0&&!c.lock&&(c.visible||(c.visible=!0,this.dataBind()),c.objects.push(t.id)),VS(t)===ES)(n=new ES(this,"connectors",t,!0)).status="New",No(n,t,this.connectorDefaults),this.connectors.push(n),this.initObject(n),f()&&(this.blazorActions&$u.GroupingInProgress?this.blazorAddorRemoveCollection.push(n):this.blazorAddorRemoveCollection.length>0?(this.isServerUpdate=!1,this.blazorAddorRemoveCollection.push(n),this.UpdateBlazorDiagramModelCollection(void 0,this.blazorAddorRemoveCollection,void 0,!0),this.blazorAddorRemoveCollection=[],this.commandHandler.getBlazorOldValues()):this.isServerUpdate||this.blazorActions&$u.GroupClipboardInProcess||(this.UpdateBlazorDiagramModel(n,"Connector"),this.commandHandler.getBlazorOldValues())),!1===t.visible&&this.updateElementVisibility(n.wrapper,n,t.visible),this.updateEdges(n),this.insertBlazorConnector(n);else{if(n=new Pw(this,"nodes",t,!0),No(n,t,this.nodeDefaults),n.parentId=t.parentId?t.parentId:n.parentId,n.umlIndex=t.umlIndex,n.status="New",this.nodes.push(n),this.initObject(n,c,void 0,i),f()&&(this.blazorActions&$u.GroupingInProgress?this.blazorAddorRemoveCollection.push(n):this.blazorAddorRemoveCollection.length>0?(this.blazorAddorRemoveCollection.push(n),this.isServerUpdate=!1,this.UpdateBlazorDiagramModelCollection(void 0,this.blazorAddorRemoveCollection,void 0,!0),this.commandHandler.getBlazorOldValues(),this.blazorAddorRemoveCollection=[]):this.isServerUpdate||this.blazorActions&$u.GroupClipboardInProcess||(this.UpdateBlazorDiagramModel(n,"Node"),this.commandHandler.getBlazorOldValues())),this.updateTemplate(),this.bpmnModule){if(n.shape.annotations&&0!==n.shape.annotations.length)for(var d=0,p=this.bpmnModule.getTextAnnotationConn(n);d<p.length;d++){var u=p[d];this.initConnectors(u,c,!1)}n.shape.activity&&n.shape.activity.subProcess.processes&&n.shape.activity.subProcess.processes.length&&this.bpmnModule.updateDocks(n,this)}if(this.lineRoutingModule&&this.constraints&Mg.LineRouting){var g=this.spatialSearch.findObjects(n.wrapper.outerBounds);for(l=0;l<g.length;l++){var m=g[parseInt(l.toString(),10)];m instanceof ES&&this.connectorPropertyChange(m,{},{sourceID:m.sourceID,targetID:m.targetID,sourcePortID:m.sourcePortID,targetPortID:m.targetPortID,sourcePoint:m.sourcePoint,targetPoint:m.targetPoint})}}if(n.umlIndex>-1&&t.parentId&&this.nameTable[t.parentId]&&"UmlClassifier"===this.nameTable[t.parentId].shape.type){var v=this.nameTable[t.parentId];v.children.splice(n.umlIndex,0,n.id),v.wrapper.children.splice(n.umlIndex,0,n.wrapper),v.wrapper.measure(new Qu),v.wrapper.arrange(v.wrapper.desiredSize),this.updateDiagramObject(v)}}if(o={element:n,cause:this.diagramActions,diagramAction:this.getDiagramAction(this.diagramActions),state:"Changed",type:"Addition",cancel:!1},this.parentObject&&(o.parentId=this.parentObject.id),f()&&(o=Ss(o,t,"Changed","Addition")),"helper"===t.id||this.diagramActions&Og.PreventCollectionChangeOnDragOver||this.triggerEvent(jg.collectionChange,o),!(this.diagramActions&Og.UndoRedo||this.diagramActions&Og.Group||this.diagramActions&Og.PreventHistory)){var y={type:"CollectionChanged",changeType:"Insert",undoObject:fa(t),redoObject:fa(t),category:"Internal"};this.addHistoryEntry(y)}this.parentObject=void 0,"SVG"===this.mode&&(this.updateSvgNodes(n),this.updateTextElementValue(n),this.updateDiagramObject(n),n.shape.activity&&n.shape.activity.subProcess.processes&&n.shape.activity.subProcess.processes.length&&this.updateProcesses(n),this.updateBridging())}}this.protectPropertyChange(r),this.resetDiagramActions(Og.PublicMethod),n&&this.layers.length>1&&this.moveNode(n);for(var b=0,S=this.views;b<S.length;b++){var w=S[b],I=this.views[""+w];I instanceof e||this.refreshCanvasDiagramLayer(I)}return this.renderReactTemplates(),n},e.prototype.updateSvgNodes=function(t){if(t.children)for(var e=0,i=t.children;e<i.length;e++){var n=i[e];if(this.nameTable[""+n]&&this.nameTable[""+n].parentId){var r=Us(n+"_groupElement",this.element.id);r&&r.parentNode.removeChild(r)}}},e.prototype.updateProcesses=function(t){if(this.bpmnModule&&t&&t.shape&&t.shape.activity&&t.shape.activity.subProcess.processes&&t.shape.activity.subProcess.processes.length){var e=t.shape.activity.subProcess.processes;this.moveSvgNode(t.id);for(var i=0,n=e;i<n.length;i++){var r=n[i];this.moveSvgNode(r);for(var o=[],s=(o=o.concat(this.nameTable[""+r].outEdges,this.nameTable[""+r].inEdges)).length-1;s>=0;s--)this.moveSvgNode(o[parseInt(s.toString(),10)])}for(var a=0,l=e;a<l.length;a++){r=l[a];this.nameTable[""+r].shape.activity.subProcess.processes&&this.nameTable[""+r].shape.activity.subProcess.processes.length&&this.updateProcesses(this.nameTable[""+r])}}else this.moveSvgNode(t.id)},e.prototype.moveSvgNode=function(t){var e=Us(t+"_groupElement",this.element.id),i=e.parentElement;e.parentNode.removeChild(e),i.appendChild(e)},e.prototype.addTextAnnotation=function(t,e){if(this.bpmnModule){var i=this.bpmnModule.addAnnotation(e,t,this);if(this.initConnectors(i,this.commandHandler.getObjectLayer(e.id),!1),this.updateDiagramObject(e),!(this.diagramActions&Og.UndoRedo||this.diagramActions&Og.Group)){var n={type:"CollectionChanged",changeType:"Insert",undoObject:fa(t),redoObject:fa(t),category:"Internal"};this.addHistoryEntry(n)}if(e.parentId){var r=this.nameTable[e.parentId];if(r&&r.isLane){this.nameTable[r.parentId].isTextNode=!0}}}},e.prototype.spliceConnectorEdges=function(t,e){var i=[],n=e?this.nameTable[t.sourceID]:this.nameTable[t.targetID];if(n){for(var r=(i=e?n.outEdges:n.inEdges).length-1;r>=0;r--)i[parseInt(r.toString(),10)]===t.id&&i.splice(r,1);for(var o=0;n.ports&&o<n.ports.length;o++){var s=!e;this.removePortEdges(n,n.ports[parseInt(o.toString(),10)].id,t.id,s)}}},e.prototype.removeDependentConnector=function(t){if(t)for(var e=void 0,i=[],n=(i=i.concat(t.outEdges,t.inEdges)).length-1;n>=0;n--)(e=this.nameTable[i[parseInt(n.toString(),10)]])&&(this.connectorTable[e.id]=fa(e),this.remove(e))},e.prototype.removeObjectsFromLayer=function(t){if(t.children)for(var e=0;e<t.children.length;e++){var i=this.nameTable[t.children[parseInt(e.toString(),10)]];i&&this.removeObjectsFromLayer(i)}var n=this.layers.indexOf(this.commandHandler.getObjectLayer(t.id)),r=this.layers[parseInt(n.toString(),10)].objects.indexOf(t.id);r>-1&&(Jr(this,t)&&this.unSelect(t),this.layers[parseInt(n.toString(),10)].objects.splice(r,1),delete this.layers[parseInt(n.toString(),10)].zIndexTable[this.nameTable[t.id].zIndex])},e.prototype.removeElements=function(t){if("SVG"===this.mode||"Canvas"===this.mode&&"Native"===t.shape.type){var e=Us(t.id+"_groupElement",this.element.id),i=t;if(i.ports&&i.ports.length>0)for(var n=0;n<i.ports.length;n++){var r=i.ports[parseInt(n.toString(),10)],o=Us(i.id+"_"+r.id+"_groupElement",this.element.id);o&&o.parentNode.removeChild(o)}e&&e.parentNode.removeChild(e)}if(this.refreshCanvasLayers(),t.wrapper){var s=t.wrapper.children,a=void 0;if(s)for(n=0;n<s.length;n++){if(s[parseInt(n.toString(),10)]instanceof lm||s[parseInt(n.toString(),10)].id&&s[parseInt(n.toString(),10)].id.indexOf("icon_content")>0){s[parseInt(n.toString(),10)].id.indexOf("icon_content")>0&&"SVG"===this.mode&&((a=Us(s[parseInt(n.toString(),10)].id+"_shape_groupElement",this.element.id))&&a.parentNode.removeChild(a),(a=Us(s[parseInt(n.toString(),10)].id+"_rect_groupElement",this.element.id))&&a.parentNode.removeChild(a));for(var l=0,h=this.views;l<h.length;l++){var c=h[l];na(s[parseInt(n.toString(),10)].id+"_groupElement",c);var d=this.scroller.removeCollection.indexOf(t.id);this.scroller.removeCollection.splice(d,1)}}else if(s[parseInt(n.toString(),10)]instanceof Cb)for(var p=0,u=this.views;p<u.length;p++){c=u[p];na(t.id+"_html_element",c),na(s[parseInt(n.toString(),10)].id+"_html_element",c);var g=!0,m=this.nameTable[t.parentId];(this.isAngular||this.isReact||this.isVue)&&m&&m.isLane&&(g=!1),g&&this.clearTemplate(["nodeTemplate_"+t.id]),s[parseInt(n.toString(),10)].annotationId&&this.clearTemplate(["annotationTemplate_"+t.id+s[parseInt(n.toString(),10)].annotationId])}is(s[parseInt(n.toString(),10)].id)}}},e.prototype.removeCommand=function(){this.remove()},e.prototype.remove=function(t){var e=[];e=e.concat(this.selectedItems.nodes,this.selectedItems.connectors);var i,n=!1;if(t){if(t=this.nameTable[t.id],this.insertBlazorConnector(t),t&&(Dn(t)||this.diagramActions&Og.Clear)&&(i={element:t,cause:this.diagramActions,diagramAction:this.getDiagramAction(this.diagramActions),state:"Changing",type:"Removal",cancel:!1},f()&&(i=Ss(i,t,"Changing","Removal")),this.diagramActions&Og.Clear||"helper"===t.id||this.triggerEvent(jg.collectionChange,i),!i.cancel)){if(Dn(t)&&t&&t.shape&&"SwimLane"===t.shape.type&&function(t,e){var i,n,r,o,s,a,l=e.wrapper.children[0].rows;for(n=0;n<l.length;n++)for(r=0;r<l[parseInt(n.toString(),10)].cells.length;r++){if((s=Dr(l[parseInt(n.toString(),10)].cells[parseInt(r.toString(),10)]))&&s.children)for(o=s.children.length-1;o>=0;o--)s.children[parseInt(o.toString(),10)].children&&(a=t.nameTable[s.children[parseInt(o.toString(),10)].id])&&(a.isLane?Tr(t,a):(t.removeDependentConnector(a),t.diagramActions|=Og.PreventHistory,a.constraints&wg.Delete?t.remove(a):Pr(t,a,{},!1),t.diagramActions&=~Og.PreventHistory));s&&(i=t.nameTable[s.id])&&Tr(t,i)}}(this,t),this.bpmnModule&&this.bpmnModule.checkAndRemoveAnnotations(t,this))return void this.refreshCanvasLayers();if(!(this.diagramActions&Og.UndoRedo||this.diagramActions&Og.PreventHistory||!(t instanceof Pw||t instanceof ES))){var r={type:"CollectionChanged",changeType:"Remove",undoObject:fa(t),redoObject:fa(t),category:"Internal"};this.diagramActions&Og.Clear||t.children&&!t.isLane&&!t.isPhase&&t.children.length>0&&this.undoRedoModule&&"None"===this.layout.type&&(this.historyManager.startGroupAction(),n=!0),t instanceof Pw&&this.removeDependentConnector(t),t.isLane||t.isPhase||this.diagramActions&Og.Clear||this.isStackChild(t)||this.addHistoryEntry(r)}!t.children||t.isLane||t.isPhase||f()&&this.diagramActions&Og.UndoRedo||this.deleteGroup(t),t.parentId&&(this.deleteChild(t),this.nameTable[t.parentId]&&"UmlClassifier"===this.nameTable[t.parentId].shape.type&&(this.updateDiagramObject(this.nameTable[t.parentId]),this.updateConnectorEdges(this.nameTable[t.parentId])));var o=void 0;this.diagramActions=this.diagramActions|Og.PublicMethod;var s=this.nameTable[t.id];if(s instanceof Pw){if("Bpmn"===s.shape.type&&this.bpmnModule&&this.bpmnModule.removeBpmnProcesses(s,this),s.isLane||s.isPhase||"SwimLane"===s.shape.type){(l=s.isLane||s.isPhase?this.nameTable[s.parentId]:this.nameTable[s.id]).wrapper.children[0];s.isLane?Or(this,s,l):s.isPhase&&Ar(this,s,l)}o=this.nodes.indexOf(s),f()&&"helper"!==t.id&&(this.blazorActions&$u.GroupingInProgress?(this.blazorRemoveIndexCollection.splice(0,0,o),this.blazorAddorRemoveCollection.splice(0,0,t)):this.blazorAddorRemoveCollection.length>0?(this.commandHandler.getBlazorOldValues(),this.blazorRemoveIndexCollection.splice(0,0,o),this.blazorAddorRemoveCollection.splice(0,0,t),this.UpdateBlazorDiagramModelCollection(void 0,void 0,void 0,!0)):this.isServerUpdate||this.blazorActions&$u.GroupClipboardInProcess||this.UpdateBlazorDiagramModel(t,"Node",o)),-1!==o&&(this.crudDeleteNodes.push(this.nameTable[s.id]),this.nodes.splice(o,1),this.updateNodeEdges(s))}else o=this.connectors.indexOf(s),f()&&(this.blazorActions&$u.GroupingInProgress?(this.blazorAddorRemoveCollection.splice(0,0,t),this.blazorRemoveIndexCollection.splice(0,0,o)):this.blazorAddorRemoveCollection.length>0?(this.commandHandler.getBlazorOldValues(),this.blazorAddorRemoveCollection.splice(0,0,t),this.blazorRemoveIndexCollection.splice(0,0,o),this.UpdateBlazorDiagramModelCollection(void 0,void 0,void 0,!0)):this.isServerUpdate||this.blazorActions&$u.GroupClipboardInProcess||this.UpdateBlazorDiagramModel(t,"Connector",o)),-1!==o&&(this.crudDeleteNodes.push(this.nameTable[s.id]),this.connectors.splice(o,1)),this.updateEdges(s),this.spliceConnectorEdges(t,!0),this.spliceConnectorEdges(t,!1);if(this.isServerUpdate||this.blazorActions&$u.GroupClipboardInProcess||this.commandHandler.getBlazorOldValues(),n&&this.historyManager.endGroupAction(),Jr(this,s)&&this.unSelect(s),!s.isPhase){if(this.removeObjectsFromLayer(t),this.currentDrawingObject&&(this.currentDrawingObject.wrapper=void 0),delete this.nameTable[t.id],e.length>0&&e[0].id===s.id&&s.parentId){var a=this.nameTable[s.parentId];if(a&&a.isLane&&"SwimLane"===this.nameTable[a.parentId].shape.type){var l;Er(this,l=this.nameTable[a.parentId],a,s)}}this.removeElements(s),this.updateBridging(),"SVG"!==this.mode&&this.refreshDiagramLayer(),this.diagramActions&Og.Clear||(this.removeFromAQuad(s),i={element:t,cause:this.diagramActions,diagramAction:this.getDiagramAction(this.diagramActions),state:"Changed",type:"Removal",cancel:!1},f()&&(i=Ss(i,t,"Changed","Removal")),"helper"!==t.id&&this.triggerEvent(jg.collectionChange,i),this.resetTool())}}}else if(e.length>0){this.undoRedoModule&&(this.historyManager.startGroupAction(),this.blazorActions|=$u.GroupingInProgress,n=!0),f()&&e.length>1&&this.clearSelection();for(var h=0;h<e.length;h++){e[parseInt(h.toString(),10)];if(this.nameTable[e[parseInt(h.toString(),10)].id]){if(e[parseInt(h.toString(),10)]instanceof ES&&this.bpmnModule&&this.bpmnModule.textAnnotationConnectors.indexOf(e[parseInt(h.toString(),10)])>-1)return void this.remove(this.nameTable[e[parseInt(h.toString(),10)].targetID]);f()&&(!this.isServerUpdate&&e&&e.length>1&&(this.isServerUpdate=!0),e[parseInt(h.toString(),10)].parentId&&this.insertBlazorDiagramObjects(this.nameTable[e[parseInt(h.toString(),10)].parentId])),this.remove(e[parseInt(h.toString(),10)]),f()&&e[parseInt(h.toString(),10)].parentId&&(this.commandHandler.getBlazorOldValues(),this.isServerUpdate=!1)}}n&&(this.blazorActions&=~$u.GroupingInProgress,this.isServerUpdate=!0,this.commandHandler.getBlazorOldValues(),this.UpdateBlazorDiagramModelCollection(void 0,void 0,void 0,!0),this.historyManager.endGroupAction(),this.isServerUpdate=!1),this.clearSelection()}if(!(t&&(Dn(t)||this.diagramActions&Og.Clear)||this.diagramActions&Og.UndoRedo||this.diagramActions&Og.PreventHistory||!(t instanceof Pw||t instanceof ES))){r={type:"ConnectionChanged",undoObject:fa(t),redoObject:fa(t),category:"Internal"};t.isLane||t.isPhase||this.diagramActions&Og.Clear||this.isStackChild(t)||this.addHistoryEntry(r)}if(this.tooltipObject.close(),f()&&e&&e.length>0){for(var c=!0,d=0;d<e.length;d++)this.nameTable[e[parseInt(d.toString(),10)].id]&&(c=!1);c&&(this.isServerUpdate=!1)}},e.prototype.isStackChild=function(t){var e,i=this.nameTable[t.parentId];if(t&&t.parentId&&i.container&&"Stack"===i.container.type&&"UmlClassifier"!==this.nameTable[t.parentId].shape.type){e=!0;var n={type:"StackChildPositionChanged",redoObject:{sourceIndex:void 0,source:t,target:void 0,targetIndex:void 0},undoObject:{sourceIndex:i.wrapper.children.indexOf(t.wrapper),source:t,target:void 0,targetIndex:void 0},category:"Internal"};this.diagramActions&Og.UndoRedo||this.addHistoryEntry(n)}return e},e.prototype.deleteChild=function(t,e){var i;if(e=e?this.nameTable[e.id]:this.nameTable[t.parentId],i="string"==typeof t?t:t.id,e&&e.children){for(var n=0;n<e.children.length;n++)if(e.children[parseInt(n.toString(),10)]===i){e.children.splice(n,1);for(var r=0;r<e.wrapper.children.length;r++)e.wrapper.children[parseInt(r.toString(),10)].id===i&&e.wrapper.children.splice(r,1);var o=this.getObject(e.parentId);if(o&&o.shape instanceof Uw)for(var s=0;s<o.shape.lanes.length;s++){var a=t.parentId.split(o.id);if(o.shape.lanes[parseInt(s.toString(),10)].id===a[1].slice(0,-1))for(var l=0;l<o.shape.lanes[parseInt(s.toString(),10)].children.length;l++)if(t.id===o.shape.lanes[parseInt(s.toString(),10)].children[parseInt(l.toString(),10)].id){o.shape.lanes[parseInt(s.toString(),10)].children.splice(l,1);break}}}e.wrapper.measure(new Qu),e.wrapper.arrange(e.wrapper.desiredSize)}},e.prototype.addChild=function(t,e,i){var n,r=this.nameTable[t.id];if(r.children||(r.children=[]),r.children&&("string"==typeof e?this.nameTable[""+e]&&(n=e):(n=e.id=e.id||da(),this.add(e)),n&&(!e.umlIndex||-1===e.umlIndex))){var o=this.nameTable[""+n];if(o.parentId=r.id,r.container&&"Stack"===r.container.type&&this.updateStackProperty(r,o),i)r.children.splice(i,0,n),r.wrapper.children.splice(i,0,o.wrapper);else{r.children.push(n),r.wrapper.children.push(o.wrapper);var s=this.getObject(t.parentId);if(s&&s.shape instanceof Uw)for(var a=0;a<s.shape.lanes.length;a++){var l=o.parentId.split(t.parentId);if(s.shape.lanes[parseInt(a.toString(),10)].id===l[1].slice(0,-1)){s.shape.lanes[parseInt(a.toString(),10)].children.push(o);break}}}r.wrapper.measure(new Qu),r.wrapper.arrange(r.wrapper.desiredSize),r.isLane||(this.nameTable[t.id].width=r.wrapper.actualSize.width,this.nameTable[t.id].height=r.wrapper.actualSize.height,this.nameTable[t.id].offsetX=r.wrapper.offsetX,this.nameTable[t.id].offsetY=r.wrapper.offsetY),void 0!==r.container&&(o.offsetX=o.wrapper.offsetX,o.offsetY=o.wrapper.offsetY),(!r.parentId||this.nameTable[r.parentId]&&"SwimLane"!==this.nameTable[r.parentId].shape.type)&&this.updateDiagramObject(r)}return n},e.prototype.clear=function(){this.clearObjects()},e.prototype.clearObjects=function(t){var e=[];if(e=t||(e=e.concat(this.nodes)).concat(this.connectors),this.diagramActions=this.diagramActions|Og.Clear,f()&&Hu.diagramsf_node_template){this.resetTemplate();var i=Hu.diagramsf_node_template.length;i>0&&Hu.diagramsf_node_template.splice(0,i-1)}for(var n=0,r=e;n<r.length;n++){var o=r[n];this.nameTable[o.id]&&this.remove(o)}this.diagramActions=this.diagramActions&~Og.Clear,this.spatialSearch=new OI(this.nameTable),this.initHistory()},e.prototype.startEditCommad=function(){var t,e=this.selectedItems.nodes[0]?this.selectedItems.nodes[0]:void 0;if(e&&e instanceof Pw)if(e.isLane&&e.parentId)for(var i=this.nameTable[e.parentId],n=i.shape.lanes,r=e.id.slice(i.id.length),o=r.substring(0,r.length-1),s=0;s<n.length;s++)e.isLane&&o===n[parseInt(s.toString(),10)].id&&(t=this.nameTable[n[parseInt(s.toString(),10)].header.id]);else if("SwimLane"===e.shape.type&&e.shape.header&&e.shape.hasHeader){var a=e.wrapper.children[0].rows[0].cells[0].children[0].id;t=this.nameTable[""+a]}this.startTextEdit(t)},e.prototype.startTextEdit=function(t,e){if(!Fn(this)&&!_n(this)||Vn(this)){this.textEditing=!0;var i=this.scroller.transform,n=qn(this)?i.scale:1,r=void 0,o=void 0,s=void 0,a=void 0,l=void 0;if(t||(t=this.selectedItems.nodes[0]?this.selectedItems.nodes[0]:this.selectedItems.connectors[0]),t){if(f()){var h=fa(t);h.annotations.length>0&&this.insertValue(h,t instanceof Pw),t=this.nameTable[t.id]||t}t.shape&&"UmlClassifier"===t.shape.type&&(t=this.nameTable[t.children[0]]);var c=!1;if(this.bpmnModule&&(l=this.bpmnModule.getTextAnnotationWrapper(t,e))&&(t=this.nameTable[t.id.split("_textannotation_")[0]]),l?c=!0:("Text"!==t.shape.type&&0===t.annotations.length&&(t.constraints&wg.ReadOnly||(this.activeLabel.isGroup=!0,this.startGroupAction(),this.addLabels(t,[{id:da(),content:""}]))),!e&&("Text"!==t.shape.type&&t.annotations.length>0||"Text"===t.shape.type)&&(e="Text"===t.shape.type?t.wrapper.children[0].id.split("_")[1]:t.annotations[0].id),e&&(l=this.getWrapper(t.wrapper,e))),t&&l&&!(l instanceof Cb)&&(!function(t,e){var i=0;return i=e instanceof ES?bg.ReadOnly:wg.ReadOnly,"Text"===e.shape.type?e.constraints&wg.ReadOnly:e.constraints&i?t.constraints&Sg.InheritReadOnly?1:0:t.constraints&Sg.ReadOnly?1:0}(l,t)||c)){var d=l.style,p=void 0;p=90>(p=l.bounds.width<t.wrapper.bounds.width?l.bounds.width:t.wrapper.bounds.width)?90:p;var u=document.getElementById(this.element.id+"_editTextBoxDiv"),g=document.getElementById(this.element.id+"_editBox");if(r=g?g.value:l.content,this.activeLabel.text=r,u||g||(u=Ks("div",{}),g=Ks("textarea",{}),this.diagramCanvas.appendChild(u),u.appendChild(g),g.appendChild(document.createTextNode(r))),(o=Ps(l.style,r,void 0,void 0,p)).isEmpty()&&(o="Text"!==t.shape.type?new Qu(cs(t,l.id.split(t.id+"_")[1]).width||50,l.style.fontSize):new Qu(t.width>50?50:t.width,l.style.fontSize)),t.parentId&&"UmlClassifier"===this.nameTable[t.parentId].shape.type?(o.width=t.wrapper.bounds.width-20,s=(t.wrapper.bounds.center.x+i.tx)*i.scale-o.width/2*n-2.5,a=(t.wrapper.bounds.center.y+i.ty)*i.scale-o.height/2*n-3,l.style.textAlign="Left"):(o.width=Math.max(o.width,50),s=(l.bounds.center.x+i.tx)*i.scale-o.width/2*n-2.5,a=(l.bounds.center.y+i.ty)*i.scale-o.height/2*n-3),t instanceof ES&&"Bezier"===t.type){var m=this.getMidPoint(t);s=(m.cx+i.tx)*i.scale-o.width/2*n-2.5,a=(m.cy+i.ty)*i.scale-o.height/2*n-3}aa(u,{id:this.element.id+"_editTextBoxDiv",style:"position: absolute;left:"+s+"px;top:"+a+"px;width:"+(o.width+1)*n+"px;height:"+o.height*n+"px; containerName:"+t.id+";"}),aa(g,{id:this.element.id+"_editBox",style:"width:"+(o.width+1)*n+"px;height:"+o.height*n+"px;resize: none;outline: none;overflow: hidden;;font-family:"+d.fontFamily+";font-size:"+d.fontSize*n+"px;text-align:"+l.style.textAlign.toLocaleLowerCase()+";",class:"e-diagram-text-edit"}),g.style.fontWeight=d.bold?"bold":"",g.style.fontStyle=d.italic?"italic":"",g.style.lineHeight=(1.2*d.fontSize+"px;").toString(),g.style.textDecoration=d.textDecoration?d.textDecoration:"",this.activeLabel.parentId=t.id,this.activeLabel.id=e,l.visible=!1,this.updateDiagramObject(t),this.diagramActions=this.diagramActions|Og.TextEdit,this.isTriggerEvent||(Ep.add(g,"input",this.eventHandler.inputChange,this.eventHandler),Ep.add(g,"focusout",this.focusOutEdit,this),g.select())}}}},e.prototype.updateConnectorfixedUserHandles=function(t){if(t.fixedUserHandles.length)for(var e=void 0,i=0,n=t.fixedUserHandles;i<n.length;i++){var r=n[i];e=this.getWrapper(t.wrapper,r.id),t.updateAnnotation(r,t.intermediatePoints,t.wrapper.bounds,e)}t.wrapper.measure(new Qu(t.wrapper.width,t.wrapper.height)),t.wrapper.arrange(t.wrapper.desiredSize)},e.prototype.updateNodeExpand=function(t,e){for(var i=0;i<t.outEdges.length;i++){var n=this.nameTable[t.outEdges[parseInt(i.toString(),10)]],r=this.nameTable[n.targetID];n.visible=e,r&&(e||(this.updateElementVisibility(n.wrapper,n,!1),r.isExpanded=e),this.updateNodeExpand(r,r.isExpanded),r.visible=e,e||this.updateElementVisibility(r.wrapper,r,!1))}},e.prototype.updateConnectorAnnotation=function(t){if(t.annotations.length)for(var e=void 0,i=0,n=t.annotations;i<n.length;i++){var r=n[i];e=this.getWrapper(t.wrapper,r.id),t.updateAnnotation(r,t.intermediatePoints,t.wrapper.bounds,e,this.diagramActions&Og.Interactions)}t.wrapper.measure(new Qu(t.wrapper.width,t.wrapper.height)),t.wrapper.arrange(t.wrapper.desiredSize)},e.prototype.removeChildrenFromLayout=function(t){for(var e,i=[],n=0;n<t.length;n++)(e=t[parseInt(n.toString(),10)]).parentId||e.processId||i.push(e);return i},e.prototype.doLayout=function(){var t,e=!1,i="ComplexHierarchicalTree"===this.layout.type||"HierarchicalTree"===this.layout.type,n=this.isProtectedOnChange;this.protectPropertyChange(!0);var r=this.removeChildrenFromLayout(this.nodes),o=this.layout.enableRouting&&"ComplexHierarchicalTree"===this.layout.type,s={x:this.scroller.viewPortWidth,y:this.scroller.viewPortHeight};if("None"!==this.layout.type){if((o||"DifferentPoint"===this.layout.connectionPointOrigin&&this.lineDistributionModule&&i||"Linear"===this.layout.arrangement)&&this.lineDistributionModule.initLineDistribution(this.layout,this),this.organizationalChartModule)t=this.organizationalChartModule.updateLayout(r,this.nameTable,this.layout,s,this.dataSourceSettings.id,this.diagramActions),e=!0,this.layoutAnimateModule&&t.rootNode&&!this.diagramActions?this.updateNodeExpand(t.rootNode,t.rootNode.isExpanded):this.layoutAnimateModule||!t.rootNode||t.rootNode.isExpanded||this.canExpand||this.updateNodeExpand(t.rootNode,t.rootNode.isExpanded);else if(this.mindMapChartModule)r&&r.length>0&&this.mindMapChartModule.updateLayout(r,this.nameTable,this.layout,s,this.dataSourceSettings.id,this.dataSourceSettings.root),e=!0;else if(this.radialTreeModule)this.radialTreeModule.updateLayout(r,this.nameTable,this.layout,s),e=!0;else if(this.symmetricalLayoutModule)this.symmetricalLayoutModule.maxIteration=this.layout.maxIteration,this.symmetricalLayoutModule.springLength=this.layout.springLength,this.symmetricalLayoutModule.springFactor=this.layout.springFactor,this.symmetricalLayoutModule.updateLayout(r,this.connectors,this.symmetricalLayoutModule,this.nameTable,this.layout,s),e=!0;else if(this.complexHierarchicalTreeModule){var a=this.complexHierarchicalTreeModule.getLayoutNodesCollection(this.nodes);a.length>0&&this.complexHierarchicalTreeModule.doLayout(a,this.nameTable,this.layout,s,this.lineDistributionModule),e=!0}if(e){this.preventDiagramUpdate=!0;var l={},h=r;f()&&!this.commandHandler.canUpdateTemplate&&this.updateTemplate();for(var c=0,d=h;c<d.length;c++){var p=d[c];if(this.preventNodesUpdate||this.diagramActions&&this.diagramActions&Og.PreventIconsUpdate||(this.updateIcon(p),this.updateDefaultLayoutIcons(p)),this.preventNodesUpdate=!0,this.nodePropertyChange(p,{},{offsetX:p.offsetX,offsetY:p.offsetY},!0),this.preventNodesUpdate=!1,p.wrapper.measure(new Qu(p.wrapper.width,p.wrapper.height)),p.wrapper.arrange(p.wrapper.desiredSize),this.updateDiagramObject(p,!0),p.inEdges.length>0)for(var u=0;u<p.inEdges.length;u++){l[(S=this.nameTable[p.inEdges[parseInt(u.toString(),10)]]).id]=S}if(p.outEdges.length>0)for(var g=0;g<p.outEdges.length;g++){var m=this.nameTable[p.outEdges[parseInt(g.toString(),10)]];l[m.id]=m}}for(var v=0,y=Object.keys(l);v<y.length;v++){var b=y[v];o&&this.lineDistributionModule.resetConnectorSegments(this.nameTable[""+b]);var S=l[""+b],w=this.getPoints(S);o&&this.lineDistributionModule.resetRoutingSegments(S,this,w),rs(S,w),"Bpmn"===S.shape.type&&"Default"===S.shape.sequence&&"Sequence"===S.shape.flow&&this.commandHandler.updatePathElementOffset(S),S.wrapper.measure(new Qu(void 0,void 0)),S.wrapper.arrange(S.wrapper.desiredSize),this.updateConnectorAnnotation(S),this.updateConnectorfixedUserHandles(S),this.updateQuad(S),this.updateDiagramObject(S,!0)}(o||"DifferentPoint"===this.layout.connectionPointOrigin&&this.lineDistributionModule&&i)&&this.lineDistributionModule.distributeLines(this.layout,this),this.preventDiagramUpdate=!1,this.updatePage(),this.diagramActions&Og.Render&&"Canvas"!==this.mode||this.refreshDiagramLayer()}n||this.protectPropertyChange(n)}return e&&this.updateDiagramElementQuad(),this.blazorActions&$u.expandNode?t:!f()||null},e.prototype.saveDiagram=function(){for(var t,e,i=[],n=0;n<this.nodes.length;n++)if("SwimLane"===(t=this.nodes[parseInt(n.toString(),10)]).shape.type){e=t.wrapper.children[0].childTable;for(var r=0,o=Object.keys(e);r<o.length;r++){i=Fo(e[""+o[r]],i)}for(var s=0;s<i.length;s++)this.nameTable[i[parseInt(s.toString(),10)]]&&(this.swimlaneChildTable[i[parseInt(s.toString(),10)]]=this.nameTable[i[parseInt(s.toString(),10)]].zIndex);this.swimlaneZIndexTable[t.id]=t.zIndex}return Yo(this)},e.prototype.loadDiagram=function(t){return Qo(t,this)},e.prototype.getDiagramContent=function(t){if(this.printandExportModule){return this.printandExportModule.getDiagramContent(t)}return""},e.prototype.exportImage=function(t,e){this.printandExportModule&&this.printandExportModule.exportImages(t,e)},e.prototype.printImage=function(t,e){this.printandExportModule&&(e.printOptions=!0,this.printandExportModule.exportImages(t,e))},e.prototype.setStackLimit=function(t){this.undoRedoModule&&t&&(this.historyManager.stackLimit=t,this.undoRedoModule.applyLimit(this.historyManager.currentEntry,t,this,!0))},e.prototype.clearHistory=function(){this.undoRedoModule&&this.undoRedoModule.clearHistory(this)},e.prototype.getDiagramBounds=function(){if(this.printandExportModule){var t=this.printandExportModule.getDiagramBounds("",{});return t.width=t.width>this.scrollSettings.viewPortWidth?t.width+(t.x>0?t.x:0):this.scrollSettings.viewPortWidth,t.height=t.height>this.scrollSettings.viewPortHeight?t.height+(t.y>0?t.y:0):this.scrollSettings.viewPortHeight,t.x=t.x>0?0:t.x,t.y=t.y>0?0:t.y,t}return new Zu},e.prototype.exportDiagram=function(t){if(this.printandExportModule){return this.printandExportModule.exportDiagram(t)}return""},e.prototype.print=function(t){this.printandExportModule&&this.printandExportModule.print(t)},e.prototype.addPorts=function(t,e){this.protectPropertyChange(!0);var i=[],n=!0;if(f()&&null!==t&&t.ports.length>0&&!(this.diagramActions&Og.UndoRedo)){-1!==Number(us(t,e[0].id,!1))&&(n=!1)}t=this.nameTable[t.id]||t;var r;e.length>1&&this.startGroupAction();for(var o=0;o<e.length;o++){if(r=new pm(t,"ports",e[parseInt(o.toString(),10)],!0),t.ports.push(r),f()&&n&&i.push(r),t.children){var s=t.wrapper;t.initPort(this.getDescription,t.wrapper.children[s.children.length-1],r)}else{t.wrapper.children.push(t.initPortWrapper(t.ports[t.ports.length-1]))}if(!(this.diagramActions&Og.UndoRedo||this.diagramActions&Og.Group)){var a={type:"PortCollectionChanged",changeType:"Insert",undoObject:fa(r),redoObject:fa(t),category:"Internal"};this.addHistoryEntry(a)}}e.length>1&&this.endGroupAction(),f()&&n&&this.UpdateBlazorLabelOrPortObjects(i,"Port",void 0,this.nodes.indexOf(t)),t.wrapper.measure(new Qu(t.width,t.height)),t.wrapper.arrange(t.wrapper.desiredSize),this.updateDiagramObject(t),this.protectPropertyChange(!1)},e.prototype.addConstraints=function(t,e){return t|e},e.prototype.removeConstraints=function(t,e){return t&~e},e.prototype.addNodeLabels=function(t,e){this.addLabels(t,e)},e.prototype.addConnectorLabels=function(t,e){this.addLabels(t,e)},e.prototype.addLabels=function(t,e){this.protectPropertyChange(!0);var i=!0,n=[];if(f()&&null!=t&&t.annotations.length>0&&!(this.diagramActions&Og.UndoRedo)){-1!==Number(us(t,e[0].id,!0))&&(i=!1)}var r,o=(t=this.nameTable[t.id]||t).wrapper;e.length>1&&this.startGroupAction();for(var s=0;s<e.length;s++){if(t instanceof Pw)if(r=new vm(t,"annotations",e[parseInt(s.toString(),10)],!0),t.annotations.push(r),f()&&i&&n.push(r),t.children){for(var a=t,l=0;l<a.wrapper.children.length;l++)if(a.wrapper.children[parseInt(l.toString(),10)].id===a.id+"group_container"){a.wrapper.children[parseInt(l.toString(),10)].children.push(t.initAnnotationWrapper(t.annotations[t.annotations.length-1],this.element.id))}}else o.children.push(t.initAnnotationWrapper(t.annotations[t.annotations.length-1],this.element.id));else if(t instanceof ES){r=new ym(t,"annotations",e[parseInt(s.toString(),10)],!0),t.annotations.push(r),f()&&i&&n.push(r);var h=o.children[0],c=new Zu(h.offsetX-h.width/2,h.offsetY-h.height/2,h.width,h.height);o.children.push(t.getAnnotationElement(t.annotations[t.annotations.length-1],t.intermediatePoints,c,this.getDescription,this.element.id))}if(!(this.diagramActions&Og.UndoRedo||this.diagramActions&Og.Group)){var d={type:"LabelCollectionChanged",changeType:"Insert",undoObject:fa(r),redoObject:fa(t),category:"Internal"};this.addHistoryEntry(d)}}e.length>1&&this.endGroupAction(),f()&&i&&this.UpdateBlazorLabelOrPortObjects(n,t instanceof Pw?"NodeAnnotation":"ConnectorAnnotation",void 0,t instanceof Pw?this.nodes.indexOf(t):this.connectors.indexOf(t)),t.wrapper.measure(new Qu(o.width,o.height)),t.wrapper.arrange(o.desiredSize),this.updateDiagramObject(t),this.protectPropertyChange(!1)},e.prototype.addLanes=function(t,e,i){t=this.nameTable[t.id]||t;for(var n=0;n<e.length;n++)Sr(this,t,e[parseInt(n.toString(),10)],i),void 0!==i&&(i+=1);this.updateDiagramElementQuad()},e.prototype.addPhases=function(t,e){t=this.nameTable[t.id]||t;for(var i=0;i<e.length;i++)Ir(this,t,e[parseInt(i.toString(),10)]);this.updateDiagramElementQuad()},e.prototype.removeLane=function(t,e){Or(this,void 0,t,e),this.updateDiagramElementQuad()},e.prototype.removePhase=function(t,e){Ar(this,void 0,t,e),this.updateDiagramElementQuad()},e.prototype.removelabelExtension=function(t,e,i,n){for(var r=0;r<n.children.length;r++){var o=n.children[parseInt(r.toString(),10)];if((o instanceof Jg||o instanceof Cb)&&o.id.match("_"+e[parseInt(i.toString(),10)].id+"$")){for(var s=0;s<t.annotations.length;s++)if(o.id.match("_"+t.annotations[parseInt(s.toString(),10)].id+"$")){if(!(this.diagramActions&Og.UndoRedo)){var a={type:"LabelCollectionChanged",changeType:"Remove",undoObject:fa(t.annotations[parseInt(s.toString(),10)]),redoObject:fa(t),category:"Internal"};this.addHistoryEntry(a)}t.annotations.splice(s,1)}if(n.children.splice(r,1),"SVG"===this.mode){var l=Us(o.id,this.element.id);if(l){var h=Us(o.id,this.element.id);h.parentNode.removeChild(h)}Us(o.id+"_text",this.element.id)&&(l=Us(o.id+"_text",this.element.id)).parentNode.removeChild(l);var c=Us(o.id+"_html_element",this.element.id);c&&c.parentNode.removeChild(c)}else this.refreshCanvasLayers()}}},e.prototype.removeLabels=function(t,e){var i=!0;if(f()&&null!==t&&!(this.diagramActions&Og.UndoRedo)){-1===(s=t.annotations.length>0?Number(us(t,e[0].id,!0)):-1)&&(i=!1)}if(t=this.nameTable[t.id]||t,f()&&i){for(var n=[],r=[],o=0;o<e.length;o++){var s=Number(us(t,e[parseInt(o.toString(),10)].id,!0));r.push(s),n.push(e[parseInt(o.toString(),10)])}this.UpdateBlazorLabelOrPortObjects(n,t instanceof Pw?"NodeAnnotation":"ConnectorAnnotation",r,t instanceof Pw?this.nodes.indexOf(t):this.connectors.indexOf(t))}e.length>1&&this.startGroupAction();for(o=e.length-1;o>=0;o--)if(t.children&&t.children.length>0)for(var a=0;a<t.wrapper.children.length;a++)this.removelabelExtension(t,e,o,t.wrapper.children[parseInt(a.toString(),10)]);else this.removelabelExtension(t,e,o,t.wrapper);e.length>1&&this.endGroupAction()},e.prototype.removePortsExtenion=function(t,e,i,n){for(var r=0;r<n.children.length;r++){var o=n.children[parseInt(r.toString(),10)];if(o instanceof rm&&o.id.match("_"+e[parseInt(i.toString(),10)].id+"$")){for(var s=0;s<t.ports.length;s++)if(o.id.match("_"+t.ports[parseInt(s.toString(),10)].id+"$")){if(!(this.diagramActions&Og.UndoRedo)){var a={type:"PortCollectionChanged",changeType:"Remove",undoObject:fa(t.ports[parseInt(s.toString(),10)]),redoObject:fa(t),category:"Internal"};this.addHistoryEntry(a)}t.ports.splice(s,1)}if(n.children.splice(r,1),"SVG"===this.mode){var l=Us(o.id,this.element.id);l.parentNode.removeChild(l)}else this.refreshCanvasLayers()}}},e.prototype.removePorts=function(t,e){var i=!0;if(f()&&null!==t&&!(this.diagramActions&Og.UndoRedo)){-1===(s=t.ports.length>0?Number(us(t,e[0].id,!1)):-1)&&(i=!1)}if(t=this.nameTable[t.id]||t,f()&&i){for(var n=[],r=[],o=e.length-1;o>=0;o--){var s=Number(us(t,e[parseInt(o.toString(),10)].id,!1));n.push(s),r.push(e[parseInt(o.toString(),10)])}this.UpdateBlazorLabelOrPortObjects(r,"Port",n,this.nodes.indexOf(t))}e.length>1&&this.startGroupAction();for(o=e.length-1;o>=0;o--)if(t.children&&t.children.length>0)for(var a=0;a<t.wrapper.children.length;a++){t.wrapper.children[parseInt(a.toString(),10)].id.match(t.wrapper.id)&&this.removePortsExtenion(t,e,o,t.wrapper.children[parseInt(a.toString(),10)])}else this.removePortsExtenion(t,e,o,t.wrapper);e.length>1&&this.endGroupAction()},e.prototype.getSizeValue=function(t,e){var i;if(i=t.toString().indexOf("px")>0?t.toString():t.toString().indexOf("%")>0?void 0!==e?"100%":t.toString():t.toString()+"px",e){ho(this);i="calc("+i+" - "+e+"px)"}return i},e.prototype.renderRulers=function(){this.rulerSettings.showRulers?(!function(t){var e=ho(t),i=Ks("div",{id:t.element.id+"_overlapRuler",style:"height:"+e.height+"px;width:"+e.width+"px;position:absolute;left:0;top:0",class:"e-ruler-overlap"});t.element.insertBefore(i,t.element.firstChild)}(this),so(this,!0),so(this,!1)):lo(this)},e.prototype.intOffPageBackground=function(){var t=new Qu;t=ho(this);var e=document.getElementById(this.element.id+"content"),i=this.getSizeValue(this.width,t.width),n=this.getSizeValue(this.height,t.height),r=this.rulerSettings.showRulers?"width:"+i+"; height:"+n+";top:"+t.height+"px;left:"+t.width+"px;overflow: scroll;position:absolute;overflow:auto;":"width:"+i+"; height:"+n+";position:absolute; left:0px;  top:0px;overflow: auto;",o={id:this.element.id+"content",tabindex:"0",style:r};e?(this.diagramCanvas=e,sa(this.diagramCanvas,r)):(this.diagramCanvas=Ks("div",o),this.element.appendChild(this.diagramCanvas)),this.diagramCanvas.style.background=this.backgroundColor},e.prototype.initDiagram=function(){this.intOffPageBackground(),aa(this.element,{style:"width:"+this.getSizeValue(this.width)+"; height:"+this.getSizeValue(this.height)+";position:relative;overflow:hidden;"})},e.prototype.renderHiddenUserHandleTemplateLayer=function(t){var e=Ks("div",{class:this.element.id+"_hiddenUserHandleTemplate",style:"width:"+t.width+"px; height:"+t.height+"px;visibility:hidden ;  overflow: hidden;"});this.element.appendChild(e)},e.prototype.renderBackgroundLayer=function(t,e){var i=this.createSvg(this.element.id+"_backgroundLayer_svg",t.width,t.height);sa(i,e);var n=Js("g",{id:this.element.id+"_backgroundImageLayer",class:"e-background-image-layer"});i.appendChild(n);var r=Js("g",{id:this.element.id+"_backgroundLayer",class:"e-background-layer"});i.appendChild(r),this.diagramCanvas.appendChild(i)},e.prototype.renderGridLayer=function(t,e){var i=this.createSvg(this.element.id+"_gridline_svg",t.width,t.height);i.setAttribute("class","e-grid-layer");var n=Js("g",{id:this.element.id+"_gridline"}),r=Js("rect",{id:this.element.id+"_grid_rect",x:"0",y:"0",width:"100%",height:"100%"});Ms()?r.setAttribute("fill","url("+location.protocol+"//"+location.host+location.pathname+"#"+this.element.id+"_pattern)"):r.setAttribute("fill","url(#"+this.element.id+"_pattern)"),n.appendChild(r),i.appendChild(n),this.diagramCanvas.appendChild(i),oa(i,{style:e})},e.prototype.renderDiagramLayer=function(t,e){var i={id:this.element.id+"_diagramLayer_div",style:"width:"+t.width+"px; height:"+t.height+"px;"+e};if(this.diagramLayerDiv=Ks("div",i),"SVG"===this.mode){var n=this.createSvg(this.element.id+"_diagramLayer_svg",t.width,t.height);n.style["pointer-events"]="none",n.setAttribute("class","e-diagram-layer");var r=Js("g",{id:this.element.id+"_diagramLayer"}),o=Js("g",{});this.diagramLayer=r,n.style["pointer-events"]="all",o.appendChild(r),n.appendChild(o),this.diagramLayerDiv.appendChild(n)}else this.diagramLayer=Fw.createCanvas(this.element.id+"_diagram",t.width,t.height),sa(this.diagramLayer,"position:absolute;left:0px;top:0px;"),this.diagramLayerDiv.appendChild(this.diagramLayer);this.diagramCanvas.appendChild(this.diagramLayerDiv)},e.prototype.initLayers=function(){var t="position:absolute;top:0px;left:0px;overflow:hidden;pointer-events:none;",e=document.getElementById(this.element.id).getBoundingClientRect(),i=function(){var t=Ks("div",{style:"visibility:hidden; width: 100px"});document.body.appendChild(t);var e=t.getBoundingClientRect().width;t.style.overflow="scroll";var i=Ks("div",{style:"width:100%"});t.appendChild(i);var n=i.getBoundingClientRect().width;return t.parentNode.removeChild(t),e-n}();this.scroller.scrollerWidth=i,this.scroller.setViewPortSize(e.width,e.height),this.renderRulers();if(window.measureElement){window.measureElement=null;document.getElementById("measureElement").remove()}la(),this.renderBackgroundLayer(e,t),this.renderGridLayer(e,t),this.renderDiagramLayer(e,t),this.renderHTMLLayer(e,t),this.renderPortsExpandLayer(e,t),this.renderNativeLayer(e,t),this.renderAdornerLayer(e,t),this.renderHiddenUserHandleTemplateLayer(e)},e.prototype.renderAdornerLayer=function(t,e){var i=Ks("div",{id:this.element.id+"_diagramAdornerLayer",style:"width:"+t.width+"px;height:"+t.height+"px;"+e}),n=Ks("div",{id:this.element.id+"_diagramUserHandleLayer",style:"width:"+t.width+"px;height:"+t.height+"px;"+e});n.setAttribute("class","e-userHandle-layer"),i.appendChild(n);var r=this.createSvg(this.element.id+"_diagramAdorner_svg",t.width,t.height);r.setAttribute("class","e-adorner-layer"),r.style["pointer-events"]="none",this.adornerLayer=Js("g",{id:this.element.id+"_diagramAdorner"}),this.adornerLayer.style[" pointer-events"]="all",r.appendChild(this.adornerLayer),i.appendChild(r),this.diagramCanvas.appendChild(i);var o=Js("g",{id:this.element.id+"_SelectorElement"});this.adornerLayer.appendChild(o),oa(r,{style:"pointer-events:none;"})},e.prototype.renderPortsExpandLayer=function(t,e){var i=this.createSvg(this.element.id+"_diagramPorts_svg",t.width,t.height);i.setAttribute("class","e-ports-expand-layer");var n=Js("g",{id:this.element.id+"_diagramPorts",class:"e-ports-layer",style:"pointer-events: all;"});i.appendChild(n);var r=Js("g",{id:this.element.id+"_diagramExpander",class:"e-expand-layer",style:"pointer-events: all;"});i.appendChild(r),this.diagramCanvas.appendChild(i),oa(i,{style:e})},e.prototype.renderHTMLLayer=function(t,e){this.htmlLayer=Ks("div",{id:this.element.id+"_htmlLayer",style:"width:"+t.width+"px; height:"+t.height+"px;position:absolute;top:0px;left:0px;overflow:hidden;pointer-events:none;",class:"e-html-layer"});var i=Ks("div",{id:this.element.id+"_htmlLayer_div",style:"position:absolute;top:0px;left:0px;pointer-events:all;"});this.htmlLayer.appendChild(i),this.diagramCanvas.appendChild(this.htmlLayer)},e.prototype.renderNativeLayer=function(t,e){var i=this.createSvg(this.element.id+"_nativeLayer_svg",t.width,t.height),n=Js("g",{id:this.element.id+"_nativeLayer",style:"pointer-events:all;"});i.appendChild(n),this.diagramLayerDiv.appendChild(i),oa(i,{class:"e-native-layer",style:e})},e.prototype.createSvg=function(t,e,i){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return oa(n,{id:t,width:e,height:i}),n},e.prototype.updateBazorShape=function(){for(var t=0;t<this.nodes.length;t++){var e=this.nodes[parseInt(t.toString(),10)];switch(e.shape.type){case"Bpmn":e.shape.bpmnShape=e.shape.shape?e.shape.shape:e.shape.bpmnShape;break;case"UmlActivity":e.shape.umlActivityShape=e.shape.shape?e.shape.shape:e.shape.umlActivityShape;break;case"Flow":e.shape.flowShape=e.shape.shape?e.shape.shape:e.shape.flowShape;break;case"Basic":e.shape.basicShape=e.shape.shape?e.shape.shape:e.shape.basicShape;break;case"Text":e.shape.textContent=e.shape.content?e.shape.content:e.shape.textContent}}},e.prototype.initObjects=function(t){this.updateBazorShape(),this.isLoading||this.initData(),this.initLayerObjects(),this.updateBridging(t)},e.prototype.initLayerObjects=function(){var t=this.layers.length>1,e=[],i=window&&window.Blazor&&!this.dataSourceSettings.dataSource,n={},r={},o=[],s=[],a=[],l=[],h=[],c=[],d=[];f()&&i&&(s=this.previousNodeCollection,a=this.previousConnectorCollection);for(var p=0,u=this.nodes;p<u.length;p++){(N=u[p]).id=N.id||da(),this.addToLayer(N,t),n[N.id]=N}for(var g=0,m=this.connectors;g<m.length;g++){(N=m[g]).id=N.id||da(),this.addToLayer(N,t),n[N.id]=N}for(var v=0,y=this.layers;v<y.length;v++){for(var b=0,S=(L=y[v]).objects;b<S.length;b++){if(n[""+(N=S[b])])if(n[""+N]instanceof ES){if((k=n[""+N]).sourceID&&k.targetID){var w=n[k.sourceID],I=n[k.targetID],x=!0;this.isLoading&&(w&&w.children&&w.children.length>0||I&&I.children&&I.children.length>0)&&(x=!1),w&&w.wrapper&&I&&I.wrapper&&x?this.initConnectors(n[""+N],L):e.push(n[""+N])}else this.initConnectors(n[""+N],L)}else n[""+N].children?o.push(N):n[""+N].shape instanceof Cw&&n[""+N].shape.activity.subProcess.processes&&n[""+N].shape.activity.subProcess.processes.length>0?r[n[""+N].id]=N:this.initNodes(n[""+N],L)}if(this.bpmnModule)for(var M=0,C=this.bpmnModule.textAnnotationConnectors;M<C.length;M++){var N=C[M];this.initConnectors(N,L,!1)}}for(var E=0,D=Object.keys(r);E<D.length;E++){N=D[E];this.initObject(n[""+N]),this.bpmnModule.updateDocks(n[""+N],this)}for(var T=0,O=this.alignGroup(o,n);T<O.length;T++){N=O[T];var L=this.commandHandler.getObjectLayer(N);this.initNodes(n[""+N],L)}for(var A=0,z=e;A<z.length;A++){var k=z[A];L=this.commandHandler.getObjectLayer(k.id);this.initConnectors(k,L)}if(f()&&i){for(var j=0,P=this.nodes;j<P.length;j++){N=P[j];l.push(fa(N,void 0,void 0,!0))}for(var R=0,B=this.connectors;R<B.length;R++){N=B[R];h.push(fa(N,void 0,void 0,!0))}if(this.commandHandler.getObjectChanges(s,l,c),this.commandHandler.getObjectChanges(a,h,d),!(this.blazorActions&$u.ClearObject)){N={methodName:"UpdateBlazorProperties",diagramobj:{nodes:c,connectors:d}};window.sfBlazor.updateBlazorProperties(N,this)}}},e.prototype.alignGroup=function(t,e){var i,n,r,o,s=[],a=[];for(r=0;r<t.length;r++){var l=void 0;if((n=e[""+(i=t[parseInt(r.toString(),10)])])&&n.children.length)for(o=0;o<n.children.length;o++)l=n.children[parseInt(o.toString(),10)],t.indexOf(l)>-1&&-1===s.indexOf(l)&&-1===a.indexOf(l)&&s.splice(0,0,l);-1===s.indexOf(i)&&a.push(i)}return s=s.concat(a)},e.prototype.addToLayer=function(t,e){var i;if(e&&(i=this.commandHandler.getObjectLayer(t.id)),e&&i||-1===this.activeLayer.objects.indexOf(t.id)&&this.activeLayer.objects.push(t.id),(t instanceof Pw||t instanceof ES)&&("SwimLane"!==t.shape.type||t.children&&t.children.length>0)){if(t.parentId){var n=this.swimlaneZIndexTable[t.parentId],r=this.swimlaneChildTable[t.id];(n&&-1!==n||r&&-1!==r)&&(t.zIndex=this.swimlaneChildTable[t.id])}t instanceof ES&&t.sourceID&&t.targetID?-1!==this.activeLayer.objects.indexOf(t.sourceID)&&-1!==this.activeLayer.objects.indexOf(t.targetID)&&this.setZIndex(i||this.activeLayer,t):this.setZIndex(i||this.activeLayer,t)}},e.prototype.updateLayer=function(t){for(var e=0,i=Object.keys(t.layers);e<i.length;e++){for(var n=i[e],r=0,o=this.layers[""+n].objects;r<o.length;r++){var s=o[r],a=this.nameTable[""+s];void 0!==t.layers[""+n].visible?this.updateElementVisibility(a.wrapper,a,t.layers[""+n].visible):!0===t.layers[""+n].lock&&this.unSelect(a)}void 0!==t.layers[""+n].lock&&(this.layers[""+n].lock=t.layers[""+n].lock)}"SVG"!==this.mode&&this.refreshDiagramLayer()},e.prototype.updateScrollSettings=function(t){var e=-this.scroller.horizontalOffset+t.scrollSettings.horizontalOffset||0,i=-this.scroller.verticalOffset+t.scrollSettings.verticalOffset||0,n={VerticalOffset:this.scrollSettings.verticalOffset,HorizontalOffset:this.scrollSettings.horizontalOffset,ViewportHeight:this.scrollSettings.viewPortHeight,ViewportWidth:this.scrollSettings.viewPortWidth,CurrentZoom:this.scroller.currentZoom};0===e&&0===i||this.pan(e,i);var r={VerticalOffset:this.scrollSettings.verticalOffset,HorizontalOffset:this.scrollSettings.horizontalOffset,ViewportHeight:this.scrollSettings.viewPortHeight,ViewportWidth:this.scrollSettings.viewPortWidth,CurrentZoom:this.scroller.currentZoom},o="Start";this.realActions&Ag.PanInProgress&&(o="Progress");var s={oldValue:n,newValue:r,source:this,panState:o};f()&&this.scrollChange&&(s={oldValue:n,newValue:r,sourceId:this.element.id,panState:o}),this.triggerEvent(jg.scrollChange,s),this.commandHandler.updatePanState(!0),"Canvas"===this.mode&&this.constraints&Mg.Virtualization&&this.refreshDiagramLayer()},e.prototype.initData=function(){var t=this.dataSourceSettings.dataManager||this.dataSourceSettings.dataSource;if(this.dataBindingModule&&!(this.realActions&Ag.PreventDataInit))if(t&&this.dataSourceSettings.connectionDataSource.dataManager){var e=this.dataSourceSettings.dataManager||this.dataSourceSettings.dataSource;this.nodes=this.generateData(e,!0),this.connectors=this.generateData(this.dataSourceSettings.connectionDataSource.dataManager,!1)}else t&&t.dataSource&&(t.dataSource.url||"BlazorAdaptor"===t.adaptorName&&!t.dataSource.url)?this.dataBindingModule.initSource(this.dataSourceSettings,this):this.dataBindingModule.initData(this.dataSourceSettings,this)},e.prototype.generateData=function(t,e){var i,n=[];for(i=0;i<t.length;i++){var r=t[parseInt(i.toString(),10)],o=e?this.makeData(r,!0):this.makeData(r,!1);!o||!o.id||mo(n,o.id)&&mo(n,o.id)||n.push(o)}return n},e.prototype.makeData=function(t,e){var i,n=e?this.dataSourceSettings:this.dataSourceSettings.connectionDataSource,r={};if(r.id=t[n.id]?t[n.id]:da(),n.sourceID&&(r.sourceID=t[n.sourceID]),n.targetID&&(r.targetID=t[n.targetID]),t[n.sourcePointX]&&t[n.sourcePointY]&&(r.sourcePoint={x:Number(t[n.sourcePointX]),y:Number(t[n.sourcePointY])}),t[n.targetPointX]&&t[n.targetPointY]&&(r.targetPoint={x:Number(t[n.targetPointX]),y:Number(t[n.targetPointY])}),n.crudAction.customFields&&n.crudAction.customFields.length>0)for(i=0;i<n.crudAction.customFields.length;i++)r[n.crudAction.customFields[parseInt(i.toString(),10)]]=t[n.crudAction.customFields[parseInt(i.toString(),10)]];return r},e.prototype.initNodes=function(t,e){this.preventDiagramUpdate=!0,this.initObject(t,e),this.preventDiagramUpdate=!1},e.prototype.initConnectors=function(t,e,i){this.preventDiagramUpdate=!0,this.initObject(t,e,i),this.updateEdges(t),this.preventDiagramUpdate=!1},e.prototype.setZIndex=function(t,e){var i=t;if(-1===e.zIndex){for(;i.zIndexTable[i.objectZIndex+1];)t.objectZIndex++;e.zIndex=++i.objectZIndex}else{var n=e.zIndex;if(i.zIndexTable[parseInt(n.toString(),10)])for(var r=Object.keys(i.zIndexTable).length,o=0;o<r;o++)if(o===n){for(var s=r;s>n;s--)i.zIndexTable[parseInt(s.toString(),10)]=i.zIndexTable[s-1],this.nameTable[i.zIndexTable[parseInt(s.toString(),10)]]&&(this.nameTable[i.zIndexTable[parseInt(s.toString(),10)]].zIndex=s);i.zIndexTable[parseInt(o.toString(),10)]=e.id}}},e.prototype.initializeDiagramLayers=function(){for(var t=0;t<this.layers.length;t++)if(-1!==this.layers[parseInt(t.toString(),10)].zIndex){var e=this.layers[parseInt(t.toString(),10)];this.layers[parseInt(t.toString(),10)]=this.layers[this.layers[parseInt(t.toString(),10)].zIndex],this.layers[e.zIndex]=e}for(var i=0,n=this.layers;i<n.length;i++){var r=n[i];r.zIndex=-1!==r.zIndex?r.zIndex:this.layers.indexOf(r),this.layerZIndexTable[r.zIndex]=r.id}for(t=0;t<this.layers.length;t++)for(var o=t+1;o<this.layers.length;o++)if(this.layers[parseInt(t.toString(),10)].zIndex>this.layers[parseInt(o.toString(),10)].zIndex){e=this.layers[parseInt(t.toString(),10)];this.layers[parseInt(t.toString(),10)]=this.layers[parseInt(o.toString(),10)],this.layers[parseInt(o.toString(),10)]=e}if(0===this.layers.length){this.commandHandler.addLayer({id:"default_layer",visible:!0,lock:!1,objects:[],zIndex:0,objectZIndex:-1,zIndexTable:{}},null,!0)}this.setActiveLayer(this.layers[this.layers.length-1].id)},e.prototype.resetTool=function(){this.eventHandler.resetTool()},e.prototype.initObjectExtend=function(t,e,i){if(i){for(var n=this.commandHandler.checkBoundaryConstraints(void 0,void 0,t.wrapper.bounds),r=0,o=Object.keys(e.zIndexTable);r<o.length;r++)e.zIndexTable[o[parseInt(r.toString(),10)]]&&e.zIndexTable[o[parseInt(r.toString(),10)]]===t.id&&delete e.zIndexTable[o[parseInt(r.toString(),10)]];if(e.zIndexTable[t.zIndex]=t.id,!n){var s=t instanceof Pw?this.nodes:this.connectors;for(r=0;r<=s.length;r++)s[parseInt(r.toString(),10)]&&t.id===s[parseInt(r.toString(),10)].id&&s.splice(r,1);delete e.zIndexTable[t.zIndex]}}},e.prototype.initObject=function(t,e,i,n){if(void 0===i&&(i=!0),void 0!==t){if(i&&(e||(this.addToLayer(t,!1),e=this.activeLayer),(t instanceof Pw||t instanceof ES)&&("SwimLane"!==t.shape.type||t.children&&t.children.length>0)&&this.setZIndex(e,t)),t instanceof Pw){if(i){if("helper"!==t.id){if(o=Oa(this.getNodeDefaults)){if((s=o(t,this))&&s.ports)for(var r=0;r<s.ports.length;r++)s.ports[parseInt(r.toString(),10)].inEdges=[],s.ports[parseInt(r.toString(),10)].outEdges=[];s&&s!==t&&ba(s,t)}}this.initNode(t,this.element.id)}}else if(t instanceof ES){var o;if(o=Oa(this.getConnectorDefaults)){var s;(s=o(t,this))&&s!==t&&ba(s,t),t.segments.length&&t.type!==t.segments[0].type&&(t.segments=[])}var a=this.nameTable[t.sourceID],l=this.nameTable[t.targetID],h=this.getConnectedPort(a,t,!0),c=this.getConnectedPort(l,t),d=this.findInOutConnectPorts(a,!1),p=this.findInOutConnectPorts(l,!0);if((void 0!==a&&Pn(a)||""!==t.sourcePortID&&Rn(d))&&(t.sourceWrapper=this.getEndNodeWrapper(a,t,!0),t.sourcePortID&&h&&h.constraints&&!(h.constraints&Pg.None)&&h.constraints&Pg.OutConnect&&(t.sourcePortWrapper=this.getWrapper(a.wrapper,t.sourcePortID))),(void 0!==l&&kn(l)||""!==t.targetPortID&&jn(p))&&(t.targetWrapper=this.getEndNodeWrapper(l,t,!1),t.targetPortID&&c&&c.constraints&&!(c.constraints&Pg.None)&&c.constraints&Pg.InConnect&&(t.targetPortWrapper=this.getWrapper(l.wrapper,t.targetPortID))),!i){rs(t,t.getConnectorPoints(t.type))}i&&t.init(this);for(var u=0;u<t.wrapper.children.length;u++)this.pathTable[t.wrapper.children[parseInt(u.toString(),10)].data]&&(t.wrapper.children[parseInt(u.toString(),10)].absoluteBounds=this.pathTable[t.wrapper.children[parseInt(u.toString(),10)].data].absoluteBounds);t.wrapper.measure(new Qu(void 0,void 0)),t.wrapper.arrange(t.wrapper.desiredSize),t instanceof ES&&"Bezier"===t.type&&(this.updateConnectorAnnotation(t),this.updateConnectorfixedUserHandles(t));for(var g=0;g<t.wrapper.children.length;g++)this.pathTable[t.wrapper.children[parseInt(g.toString(),10)].data]={},this.pathTable[t.wrapper.children[parseInt(g.toString(),10)].data].absoluteBounds=t.wrapper.children[parseInt(g.toString(),10)].absoluteBounds}if(t instanceof Pw&&t.children&&t.container)for(r=0;r<t.children.length;r++)this.nameTable[t.children[parseInt(r.toString(),10)]].offsetX=this.nameTable[t.children[parseInt(r.toString(),10)]].wrapper.offsetX,this.nameTable[t.children[parseInt(r.toString(),10)]].offsetY=this.nameTable[t.children[parseInt(r.toString(),10)]].wrapper.offsetY;if(this.bpmnModule&&t instanceof Pw&&"Bpmn"===t.shape.type&&t.shape.annotations.length>0&&this.bpmnModule.updateQuad(t,this),this.initObjectExtend(t,e,i),this.nameTable[t.id]=t,t instanceof Pw&&t.children){this.preventNodesUpdate=!0,this.preventConnectorsUpdate=!0,n||t.container||this.updateGroupOffset(t,!0),this.groupTable[t.id]=t.children;for(r=0;r<t.children.length;r++){var m=this.nameTable[t.children[parseInt(r.toString(),10)]];m&&(m.parentId=t.id)}this.isLoading||!t.rotateAngle||t.container||this.commandHandler.rotateObjects(t,[t],t.rotateAngle,{x:t.offsetX,y:t.offsetY},!1),this.preventNodesUpdate=!1,this.preventConnectorsUpdate=!1}void 0===this.enterObject&&this.updateQuad(t)}!1===t.visible&&this.updateElementVisibility(t.wrapper,t,!1)},e.prototype.getConnectedPort=function(t,e,i){if(t&&t.ports)for(var n=0,r=t.ports;n<r.length;n++){var o=r[n];if(o.id===e.sourcePortID&&i)return o;if(o.id===e.targetPortID&&!i)return o}return null},e.prototype.scaleObject=function(t,e,i){var n=i?t.wrapper.actualSize.width:t.wrapper.actualSize.height,r=i?1+(e-n)/n:1,o=i?1:1+(e-n)/n;this.realActions|=Ag.PreventDrag,this.scale(t,r,o,{x:.5,y:.5}),this.realActions&=~Ag.PreventDrag},e.prototype.updateDefaultLayoutIcons=function(t){"OrganizationalChart"!==this.layout.type&&"HierarchicalTree"!==this.layout.type&&"ComplexHierarchicalTree"!==this.layout.type||(this.updateDefaultLayoutIcon(t,t.expandIcon),this.updateDefaultLayoutIcon(t,t.collapseIcon))},e.prototype.updateDefaultLayoutIcon=function(t,e){if("None"!==e.shape&&"Auto"===e.horizontalAlignment&&"Auto"===e.verticalAlignment&&.5===e.offset.x&&1===e.offset.y){var i=this.getWrapper(t.wrapper,"icon_content"),n=void 0,r=void 0;"TopToBottom"===this.layout.orientation||"BottomToTop"===this.layout.orientation?(n=.5,r="TopToBottom"===this.layout.orientation?1:0):"RightToLeft"!==this.layout.orientation&&"LeftToRight"!==this.layout.orientation||(n="LeftToRight"===this.layout.orientation?1:0,r=.5),i.setOffsetWithRespectToBounds(n,r,"Fraction"),i.horizontalAlignment="Center",i.verticalAlignment="Center",t.wrapper.measure(new Qu(t.wrapper.width,t.wrapper.height)),t.wrapper.arrange(t.wrapper.desiredSize)}},e.prototype.updateGroupOffset=function(t,e){var i=!1;if(t.children&&t.children.length>0&&!t.container||t.processId){var n=this.nameTable[t.id];if(!(this.realActions&Ag.PreventScale||this.realActions&Ag.PreventDrag)){if(!n.offsetX||!(this.realActions&Ag.EnableGroupAction)&&(this.diagramActions&Og.UndoRedo||this.diagramActions&Og.ToolAction||this.diagramActions&Og.PublicMethod))f()&&(this.insertValue(fa(n),!0),i=!0),n.offsetX=t.wrapper.offsetX;else{this.realActions|=Ag.PreventScale;var r=n.offsetX-t.wrapper.offsetX;n.offsetX=t.wrapper.offsetX;var o=n.offsetY-t.wrapper.offsetY;n.offsetY=t.wrapper.offsetY,"None"===t.flip&&r+o!==0&&this.drag(n,r,o),this.realActions&=~Ag.PreventScale}if(!n.offsetY||!(this.realActions&Ag.EnableGroupAction)&&(this.diagramActions&Og.UndoRedo||this.diagramActions&Og.ToolAction||this.diagramActions&Og.PublicMethod))f()&&(this.insertValue(fa(n),!0),i=!0),n.offsetY=t.wrapper.offsetY;else{this.realActions|=Ag.PreventScale;o=n.offsetY-t.wrapper.offsetY;n.offsetY=t.wrapper.offsetY,"None"===t.flip&&this.drag(n,0,o),this.realActions&=~Ag.PreventScale}this.diagramActions&&(f()&&(this.insertValue(fa(n),!0),i=!0),n.width=t.wrapper.actualSize.width,n.height=t.wrapper.actualSize.height)}}e&&t.children&&t.children.length>0&&(void 0!==this.nameTable[t.id].width?this.scaleObject(t,this.nameTable[t.id].width,!0):(f()&&(this.insertValue(fa(this.nameTable[t.id]),!0),i=!0),this.nameTable[t.id].width=t.wrapper.actualSize.width),void 0!==this.nameTable[t.id].height?this.scaleObject(t,this.nameTable[t.id].height,!1):(f()&&(this.insertValue(fa(this.nameTable[t.id]),!0),i=!0),this.nameTable[t.id].height=t.wrapper.actualSize.height)),!i||this.diagramActions&Og.UndoRedo||this.diagramActions&Og.ToolAction||this.diagramActions&Og.PublicMethod||this.commandHandler.getBlazorOldValues()},e.prototype.initNode=function(t,e,i){var n,r=t.initContainer(),o=new em;if(this.diagramSettings.inversedAlignment||(r.inversedAlignment=!1),r.children||(r.children=[]),t.children){r.measureChildren=!1,o.id=t.id+"group_container",o.style.fill="none",o.style.strokeColor="none",o.horizontalAlignment="Stretch",o.verticalAlignment="Stretch",r.style=t.style,r.padding.left=t.padding.left,r.padding.right=t.padding.right,r.padding.top=t.padding.top,r.padding.bottom=t.padding.bottom,o.children=[],o.preventContainer=!0,t.container&&(o.relativeMode="Object");var s=!!(t.ports&&t.ports.length>0);if(h(t.container)&&!s&&r.children.push(o),t.container&&"Grid"===t.container.type)for(var a=0;a<t.children.length;a++){var l=new em,c=this.nameTable[t.children[a]];l.children=[],l.children.push(c.wrapper),c&&r.addObject(c.wrapper,c.rowIndex,c.columnIndex,c.rowSpan,c.columnSpan)}else for(a=0;a<t.children.length;a++)if(this.nameTable[t.children[a]]){c=this.nameTable[t.children[a]];this.updateStackProperty(t,c,a),r.children.push(c.wrapper),r.elementActions=r.elementActions|Ig.ElementIsGroup,c.wrapper.flip="None"===c.wrapper.flip?t.wrapper.flip:c.wrapper.flip}(s||t.container&&"Grid"!==t.container.type)&&r.children.push(o)}else{var d=Oa(this.setNodeTemplate);d&&"helper"!==t.id&&(n=d(t,this)),n||(n=t.init(this)),r.children.push(n)}var p;p=Oa(this.getDescription),(t.children?r:n).description=p||(t.annotations.length?t.annotations[0].content:t.id);var u=t.children?o:r;t.initAnnotations(this.getDescription,u,this.element.id,!!Un(this),this.annotationTemplate),t.initPorts(this.getDescription,u),t.initIcons(this.getDescription,this.layout,u,e);for(a=0;t.fixedUserHandles,a<t.fixedUserHandles.length;a++){var g=t.initfixedUserHandles(t.fixedUserHandles[a]);u.children.push(g)}if("SwimLane"===t.shape.type&&t.wrapper&&t.wrapper.children.length>0&&t.wrapper.children[0]instanceof Ab){if(this.setZIndex(this.activeLayer,t),this.connectors.length>0)for(a=0;a<this.connectors.length;a++){var m=this.connectors[a];m.sourceID&&m.targetID&&-1===this.activeLayer.objects.indexOf(m.sourceID)&&-1===this.activeLayer.objects.indexOf(m.targetID)&&this.setZIndex(this.activeLayer,m)}ar(t),hr(this,t),this.updateDiagramElementQuad()}else r.measure(new Qu(t.width,t.height),t.id,this.onLoadImageSize.bind(this)),r instanceof Ab?r.arrange(r.desiredSize,!0):r.arrange(r.desiredSize);"None"!==t.wrapper.flip&&t.wrapper.elementActions&Ig.ElementIsGroup&&YS(t.wrapper,t.wrapper.offsetX,t.wrapper.offsetY,this,t.wrapper.flip),t instanceof Pw&&t.container&&(t.width<r.outerBounds.width||t.height<r.outerBounds.height)&&r.bounds.x<=r.outerBounds.x&&r.bounds.y<=r.outerBounds.y&&(t.width=r.width=r.outerBounds.width,t.height=r.height=r.outerBounds.height,r.measure(new Qu(t.width,t.height)),r.arrange(r.desiredSize)),t.container&&"Grid"===t.container.type&&t.children&&t.children.length>0&&this.updateChildPosition(t)},e.prototype.updateDiagramElementQuad=function(){for(var t=0;t<this.nodes.length;t++)this.nodes[parseInt(t.toString(),10)].wrapper&&this.nodes[parseInt(t.toString(),10)].wrapper instanceof $g&&this.updateQuad(this.nodes[parseInt(t.toString(),10)])},e.prototype.onLoadImageSize=function(t,e){var i=this.getObject(t),n=document.getElementById(t+"sf-imageNode");n&&n.parentNode.removeChild(n),this.nodePropertyChange(i,{},{width:e.width,height:e.height});var r={element:fa(i),size:e};this.triggerEvent(jg.onImageLoad,r)},e.prototype.updateChildPosition=function(t){for(var e=0;e<t.children.length;e++){var i=this.getObject(t.children[parseInt(e.toString(),10)]);i.offsetX=i.wrapper.offsetX,i.offsetY=i.wrapper.offsetY,i.children&&i.children.length>0&&this.updateChildPosition(i)}},e.prototype.canExecute=function(){return!0},e.prototype.updateStackProperty=function(t,e,i){t.container&&"Stack"===t.container.type&&(e.width||(e.wrapper.horizontalAlignment="Stretch",e.horizontalAlignment="Stretch"),e.height||(e.verticalAlignment="Stretch",e.wrapper.verticalAlignment="Stretch"),i&&"UmlClassifier"===t.shape.type&&(e.umlIndex=i))},e.prototype.initViews=function(){this.isLoading||(this.views.push(this.element.id),this.views[this.element.id]=this)},e.prototype.initCommands=function(){var t=this.commandManager.commands,e={copy:{execute:this.copyCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Tg.C,keyModifiers:Dg.Control}},paste:{execute:this.pasteCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Tg.V,keyModifiers:Dg.Control}},cut:{execute:this.cutCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Tg.X,keyModifiers:Dg.Control}},delete:{execute:this.removeCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Tg.Delete}},selectAll:{execute:this.selectAll.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Tg.A,keyModifiers:Dg.Control}},undo:{execute:this.undo.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Tg.Z,keyModifiers:Dg.Control}},redo:{execute:this.redo.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Tg.Y,keyModifiers:Dg.Control}},nudgeUp:{execute:this.nudgeCommand.bind(this,"Up"),canExecute:this.canExecute.bind(this),gesture:{key:Tg.Up},parameter:"up"},nudgeRight:{execute:this.nudgeCommand.bind(this,"Right"),canExecute:this.canExecute.bind(this),gesture:{key:Tg.Right},parameter:"right"},nudgeDown:{execute:this.nudgeCommand.bind(this,"Down"),canExecute:this.canExecute.bind(this),gesture:{key:Tg.Down},parameter:"down"},nudgeLeft:{execute:this.nudgeCommand.bind(this,"Left"),canExecute:this.canExecute.bind(this),gesture:{key:Tg.Left},parameter:"left"},startEdit:{execute:this.startEditCommad.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Tg.F2}},endEdit:{execute:this.endEditCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Tg.Escape}},focusToNextItem:{canExecute:this.canExecute.bind(this),gesture:{key:Tg.Tab}},focusToPreviousItem:{canExecute:this.canExecute.bind(this),gesture:{key:Tg.Tab,keyModifiers:Dg.Control}},selectFocusedItem:{execute:this.startEditCommad.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Tg.Enter}}};this.initCommandManager(t,e)},e.prototype.overrideCommands=function(t,e){for(var i,n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];if(i=e[""+o],t.gesture.key===i.gesture.key&&t.gesture.keyModifiers===i.gesture.keyModifiers){delete e[""+o];break}}},e.prototype.initCommandManager=function(t,e){var i=0;if(t)for(i=0;i<t.length;i++)e[t[parseInt(i.toString(),10)].name]&&t[parseInt(i.toString(),10)]?(t[parseInt(i.toString(),10)].canExecute&&(e[t[parseInt(i.toString(),10)].name].canExecute=t[parseInt(i.toString(),10)].canExecute),t[parseInt(i.toString(),10)].execute&&(e[t[parseInt(i.toString(),10)].name].execute=t[parseInt(i.toString(),10)].execute),(t[parseInt(i.toString(),10)].gesture.key||t[parseInt(i.toString(),10)].gesture.keyModifiers)&&(e[t[parseInt(i.toString(),10)].name].gesture=t[parseInt(i.toString(),10)].gesture),""!==t[parseInt(i.toString(),10)].parameter&&(e[t[parseInt(i.toString(),10)].name].parameter=t[parseInt(i.toString(),10)].parameter)):(this.overrideCommands(t[parseInt(i.toString(),10)],e),e[t[parseInt(i.toString(),10)].name]={execute:t[parseInt(i.toString(),10)].execute,canExecute:t[parseInt(i.toString(),10)].canExecute,gesture:t[parseInt(i.toString(),10)].gesture,parameter:t[parseInt(i.toString(),10)].parameter});this.commands=e},e.prototype.updateNodeEdges=function(t){for(var e=0,i=t.inEdges;e<i.length;e++){var n=i[e];this.nameTable[""+n]&&(this.nameTable[""+n].targetID="")}for(var r=0,o=t.outEdges;r<o.length;r++){n=o[r];this.nameTable[""+n]&&(this.nameTable[""+n].sourceID="")}t.inEdges=[],t.outEdges=[]},e.prototype.updateIconVisibility=function(t,e){for(var i=0;i<t.wrapper.children.length;i++){var n=t.wrapper.children[parseInt(i.toString(),10)];if(n.id){var r=n.id.split(t.id)[1];r&&r.match("^_icon")&&(n.visible=e,this.updateDiagramContainerVisibility(n,e))}}},e.prototype.updateEdges=function(t){if(void 0!==t.sourceID&&""!==t.sourceID){(e=this.nameTable[t.sourceID])&&e.outEdges&&0===e.outEdges.length&&(e.outEdges=[]),e&&e.outEdges&&-1===e.outEdges.indexOf(t.id)&&e.outEdges.push(t.id),this.updatePortEdges(e,t,!1)}if(void 0!==t.targetID&&""!==t.targetID){var e;if((e=this.nameTable[t.targetID])&&e.inEdges&&0===e.inEdges.length&&(e.inEdges=[]),e&&e.inEdges&&-1===e.inEdges.indexOf(t.id)&&e.inEdges.push(t.id),this.updatePortEdges(e,t,!0),e&&e.visible&&e.outEdges){var i=0!==e.outEdges.length;this.updateIconVisibility(e,i)}}},e.prototype.updatePortEdges=function(t,e,i){if(t)for(var n=0;n<t.ports.length;n++){var r=t.ports[parseInt(n.toString(),10)],o=i?e.targetPortID:e.sourcePortID;if(r.id===o){var s=i?r.inEdges:r.outEdges;-1===s.indexOf(e.id)&&s.push(e.id)}}},e.prototype.refreshDiagram=function(){if(this.initLayerObjects(),this.doLayout(),this.updateBridging(),this.scroller.setSize(),this.addBlazorDiagramObjects(),f()&&this.layout&&this.layout.layoutInfo&&this.layout.layoutInfo.isRootInverse&&this.nodes.length>2){var t=this.nodes[0];if(t.outEdges.length>1)for(var e=this.isProtectedOnChange,i=1;i<t.outEdges.length;i++){var n=this.nameTable[t.outEdges[parseInt(i.toString(),10)]],r=this.allowServerDataBinding;this.protectPropertyChange(!1),this.enableServerDataBinding(!1),this.preventDiagramUpdate=!0;"Left"===this.getObject(n.targetID).data.Branch&&(n.sourcePortID=t.ports[1].id),this.dataBind(),this.preventDiagramUpdate=!1,this.enableServerDataBinding(r),this.protectPropertyChange(e)}}if(f())for(var o=void 0,s=0,a=this.views;s<a.length;s++){var l=a[s];(o=this.views[""+l]).renderDocument&&(o.renderDocument(o),o.diagramRenderer.setLayers(),o.updateView(o),this.renderNodes(o))}this.updateFitToPage()},e.prototype.updateCanupdateStyle=function(t,e){for(var i=0;i<t.length;i++)t[parseInt(i.toString(),10)].children&&this.updateCanupdateStyle(t[parseInt(i.toString(),10)].children,e),t[parseInt(i.toString(),10)].canApplyStyle=e},e.prototype.getZindexPosition=function(t,e){var i=[],n=void 0;i=(i=i.concat(this.nodes)).concat(this.connectors);var r;if(-1!==t.zIndex)for(var o=0;o<i.length;o++)if(i[parseInt(o.toString(),10)].zIndex>t.zIndex){"HTML"!==t.shape.type&&"Native"!==t.shape.type||(r="HTML"===t.shape.type?"html":"native"),n=Vs(e,i[parseInt(o.toString(),10)].id,r);break}return n},e.prototype.updateDiagramObject=function(t,e,i){for(var n,r=0,o=this.views;r<o.length;r++){var s=o[r];if(n=this.views[""+s],this.diagramActions&&"SVG"===n.mode){var a=void 0;if(this.layers.length>1&&(a=this.commandHandler.getObjectLayer(t.id)),void 0===a||a&&a.visible||i){var l=$s(this.element.id);window.domTable[n.element.id+"_diagramLayer"]||(window.domTable[n.element.id+"_diagramLayer"]=document.getElementById(n.element.id+"_diagramLayer"));var h=window.domTable[n.element.id+"_diagramLayer"];this.diagramActions&Og.Interactions&&this.updateCanupdateStyle(t.wrapper.children,!0);var c=this.getMidPoint(t);this.diagramRenderer.updateNode(t.wrapper,h,l,void 0,e?void 0:this.getZindexPosition(t,n.element.id),c),this.updateCanupdateStyle(t.wrapper.children,!0)}}}},e.prototype.applyMarginBezier=function(t,e){for(var i=0;i<t.wrapper.children.length;i++)t.wrapper&&t.wrapper.children[parseInt(i.toString(),10)]instanceof Jg&&(e.cx=e.cx+t.wrapper.children[parseInt(i.toString(),10)].margin.left,e.cx=e.cx-t.wrapper.children[parseInt(i.toString(),10)].margin.right,e.cy=e.cy+t.wrapper.children[parseInt(i.toString(),10)].margin.top,e.cy=e.cy-t.wrapper.children[parseInt(i.toString(),10)].margin.bottom)},e.prototype.getMidPoint=function(t){var e;e=t.annotations[0]?t.annotations[0].offset:.5;var i;if(t instanceof ES&&"Bezier"===t.type){var n=this.getBezierPoints(t),r=e*Gu.getLengthFromListOfPoints(n),o=this.commandHandler.getPointAtLength(r,n,0);i={cx:o.x,cy:o.y},this.applyMarginBezier(t,i),this.applyAlignment(t,i)}return i},e.prototype.applyAlignment=function(t,e){for(var i=0;i<t.wrapper.children.length;i++)if(t.wrapper&&t.wrapper.children[parseInt(i.toString(),10)]instanceof Jg){var n=t.wrapper.children[parseInt(i.toString(),10)];switch(n.horizontalAlignment){case"Auto":case"Left":e.cx=n.inversedAlignment?e.cx:e.cx-n.desiredSize.width;break;case"Stretch":case"Center":e.cx-=n.desiredSize.width*n.pivot.x;break;case"Right":e.cx=n.inversedAlignment?e.cx-n.desiredSize.width:e.cx}switch(n.verticalAlignment){case"Auto":case"Top":e.cy=n.inversedAlignment?e.cy:e.cy-n.desiredSize.height;break;case"Stretch":case"Center":e.cy-=n.desiredSize.height*n.pivot.y;break;case"Bottom":e.cy=n.inversedAlignment?e.cy-n.desiredSize.height:e.cy}}},e.prototype.getBezierPoints=function(t){var e,i=[],n={x:t.sourcePoint.x,y:t.sourcePoint.y};for(i.push(n),e=0;e<t.segments.length;e++){var r=t.segments[parseInt(e.toString(),10)].getPoints(t.segments[parseInt(e.toString(),10)],n);i.push.apply(i,r),n=i[i.length-1]}return i},e.prototype.updateGridContainer=function(t){for(var e,i=$s(this.element.id),n=0,r=this.views;n<r.length;n++){var o=r[n];if("SVG"===(e=this.views[""+o]).mode&&this.diagramActions){var s=document.getElementById(e.element.id+"_diagramLayer");this.diagramRenderer.updateNode(t,s,i,void 0)}else this.refreshCanvasDiagramLayer(e)}},e.prototype.getObjectsOfLayer=function(t){for(var e=[],i=0,n=t;i<n.length;i++){var r=n[i];this.nameTable[""+r]&&e.push(this.nameTable[""+r])}return e},e.prototype.refreshDiagramLayer=function(){for(var t,e=0,i=this.views;e<i.length;e++){var n=i[e];switch((t=this.views[""+n]).mode){case"SVG":this.refreshSvgDiagramLayer(t);break;case"Canvas":this.refreshCanvasLayers(t)}}},e.prototype.refreshCanvasLayers=function(t){if(t)this.refreshCanvasDiagramLayer(t);else for(var e=0,i=this.views;e<i.length;e++){var n=i[e],r=this.views[""+n];this.refreshCanvasDiagramLayer(r)}},e.prototype.renderBasicElement=function(t){for(var e=$s(t.element.id),i=0;i<this.basicElements.length;i++){var n=this.basicElements[parseInt(i.toString(),10)];n instanceof $g&&(n.prevRotateAngle=0),n.measure(new Qu(n.width,n.height)),n.arrange(n.desiredSize),t.diagramRenderer.renderElement(n,t.diagramLayer,e)}},e.prototype.refreshElements=function(t){if(!this.isDestroyed){if(this.clearCanvas(t),t instanceof e)t.diagramLayer.getContext("2d").setTransform(t.scroller.currentZoom,0,0,t.scroller.currentZoom,0,0),t.diagramLayer.getContext("2d").scale(1.5,1.5);else{(r=document.getElementById(t.element.id+"_nativeLayer")).children.length>0&&t.updateView(t)}var i=$s(t.element.id);this.renderDiagramElements(t.diagramLayer,t.diagramRenderer,i);for(var n=0;n<this.basicElements.length;n++){var r;(r=this.basicElements[parseInt(n.toString(),10)]).measure(new Qu(r.width,r.height)),r.arrange(r.desiredSize),t.diagramRenderer.renderElement(r,t.diagramLayer,i)}t instanceof e&&(t.diagramLayer.style.transform="scale("+2/3+")",t.diagramLayer.style.transformOrigin="0 0"),this.renderTimer=null}},e.prototype.refreshCanvasDiagramLayer=function(t){var e=this;"SVG"===t.mode||this.isDestroyed||(this.basicElements.length>0&&this.renderBasicElement(t),!this.diagramActions||0==(this.diagramActions&Og.Render)||Og.ToolAction&this.diagramActions||Un(this)||1!==this.scroller.currentZoom?this.refreshElements(t):this.renderTimer||(this.renderTimer=setTimeout(function(){e.refreshElements(t)},40)))},e.prototype.updatePortVisibility=function(t,e,i){var n,r=!this.drawingObject||!this.drawingObject.shape;if(t instanceof Pw&&r&&Nn(t)){for(var o=t.ports,s=!1,a=0;a<o.length;a++)n=this.getWrapper(t.wrapper,o[parseInt(a.toString(),10)].id),(e&gg.Hover||e&gg.Connect)&&hs(o[parseInt(a.toString(),10)],e)&&(n.visible=!i,s=!0);s&&this.updateDiagramObject(t),"Canvas"===this.mode&&this.refreshCanvasLayers()}},e.prototype.refreshSvgDiagramLayer=function(t){var e,i=document.getElementById(t.element.id+"_diagramLayer"),n=$s(t.element.id);if(Un(this))this.scroller.virtualizeElements();else{for(var r=0;r<this.basicElements.length;r++)(e=this.basicElements[parseInt(r.toString(),10)]).measure(new Qu(e.width,e.height)),e.arrange(e.desiredSize,!(this.diagramActions&Og.Render)),this.diagramRenderer.renderElement(e,i,n);this.renderDiagramElements(i,this.diagramRenderer,n)}},e.prototype.removeVirtualObjects=function(t){if(this.deleteVirtualObject){for(var e=0;e<this.scroller.removeCollection.length;e++){var i=this.nameTable[this.scroller.removeCollection[parseInt(e.toString(),10)]];this.removeElements(i)}this.deleteVirtualObject=!1}clearInterval(t)},e.prototype.updateTextElementValue=function(t){for(var e=0;e<t.wrapper.children.length;e++){var i=t.wrapper.children[parseInt(e.toString(),10)];i instanceof Jg&&(i.canMeasure=!0,i.measure(new Qu(t.width,t.height)),i.arrange(i.desiredSize))}},e.prototype.updateVirtualObjects=function(t,e,i){var n=document.getElementById(this.element.id+"_diagramLayer"),r=$s(this.element.id);if("SVG"===this.mode){for(var o=0;o<t.length;o++){var s=this.scroller.removeCollection.indexOf(t[parseInt(o.toString(),10)]);s>=0&&this.scroller.removeCollection.splice(s,1);var a=this.nameTable[t[parseInt(o.toString(),10)]];this.updateTextElementValue(a),this.diagramRenderer.renderElement(a.wrapper,n,r,void 0,void 0,void 0,void 0,a.zIndex)}for(var l=0;l<i.length;l++)this.scroller.removeCollection.push(i[parseInt(l.toString(),10)]);1!==this.scroller.currentZoom&&this.eventHandler.updateVirtualization()}else this.diagramActions&&this.refreshDiagramLayer()},e.prototype.renderDiagramElements=function(t,e,i,n,r,o){void 0===n&&(n=!0);var s=this.scroller.getPageBounds();s.x*=this.scroller.currentZoom,s.y*=this.scroller.currentZoom,s.width*=this.scroller.currentZoom,s.height*=this.scroller.currentZoom;for(var a,l=-this.scroller.horizontalOffset-s.x,h=-this.scroller.verticalOffset-s.y,c=0,d=Object.keys(this.layerZIndexTable);c<d.length;c++){var p=d[c],u=this.commandHandler.getLayer(this.layerZIndexTable[""+p]),g=void 0,m=void 0;"Canvas"===this.mode&&Un(this)&&!this.diagramActions&&this.scroller.virtualizeElements();for(var f="Canvas"===this.mode&&Un(this)&&this.scroller.oldCollectionObjects.length>0?this.scroller.oldCollectionObjects:void 0,v=0,y=Object.keys(f||u.zIndexTable);v<y.length;v++){var b=y[v],S=f?this.nameTable[f[""+b]]:this.nameTable[u.zIndexTable[""+b]];if(S&&!S.parentId&&u.visible&&(!S.processId||this.refreshing)){var w=void 0;if(w=this.scroller.currentZoom<1?{tx:-s.x/this.scroller.currentZoom,ty:-s.y/this.scroller.currentZoom,scale:this.scroller.transform.scale}:{tx:this.scroller.transform.tx,ty:this.scroller.transform.ty,scale:this.scroller.transform.scale},Un(this)){if(this.scroller.currentZoom<1){if(s.x<0||this.scroller.horizontalOffset<0){var I=this.scroller.verticalOffset<0?this.scroller.verticalOffset:0;g=(l>0?l:0)+"px",m=(this.realActions&Ag.vScrollbarMoved?0:-I)+"px"}else g="0px",m="0px";this.realActions&Ag.hScrollbarMoved&&(this.realActions=this.realActions&~Ag.hScrollbarMoved),this.realActions&Ag.vScrollbarMoved&&(this.realActions=this.realActions&~Ag.vScrollbarMoved)}else g=(s.x<0?l:-this.scroller.horizontalOffset)+"px",m=(s.y<0?h:-this.scroller.verticalOffset)+"px";this.diagramLayer.style.left=g,this.diagramLayer.style.top=m,w.tx=-s.x/w.scale,w.ty=-s.y/w.scale}var x=!0;if(r&&(x=!1),this.updateTextElementValue(S),this.refreshing&&S.shape.activity&&S.shape.activity.subProcess&&S.shape.activity.subProcess.processes){for(var M=0;M<S.shape.activity.subProcess.processes.length;M++){var C=S.shape.activity.subProcess.processes[parseInt(M.toString(),10)];S.wrapper.children.push(this.nameTable[""+C].wrapper)}S.wrapper.measure(new Qu(S.wrapper.bounds.width,S.wrapper.bounds.height)),S.wrapper.arrange(S.wrapper.desiredSize)}S instanceof ES&&"Bezier"===S.type?(a=this.getMidPoint(S),"Canvas"===this.mode&&n&&(a.cx+=w.tx,a.cy+=w.ty)):a=null,e.renderElement(S.wrapper,t,i,!e.isSvgMode&&n?w:void 0,void 0,void 0,x&&(!this.diagramActions||o),void 0,void 0,a)}}}},e.prototype.updateBridging=function(t){if(this.bridgingModule)for(var e=0;e<this.connectors.length;e++){var i=this.connectors[parseInt(e.toString(),10)];this.bridgingModule.updateBridging(i,this);var n=this.connectors[parseInt(e.toString(),10)].wrapper;if(n&&n.children&&n.children.length>0){var r=n.children[0],o=r.data;(i.isBezierEditing&&this.selectedItems.connectors[0].id===i.id||"Bezier"!==i.type)&&i.getSegmentElement(i,r,"ComplexHierarchicalTree"===this.layout.type||"HierarchicalTree"===this.layout.type?this.layout.orientation:void 0,void 0,!1),r.data!==o&&(n.measure(new Qu),n.arrange(n.desiredSize),"SVG"!==this.mode||t||this.updateDiagramObject(i))}}},e.prototype.setCursor=function(t){this.diagramRenderer.setCursor(this.diagramCanvas,t)},e.prototype.clearCanvas=function(t){var e=t.contentWidth||t.diagramLayer.width/this.scroller.currentZoom,i=t.contentHeight||t.diagramLayer.height/this.scroller.currentZoom;if("SVG"!==t.mode){Fw.getContext(t.diagramLayer).clearRect(0,0,e,i)}},e.prototype.updateScrollOffset=function(){this.scroller.setScrollOffset(this.diagramCanvas.scrollLeft,this.diagramCanvas.scrollTop),ao(this),Un(this)&&this.scroller.virtualizeElements()},e.prototype.setOffset=function(t,e){window.domTable[this.element.id+"content"]||(window.domTable[this.element.id+"content"]=document.getElementById(this.element.id+"content"));var i=window.domTable[this.element.id+"content"];i&&(i.scrollLeft=t,i.scrollTop=e)},e.prototype.setSize=function(t,e){if(this.diagramLayer&&!this.preventDiagramUpdate){var i=ho(this);t-=i.width,e-=i.height;var n=this.spatialSearch.getPageBounds();n.x*=this.scroller.currentZoom,n.y*=this.scroller.currentZoom,n.width*=this.scroller.currentZoom,n.height*=this.scroller.currentZoom;var r="SVG"===this.mode?1:1.5,o="SVG"===this.mode?Hs(this.element.id):this.diagramLayer,s="Canvas"===this.mode&&this.constraints&Mg.Virtualization?this.scroller.viewPortWidth:t,a="Canvas"===this.mode&&this.constraints&Mg.Virtualization?this.scroller.viewPortHeight:e;o.setAttribute("width",(r*s).toString()),o.setAttribute("height",(r*a).toString());var l=document.getElementById(this.element.id+"_diagramUserHandleLayer");l&&(l.style.width=t+"px",l.style.height=e+"px");var h={width:t.toString(),height:e.toString()};this.diagramLayerDiv.style.width=t+"px",this.diagramLayerDiv.style.height=e+"px",oa(Qs(this.element.id),h),oa(function(t){return Us(t).getElementsByClassName("e-ports-expand-layer")[0]}(this.element.id),h);var c=_s(this.element.id);oa(c,h),c.parentNode.style.width=t+"px",c.parentNode.style.height=e+"px";var d=Xs(this.element.id);oa(d,h),this.diagramRenderer.updateGrid(this.snapSettings,d,this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler),oa(qs(this.element.id),h),this.htmlLayer.style.width=t+"px",this.htmlLayer.style.height=e+"px","SVG"===this.mode||Un(this)||this.refreshDiagramLayer(),"SVG"===this.mode&&Un(this)&&this.scroller.virtualizeElements()}},e.prototype.transformLayers=function(){var t=this.spatialSearch.getPageBounds();t.x*=this.scroller.currentZoom,t.y*=this.scroller.currentZoom,t.width*=this.scroller.currentZoom,t.height*=this.scroller.currentZoom,this.diagramRenderer.updateGrid(this.snapSettings,Xs(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler),this.diagramRenderer.transformLayers(this.scroller.transform,"SVG"===this.mode),this.diagramActions&Og.DragUsingMouse||this.updateSelector(),this.renderPageBreaks(t)},e.prototype.removePageBreaks=function(){if(this.diagramLayer){var t=Gs(this.element.id);if(t&&t.childNodes)for(var e=t.childNodes.length,i=0;i<e;i++)t.removeChild(t.childNodes[0])}},e.prototype.renderPageBreaks=function(t){this.removePageBreaks();var e=Gs(this.element.id);if(e){var i=0;t=this.scroller.getPageBounds(!0);var n=(this.scroller.transform.tx+t.x)*this.scroller.currentZoom,r=(this.scroller.transform.ty+t.y)*this.scroller.currentZoom,o=t.height*this.scroller.currentZoom,s=t.width*this.scroller.currentZoom;Ww.renderSvgBackGroundImage(this.pageSettings.background,this.element,n,r,s,o);var a={id:e.id+"rect",x:n,y:r,height:o,width:s,angle:0,stroke:"",strokeWidth:1,fill:this.pageSettings.background.color,opacity:1,pivotX:0,pivotY:0,visible:!0,dashArray:"0"};if(this.diagramRenderer.drawRect(e,a),this.pageSettings.showPageBreaks){var l=this.scroller.getPageBreak(t);for(i=0;i<l.length;i++)this.diagramRenderer.drawLine(e,{class:"e-diagram-page-break",fill:"none",stroke:"#aaaaaa",strokeWidth:1,dashArray:"10 10",opacity:2,x:0,y:0,width:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,startPoint:{x:(l[parseInt(i.toString(),10)].x1+this.scroller.transform.tx)*this.scroller.currentZoom,y:(l[parseInt(i.toString(),10)].y1+this.scroller.transform.ty)*this.scroller.currentZoom},endPoint:{x:(l[parseInt(i.toString(),10)].x2+this.scroller.transform.tx)*this.scroller.currentZoom,y:(l[parseInt(i.toString(),10)].y2+this.scroller.transform.ty)*this.scroller.currentZoom},id:l[parseInt(i.toString(),10)].y1===l[parseInt(i.toString(),10)].y2?"HorizontalLines":"VerticalLines"})}}},e.prototype.validatePageSize=function(){var t=0;"Portrait"===this.pageSettings.orientation?this.pageSettings.width>this.pageSettings.height&&(t=this.pageSettings.height,this.pageSettings.height=this.pageSettings.width,this.pageSettings.width=t):this.pageSettings.height>this.pageSettings.width&&(t=this.pageSettings.width,this.pageSettings.width=this.pageSettings.height,this.pageSettings.height=t)},e.prototype.setOverview=function(t,e){if(t)t&&(this.views.push(t.id),this.views[t.id]=t,t.renderDocument(t),t.diagramRenderer.setLayers(),t.updateView(t),this.renderNodes(t));else{for(var i=0;i<this.views.length;i++)this.views[parseInt(i.toString(),10)]===e&&(t=this.views[""+e]);this.views[""+e]=void 0;var n=this.views.indexOf(e);this.views.splice(n,1)}},e.prototype.renderNodes=function(t){if(t){var e=new Ww(t.id,new Yw,!1),i=document.getElementById(t.element.id+"_diagramLayer"),n=$s(t.element.id);this.renderDiagramElements(i,t.diagramRenderer||e,n,void 0,void 0,!0)}},e.prototype.updateThumbConstraints=function(t,e,i){for(var n=t.length,r=0;r<n;r++){var o=t[parseInt(r.toString(),10)],s=!1,a=!1,l=e.thumbsConstraints;o instanceof Pw?(s="Bpmn"===o.shape.type&&"Activity"===o.shape.shape&&!1===o.shape.activity.subProcess.collapsed||"TextAnnotation"===o.shape.shape,a="Bpmn"===o.shape.type&&"TextAnnotation"===o.shape.shape,An(o)&&l&xg.Rotate&&!s||(l&=~xg.Rotate),Bn(o,"SouthEast")&&l&xg.ResizeSouthEast&&!a||(l&=~xg.ResizeSouthEast),Bn(o,"NorthWest")&&l&xg.ResizeNorthWest&&!a||(l&=~xg.ResizeNorthWest),Bn(o,"East")&&l&xg.ResizeEast&&!a||(l&=~xg.ResizeEast),Bn(o,"West")&&l&xg.ResizeWest&&!a||(l&=~xg.ResizeWest),Bn(o,"North")&&l&xg.ResizeNorth&&!a||(l&=~xg.ResizeNorth),Bn(o,"South")&&l&xg.ResizeSouth&&!a||(l&=~xg.ResizeSouth),Bn(o,"NorthEast")&&l&xg.ResizeNorthEast&&!a||(l&=~xg.ResizeNorthEast),Bn(o,"SouthWest")&&l&xg.ResizeSouthWest&&!a||(l&=~xg.ResizeSouthWest)):o instanceof ES?(i||(l|=xg.Default),Tn(o)?l|=xg.ConnectorSource:l&=~xg.ConnectorSource,On(o)?l|=xg.ConnectorTarget:l&=~xg.ConnectorTarget):(i||(l|=xg.Default),Bn(o)||(l&=~(xg.ResizeSouthEast|xg.ResizeSouthWest|xg.ResizeSouth|xg.ResizeEast|xg.ResizeWest|xg.ResizeNorth|xg.ResizeNorthEast|xg.ResizeNorthWest)),An(o)||(l&=~xg.Rotate)),e.thumbsConstraints=l}},e.prototype.renderSelector=function(t,e){var i=this.isProtectedOnChange;f()&&(this.isProtectedOnChange=!0);var n,r=new Qu,o=this.selectedItems,s=(o.constraints,this.diagramRenderer.rendererActions),a=document.getElementsByClassName("blazor-inner-template");if(this.diagramRenderer.rendererActions=this.currentSymbol?this.addConstraints(s,Lg.DrawSelectorBorder):this.removeConstraints(s,Lg.DrawSelectorBorder),this.clearSelectorLayer(),this.commandHandler.hasSelection()){if(1===o.nodes.length&&0===o.connectors.length&&(o.rotateAngle=o.nodes[0].rotateAngle,o.pivot=o.nodes[0].pivot),o.wrapper.measure(r),o.wrapper.arrange(o.wrapper.desiredSize),o.width=o.wrapper.actualSize.width,o.height=o.wrapper.actualSize.height,o.offsetX=o.wrapper.offsetX,o.offsetY=o.wrapper.offsetY,0!==o.rotateAngle){for(var l=0,h=o.nodes;l<h.length;l++){var c=h[l];c.offsetX=c.wrapper.offsetX,c.offsetY=c.wrapper.offsetY}for(var d=0,p=o.connectors;d<p.length;d++)p[d]}this.spatialSearch.getPageBounds();var u=Fs(this.element.id),g=Ws(this.element.id);if(o.thumbsConstraints=xg.Default,o.annotation?this.updateThumbConstraints([o.annotation],o):(this.updateThumbConstraints(o.nodes,o),this.updateThumbConstraints(o.connectors,o,!0)),o.annotation)this.renderSelectorForAnnotation(o,u);else if(o.nodes.length+o.connectors.length===1||this.nameTable.helper){if(o.nodes[0]instanceof Pw){var m=o.nodes[0];Ur(this,m)&&(e||"UmlClassifier"===m.shape.type||m.parentId&&this.nameTable[m.parentId]&&"UmlClassifier"===this.nameTable[m.parentId].shape.type||((!m.container||"Canvas"!==m.container.type&&"Grid"!==m.container.type)&&(o.nodes[0].constraints&=~(wg.Rotate|wg.HideThumbs)),o.thumbsConstraints&=~xg.Rotate));var v=!!e||!!(m.constraints&wg.HideThumbs),y=!!("SwimLane"===m.shape.type||m.isLane||m.isPhase||e);this.diagramRenderer.renderResizeHandle(o.wrapper.children[0],u,o.thumbsConstraints,this.scroller.currentZoom,o.constraints,this.scroller.transform,void 0,Nn(m),v,y,o.handleSize)}else if(o.connectors[0]instanceof ES&&Kn(this.diagramRenderer.rendererActions)){var b=o.connectors[0];this.diagramRenderer.renderEndPointHandle(b,u,o.thumbsConstraints,o.constraints,this.scroller.transform,void 0!==b.sourceWrapper,void 0!==b.targetWrapper,!(!this.connectorEditingToolModule||!Ln(b)),!!this.connectorEditingToolModule,o.handleSize)}}else this.diagramRenderer.renderResizeHandle(o.wrapper,u,o.thumbsConstraints,this.scroller.currentZoom,o.constraints,this.scroller.transform,void 0,Nn(o),null,null,o.handleSize);if(!o.annotation&&!this.currentSymbol&&(this.diagramRenderer.renderUserHandler(o,u,this.scroller.transform,g),f()&&a.length>0))for(n=0;n<this.selectedItems.userHandles.length;n++){var S=this.selectedItems.userHandles[parseInt(n.toString(),10)];document.getElementById(S.name+"_html_element").style.display="block"}}this.selectedItems.selectedObjects.length>1&&this.updateSelectionRectangle(),this.isProtectedOnChange=i},e.prototype.updateSelectionRectangle=function(){for(var t=Fs(this.element.id),e=!1,i=0;i<this.selectedItems.selectedObjects.length;i++)e=0===i,VS(this.selectedItems.selectedObjects[parseInt(i.toString(),10)])===ES?this.diagramRenderer.renderSelectionLine(this.selectedItems.selectedObjects[parseInt(i.toString(),10)].wrapper.children[0],t,this.scroller.transform,e):this.diagramRenderer.renderSelectionRectangle(this.selectedItems.selectedObjects[parseInt(i.toString(),10)].wrapper,t,this.scroller.transform,e)},e.prototype.updateSelector=function(){var t=this.allowServerDataBinding;this.enableServerDataBinding(!1);var e,i=new Qu,n=this.selectedItems,r=n.constraints,o=document.getElementsByClassName("blazor-inner-template");if(this.diagramActions&Og.ToolAction||1!==this.selectedItems.nodes.length||(this.selectedItems.rotateAngle=this.selectedItems.nodes[0].rotateAngle,this.selectedItems.wrapper.rotateAngle=this.selectedItems.nodes[0].rotateAngle),void 0!==this.selectedItems&&(this.clearSelectorLayer(),null!==n.wrapper&&n.wrapper.children&&n.wrapper.children.length)){var s=!0,a=!0;if(Ts(this,n)){var l=this.eventHandler.action,h=l.includes("Rotate"),c=l.includes("None")||l.includes("Select")||l.includes("Drag");(h||c)&&(a=!1),c||(s=!1)}if(s&&(n.wrapper.measure(i),n.wrapper.arrange(n.wrapper.desiredSize)),0!==n.rotateAngle||n.rotateAngle!==n.wrapper.prevRotateAngle)for(var d=0,p=n.nodes;d<p.length;d++){var u=p[d];u.offsetX=u.wrapper.offsetX,u.offsetY=u.wrapper.offsetY}n.width=n.wrapper.actualSize.width,n.height=n.wrapper.actualSize.height,n.offsetX=n.wrapper.offsetX,n.offsetY=n.wrapper.offsetY;var g=Fs(this.element.id),m=Ws(this.element.id),v=this.eventHandler.canHideResizers();if(n.thumbsConstraints=xg.Default,n.annotation?this.updateThumbConstraints([n.annotation],n):(this.updateThumbConstraints(n.nodes,n),this.updateThumbConstraints(n.connectors,n,!0)),this.selectedItems.constraints&fg.UserHandle&&!n.annotation&&!this.currentSymbol&&(this.diagramRenderer.renderUserHandler(n,g,this.scroller.transform,m),f()&&o.length>0))for(e=0;e<this.selectedItems.userHandles.length;e++){var y=this.selectedItems.userHandles[parseInt(e.toString(),10)];document.getElementById(y.name+"_html_element").style.display="block"}if(n.annotation)this.renderSelectorForAnnotation(n,g);else if(n.nodes.length+n.connectors.length===1){if(n.connectors[0]instanceof ES&&Kn(this.diagramRenderer.rendererActions)){var b=n.connectors[0];this.diagramRenderer.renderEndPointHandle(b,g,n.thumbsConstraints,r,this.scroller.transform,void 0!==b.sourceWrapper,void 0!==b.targetWrapper,!(!this.connectorEditingToolModule||!Ln(b)),!!this.connectorEditingToolModule,n.handleSize)}else if(n.nodes[0]instanceof Pw){var S=n.nodes[0];Ur(this,n.nodes[0])&&("UmlClassifier"===S.shape.type||S.parentId&&this.nameTable[S.parentId]&&"UmlClassifier"===this.nameTable[S.parentId].shape.type||((!S.container||"Canvas"!==S.container.type&&"Grid"!==S.container.type)&&(n.nodes[0].constraints&=~(wg.HideThumbs|wg.Rotate)),n.thumbsConstraints&=~xg.Rotate));var w=!("SwimLane"!==S.shape.type&&!S.isLane&&!S.isPhase);this.diagramRenderer.renderResizeHandle(n.wrapper.children[0],g,n.thumbsConstraints,this.scroller.currentZoom,n.constraints,this.scroller.transform,v,Nn(n.nodes[0]),!!(n.nodes[0].constraints&wg.HideThumbs),w,n.handleSize)}}else this.diagramActions&Og.Interactions&&(this.diagramRenderer.rendererActions=this.diagramRenderer.rendererActions|Lg.PreventRenderSelector),Ts(this,n)&&a||this.diagramRenderer.renderResizeHandle(n.wrapper,g,n.thumbsConstraints,this.scroller.currentZoom,n.constraints,this.scroller.transform,v,Nn(n),null,null,n.handleSize),this.diagramRenderer.rendererActions=this.diagramRenderer.rendererActions&~Lg.PreventRenderSelector}this.selectedItems.selectedObjects.length>1&&this.updateSelectionRectangle(),this.enableServerDataBinding(t)},e.prototype.renderSelectorForAnnotation=function(t,e){this.diagramRenderer.renderResizeHandle(t.wrapper.children[0],e,t.thumbsConstraints,this.scroller.currentZoom,t.constraints,this.scroller.transform,void 0,Nn(t.annotation),void 0,void 0,t.handleSize)},e.prototype.drawSelectionRectangle=function(t,e,i,n){this.clearSelectorLayer(),this.diagramRenderer.drawSelectionRectangle(t,e,i,n,this.adornerLayer,this.scroller.transform)},e.prototype.renderHighlighter=function(t){var e=_s(this.element.id);this.diagramRenderer.renderHighlighter(t,e,this.scroller.transform)},e.prototype.clearHighlighter=function(){var t=_s(this.element.id),e=t.getElementById(t.id+"_highlighter");e&&e.parentNode.removeChild(e)},e.prototype.getNodesConnectors=function(t){for(var e=0;e<this.nodes.length;e++){var i=this.nodes[parseInt(e.toString(),10)];t.push(i)}for(e=0;e<this.connectors.length;e++){var n=this.connectors[parseInt(e.toString(),10)];t.push(n)}return t},e.prototype.clearSelectorLayer=function(){var t,e=_s(this.element.id),i=document.getElementsByClassName("blazor-inner-template");if(this.currentSymbol){var n=e.getElementById("borderRect_symbol");n&&n.parentNode.removeChild(n)}else{var r=e.getElementById(this.adornerLayer.id+"_selected_region");r&&r.parentNode.removeChild(r),this.clearHighlighter();for(var o=Fs(this.element.id).childNodes,s=void 0,a=o.length;a>0;a--)(s=o[a-1]).parentNode.removeChild(s);if(f()&&!(this.diagramActions&Og.DragUsingMouse)&&i.length>0)for(t=0;t<this.selectedItems.userHandles.length;t++){var l=this.selectedItems.userHandles[parseInt(t.toString(),10)];document.getElementById(l.name+"_html_element").style.display="none"}else if(!f()){var h=Ws(this.element.id).childNodes;for(t=h.length;t>0;t--)h[t-1].parentNode.removeChild(h[t-1])}}},e.prototype.getWrapper=function(t,e){var i;e=t.id+"_"+e;for(var n=t instanceof em?t:this.getPortContainer(this.nameTable[t.id]),r=0;r<n.children.length;r++)e===n.children[parseInt(r.toString(),10)].id&&(i=n.children[parseInt(r.toString(),10)]);return i},e.prototype.getEndNodeWrapper=function(t,e,i){if("Bpmn"===t.shape.type&&t.wrapper.children[0]instanceof em){if(!f()&&"Activity"===t.shape.shape||f()&&"Activity"===t.shadow.bpmnShape){if(i&&"Transaction"===t.shape.activity.subProcess.type&&e.sourcePortID){var n=e.sourcePortID,r=t.wrapper.children[0].children[0].children[2];if(r.children)for(var o=0,s=r.children;o<s.length;o++){var a=s[o];if(a.visible&&a.id===t.id+"_"+n)return a.children[0]}}return t.wrapper.children[0].children[0].children[0]}return t.wrapper.children[0].children[0]}return this.containsMargin(t.wrapper.children[0])||t.children?t.wrapper:t.wrapper.children[0]},e.prototype.containsMargin=function(t){return t.margin&&(0!==t.margin.left||0!==t.margin.top||0!==t.margin.right||0!==t.margin.bottom)},e.prototype.focusOutEdit=function(){this.endEdit(),"Canvas"===this.mode&&1!==this.scroller.currentZoom&&this.refreshDiagramLayer()},e.prototype.endEditCommand=function(){this.endEdit(),this.textEditing=!1,"Canvas"===this.mode&&1!==this.scroller.currentZoom&&this.refreshDiagramLayer()},e.prototype.endEdit=function(){return _I(this,void 0,void 0,function(){var t,e,i,n,r,o,s,a,l,h,c,d,p,u,g,m,v,y,b,S,w,I,x,M,C,N,E,D;return FI(this,function(T){switch(T.label){case 0:return this.diagramActions&Og.TextEdit?(t="Blazor",e="sfBlazor",i=void 0,n=void 0,r={},this.enableServerDataBinding(!1),f()&&(this.canEnableBlazorObject=!0),o=document.getElementById(this.element.id+"_editBox"),f()&&o||!f()?(s=o.value,Ep.remove(o,"input",this.eventHandler.inputChange),Ep.remove(o,"focusout",this.focusOutEdit),a=document.getElementById(this.element.id+"_editTextBoxDiv"),l=void 0,l=this.nameTable[this.activeLabel.parentId],h=cs(l,this.activeLabel.id),c={oldValue:this.activeLabel.text,newValue:s,cancel:!1,element:l,annotation:h},f()&&this.textEdit&&(c=this.getBlazorTextEditArgs(c)),d=!1,a.parentNode.removeChild(a),p=void 0,this.bpmnModule?(l=this.bpmnModule.isBpmnTextAnnotation(this.activeLabel,this),p=this.bpmnModule.getTextAnnotationWrapper(l,this.activeLabel.id),(d=!!l)?a.textContent===s&&s===this.activeLabel.text?[3,5]:f()?this.textEdit&&window&&window[""+t]?(m={EventName:"textEdit",args:JSON.stringify(c)},[4,window[""+e].updateBlazorDiagramEvents(m,this)]):[3,2]:[3,3]:[3,5]):[3,5]):[3,11]):[3,11];case 1:c=T.sent()||c,T.label=2;case 2:return[3,4];case 3:this.triggerEvent(jg.textEdit,c),T.label=4;case 4:c.cancel||this.bpmnModule.updateTextAnnotationContent(l,this.activeLabel,s,this),T.label=5;case 5:return d?[3,10]:(l=this.nameTable[this.activeLabel.parentId],!(u=cs(l,this.activeLabel.id))||u instanceof uw?i=f()&&"Text"===l.shape.type?{shape:{textContent:l.shape.content}}:{shape:{content:l.shape.content}}:(v=us(l,u.id,!0),r[""+v]={content:u.content},i={annotations:r}),(g=this.eventHandler.isAddTextNode(l,!0))||a.textContent===s&&s===this.activeLabel.text?[3,9]:f()?window&&window[""+t]&&this.textEdit?(m={EventName:"textEdit",args:JSON.stringify(c)},[4,window[""+e].updateBlazorDiagramEvents(m,this)]):[3,7]:[3,8]);case 6:c=T.sent()||c,T.label=7;case 7:return[3,9];case 8:this.triggerEvent(jg.textEdit,c),T.label=9;case 9:p||(p=this.getWrapper(l.wrapper,this.activeLabel.id)),u.content===s||c.cancel||(l.parentId&&"UmlClassifier"===this.nameTable[l.parentId].shape.type&&-1===s.indexOf("+")&&-1===s.indexOf("-")&&-1===s.indexOf("#")&&-1===s.indexOf("~")&&-1===l.id.indexOf("_umlClass_header")&&(s=" + "+s),(l.isLane||l.isPhase)&&this.protectPropertyChange(!0),u instanceof uw?n=f()&&"Text"===l.shape.type?{shape:{textContent:s}}:{shape:{content:s}}:(v=us(l,u.id,!0),(y={})[""+v]={content:s},n={annotations:y}),(b=this.getIndex(l,l.id))&&((S={})[""+b]=i,(w={})[""+b]=n,VS(l)===Pw?this.onPropertyChanged({nodes:w},{nodes:S}):this.onPropertyChanged({connectors:w},{connectors:S})),this.protectPropertyChange(!0),f()&&"Text"===l.shape.type?l.shape.textContent=s:u.content=s,this.protectPropertyChange(!1),this.updateSelector(),(l.isLane||l.isPhase)&&this.protectPropertyChange(!1)),g&&(this.removeObjectsFromLayer(l),this.removeFromAQuad(l),delete this.nameTable[this.activeLabel.parentId],""!==s&&(this.clearSelection(),I=fa(l),l=this.add(I),this.updateDiagramObject(l),this.commandHandler.oldSelectedObjects=WS(this),this.commandHandler.select(this.nameTable[l.id]),this.commandHandler.updateBlazorSelector())),T.label=10;case 10:if(this.selectedItems.nodes.length){if(x=this.nameTable[this.activeLabel.parentId],(M=this.nameTable[x.parentId])&&"SwimLane"===M.shape.type||"SwimLane"===x.shape.type)if(C="LaneHeaderParent",N="PhaseHeaderParent","SwimLane"===x.shape.type&&(M=this.nameTable[this.activeLabel.parentId],x=l),x.isLane||x.isPhase)for(E=x.isLane?M.shape.lanes:M.shape.phases,D=0;D<E.length;D++)E[parseInt(D.toString(),10)].id===(x[""+C]||x[""+N])&&(E[parseInt(D.toString(),10)].header.annotation.content=x.annotations[0].content);else x.isHeader&&M.shape.hasHeader&&(M.shape.header.annotation.content=x.annotations[0].content);this.dataBind()}p.visible=!0,this.updateDiagramObject(l),this.diagramActions=this.diagramActions&~Og.TextEdit,this.activeLabel.isGroup&&this.endGroupAction(),this.activeLabel={id:"",parentId:"",isGroup:!1,text:void 0},this.commandHandler.getBlazorOldValues(),f()&&(this.canEnableBlazorObject=!1),this.enableServerDataBinding(!0),T.label=11;case 11:return[2]}})})},e.prototype.getIndex=function(t,e){for(var i=VS(t)===Pw?this.nodes:this.connectors,n=0;n<i.length;n++)if(i[parseInt(n.toString(),10)].id.toString()===e.toString())return n.toString();return null},e.prototype.getBlazorTextEditArgs=function(t){var e=VS(t.element)===ES?{connectorId:t.element.id}:{nodeId:t.element.id},i={};return VS(t.element)===Pw&&"Text"===t.element.shape.type?i.textNode=t.element.shape:i.annotationId=t.element.annotations[0].id,t={oldValue:t.oldValue,newValue:t.newValue,cancel:t.cancel,element:e,annotation:i}},e.prototype.canLogChange=function(){return!(!(this.diagramActions&Og.Render)||this.diagramActions&Og.ToolAction||this.diagramActions&Og.UndoRedo||this.diagramActions&Og.PublicMethod)},e.prototype.modelChanged=function(t,e){return!!(t.connectors||e.connectors||t.nodes||e.connectors||t.pageSettings||e.pageSettings||t.bridgeDirection||e.bridgeDirection)},e.prototype.resetDiagramActions=function(t){var e=!!t;this.diagramActions&Og.UndoRedo&&(!e||t===Og.UndoRedo)&&(this.diagramActions=this.diagramActions&~Og.UndoRedo),this.diagramActions&Og.PublicMethod&&(!e||t===Og.PublicMethod)&&(this.diagramActions=this.diagramActions&~Og.PublicMethod)},e.prototype.removeNode=function(t,e){this.removeObjectsFromLayer(t),this.removeFromAQuad(this.nameTable[t.id]);var i=document.getElementById(t.id+"_groupElement");if(delete this.nameTable[t.id],t.children&&delete this.groupTable[t.id],f())for(var n=0;n<this.nodes.length;n++)t.id===this.nodes[parseInt(n.toString(),10)].id&&this.UpdateBlazorDiagramModel(t,"Node",n);if(this.nodes.splice(this.nodes.indexOf(t),1),i&&i.children&&i.children.length>0)for(var r=void 0,o=i.children.length-1;o>=0;o--){var s=i.children[parseInt(o.toString(),10)];e.length>0&&-1!==e.indexOf(s.id.split("_")[0])&&(r?i.parentNode.insertBefore(s,r):i.parentNode.insertBefore(s,i),r=s)}i&&i.parentNode.removeChild(i)},e.prototype.deleteGroup=function(t){var e=[];t.children&&(e=this.commandHandler.getChildren(t,[])),this.UpdateBlazorDiagramModelCollection(t);for(var i=0,n=e;i<n.length;i++){var r=n[i];this.nameTable[r.id]&&this.remove(r)}},e.prototype.updateObject=function(t,e,i){if(!(this.diagramActions&Og.ToolAction)){var n=t.wrapper.children[0].bounds;if(!this.commandHandler.checkBoundaryConstraints(void 0,void 0,n))if(t instanceof Pw){for(var r=e,o=0,s=Object.keys(i);o<s.length;o++){switch(h=s[o]){case"width":t.width=r.width;break;case"height":t.height=r.height;break;case"offsetX":t.offsetX=r.offsetX;break;case"offsetY":t.offsetY=r.offsetY;break;case"rotateAngle":t.rotateAngle=r.rotateAngle}}this.nodePropertyChange(t,i,e)}else{for(var a=0,l=Object.keys(i);a<l.length;a++){var h=l[a],c=e,d=t.sourcePoint,p=t.targetPoint;switch(h){case"sourcePoint":d.x=c.sourcePoint.x||d.x,d.y=c.sourcePoint.y||d.y;break;case"targetPoint":p.x=c.targetPoint.x||p.x,p.y=c.targetPoint.y||p.y}}this.connectorPropertyChange(t,i,e)}}},e.prototype.nodePropertyChangeExtend=function(t,e,i,n){return void 0!==i.style&&"Bpmn"!==t.shape.type&&(qo(i.style,t.wrapper.children[0]),n=!0),void 0!==i.shadow&&(this.updateShadow(t.shadow,i.shadow),n=!0),void 0!==i.constraints&&(e.constraints&wg.Select&&!(i.constraints&wg.Select)&&Jr(this,t)?this.clearSelection():(this.updateThumbConstraints(this.selectedItems.nodes,this.selectedItems),this.updateSelector(),n=!0)),this.swimLaneNodePropertyChange(t,e,i,n),n},e.prototype.swimLaneNodePropertyChange=function(t,e,i,n){if("SwimLane"===t.shape.type&&!this.currentSymbol){if(e.shape){var r=i.shape,o=t.shape,s="Horizontal"===o.orientation,a=o.padding,l=e.shape,h=t.wrapper.children[0],c=void 0,d=void 0,p=void 0;if(l.lanes||l.phases){if(l.lanes)for(var u=0,g=Object.keys(r.lanes);u<g.length;u++){var m=g[u],f=Number(m),v=l.lanes[parseInt(f.toString(),10)],y=void 0,b=r.lanes[parseInt(f.toString(),10)];if(b&&b.header&&(p=o.lanes[parseInt(f.toString(),10)].header.id,c=v.header,d=b.header,this.nodePropertyChange(this.nameTable[""+p],c,d)),v.children)for(var S=0,w=Object.keys(v.children);S<w.length;S++){var I=w[S];p=o.lanes[parseInt(f.toString(),10)].children[Number(I)].id;var x=this.nameTable[""+p];c=v.children[Number(I)],d=b.children[Number(I)],this.nodePropertyChange(x,c,d)}v.width&&!s&&(y=o.phases&&o.phaseSize?f+1:f,h.updateColumnWidth(y,b.width,!0,a),this.updateDiagramElementQuad()),v.height&&s&&(y=o.header&&o.hasHeader?f+1:f,y+=o.phases&&o.phaseSize?1:0,h.updateRowHeight(y,b.height,!0,a),this.updateDiagramElementQuad())}if(r.phases)for(var M=0,C=Object.keys(r.phases);M<C.length;M++){var N=C[M],E=(f=Number(N),r.phases[parseInt(f.toString(),10)]),D=void 0,T=o.header&&o.hasHeader?1:0;if(E&&E.header&&(p=o.phases[parseInt(f.toString(),10)].header.id,c=l.phases[parseInt(f.toString(),10)].header,d=E.header,this.nodePropertyChange(this.nameTable[""+p],c,d)),E.offset){if(0===f)D=E.offset;else{var O=o.phases[f-1];(D=E.offset-O.offset)<=0&&(D=E.offset)}s?(h.updateColumnWidth(f,D,!0,a),yr(t,this,h.rows[parseInt(T.toString(),10)].cells[parseInt(f.toString(),10)],f)):h.updateRowHeight(T+f,D,!0,a)}}}if(void 0!==r.phaseSize&&o.phases.length)if(0===r.phaseSize||0===l.phaseSize)if(l.phaseSize)s?(h.removeRow(o.header&&o.hasHeader?1:0),t.height=t.wrapper.height=h.height):(o.header&&o.hasHeader&&(h.rows[0].cells[1].children=h.rows[0].cells[0].children,h.rows[0].cells[1].columnSpan=h.rows[0].cells[0].columnSpan-1,h.rows[0].cells[0].children=[]),h.removeColumn(0));else{if(s){var L=new zb;L.height=r.phaseSize,h.addRow(o.header&&o.hasHeader?1:0,L,!0),t.height=t.wrapper.height+=r.phaseSize}else{var A=new kb;A.width=r.phaseSize,h.addColumn(0,A,!0),o.header&&o.hasHeader&&(h.rows[0].cells[0].children=h.rows[0].cells[1].children,h.rows[0].cells[1].children=[],h.rows[0].cells[1].columnSpan=1,h.rows[0].cells[1].minWidth=void 0,h.rows[0].cells[0].columnSpan=o.lanes.length+1)}for(var z=0;z<o.phases.length;z++)""===o.phases[parseInt(z.toString(),10)].id&&(o.phases[parseInt(z.toString(),10)].id=da()),ir(h,this,t,o.header&&o.hasHeader?1:0,s,z)}else s?h.updateRowHeight(o.header&&o.hasHeader?1:0,r.phaseSize,!1):h.updateColumnWidth(0,r.phaseSize,!1);if(o.header&&o.hasHeader&&l.header){var k=h.rows[0].cells[0].children[0].id,j=this.nameTable[""+k];this.nodePropertyChange(j,l.header,r.header)}t.height=t.wrapper.height=h.height,t.width=t.wrapper.width=h.width}else if(e.constraints){var P=e.constraints&wg.Select,R=i.constraints&wg.Select;if(P!==R){r=t.shape;(j=this.nameTable[t.id+r.header.id]).constraints=R?j.constraints|wg.Select:j.constraints&~wg.Select;var B=void 0;if(r.phaseSize>0)for(var H=0;H<r.phases.length;H++)(B=this.nameTable[t.id+r.phases[parseInt(H.toString(),10)].id+"_header"]).constraints=R?B.constraints|wg.Select:B.constraints&~wg.Select;var U=void 0,V=void 0,_=r.phases.length||1;for(H=0;H<r.lanes.length;H++)for(var F=0;F<_;F++)(U=this.nameTable[t.id+r.lanes[parseInt(H.toString(),10)].id+F]).constraints=R?U.constraints|wg.Select:U.constraints&~wg.Select,0===F&&((V=this.nameTable[t.id+r.lanes[parseInt(H.toString(),10)].id+"_"+F+"_header"]).constraints=R?V.constraints|wg.Select:V.constraints&~wg.Select)}}n=!0}return n},e.prototype.insertValue=function(t,e){if(!(this.blazorActions&$u.GroupClipboardInProcess)){for(var i=void 0,n=e?this.oldNodeObjects:this.oldConnectorObjects,r=0;r<n.length;r++)n[parseInt(r.toString(),10)].id===t.id&&(i=!0);i||(e?this.oldNodeObjects.push(t):this.oldConnectorObjects.push(t))}},e.prototype.nodePropertyChange=function(t,e,i,n,r,o){if(this.canEnableBlazorObject&&"helper"!==t.id){var s=fa(t);this.insertValue(s,!0)}var a,l=t.wrapper.outerBounds,h=t.wrapper.bounds,c=!1;if(void 0!==i.width&&(t.children?t.container?t.wrapper.width=i.width:this.scaleObject(t,i.width,!0):(t.wrapper.children[0].width=i.width,a=!0,c=!0)),void 0!==i.height&&(t.children?t.container?t.wrapper.height=i.height:this.scaleObject(t,i.height,!1):(t.wrapper.children[0].height=i.height,a=!0,c=!0)),a=this.nodePropertyChangeExtend(t,e,i,a),void 0!==i.constraints&&zn(e)!==zn(i)&&(t.wrapper.children[0].shadow=zn(t)?t.shadow:null),void 0!==i.offsetX){if("None"!==t.wrapper.flip){if(t.offsetX!==t.wrapper.offsetX&&void 0!==e.offsetX){var d=i.offsetX-e.offsetX;t.wrapper.offsetX=t.wrapper.offsetX+d,this.updateFlipOffset(t.wrapper,d,0,t.wrapper.flip)}}else t.wrapper.offsetX=i.offsetX;a=!0,c=!0}if(void 0!==i.offsetY){if("None"!==t.wrapper.flip){if(t.offsetY!==t.wrapper.offsetY&&void 0!==e.offsetY){var p=i.offsetY-e.offsetY;t.wrapper.offsetY=t.wrapper.offsetY+p,this.updateFlipOffset(t.wrapper,0,p,t.wrapper.flip)}}else t.wrapper.offsetY=i.offsetY;a=!0,c=!0}if(void 0!==i.padding&&(t.wrapper.padding.left=void 0!==i.padding.left?i.padding.left:t.wrapper.padding.left,t.wrapper.padding.right=void 0!==i.padding.right?i.padding.right:t.wrapper.padding.right,t.wrapper.padding.top=void 0!==i.padding.top?i.padding.top:t.wrapper.padding.top,t.wrapper.padding.bottom=void 0!==i.padding.bottom?i.padding.bottom:t.wrapper.padding.bottom,a=!0),void 0!==i.pivot&&(t.wrapper.pivot=i.pivot,a=!0),void 0!==i.minWidth&&(t.wrapper.minWidth=t.wrapper.children[0].minWidth=i.minWidth,a=!0,c=!0),void 0!==i.minHeight&&(t.wrapper.minHeight=t.wrapper.children[0].minHeight=i.minHeight,a=!0,c=!0),void 0!==i.maxWidth&&(t.wrapper.maxWidth=i.maxWidth,a=!0,c=!0),void 0!==i.maxHeight&&(t.wrapper.maxHeight=i.maxHeight,a=!0,c=!0),void 0!==i.flip)if(t.wrapper.flip=i.flip,a=!0,c=!0,t.wrapper.elementActions&Ig.ElementIsGroup){if(YS(t.wrapper,t.offsetX,t.offsetY,this,i.flip),t&&t.children)for(var u=0,g=t.children;u<g.length;u++){var m=g[u],v=this.nameTable[""+m];v.wrapper.flip=i.flip,this.updatePorts(v,i.flip)}}else!t.flipMode||"Port"!==t.flipMode&&"All"!==t.flipMode||this.updatePorts(t,i.flip);if(void 0!==i.rotateAngle&&t.constraints&wg.Rotate&&(t.children&&r&&this.commandHandler.rotateObjects(t,[t],t.rotateAngle-t.wrapper.rotateAngle,{x:t.offsetX,y:t.offsetY},!1),t.wrapper.rotateAngle=i.rotateAngle,a=!0,c=!0),void 0!==i.backgroundColor&&(t.wrapper.style.fill=i.backgroundColor),void 0!==i.visible&&this.updateElementVisibility(t.wrapper,t,t.visible),void 0!==i.shape&&"Bpmn"!==t.shape.type&&(a=!0,$o(i,t,e,this),c=!0),i.margin&&(a=!0,this.updateMargin(t,i),c=!0),((void 0!==i.shape&&void 0===i.shape.type||void 0!==i.width||void 0!==i.height||void 0!==i.style)&&"Bpmn"===t.shape.type&&this.bpmnModule||f()&&i&&i.shape&&"Bpmn"===i.shape.type)&&(a=!0,c=!0,this.bpmnModule.updateBPMN(i,e,t,this)),"UmlActivity"===t.shape.type&&(!f()&&"FinalNode"===t.shape.shape||f()&&"FinalNode"===t.shape.umlActivityShape)&&(a=!0,c=!0,this.updateUMLActivity(i,e,t,this)),(t.shape&&"UmlClassifier"===t.shape.type||t.parentId&&this.nameTable[t.parentId]&&"UmlClassifier"===this.nameTable[t.parentId].shape.type)&&(a=!0,c=!0),void 0!==i.ports)for(var y=0,b=Object.keys(i.ports);y<b.length;y++){var S=b[y],w=Number(S);a=!0;var I=i.ports[""+S],x=t.ports[parseInt(w.toString(),10)];this.updatePort(I,x,t.wrapper),c=!0}if(void 0!==i.annotation||void 0!==i.annotations||void 0!==i.width)for(var M=0,C=Object.keys(i.annotations||t.annotations);M<C.length;M++){S=C[M],w=Number(S);a=!0;I=void 0;I=i.annotation?i.annotation:i.annotations?i.annotations[""+S]:t.annotations;var N=t.annotations[parseInt(w.toString(),10)];if(N){var E=!!t.width;this.updateAnnotation(I,N,t.wrapper,t,E);var D=this.nameTable[t.parentId];if(D&&"SwimLane"===D.shape.type){if(t.isLane||t.isPhase)for(var T=t.isLane?D.shape.lanes:D.shape.phases,O=0;O<T.length;O++)if(T[parseInt(O.toString(),10)].id===(t.LaneHeaderParent||t.PhaseHeaderParent)){T[parseInt(O.toString(),10)].header.annotation.content=t.annotations[0].content,T[parseInt(O.toString(),10)].header.annotation.style=t.annotations[0].style;break}}}}if(void 0===i.expandIcon&&void 0===i.collapseIcon&&void 0===i.isExpanded||(this.updateIcon(t),this.updateDefaultLayoutIcons(t),void 0!==i.isExpanded&&(this.canExpand=!0,this.commandHandler.expandNode(t,this)),a=!0,this.canExpand=!1),void 0!==i.fixedUserHandles){w=void 0,I=void 0;for(var L=void 0,A=0,z=Object.keys(i.fixedUserHandles);A<z.length;A++){S=z[A];w=Number(S),a=!0,i.fixedUserHandles[parseInt(w.toString(),10)]&&(I=i.fixedUserHandles[parseInt(w.toString(),10)]),(L=t.fixedUserHandles[parseInt(w.toString(),10)])&&this.updateNodefixedUserHandle(I,L,t.wrapper,t)}}if(void 0!==i.tooltip&&this.updateTooltip(t,i),a){if(void 0!==this.bpmnModule&&this.bpmnModule.updateTextAnnotationProp(t,{offsetX:e.offsetX||t.offsetX,offsetY:e.offsetY||t.offsetY},this),this.checkSelectedItem(t)&&t.wrapper.children[0]instanceof Jg&&t.wrapper.children[0].refreshTextElement(),t.wrapper.measure(new Qu(t.wrapper.bounds.width,t.wrapper.bounds.height),t.id,this.onLoadImageSize.bind(this)),t.wrapper.arrange(t.wrapper.desiredSize),this.updateObject(t,e,i),!("SwimLane"!==t.shape.type||this.currentSymbol||this.diagramActions&Og.ToolAction)){br(this,t);var k=t.wrapper.children[0],j=t.shape,P=k.columnDefinitions().length;if("Horizontal"===j.orientation){w=j.header&&j.hasHeader?1:0;yr(t,this,k.rows[parseInt(w.toString(),10)].cells[P-1],P-1)}t.wrapper.measure(new Qu(t.wrapper.bounds.width,t.wrapper.bounds.height)),t.wrapper.arrange(t.wrapper.desiredSize)}if(this.diagramActions&Og.ToolAction&&!(this.diagramActions&Og.UndoRedo)||this.checkSelectedItem(t)&&this.updateSelector(),!1===l.equals(l,t.wrapper.outerBounds)&&(this.updateQuad(t),t.parentId&&this.nameTable[t.parentId])){var R=this.nameTable[t.parentId];this.updateQuad(R)}if(n?t&&t.visible&&t.outEdges&&this.updateIconVisibility(t,0!==t.outEdges.length):this.commandHandler.connectorSegmentChange(t,h,void 0!==i.rotateAngle),void 0!==this.bpmnModule&&this.bpmnModule.updateDocks(t,this),i.annotations&&t.processId||this.updateGroupOffset(t),t.parentId&&this.nameTable[t.parentId]){var B=this.nameTable[t.parentId];B.wrapper.measure(new Qu(B.wrapper.width,t.wrapper.height)),B.wrapper.arrange(B.wrapper.desiredSize),B.offsetX=B.wrapper.offsetX,B.offsetY=B.wrapper.offsetY}if(!1===h.equals(h,t.wrapper.bounds)&&t.children&&this.updateGroupOffset(t),"SwimLane"===t.shape.type&&!this.currentSymbol&&this.diagramActions&Og.Render){ur(sr(this,t.wrapper.children[0]),this)}if(!this.preventNodesUpdate){if(!Un(this)||Un(this)&&this.scroller.oldCollectionObjects.indexOf(t.id)>-1)if(this.diagramActions&Og.PreventZIndexOnDragging)this.updateDiagramObject(t,!0);else if(this.updateDiagramObject(t),void 0!==this.bpmnModule&&"SwimLane"===t.shape.type&&t.isTextNode)for(var H=t,U=0;U<H.shape.lanes.length;U++)for(var V=H.shape.lanes[parseInt(U.toString(),10)],_=0;_<V.children.length;_++){var F=V.children[parseInt(_.toString(),10)];"Bpmn"===F.shape.type&&this.bpmnModule.updateTextAnnotationProp(F,{offsetX:F.offsetX,offsetY:F.offsetY},this,!1)}if(!n&&c&&(this.lineRoutingModule&&this.diagramActions&&this.constraints&Mg.LineRouting&&"helper"!==t.id&&(this.diagramActions&Og.ToolAction||this.lineRoutingModule.renderVirtualRegion(this,!0)),this.updateConnectorEdges(t),"helper"!==t.id&&!(this.diagramActions&Og.ToolAction)))for(var Y=this.spatialSearch.findObjects(t.wrapper.outerBounds),W=0;W<Y.length;W++){var Q=Y[parseInt(W.toString(),10)];Q instanceof ES&&this.connectorPropertyChange(Y[parseInt(W.toString(),10)],{},{sourceID:Q.sourceID,targetID:Q.targetID,sourcePortID:Q.sourcePortID,targetPortID:Q.targetPortID,sourcePoint:Q.sourcePoint,targetPoint:Q.targetPoint})}}"New"!==t.status&&this.diagramActions&&(t.status="Update")}if(!o){var X=t,q={element:X,cause:this.diagramActions,diagramAction:this.getDiagramAction(this.diagramActions),oldValue:e,newValue:i};f()&&this.propertyChange&&(q.element={node:xs(X)},q.oldValue={node:xs(e)},q.newValue={node:xs(i)}),this.triggerEvent(jg.propertyChange,q)}},e.prototype.updatePorts=function(t,e){if(t&&t.ports.length>0)for(var i=0,n=Object.keys(t.ports);i<n.length;i++){var r=n[i],o=Number(r),s=t.ports[parseInt(o.toString(),10)],a=this.getWrapper(t.wrapper,s.id);(a=FS(a,e,s)).relativeMode="Point",a.measure(new Qu(a.width,a.height)),a.arrange(a.desiredSize)}},e.prototype.updateFlipOffset=function(t,e,i,n){if(t.hasChildren())for(var r=0,o=t.children;r<o.length;r++){var s=o[r];"Horizontal"!==n&&"Both"!==n||(s.flipOffset.x=s.flipOffset.x+e),"Vertical"!==n&&"Both"!==n||(s.flipOffset.y=s.flipOffset.y+i),(s instanceof em||s instanceof $g)&&this.updateFlipOffset(s,e,i,n)}},e.prototype.updateUMLActivity=function(t,e,i,n){if(void 0!==t.width||void 0!==t.height){var r=i.wrapper.children[0].children[0];r.width=t.width,r.height=t.height;var o=i.wrapper.children[0].children[1];o.width=t.width/1.5,o.height=t.height/1.5}},e.prototype.updateConnectorProperties=function(t){if(this.preventConnectorsUpdate){-1===this.selectionConnectorsList.indexOf(t)&&t&&this.selectionConnectorsList.push(t)}else{var e={sourcePoint:t.sourcePoint,targetPoint:t.targetPoint,sourceID:t.sourceID,targetID:t.targetID,sourcePortID:t.sourcePortID,targetPortID:t.targetPortID};this.connectorPropertyChange(t,{},e,void 0,!0)}},e.prototype.updateConnectorEdges=function(t){if(t.inEdges.length>0)for(var e=0;e<t.inEdges.length;e++)this.updateConnectorProperties(this.nameTable[t.inEdges[parseInt(e.toString(),10)]]);if(t.outEdges.length>0)for(var i=0;i<t.outEdges.length;i++)this.updateConnectorProperties(this.nameTable[t.outEdges[parseInt(i.toString(),10)]]);t.parentId&&this.nameTable[t.parentId]&&this.updateConnectorEdges(this.nameTable[t.parentId])},e.prototype.connectorProprtyChangeExtend=function(t,e,i,n){return void 0!==i.type&&i.type!==e.type&&t.segments.length>0&&void 0===i.segments&&(t.segments=[]),void 0!==i.shape&&void 0!==t.shape&&t.shape&&"Bpmn"===t.shape.type&&this.bpmnModule&&this.bpmnModule.updateBPMNConnector(t,e,i,this),void 0!==t.constraints?(this.updateThumbConstraints(this.selectedItems.connectors,this.selectedItems),n=!0):n},e.prototype.connectorPropertyChange=function(t,e,i,n,r){if(this.canEnableBlazorObject){var o=fa(t);this.insertValue(o,!1)}var s=t.wrapper.bounds,a=!1,l=[];a=this.connectorProprtyChangeExtend(t,e,i,a);var h,c,d,p;if(void 0!==i.visible&&this.updateElementVisibility(t.wrapper,t,t.visible),void 0!==i.sourcePoint||void 0!==i.targetPoint||void 0!==i.sourceID||void 0!==i.targetID||void 0!==i.targetPadding||void 0!==i.sourcePortID||void 0!==i.targetPortID||void 0!==i.sourcePadding||void 0!==i.type||void 0!==i.segments||void 0!==i.flip){if(void 0!==i.sourceID&&i.sourceID!==e.sourceID||i.sourcePortID){var u=this.nameTable[t.sourceID];if(c=this.findInOutConnectPorts(u,!1),(!u||Pn(u)||""!==t.sourcePortID&&Rn(c))&&(t.sourceWrapper=u?this.getEndNodeWrapper(u,t,!0):void 0,t.sourcePortID&&void 0===i.sourcePortID&&(t.sourcePortWrapper=u?this.getWrapper(u.wrapper,t.sourcePortID):void 0),this.removePortEdges(this.nameTable[e.sourceID]||u,e.sourcePortID||t.sourcePortID,t.id,!1)),void 0!==i.sourceID&&void 0!==e.sourceID&&""!==e.sourceID){var g=this.nameTable[e.sourceID];void 0!==g&&g.outEdges&&-1!==g.outEdges.indexOf(t.id)&&ns(g.outEdges,t.id)}this.updateEdges(t)}if(void 0!==i.targetID&&i.targetID!==e.targetID){var m=this.nameTable[i.targetID];if(h=this.findInOutConnectPorts(m,!0),(!m||kn(m)||""!==t.targetPortID&&jn(h))&&(t.targetWrapper=m?this.getEndNodeWrapper(m,t,!1):void 0,t.targetPortID&&void 0===i.targetPortID&&(t.targetPortWrapper=m?this.getWrapper(m.wrapper,t.targetPortID):void 0),this.removePortEdges(this.nameTable[e.targetID]||m,e.targetPortID||t.targetPortID,t.id,!0)),void 0!==e&&void 0!==e.targetID&&""!==e.targetID){var f=this.nameTable[e.targetID];void 0!==f&&f.inEdges&&-1!==f.inEdges.indexOf(t.id)&&ns(f.inEdges,t.id)}this.updateEdges(t)}if(void 0!==i.sourcePortID&&i.sourcePortID!==e.sourcePortID){t.sourceID&&this.nameTable[t.sourceID]&&(d=this.nameTable[t.sourceID].wrapper);!(u=this.nameTable[t.sourceID])||Pn(u)||""!==t.sourcePortID&&Rn(c)?t.sourcePortWrapper=d?this.getWrapper(d,i.sourcePortID):void 0:""!==t.sourcePortID||Pn(u)||(t.sourcePortWrapper=void 0)}if(void 0!==i.targetPortID&&i.targetPortID!==e.targetPortID){m=this.nameTable[t.targetID];t.targetID&&this.nameTable[t.targetID]&&(p=this.nameTable[t.targetID].wrapper),!m||kn(m)||""!==t.targetPortID&&jn(h)?t.targetPortWrapper=p?this.getWrapper(p,i.targetPortID):void 0:""!==t.targetPortID||kn(m)||(t.targetPortWrapper=void 0)}void 0!==i.flip&&(t.flip=i.flip,_S(t)),"Orthogonal"===t.type&&this.lineRoutingModule&&this.diagramActions&&this.constraints&Mg.LineRouting&&!(this.diagramActions&Og.ToolAction)&&(this.lineRoutingModule.renderVirtualRegion(this,!0),t.sourceID!==t.targetID&&t.segments.length>1&&this.lineRoutingModule.refreshConnectorSegments(this,t,!1)),l=this.getPoints(t)}void 0!==i.style&&qo(i.style,t.wrapper.children[0]),(l.length>0||void 0!==i.sourceDecorator||void 0!==i.targetDecorator&&Cs(Object.keys(i.targetDecorator))||void 0!==i.cornerRadius)&&(rs(t,l.length>0?l:t.intermediatePoints,this.diagramActions),void 0!==i.type&&(a=!0),l.length>0&&(t.wrapper.measure(new Qu(t.wrapper.width,t.wrapper.height)),t.wrapper.arrange(t.wrapper.desiredSize),this.updateConnectorAnnotation(t),this.updateConnectorfixedUserHandles(t),this.updateObject(t,e,i))),(i.sourcePoint||i.targetPoint||i.segments)&&this.diagramActions===Og.Render&&(a=!0),"Bpmn"===t.shape.type&&"Default"===t.shape.sequence&&"Sequence"===t.shape.flow&&this.commandHandler.updatePathElementOffset(t),n||this.updateBridging(),this.updateAnnotations(i,t),this.updatefixedUserHandle(i,t),t.wrapper.measure(new Qu(t.wrapper.width,t.wrapper.height)),t.wrapper.arrange(t.wrapper.desiredSize),!1===s.equals(s,t.wrapper.bounds)&&this.updateQuad(t),!0!==a||!this.checkSelectedItem(t)||this.diagramActions&Og.ToolAction&&!(this.diagramActions&Og.UndoRedo)||this.updateSelector(),this.preventConnectorsUpdate||(!Un(this)||Un(this)&&this.scroller.oldCollectionObjects.indexOf(t.id)>-1)&&(this.diagramActions&Og.PreventZIndexOnDragging?this.updateDiagramObject(t,!0):this.updateDiagramObject(t)),this.diagramActions&&"New"!==t.status&&(t.status="Update"),this.triggerPropertyChange(r,t,e,i)},e.prototype.removePortEdges=function(t,e,i,n){if(t)for(var r=0;r<t.ports.length;r++){var o=t.ports[parseInt(r.toString(),10)];if(o.id===e){ns(n?o.inEdges:o.outEdges,i)}}},e.prototype.getpropertyChangeArgs=function(t,e,i,n){return n.element={connector:xs(t)},n.oldValue={connector:xs(e)},n.newValue={connector:xs(i)},n},e.prototype.triggerPropertyChange=function(t,e,i,n){if(!t){var r=e,o={element:xs(r),cause:this.diagramActions,diagramAction:this.getDiagramAction(this.diagramActions),oldValue:xs(i),newValue:xs(n)};f()&&(o=this.getpropertyChangeArgs(r,i,n,o)),this.triggerEvent(jg.propertyChange,o)}},e.prototype.findInOutConnectPorts=function(t,e){var i={};return t&&(i=ps(t,e)),i},e.prototype.getPoints=function(t,e){var i=!!this.lineDistributionModule;return t.getConnectorPoints(t.type,e,"ComplexHierarchicalTree"===this.layout.type||"HierarchicalTree"===this.layout.type?this.layout.orientation:void 0,i)},e.prototype.updateNodeProperty=function(t,e,i){if(void 0===e)this.updateElementVisibility(t,this.nameTable[t.id],e);else{t.style.opacity=i;for(var n=0;n<t.children.length;n++)t.children[parseInt(n.toString(),10)]instanceof $g&&this.updateNodeProperty(t.children[parseInt(n.toString(),10)],void 0,i),t.children[parseInt(n.toString(),10)].style.opacity=i}},e.prototype.checkSelectedItem=function(t){var e=this.selectedItems,i=!1,n=[];return(n=n.concat(e.nodes,e.connectors)).length>0&&t.id===n[n.length-1].id&&(i=!0),i},e.prototype.updateDiagramContainerVisibility=function(t,e){if(t instanceof $g)for(var i=0;i<t.children.length;i++)this.updateDiagramContainerVisibility(t.children[parseInt(i.toString(),10)],e);t.visible=e},e.prototype.updateElementVisibility=function(t,e,i){if(void 0!==i){if(t.visible=i,e instanceof Pw){if(e.children)for(var n=0,r=e.children;n<r.length;n++){var o=r[n];this.updateElementVisibility(this.nameTable[""+o].wrapper,this.nameTable[""+o],i)}else t.children[0].visible=i,this.updateDiagramContainerVisibility(t.children[0],i),"Bpmn"===e.shape.type&&this.bpmnModule&&this.bpmnModule.updateElementVisibility(e,i,this);if(e.ports)for(var s=0,a=e.ports;s<a.length;s++){var l=a[s];if(l.visibility&gg.Visible){(m=this.getWrapper(t,l.id)).visible=i}}if(e.annotations)for(var h=0,c=e.annotations;h<c.length;h++){var d=c[h];(m=this.getWrapper(t,d.id)).visible=i}}else for(var p=0;p<3;p++)t.children[parseInt(p.toString(),10)].visible=i;if(e.annotations)for(var u=0,g=e.annotations;u<g.length;u++){d=g[u];(m=this.getWrapper(t,d.id)).visible=i}if(e.expandIcon||e.collapseIcon){var m;if(m=this.getWrapper(t,"icon_content")){for(p=0;p<m.children.length;p++)m.children[parseInt(p.toString(),10)].visible=i;m.visible=i}e&&e.visible&&e.outEdges&&this.updateIconVisibility(e,0!==e.outEdges.length)}!1===i&&this.unSelect(this.nameTable[t.id]),(e instanceof Pw&&!this.preventNodesUpdate||e instanceof ES&&!this.preventConnectorsUpdate)&&this.diagramActions&&this.updateDiagramObject(this.nameTable[t.id],void 0,!0)}},e.prototype.updateAnnotations=function(t,e){if(void 0!==t.annotations)for(var i=0,n=Object.keys(t.annotations);i<n.length;i++){var r=n[i],o=Number(r),s=t.annotations[""+r],a=e.annotations[parseInt(o.toString(),10)];this.updateAnnotation(s,a,e.wrapper,e)}},e.prototype.updatefixedUserHandle=function(t,e){if(void 0!==t.fixedUserHandles)for(var i=void 0,n=void 0,r=void 0,o=0,s=Object.keys(t.fixedUserHandles);o<s.length;o++){var a=s[o];i=Number(a),n=t.fixedUserHandles[""+a],r=e.fixedUserHandles[parseInt(i.toString(),10)],this.updateConnectorfixedUserHandle(n,r,e.wrapper,e)}},e.prototype.updateConnectorfixedUserHandle=function(t,e,i,n,r){var o=!1,s=this.getWrapper(i,e.id);void 0!==s&&(void 0!==t.width&&(s.width=t.width,o=!0),void 0!==t.height&&(s.height=t.height,o=!0),e instanceof Ob&&void 0!==t.offset&&n.updateAnnotation(e,n.intermediatePoints,n.wrapper.bounds,s),e instanceof Ob&&t.displacement&&(void 0===t.displacement.x&&void 0===t.displacement.y||(o=!0)),void 0!==t.fill&&(s.style.fill=t.fill),void 0!==t.handleStrokeColor&&(s.style.strokeColor=t.handleStrokeColor),void 0!==t.handleStrokeWidth&&(s.style.strokeWidth=t.handleStrokeWidth),void 0!==t.visibility&&(s.visible=t.visibility),void 0!==t.cornerRadius&&(s.cornerRadius=t.cornerRadius),this.updatefixedUserHandleContent(t,o,s,n,e,i),!0===o&&(s.measure(new Qu(s.width,s.height)),s.arrange(s.desiredSize)))},e.prototype.updateAnnotation=function(t,e,i,n,r){var o=!1,s=this.getWrapper(i,e.id);if(void 0!==s){if(void 0!==t.width&&void 0!==t.height&&(s.width=t.width,s.height=t.height,o=!0),void 0!==t.rotateAngle&&(s.rotateAngle=t.rotateAngle),!r||s instanceof Cb||s.refreshTextElement(),e instanceof ym&&void 0!==t.segmentAngle&&(s.rotateAngle=e.rotateAngle),e instanceof vm&&void 0!==t.offset){var a=t.offset;o=!0;var l=void 0!==a.x?a.x:e.offset.x,h=void 0!==a.y?a.y:e.offset.y;s.setOffsetWithRespectToBounds(l,h,"Fraction"),s.relativeMode="Point"}else e instanceof ym&&(void 0!==t.offset||void 0!==t.segmentAngle)&&n.updateAnnotation(e,n.intermediatePoints,n.wrapper.bounds,s);if(e instanceof ym&&t.displacement&&(void 0===t.displacement.x&&void 0===t.displacement.y||(o=!0,n.updateAnnotation(e,n.intermediatePoints,n.wrapper.bounds,s))),void 0!==t.margin&&(o=!0,void 0!==t.margin.bottom&&(s.margin.bottom=t.margin.bottom),void 0!==t.margin.top&&(s.margin.top=t.margin.top),void 0!==t.margin.left&&(s.margin.left=t.margin.left),void 0!==t.margin.right&&(s.margin.right=t.margin.right)),(o||r)&&(s.width=e.width||n.width,e.template&&(s.width=s.width||s.actualSize.width,s.height=e.height||n.height||s.actualSize.height)),void 0!==t.horizontalAlignment&&(s.horizontalAlignment=t.horizontalAlignment,o=!0),void 0!==t.verticalAlignment&&(s.verticalAlignment=t.verticalAlignment,o=!0),void 0!==t.visibility&&(s.visible=!(!i.visible||!t.visibility)),void 0!==t.constraints){s.constraints&Sg.Select&&!(t.constraints&Sg.Select)&&Jr(this,n,!1,s),s.constraints=t.constraints}void 0!==t.style&&qo(t.style,s),void 0!==t.hyperlink&&Go(t.hyperlink,s,e),this.updateAnnotationContent(t,o,s,n,e,i),!0===o&&(s.measure(new Qu(s.width,s.height)),s.arrange(s.desiredSize)),s instanceof Cb||s.refreshTextElement()}},e.prototype.updatefixedUserHandleContent=function(t,e,i,n,r,o){void 0!==t&&this.updateConnectorfixedUserHandleWrapper(i,n,r,o)},e.prototype.updateConnectorfixedUserHandleWrapper=function(t,e,i,n){for(var r=0,o=this.views;r<o.length;r++){var s=o[r];na(t.id+"_groupElement",s),na(t.id+"_html_element",s)}if(e instanceof ES){var a=e.wrapper.children[0],l=new Zu(a.offsetX-a.width/2,a.offsetY-a.height/2,a.width,a.height);t=e.getfixedUserHandle(e.fixedUserHandles[e.fixedUserHandles.length-1],e.intermediatePoints,l)}for(var h=0;h<n.children.length;h++)t.id===n.children[parseInt(h.toString(),10)].id&&n.children.splice(h,1,t)},e.prototype.updateAnnotationContent=function(t,e,i,n,r,o){void 0!==t.content&&(i&&(!0,"UmlActivity"===n.shape.type&&(f()&&"StructuredNode"===n.shape.umlActivityShape||!f()&&"StructuredNode"===n.shape.shape)?i.content="<<"+t.content+">>":i.content=t.content),i instanceof Cb&&this.updateAnnotationWrapper(i,n,r,o)),void 0!==t.template&&(i.content=t.template,this.updateAnnotationWrapper(i,n,r,o))},e.prototype.updateAnnotationWrapper=function(t,e,i,n){for(var r=0,o=this.views;r<o.length;r++){var s=o[r];na(t.id+"_groupElement",s),na(t.id+"_html_element",s)}if(e instanceof Pw)t=e.initAnnotationWrapper(i,this.element.id);else if(e instanceof ES){var a=e.wrapper.children[0],l=new Zu(a.offsetX-a.width/2,a.offsetY-a.height/2,a.width,a.height);t=e.getAnnotationElement(e.annotations[e.annotations.length-1],e.intermediatePoints,l,this.getDescription,this.element.id)}for(var h=0;h<n.children.length;h++)t.id===n.children[parseInt(h.toString(),10)].id&&n.children.splice(h,1,t)},e.prototype.updateNodefixedUserHandle=function(t,e,i,n){var r=!1,o=this.getWrapper(i,e.id);if(void 0!==o){if(void 0!==t.width&&(o.actualSize.width=t.width,r=!0),void 0!==t.height&&(o.height=t.height,r=!0),e instanceof Tb&&void 0!==t.offset){var s=t.offset;r=!0;var a=void 0!==s.x?s.x:e.offset.x,l=void 0!==s.y?s.y:e.offset.y;o.setOffsetWithRespectToBounds(a,l,"Fraction"),o.relativeMode="Point"}void 0!==t.margin&&(r=!0,void 0!==t.margin.bottom&&(o.margin.bottom=t.margin.bottom),void 0!==t.margin.top&&(o.margin.top=t.margin.top),void 0!==t.margin.left&&(o.margin.left=t.margin.left),void 0!==t.margin.right&&(o.margin.right=t.margin.right)),void 0!==t.visibility&&(o.visible=t.visibility),void 0!==t.fill&&(o.style.fill=t.fill),void 0!==t.handleStrokeColor&&(o.style.strokeColor=t.handleStrokeColor),void 0!==t.handleStrokeWidth&&(o.style.strokeWidth=t.handleStrokeWidth),void 0!==t.cornerRadius&&(o.cornerRadius=t.cornerRadius),this.updatefixedUserHandleWrapper(o,n,e,i),!0===r&&(o.measure(new Qu(o.width,o.height)),o.arrange(o.desiredSize))}},e.prototype.updatefixedUserHandleWrapper=function(t,e,i,n){for(var r=0,o=this.views;r<o.length;r++){var s=o[r];na(t.id+"_groupElement",s),na(t.id+"_html_element",s)}e instanceof Pw&&(t=e.initfixedUserHandles(i));for(var a=0;a<n.children.length;a++)t.id===n.children[parseInt(a.toString(),10)].id&&n.children.splice(a,1,t)},e.prototype.updatePort=function(t,e,i){var n=!1,r=this.getWrapper(i,e.id);if(void 0!==r){if(void 0!==t.offset){n=!0;var o=void 0!==t.offset.x?t.offset.x:e.offset.x,s=void 0!==t.offset.y?t.offset.y:e.offset.y;r.setOffsetWithRespectToBounds(o,s,"Fraction"),r.relativeMode="Point"}if(void 0!==t.width&&(n=!0,r.width=t.width),void 0!==t.height&&(n=!0,r.height=t.height),void 0!==t.visibility&&(r.visible=!(!i.visible||!hs(e,gg.Visible))),void 0!==t.margin&&(n=!0,void 0!==t.margin.bottom&&(r.margin.bottom=t.margin.bottom),void 0!==t.margin.top&&(r.margin.top=t.margin.top),void 0!==t.margin.right&&(r.margin.right=t.margin.right),void 0!==t.margin.left&&(r.margin.left=t.margin.left)),void 0!==t.horizontalAlignment&&(n=!0,r.horizontalAlignment=t.horizontalAlignment),void 0!==t.verticalAlignment&&(n=!0,r.verticalAlignment=t.verticalAlignment),void 0!==t.style&&(void 0!==t.style.fill&&(r.style.fill=t.style.fill),void 0!==t.style.opacity&&(r.style.opacity=t.style.opacity),void 0!==t.style.strokeColor&&(r.style.strokeColor=t.style.strokeColor),void 0!==t.style.strokeWidth&&(r.style.strokeWidth=t.style.strokeWidth),void 0!==t.style.strokeDashArray&&(r.style.strokeDashArray=t.style.strokeDashArray)),void 0!==t.shape&&r){var a=Vt(t.shape);r.data=a,r.canMeasurePath=!0}void 0!==t.pathData&&(r.data=String(t.pathData),n=!0),!0===n&&(r.measure(new Qu(r.width,r.height)),r.arrange(r.desiredSize))}},e.prototype.updateIcon=function(t){var e=this.getWrapper(t.wrapper,"icon_content"),i=this.diagramActions&Og.Render?this.element.id:void 0;if(e){if("SVG"===this.mode){var n=Us(t.wrapper.id+"_icon_content",i);if(n){var r=Us(n.id+"_rect",i),o=Us(n.id+"_shape",i),s=Us(o.id+"_native_element",i);s&&s.parentNode.removeChild(s),o.parentNode.removeChild(o),r.parentNode.removeChild(r),n.parentNode.removeChild(n)}}var a=t.wrapper.children.indexOf(e);t.wrapper.children.splice(a,1)}var l=this.getPortContainer(t);t.initIcons(this.getDescription,this.layout,l,this.element.id)},e.prototype.getPortContainer=function(t){if(t.children)for(var e=0;e<t.wrapper.children.length;e++)if(t.wrapper.children[parseInt(e.toString(),10)].id===t.id+"group_container")return t.wrapper.children[parseInt(e.toString(),10)];return t.wrapper},e.prototype.updateTooltip=function(t,e){void 0!==e.tooltip.content&&(t.tooltip.content=e.tooltip.content),void 0!==e.tooltip.position&&(t.tooltip.position=e.tooltip.position),void 0!==e.tooltip.height&&(t.tooltip.height=e.tooltip.height),void 0!==e.tooltip.width&&(t.tooltip.width=e.tooltip.width),void 0!==e.tooltip.showTipPointer&&(t.tooltip.showTipPointer=e.tooltip.showTipPointer),void 0!==e.tooltip.relativeMode&&(t.tooltip.relativeMode=e.tooltip.relativeMode)},e.prototype.updateQuad=function(t){this.spatialSearch.updateQuad(t.wrapper)&&!this.preventDiagramUpdate&&this.updatePage()},e.prototype.removeFromAQuad=function(t){if(t.children)for(var e=void 0,i=t.children,n=0;n<i.length;n++)(e=this.nameTable[i[parseInt(n.toString(),10)]])&&this.removeFromAQuad(e);this.spatialSearch.removeFromAQuad(t.wrapper);this.spatialSearch.updateBounds(t.wrapper)&&!this.preventDiagramUpdate&&this.updatePage()},e.prototype.updateGroupSize=function(t){var e;t.parentId&&(e=this.nameTable[t.parentId])&&(e.parentId?this.updateGroupSize(e):(e.wrapper.measure(new Qu),e.wrapper.arrange(e.wrapper.desiredSize),this.updateGroupOffset(e),this.updateDiagramObject(e)))},e.prototype.updatePage=function(){if(this.diagramActions&Og.Render&&!(this.diagramActions&Og.DragUsingMouse)){this.scroller.updateScrollOffsets(),this.scroller.setSize();for(var t=0,i=this.views;t<i.length;t++){var n=i[t],r=this.views[""+n];r instanceof e||r.updateView(r)}}this.diagramActions&Og.DragUsingMouse&&this.renderPageBreaks()},e.prototype.protectPropertyChange=function(t){this.isProtectedOnChange=t},e.prototype.getProtectPropertyChangeValue=function(){return this.isProtectedOnChange},e.prototype.enableServerDataBinding=function(t){f()&&(this.allowServerDataBinding=t,t&&(this.bulkChanges={}))},e.prototype.updateShadow=function(t,e){void 0!==e.angle&&(t.angle=e.angle),void 0!==e.color&&(t.color=e.color),void 0!==e.distance&&(t.distance=e.distance),void 0!==e.opacity&&(t.opacity=e.opacity)},e.prototype.updateMargin=function(t,e){void 0!==e.margin.top&&(t.margin.top=e.margin.top),void 0!==e.margin.bottom&&(t.margin.bottom=e.margin.bottom),void 0!==e.margin.left&&(t.margin.left=e.margin.left),void 0!==e.margin.right&&(t.margin.right=e.margin.right)},e.prototype.removePreviewChildren=function(t){if(t.children&&t.children.length&&t.shape&&"SwimLane"===t.shape.type){for(var e=0;e<t.children.length;e++){var i=t.children[parseInt(e.toString(),10)],n=this.nodes.indexOf(this.nameTable[""+i]);n>=0&&this.nodes.splice(n,1),delete this.nameTable[""+i]}var r=this.nodes.indexOf(this.nameTable[this.currentSymbol.id]);r>=0&&this.nodes.splice(r,1)}},e.prototype.selectDragedNode=function(t,e,i){this.currentSymbol=t,"SVG"!==this.mode&&this.refreshDiagramLayer(),this.commandHandler.oldSelectedObjects=WS(this),this.commandHandler.select(t),this.commandHandler.updateBlazorSelector(),this.eventHandler.mouseDown(e.event),this.eventHandler.mouseMove(e.event,e),this.preventDiagramUpdate=!1,this.updatePage(),i.style.opacity="0"},e.prototype.initDroppables=function(){var t,e,i=this,n={},r={},o="selectedSymbols";this.droppable=new lu(this.element),this.droppable.over=function(s){if(0!==i.previousSelectedObjects.length||i.currentSymbol||(i.previousSelectedObjects=i.commandHandler.getSelectedObject()),i.commandHandler.PreventConnectorSplit=!0,i.currentSymbol)s.event.touches&&s.event.touches.length&&i.eventHandler.mouseMove(s.event,s.event.touches);else{var a=null;if(!s.dragData&&"drag"===s.name){var l=document.getElementsByClassName("e-dragclone")[0];l&&(a=l)}if(s.dragData||a){var h=void 0,c=void 0;document.getElementById(i.element.id+"content").focus();var d=i.eventHandler.getMousePosition(s.event),p=void 0,u=a||s.dragData.helper,g=u.getAttribute("paletteId"),m=void 0,v=void 0,y=void 0,b=void 0;if(!g&&s.dragData){var S={source:null,element:h,cancel:!1,diagram:i,dragData:s.dragData.draggedElement.ej2_instances[0].dragData,dragItem:h};i.triggerEvent(jg.dragEnter,S);var w=void 0,I=void 0;if(S.dragItem){if(S.dragItem.sourcePoint&&S.dragItem.targetPoint?I=new ES(i,"connectors",S.dragItem,!0):w=new Pw(i,"nodes",S.dragItem,!0),h=w||I,i.initObject(h,void 0,void 0,!0),i.enterObject=h,i.enterTable=r,h instanceof Pw)w.offsetX=d.x+5+w.width*w.pivot.x,w.offsetY=d.y+w.height*w.pivot.y;else if(h instanceof ES){var x=Zu.toBounds([h.sourcePoint,h.targetPoint]),M=d.x-x.left,C=d.y-x.top;h.sourcePoint.x+=M,h.sourcePoint.y+=C,h.targetPoint.x+=M,h.targetPoint.y+=C}i.preventDiagramUpdate=!0,i.currentSymbol=h,"SVG"!==i.mode&&i.refreshDiagramLayer(),i.selectDragedNode(h,s,u),delete i.enterObject,delete i.enterTable,i.droppable[""+o]=u,i.allowServerDataBinding=!0}}if(g){var N=document.getElementById(g).ej2_instances[0];i.droppable.sourceElement=N;if(N){var E=N[""+o];i.allowServerDataBinding=!1,p=fa(N[""+o]),n=N.childTable;var D=E.wrapper.children[0].children[0];if(b=Ns(N,p,D),N[""+o]instanceof Pw){"TextAnnotation"===E.shape.shape?(p.offsetX=d.x+11+b.width*p.pivot.x,p.offsetY=d.y+11+b.height*p.pivot.y):(p.offsetX=d.x+5+b.width*p.pivot.x,p.offsetY=d.y+b.height*p.pivot.y);"Bpmn"===(w=new Pw(i,"nodes",p,!0)).shape.type&&w.shape.activity.subProcess.processes&&w.shape.activity.subProcess.processes.length&&(w.shape.activity.subProcess.processes=[]),m=w.dragSize,v=w.previewSize,y=N.symbolDragSize;var T=N.symbolPreview;if(w.width=m.width||y.width||v.width||T.width||w.width,w.height=m.height||y.height||v.height||T.height||w.height,"SwimLane"===w.shape.type){if(i.diagramActions|=Og.PreventHistory,w.shape.isLane){w.children=[],t={id:"header"+da()},"Horizontal"===w.shape.orientation?(t.width=w.shape.lanes[0].header.width,t.height=w.shape.lanes[0].height):(t.width=w.shape.lanes[0].width,t.height=w.shape.lanes[0].header.height),t.style=w.shape.lanes[0].header.style,t.offsetX=d.x+5+t.width/2,t.offsetY=d.y+t.height/2,i.diagramActions|=Og.PreventCollectionChangeOnDragOver,t=i.add(t),e={id:"body"+da()},"Horizontal"===w.shape.orientation?(e.width=w.shape.lanes[0].width-t.width,e.height=w.shape.lanes[0].height,e.offsetX=d.x+5+(w.shape.lanes[0].header.width+e.width/2),e.offsetY=d.y+e.height/2):(e.width=w.shape.lanes[0].width,e.height=w.shape.lanes[0].height-t.height,e.offsetX=d.x+5+e.width/2,e.offsetY=d.y+(w.shape.lanes[0].header.height+e.height/2)),e.style=w.shape.lanes[0].style,e=i.add(e);var O={id:"group"+da(),children:[t.id,e.id]};O.shape=w.shape,O.width=w.shape.lanes[0].width,O.height=w.shape.lanes[0].height,O.previewSize=w.previewSize,O.dragSize=w.dragSize,O.addInfo=w.addInfo,w=i.add(O),i.diagramActions&=~Og.PreventCollectionChangeOnDragOver}i.diagramActions&=~Og.PreventHistory}if(w.shape.isPhase&&((c="Horizontal"===w.shape.orientation)?(w.offsetX=d.x+5+(w.width||D.actualSize.width)/2,w.offsetY=d.y,w.shape.data="M20,"+w.height/2+" L"+(w.width-20)+","+w.height/2+"z",w.height=1):(w.offsetX=d.x+5,w.offsetY=d.y+(w.height||D.actualSize.height)/2,w.shape.data="M"+w.width/2+",20 L"+w.width/2+","+(w.height-20)+"z",w.width=1)),h=w,p.children){var L=p;r=i.getChildren(L,{},n),fs(L,-L.offsetX,-L.offsetY,r,!0,i)}}else if(N[""+o]instanceof ES){h=new ES(i,"connectors",p,!0);var A=Zu.toBounds([h.sourcePoint,h.targetPoint]),z=d.x-A.left,k=d.y-A.top;h.sourcePoint.x+=z,h.sourcePoint.y+=k,h.targetPoint.x+=z,h.targetPoint.y+=k}h.shape.isLane||(h.id+=da());S={source:N,element:h,cancel:!1,diagram:i,dragData:null,dragItem:h};if(f()&&(S=i.getBlazorDragEventArgs(S)),i.enterObject=h,i.enterTable=r,i.triggerEvent(jg.dragEnter,S),h instanceof Pw&&"SwimLane"===h.shape.type&&h.shape.isLane){var j=S.element,P=j.shape.lanes[0];c="Horizontal"===j.shape.orientation;var R=i.nameTable[h.children[0]],B=i.nameTable[h.children[1]];m=h.dragSize,v=h.previewSize,y=N.symbolDragSize,P.width=m.width||y.width||v.width||P.width,P.height=m.height||y.height||v.height||P.height,c?(t.width=P.header.width,t.height=P.height,e.width=P.width-t.width,e.height=P.height,e.offsetX=d.x+5+(P.header.width+B.width/2),e.offsetY=d.y+B.height/2):(t.width=P.width,t.height=P.header.height,e.width=P.width,e.height=P.height-t.height,e.offsetX=d.x+5+B.width/2,e.offsetY=d.y+(P.header.height+B.height/2)),t.offsetX=d.x+5+R.width/2,t.offsetY=d.y+R.height/2,h.width=P.width,h.height=P.height}h instanceof Pw&&h.shape.isPhase&&(c?h.height=1:h.width=1),i.activeLayer.lock||S.cancel||(i.preventDiagramUpdate=!0,h.children&&i.findChild(h,r),i.preventDiagramUpdate=!0,-1!==h.zIndex&&(h.zIndex=-1),i.initObject(h,void 0,void 0,!0),i.selectDragedNode(h,s,u)),delete i.enterObject,delete i.enterTable}i.droppable[""+o]=u,i.allowServerDataBinding=!0}}}},this.droppable.drop=function(t){return _I(i,void 0,void 0,function(){var e,i,n,r,o,s,a,l,h,c,d,p,u;return FI(this,function(g){switch(g.label){case 0:return this.allowServerDataBinding=!1,e="sourceElement",this.currentSymbol?(n=!1,o=this.currentSymbol instanceof ES,t.event.touches&&this.eventHandler.mouseUp(t.event),l=void 0,l={source:this.droppable[""+e],element:this.currentSymbol,target:this.eventHandler.hoverNode||this.eventHandler.lastObjectUnderMouse||this,cancel:!1,position:{x:this.currentSymbol.wrapper.offsetX,y:this.currentSymbol.wrapper.offsetY}},f()?(l={source:xs(this.droppable[""+e]),element:VS(this.currentSymbol)===ES?{connector:xs(this.currentSymbol)}:{node:xs(this.currentSymbol)},cancel:!1,target:{},position:{x:this.currentSymbol.wrapper.offsetX,y:this.currentSymbol.wrapper.offsetY}},this.getDropEventArgs(l),[4,this.triggerEvent(jg.drop,l)]):[3,2]):[3,4];case 1:return l=g.sent()||l,[3,3];case 2:this.commandHandler.PreventConnectorSplit=!1,this.triggerEvent(jg.drop,l),g.label=3;case 3:return c="id",h=fa(this.currentSymbol),h.hasTarget=this.currentSymbol.hasTarget,this.removeFromAQuad(this.currentSymbol),this.removeObjectsFromLayer(this.nameTable[this.currentSymbol.id]),this.removeElements(this.currentSymbol),(this.currentSymbol.shape.isLane||this.currentSymbol.shape.isPhase)&&this.removeChildInNodes(this.currentSymbol),l.cancel&&_o(this.currentSymbol,this),this.currentSymbol.shape.isPhase&&(n=!0,r=this.currentSymbol.shape.orientation),this.removePreviewChildren(this.currentSymbol),delete this.nameTable[this.currentSymbol.id],this.currentSymbol=null,this.protectPropertyChange(!0),l.cancel?this.clearSelectorLayer():(this.startGroupAction(),h&&(h.shape.isLane||n)&&(n&&(h.shape.isPhase=n,h.shape.orientation=r),this.eventHandler.addSwimLaneObject(h)),"Bpmn"===h.shape.type&&h.shape.annotation&&h.hasTarget&&(s=h.shape.annotation.nodeId,h.shape.annotation.id=h.id,this.addTextAnnotation(h.shape.annotation,this.nameTable[""+s]),h.nodeId=""),h.shape.isLane||n||(h.children&&this.addChildNodes(h),l.target&&l.target instanceof Pw&&!o&&Ur(this,l.target)&&Hn(l.target)?Fr(this,l.target,h):("Bezier"===h.type&&h.segments.length>0&&(h.segments=[]),i=this.add(h,!0)),(h||i)&&Vn(this)&&this.select([this.nameTable[h[""+c]]],!1,this.previousSelectedObjects),l.target&&l.target instanceof ES&&!0===this.enableConnectorSplit&&this.nameTable[h[""+c]]instanceof Pw&&(this.commandHandler.connectorSplit(this.nameTable[h[""+c]],l.target),this.commandHandler.PreventConnectorSplit=!1))),this.protectPropertyChange(!1),a=this.nameTable[h[""+c]],h.hasTarget&&(h.nodeId=h.hasTarget,this.remove(h)),this.bpmnModule&&a instanceof Pw&&h.processId&&(a.processId=h.processId,this.bpmnModule.dropBPMNchild(this.nameTable[a.processId],a,this)),l.cancel||this.endGroupAction(),"SVG"!==this.mode&&this.refreshDiagramLayer(),delete this.droppable[""+e],[3,5];case 4:l={source:xs(t.droppedElement),element:void 0,target:xs(this.eventHandler.hoverNode||this.eventHandler.lastObjectUnderMouse||this),cancel:!1,position:void 0},f()&&(l={source:xs(t.droppedElement),element:void 0,cancel:!1,position:void 0,target:{}},this.getDropEventArgs(l)),this.triggerEvent(jg.drop,l),h=void 0,c="id",g.label=5;case 5:if(d="selectedSymbols",this.droppable[""+d]&&this.droppable[""+d].parentNode)O(this.droppable[""+d]);else for(p=document.getElementsByClassName("e-dragclone"),u=0;u<p.length;u++)p[parseInt(u.toString(),10)].remove();return this.allowServerDataBinding=!0,this.previousSelectedObjects=[],[2]}})})},this.droppable.out=function(t){if("touchmove"===t.evt.type&&i.eventHandler.mouseLeave(t.evt),i.currentSymbol&&!i.eventHandler.focus){i.unSelect(i.currentSymbol),i.removeFromAQuad(i.currentSymbol),"SVG"!==i.mode&&"Native"===i.currentSymbol.shape.type&&i.removeElements(i.currentSymbol),i.removeObjectsFromLayer(i.nameTable[i.currentSymbol.id]),i.removePreviewChildren(i.currentSymbol),delete i.nameTable[i.currentSymbol.id];var e={element:xs(i.currentSymbol),diagram:i};f()&&(e=i.getBlazorDragLeaveEventArgs(e)),i.triggerEvent(jg.dragLeave,e),"SVG"!==i.mode?i.refreshDiagramLayer():i.removeElements(i.currentSymbol),i.currentSymbol=null;i.droppable.selectedSymbols.style.opacity="1";delete i.droppable.sourceElement,i.diagramRenderer.rendererActions=i.removeConstraints(i.diagramRenderer.rendererActions,Lg.DrawSelectorBorder),i.previousSelectedObject&&i.select(i.previousSelectedObject,i.previousSelectedObject.length>1),i.previousSelectedObject=null}}},e.prototype.getBlazorDragLeaveEventArgs=function(t){return t={diagramId:this.element.id,element:VS(t.element)===ES?{connector:xs(t.element)}:{node:xs(t.element)}}},e.prototype.getDropEventArgs=function(t){if(this.eventHandler.lastObjectUnderMouse||this.eventHandler.hoverNode){var e=this.eventHandler.lastObjectUnderMouse||this.eventHandler.hoverNode;t.target=VS(e)===ES?{connector:xs(e)}:{node:xs(e)}}else t.target.diagramId=this.element.id},e.prototype.removeChildInNodes=function(t){if(t){if(t.children)for(var e=0;e<t.children.length;e++)this.removeChildInNodes(this.nameTable[t.children[parseInt(e.toString(),10)]]);var i=this.nodes.indexOf(t);-1!==i&&this.nodes.splice(i,1)}},e.prototype.getBlazorDragEventArgs=function(t){return t={source:xs(t.source),element:VS(t.element)===ES?{connector:xs(t.element)}:{node:xs(t.element)},cancel:t.cancel,diagramId:this.element.id}},e.prototype.findChild=function(t,e){for(var i,n,r=0;r<t.children.length;r++)(i=e[t.children[parseInt(r.toString(),10)]])&&(i.children&&this.findChild(i,e),i.id=i.id+da(),e[i.id]=i,t.children[parseInt(r.toString(),10)]=i.id,n=new Pw(this,"nodes",i,!0),this.initObject(n,void 0,void 0,!0))},e.prototype.getChildren=function(t,e,i){for(var n,r=0;r<t.children.length;r++)(n=i[t.children[parseInt(r.toString(),10)]])&&(n.children&&(e=this.getChildren(n,e,i)),e[n.id]=fa(n));return e},e.prototype.addChildNodes=function(t){for(var e,i=0;i<t.children.length;i++)(e=this.nameTable[t.children[parseInt(i.toString(),10)]])&&(e.children&&this.addChildNodes(e),this.add(e,!0))},e.prototype.moveNode=function(t){for(var e,i=this.commandHandler.getObjectLayer(t.id),n=i.zIndex,r=i.objects.length,o=0;o<this.layers.length;o++)n===this.layers[parseInt(o.toString(),10)].zIndex&&(e=this.layers[o+1]);if(r>1)this.commandHandler.moveSvgNode(t.id,i.objects[r-2]),this.commandHandler.moveSvgNode(i.objects[r-2],t.id);else if(e){var s=this.commandHandler.getLayer(this.layerZIndexTable[e.zIndex]).objects[0];s?(this.commandHandler.moveSvgNode(t.id,s),this.commandHandler.updateNativeNodeIndex(t.id,s)):this.moveObjectsUp(t,i)}else this.moveObjectsUp(t,i)},e.prototype.moveObjectsUp=function(t,e){for(var i,n=this.layers.length-1;n>=0;n--)if(i=this.layers[parseInt(n.toString(),10)],e.id!==i.id){var r=this.commandHandler.getLayer(this.layerZIndexTable[i.zIndex]).objects[i.objects.length-1];if(r){this.commandHandler.moveSvgNode(t.id,r),this.commandHandler.moveSvgNode(r,t.id);break}}},e.prototype.insertData=function(t){return this.crudOperation(t,"create",this.getNewUpdateNodes("New"))},e.prototype.updateData=function(t){return this.crudOperation(t,"update",this.getNewUpdateNodes("Update"))},e.prototype.removeData=function(t){return this.crudOperation(t,"destroy",this.getDeletedNodes())},e.prototype.crudOperation=function(t,e,i){if(t){var n=this.parameterMap(t,!(t instanceof ES));if(n){var r=t instanceof ES?this.dataSourceSettings.connectionDataSource.crudAction[""+e]:this.dataSourceSettings.crudAction[""+e];this.raiseAjaxPost(JSON.stringify(n),r)}return n}var o=i;return this.processCrudCollection(o,this.dataSourceSettings.crudAction[""+e],this.dataSourceSettings.connectionDataSource.crudAction[""+e]),o},e.prototype.processCrudCollection=function(t,e,i){if(t.nodes){var n=[],r=void 0;for(r=0;r<t.nodes.length;r++)n.push(this.parameterMap(t.nodes[parseInt(r.toString(),10)],!0));n&&n.length>0&&this.raiseAjaxPost(JSON.stringify(n),e)}if(t.connectors){n=[],r=void 0;for(r=0;r<t.connectors.length;r++)n.push(this.parameterMap(t.connectors[parseInt(r.toString(),10)],!1));n&&n.length>0&&this.raiseAjaxPost(JSON.stringify(n),i)}},e.prototype.parameterMap=function(t,e){var i,n={},r=e?this.dataSourceSettings:this.dataSourceSettings.connectionDataSource;if(r.id&&(n[r.id]=t.id),r.sourcePointX&&r.sourcePointY&&(n[r.sourcePointX]=t.sourcePoint.x,n[r.sourcePointY]=t.sourcePoint.y),r.targetPointX&&r.targetPointY&&(n[r.targetPointX]=t.targetPoint.x,n[r.targetPointY]=t.targetPoint.y),r.sourceID&&(n[r.sourceID]=t.sourceID),r.targetID&&(n[r.targetID]=t.targetID),r.crudAction&&r.crudAction.customFields&&r.crudAction.customFields.length>0)for(i=0;i<r.crudAction.customFields.length;i++)n[r.crudAction.customFields[parseInt(i.toString(),10)]]=t[r.crudAction.customFields[parseInt(i.toString(),10)]];return n},e.prototype.getNewUpdateNodes=function(t){var e=[],i=[];for(var n in this.nameTable){var r=this.nameTable[""+n];r.status===t&&(r&&r instanceof ES?(r.status="None",i.push(r)):(r.status="None",e.push(r)))}return{nodes:e,connectors:i}},e.prototype.getDeletedNodes=function(){var t,e=[],i=[];for(t=0;t<this.crudDeleteNodes.length;t++){var n=this.crudDeleteNodes[parseInt(t.toString(),10)];n&&n.segments?i.push(n):n&&e.push(n)}return this.crudDeleteNodes=[],{nodes:e,connectors:i}},e.prototype.raiseAjaxPost=function(t,e){var i=new gp(e,"POST",!0,"application/json"),n=JSON.stringify(JSON.parse(t));i.send(n).then(),i.onSuccess=function(t){}},e.prototype.getHiddenItems=function(t){if(this.contextMenuModule){this.contextMenuModule.hiddenItems=[];for(var e=0,i=t.items;e<i.length;e++){var n=i[e];if(this.contextMenuModule.ensureItems(n,t.event),n.items&&n.items.length)for(var r=0,o=n.items;r<o.length;r++){var s=o[r];this.contextMenuModule.ensureItems(s,t.event)}}return this.contextMenuModule.hiddenItems}return[]},VI([W("100%")],e.prototype,"width",void 0),VI([W(!1)],e.prototype,"enableConnectorSplit",void 0),VI([W("SVG")],e.prototype,"mode",void 0),VI([W("100%")],e.prototype,"height",void 0),VI([W("Rhombus")],e.prototype,"segmentThumbShape",void 0),VI([Q({},US)],e.prototype,"contextMenuSettings",void 0),VI([W(Mg.Default)],e.prototype,"constraints",void 0),VI([W(Cg.Default)],e.prototype,"tool",void 0),VI([W("Top")],e.prototype,"bridgeDirection",void 0),VI([W("transparent")],e.prototype,"backgroundColor",void 0),VI([Q({},iI)],e.prototype,"snapSettings",void 0),VI([Q({},sI)],e.prototype,"rulerSettings",void 0),VI([Q({},Zw)],e.prototype,"pageSettings",void 0),VI([Q({},zI)],e.prototype,"serializationSettings",void 0),VI([q([],Pw)],e.prototype,"nodes",void 0),VI([W()],e.prototype,"drawingObject",void 0),VI([q([],ES)],e.prototype,"connectors",void 0),VI([W([])],e.prototype,"basicElements",void 0),VI([Q({},fb)],e.prototype,"tooltip",void 0),VI([Q({},gI)],e.prototype,"dataSourceSettings",void 0),VI([W()],e.prototype,"addInfo",void 0),VI([W()],e.prototype,"historyManager",void 0),VI([W()],e.prototype,"nodeTemplate",void 0),VI([W()],e.prototype,"annotationTemplate",void 0),VI([W()],e.prototype,"userHandleTemplate",void 0),VI([W()],e.prototype,"getNodeDefaults",void 0),VI([W()],e.prototype,"nodeDefaults",void 0),VI([W()],e.prototype,"getConnectorDefaults",void 0),VI([W()],e.prototype,"connectorDefaults",void 0),VI([W()],e.prototype,"setNodeTemplate",void 0),VI([W()],e.prototype,"getDescription",void 0),VI([W()],e.prototype,"getCustomProperty",void 0),VI([W()],e.prototype,"getCustomTool",void 0),VI([W()],e.prototype,"getCustomCursor",void 0),VI([q([],PI)],e.prototype,"customCursor",void 0),VI([W()],e.prototype,"updateSelection",void 0),VI([Q({},HI)],e.prototype,"diagramSettings",void 0),VI([Q({},_w)],e.prototype,"selectedItems",void 0),VI([Q({},$w)],e.prototype,"scrollSettings",void 0),VI([Q({},vI)],e.prototype,"layout",void 0),VI([Q({},HS)],e.prototype,"commandManager",void 0),VI([Z()],e.prototype,"dataLoaded",void 0),VI([Z()],e.prototype,"dragEnter",void 0),VI([Z()],e.prototype,"dragLeave",void 0),VI([Z()],e.prototype,"dragOver",void 0),VI([Z()],e.prototype,"click",void 0),VI([Z()],e.prototype,"historyChange",void 0),VI([Z()],e.prototype,"historyStateChange",void 0),VI([Z()],e.prototype,"doubleClick",void 0),VI([Z()],e.prototype,"textEdit",void 0),VI([Z()],e.prototype,"scrollChange",void 0),VI([Z()],e.prototype,"mouseWheel",void 0),VI([Z()],e.prototype,"selectionChange",void 0),VI([Z()],e.prototype,"sizeChange",void 0),VI([Z()],e.prototype,"connectionChange",void 0),VI([Z()],e.prototype,"sourcePointChange",void 0),VI([Z()],e.prototype,"targetPointChange",void 0),VI([Z()],e.prototype,"propertyChange",void 0),VI([Z()],e.prototype,"positionChange",void 0),VI([Z()],e.prototype,"keyUp",void 0),VI([Z()],e.prototype,"keyDown",void 0),VI([Z()],e.prototype,"animationComplete",void 0),VI([Z()],e.prototype,"rotateChange",void 0),VI([Z()],e.prototype,"collectionChange",void 0),VI([Z()],e.prototype,"fixedUserHandleClick",void 0),VI([Z()],e.prototype,"onUserHandleMouseDown",void 0),VI([Z()],e.prototype,"onUserHandleMouseUp",void 0),VI([Z()],e.prototype,"onUserHandleMouseEnter",void 0),VI([Z()],e.prototype,"onUserHandleMouseLeave",void 0),VI([Z()],e.prototype,"segmentCollectionChange",void 0),VI([Z()],e.prototype,"onImageLoad",void 0),VI([Z()],e.prototype,"expandStateChange",void 0),VI([Z()],e.prototype,"created",void 0),VI([Z()],e.prototype,"mouseEnter",void 0),VI([Z()],e.prototype,"mouseLeave",void 0),VI([Z()],e.prototype,"mouseOver",void 0),VI([Z()],e.prototype,"elementDraw",void 0),VI([Z()],e.prototype,"contextMenuOpen",void 0),VI([Z()],e.prototype,"contextMenuBeforeItemRender",void 0),VI([Z()],e.prototype,"contextMenuClick",void 0),VI([Z()],e.prototype,"commandExecute",void 0),VI([q([],MI)],e.prototype,"layers",void 0),VI([Z()],e.prototype,"drop",void 0),VI([Z()],e.prototype,"segmentChange",void 0),e}(Kp),WI=function(){function t(t){this.diagram=t}return t.prototype.exportDiagram=function(t){var e,i,n,r="data",o=[],s=t.margin||{},a=t&&t.region?t.region:"Content";f()&&(0===t.Mode?t.mode="Download":t.mode="Data");var l=t&&t.mode?t.mode:"Download",h=this.getDiagramBounds(a,t);t.bounds&&(i=!0,h.x=t.bounds.x?t.bounds.x:h.x,h.y=t.bounds.y?t.bounds.y:h.y,h.width=t.bounds.width||h.width,h.height=t.bounds.height||h.height),s={top:void 0!==s.top?s.top:25,bottom:void 0!==s.bottom?s.bottom:25,right:void 0!==s.right?s.right:25,left:void 0!==s.left?s.left:25};this.diagram.nodes;"PageSettings"!==a&&(h.x-=s.left,h.y-=s.top,h.width+=s.left+s.right,h.height+=s.top+s.bottom);var c=t.fileName||"diagram";if("SVG"!==t.format){if(null!==(r=this.setCanvas(t,h,s,l,i,a,c)))return r}else{e=t.format,t.bounds=h,t.margin=s;var d=n=this.diagramAsSvg(t,s);if("Data"===l){if(f()&&"SVG"===t.format){return(new XMLSerializer).serializeToString(d)}return n}var p=(new XMLSerializer).serializeToString(d);o.push(p)}if("Download"===l&&null!==r)for(var u=0;u<o.length;u++){var g=new Blob([o[parseInt(u.toString(),10)]],{type:"application/octet-stream"});if("msie"===Np.info.name)window.navigator.msSaveOrOpenBlob(g,c+"."+e);else{var m=Ks("a",{download:c+"."+e}),v=URL.createObjectURL(g);m.href=v;var y=document.createEvent("MouseEvents");y.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),m.dispatchEvent(y)}}return null},t.prototype.setCanvas=function(t,e,i,n,r,o,s){var a;t.bounds=e,t.region=o;this.setScaleValueforCanvas(t,e);var l,h=this.diagramAsCanvas({bounds:e,margin:i,region:o,scaleX:t.scaleX,scaleY:t.scaleY,scaleOffsetX:t.scaleOffsetX,scaleOffsetY:t.scaleOffsetY},r);return l=a="JPG"===t.format?h.toDataURL("image/jpeg"):"BMP"===t.format?h.toDataURL("image/bmp"):h.toDataURL(),"Data"===n?a:(this.canvasMultiplePage(t,h,i,l,s),null)},t.prototype.canvasMultiplePage=function(t,e,i,n,r){var o=this,s=[],a=n.substring(n.indexOf(":")+1,n.indexOf(";")),l=a.substring(a.indexOf("/")+1),h=(l="jpeg"===l?void 0:l.toUpperCase())||"JPG";if(t.multiplePage){if(t.pageHeight=t.pageHeight?t.pageHeight:this.diagram.pageSettings.height,t.pageWidth=t.pageWidth?t.pageWidth:this.diagram.pageSettings.width,t.pageHeight=t.pageHeight?t.pageHeight:e.width,t.pageWidth=t.pageWidth?t.pageWidth:e.height,i=t.margin||{},t.pageOrientation&&("Landscape"===t.pageOrientation&&t.pageHeight>t.pageWidth||"Portrait"===t.pageOrientation&&t.pageWidth>t.pageHeight)){var c=t.pageWidth;t.pageWidth=t.pageHeight,t.pageHeight=c}t.margin={top:isNaN(i.top)?0:i.top,bottom:isNaN(i.bottom)?0:i.bottom,left:isNaN(i.left)?0:i.left,right:isNaN(i.right)?0:i.right};var d=Ks("img",{id:this.diagram.element.id+"_printImage",src:n});d.onload=function(){s=o.getMultipleImage(d,t,!0),o.exportImage(s,r,h,n)}}else s=[n],this.exportImage(s,r,h,n)},t.prototype.exportImage=function(t,e,i,n){for(var r=[],o=t instanceof HTMLElement?0:t.length,s=0;s<o;s++){for(var a=t[parseInt(s.toString(),10)].replace(/^data:[a-z]*;,/,"").split(","),l=atob(a[1]),h=new ArrayBuffer(l.length),c=new Uint8Array(h),d=0;d<l.length;d++)c[parseInt(d.toString(),10)]=l.charCodeAt(d);r.push(h)}for(var p=function(t){var n=new Blob([r[parseInt(t.toString(),10)]],{type:"application/octet-stream"});if("msie"===Np.info.name)window.navigator.msSaveOrOpenBlob(n,e+"."+i);else{var o=Ks("a",{download:e+"."+i}),s=URL.createObjectURL(n);o.href=s;var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),setTimeout(function(){o.dispatchEvent(a)},5*(t+1))}},u=0;u<r.length;u++)p(u)},t.prototype.getObjectsBound=function(t){for(var e,i=0,n=this.diagram.nodes;i<n.length;i++){var r=n[i];r.visible&&(("SVG"===t.format||r instanceof lm||r instanceof Cb)&&("SVG"!==t.format||r instanceof Cb)||(e=e?e.uniteRect(r.wrapper.outerBounds):r.wrapper.outerBounds))}for(var o=0,s=this.diagram.connectors;o<s.length;o++){var a=s[o];a.visible&&(e=e?e.uniteRect(a.wrapper.outerBounds):a.wrapper.outerBounds)}return e||new Zu(0,0,0,0)},t.prototype.getDiagramBounds=function(t,e){var i=this.getObjectsBound(e),n=i.left,r=i.top,o=i.right-i.left,s=i.bottom-i.top;"Content"!==t&&(this.diagram.pageSettings&&this.diagram.pageSettings.multiplePage?(n=i.left,r=i.top,this.diagram.pageSettings.width&&(n=Math.floor(n/this.diagram.pageSettings.width)*this.diagram.pageSettings.width,o=Math.ceil(i.right/this.diagram.pageSettings.width)*this.diagram.pageSettings.width-n),this.diagram.pageSettings.height&&(r=Math.floor(r/this.diagram.pageSettings.height)*this.diagram.pageSettings.height,s=Math.ceil(i.bottom/this.diagram.pageSettings.height)*this.diagram.pageSettings.height-r),0===i.width&&null!==this.diagram.pageSettings.width&&(o=this.diagram.pageSettings.width),0===i.height&&null!==this.diagram.pageSettings.height&&(s=this.diagram.pageSettings.height)):(this.diagram.pageSettings.width&&(n=0,o=this.diagram.pageSettings.width),this.diagram.pageSettings.height&&(r=0,s=this.diagram.pageSettings.height)));var a=new Zu;return a.x=n,a.y=r,a.width=o,a.height=s,a},t.prototype.setScaleValueforCanvas=function(t,e){t.scaleX=1,t.scaleY=1,t.scaleOffsetX=0,t.scaleOffsetY=0,t.pageHeight=t.pageHeight||this.diagram.pageSettings.height,t.pageWidth=t.pageWidth||this.diagram.pageSettings.width;var i=t.pageOrientation||this.diagram.pageSettings.orientation;if(i||(i="Portrait"),"Portrait"===i){if(t.pageWidth>t.pageHeight){var n=t.pageHeight;t.pageHeight=t.pageWidth,t.pageWidth=n}}else if(t.pageHeight>t.pageWidth){n=t.pageWidth;t.pageWidth=t.pageHeight,t.pageHeight=n}t.pageWidth&&t.pageHeight&&!t.multiplePage&&(t.stretch="Meet");var r=t.pageHeight||e.height,o=t.pageWidth||e.width;"Stretch"!==t.stretch&&"Meet"!==t.stretch&&"Slice"!==t.stretch||(t.scaleX=o/e.width,t.scaleY=r/e.height,"Meet"===t.stretch?(t.scaleX=t.scaleY=Math.min(t.scaleX,t.scaleY),t.scaleOffsetY=(t.pageHeight-e.height*t.scaleX)/2,t.scaleOffsetX=(t.pageWidth-e.width*t.scaleX)/2):"Slice"===t.stretch&&(t.scaleX=t.scaleY=Math.max(t.scaleX,t.scaleY)),e.width=o,e.height=r),e.x*=t.scaleX,e.y*=t.scaleY},t.prototype.diagramAsSvg=function(t,e){var i=this.diagram.createSvg(this.diagram.element.id+"_diagram_svg",t.bounds.width,t.bounds.height);document.body.appendChild(i);var n=Js("g",{id:this.diagram.element.id+"_pageBackground"}),r=t&&t.region?t.region:"Content",o=this.getDiagramBounds(r,t),s=o.x,a=o.y,l=o.width,h=o.height;i.appendChild(n);var c={x:String(s),y:String(a),width:String(l),height:String(h)};oa(n,c),this.setTransform(n,t.bounds,e);var d=document.getElementById(this.diagram.element.id+"gradient_pattern");d&&i.appendChild(d),c={x:String(s),y:String(a),width:String(l+e.left+e.right),height:String(h+e.top+e.bottom)};var p=document.getElementById(this.diagram.element.id+"_backgroundImageLayer").cloneNode(!0);oa(p,c),i.appendChild(p),this.setTransform(p,o,e);var u=document.getElementById(this.diagram.element.id+"_backgroundLayerrect").cloneNode(!0);if(oa(u,c),i.appendChild(u),this.setTransform(u,o,e),"SVG"===this.diagram.mode){var g=void 0,m=void 0,f=Hs(this.diagram.element.id);for(i.appendChild(f.getElementById(this.diagram.diagramLayer.id).cloneNode(!0)),m=0;m<i.childNodes.length;m++)(g=i.childNodes[parseInt(m.toString(),10)]).id===this.diagram.element.id+"_diagramLayer"&&this.setTransform(g,o,e)}else{n=Js("g",{id:this.diagram.element.id+"_diagramLayer"}),i.appendChild(n),this.setTransform(n,t.bounds,e);var v=new Ww("",null,!0),y=$s(this.diagram.element.id);this.diagram.renderDiagramElements(i,v,y,!1)}return document.body.removeChild(i),i},t.prototype.setTransform=function(t,e,i){t.setAttribute("transform","translate("+(-e.x+i.left)+", "+(-e.y+i.top)+")")},t.prototype.diagramAsCanvas=function(t,e){var i=t.bounds,n=t.margin,r=t&&t.region?t.region:"Content",o=this.getDiagramBounds(r,t),s=this.diagram.pageSettings.background.color,a=Fw.createCanvas(this.diagram.element.id+"_diagram",t.bounds.width,t.bounds.height),l=a.getContext("2d");l.translate(-i.x,-i.y),l.save(),l.fillStyle="transparent"===this.diagram.pageSettings.background.color?"white":this.diagram.pageSettings.background.color,i="Content"===r?o:i,l.fillRect(i.x,i.y,i.width,i.height);var h=this.diagram.pageSettings.background;if(h&&h.source){o=this.getDiagramBounds(r,t);var c=new Image;c.src=h.source;var d=o.width/c.width,p=o.height/c.height,u=o.x,g=o.y,m=o.width,f=o.height,v=this.isImageExportable(h);if("None"!==h.scale&&"None"!==h.align){var y="Meet"===h.scale?Math.min(d,p):Math.max(d,p);m=y*c.width,f=y*c.height,h.align.indexOf("xmid")>-1?u+=(o.width-m)/2:h.align.indexOf("xmax")>-1&&(u=u+o.width-m),h.align.indexOf("ymid")>-1?g+=(o.height-f)/2:h.align.indexOf("ymax")>-1&&(g=g+o.height-f),"none"!==this.diagram.pageSettings.background.color&&"transparent"!==this.diagram.pageSettings.background.color||(l.fillStyle="white",l.fillRect(o.x*t.scaleX,o.y*t.scaleY,o.width*t.scaleX,o.height*t.scaleY)),v&&l.drawImage(c,u,g,y*c.width,y*c.height)}else v&&l.drawImage(c,u,g,o.width,o.height)}else l.fillStyle="transparent"===s?"white":s,l.fillRect(o.x*t.scaleX-n.left,o.y*t.scaleY-n.top,o.width*t.scaleX+n.left+n.right,t.scaleY*o.height+n.top+n.bottom);var b=this.diagram.pageSettings.background.color,S=this.diagram.pageSettings.width;S&&(l.strokeStyle="none"===b?"transparent":b,l.lineWidth=S,l.strokeRect(o.x*t.scaleX,o.y*t.scaleY,o.width*t.scaleX,o.height*t.scaleY)),l.restore();var w=$s(this.diagram.element.id),I=new Ww("",null,!1);return this.updateObjectValue(t.scaleX,t.scaleOffsetX,t.scaleOffsetY,!0),this.diagram.renderDiagramElements(a,I,w,!1,!0),this.updateObjectValue(t.scaleX,t.scaleOffsetX,t.scaleOffsetY,!1),a},t.prototype.updateWrapper=function(t,e,i,n,r){if(t&&t.length>0)for(var o=0;o<t.length;o++)t[parseInt(o.toString(),10)].children&&this.updateWrapper(t[parseInt(o.toString(),10)].children,e,i,n,r),t[parseInt(o.toString(),10)].exportScaleValue.x=e,t[parseInt(o.toString(),10)].exportScaleValue.y=e,t[parseInt(o.toString(),10)].exportScaleOffset.x=i,t[parseInt(o.toString(),10)].exportScaleOffset.y=n,t[parseInt(o.toString(),10)].isExport=r},t.prototype.scaleGradientValue=function(t,e,i){if(t.style.gradient.stops.length>0){var n=t.style.gradient;t.style.gradient instanceof lg?(n.x1=i?n.x1*e:n.x1/e,n.y1=i?n.y1*e:n.y1/e,n.x2=i?n.x2*e:n.x2/e,n.y2=i?n.y2*e:n.y2/e):(n.fx=i?n.fx*e:n.fx/e,n.fy=i?n.fy*e:n.fy/e,n.cx=i?n.cx*e:n.cx/e,n.cy=i?n.cy*e:n.cy/e,n.r=i?n.r*e:n.r/e)}},t.prototype.updateObjectValue=function(t,e,i,n){for(var r,o=0;o<this.diagram.nodes.length;o++)r=this.diagram.nodes[parseInt(o.toString(),10)].wrapper,this.scaleGradientValue(this.diagram.nodes[parseInt(o.toString(),10)],t,n),this.updateWrapper(r.children,t,e,i,n),r.exportScaleValue.x=t,r.exportScaleValue.y=t,r.exportScaleOffset.x=e,r.exportScaleOffset.y=i,r.isExport=n;for(var s=0;s<this.diagram.connectors.length;s++){r=this.diagram.connectors[parseInt(s.toString(),10)].wrapper;for(var a=0;a<r.children.length;a++)r.children[parseInt(a.toString(),10)].isExport=n,n&&(r.children[parseInt(a.toString(),10)].exportScaleValue.x=t,r.children[parseInt(a.toString(),10)].exportScaleValue.y=t,r.children[parseInt(a.toString(),10)].exportScaleOffset.x=e,r.children[parseInt(a.toString(),10)].exportScaleOffset.y=i)}},t.prototype.isImageExportable=function(t){var e,i=!0;if(t.source)try{var n=(e=Fw.createCanvas(this.diagram.element.id+"temp_canvas",100,100)).getContext("2d");n.save();var r=new Image;r.src=t.source,n.drawImage(r,0,0,100,100),n.restore(),e.toDataURL()}catch(t){i=!1}return i},t.prototype.getPrintCanvasStyle=function(t,e){var i=0,n=0,r=new Qu;if(i=t.width,n=t.height,(e.pageHeight||e.pageWidth)&&(n=e.pageHeight?e.pageHeight:n,i=e.pageWidth?e.pageWidth:i),e.pageOrientation&&("Landscape"===e.pageOrientation&&n>i||"Portrait"===e.pageOrientation&&i>n)){var o=i;i=n,n=o}return r.height=n,r.width=i,r},t.prototype.getMultipleImage=function(t,e,i){var n=[],r=Ks("div",{}),o=this.getPrintCanvasStyle(t,e),s=e.margin,a=s.left,l=s.top,h=s.right,c=s.bottom,d=0,p=o.width+d,u=o.height+0,g=0,m=0;if(e&&e.multiplePage){r.style.height="auto",r.style.width="auto";var f=t.height,v=t.width,y=0,b=0,S=void 0,w=0,I=0,x=void 0,M=void 0;do{do{w=o.width,I=o.height,g+o.width>=v&&(w=v-g),m+o.height>=f&&(I=f-m),(x=(M=Fw.createCanvas(this.diagram.element.id+"_multiplePrint",o.width,o.height)).getContext("2d")).drawImage(t,d+g+a,0+m+l,w-h-a,I-c-l,0+a,0+l,w-h-a,I-c-l),g+o.width>=v&&(g-=g-v),S=M.toDataURL(),x.restore(),g+=p,i?n.push(S):this.printImage(r,S,y+""+b,p+"px;",u+"px;"),y++}while(g<v);b++,y=d=g=0,m+o.height>=f&&(m-=m-f),m+=u}while(m<f)}else{var C=this.getPrintCanvasStyle(t,e),N=C.width,E=C.height;(x=(M=Fw.createCanvas(this.diagram.element.id+"_diagram",N,E)).getContext("2d")).drawImage(t,0+a,0+l,t.width-(h+a),t.height-(l+c),0+a,0+l,N-(h+a),E-(l+c));S=M.toDataURL();x.restore(),i?n.push(S):this.printImage(r,S,0)}return i?n:r},t.prototype.printImage=function(t,e,i,n,r){var o={class:"e-diagram-print-page",style:"width:"+n+"height:"+r},s=Ks("img",o),a=Ks("div",o);aa(s,o={id:this.diagram.element.id+"_multiplePrint_img"+i,style:"float:left",src:e}),a.appendChild(s),t.appendChild(a)},t.prototype.print=function(t){t.mode="Data";var e=this.exportDiagram(t);this.printImages(e,t)},t.prototype.printImages=function(t,e){var i=this,n={id:this.diagram.element.id+"_printImage",src:t};e.margin={top:0,bottom:0,right:0,left:0};var r=Ks("img",n);r.onload=function(){var t=i.getMultipleImage(r,e),n=window.open("");null!=n&&t instanceof HTMLElement&&(n.document.write("<html><head><style> body{margin:0px;}  @media print { .e-diagram-print-page{page-break-after: left; }.e-diagram-print-page:last-child {page-break-after: avoid;}}</style><title></title></head>"),n.addEventListener("load",function(t){setTimeout(function(){n.window.print()},3e3)}),n.document.write("<center>"+t.innerHTML+"</center>"),n.document.close())}},t.prototype.getContent=function(t){var e=this.diagram.snapSettings.constraints;this.diagram.snapSettings.constraints=this.diagram.snapSettings.constraints&~mg.ShowLines,this.diagram.dataBind(),this.diagram.clearSelection(),t=t||document.styleSheets;for(var i="",n=0;n<t.length;n++)(t[parseInt(n.toString(),10)].href||"string"==typeof t[parseInt(n.toString(),10)])&&(i+="<link href='"+(t[parseInt(n.toString(),10)].href||t[parseInt(n.toString(),10)])+"' rel='stylesheet' />");var r=document.getElementById(this.diagram.element.id+"content").innerHTML;return r=i+"<body style=\"margin: 0px; padding: 0px\"><div style='margin-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;'>"+r+"</div></body>",r=r.replace(/ transform: t/g," -webkit-transform: t"),this.diagram.snapSettings.constraints=e,this.diagram.dataBind(),r},t.prototype.getDiagramContent=function(t){if(1===this.diagram.scroller.currentZoom){var e=this.getContent(t);return Ms()?e.replace("url("+location.protocol+"//"+location.host+location.pathname+"#diagram_pattern ","url(#diagram_pattern)"):e}var i=document.getElementById(this.diagram.element.id+"content"),n=i.scrollLeft,r=i.scrollTop,o=this.diagram.scrollSettings.currentZoom,s=this.diagram.scroller.horizontalOffset,a=this.diagram.scroller.verticalOffset,l=Number(String(this.diagram.width).split("%")[0])?i.clientWidth:Number(String(this.diagram.width).split("px")[0]),h=Number(String(this.diagram.height).split("%")[0])?i.clientHeight:Number(String(this.diagram.height).split("px")[0]),c=this.getDiagramBounds("",{});this.diagram.scroller.zoom(1/o);var d=0,p=0;d=c.x,p=c.y,this.diagram.scroller.transform={tx:-d,ty:-p,scale:this.diagram.scroller.currentZoom},this.diagram.scroller.horizontalOffset=-d,this.diagram.scroller.verticalOffset=-p,this.diagram.scroller.setSize(),this.diagram.setSize(c.width,c.height);e=this.getContent(t);return this.diagram.setSize(l,h),this.diagram.scroller.zoom(o/this.diagram.scrollSettings.currentZoom),this.diagram.dataBind(),n||r?this.diagram.setOffset(n,r):(this.diagram.scroller.transform={tx:s/this.diagram.scroller.currentZoom,ty:a/this.diagram.scroller.currentZoom,scale:this.diagram.scroller.currentZoom},this.diagram.scroller.horizontalOffset=s,this.diagram.scroller.verticalOffset=a),this.diagram.renderSelector(!1),Ms()?e.replace("url("+location.protocol+"//"+location.host+location.pathname+"#diagram_pattern ","url(#diagram_pattern)"):e},t.prototype.exportImages=function(t,e){var i=this,n=e&&e.region?e.region:"Content",r=e.margin||{};r={top:isNaN(r.top)?0:r.top,bottom:isNaN(r.bottom)?0:r.bottom,left:isNaN(r.left)?0:r.left,right:isNaN(r.right)?0:r.right};var o=this.getDiagramBounds(n,{});e.bounds&&(o.x=isNaN(e.bounds.x)?o.x:e.bounds.x,o.y=isNaN(e.bounds.y)?o.y:e.bounds.y,o.width=e.bounds.width||o.width,o.height=e.bounds.height||o.height);var s=document.createElement("img");aa(s,{src:t});var a=this;s.onload=function(){var n=Fw.createCanvas(a.diagram.element.id+"innerImage",o.width+(r.left+r.right),o.height+(r.top+r.bottom)),l=n.getContext("2d");if(l.fillStyle=a.diagram.pageSettings.background.color,l.fillRect(0,0,o.width+(r.left+r.right),o.height+(r.top+r.bottom)),l.drawImage(s,0,0,o.width,o.height,r.left,r.top,o.width,o.height),t=n.toDataURL(),e.printOptions)a.printImages(t,e);else{l.restore();var h=e.fileName||"diagram";i.canvasMultiplePage(e,n,r,t,h)}}},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"PrintandExport"},t}(),QI=function(){function t(t){return this.subQuery=null,this.isChild=!1,this.distincts=[],this.queries=[],this.key="",this.fKey="","string"==typeof t?this.fromTable=t:t&&t instanceof Array&&(this.lookups=t),this.expands=[],this.sortedColumns=[],this.groupedColumns=[],this.subQuery=null,this.isChild=!1,this.params=[],this.lazyLoad=[],this}return t.prototype.setKey=function(t){return this.key=t,this},t.prototype.using=function(t){return this.dataManager=t,this},t.prototype.execute=function(t,e,i,n){return(t=t||this.dataManager)?t.executeQuery(this,e,i,n):GI.throwError('Query - execute() : dataManager needs to be is set using "using" function or should be passed as argument')},t.prototype.executeLocal=function(t){return(t=t||this.dataManager)?t.executeLocal(this):GI.throwError('Query - executeLocal() : dataManager needs to be is set using "using" function or should be passed as argument')},t.prototype.clone=function(){var e=new t;return e.queries=this.queries.slice(0),e.key=this.key,e.isChild=this.isChild,e.dataManager=this.dataManager,e.fromTable=this.fromTable,e.params=this.params.slice(0),e.expands=this.expands.slice(0),e.sortedColumns=this.sortedColumns.slice(0),e.groupedColumns=this.groupedColumns.slice(0),e.subQuerySelector=this.subQuerySelector,e.subQuery=this.subQuery,e.fKey=this.fKey,e.isCountRequired=this.isCountRequired,e.distincts=this.distincts.slice(0),e.lazyLoad=this.lazyLoad.slice(0),e},t.prototype.from=function(t){return this.fromTable=t,this},t.prototype.addParams=function(t,e){return"function"==typeof e?this.params.push({key:t,fn:e}):this.params.push({key:t,value:e}),this},t.prototype.distinct=function(t){return this.distincts="string"==typeof t?[].slice.call([t],0):t.slice(0),this},t.prototype.expand=function(t){return this.expands="string"==typeof t?[].slice.call([t],0):t.slice(0),this},t.prototype.where=function(t,e,i,n,r,o){e=e?e.toLowerCase():null;var s=null;return"string"==typeof t?s=new XI(t,e,i,n,r,o):t instanceof XI&&(s=t),this.queries.push({fn:"onWhere",e:s}),this},t.prototype.search=function(t,e,i,n,r){"string"==typeof e&&(e=[e]),i&&"none"!==i||(i="contains");var o=GI.fnOperators[i];return this.queries.push({fn:"onSearch",e:{fieldNames:e,operator:i,searchKey:t,ignoreCase:n,ignoreAccent:r,comparer:o}}),this},t.prototype.sortBy=function(t,e,i){return this.sortByForeignKey(t,e,i)},t.prototype.sortByForeignKey=function(e,i,n,r){var o,s,a=h(r)?"ascending":r;if("string"==typeof e&&GI.endsWith(e.toLowerCase()," desc")&&(e=e.replace(/ desc$/i,""),i="descending"),i&&"string"!=typeof i||(a=i?i.toLowerCase():"ascending",i=GI.fnSort(i)),n){o=t.filterQueries(this.queries,"onSortBy");for(var l=0;l<o.length;l++)if("string"==typeof(s=o[l].e.fieldName)){if(s===e)return this}else if(s instanceof Array)for(var c=0;c<s.length;c++)if(s[c]===e||e.toLowerCase()===s[c]+" desc")return this}return this.queries.push({fn:"onSortBy",e:{fieldName:e,comparer:i,direction:a}}),this},t.prototype.sortByDesc=function(t){return this.sortBy(t,"descending")},t.prototype.group=function(t,e,i){return this.sortBy(t,null,!0),this.queries.push({fn:"onGroup",e:{fieldName:t,comparer:e||null,format:i||null}}),this},t.prototype.page=function(t,e){return this.queries.push({fn:"onPage",e:{pageIndex:t,pageSize:e}}),this},t.prototype.range=function(t,e){return this.queries.push({fn:"onRange",e:{start:t,end:e}}),this},t.prototype.take=function(t){return this.queries.push({fn:"onTake",e:{nos:t}}),this},t.prototype.skip=function(t){return this.queries.push({fn:"onSkip",e:{nos:t}}),this},t.prototype.select=function(t){return"string"==typeof t&&(t=[].slice.call([t],0)),this.queries.push({fn:"onSelect",e:{fieldNames:t}}),this},t.prototype.hierarchy=function(t,e){return this.subQuerySelector=e,this.subQuery=t,this},t.prototype.foreignKey=function(t){return this.fKey=t,this},t.prototype.requiresCount=function(){return this.isCountRequired=!0,this},t.prototype.aggregate=function(t,e){return this.queries.push({fn:"onAggregates",e:{field:e,type:t}}),this},t.filterQueries=function(t,e){return t.filter(function(t){return t.fn===e})},t.filterQueryLists=function(t,e){for(var i=t.filter(function(t){return-1!==e.indexOf(t.fn)}),n={},r=0;r<i.length;r++)n[i[r].fn]||(n[i[r].fn]=i[r].e);return n},t}(),XI=function(){function t(e,i,n,r,o,s){return void 0===r&&(r=!1),this.ignoreAccent=!1,this.isComplex=!1,"string"==typeof e?(this.field=e,this.operator=i.toLowerCase(),this.value=n,this.matchCase=s,this.ignoreCase=r,this.ignoreAccent=o,this.isComplex=!1,this.comparer=GI.fnOperators.processOperator(this.operator)):(e instanceof t&&n instanceof t||n instanceof Array)&&(this.isComplex=!0,this.condition=i.toLowerCase(),this.predicates=[e],this.matchCase=e.matchCase,this.ignoreCase=e.ignoreCase,this.ignoreAccent=e.ignoreAccent,n instanceof Array?[].push.apply(this.predicates,n):this.predicates.push(n)),this}return t.and=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.combinePredicates([].slice.call(e,0),"and")},t.prototype.and=function(e,i,n,r,o){return t.combine(this,e,i,n,"and",r,o)},t.or=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.combinePredicates([].slice.call(e,0),"or")},t.prototype.or=function(e,i,n,r,o){return t.combine(this,e,i,n,"or",r,o)},t.ornot=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.combinePredicates([].slice.call(e,0),"or not")},t.prototype.ornot=function(e,i,n,r,o){return t.combine(this,e,i,n,"ornot",r,o)},t.andnot=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.combinePredicates([].slice.call(e,0),"and not")},t.prototype.andnot=function(e,i,n,r,o){return t.combine(this,e,i,n,"andnot",r,o)},t.fromJson=function(t){if(t instanceof Array){for(var e=[],i=0,n=t.length;i<n;i++)e.push(this.fromJSONData(t[i]));return e}var r=t;return this.fromJSONData(r)},t.prototype.validate=function(t){var e,i,n=this.predicates?this.predicates:[];if(!this.isComplex&&this.comparer)return this.condition&&-1!==this.condition.indexOf("not")?(this.condition=""===this.condition.split("not")[0]?void 0:this.condition.split("not")[0],!this.comparer.call(this,GI.getObject(this.field,t),this.value,this.ignoreCase,this.ignoreAccent)):this.comparer.call(this,GI.getObject(this.field,t),this.value,this.ignoreCase,this.ignoreAccent);i=this.condition&&-1!==this.condition.indexOf("not")?-1!==this.condition.indexOf("and"):"and"===this.condition;for(var r=0;r<n.length;r++)if(r>0&&this.condition&&-1!==this.condition.indexOf("not")&&(n[r].condition=n[r].condition?n[r].condition+"not":"not"),e=n[r].validate(t),i){if(!e)return!1}else if(e)return!0;return i},t.prototype.toJson=function(){var t,e;if(this.isComplex){t=[],e=this.predicates;for(var i=0;i<e.length;i++)t.push(e[i].toJson())}return{isComplex:this.isComplex,field:this.field,operator:this.operator,value:this.value,ignoreCase:this.ignoreCase,ignoreAccent:this.ignoreAccent,condition:this.condition,predicates:t,matchCase:this.matchCase}},t.combinePredicates=function(e,i){if(1===e.length){if(!(e[0]instanceof Array))return e[0];e=e[0]}return new t(e[0],i,e.slice(1))},t.combine=function(e,i,n,r,o,s,a){return i instanceof t?t[o](e,i):"string"==typeof i?t[o](e,new t(i,n,r,s,a)):GI.throwError("Predicate - "+o+" : invalid arguments")},t.fromJSONData=function(e){for(var i=e.predicates||[],n=i.length,r=[],o=0;o<n;o++)r.push(this.fromJSONData(i[o]));return e.isComplex?new t(r[0],e.condition,r.slice(1)):new t(e.field,e.operator,e.value,e.ignoreCase,e.ignoreAccent)},t}(),qI={GroupGuid:"{271bbba0-1ee7}"},GI=function(){function t(){}return t.getValue=function(t,e){return"function"==typeof t?t.call(e||{}):t},t.endsWith=function(t,e){return t.slice&&t.slice(-e.length)===e},t.notEndsWith=function(t,e){return t.slice&&t.slice(-e.length)!==e},t.startsWith=function(t,e){return t.slice(0,e.length)===e},t.notStartsWith=function(t,e){return t.slice(0,e.length)!==e},t.wildCard=function(t,e){var i;if(-1!==e.indexOf("*")){"*"!==e.charAt(0)&&(e="^"+e),"*"!==e.charAt(e.length-1)&&(e+="$"),i=e.split("*");for(var n=0;n<i.length;n++)-1===i[n].indexOf(".")?i[n]=i[n]+".*":i[n]=i[n]+"*";e=i.join("")}-1===e.indexOf("%3f")&&-1===e.indexOf("?")||(e=(-1!==e.indexOf("%3f")?e.split("%3f"):e.split("?")).join("."));return new RegExp(e,"g").test(t)},t.like=function(e,i){return-1!==i.indexOf("%")&&("%"===i.charAt(0)&&i.lastIndexOf("%")<2?(i=i.substring(1,i.length),t.startsWith(t.toLowerCase(e),t.toLowerCase(i))):"%"===i.charAt(i.length-1)&&i.indexOf("%")>i.length-3?(i=i.substring(0,i.length-1),t.endsWith(t.toLowerCase(e),t.toLowerCase(i))):i.lastIndexOf("%")!==i.indexOf("%")&&i.lastIndexOf("%")>i.indexOf("%")+1?(i=i.substring(i.indexOf("%")+1,i.lastIndexOf("%")),-1!==e.indexOf(i)):-1!==e.indexOf(i))},t.fnSort=function(e){return"ascending"===(e=e?t.toLowerCase(e):"ascending")?this.fnAscending:this.fnDescending},t.fnAscending=function(t,e){return h(t)&&h(e)?-1:null===e||void 0===e?-1:"string"==typeof t?t.localeCompare(e):null===t||void 0===t?1:t-e},t.fnDescending=function(t,e){return h(t)&&h(e)?-1:null===e||void 0===e?1:"string"==typeof t?-1*t.localeCompare(e):null===t||void 0===t?-1:e-t},t.extractFields=function(t,e){for(var i={},n=0;n<e.length;n++)i=this.setValue(e[n],this.getObject(e[n],t),i);return i},t.select=function(t,e){for(var i=[],n=0;n<t.length;n++)i.push(this.extractFields(t[n],e));return i},t.group=function(e,i,n,r,o,s,a){r=r||1;var l=e;if(l.GroupGuid===qI.GroupGuid){for(var c=function(t){if(h(o))l[t].items=d.group(l[t].items,i,n,l.level+1,null,s,a),l[t].count=l[t].items.length;else{var e=-1,r=o.filter(function(e){return e.key===l[t].key});e=o.indexOf(r[0]),l[t].items=d.group(l[t].items,i,n,l.level+1,o[e].items,s,a),l[t].count=o[e].count}},d=this,p=0;p<l.length;p++)c(p);return l.childLevels+=1,l}var u={},g=[];g.GroupGuid=qI.GroupGuid,g.level=r,g.childLevels=0,g.records=l;for(var m=function(t){var e=f.getVal(l,t,i);if(h(s)||(e=s(e,i)),!u[e]&&(u[e]={key:e,count:0,items:[],aggregates:{},field:i},g.push(u[e]),!h(o))){var r=o.filter(function(t){return t.key===u[e].key});u[e].count=r[0].count}u[e].count=h(o)?u[e].count+=1:u[e].count,(!a||a&&n.length)&&u[e].items.push(l[t])},f=this,v=0;v<l.length;v++)m(v);if(n&&n.length){var y=function(e){for(var i={},r=void 0,s=n,a=0;a<n.length;a++)if(r=t.aggregates[n[a].type],h(o))r&&(i[s[a].field+" - "+s[a].type]=r(g[e].items,s[a].field));else{var l=o.filter(function(t){return t.key===g[e].key});r&&(i[s[a].field+" - "+s[a].type]=r(l[0].items,s[a].field))}g[e].aggregates=i};for(v=0;v<g.length;v++)y(v)}if(a&&g.length&&n.length)for(v=0;v<g.length;v++)g[v].items=[];return l.length&&g||l},t.buildHierarchy=function(t,e,i,n,r){var o,s={};for(n.result&&(n=n.result),n.GroupGuid&&this.throwError("DataManager: Do not have support Grouping in hierarchy"),o=0;o<n.length;o++){(s[a=this.getObject(t,n[o])]||(s[a]=[])).push(n[o])}for(o=0;o<i.length;o++){var a=this.getObject(r||t,i[o]);i[o][e]=s[a]}},t.getFieldList=function(t,e,i){if(void 0===i&&(i=""),void 0===e||null===e)return this.getFieldList(t,[],i);for(var n=t,r=0,o=Object.keys(t);r<o.length;r++){var s=o[r];"object"!=typeof n[s]||n[s]instanceof Array?e.push(i+s):this.getFieldList(n[s],e,i+s+".")}return e},t.getObject=function(t,e){if(!t)return e;if(e){if(-1===t.indexOf("."))return e[t];for(var i=e,n=t.split("."),r=0;r<n.length&&null!=i;r++)i=i[n[r]];return i}},t.setValue=function(t,e,i){var n,r,o=t.toString().split("."),s=i||{},a=s,l=o.length;for(n=0;n<l;n++)r=o[n],n+1===l?a[r]=void 0===e?void 0:e:h(a[r])&&(a[r]={}),a=a[r];return s},t.sort=function(t,e,i){if(t.length<=1)return t;var n=parseInt((t.length/2).toString(),10),r=t.slice(0,n),o=t.slice(n);return r=this.sort(r,e,i),o=this.sort(o,e,i),this.merge(r,o,e,i)},t.ignoreDiacritics=function(e){if("string"!=typeof e)return e;return e.split("").map(function(e){return e in t.diacritics?t.diacritics[e]:e}).join("")},t.merge=function(t,e,i,n){for(var r,o=[];t.length>0||e.length>0;)r=t.length>0&&e.length>0?n?n(this.getVal(t,0,i),this.getVal(e,0,i),t[0],e[0])<=0?t:e:t[0][i]<t[0][i]?t:e:t.length>0?t:e,o.push(r.shift());return o},t.getVal=function(t,e,i){return i?this.getObject(i,t[e]):t[e]},t.toLowerCase=function(t){return t?"string"==typeof t?t.toLowerCase():t.toString():0===t||!1===t?t.toString():""},t.callAdaptorFunction=function(t,e,i,n){if(e in t){var r=t[e](i,n);h(r)||(i=r)}return i},t.getAddParams=function(e,i,n){var r={};return t.callAdaptorFunction(e,"addParams",{dm:i,query:n,params:n.params,reqParams:r}),r},t.isPlainObject=function(t){return!!t&&t.constructor===Object},t.isCors=function(){var t=null;try{t=new window.XMLHttpRequest}catch(t){}return!!t&&"withCredentials"in t},t.getGuid=function(t){var e;return(t||"")+"00000000-0000-4000-0000-000000000000".replace(/0/g,function(t,i){if("crypto"in window&&"getRandomValues"in crypto){var n=new Uint8Array(1);window.crypto.getRandomValues(n),e=n[0]%16|0}else e=16*Math.random()|0;return"0123456789abcdef"[19===i?3&e|8:e]})},t.isNull=function(t){return void 0===t||null===t},t.getItemFromComparer=function(e,i,n){var r,o,s,a=0,l="string"==typeof t.getVal(e,0,i);if(e.length)for(;h(r)&&a<e.length;)r=t.getVal(e,a,i),s=e[a++];for(;a<e.length;a++)h(o=t.getVal(e,a,i))||(l&&(r=+r,o=+o),n(r,o)>0&&(r=o,s=e[a]));return s},t.distinct=function(e,i,n){n=!h(n)&&n;var r,o=[],s={};return e.forEach(function(a,l){(r="object"==typeof e[l]?t.getVal(e,l,i):e[l])in s||(o.push(n?e[l]:r),s[r]=1)}),o},t.processData=function(t,e){var i=this.prepareQuery(t),n=new ox(e);t.requiresCounts&&i.requiresCount();var r=n.executeLocal(i),o={result:t.requiresCounts?r.result:r,count:r.count,aggregates:JSON.stringify(r.aggregates)};return t.requiresCounts?o:r},t.prepareQuery=function(e){var i=this,n=new QI;if(e.select&&n.select(e.select),e.where){t.parse.parseJson(e.where).filter(function(t){if(h(t.condition))n.where(t.field,t.operator,t.value,t.ignoreCase,t.ignoreAccent);else{var e=[];t.field?e.push(new XI(t.field,t.operator,t.value,t.ignoreCase,t.ignoreAccent)):e=e.concat(i.getPredicate(t.predicates)),"or"===t.condition?n.where(XI.or(e)):"and"===t.condition&&n.where(XI.and(e))}})}if(e.search){t.parse.parseJson(e.search).filter(function(t){return n.search(t.key,t.fields,t.operator,t.ignoreCase,t.ignoreAccent)})}return e.aggregates&&e.aggregates.filter(function(t){return n.aggregate(t.type,t.field)}),e.sorted&&e.sorted.filter(function(t){return n.sortBy(t.name,t.direction)}),e.skip&&n.skip(e.skip),e.take&&n.take(e.take),e.group&&e.group.filter(function(t){return n.group(t)}),n},t.getPredicate=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];if(n.field)e.push(new XI(n.field,n.operator,n.value,n.ignoreCase,n.ignoreAccent));else{for(var r=[],o=this.getPredicate(n.predicates),s=0,a=Object.keys(o);s<a.length;s++){var l=a[s];r.push(o[l])}e.push("or"===n.condition?XI.or(r):XI.and(r))}}return e},t.serverTimezoneOffset=null,t.timeZoneHandling=!0,t.throwError=function(t){try{throw new Error(t)}catch(t){throw t.message+"\n"+t.stack}},t.aggregates={sum:function(e,i){for(var n,r=0,o="number"!=typeof t.getVal(e,0,i),s=0;s<e.length;s++)n=t.getVal(e,s,i),isNaN(n)||null===n||(o&&(n=+n),r+=n);return r},average:function(e,i){return t.aggregates.sum(e,i)/e.length},min:function(e,i){var n;return"function"==typeof i&&(n=i,i=null),t.getObject(i,t.getItemFromComparer(e,i,n||t.fnAscending))},max:function(e,i){var n;return"function"==typeof i&&(n=i,i=null),t.getObject(i,t.getItemFromComparer(e,i,n||t.fnDescending))},truecount:function(t,e){return new ox(t).executeLocal((new QI).where(e,"equal",!0,!0)).length},falsecount:function(t,e){return new ox(t).executeLocal((new QI).where(e,"equal",!1,!0)).length},count:function(t,e){return t.length}},t.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},t.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne "},t.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof",doesnotendwith:"not endswith",doesnotstartwith:"not startswith",doesnotcontain:"not substringof",wildcard:"wildcard",like:"like"},t.odv4UniOperator={"$=":"endswith","^=":"startswith","*=":"contains",endswith:"endswith",startswith:"startswith",contains:"contains",doesnotendwith:"not endswith",doesnotstartwith:"not startswith",doesnotcontain:"not contains",wildcard:"wildcard",like:"like"},t.diacritics={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"},t.fnOperators={equal:function(e,i,n,r){return r&&(e=t.ignoreDiacritics(e),i=t.ignoreDiacritics(i)),n?t.toLowerCase(e)===t.toLowerCase(i):e===i},notequal:function(e,i,n,r){return r&&(e=t.ignoreDiacritics(e),i=t.ignoreDiacritics(i)),!t.fnOperators.equal(e,i,n)},lessthan:function(e,i,n){return n?t.toLowerCase(e)<t.toLowerCase(i):(h(e)&&(e=void 0),e<i)},greaterthan:function(e,i,n){return n?t.toLowerCase(e)>t.toLowerCase(i):e>i},lessthanorequal:function(e,i,n){return n?t.toLowerCase(e)<=t.toLowerCase(i):(h(e)&&(e=void 0),e<=i)},greaterthanorequal:function(e,i,n){return n?t.toLowerCase(e)>=t.toLowerCase(i):e>=i},contains:function(e,i,n,r){return r&&(e=t.ignoreDiacritics(e),i=t.ignoreDiacritics(i)),n?!h(e)&&!h(i)&&-1!==t.toLowerCase(e).indexOf(t.toLowerCase(i)):!h(e)&&!h(i)&&-1!==e.toString().indexOf(i)},doesnotcontain:function(e,i,n,r){return r&&(e=t.ignoreDiacritics(e),i=t.ignoreDiacritics(i)),n?!h(e)&&!h(i)&&-1===t.toLowerCase(e).indexOf(t.toLowerCase(i)):!h(e)&&!h(i)&&-1===e.toString().indexOf(i)},isnotnull:function(t){return null!==t&&void 0!==t},isnull:function(t){return null===t||void 0===t},startswith:function(e,i,n,r){return r&&(e=t.ignoreDiacritics(e),i=t.ignoreDiacritics(i)),n?e&&i&&t.startsWith(t.toLowerCase(e),t.toLowerCase(i)):e&&i&&t.startsWith(e,i)},doesnotstartwith:function(e,i,n,r){return r&&(e=t.ignoreDiacritics(e),i=t.ignoreDiacritics(i)),n?e&&i&&t.notStartsWith(t.toLowerCase(e),t.toLowerCase(i)):e&&i&&t.notStartsWith(e,i)},like:function(e,i,n,r){return r&&(e=t.ignoreDiacritics(e),i=t.ignoreDiacritics(i)),n?e&&i&&t.like(t.toLowerCase(e),t.toLowerCase(i)):e&&i&&t.like(e,i)},isempty:function(t){return void 0===t||""===t},isnotempty:function(t){return void 0!==t&&""!==t},wildcard:function(e,i,n,r){return r&&(e=t.ignoreDiacritics(e),i=t.ignoreDiacritics(i)),n?e&&i&&"object"!=typeof e&&t.wildCard(t.toLowerCase(e),t.toLowerCase(i)):e&&i&&t.wildCard(e,i)},endswith:function(e,i,n,r){return r&&(e=t.ignoreDiacritics(e),i=t.ignoreDiacritics(i)),n?e&&i&&t.endsWith(t.toLowerCase(e),t.toLowerCase(i)):e&&i&&t.endsWith(e,i)},doesnotendwith:function(e,i,n,r){return r&&(e=t.ignoreDiacritics(e),i=t.ignoreDiacritics(i)),n?e&&i&&t.notEndsWith(t.toLowerCase(e),t.toLowerCase(i)):e&&i&&t.notEndsWith(e,i)},processSymbols:function(e){var i=t.operatorSymbols[e];if(i){return t.fnOperators[i]}return t.throwError("Query - Process Operator : Invalid operator")},processOperator:function(e){var i=t.fnOperators[e];return i||t.fnOperators.processSymbols(e)}},t.parse={parseJson:function(e){return"string"==typeof e?e=JSON.parse(e,t.parse.jsonReviver):e instanceof Array?t.parse.iterateAndReviveArray(e):"object"==typeof e&&null!==e&&t.parse.iterateAndReviveJson(e),e},iterateAndReviveArray:function(e){for(var i=0;i<e.length;i++)"object"==typeof e[i]&&null!==e[i]?t.parse.iterateAndReviveJson(e[i]):"string"!=typeof e[i]||/^[\s]*\[|^[\s]*\{(.)+:|\"/g.test(e[i])?e[i]=t.parse.parseJson(e[i]):e[i]=t.parse.jsonReviver("",e[i])},iterateAndReviveJson:function(e){for(var i,n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];t.startsWith(o,"__")||("object"==typeof(i=e[o])?i instanceof Array?t.parse.iterateAndReviveArray(i):i&&t.parse.iterateAndReviveJson(i):e[o]=t.parse.jsonReviver(e[o],i))}},jsonReviver:function(e,i){if("string"==typeof i){var n=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(i),r=t.timeZoneHandling?t.serverTimezoneOffset:null;if(n)return t.dateParse.toTimeZone(new Date(parseInt(n[1],10)),r,!0);if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(i)){var o=i.indexOf("Z")>-1||i.indexOf("z")>-1,s=i.split(/[^0-9.]/);if(o){if(s[5].indexOf(".")>-1){var a=s[5].split(".");s[5]=a[0],s[6]=new Date(i).getUTCMilliseconds().toString()}else s[6]="00";i=t.dateParse.toTimeZone(new Date(parseInt(s[0],10),parseInt(s[1],10)-1,parseInt(s[2],10),parseInt(s[3],10),parseInt(s[4],10),parseInt(s[5],10),parseInt(s[6],10)),t.serverTimezoneOffset,!1)}else{var l=new Date(parseInt(s[0],10),parseInt(s[1],10)-1,parseInt(s[2],10),parseInt(s[3],10),parseInt(s[4],10),parseInt(s[5],10)),h=parseInt(s[6],10),c=parseInt(s[7],10);if(isNaN(h)&&isNaN(c))return l;i.indexOf("+")>-1?l.setHours(l.getHours()-h,l.getMinutes()-c):l.setHours(l.getHours()+h,l.getMinutes()+c),i=t.dateParse.toTimeZone(l,t.serverTimezoneOffset,!1)}null==t.serverTimezoneOffset&&(i=t.dateParse.addSelfOffset(i))}}return i},isJson:function(e){return"string"==typeof e[0]?e:t.parse.parseJson(e)},isGuid:function(t){return null!=/[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i.exec(t)},replacer:function(e,i){return t.isPlainObject(e)?t.parse.jsonReplacer(e,i):e instanceof Array?t.parse.arrayReplacer(e):e instanceof Date?t.parse.jsonReplacer({val:e},i).val:e},jsonReplacer:function(e,i){for(var n,r=0,o=Object.keys(e);r<o.length;r++){var s=o[r];if((n=e[s])instanceof Date){var a=n;null==t.serverTimezoneOffset?e[s]=t.dateParse.toTimeZone(a,null).toJSON():(a=new Date(+a+36e5*t.serverTimezoneOffset),e[s]=t.dateParse.toTimeZone(t.dateParse.addSelfOffset(a),null).toJSON())}}return e},arrayReplacer:function(e){for(var i=0;i<e.length;i++)t.isPlainObject(e[i])?e[i]=t.parse.jsonReplacer(e[i]):e[i]instanceof Date&&(e[i]=t.parse.jsonReplacer({date:e[i]}).date);return e},jsonDateReplacer:function(e,i){if("value"===e&&i){if("string"==typeof i){var n=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(i);if(n)i=t.dateParse.toTimeZone(new Date(parseInt(n[1],10)),null,!0);else if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(i)){var r=i.split(/[^0-9]/);i=t.dateParse.toTimeZone(new Date(parseInt(r[0],10),parseInt(r[1],10)-1,parseInt(r[2],10),parseInt(r[3],10),parseInt(r[4],10),parseInt(r[5],10)),null,!0)}}if(i instanceof Date)return i=t.dateParse.addSelfOffset(i),null===t.serverTimezoneOffset?t.dateParse.toTimeZone(t.dateParse.addSelfOffset(i),null).toJSON():(i=t.dateParse.toTimeZone(i,i.getTimezoneOffset()/60*2-t.serverTimezoneOffset,!1)).toJSON()}return i}},t.dateParse={addSelfOffset:function(t){return new Date(+t-6e4*t.getTimezoneOffset())},toUTC:function(t){return new Date(+t+6e4*t.getTimezoneOffset())},toTimeZone:function(e,i,n){if(null===i)return e;var r=n?t.dateParse.toUTC(e):e;return new Date(+r-36e5*i)},toLocalTime:function(t){var e=t,i=-e.getTimezoneOffset(),n=i>=0?"+":"-",r=function(t){var e=Math.floor(Math.abs(t));return(e<10?"0":"")+e};return e.getFullYear()+"-"+r(e.getMonth()+1)+"-"+r(e.getDate())+"T"+r(e.getHours())+":"+r(e.getMinutes())+":"+r(e.getSeconds())+n+r(i/60)+":"+r(i%60)}},t}(),ZI=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),$I={GroupGuid:"{271bbba0-1ee7}"},KI=function(){function t(e){this.options={from:"table",requestType:"json",sortBy:"sorted",select:"select",skip:"skip",group:"group",take:"take",search:"search",count:"requiresCounts",where:"where",aggregates:"aggregates",expand:"expand"},this.type=t,this.dataSource=e,this.pvt={}}return t.prototype.processResponse=function(t,e,i,n){return t},t}(),JI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ZI(e,t),e.prototype.processQuery=function(t,e){for(var i,n,r,o=t.dataSource.json.slice(0),s=o.length,a=!0,l={},h=0,c=[],d=0;d<e.lazyLoad.length;d++)h++,l[e.lazyLoad[d].key]=e.lazyLoad[d].value;var p={};for(d=0;d<e.queries.length;d++)"onPage"!==(n=e.queries[d]).fn&&"onGroup"!==n.fn||!e.lazyLoad.length?(i=this[n.fn].call(this,o,n.e,e),"onAggregates"===n.fn?p[n.e.field+" - "+n.e.type]=i:o=void 0!==i?i:o,"onPage"!==n.fn&&"onSkip"!==n.fn&&"onTake"!==n.fn&&"onRange"!==n.fn||(a=!1),a&&(s=o.length)):("onGroup"===n.fn&&c.push(n.e),"onPage"===n.fn&&(r=n.e));if(h){var u={query:e,lazyLoad:l,result:o,group:c,page:r},g=this.lazyLoadGroup(u);o=g.result,s=g.count}return e.isCountRequired&&(o={result:o,count:s,aggregates:p}),o},e.prototype.lazyLoadGroup=function(t){var e=0,i=this.getAggregate(t.query),n=t.result;if(h(t.lazyLoad.onDemandGroupInfo)){s=t.group[0].fieldName;e=(n=GI.group(n,s,i,null,null,t.group[0].comparer,!0)).length;a=n;t.page&&(n=this.onPage(n,t.page,t.query)),this.formGroupResult(n,a)}else{for(var r=t.lazyLoad.onDemandGroupInfo,o=r.where.length-1;o>=0;o--)n=this.onWhere(n,r.where[o]);if(t.group.length!==r.level){var s=t.group[r.level].fieldName;n=GI.group(n,s,i,null,null,t.group[0].comparer,!0)}e=n.length;var a=n;n=(n=n.slice(r.skip)).slice(0,r.take),t.group.length!==r.level&&this.formGroupResult(n,a)}return{result:n,count:e}},e.prototype.formGroupResult=function(t,e){if(t.length&&e.length){t.GroupGuid=e.GroupGuid,t.childLevels=e.childLevels,t.level=e.level,t.records=e.records}return t},e.prototype.getAggregate=function(t){var e=QI.filterQueries(t.queries,"onAggregates"),i=[];if(e.length)for(var n=void 0,r=0;r<e.length;r++)n=e[r].e,i.push({type:n.type,field:GI.getValue(n.field,t)});return i},e.prototype.batchRequest=function(t,e,i){var n,r=e.deletedRecords.length;for(n=0;n<e.addedRecords.length;n++)this.insert(t,e.addedRecords[n]);for(n=0;n<e.changedRecords.length;n++)this.update(t,i.key,e.changedRecords[n]);for(n=0;n<r;n++)this.remove(t,i.key,e.deletedRecords[n]);return e},e.prototype.onWhere=function(t,e){return t&&t.length?t.filter(function(t){if(e)return e.validate(t)}):t},e.prototype.onAggregates=function(t,e){var i=GI.aggregates[e.type];return t&&i&&0!==t.length?i(t,e.field):null},e.prototype.onSearch=function(t,e){return t&&t.length?(0===e.fieldNames.length&&GI.getFieldList(t[0],e.fieldNames),t.filter(function(t){for(var i=0;i<e.fieldNames.length;i++)if(e.comparer.call(t,GI.getObject(e.fieldNames[i],t),e.searchKey,e.ignoreCase,e.ignoreAccent))return!0;return!1})):t},e.prototype.onSortBy=function(t,e,i){if(!t||!t.length)return t;var n,r=GI.getValue(e.fieldName,i);if(!r)return t.sort(e.comparer);if(r instanceof Array){for(var o=(r=r.slice(0)).length-1;o>=0;o--)r[o]&&(n=e.comparer,GI.endsWith(r[o]," desc")&&(n=GI.fnSort("descending"),r[o]=r[o].replace(" desc","")),t=GI.sort(t,r[o],n));return t}return GI.sort(t,r,e.comparer)},e.prototype.onGroup=function(t,e,i){if(!t||!t.length)return t;var n=this.getAggregate(i);return GI.group(t,GI.getValue(e.fieldName,i),n,null,null,e.comparer)},e.prototype.onPage=function(t,e,i){var n=GI.getValue(e.pageSize,i),r=(GI.getValue(e.pageIndex,i)-1)*n,o=r+n;return t&&t.length?t.slice(r,o):t},e.prototype.onRange=function(t,e){return t&&t.length?t.slice(GI.getValue(e.start),GI.getValue(e.end)):t},e.prototype.onTake=function(t,e){return t&&t.length?t.slice(0,GI.getValue(e.nos)):t},e.prototype.onSkip=function(t,e){return t&&t.length?t.slice(GI.getValue(e.nos)):t},e.prototype.onSelect=function(t,e){return t&&t.length?GI.select(t,GI.getValue(e.fieldNames)):t},e.prototype.insert=function(t,e,i,n,r){return h(r)?t.dataSource.json.push(e):t.dataSource.json.splice(r,0,e)},e.prototype.remove=function(t,e,i,n){var r,o=t.dataSource.json;for("object"!=typeof i||i instanceof Date||(i=GI.getObject(e,i)),r=0;r<o.length&&GI.getObject(e,o[r])!==i;r++);return r!==o.length?o.splice(r,1):null},e.prototype.update=function(t,e,i,r){var o,s,l=t.dataSource.json;for(h(e)||(s=n(e,i)),o=0;o<l.length&&(h(e)||n(e,l[o])!==s);o++);return o<l.length?a(l[o],i):null},e}(KI),tx=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ZI(e,t),e.prototype.processQuery=function(t,e,i){var n,r,o=this.getQueryRequest(e),s=QI.filterQueryLists(e.queries,["onSelect","onPage","onSkip","onTake","onRange"]),a=e.params,l=t.dataSource.url,c=null,d=this.options,p={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};"onPage"in s?(n=s.onPage,r=((r=GI.getValue(n.pageIndex,e))-1)*(c=GI.getValue(n.pageSize,e))):"onRange"in s&&(r=(n=s.onRange).start,c=n.end-n.start);for(var u=0;u<o.sorts.length;u++)n=GI.getValue(o.sorts[u].e.fieldName,e),p.sorts.push(GI.callAdaptorFunction(this,"onEachSort",{name:n,direction:o.sorts[u].e.direction},e));i&&(n=this.getFiltersFrom(i,e))&&p.filters.push(GI.callAdaptorFunction(this,"onEachWhere",n.toJson(),e));for(u=0;u<o.filters.length;u++){var g=GI.callAdaptorFunction(this,"onEachWhere",o.filters[u].e.toJson(),e);this.getModuleName&&"ODataV4Adaptor"===this.getModuleName()&&!h(o.filters[u].e.key)&&o.filters.length>1&&(g="("+g+")"),p.filters.push(g);for(var m=0,f="object"==typeof p.filters[u]?Object.keys(p.filters[u]):[];m<f.length;m++){var v=f[m];GI.isNull(p[v])&&delete p[v]}}for(u=0;u<o.searches.length;u++)n=o.searches[u].e,p.searches.push(GI.callAdaptorFunction(this,"onEachSearch",{fields:n.fieldNames,operator:n.operator,key:n.searchKey,ignoreCase:n.ignoreCase},e));for(u=0;u<o.groups.length;u++)p.groups.push(GI.getValue(o.groups[u].e.fieldName,e));for(u=0;u<o.aggregates.length;u++)n=o.aggregates[u].e,p.aggregates.push({type:n.type,field:GI.getValue(n.field,e)});var y={};if(this.getRequestQuery(d,e,s,p,y),GI.callAdaptorFunction(this,"addParams",{dm:t,query:e,params:a,reqParams:y}),e.lazyLoad.length)for(u=0;u<e.lazyLoad.length;u++)y[e.lazyLoad[u].key]=e.lazyLoad[u].value;for(var b=0,S=Object.keys(y);b<S.length;b++){v=S[b];(GI.isNull(y[v])||""===y[v]||0===y[v].length)&&delete y[v]}d.skip in y&&d.take in y||null===c||(y[d.skip]=GI.callAdaptorFunction(this,"onSkip",r,e),y[d.take]=GI.callAdaptorFunction(this,"onTake",c,e));var w=this.pvt;return this.pvt={},"json"===this.options.requestType?{data:JSON.stringify(y,GI.parse.jsonDateReplacer),url:l,pvtData:w,type:"POST",contentType:"application/json; charset=utf-8"}:(n=this.convertToQueryString(y,e,t),n=(-1!==t.dataSource.url.indexOf("?")?"&":"/")+n,{type:"GET",url:n.length?l.replace(/\/*$/,n):l,pvtData:w})},e.prototype.getRequestQuery=function(t,e,i,n,r){var o=r;o[t.from]=e.fromTable,t.apply&&e.distincts.length&&(o[t.apply]="onDistinct"in this?GI.callAdaptorFunction(this,"onDistinct",e.distincts):""),!e.distincts.length&&t.expand&&(o[t.expand]="onExpand"in this&&"onSelect"in i?GI.callAdaptorFunction(this,"onExpand",{selects:GI.getValue(i.onSelect.fieldNames,e),expands:e.expands},e):e.expands),o[t.select]="onSelect"in i&&!e.distincts.length?GI.callAdaptorFunction(this,"onSelect",GI.getValue(i.onSelect.fieldNames,e),e):"",o[t.count]=e.isCountRequired?GI.callAdaptorFunction(this,"onCount",e.isCountRequired,e):"",o[t.search]=n.searches.length?GI.callAdaptorFunction(this,"onSearch",n.searches,e):"",o[t.skip]="onSkip"in i?GI.callAdaptorFunction(this,"onSkip",GI.getValue(i.onSkip.nos,e),e):"",o[t.take]="onTake"in i?GI.callAdaptorFunction(this,"onTake",GI.getValue(i.onTake.nos,e),e):"",o[t.where]=n.filters.length||n.searches.length?GI.callAdaptorFunction(this,"onWhere",n.filters,e):"",o[t.sortBy]=n.sorts.length?GI.callAdaptorFunction(this,"onSortBy",n.sorts,e):"",o[t.group]=n.groups.length?GI.callAdaptorFunction(this,"onGroup",n.groups,e):"",o[t.aggregates]=n.aggregates.length?GI.callAdaptorFunction(this,"onAggregates",n.aggregates,e):"",o.param=[]},e.prototype.convertToQueryString=function(t,e,i){return""},e.prototype.processResponse=function(t,e,i,n,r,o){if(n&&n.getResponseHeader("Content-Type")&&-1!==n.getResponseHeader("Content-Type").indexOf("application/json")){var s=GI.timeZoneHandling;e&&!e.timeZoneHandling&&(GI.timeZoneHandling=!1),t=GI.parse.parseJson(t),GI.timeZoneHandling=s}var a=r,l=a.pvtData||{},c=t?t.groupDs:[];if(n&&n.getResponseHeader("Content-Type")&&-1!==n.getResponseHeader("Content-Type").indexOf("xml"))return i.isCountRequired?{result:[],count:0}:[];var d=JSON.parse(a.data);if(d&&"batch"===d.action&&t&&t.addedRecords)return o.addedRecords=t.addedRecords,o;t&&t.d&&(t=t.d);var p={};t&&"count"in t&&(p.count=t.count),p.result=t&&t.result?t.result:t;var u=!1;if(Array.isArray(t.result)&&t.result.length){if(h(t.result[0].key)||(p.result=this.formRemoteGroupedData(p.result,1,l.groups.length-1)),i&&i.lazyLoad.length&&l.groups.length)for(var g=0;g<i.lazyLoad.length;g++)if("onDemandGroupInfo"===i.lazyLoad[g].key){var m=i.lazyLoad[g].value.level;l.groups.length===m&&(u=!0)}}return u||this.getAggregateResult(l,t,p,c,i),GI.isNull(p.count)?p.result:{result:p.result,count:p.count,aggregates:p.aggregates}},e.prototype.formRemoteGroupedData=function(t,e,i){for(var n=0;n<t.length;n++)t[n].items.length&&Object.keys(t[n].items[0]).indexOf("key")>-1&&this.formRemoteGroupedData(t[n].items,e+1,i-1);return t.GroupGuid=$I.GroupGuid,t.level=e,t.childLevels=i,t.records=t[0].items.length?this.getGroupedRecords(t,!h(t[0].items.records)):[],t},e.prototype.getGroupedRecords=function(t,e){for(var i=[],n=0;n<t.length;n++)if(e)i=i.concat(t[n].items.records);else for(var r=0;r<t[n].items.length;r++)i.push(t[n].items[r]);return i},e.prototype.onGroup=function(t){return this.pvt.groups=t,t},e.prototype.onAggregates=function(t){this.pvt.aggregates=t},e.prototype.batchRequest=function(t,e,i,n,r){return{type:"POST",url:t.dataSource.batchUrl||t.dataSource.crudUrl||t.dataSource.removeUrl||t.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(l({},{changed:e.changedRecords,added:e.addedRecords,deleted:e.deletedRecords,action:"batch",table:i[void 0],key:i[void 0]},GI.getAddParams(this,t,n)))}},e.prototype.beforeSend=function(t,e){},e.prototype.insert=function(t,e,i,n){return{url:t.dataSource.insertUrl||t.dataSource.crudUrl||t.dataSource.url,data:JSON.stringify(l({},{value:e,table:i,action:"insert"},GI.getAddParams(this,t,n)))}},e.prototype.remove=function(t,e,i,n,r){return{type:"POST",url:t.dataSource.removeUrl||t.dataSource.crudUrl||t.dataSource.url,data:JSON.stringify(l({},{key:i,keyColumn:e,table:n,action:"remove"},GI.getAddParams(this,t,r)))}},e.prototype.update=function(t,e,i,n,r){return{type:"POST",url:t.dataSource.updateUrl||t.dataSource.crudUrl||t.dataSource.url,data:JSON.stringify(l({},{value:i,action:"update",keyColumn:e,key:GI.getObject(e,i),table:n},GI.getAddParams(this,t,r)))}},e.prototype.getFiltersFrom=function(t,e){var i,n=e.fKey,r=n,o=e.key,s=[];"object"!=typeof t[0]&&(r=null);for(var a=0;a<t.length;a++)i="object"==typeof t[0]?GI.getObject(o||r,t[a]):t[a],s.push(new XI(n,"equal",i));return XI.or(s)},e.prototype.getAggregateResult=function(t,e,i,n,r){var o=e;if(e&&e.result&&(o=e.result),t&&t.aggregates&&t.aggregates.length){var s=t.aggregates,a=void 0,l=o,c={};e.aggregate&&(l=e.aggregate);for(var d=0;d<s.length;d++)(a=GI.aggregates[s[d].type])&&(c[s[d].field+" - "+s[d].type]=a(l,s[d].field));i.aggregates=c}var p=Array.isArray(e.result)&&e.result.length&&!h(e.result[0].key);if(t&&t.groups&&t.groups.length&&!p){var u=t.groups;for(d=0;d<u.length;d++){h(n)||(n=GI.group(n,u[d]));var g=QI.filterQueries(r.queries,"onGroup")[d].e;o=GI.group(o,u[d],t.aggregates,null,n,g.comparer)}i.result=o}return i},e.prototype.getQueryRequest=function(t){var e={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};return e.sorts=QI.filterQueries(t.queries,"onSortBy"),e.groups=QI.filterQueries(t.queries,"onGroup"),e.filters=QI.filterQueries(t.queries,"onWhere"),e.searches=QI.filterQueries(t.queries,"onSearch"),e.aggregates=QI.filterQueries(t.queries,"onAggregates"),e},e.prototype.addParams=function(t){var e=t.reqParams;t.params.length&&(e.params={});for(var i=0,n=t.params;i<n.length;i++){var r=n[i];if(e[r.key])throw new Error("Query() - addParams: Custom Param is conflicting other request arguments");e[r.key]=r.value,r.fn&&(e[r.key]=r.fn.call(t.query,r.key,t.query,t.dm)),e.params[r.key]=e[r.key]}},e}(KI),ex=function(t){function e(e){var i=t.call(this)||this;return i.options=l({},i.options,{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$inlinecount",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 ",updateType:"PUT"}),l(i.options,e||{}),i}return ZI(e,t),e.prototype.getModuleName=function(){return"ODataAdaptor"},e.prototype.onPredicate=function(t,i,n){var r,o,s="",a=t.value,l=typeof a,c=t.field?e.getField(t.field):null;if(a instanceof Date&&(a="datetime'"+GI.parse.replacer(a)+"'"),"string"===l&&(a=a.replace(/'/g,"''"),t.ignoreCase&&(a=a.toLowerCase()),"like"!==t.operator&&(a=encodeURIComponent(a)),"wildcard"!==t.operator&&"like"!==t.operator&&(a="'"+a+"'"),n&&(c="cast("+c+", 'Edm.String')"),GI.parse.isGuid(a)&&(o="guid"),t.ignoreCase&&(o||(c="tolower("+c+")"),a=a.toLowerCase())),"isempty"===t.operator||"isnull"===t.operator||"isnotempty"===t.operator||"isnotnull"===t.operator?(r=-1!==t.operator.indexOf("isnot")?GI.odBiOperator.notequal:GI.odBiOperator.equal,a="isnull"===t.operator||"isnotnull"===t.operator?null:"''"):r=GI.odBiOperator[t.operator],r)return s+=c,s+=r,o&&(s+=o),s+a;if("like"===(r=h(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?GI.odUniOperator[t.operator]:GI.odv4UniOperator[t.operator]))-1!==(a=a).indexOf("%")&&("%"===a.charAt(0)&&a.lastIndexOf("%")<2?(a=a.substring(1,a.length),r=h(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?GI.odUniOperator.startswith:GI.odv4UniOperator.startswith):"%"===a.charAt(a.length-1)&&a.indexOf("%")>a.length-3?(a=a.substring(0,a.length-1),r=h(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?GI.odUniOperator.endswith:GI.odv4UniOperator.endswith):a.lastIndexOf("%")!==a.indexOf("%")&&a.lastIndexOf("%")>a.indexOf("%")+1?(a=a.substring(a.indexOf("%")+1,a.lastIndexOf("%")),r=h(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?GI.odUniOperator.contains:GI.odv4UniOperator.contains):r=h(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?GI.odUniOperator.contains:GI.odv4UniOperator.contains),a="'"+(a=encodeURIComponent(a))+"'";else if("wildcard"===r)if(-1!==(a=a).indexOf("*")){var d=a.split("*"),p=void 0,u=0;if(0!==a.indexOf("*")&&-1===d[0].indexOf("%3f")&&-1===d[0].indexOf("?")&&(p="'"+(p=d[0])+"'",s+=(r=h(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?GI.odUniOperator.startswith:GI.odv4UniOperator.startswith)+"(",s+=c+",",o&&(s+=o),s+=p+")",u++),a.lastIndexOf("*")!==a.length-1&&-1===d[d.length-1].indexOf("%3f")&&-1===d[d.length-1].indexOf("?")&&(p="'"+(p=d[d.length-1])+"'",r=h(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?GI.odUniOperator.endswith:GI.odv4UniOperator.endswith,u>0&&(s+=" and "),s+=r+"(",s+=c+",",o&&(s+=o),s+=p+")",u++),d.length>2)for(var g=1;g<d.length-1;g++)if(-1===d[g].indexOf("%3f")&&-1===d[g].indexOf("?")){if(p=d[g],p="'"+p+"'",r=h(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?GI.odUniOperator.contains:GI.odv4UniOperator.contains,u>0&&(s+=" and "),"substringof"===r||"not substringof"===r){var m=p;p=c,c=m}s+=r+"(",s+=c+",",o&&(s+=o),s+=p+")",u++}0===u?(r=h(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?GI.odUniOperator.contains:GI.odv4UniOperator.contains,-1===a.indexOf("?")&&-1===a.indexOf("%3f")||(a=-1!==a.indexOf("?")?a.split("?").join(""):a.split("%3f").join("")),a="'"+a+"'"):r="wildcard"}else r=h(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?GI.odUniOperator.contains:GI.odv4UniOperator.contains,-1===a.indexOf("?")&&-1===a.indexOf("%3f")||(a=-1!==a.indexOf("?")?a.split("?").join(""):a.split("%3f").join("")),a="'"+a+"'";if("substringof"===r||"not substringof"===r){m=a;a=c,c=m}return"wildcard"!==r&&(s+=r+"(",s+=c+",",o&&(s+=o),s+=a+")"),s},e.prototype.addParams=function(e){t.prototype.addParams.call(this,e),delete e.reqParams.params},e.prototype.onComplexPredicate=function(t,e,i){for(var n=[],r=0;r<t.predicates.length;r++)n.push("("+this.onEachWhere(t.predicates[r],e,i)+")");return n.join(" "+t.condition+" ")},e.prototype.onEachWhere=function(t,e,i){return t.isComplex?this.onComplexPredicate(t,e,i):this.onPredicate(t,e,i)},e.prototype.onWhere=function(t){return this.pvt.search&&t.push(this.onEachWhere(this.pvt.search,null,!0)),t.join(" and ")},e.prototype.onEachSearch=function(t){t.fields&&0===t.fields.length&&GI.throwError("Query() - Search : oData search requires list of field names to search");for(var e=this.pvt.search||[],i=0;i<t.fields.length;i++)e.push(new XI(t.fields[i],t.operator,t.key,t.ignoreCase));this.pvt.search=e},e.prototype.onSearch=function(t){return this.pvt.search=XI.or(this.pvt.search),""},e.prototype.onEachSort=function(t){var i=[];if(t.name instanceof Array)for(var n=0;n<t.name.length;n++)i.push(e.getField(t.name[n])+("descending"===t.direction?" desc":""));else i.push(e.getField(t.name)+("descending"===t.direction?" desc":""));return i.join(",")},e.prototype.onSortBy=function(t){return t.reverse().join(",")},e.prototype.onGroup=function(t){return this.pvt.groups=t,[]},e.prototype.onSelect=function(t){for(var i=0;i<t.length;i++)t[i]=e.getField(t[i]);return t.join(",")},e.prototype.onAggregates=function(t){return this.pvt.aggregates=t,""},e.prototype.onCount=function(t){return!0===t?"allpages":""},e.prototype.beforeSend=function(t,e,i){GI.endsWith(i.url,this.options.batch)&&"post"===i.type.toLowerCase()?(e.setRequestHeader("Accept",this.options.multipartAccept),e.setRequestHeader("DataServiceVersion","2.0"),e.overrideMimeType("text/plain; charset=x-user-defined")):e.setRequestHeader("Accept",this.options.accept),e.setRequestHeader("DataServiceVersion","2.0"),e.setRequestHeader("MaxDataServiceVersion","2.0")},e.prototype.processResponse=function(t,e,i,n,r,o){if(r&&"GET"===r.type&&!this.rootUrl&&t["odata.metadata"]){var s=t["odata.metadata"].split("/$metadata#");this.rootUrl=s[0],this.resourceTableName=s[1]}if(!h(t.d)){var a=i&&i.isCountRequired?t.d.results:t.d;if(!h(a))for(var l=0;l<a.length;l++)h(a[l].__metadata)||delete a[l].__metadata}var c=r&&r.pvtData,d=this.processBatchResponse(t,i,n,r,o);if(d)return d;var p=n&&r.getResponseHeader("DataServiceVersion"),u=null,g=p&&parseInt(p,10)||2;if(i&&i.isCountRequired){(t.__count||t["odata.count"])&&(u=t.__count||t["odata.count"]),t.d&&(t=t.d),(t.__count||t["odata.count"])&&(u=t.__count||t["odata.count"])}3===g&&t.value&&(t=t.value),t.d&&(t=t.d),g<3&&t.results&&(t=t.results);var m={};return m.count=u,m.result=t,this.getAggregateResult(c,t,m,null,i),GI.isNull(u)?m.result:{result:m.result,count:m.count,aggregates:m.aggregates}},e.prototype.convertToQueryString=function(t,e,i){var n=[],r=t.table||"";delete t.table,i.dataSource.requiresFormat&&(t.$format="json");for(var o=0,s=Object.keys(t);o<s.length;o++){var a=s[o];n.push(a+"="+t[a])}return n=n.join("&"),i.dataSource.url&&-1!==i.dataSource.url.indexOf("?")&&!r?n:n.length?r+"?"+n:r||""},e.prototype.localTimeReplacer=function(t,e){for(var i=0,n=h(e)?[]:Object.keys(e);i<n.length;i++){var r=n[i];e[r]instanceof Date&&(e[r]=GI.dateParse.toLocalTime(e[r]))}return e},e.prototype.insert=function(t,e,i){return{url:(t.dataSource.insertUrl||t.dataSource.url).replace(/\/*$/,i?"/"+i:""),data:JSON.stringify(e,this.options.localTime?this.localTimeReplacer:null)}},e.prototype.remove=function(t,e,i,n){var r;return r="string"!=typeof i||GI.parse.isGuid(i)?"("+i+")":"('"+i+"')",{type:"DELETE",url:(t.dataSource.removeUrl||t.dataSource.url).replace(/\/*$/,n?"/"+n:"")+r}},e.prototype.update=function(t,e,i,n,r,o){"PATCH"!==this.options.updateType||h(o)||(i=this.compareAndRemove(i,o,e));var s;return s="string"!=typeof i[e]||GI.parse.isGuid(i[e])?"("+i[e]+")":"('"+i[e]+"')",{type:this.options.updateType,url:(t.dataSource.updateUrl||t.dataSource.url).replace(/\/*$/,n?"/"+n:"")+s,data:JSON.stringify(i,this.options.localTime?this.localTimeReplacer:null),accept:this.options.accept}},e.prototype.batchRequest=function(t,e,i,n,r){var o=i.guid=GI.getGuid(this.options.batchPre),s=this.rootUrl?this.rootUrl+"/"+this.options.batch:t.dataSource.url.replace(/\/*$/,"/"+this.options.batch);i.url=this.resourceTableName?this.resourceTableName:i.url;var a={url:i.url,key:i.key,cid:1,cSet:GI.getGuid(this.options.changeSet)},l="--"+o+"\n";return l+="Content-Type: multipart/mixed; boundary="+a.cSet.replace("--","")+"\n",this.pvt.changeSet=0,l+=this.generateInsertRequest(e.addedRecords,a,t),l+=this.generateUpdateRequest(e.changedRecords,a,t,r?r.changedRecords:[]),l+=this.generateDeleteRequest(e.deletedRecords,a,t),l+=a.cSet+"--\n",l+="--"+o+"--",{type:"POST",url:s,dataType:"json",contentType:"multipart/mixed; charset=UTF-8;boundary="+o,data:l}},e.prototype.generateDeleteRequest=function(t,e,i){if(!t)return"";var n={method:"DELETE ",url:function(t,e,i){var n=GI.getObject(i,t[e]);if("number"==typeof n||GI.parse.isGuid(n))return"("+n+")";if(n instanceof Date){return"("+t[e][i].toJSON()+")"}return"('"+n+"')"},data:function(t,e){return""}};return this.generateBodyContent(t,e,n,i)+"\n"},e.prototype.generateInsertRequest=function(t,e,i){if(!t)return"";var n={method:"POST ",url:function(t,e,i){return""},data:function(t,e){return JSON.stringify(t[e])+"\n\n"}};return this.generateBodyContent(t,e,n,i)},e.prototype.generateUpdateRequest=function(t,e,i,n){var r=this;if(!t)return"";t.forEach(function(t){return t=r.compareAndRemove(t,n.filter(function(i){return GI.getObject(e.key,i)===GI.getObject(e.key,t)})[0],e.key)});var o={method:this.options.updateType+" ",url:function(t,e,i){if("number"==typeof t[e][i]||GI.parse.isGuid(t[e][i]))return"("+t[e][i]+")";if(t[e][i]instanceof Date){return"("+t[e][i].toJSON()+")"}return"('"+t[e][i]+"')"},data:function(t,e){return JSON.stringify(t[e])+"\n\n"}};return this.generateBodyContent(t,e,o,i)},e.getField=function(t){return t.replace(/\./g,"/")},e.prototype.generateBodyContent=function(t,e,i,n){for(var r="",o=0;o<t.length;o++)r+="\n"+e.cSet+"\n",r+=this.options.changeSetContent+"\n\n",r+=i.method,"POST "===i.method?r+=(n.dataSource.insertUrl||n.dataSource.crudUrl||e.url)+i.url(t,o,e.key)+" HTTP/1.1\n":"PUT "===i.method||"PATCH "===i.method?r+=(n.dataSource.updateUrl||n.dataSource.crudUrl||e.url)+i.url(t,o,e.key)+" HTTP/1.1\n":"DELETE "===i.method&&(r+=(n.dataSource.removeUrl||n.dataSource.crudUrl||e.url)+i.url(t,o,e.key)+" HTTP/1.1\n"),r+="Accept: "+this.options.accept+"\n",r+="Content-Id: "+this.pvt.changeSet+++"\n",r+=this.options.batchChangeSetContentType+"\n",h(t[o]["@odata.etag"])?r+="\n":(r+="If-Match: "+t[o]["@odata.etag"]+"\n\n",delete t[o]["@odata.etag"]),r+=i.data(t,o);return r},e.prototype.processBatchResponse=function(t,e,i,n,r){if(i&&i.getResponseHeader("Content-Type")&&-1!==i.getResponseHeader("Content-Type").indexOf("xml"))return e.isCountRequired?{result:[],count:0}:[];if(n&&this.options.batch&&GI.endsWith(n.url,this.options.batch)&&"post"===n.type.toLowerCase()){var o=i.getResponseHeader("Content-Type"),s=void 0,a=void 0,h=t+"";if(o=o.substring(o.indexOf("=batchresponse")+1),(h=h.split(o)).length<2)return{};h=h[1];var c=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(h);c&&h.replace(c[0],"");for(var d=c?c[1]:"",p=(h=h.split(d)).length;p>-1;p--)/\bContent-ID:/i.test(h[p])&&/\bHTTP.+201/.test(h[p])&&(s=parseInt(/\bContent-ID: (\d+)/i.exec(h[p])[1],10),r.addedRecords[s]&&(a=GI.parse.parseJson(/^\{.+\}/m.exec(h[p])[0]),l({},r.addedRecords[s],this.processResponse(a))));return r}return null},e.prototype.compareAndRemove=function(t,e,i){var n=this;return h(e)?t:(Object.keys(t).forEach(function(r){if(r!==i&&"@odata.etag"!==r)if(GI.isPlainObject(t[r])){n.compareAndRemove(t[r],e[r]);0===Object.keys(t[r]).filter(function(t){return"@odata.etag"!==t}).length&&delete t[r]}else t[r]===e[r]?delete t[r]:t[r]&&e[r]&&t[r].valueOf()===e[r].valueOf()&&delete t[r]}),t)},e}(tx),ix=(function(t){function e(e){var i=t.call(this,e)||this;return i.options=l({},i.options,{requestType:"get",accept:"application/json, text/javascript, */*; q=0.01",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$count",search:"$search",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 ",updateType:"PATCH",localTime:!1,apply:"$apply"}),l(i.options,e||{}),i}ZI(e,t),e.prototype.getModuleName=function(){return"ODataV4Adaptor"},e.prototype.onCount=function(t){return!0===t?"true":""},e.prototype.onPredicate=function(e,i,n){var r="",o=e.value,s=o instanceof Date;if(i instanceof QI)for(var a=this.getQueryRequest(i),l=0;l<a.filters.length;l++)a.filters[l].e.key===e.value&&(n=!0);return r=t.prototype.onPredicate.call(this,e,i,n),s&&(r=r.replace(/datetime'(.*)'$/,"$1")),GI.parse.isGuid(o)&&(r=r.replace("guid","").replace(/'/g,"")),r},e.prototype.onEachSearch=function(t){var e=this.pvt.searches||[];e.push(t.key),this.pvt.searches=e},e.prototype.onSearch=function(t){return this.pvt.searches.join(" OR ")},e.prototype.onExpand=function(t){var e=this,i={},n={},r=t.expands.slice(),o=[];return t.selects.filter(function(t){return t.indexOf(".")>-1}).forEach(function(t){var n=t.split(".");if(n[0]in i||(i[n[0]]=[]),2===n.length)i[n[0]].length&&-1!==Object.keys(i).indexOf(n[0])?-1!==i[n[0]][0].indexOf("$expand")&&-1===i[n[0]][0].indexOf(";$select=")?i[n[0]][0]=i[n[0]][0]+";$select="+n[1]:i[n[0]][0]=i[n[0]][0]+","+n[1]:i[n[0]].push("$select="+n[1]);else{for(var r="$select="+n[n.length-1],o="",s="",a=1;a<n.length-1;a++)o=o+"$expand="+n[a]+"(",s+=")";var l=o+r+s;if(i[n[0]].length&&-1!==Object.keys(i).indexOf(n[0])&&e.expandQueryIndex(i[n[0]],!0)){var h=e.expandQueryIndex(i[n[0]]);i[n[0]][h]=i[n[0]][h]+l.replace("$expand=",",")}else i[n[0]].push(l)}}),Object.keys(i).forEach(function(t){-1===r.indexOf(t)&&r.push(t)}),r.forEach(function(t){n[t]=t in i?t+"("+i[t].join(";")+")":t}),Object.keys(n).forEach(function(t){return o.push(n[t])}),o.join(",")},e.prototype.expandQueryIndex=function(t,e){for(var i=0;i<t.length;i++)if(-1!==t[i].indexOf("$expand"))return!!e||i;return!e&&0},e.prototype.onDistinct=function(t){return"groupby(("+t.map(function(t){return ex.getField(t)}).join(",")+"))"},e.prototype.onSelect=function(e){return t.prototype.onSelect.call(this,e.filter(function(t){return-1===t.indexOf(".")}))},e.prototype.beforeSend=function(t,e,i){"POST"!==i.type&&"PUT"!==i.type&&"PATCH"!==i.type||e.setRequestHeader("Prefer","return=representation"),e.setRequestHeader("Accept",this.options.accept)},e.prototype.processResponse=function(e,i,n,r,o,s){var a="@odata.context";if(o&&"GET"===o.type&&!this.rootUrl&&(e[a]||e["@context"])){var l=e[a]?e[a].split("/$metadata#"):e["@context"].split("/$metadata#");this.rootUrl=l[0],this.resourceTableName=l[1]}var c=o&&o.pvtData,d=t.prototype.processBatchResponse.call(this,e,n,r,o,s);if(d)return d;var p=null;n&&n.isCountRequired&&("@odata.count"in e?p=e["@odata.count"]:"@count"in e&&(p=e["@count"])),e=h(e.value)?e:e.value;var u={};return u.count=p,u.result=e,this.getAggregateResult(c,e,u,null,n),GI.isNull(p)?u.result:{result:u.result,count:p,aggregates:u.aggregates}}}(ex),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}ZI(e,t),e.prototype.getModuleName=function(){return"WebApiAdaptor"},e.prototype.insert=function(t,e,i){return{type:"POST",url:t.dataSource.url,data:JSON.stringify(e)}},e.prototype.remove=function(t,e,i,n){return{type:"DELETE",url:t.dataSource.url+"/"+i,data:JSON.stringify(i)}},e.prototype.update=function(t,e,i,n){return{type:"PUT",url:t.dataSource.url,data:JSON.stringify(i)}},e.prototype.batchRequest=function(t,e,i){var n=this,r=i.guid=GI.getGuid(this.options.batchPre),o=t.dataSource.url.replace(/\/*$/,"/"+this.options.batch);i.url=this.resourceTableName?this.resourceTableName:i.url;for(var s=[],a=function(n,o){e.addedRecords.forEach(function(o,a){var l=function(t,e,i){return""};s.push("--"+r),s.push("Content-Type: application/http; msgtype=request",""),s.push("POST /api/"+(t.dataSource.insertUrl||t.dataSource.crudUrl||i.url)+l(e.addedRecords,n,i.key)+" HTTP/1.1"),s.push("Content-Type: application/json; charset=utf-8"),s.push("Host: "+location.host),s.push("",o?JSON.stringify(o):"")})},l=0,h=e.addedRecords.length;l<h;l++)a(l);var c=function(o,a){e.changedRecords.forEach(function(a,l){n.options.updateType;var h=function(t,e,i){return""};s.push("--"+r),s.push("Content-Type: application/http; msgtype=request",""),s.push("PUT /api/"+(t.dataSource.updateUrl||t.dataSource.crudUrl||i.url)+h(e.changedRecords,o,i.key)+" HTTP/1.1"),s.push("Content-Type: application/json; charset=utf-8"),s.push("Host: "+location.host),s.push("",a?JSON.stringify(a):"")})};for(l=0,h=e.changedRecords.length;l<h;l++)c(l);var d=function(n,o){e.deletedRecords.forEach(function(o,a){var l=function(t,e,i){var n=GI.getObject(i,t[e]);if("number"==typeof n||GI.parse.isGuid(n))return"/"+n;if(n instanceof Date){return"/"+t[e][i].toJSON()}return"/'"+n+"'"};s.push("--"+r),s.push("Content-Type: application/http; msgtype=request",""),s.push("DELETE /api/"+(t.dataSource.removeUrl||t.dataSource.crudUrl||i.url)+l(e.deletedRecords,n,i.key)+" HTTP/1.1"),s.push("Content-Type: application/json; charset=utf-8"),s.push("Host: "+location.host),s.push("",o?JSON.stringify(o):"")})};for(l=0,h=e.deletedRecords.length;l<h;l++)d(l);return s.push("--"+r+"--",""),{type:"POST",url:o,contentType:"multipart/mixed; boundary="+r,data:s.join("\r\n")}},e.prototype.beforeSend=function(t,e,i){e.setRequestHeader("Accept","application/json, text/javascript, */*; q=0.01")},e.prototype.processResponse=function(t,e,i,n,r,o){var s=r&&r.pvtData,a=null,l={};if(r&&"post"!==r.type.toLowerCase()){var h=n&&r.getResponseHeader("DataServiceVersion"),c=h&&parseInt(h,10)||2;i&&i.isCountRequired&&(GI.isNull(t.Count)||(a=t.Count)),c<3&&t.Items&&(t=t.Items),l.count=a,l.result=t,this.getAggregateResult(s,t,l,null,i)}return l.result=l.result||t,GI.isNull(a)?l.result:{result:l.result,count:l.count,aggregates:l.aggregates}}}(ex),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}ZI(e,t),e.prototype.processQuery=function(t,e,i){var n=(new tx).processQuery(t,e,i),r=GI.parse.parseJson(n.data),o={};if(r.param)for(var s=0;s<r.param.length;s++){var a=r.param[s],l=Object.keys(a)[0];o[l]=a[l]}o.value=r;return{data:JSON.stringify(o),url:n.url,pvtData:n.pvtData,type:"POST",contentType:"application/json; charset=utf-8"}}}(tx),function(t){function e(){var e=t.call(this)||this;return r("beforeSend",tx.prototype.beforeSend,e),e}return ZI(e,t),e.prototype.insert=function(t,e,i,n,r){return this.pvt.position=r,this.updateType="add",{url:t.dataSource.insertUrl||t.dataSource.crudUrl||t.dataSource.url,data:JSON.stringify(l({},{value:e,table:i,action:"insert"},GI.getAddParams(this,t,n)))}},e.prototype.remove=function(e,i,n,r,o){return t.prototype.remove.call(this,e,i,n),{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(l({},{key:n,keyColumn:i,table:r,action:"remove"},GI.getAddParams(this,e,o)))}},e.prototype.update=function(t,e,i,n,r){return this.updateType="update",this.updateKey=e,{type:"POST",url:t.dataSource.updateUrl||t.dataSource.crudUrl||t.dataSource.url,data:JSON.stringify(l({},{value:i,action:"update",keyColumn:e,key:i[e],table:n},GI.getAddParams(this,t,r)))}},e.prototype.processResponse=function(e,i,n,r,o,s,a){var l;if(e="batch"===(o?JSON.parse(o.data):e).action?GI.parse.parseJson(e):e,"add"===this.updateType&&t.prototype.insert.call(this,i,e,null,null,this.pvt.position),"update"===this.updateType&&t.prototype.update.call(this,i,this.updateKey,e),this.updateType=void 0,e.added)for(l=0;l<e.added.length;l++)t.prototype.insert.call(this,i,e.added[l]);if(e.changed)for(l=0;l<e.changed.length;l++)t.prototype.update.call(this,i,a.key,e.changed[l]);if(e.deleted)for(l=0;l<e.deleted.length;l++)t.prototype.remove.call(this,i,a.key,e.deleted[l]);return e},e.prototype.batchRequest=function(t,e,i,n,r){return{type:"POST",url:t.dataSource.batchUrl||t.dataSource.crudUrl||t.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(l({},{changed:e.changedRecords,added:e.addedRecords,deleted:e.deletedRecords,action:"batch",table:i.url,key:i.key},GI.getAddParams(this,t,n)))}},e.prototype.addParams=function(t){(new tx).addParams(t)},e}(JI)),nx=function(t){function e(e){var i=t.call(this)||this;return i.options=l({},i.options,{getData:new Function,addRecord:new Function,updateRecord:new Function,deleteRecord:new Function,batchUpdate:new Function}),l(i.options,e||{}),i}return ZI(e,t),e.prototype.getModuleName=function(){return"CustomDataAdaptor"},e}(tx),rx=(function(t){function e(e){var i=t.call(this)||this;return i.opt=e,i.schema=i.opt.response,i.query=i.opt.query,i.getVariables=i.opt.getVariables?i.opt.getVariables:function(){},i.getQuery=function(){return i.query},i}ZI(e,t),e.prototype.getModuleName=function(){return"GraphQLAdaptor"},e.prototype.processQuery=function(e,i){var n=t.prototype.processQuery.apply(this,arguments),r=JSON.parse(n.data),o={};["skip","take","sorted","table","select","where","search","requiresCounts","aggregates","params"].filter(function(t){o[t]="searchwhereparams".indexOf(t)>-1?JSON.stringify(r[t]):r[t]});var s=this.getVariables()||{};s.datamanager=o;var a=JSON.stringify({query:this.getQuery(),variables:s});return n.data=a,n},e.prototype.processResponse=function(t,e,i,r,o){var s,a,l=t,c=n(this.schema.result,l.data);this.schema.count&&(s=n(this.schema.count,l.data)),this.schema.aggregates&&(a=h(a=n(this.schema.aggregates,l.data))?a:GI.parse.parseJson(a));var d=o.pvtData||{},p={result:c,aggregates:a},u=p;return d&&d.groups&&d.groups.length&&this.getAggregateResult(d,u,p,null,i),h(s)?p.result:{result:p.result,count:s,aggregates:a}},e.prototype.insert=function(){var e=t.prototype.insert.apply(this,arguments);return this.generateCrudData(e,"insert")},e.prototype.update=function(){var e=t.prototype.update.apply(this,arguments);return this.generateCrudData(e,"update")},e.prototype.remove=function(){var e=t.prototype.remove.apply(this,arguments);return this.generateCrudData(e,"remove")},e.prototype.batchRequest=function(e,i,n,r,o){var s=t.prototype.batchRequest.apply(this,arguments),a=JSON.parse(s.data);return a.key=n.key,s.data=JSON.stringify(a),this.generateCrudData(s,"batch")},e.prototype.generateCrudData=function(t,e){var i=JSON.parse(t.data);return t.data=JSON.stringify({query:this.opt.getMutation(e),variables:i}),t}}(tx),function(t){function e(e,i,n){var r=t.call(this)||this;r.isCrudAction=!1,r.isInsertAction=!1,h(e)||(r.cacheAdaptor=e),r.pageSize=n,r.guidId=GI.getGuid("cacheAdaptor");window.localStorage.setItem(r.guidId,JSON.stringify({keys:[],results:[]}));var o=r.guidId;return h(i)||setInterval(function(){for(var t=GI.parse.parseJson(window.localStorage.getItem(o)),e=[],n=0;n<t.results.length;n++){var r=+new Date,s=+new Date(t.results[n].timeStamp);t.results[n].timeStamp=r-s,r-s>i&&e.push(n)}for(n=0;n<e.length;n++)t.results.splice(e[n],1),t.keys.splice(e[n],1);window.localStorage.removeItem(o),window.localStorage.setItem(o,JSON.stringify(t))},i),r}return ZI(e,t),e.prototype.generateKey=function(t,e){var i=this.getQueryRequest(e),n=QI.filterQueryLists(e.queries,["onSelect","onPage","onSkip","onTake","onRange"]),r=t;"onPage"in n&&(r+=n.onPage.pageIndex),i.sorts.forEach(function(t){r+=t.e.direction+t.e.fieldName}),i.groups.forEach(function(t){r+=t.e.fieldName}),i.searches.forEach(function(t){r+=t.e.searchKey});for(var o=0;o<i.filters.length;o++){var s=i.filters[o];if(s.e.isComplex){var a=e.clone();a.queries=[];for(var l=0;l<s.e.predicates.length;l++)a.queries.push({fn:"onWhere",e:s.e.predicates[l],filter:e.queries.filter});r+=s.e.condition+this.generateKey(t,a)}else r+=s.e.field+s.e.operator+s.e.value}return r},e.prototype.processQuery=function(t,e,i){var n=this.generateKey(t.dataSource.url,e),r=GI.parse.parseJson(window.localStorage.getItem(this.guidId)),o=r?r.results[r.keys.indexOf(n)]:null;return null==o||this.isCrudAction||this.isInsertAction?(this.isCrudAction=null,this.isInsertAction=null,this.cacheAdaptor.processQuery.apply(this.cacheAdaptor,[].slice.call(arguments,0))):o},e.prototype.processResponse=function(t,e,i,n,r,o){if(this.isInsertAction||r&&this.cacheAdaptor.options.batch&&GI.endsWith(r.url,this.cacheAdaptor.options.batch)&&"post"===r.type.toLowerCase())return this.cacheAdaptor.processResponse(t,e,i,n,r,o);t=this.cacheAdaptor.processResponse.apply(this.cacheAdaptor,[].slice.call(arguments,0));var s=i?this.generateKey(e.dataSource.url,i):e.dataSource.url,a={},l=(a=GI.parse.parseJson(window.localStorage.getItem(this.guidId))).keys.indexOf(s);for(-1!==l&&(a.results.splice(l,1),a.keys.splice(l,1)),a.results[a.keys.push(s)-1]={keys:s,result:t.result,timeStamp:new Date,count:t.count};a.results.length>this.pageSize;)a.results.splice(0,1),a.keys.splice(0,1);return window.localStorage.setItem(this.guidId,JSON.stringify(a)),t},e.prototype.beforeSend=function(t,e,i){!h(this.cacheAdaptor.options.batch)&&GI.endsWith(i.url,this.cacheAdaptor.options.batch)&&"post"===i.type.toLowerCase()&&e.setRequestHeader("Accept",this.cacheAdaptor.options.multipartAccept),t.dataSource.crossDomain||e.setRequestHeader("Accept",this.cacheAdaptor.options.accept)},e.prototype.update=function(t,e,i,n){return this.isCrudAction=!0,this.cacheAdaptor.update(t,e,i,n)},e.prototype.insert=function(t,e,i){return this.isInsertAction=!0,this.cacheAdaptor.insert(t,e,i)},e.prototype.remove=function(t,e,i,n){return this.isCrudAction=!0,this.cacheAdaptor.remove(t,e,i,n)},e.prototype.batchRequest=function(t,e,i){return this.cacheAdaptor.batchRequest(t,e,i)},e}(tx)),ox=function(){function t(t,e,i){var n=this;this.dateParse=!0,this.timeZoneHandling=!0,this.requests=[],t||this.dataSource||(t=[]),i=i||t.adaptor,t&&!1===t.timeZoneHandling&&(this.timeZoneHandling=t.timeZoneHandling);var r;return t instanceof Array?r={json:t,offline:!0}:"object"==typeof t?(t.json||(t.json=[]),r={url:t.url,insertUrl:t.insertUrl,removeUrl:t.removeUrl,updateUrl:t.updateUrl,crudUrl:t.crudUrl,batchUrl:t.batchUrl,json:t.json,headers:t.headers,accept:t.accept,data:t.data,timeTillExpiration:t.timeTillExpiration,cachingPageSize:t.cachingPageSize,enableCaching:t.enableCaching,requestType:t.requestType,key:t.key,crossDomain:t.crossDomain,jsonp:t.jsonp,dataType:t.dataType,offline:void 0!==t.offline?t.offline:!(t.adaptor instanceof ix||t.adaptor instanceof nx)&&!t.url,requiresFormat:t.requiresFormat}):GI.throwError("DataManager: Invalid arguments"),void 0!==r.requiresFormat||GI.isCors()||(r.requiresFormat=!!h(r.crossDomain)||r.crossDomain),void 0===r.dataType&&(r.dataType="json"),this.dataSource=r,this.defaultQuery=e,r.url&&r.offline&&!r.json.length?(this.isDataAvailable=!1,this.adaptor=i||new ex,this.dataSource.offline=!1,this.ready=this.executeQuery(e||new QI),this.ready.then(function(t){n.dataSource.offline=!0,n.isDataAvailable=!0,r.json=t.result,n.adaptor=new JI})):this.adaptor=r.offline?new JI:new ex,!r.jsonp&&this.adaptor instanceof ex&&(r.jsonp="callback"),this.adaptor=i||this.adaptor,r.enableCaching&&(this.adaptor=new rx(this.adaptor,r.timeTillExpiration,r.cachingPageSize)),this}return t.prototype.setDefaultQuery=function(t){return this.defaultQuery=t,this},t.prototype.executeLocal=function(e){this.defaultQuery||e instanceof QI||GI.throwError("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||GI.throwError("DataManager - executeLocal() : Json data is required to execute"),e=e||this.defaultQuery;var i=this.adaptor.processQuery(this,e);if(e.subQuery){var n=e.subQuery.fromTable,r=e.subQuery.lookups,o=e.isCountRequired?i.result:i;r&&r instanceof Array&&GI.buildHierarchy(e.subQuery.fKey,n,o,r,e.subQuery.key);for(var s=0;s<o.length;s++)o[s][n]instanceof Array&&(o[s]=l({},{},o[s]),o[s][n]=this.adaptor.processResponse(e.subQuery.using(new t(o[s][n].slice(0))).executeLocal(),this,e))}return this.adaptor.processResponse(i,this,e)},t.prototype.executeQuery=function(e,i,n,r){var o=this;"function"==typeof e&&(r=n,n=i,i=e,e=null),e||(e=this.defaultQuery),e instanceof QI||GI.throwError("DataManager - executeQuery() : A query is required to execute");var s=new sx,a={query:e};if(!this.dataSource.offline&&void 0!==this.dataSource.url&&""!==this.dataSource.url||!h(this.adaptor.makeRequest)||this.isCustomDataAdaptor(this.adaptor)){var l=this.adaptor.processQuery(this,e);h(this.adaptor.makeRequest)?!h(l.url)||this.isCustomDataAdaptor(this.adaptor)?(this.requests=[],this.makeRequest(l,s,a,e)):(a=t.getDeferedArgs(e,l,a),s.resolve(a)):this.adaptor.makeRequest(l,s,a,e)}else t.nextTick(function(){var i=o.executeLocal(e);a=t.getDeferedArgs(e,i,a),s.resolve(a)});return(i||n)&&s.promise.then(i,n),r&&s.promise.then(r,r),s.promise},t.getDeferedArgs=function(t,e,i){return t.isCountRequired?(i.result=e.result,i.count=e.count,i.aggregates=e.aggregates):i.result=e,i},t.nextTick=function(t){(window.setImmediate||window.setTimeout)(t,0)},t.prototype.extendRequest=function(t,e,i){return l({},{type:"GET",dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!0,processData:!1,onSuccess:e,onFailure:i},t)},t.prototype.makeRequest=function(t,e,i,n){var r=this,o=!!n.subQuerySelector,s=function(t){i.error=t,e.reject(i)},a=function(t,n,r,o,s,a,l){i.xhr=r,i.count=n?parseInt(n.toString(),10):0,i.result=t,i.request=o,i.aggregates=a,i.actual=s,i.virtualSelectRecords=l,e.resolve(i)},c=function(t,e){var l=new sx,h={parent:i};n.subQuery.isChild=!0;var c=r.adaptor.processQuery(r,n.subQuery,t?r.adaptor.processResponse(t):e),d=r.makeRequest(c,l,h,n.subQuery);return o||l.then(function(e){t&&(GI.buildHierarchy(n.subQuery.fKey,n.subQuery.fromTable,t,e,n.subQuery.key),a(t,e.count,e.xhr))},s),d},d=this.extendRequest(t,function(t,e){if(r.isGraphQLAdaptor(r.adaptor)&&!h(t.errors))return s(t.errors);r.isCustomDataAdaptor(r.adaptor)&&(e=l({},r.ajaxReqOption,e)),-1===e.httpRequest.getResponseHeader("Content-Type").indexOf("xml")&&r.dateParse&&(t=GI.parse.parseJson(t));var i=r.adaptor.processResponse(t,r,n,e.httpRequest,e),d=0,p=null,u=t.virtualSelectRecords;n.isCountRequired&&(d=i.count,p=i.aggregates,i=i.result),n.subQuery?o||c(i,e):a(i,d,e.httpRequest,e.type,t,p,u)},s);if(this.isCustomDataAdaptor(this.adaptor)){this.ajaxReqOption=d;var p=d;this.adaptor.options.getData({data:p.data,onSuccess:p.onSuccess,onFailure:p.onFailure})}else{var u=new gp(d);u.beforeSend=function(){r.beforeSend(u.httpRequest,u)},(d=u.send()).catch(function(t){return!0}),this.requests.push(u)}if(o){var g=n.subQuerySelector.call(this,{query:n.subQuery,parent:n});g&&g.length?Promise.all([d,c(null,g)]).then(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[0],s=r.adaptor.processResponse(i[0],r,n,r.requests[0].httpRequest,r.requests[0]),l=0;n.isCountRequired&&(l=s.count,s=s.result);var h=r.adaptor.processResponse(i[1],r,n.subQuery,r.requests[1].httpRequest,r.requests[1]);l=0,n.subQuery.isCountRequired&&(l=h.count,h=h.result),GI.buildHierarchy(n.subQuery.fKey,n.subQuery.fromTable,s,h,n.subQuery.key),o=!1,a(s,l,r.requests[0].httpRequest)}):o=!1}return d},t.prototype.beforeSend=function(t,e){this.adaptor.beforeSend(this,t,e);for(var i,n=this.dataSource.headers,r=0;n&&r<n.length;r++){i=[];for(var o=0,s=Object.keys(n[r]);o<s.length;o++){var a=s[o];i.push(a),t.setRequestHeader(a,n[r][a])}}},t.prototype.saveChanges=function(t,e,i,n,r){var o=this;i instanceof QI&&(n=i,i=null);var s={url:i,key:e||this.dataSource.key},a=this.adaptor.batchRequest(this,t,s,n||new QI,r);if(this.dataSource.offline)return a;if(h(this.adaptor.doAjaxRequest)){if(this.isCustomDataAdaptor(this.adaptor))return this.doAjaxRequest(a,this.adaptor.options.batchUpdate);var l=new sx,c=new gp(a);return c.beforeSend=function(){o.beforeSend(c.httpRequest,c)},c.onSuccess=function(e,i){o.isGraphQLAdaptor(o.adaptor)&&(h(e.errors)||c.onFailure(JSON.stringify(e.errors))),l.resolve(o.adaptor.processResponse(e,o,null,i.httpRequest,i,t,s))},c.onFailure=function(t){l.reject([{error:t}])},c.send().catch(function(t){return!0}),l.promise}return this.adaptor.doAjaxRequest(a)},t.prototype.insert=function(t,e,i,n){e instanceof QI&&(i=e,e=null);var r=this.adaptor.insert(this,t,e,i,n);return this.dataSource.offline?r:h(this.adaptor.doAjaxRequest)?this.doAjaxRequest(r,this.adaptor.options.addRecord):this.adaptor.doAjaxRequest(r)},t.prototype.remove=function(t,e,i,n){"object"==typeof e&&(e=GI.getObject(t,e)),i instanceof QI&&(n=i,i=null);var r=this.adaptor.remove(this,t,e,i,n);if(this.dataSource.offline)return r;if(h(this.adaptor.doAjaxRequest)){var o=this.adaptor.options.deleteRecord;return this.doAjaxRequest(r,o)}return this.adaptor.doAjaxRequest(r)},t.prototype.update=function(t,e,i,n,r){i instanceof QI&&(n=i,i=null);var o=this.adaptor.update(this,t,e,i,n,r);if(this.dataSource.offline)return o;if(h(this.adaptor.doAjaxRequest)){var s=this.adaptor.options.updateRecord;return this.doAjaxRequest(o,s)}return this.adaptor.doAjaxRequest(o)},t.prototype.isCustomDataAdaptor=function(t){return this.adaptor.getModuleName&&"CustomDataAdaptor"===this.adaptor.getModuleName()},t.prototype.isGraphQLAdaptor=function(t){return this.adaptor.getModuleName&&"GraphQLAdaptor"===this.adaptor.getModuleName()},t.prototype.successFunc=function(t,e){if(this.isGraphQLAdaptor(this.adaptor)){var i=JSON.parse(t);h(i.errors)||this.failureFunc(JSON.stringify(i.errors))}this.isCustomDataAdaptor(this.adaptor)&&(e=l({},this.ajaxReqOption,e));try{GI.parse.parseJson(t)}catch(e){t=[]}t=this.adaptor.processResponse(GI.parse.parseJson(t),this,null,e.httpRequest,e),this.ajaxDeffered.resolve(t)},t.prototype.failureFunc=function(t){this.ajaxDeffered.reject([{error:t}])},t.prototype.doAjaxRequest=function(t,e){var i=this;if(t=l({},{type:"POST",contentType:"application/json; charset=utf-8",processData:!1},t),this.ajaxDeffered=new sx,this.isCustomDataAdaptor(this.adaptor))this.ajaxReqOption=t,e.call(this,{data:t.data,onSuccess:this.successFunc.bind(this),onFailure:this.failureFunc.bind(this)});else{var n=new gp(t);n.beforeSend=function(){i.beforeSend(n.httpRequest,n)},n.onSuccess=this.successFunc.bind(this),n.onFailure=this.failureFunc.bind(this),n.send().catch(function(t){return!0})}return this.ajaxDeffered.promise},t}(),sx=function(){return function(){var t=this;this.promise=new Promise(function(e,i){t.resolve=e,t.reject=i}),this.then=this.promise.then.bind(this.promise),this.catch=this.promise.catch.bind(this.promise)}}(),ax=function(){function t(){this.dataTable={}}return t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"DataBinding"},t.prototype.initData=function(t,e){var i,n=t.dataManager||t.dataSource||{};(i=n.data||n.json||(n.dataSource?n.dataSource.json:void 0))&&0===i.length&&n.dataSource.data&&(i=n.dataSource.data),i&&i.length&&(this.applyDataSource(t,i,e),e.trigger("dataLoaded",{diagram:f()?null:xs(e)}))},t.prototype.initSource=function(t,e){var i,n=this,r=t,o=t;if(r.dataManager instanceof ox||r.dataSource instanceof ox){var s=(o.dataManager||o.dataSource).defaultQuery||new QI;(t.dataManager||t.dataSource).executeQuery(s).then(function(r){i=r.result,e.isDestroyed||(e.protectPropertyChange(!0),n.applyDataSource(t,i,e),e.refreshDiagram(),e.protectPropertyChange(!1),e.trigger("dataLoaded",{diagram:f()?null:xs(e)}))})}},t.prototype.applyDataSource=function(t,e,i){this.dataTable={};var n,r,o,s,a,l=[],h=[];if(void 0!==e){for(var c=0;c<e.length;c++)void 0===(n=e[parseInt(c.toString(),10)])[t.parentId]||null===n[t.parentId]||"object"!=typeof n[t.parentId]?void 0!==l[n[t.parentId]]?l[n[t.parentId]].items.push(n):l[n[t.parentId]]={items:[n]}:l=this.updateMultipleRootNodes(n,l,t,e),t.root===n[t.id]&&(r={items:[n]});if(r)h.push(r);else for(var d=0,p=Object.keys(l);d<p.length;d++){var u=p[d];u&&"undefined"!==u&&"''"!==u&&"null"!==u||h.push(l[""+u])}for(var g=0;g<h.length;g++)for(var m=0;m<h[parseInt(g.toString(),10)].items.length;m++)s=h[parseInt(g.toString(),10)].items[parseInt(m.toString(),10)],o=this.applyNodeTemplate(t,s,i),i.nodes.push(o),this.dataTable[s[t.id]]=o,void 0!==(a=l[o.data[t.id]])&&this.renderChildNodes(t,a,o.id,l,i)}this.dataTable=null},t.prototype.updateMultipleRootNodes=function(t,e,i,n){for(var r,o=t[i.parentId],s=0;s<o.length;s++)e[""+(r=o[parseInt(s.toString(),10)])]?e[""+r].items.push(t):e[""+r]={items:[t]};return e},t.prototype.applyNodeTemplate=function(t,e,i){var n={id:da(),data:e},r=Oa(t.doBinding);r&&r(n,e,i);var o=new Pw(i,"nodes",n,!0);if(No(o,n,i.nodeDefaults),t.dataMapSettings)for(var s=void 0,a=[],l=[],h=0;h<t.dataMapSettings.length;h++){if(-1!==t.dataMapSettings[parseInt(h.toString(),10)].property.indexOf(".")){l=this.splitString(t.dataMapSettings[parseInt(h.toString(),10)].property);for(var c=0;c<l.length;c++)-1!==l[parseInt(c.toString(),10)].indexOf("[")&&(s=l[parseInt(c.toString(),10)].indexOf("["),a=l[parseInt(c.toString(),10)].split("["));if(s)if(l[2])o[a[0]][l[0].charAt(s+1)][l[1]][l[2]]=e[t.dataMapSettings[parseInt(h.toString(),10)].field];else{var d=e[t.dataMapSettings[parseInt(h.toString(),10)].field];o[a[0]][l[0].charAt(s+1)][l[1]]=d}else l[2]?o[l[0]][l[1]][l[2]]=e[t.dataMapSettings[parseInt(h.toString(),10)].field]:o[l[0]][l[1]]=e[t.dataMapSettings[parseInt(h.toString(),10)].field]}else{var p=t.dataMapSettings[parseInt(h.toString(),10)].property;o[""+(p=p.charAt(0).toLowerCase()+p.slice(1))]=e[t.dataMapSettings[parseInt(h.toString(),10)].field]}s=0,a=[],l=[]}return this.collectionContains(o,i,t.id,t.parentId)?this.dataTable[e[t.id]]:o},t.prototype.splitString=function(t){var e=[];e=t.split(".");for(var i=0;i<e.length;i++)e[parseInt(i.toString(),10)]=e[parseInt(i.toString(),10)].charAt(0).toLowerCase()+e[parseInt(i.toString(),10)].slice(1);return e},t.prototype.renderChildNodes=function(t,e,i,n,r){for(var o,s,a,l=0;l<e.items.length;l++){o=e.items[parseInt(l.toString(),10)],a=this.applyNodeTemplate(t,o,r);var h=!1;this.collectionContains(a,r,t.id,t.parentId)?h=!0:(this.dataTable[o[t.id]]=a,r.nodes.push(a)),this.containsConnector(r,i,a.id)||r.connectors.push(this.applyConnectorTemplate(i,a.id,r)),h||void 0!==(s=n[a.data[t.id]])&&this.renderChildNodes(t,s,a.id,n,r)}},t.prototype.containsConnector=function(t,e,i){if(""!==e&&""!==i)for(var n=0;n<t.connectors.length;n++){var r=t.connectors[parseInt(n.toString(),10)];if(void 0!==r&&r.sourceID===e&&r.targetID===i)return!0}return!1},t.prototype.collectionContains=function(t,e,i,n){var r=this.dataTable[t.data[""+i]];return void 0!==r&&r.data[""+i]===t.data[""+i]&&r.data[""+n]===t.data[""+n]},t.prototype.applyConnectorTemplate=function(t,e,i){var n={id:da(),sourceID:t,targetID:e},r=new ES(i,"connectors",n,!0);return No(r,n,i.connectorDefaults),r},t}(),lx=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),hx=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},cx="e-overlay",dx="e-nav-arrow",px="e-nav-right-arrow",ux="e-nav-left-arrow",gx="e-scroll-nav",mx="e-scroll-right-nav",fx="e-scroll-overlay",vx="e-scroll-right-overlay",yx="e-scroll-left-overlay",bx=function(t){function e(e,i){return t.call(this,e,i)||this}return lx(e,t),e.prototype.preRender=function(){this.browser=Np.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=Np.isDevice,this.customStep=!0;var t=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===t.id&&(t.id=d("hscroll"),this.uniqueId=!0),t.style.display="block",this.enableRtl&&t.classList.add("e-rtl")},e.prototype.render=function(){this.touchModule=new yu(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),Ep.add(this.scrollEle,"scroll",this.scrollHandler,this),this.isDevice?(this.element.classList.add("e-scroll-device"),this.createOverlay(this.element)):this.createNavIcon(this.element),this.setScrollState()},e.prototype.setScrollState=function(){h(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetWidth,this.customStep=!1):this.customStep=!0},e.prototype.initialize=function(){var t=this.createElement("div",{className:"e-hscroll-content"}),e=this.createElement("div",{className:"e-hscroll-bar"});e.setAttribute("tabindex","-1");for(var i=this.element,n=0,r=[].slice.call(i.children);n<r.length;n++){var o=r[n];t.appendChild(o)}e.appendChild(t),i.appendChild(e),e.style.overflowX="hidden",this.scrollEle=e,this.scrollItems=t},e.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},e.prototype.getModuleName=function(){return"hScroll"},e.prototype.destroy=function(){var e=this.element;e.style.display="",e.classList.remove("e-hscroll"),e.classList.remove("e-scroll-device");var i=z(".e-"+e.id+"_nav."+gx,e),n=z("."+fx,e);[].slice.call(n).forEach(function(t){T(t)});for(var r=0,o=[].slice.call(this.scrollItems.children);r<o.length;r++){var s=o[r];e.appendChild(s)}this.uniqueId&&this.element.removeAttribute("id"),T(this.scrollEle),i.length>0&&(T(i[0]),h(i[1])||T(i[1])),Ep.remove(this.scrollEle,"scroll",this.scrollHandler),this.touchModule.destroy(),this.touchModule=null,t.prototype.destroy.call(this)},e.prototype.disable=function(t){var e=z(".e-scroll-nav:not(.e-overlay)",this.element);t?this.element.classList.add(cx):this.element.classList.remove(cx),[].slice.call(e).forEach(function(e){e.setAttribute("tabindex",t?"-1":"0")})},e.prototype.createOverlay=function(t){var e=t.id.concat("_nav"),i=this.createElement("div",{className:fx+" "+vx}),n="e-"+t.id.concat("_nav "+gx+" "+mx),r=this.createElement("div",{id:e.concat("_right"),className:n}),o=this.createElement("div",{className:px+" "+dx+" e-icons"});r.appendChild(o);var s=this.createElement("div",{className:fx+" "+yx});this.ieCheck&&r.classList.add("e-ie-align"),t.appendChild(i),t.appendChild(r),t.insertBefore(s,t.firstChild),this.eventBinding([r])},e.prototype.createNavIcon=function(t){var e=t.id.concat("_nav"),i="e-"+t.id.concat("_nav "+gx+" "+mx),n={role:"button",id:e.concat("_right"),"aria-label":"Scroll right"},r=this.createElement("div",{className:i,attrs:n});r.setAttribute("aria-disabled","false");var o=this.createElement("div",{className:px+" "+dx+" e-icons"}),s="e-"+t.id.concat("_nav "+gx+" e-scroll-left-nav"),a={role:"button",id:e.concat("_left"),"aria-label":"Scroll left"},l=this.createElement("div",{className:s+" "+cx,attrs:a});l.setAttribute("aria-disabled","true");var h=this.createElement("div",{className:ux+" "+dx+" e-icons"});l.appendChild(h),r.appendChild(o),t.appendChild(r),t.insertBefore(l,t.firstChild),this.ieCheck&&(r.classList.add("e-ie-align"),l.classList.add("e-ie-align")),this.eventBinding([r,l])},e.prototype.onKeyPress=function(t){var e=this;if("Enter"===t.key){this.keyTimer=window.setTimeout(function(){e.keyTimeout=!0,e.eleScrolling(10,t.target,!0)},100)}},e.prototype.onKeyUp=function(t){"Enter"===t.key&&(this.keyTimeout?this.keyTimeout=!1:t.target.click(),clearTimeout(this.keyTimer))},e.prototype.eventBinding=function(t){var e=this;[].slice.call(t).forEach(function(t){new yu(t,{tapHold:e.tabHoldHandler.bind(e),tapHoldThreshold:500}),t.addEventListener("keydown",e.onKeyPress.bind(e)),t.addEventListener("keyup",e.onKeyUp.bind(e)),t.addEventListener("mouseup",e.repeatScroll.bind(e)),t.addEventListener("touchend",e.repeatScroll.bind(e)),t.addEventListener("contextmenu",function(t){t.preventDefault()}),Ep.add(t,"click",e.clickEventHandler,e)})},e.prototype.repeatScroll=function(){clearInterval(this.timeout)},e.prototype.tabHoldHandler=function(t){var e=this,i=t.originalEvent.target;i=this.contains(i,gx)?i.firstElementChild:i;this.timeout=window.setInterval(function(){e.eleScrolling(10,i,!0)},50)},e.prototype.contains=function(t,e){return t.classList.contains(e)},e.prototype.eleScrolling=function(t,e,i){var n=this.element,r=e.classList;r.contains(gx)&&(r=e.querySelector("."+dx).classList),this.contains(n,"e-rtl")&&this.browserCheck&&(t=-t),!this.contains(n,"e-rtl")||this.browserCheck||this.ieCheck?r.contains(px)?this.frameScrollRequest(t,"add",i):this.frameScrollRequest(t,"",i):r.contains(ux)?this.frameScrollRequest(t,"add",i):this.frameScrollRequest(t,"",i)},e.prototype.clickEventHandler=function(t){this.eleScrolling(this.scrollStep,t.target,!1)},e.prototype.swipeHandler=function(t){var e,i=this.scrollEle;e=t.velocity<=1?t.distanceX/(10*t.velocity):t.distanceX/t.velocity;var n=.5,r=function(){var o=Math.sin(n);o<=0?window.cancelAnimationFrame(o):("Left"===t.swipeDirection?i.scrollLeft+=e*o:"Right"===t.swipeDirection&&(i.scrollLeft-=e*o),n-=.5,window.requestAnimationFrame(r))};r()},e.prototype.scrollUpdating=function(t,e){"add"===e?this.scrollEle.scrollLeft+=t:this.scrollEle.scrollLeft-=t,this.enableRtl&&this.scrollEle.scrollLeft>0&&(this.scrollEle.scrollLeft=0)},e.prototype.frameScrollRequest=function(t,e,i){var n=this;if(i)this.scrollUpdating(t,e);else{this.customStep||[].slice.call(z("."+fx,this.element)).forEach(function(e){t-=e.offsetWidth});var r=function(){var i,o;n.contains(n.element,"e-rtl")&&n.browserCheck?(i=-t,o=-10):(i=t,o=10),i<10?window.cancelAnimationFrame(o):(n.scrollUpdating(o,e),t-=o,window.requestAnimationFrame(r))};r()}},e.prototype.touchHandler=function(t){var e=this.scrollEle,i=t.distanceX;this.ieCheck&&this.contains(this.element,"e-rtl")&&(i=-i),"Left"===t.scrollDirection?e.scrollLeft=e.scrollLeft+i:"Right"===t.scrollDirection&&(e.scrollLeft=e.scrollLeft-i)},e.prototype.arrowDisabling=function(t,e){if(this.isDevice){var i=(h(t)?e:t).querySelector("."+dx);h(t)?R(i,[px],[ux]):R(i,[ux],[px])}else t&&e&&(t.classList.add(cx),t.setAttribute("aria-disabled","true"),t.removeAttribute("tabindex"),e.classList.remove(cx),e.setAttribute("aria-disabled","false"),e.setAttribute("tabindex","0"));this.repeatScroll()},e.prototype.scrollHandler=function(t){var e=t.target,i=e.offsetWidth,n=(this.element,this.element.querySelector(".e-scroll-left-nav")),r=this.element.querySelector("."+mx),o=this.element.querySelector("."+yx),s=this.element.querySelector("."+vx),a=e.scrollLeft;if(a<=0&&(a=-a),this.isDevice&&(!this.enableRtl||this.browserCheck||this.ieCheck||(o=this.element.querySelector("."+vx),s=this.element.querySelector("."+yx)),o.style.width=a<40?a+"px":"40px",e.scrollWidth-Math.ceil(i+a)<40?s.style.width=e.scrollWidth-Math.ceil(i+a)+"px":s.style.width="40px"),0===a)this.arrowDisabling(n,r);else if(Math.ceil(i+a+.1)>=e.scrollWidth)this.arrowDisabling(r,n);else{var l=this.element.querySelector("."+gx+"."+cx);l&&(l.classList.remove(cx),l.setAttribute("aria-disabled","false"),l.setAttribute("tabindex","0"))}},e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"scrollStep":this.setScrollState();break;case"enableRtl":t.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}}},hx([W(null)],e.prototype,"scrollStep",void 0),e=hx([$],e)}(Kp),Sx=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),wx=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Ix="e-overlay",xx="e-nav-arrow",Mx="e-nav-up-arrow",Cx="e-nav-down-arrow",Nx="e-scroll-nav",Ex="e-scroll-down-nav",Dx="e-scroll-overlay",Tx="e-scroll-up-overlay",Ox="e-scroll-down-overlay",Lx=function(t){function e(e,i){return t.call(this,e,i)||this}return Sx(e,t),e.prototype.preRender=function(){this.browser=Np.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=Np.isDevice,this.customStep=!0;var t=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===t.id&&(t.id=d("vscroll"),this.uniqueId=!0),t.style.display="block",this.enableRtl&&t.classList.add("e-rtl")},e.prototype.render=function(){this.touchModule=new yu(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),Ep.add(this.scrollEle,"scroll",this.scrollEventHandler,this),this.isDevice?(this.element.classList.add("e-scroll-device"),this.createOverlayElement(this.element)):this.createNavIcon(this.element),this.setScrollState(),Ep.add(this.element,"wheel",this.wheelEventHandler,this)},e.prototype.setScrollState=function(){h(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetHeight,this.customStep=!1):this.customStep=!0},e.prototype.initialize=function(){var t=w("div",{className:"e-vscroll-content"}),e=w("div",{className:"e-vscroll-bar"});e.setAttribute("tabindex","-1");for(var i=this.element,n=0,r=[].slice.call(i.children);n<r.length;n++){var o=r[n];t.appendChild(o)}e.appendChild(t),i.appendChild(e),e.style.overflow="hidden",this.scrollEle=e,this.scrollItems=t},e.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},e.prototype.getModuleName=function(){return"vScroll"},e.prototype.destroy=function(){var e=this.element;e.style.display="",x([this.element],["e-vscroll","e-scroll-device"]);var i=z(".e-"+e.id+"_nav."+Nx,e),n=z("."+Dx,e);[].slice.call(n).forEach(function(t){T(t)});for(var r=0,o=[].slice.call(this.scrollItems.children);r<o.length;r++){var s=o[r];e.appendChild(s)}this.uniqueId&&this.element.removeAttribute("id"),T(this.scrollEle),i.length>0&&(T(i[0]),h(i[1])||T(i[1])),Ep.remove(this.scrollEle,"scroll",this.scrollEventHandler),this.touchModule.destroy(),this.touchModule=null,t.prototype.destroy.call(this)},e.prototype.disable=function(t){var e=z(".e-scroll-nav:not(.e-overlay)",this.element);t?this.element.classList.add(Ix):this.element.classList.remove(Ix),[].slice.call(e).forEach(function(e){e.setAttribute("tabindex",t?"-1":"0")})},e.prototype.createOverlayElement=function(t){var e=t.id.concat("_nav"),i=w("div",{className:Dx+" "+Ox}),n="e-"+t.id.concat("_nav "+Nx+" "+Ex),r=w("div",{id:e.concat("down"),className:n}),o=w("div",{className:Cx+" "+xx+" e-icons"});r.appendChild(o);var s=w("div",{className:Dx+" "+Tx});this.ieCheck&&r.classList.add("e-ie-align"),t.appendChild(i),t.appendChild(r),t.insertBefore(s,t.firstChild),this.eventBinding([r])},e.prototype.createNavIcon=function(t){var e=t.id.concat("_nav"),i="e-"+t.id.concat("_nav "+Nx+" "+Ex),n=w("div",{id:e.concat("_down"),className:i});n.setAttribute("aria-disabled","false");var r=w("div",{className:Cx+" "+xx+" e-icons"}),o="e-"+t.id.concat("_nav "+Nx+" e-scroll-up-nav"),s=w("div",{id:e.concat("_up"),className:o+" "+Ix});s.setAttribute("aria-disabled","true");var a=w("div",{className:Mx+" "+xx+" e-icons"});s.appendChild(a),n.appendChild(r),n.setAttribute("tabindex","0"),t.appendChild(n),t.insertBefore(s,t.firstChild),this.ieCheck&&(n.classList.add("e-ie-align"),s.classList.add("e-ie-align")),this.eventBinding([n,s])},e.prototype.onKeyPress=function(t){var e=this;if("Enter"===t.key){this.keyTimer=window.setTimeout(function(){e.keyTimeout=!0,e.eleScrolling(10,t.target,!0)},100)}},e.prototype.onKeyUp=function(t){"Enter"===t.key&&(this.keyTimeout?this.keyTimeout=!1:t.target.click(),clearTimeout(this.keyTimer))},e.prototype.eventBinding=function(t){var e=this;[].slice.call(t).forEach(function(t){new yu(t,{tapHold:e.tabHoldHandler.bind(e),tapHoldThreshold:500}),t.addEventListener("keydown",e.onKeyPress.bind(e)),t.addEventListener("keyup",e.onKeyUp.bind(e)),t.addEventListener("mouseup",e.repeatScroll.bind(e)),t.addEventListener("touchend",e.repeatScroll.bind(e)),t.addEventListener("contextmenu",function(t){t.preventDefault()}),Ep.add(t,"click",e.clickEventHandler,e)})},e.prototype.repeatScroll=function(){clearInterval(this.timeout)},e.prototype.tabHoldHandler=function(t){var e=this,i=t.originalEvent.target;i=this.contains(i,Nx)?i.firstElementChild:i;this.timeout=window.setInterval(function(){e.eleScrolling(10,i,!0)},50)},e.prototype.contains=function(t,e){return t.classList.contains(e)},e.prototype.eleScrolling=function(t,e,i){var n=e.classList;n.contains(Nx)&&(n=e.querySelector("."+xx).classList),n.contains(Cx)?this.frameScrollRequest(t,"add",i):n.contains(Mx)&&this.frameScrollRequest(t,"",i)},e.prototype.clickEventHandler=function(t){this.eleScrolling(this.scrollStep,t.target,!1)},e.prototype.wheelEventHandler=function(t){t.preventDefault(),this.frameScrollRequest(this.scrollStep,t.deltaY>0?"add":"",!1)},e.prototype.swipeHandler=function(t){var e,i=this.scrollEle;e=t.velocity<=1?t.distanceY/(10*t.velocity):t.distanceY/t.velocity;var n=.5,r=function(){var o=Math.sin(n);o<=0?window.cancelAnimationFrame(o):("Up"===t.swipeDirection?i.scrollTop+=e*o:"Down"===t.swipeDirection&&(i.scrollTop-=e*o),n-=.02,window.requestAnimationFrame(r))};r()},e.prototype.scrollUpdating=function(t,e){"add"===e?this.scrollEle.scrollTop+=t:this.scrollEle.scrollTop-=t},e.prototype.frameScrollRequest=function(t,e,i){var n=this;if(i)this.scrollUpdating(t,e);else{this.customStep||[].slice.call(z("."+Dx,this.element)).forEach(function(e){t-=e.offsetHeight});var r=function(){t<10?window.cancelAnimationFrame(10):(n.scrollUpdating(10,e),t-=10,window.requestAnimationFrame(r))};r()}},e.prototype.touchHandler=function(t){var e=this.scrollEle,i=t.distanceY;"Up"===t.scrollDirection?e.scrollTop=e.scrollTop+i:"Down"===t.scrollDirection&&(e.scrollTop=e.scrollTop-i)},e.prototype.arrowDisabling=function(t,e){if(this.isDevice){var i=(h(t)?e:t).querySelector("."+xx);h(t)?R(i,[Cx],[Mx]):R(i,[Mx],[Cx])}else t.classList.add(Ix),t.setAttribute("aria-disabled","true"),t.removeAttribute("tabindex"),e.classList.remove(Ix),e.setAttribute("aria-disabled","false"),e.setAttribute("tabindex","0");this.repeatScroll()},e.prototype.scrollEventHandler=function(t){var e=t.target,i=e.offsetHeight,n=this.element.querySelector(".e-scroll-up-nav"),r=this.element.querySelector("."+Ex),o=this.element.querySelector("."+Tx),s=this.element.querySelector("."+Ox),a=e.scrollTop;if(a<=0&&(a=-a),this.isDevice&&(o.style.height=a<40?a+"px":"40px",e.scrollHeight-Math.ceil(i+a)<40?s.style.height=e.scrollHeight-Math.ceil(i+a)+"px":s.style.height="40px"),0===a)this.arrowDisabling(n,r);else if(Math.ceil(i+a+.1)>=e.scrollHeight)this.arrowDisabling(r,n);else{var l=this.element.querySelector("."+Nx+"."+Ix);l&&(l.classList.remove(Ix),l.setAttribute("aria-disabled","false"),l.setAttribute("tabindex","0"))}},e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"scrollStep":this.setScrollState();break;case"enableRtl":t.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}}},wx([W(null)],e.prototype,"scrollStep",void 0),e=wx([$],e)}(Kp),Ax={li:"e-list-item",ul:"e-list-parent e-ul",group:"e-list-group-item",icon:"e-list-icon",text:"e-list-text",check:"e-list-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-list-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-list-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"};!function(t){function e(t,e,n,r,o){return S(t,i(t,e,n,r,o),null,r)}function i(t,e,i,n,r){var o=[],s=l({},x,n);Ax=v(s.moduleName);for(var a=m(),c=0;c<e.length;c++)if(!h(e[c])){var d=void 0;if(s.itemCreating&&"function"==typeof s.itemCreating){var p={dataSource:e,curData:e[c],text:e[c],options:s};s.itemCreating(p)}if(d=i?f(t,e[c],void 0,null,null,[],null,a,c,n):b(t,e[c],void 0,null,null,n,r),s.itemCreated&&"function"==typeof s.itemCreated){p={dataSource:e,curData:e[c],text:e[c],item:d,options:s};s.itemCreated(p)}o.push(d)}return o}function n(e,i,n,o,s,c){var d=l({},x,n);Ax=v(d.moduleName);var g,y=!c||"listview"!==c.getModuleName()&&"multiselect"!==c.getModuleName()?l({},t.defaultMappedFields,d.fields):d.fields,S=l({},w,d.ariaAttributes),M=[];o&&(S.level=o);var C,D,T=[];i&&i.length&&!h(p(i).item)&&!p(i).item.hasOwnProperty(y.id)&&(g=m());for(var O=0;O<i.length;O++){var L=ka(i[O],y);if(!h(i[O])){if(d.itemCreating&&"function"==typeof d.itemCreating){var A={dataSource:i,curData:i[O],text:L[y.text],options:d,fields:y};d.itemCreating(A)}var z=i[O];d.itemCreating&&"function"==typeof d.itemCreating&&(L=ka(i[O],y)),L.hasOwnProperty(y.id)&&!h(L[y.id])&&(g=L[y.id]);var k=[];if(d.showCheckBox&&(d.itemNavigable&&(L[y.url]||L[y.urlAttributes])?M.push(e("input",{className:Ax.check,attrs:{type:"checkbox"}})):k.push(e("input",{className:Ax.check,attrs:{type:"checkbox"}}))),!0===s)d.showIcon&&L.hasOwnProperty(y.iconCss)&&!h(L[y.iconCss])&&k.push(e("span",{className:Ax.icon+" "+L[y.iconCss]})),D=(C=f(e,z,L,y,d.itemClass,k,!(!z.hasOwnProperty("isHeader")||!z.isHeader),g,O,n)).querySelector("."+Ax.anchorWrap),d.itemNavigable&&M.length&&N(M,C.firstElementChild);else{if((C=b(e,z,L,y,d.itemClass,n,c)).classList.add(Ax.level+"-"+S.level),C.setAttribute("aria-level",S.level.toString()),"presentation"==S.groupItemRole&&C.removeAttribute("aria-level"),D=C.querySelector("."+Ax.anchorWrap),L.hasOwnProperty(y.tooltip)&&C.setAttribute("title",L[y.tooltip]),L.hasOwnProperty(y.htmlAttributes)&&L[y.htmlAttributes]&&u(C,L[y.htmlAttributes]),L.hasOwnProperty(y.enabled)&&!1===L[y.enabled]&&C.classList.add(Ax.disabled),L.hasOwnProperty(y.isVisible)&&!1===L[y.isVisible]&&(C.style.display="none"),L.hasOwnProperty(y.imageUrl)&&!h(L[y.imageUrl])&&!d.template){var j={src:L[y.imageUrl]};a(j,L[y.imageAttributes]);var P=e("img",{className:Ax.image,attrs:j});D?D.insertAdjacentElement("afterbegin",P):N([P],C.firstElementChild)}if(d.showIcon&&L.hasOwnProperty(y.iconCss)&&!h(L[y.iconCss])&&!d.template){var R=e("div",{className:Ax.icon+" "+L[y.iconCss]});D?D.insertAdjacentElement("afterbegin",R):N([R],C.firstElementChild)}k.length&&N(k,C.firstElementChild),d.itemNavigable&&M.length&&N(M,C.firstElementChild),function(t,e,i,n,o,s,a){var l=e[i.child]||[],h=e[i.hasChildren];if(l.length&&(h=!0,s.classList.add(Ax.hasChild),o.processSubChild)){var c=r(t,l,o,++a);s.appendChild(c)}if(o.expandCollapse&&h&&!o.template){s.firstElementChild.classList.add(Ax.iconWrapper);var d="Left"===o.expandIconPosition?N:E;d([t("div",{className:"e-icons "+o.expandIconClass})],s.querySelector("."+Ax.textContent))}}(e,L,y,0,d,C,S.level)}if(D&&I([C],[Ax.navigable]),d.itemCreated&&"function"==typeof d.itemCreated){A={dataSource:i,curData:i[O],text:L[y.text],item:C,options:d,fields:y};d.itemCreated(A)}M=[],T.push(C)}}return T}function r(t,e,i,r,o,s){var a=l({},x,i);return S(t,n(t,e,i,r,o,s),a.listClass,i)}function o(t,e){if(e&&t){return Array.prototype.slice.call(e).indexOf(t)}}function s(t,e,i){if(void 0===i&&(i=new QI),"Ascending"===t)i.sortBy(e,"ascending",!0);else if("Descending"===t)i.sortBy(e,"descending",!0);else for(var n=0;n<i.queries.length;n++)"onSortBy"===i.queries[n].fn&&i.queries.splice(n,1);return i}function c(t,e){return new ox(t).executeLocal(e)}function d(e,i){var n=l({},x,i),r=l({},t.defaultMappedFields,n.fields),o=e.cloneNode(!0),s=[];o.classList.add("json-parent");var a=o.querySelectorAll(".json-parent>li");o.classList.remove("json-parent");for(var h=0;h<a.length;h++){for(var c=a[h],p=c.querySelector("a"),u=c.querySelector("ul"),f={},v=p?p.childNodes:c.childNodes,y=Object.keys(v),b=0;b<v.length;b++)v[Number(y[b])].hasChildNodes()||(f[r.text]=v[Number(y[b])].textContent);var S=g(c);S.id?(f[r.id]=S.id,delete S.id):f[r.id]=m(),Object.keys(S).length&&(f[r.htmlAttributes]=S),p&&(S=g(p),Object.keys(S).length&&(f[r.urlAttributes]=S)),u&&(f[r.child]=d(u,i)),s.push(f)}return s}function p(t){for(var e={typeof:null,item:null},i=0;i<t.length;i++)if(!h(t[i]))return e={typeof:typeof t[i],item:t[i]};return e}function u(t,e){var i={};a(i,e),i.class&&(I([t],i.class.split(" ")),delete i.class),L(t,i)}function g(t){for(var e={},i=t.attributes,n=0;n<i.length;n++)e[i[n].nodeName]=i[n].nodeValue;return e}function m(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function f(t,e,i,n,r,o,s,a,c,d){var p,g=l({},x,d),m=l({},w,g.ariaAttributes),f=e,v=e;"string"!=typeof e&&"number"!=typeof e&&"boolean"!=typeof e&&(p=e,f="boolean"==typeof i[n.text]||"number"==typeof i[n.text]?i[n.text]:i[n.text]||"",v=i[n.value]);var b;b=h(p)||h(i[n.id])||""===i[n.id]?a+"-"+c:a;var S=t("li",{className:(!0===s?Ax.group:Ax.li)+" "+(h(r)?"":r),id:b,attrs:""!==m.groupItemRole&&""!==m.itemRole?{role:!0===s?m.groupItemRole:m.itemRole}:{}});return p&&i.hasOwnProperty(n.enabled)&&"false"===i[n.enabled].toString()&&S.classList.add(Ax.disabled),s?S.innerText=f:(S.setAttribute("data-value",h(v)?"null":v),S.setAttribute("role","option"),p&&i.hasOwnProperty(n.htmlAttributes)&&i[n.htmlAttributes]&&u(S,i[n.htmlAttributes]),o.length&&!g.itemNavigable&&E(o,S),p&&(i[n.url]||i[n.urlAttributes]&&i[n.urlAttributes].href)?S.appendChild(y(t,p,n,f,o,g.itemNavigable)):(o.length&&g.itemNavigable&&E(o,S),S.appendChild(document.createTextNode(f)))),S}function v(t){return{li:"e-"+t+"-item",ul:"e-"+t+"-parent e-ul",group:"e-"+t+"-group-item",icon:"e-"+t+"-icon",text:"e-"+t+"-text",check:"e-"+t+"-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-"+t+"-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-"+t+"-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"}}function y(t,e,i,n,r,o){var s=ka(e,i),l={href:s[i.url]};s.hasOwnProperty(i.urlAttributes)&&s[i.urlAttributes]&&(a(l,s[i.urlAttributes]),l.href=s[i.url]?s[i.url]:s[i.urlAttributes].href);var h;if(o){h=t("a",{className:Ax.text+" "+Ax.url});var c=t("div",{className:Ax.anchorWrap});r&&r.length&&E(r,c),c.appendChild(document.createTextNode(n)),E([c],h)}else h=t("a",{className:Ax.text+" "+Ax.url,innerHTML:n});return u(h,l),h}function b(t,e,i,n,r,o,s){var a,c,d,p=l({},x,o),u=l({},w,p.ariaAttributes),g=e;"string"!=typeof e&&"number"!=typeof e&&(d=e,g=i[n.text]||"",a=h(i._id)?i[n.id]:i._id,c=!(!e.hasOwnProperty("isHeader")||!e.isHeader)),o&&o.enableHtmlSanitizer&&(g=g);var f=t("li",{className:(!0===c?Ax.group:Ax.li)+" "+(h(r)?"":r),attrs:""!==u.groupItemRole&&""!==u.itemRole?{role:!0===c?u.groupItemRole:u.itemRole}:{}});if(!0==!h(a)?f.setAttribute("data-uid",a):f.setAttribute("data-uid",m()),c&&o&&o.groupTemplate){var v=ja(o.groupTemplate);if(s&&"listview"!==s.getModuleName()){(b=v(e,s,"groupTemplate",p.groupTemplateID,!!p.isStringTemplate,null,f))&&E(b,f)}else E(v(e,s,"groupTemplate",p.groupTemplateID,!!p.isStringTemplate),f)}else if(!c&&o&&o.template){v=ja(o.template);if(s&&"listview"!==s.getModuleName()){var b;(b=v(e,s,"template",p.templateID,!!p.isStringTemplate,null,f))&&E(b,f)}else E(v(e,s,"template",p.templateID,!!p.isStringTemplate),f)}else{var S=t("div",{className:Ax.textContent,attrs:""!==u.wrapperRole?{role:u.wrapperRole}:{}});if(d&&(i[n.url]||i[n.urlAttributes]&&i[n.urlAttributes].href))S.appendChild(y(t,d,n,g,null,p.itemNavigable));else{var I=t("span",{className:Ax.text,attrs:""!==u.itemText?{role:u.itemText}:{}});o&&o.enableHtmlSanitizer?I.innerText=g:I.innerHTML=g,S.appendChild(I)}f.appendChild(S)}return f}function S(t,e,i,n){var r=l({},x,n),o=l({},w,r.ariaAttributes),s=t("ul",{className:(Ax=v(r.moduleName)).ul+" "+(h(i)?"":i),attrs:""!==o.listRole?{role:o.listRole}:{}});return E(e,s),s}t.defaultMappedFields={id:"id",text:"text",url:"url",value:"value",isChecked:"isChecked",enabled:"enabled",expanded:"expanded",selected:"selected",iconCss:"iconCss",child:"child",isVisible:"isVisible",hasChildren:"hasChildren",tooltip:"tooltip",htmlAttributes:"htmlAttributes",urlAttributes:"urlAttributes",imageAttributes:"imageAttributes",imageUrl:"imageUrl",groupBy:null,sortBy:null};var w={level:1,listRole:"presentation",itemRole:"presentation",groupItemRole:"group",itemText:"list-item",wrapperRole:"presentation"},x={showCheckBox:!1,showIcon:!1,enableHtmlSanitizer:!1,expandCollapse:!1,fields:t.defaultMappedFields,ariaAttributes:w,listClass:"",itemClass:"",processSubChild:!1,sortOrder:"None",template:null,groupTemplate:null,headerTemplate:null,expandIconClass:"e-icon-collapsible",moduleName:"list",expandIconPosition:"Right",itemNavigable:!1};t.createList=function(t,i,n,o,s){var a=l({},x,n),h=l({},w,a.ariaAttributes),c=p(i).typeof;return"string"===c||"number"===c?e(t,i,o,n,s):r(t,i,n,h.level,o,s)},t.createListFromArray=e,t.createListItemFromArray=i,t.createListItemFromJson=n,t.createListFromJson=r,t.getSiblingLI=function(t,e,i){if(Ax=v(x.moduleName),t&&t.length){var n,r,s=Array.prototype.slice.call(t);for(n=s[(r=e?o(e,s):!0===i?s.length:-1)+(!0===i?-1:1)];n&&(!C(n)||n.classList.contains(Ax.disabled));)n=s[r+=!0===i?-1:1];return n}},t.indexOf=o,t.groupDataSource=function(e,i,n){void 0===n&&(n="None");var r=l({},t.defaultMappedFields,i),o=(new QI).group(r.groupBy),a=c(e,o=s(n,"key",o));e=[];for(var h=0;h<a.length;h++){var d=a[h].items,p={};p[r.text]=a[h].key,p.isHeader=!0;var u=r.text;"id"===u&&(p[u="text"]=a[h].key),p._id="group-list-item-"+(a[h].key?a[h].key.toString().trim():"undefined"),p.items=d,e.push(p);for(var g=0;g<d.length;g++)e.push(d[g])}return e},t.addSorting=s,t.getDataSource=c,t.createJsonFromElement=d,t.renderContentTemplate=function(e,i,n,r,o,s){for(var a,c=e("ul",{className:(Ax=v(x.moduleName)).ul,attrs:{role:"presentation"}}),d=l({},x,o),p=l({},t.defaultMappedFields,r),u=ja(i),g=[],f=m(),y=0;y<n.length;y++){var b=ka(n[y],p),S=n[y],w=S.isHeader;if(a="string"==typeof n[y]||"number"==typeof n[y]?S:b[p.value],d.itemCreating&&"function"==typeof d.itemCreating){var I={dataSource:n,curData:S,text:a,options:d,fields:p};d.itemCreating(I)}d.itemCreating&&"function"==typeof d.itemCreating&&(b=ka(n[y],p),a="string"==typeof n[y]||"number"==typeof n[y]?S:b[p.value]);var M=e("li",{id:f+"-"+y,className:w?Ax.group:Ax.li,attrs:{role:"presentation"}});if(w)"string"==typeof n[y]||"number"==typeof n[y]?M.innerText=S:M.innerText=b[p.text];else{var C=w?d.groupTemplateID:d.templateID;if(w)s&&"listview"!=s.getModuleName()?(N=u(S,s,"headerTemplate",C,!!d.isStringTemplate,null,M))&&E(N,M):E(u(S,s,"headerTemplate",C,!!d.isStringTemplate),M);else if(s&&"listview"!==s.getModuleName()){var N;(N=u(S,s,"template",C,!!d.isStringTemplate,null,M))&&E(N,M)}else E(u(S,s,"template",C,!!d.isStringTemplate),M);M.setAttribute("data-value",h(a)?"null":a),M.setAttribute("role","option")}d.itemCreated&&"function"==typeof d.itemCreated&&(I={dataSource:n,curData:S,text:a,item:M,options:d,fields:p},d.itemCreated(I)),g.push(M)}return E(g,c),c},t.renderGroupTemplate=function(e,i,n,r,o,s){for(var a=ja(e),h=l({},t.defaultMappedFields,n),c=l({},x,o),d=h.groupBy,p=0,u=r;p<u.length;p++){var g=u[p],m={};if(m[""+d]=g.textContent,g.innerHTML="",s&&"listview"!==s.getModuleName()){var f=a(m,s,"groupTemplate",c.groupTemplateID,!!c.isStringTemplate,null,g);f&&E(f,g)}else E(a(m,s,"groupTemplate",c.groupTemplateID,!!c.isStringTemplate),g)}return r},t.generateId=m,t.generateUL=S,t.generateIcon=function(t,e,i,n){var r=l({},x,n);return Ax=v(r.moduleName),("Left"===r.expandIconPosition?N:E)([t("div",{className:"e-icons "+r.expandIconClass+" "+(h(i)?"":i)})],e.querySelector("."+Ax.textContent)),e}}(uy||(uy={}));var zx,kx=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),jx=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Px={None:[],SlideLeft:["SlideRightOut","SlideLeftOut","SlideLeftIn","SlideRightIn"],SlideDown:["SlideTopOut","SlideBottomOut","SlideBottomIn","SlideTopIn"],Zoom:["FadeOut","FadeZoomOut","FadeZoomIn","FadeIn"],Fade:["FadeOut","FadeOut","FadeIn","FadeIn"]},Rx={None:[],SlideLeft:["SlideLeftOut","SlideRightOut","SlideRightIn","SlideLeftIn"],SlideDown:["SlideBottomOut","SlideTopOut","SlideTopIn","SlideBottomIn"],Zoom:["FadeZoomOut","FadeOut","FadeIn","FadeZoomIn"],Fade:["FadeOut","FadeOut","FadeIn","FadeIn"]},Bx={root:"e-listview",hover:"e-hover",selected:"e-active",focused:"e-focused",parentItem:"e-list-parent",listItem:"e-list-item",listIcon:"e-list-icon",textContent:"e-text-content",listItemText:"e-list-text",groupListItem:"e-list-group-item",hasChild:"e-has-child",view:"e-view",header:"e-list-header",headerText:"e-headertext",headerTemplateText:"e-headertemplate-text",text:"e-text",disable:"e-disabled",content:"e-content",icon:"e-icons",backIcon:"e-icon-back",backButton:"e-back-button",checkboxWrapper:"e-checkbox-wrapper",checkbox:"e-checkbox",checked:"e-check",checklist:"e-checklist",checkboxIcon:"e-frame",checkboxRight:"e-checkbox-right",checkboxLeft:"e-checkbox-left",listviewCheckbox:"e-listview-checkbox",itemCheckList:"e-checklist",virtualElementContainer:"e-list-virtualcontainer"},Hx=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return kx(e,t),jx([W("id")],e.prototype,"id",void 0),jx([W("text")],e.prototype,"text",void 0),jx([W("isChecked")],e.prototype,"isChecked",void 0),jx([W("isVisible")],e.prototype,"isVisible",void 0),jx([W("enabled")],e.prototype,"enabled",void 0),jx([W("iconCss")],e.prototype,"iconCss",void 0),jx([W("child")],e.prototype,"child",void 0),jx([W("tooltip")],e.prototype,"tooltip",void 0),jx([W("groupBy")],e.prototype,"groupBy",void 0),jx([W("text")],e.prototype,"sortBy",void 0),jx([W("htmlAttributes")],e.prototype,"htmlAttributes",void 0),jx([W("tableName")],e.prototype,"tableName",void 0),e}(Rp),Ux=(function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.previousSelectedItems=[],n.hiddenItems=[],n.enabledItems=[],n.disabledItems=[],n}kx(e,t),e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"htmlAttributes":this.setHTMLAttribute();break;case"cssClass":this.setCSSClass(e.cssClass);break;case"enable":this.setEnable();break;case"width":case"height":this.setSize();break;case"enableRtl":this.setEnableRTL();break;case"fields":this.listBaseOption.fields=this.fields.properties,this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():this.reRender();break;case"headerTitle":this.curDSLevel.length||this.header(this.headerTitle,!1,"header");break;case"query":this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():this.reRender();break;case"showHeader":this.header(this.headerTitle,!1,"header");break;case"enableVirtualization":h(this.contentContainer)||T(this.contentContainer),this.refresh();break;case"showCheckBox":case"checkBoxPosition":this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():this.setCheckbox();break;case"dataSource":this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():this.reRender();break;case"sortOrder":case"template":this.enableVirtualization||this.refresh();break;case"showIcon":this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():(this.listBaseOption.showIcon=this.showIcon,this.curViewDS=this.getSubDS(),this.resetCurrentList())}}},e.prototype.setHTMLAttribute=function(){Object.keys(this.htmlAttributes).length&&L(this.element,this.htmlAttributes)},e.prototype.setCSSClass=function(t){this.cssClass&&I([this.element],this.cssClass.split(" ").filter(function(t){return t})),t&&x([this.element],t.split(" ").filter(function(t){return t}))},e.prototype.setSize=function(){this.element.style.height=m(this.height),this.element.style.width=m(this.width),this.isWindow=!this.element.clientHeight},e.prototype.setEnable=function(){this.enableElement(this.element,this.enable)},e.prototype.setEnableRTL=function(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},e.prototype.enableElement=function(t,e){e?t.classList.remove(Bx.disable):t.classList.add(Bx.disable)},e.prototype.header=function(t,e,i){if(void 0===this.headerEle&&this.showHeader){this.enableHtmlSanitizer&&this.setProperties({headerTitle:Yu.sanitize(this.headerTitle)},!0),this.headerEle=this.createElement("div",{className:Bx.header});var n=this.createElement("span",{className:Bx.headerText,innerHTML:this.headerTitle}),r=this.createElement("div",{className:Bx.text,innerHTML:n.outerHTML}),o=this.createElement("div",{className:Bx.icon+" "+Bx.backIcon+" "+Bx.backButton,attrs:{style:"display:none;"}});if(this.headerEle.appendChild(o),this.headerEle.appendChild(r),this.headerTemplate){var s=gt(this.headerTemplate),a=this.createElement("div",{className:Bx.headerTemplateText}),l=s({},this,i,this.LISTVIEW_HEADERTEMPLATE_ID,null,null,this.headerEle);l&&E(l,a),E([a],this.headerEle),this.isReact&&this.renderReactTemplates()}this.headerTemplate&&this.headerTitle&&r.classList.add("header"),this.element.classList.add("e-has-header"),N([this.headerEle],this.element)}else if(this.headerEle)if(this.showHeader){this.headerEle.style.display="";r=this.headerEle.querySelector("."+Bx.headerText),o=this.headerEle.querySelector("."+Bx.backIcon);this.enableHtmlSanitizer&&(t=Yu.sanitize(t)),r.innerHTML=t,this.headerTemplate&&e&&(r.parentElement.classList.remove("header"),this.headerEle.querySelector("."+Bx.headerTemplateText).classList.add("nested-header")),this.headerTemplate&&!e&&(r.parentElement.classList.add("header"),this.headerEle.querySelector("."+Bx.headerTemplateText).classList.remove("nested-header"),this.headerEle.querySelector("."+Bx.headerTemplateText).classList.add("header")),o.style.display=!0===e?"":"none"}else this.headerEle.style.display="none"},e.prototype.switchView=function(t,e,i){var n=this;if(t&&e){var r=t.style.position,o="hidden"!==this.element.style.overflow?this.element.style.overflow:"";t.style.position="absolute",t.classList.add("e-view");var s=void 0,a=this.animation.duration;if(this.animation.effect)s=this.enableRtl?Rx[this.animation.effect]:Px[this.animation.effect];else{s=Px.SlideLeft,i=this.enableRtl,a=0}this.element.style.overflow="hidden",this.aniObj.animate(t,{name:!0===i?s[0]:s[1],duration:a,timingFunction:this.animation.easing,end:function(e){t.style.display="none",n.element.style.overflow=o,t.style.position=r,t.classList.remove("e-view")}}),e.style.display="",this.aniObj.animate(e,{name:!0===i?s[2]:s[3],duration:a,timingFunction:this.animation.easing,end:function(){n.trigger("actionComplete")}}),this.curUL=e}},e.prototype.preRender=function(){if(this.template)try{document.querySelectorAll(this.template).length&&this.setProperties({template:document.querySelector(this.template).innerHTML.trim()},!0)}catch(t){gt(this.template)}this.listBaseOption={template:this.template,headerTemplate:this.headerTemplate,groupTemplate:this.groupTemplate,expandCollapse:!0,listClass:"",ariaAttributes:{itemRole:"listitem",listRole:"group",itemText:"",groupItemRole:"presentation",wrapperRole:"presentation"},fields:this.fields.properties,sortOrder:this.sortOrder,showIcon:this.showIcon,itemCreated:this.renderCheckbox.bind(this),templateID:this.element.id+"Template",groupTemplateID:this.element.id+"GroupTemplate",enableHtmlSanitizer:this.enableHtmlSanitizer},this.initialization()},e.prototype.initialization=function(){this.curDSLevel=[],this.animateOptions={},this.curViewDS=[],this.currentLiElements=[],this.isNestedList=!1,this.selectedData=[],this.selectedId=this.enablePersistence?this.selectedId:[],this.LISTVIEW_TEMPLATE_ID=this.element.id+"Template",this.LISTVIEW_GROUPTEMPLATE_ID=this.element.id+"GroupTemplate",this.LISTVIEW_HEADERTEMPLATE_ID=this.element.id+"HeaderTemplate",this.aniObj=new zp(this.animateOptions),this.removeElement(this.curUL),this.removeElement(this.ulElement),this.removeElement(this.headerEle),this.removeElement(this.contentContainer),this.curUL=this.ulElement=this.liCollection=this.headerEle=this.contentContainer=void 0},e.prototype.renderCheckbox=function(t){var e=this;if(t.item.classList.contains(Bx.hasChild)&&(this.isNestedList=!0),this.showCheckBox&&this.isValidLI(t.item)){var i,n=void 0;(n=fi(this.createElement,!1,{checked:!1,enableRtl:this.enableRtl,cssClass:Bx.listviewCheckbox})).setAttribute("role","checkbox");var r=n.querySelector("."+Bx.checkboxIcon);if(t.item.classList.add(Bx.itemCheckList),t.item.firstElementChild.classList.add(Bx.checkbox),"string"!=typeof this.dataSource[0]&&"number"!=typeof this.dataSource[0])if(i=ka(t.curData,this.listBaseOption.fields),this.enablePersistence&&!h(this.selectedId)){-1!=this.selectedId.findIndex(function(t){return t==i[e.listBaseOption.fields.id].toString()})&&this.checkInternally(t,n)}else i[this.listBaseOption.fields.isChecked]&&this.checkInternally(t,n);else"string"!=typeof this.dataSource[0]&&"number"!=typeof this.dataSource[0]||-1===this.selectedData.indexOf(t.text)||this.checkInternally(t,n);n.setAttribute("aria-checked",r.classList.contains(Bx.checked)?"true":"false"),n.setAttribute("aria-label","checkbox"),"Left"===this.checkBoxPosition?(n.classList.add(Bx.checkboxLeft),t.item.firstElementChild.classList.add(Bx.checkboxLeft),t.item.firstElementChild.insertBefore(n,t.item.firstElementChild.childNodes[0])):(n.classList.add(Bx.checkboxRight),t.item.firstElementChild.classList.add(Bx.checkboxRight),t.item.firstElementChild.appendChild(n)),this.currentLiElements.push(t.item),"Left"===this.checkBoxPosition?this.virtualCheckBox=t.item.firstElementChild.children[0]:this.virtualCheckBox=t.item.firstElementChild.lastElementChild}},e.prototype.checkInternally=function(t,e){t.item.classList.add(Bx.selected),e.querySelector("."+Bx.checkboxIcon).classList.add(Bx.checked),e.setAttribute("aria-checked","true")},e.prototype.checkItem=function(t){this.toggleCheckBase(t,!0)},e.prototype.toggleCheckBase=function(t,e){if(this.showCheckBox){var i=t;if(t instanceof Object&&t.constructor!==HTMLLIElement&&(i=this.getLiFromObjOrElement(t)),!h(i)){var n=i.querySelector("."+Bx.checkboxIcon);!0===e?i.classList.add(Bx.selected):i.classList.remove(Bx.selected),!0===e?n.classList.add(Bx.checked):n.classList.remove(Bx.checked),n.parentElement.setAttribute("aria-checked",e?"true":"false")}this.setSelectedItemData(i),this.updateSelectedId()}},e.prototype.uncheckItem=function(t){this.toggleCheckBase(t,!1)},e.prototype.checkAllItems=function(){this.toggleAllCheckBase(!0)},e.prototype.uncheckAllItems=function(){this.toggleAllCheckBase(!1)},e.prototype.toggleAllCheckBase=function(t){if(this.showCheckBox){for(var e=0;e<this.liCollection.length;e++){var i=this.liCollection[e].querySelector("."+Bx.checkboxIcon);i&&(t?i.classList.contains(Bx.checked)||this.checkItem(this.liCollection[e]):i.classList.contains(Bx.checked)&&this.uncheckItem(this.liCollection[e]))}this.enableVirtualization&&this.virtualizationModule.checkedItem(t),this.updateSelectedId()}},e.prototype.setCheckbox=function(){if(this.showCheckBox)for(var t=Array.prototype.slice.call(this.element.querySelectorAll("."+Bx.listItem)),e={item:void 0,curData:void 0,dataSource:void 0,fields:void 0,options:void 0,text:""},i=0;i<t.length;i++){var n=t[i];e.item=n,e.curData=this.getItemData(n),n.querySelector("."+Bx.checkboxWrapper)&&this.removeElement(n.querySelector("."+Bx.checkboxWrapper)),this.renderCheckbox(e),e.item.classList.contains(Bx.selected)&&this.checkInternally(e,e.item.querySelector("."+Bx.checkboxWrapper))}else{for(t=Array.prototype.slice.call(this.element.querySelectorAll("."+Bx.itemCheckList)),i=0;i<t.length;i++){(n=t[i]).classList.remove(Bx.selected),n.firstElementChild.classList.remove(Bx.checkbox),this.removeElement(n.querySelector("."+Bx.checkboxWrapper))}this.selectedItems&&this.selectedItems.item.classList.add(Bx.selected)}},e.prototype.refreshItemHeight=function(){this.virtualizationModule&&this.virtualizationModule.refreshItemHeight()},e.prototype.clickHandler=function(t){var e=t.target;this.targetElement=e;var i,n=e.classList;if(n.contains(Bx.backIcon)||n.contains(Bx.headerText))this.showCheckBox&&this.curDSLevel[this.curDSLevel.length-1]&&this.uncheckAllItems(),this.back();else{var r=j(e.parentNode,"."+Bx.listItem);if(null===r&&(r=e),this.removeFocus(),this.enable&&this.showCheckBox&&this.isValidLI(r))if(t.target.classList.contains(Bx.checkboxIcon)){if(r.classList.add(Bx.focused),h(r.querySelector("."+Bx.checked))){var o={curData:void 0,dataSource:void 0,fields:void 0,options:void 0,text:void 0,item:r};this.checkInternally(o,o.item.querySelector("."+Bx.checkboxWrapper))}else this.uncheckItem(r),r.classList.add(Bx.focused);if(this.enableVirtualization&&this.virtualizationModule.setCheckboxLI(r,t),t){var s=this.selectEventData(r,t);a(s,{isChecked:r.querySelector("."+Bx.checkboxIcon).classList.contains(Bx.checked)}),this.trigger("select",s)}}else r.classList.contains(Bx.hasChild)?(this.removeHover(),this.removeSelect(),this.removeSelect(r),this.setSelectLI(r,t),r.classList.remove(Bx.selected)):(this.setCheckboxLI(r,t),"INPUT"!=e.nodeName&&"TEXTAREA"!=e.nodeName||(e.classList.add("e-focused"),this.targetElement=e));else this.setSelectLI(r,t),"INPUT"!=e.nodeName&&"TEXTAREA"!=e.nodeName||(e.classList.add("e-focused"),this.targetElement=e);h(i=j(t.target,"li"))||i.classList.contains("e-has-child")&&!t.target.parentElement.classList.contains("e-listview-checkbox")&&i.classList.add(Bx.disable)}this.updateSelectedId()},e.prototype.removeElement=function(t){return t&&t.parentNode&&t.parentNode.removeChild(t)},e.prototype.hoverHandler=function(t){var e=j(t.target.parentNode,"."+Bx.listItem);this.setHoverLI(e)},e.prototype.leaveHandler=function(t){this.removeHover()},e.prototype.homeKeyHandler=function(t,e){if(t.preventDefault(),Object.keys(this.dataSource).length&&this.curUL){var i=this.curUL.querySelectorAll("."+Bx.listItem),n=this.curUL.querySelector("."+Bx.focused)||this.curUL.querySelector("."+Bx.selected);n&&(n.classList.remove(Bx.focused),this.showCheckBox||n.classList.remove(Bx.selected));var r=e?i.length-1:0;i[r].classList.contains(Bx.hasChild)||this.showCheckBox?i[r].classList.add(Bx.focused):this.setSelectLI(i[r],t),i[r]?this.element.setAttribute("aria-activedescendant",i[r].id.toString()):this.element.removeAttribute("aria-activedescendant")}},e.prototype.onArrowKeyDown=function(t,e){var i,n;return!h(this.curUL.querySelector("."+Bx.hasChild))||this.showCheckBox?(n=this.curUL.querySelector("."+Bx.focused)||this.curUL.querySelector("."+Bx.selected),h(i=uy.getSiblingLI(this.curUL.querySelectorAll("."+Bx.listItem),n,e))||(n&&(n.classList.remove(Bx.focused),this.showCheckBox||n.classList.remove(Bx.selected)),i.classList.contains(Bx.hasChild)||this.showCheckBox?i.classList.add(Bx.focused):this.setSelectLI(i,t))):(n=this.curUL.querySelector("."+Bx.selected),i=uy.getSiblingLI(this.curUL.querySelectorAll("."+Bx.listItem),n,e),this.setSelectLI(i,t)),i?this.element.setAttribute("aria-activedescendant",i.id.toString()):this.element.removeAttribute("aria-activedescendant"),i},e.prototype.arrowKeyHandler=function(t,e){var i=this;if(t.preventDefault(),Object.keys(this.dataSource).length&&this.curUL){var n=this.onArrowKeyDown(t,e),r=this.element.getBoundingClientRect().top,o=this.element.getBoundingClientRect().height,s=this.curUL.querySelector("."+Bx.listItem).getBoundingClientRect(),a=void 0,l=void 0;if(this.fields.groupBy&&(l=this.curUL.querySelector("."+Bx.groupListItem).getBoundingClientRect()),n){var h=n.getBoundingClientRect().top,c=n.getBoundingClientRect().height;if(e)(a=this.isWindow?h:h-r)<0&&(!0===this.isWindow?window.scroll(0,pageYOffset+a):this.element.scrollTop=this.element.scrollTop+a);else{var d=this.isWindow?window.innerHeight:o;(a=this.isWindow?h+c:h-r+c)>d&&(!0===this.isWindow?window.scroll(0,pageYOffset+(a-d)):this.element.scrollTop=this.element.scrollTop+(a-d))}}else if(this.enableVirtualization&&e&&this.virtualizationModule.uiFirstIndex)this.onUIScrolled=function(){i.onArrowKeyDown(t,e),i.onUIScrolled=void 0},a=this.virtualizationModule.listItemHeight,!0===this.isWindow?window.scroll(0,pageYOffset-a):this.element.scrollTop=this.element.scrollTop-a;else if(e)if(this.showHeader&&this.headerEle){var p=l?l.top:s.top,u=this.headerEle.getBoundingClientRect();a=u.top<0?u.height-p:0,!0===this.isWindow?window.scroll(0,pageYOffset-a):this.element.scrollTop=0}else this.fields.groupBy&&(a=this.isWindow?l.top<0?l.top:0:r-s.top+l.height,!0===this.isWindow?window.scroll(0,pageYOffset+a):this.element.scrollTop=this.element.scrollTop-a)}},e.prototype.enterKeyHandler=function(t){if(Object.keys(this.dataSource).length&&this.curUL){var e=!h(this.curUL.querySelector("."+Bx.hasChild)),i=this.curUL.querySelector("."+Bx.focused);e&&i&&(i.classList.remove(Bx.focused),this.showCheckBox&&(this.removeSelect(),this.removeSelect(i),this.removeHover()),this.setSelectLI(i,t))}},e.prototype.spaceKeyHandler=function(t){if(t.preventDefault(),this.enable&&this.showCheckBox&&Object.keys(this.dataSource).length&&this.curUL){var e=this.curUL.querySelector("."+Bx.focused),i=void 0,n=void 0;if(!h(e)&&h(e.querySelector("."+Bx.checked))){var r={curData:void 0,dataSource:void 0,fields:void 0,options:void 0,text:void 0,item:e};i=r.item.querySelector("."+Bx.checkboxWrapper),this.checkInternally(r,i),n=i.querySelector("."+Bx.checkboxIcon+"."+Bx.icon)}else this.uncheckItem(e);var o=this.selectEventData(e,t);a(o,{isChecked:!!n&&n.classList.contains(Bx.checked)}),this.trigger("select",o),this.updateSelectedId()}},e.prototype.keyActionHandler=function(t){switch(t.keyCode){case 36:this.homeKeyHandler(t);break;case 35:this.homeKeyHandler(t,!0);break;case 40:this.arrowKeyHandler(t);break;case 38:this.arrowKeyHandler(t,!0);break;case 13:this.enterKeyHandler(t);break;case 8:this.showCheckBox&&this.curDSLevel[this.curDSLevel.length-1]&&this.uncheckAllItems(),this.back();break;case 32:!h(this.targetElement)&&this.targetElement.classList.contains("e-focused")||this.spaceKeyHandler(t)}},e.prototype.swipeActionHandler=function(t){"Right"===t.swipeDirection&&t.velocity>.5&&"touchend"===t.originalEvent.type&&(this.showCheckBox&&this.curDSLevel[this.curDSLevel.length-1]&&this.uncheckAllItems(),this.back())},e.prototype.focusout=function(){if(Object.keys(this.dataSource).length&&this.curUL){var t=this.curUL.querySelector("."+Bx.focused);t&&(t.classList.remove(Bx.focused),this.showCheckBox||this.selectedLI.classList.add(Bx.selected))}},e.prototype.wireEvents=function(){Ep.add(this.element,"keydown",this.keyActionHandler,this),Ep.add(this.element,"click",this.clickHandler,this),Ep.add(this.element,"mouseover",this.hoverHandler,this),Ep.add(this.element,"mouseout",this.leaveHandler,this),Ep.add(this.element,"focusout",this.focusout,this),this.touchModule=new yu(this.element,{swipe:this.swipeActionHandler.bind(this)})},e.prototype.unWireEvents=function(){Ep.remove(this.element,"click",this.clickHandler),Ep.remove(this.element,"mouseover",this.hoverHandler),Ep.remove(this.element,"mouseout",this.leaveHandler),Ep.remove(this.element,"mouseover",this.hoverHandler),Ep.remove(this.element,"mouseout",this.leaveHandler),this.touchModule.destroy(),this.touchModule=null},e.prototype.removeFocus=function(){for(var t=0,e=this.element.querySelectorAll("."+Bx.focused);t<e.length;t++){e[t].classList.remove(Bx.focused)}},e.prototype.removeHover=function(){var t=this.element.querySelector("."+Bx.hover);t&&t.classList.remove(Bx.hover)},e.prototype.removeSelect=function(t){if(h(t))for(var e=0,i=this.element.querySelectorAll("."+Bx.selected);e<i.length;e++){var n=i[e];this.showCheckBox&&n.querySelector("."+Bx.checked)||n.classList.remove(Bx.selected)}else t.classList.remove(Bx.selected)},e.prototype.isValidLI=function(t){return t&&t.classList.contains(Bx.listItem)&&!t.classList.contains(Bx.groupListItem)&&!t.classList.contains(Bx.disable)},e.prototype.setCheckboxLI=function(t,e){if(this.isValidLI(t)&&this.enable&&this.showCheckBox){this.curUL.querySelector("."+Bx.focused)&&this.curUL.querySelector("."+Bx.focused).classList.remove(Bx.focused);var i=t.querySelector("textarea")||t.querySelector("input");t.classList.add(Bx.focused),h(e)||e.target===i&&i.classList.add("e-focused");var n=t.querySelector("."+Bx.checkboxWrapper),r=n.querySelector("."+Bx.checkboxIcon+"."+Bx.icon);this.removeHover(),r.classList.contains(Bx.checked)?(r.classList.remove(Bx.checked),t.classList.remove(Bx.selected)):(r.classList.add(Bx.checked),t.classList.add(Bx.selected)),n.setAttribute("aria-checked",r.classList.contains(Bx.checked)?"true":"false");var o=this.selectEventData(t,e);a(o,{isChecked:r.classList.contains(Bx.checked)}),this.enableVirtualization&&this.virtualizationModule.setCheckboxLI(t,e),this.trigger("select",o),this.setSelectedItemData(t),this.renderSubList(t)}},e.prototype.selectEventData=function(t,e){var i=this.getItemData(t),n=ka(i,this.listBaseOption.fields),r={};return a(r,!h(i)&&"string"==typeof this.dataSource[0]||"number"==typeof this.dataSource[0]?{item:t,text:t&&t.innerText.trim(),data:this.dataSource}:{item:t,text:n&&n[this.listBaseOption.fields.text],data:i}),e&&a(r,{isInteracted:!0,event:e,cancel:!1,index:this.curUL&&Array.prototype.indexOf.call(this.curUL.children,t)}),r},e.prototype.setSelectedItemData=function(t){var e=this.getItemData(t),i=ka(e,this.listBaseOption.fields);h(e)||"string"!=typeof this.dataSource[0]&&"number"!=typeof this.dataSource[0]?this.selectedItems={item:t,text:i&&i[this.listBaseOption.fields.text],data:e}:this.selectedItems={item:t,text:t&&t.innerText.trim(),data:this.dataSource}},e.prototype.setSelectLI=function(t,e){var i=this;if(this.isValidLI(t)&&!t.classList.contains(Bx.selected)&&this.enable){this.showCheckBox||this.removeSelect(),t.classList.add(Bx.selected),this.removeHover(),this.setSelectedItemData(t),this.enableVirtualization&&this.virtualizationModule.setSelectLI(t,e);var n=this.selectEventData(t,e);this.trigger("select",n,function(e){e.cancel||(i.selectedLI=t,i.renderSubList(t))})}},e.prototype.setHoverLI=function(t){if(this.isValidLI(t)&&!t.classList.contains(Bx.hover)&&this.enable){var e=this.element.querySelectorAll("."+Bx.hover);e&&e.length&&x(e,Bx.hover),t.classList.contains(Bx.selected)&&!this.showCheckBox||t.classList.add(Bx.hover)}},e.prototype.getSubDS=function(){var t=this.curDSLevel;if(t.length){for(var e=this.localData,i=0,n=t;i<n.length;i++){var r=n[i],o={};o[this.fields.id]=r,this.curDSJSON=this.findItemFromDS(e,o);var s=ka(this.curDSJSON,this.listBaseOption.fields);e=this.curDSJSON?s[this.fields.child]:e}return e}return this.localData},e.prototype.getItemData=function(t){var e,i=this.dataSource instanceof ox?this.localData:this.dataSource,n=this.getElementUID(t);return e=h(this.element.querySelector("."+Bx.hasChild))&&this.fields.groupBy?this.curViewDS:i,this.findItemFromDS(e,n)},e.prototype.findItemFromDS=function(t,e,i){var n,r=this;return t&&t.length&&e?t.some(function(o){var s=ka(o,r.listBaseOption.fields);if(!e[r.fields.id]&&!e[r.fields.text]||e[r.fields.id]&&(!h(s[r.fields.id])&&s[r.fields.id].toString())!==e[r.fields.id].toString()||e[r.fields.text]&&s[r.fields.text]!==e[r.fields.text])if("object"!=typeof o&&-1!==t.indexOf(o))n=i?t:o;else if(!h(e[r.fields.id])&&h(s[r.fields.id])){var a=r.element.querySelector('[data-uid="'+e[r.fields.id]+'"]');a&&a.innerText.trim()===s[r.fields.text]&&(n=o)}else s.hasOwnProperty(r.fields.child)&&s[r.fields.child].length&&(n=r.findItemFromDS(s[r.fields.child],e,i));else n=i?t:o;return!!n}):n=t,n},e.prototype.getQuery=function(){var t=[],e=this.query?this.query:new QI;if(!this.query){for(var i=0,n=Object.keys(this.fields.properties);i<n.length;i++){var r=n[i];"tableName"!==r&&this.fields[""+r]&&this.fields[""+r]!==uy.defaultMappedFields[""+r]&&-1===t.indexOf(this.fields[""+r])&&t.push(this.fields[""+r])}e.select(t),this.fields.properties.hasOwnProperty("tableName")&&e.from(this.fields.tableName)}return e},e.prototype.setViewDataSource=function(t){void 0===t&&(t=this.localData);var e=h(this.fields.sortBy)?this.fields.text:this.fields.sortBy,i=uy.addSorting(this.sortOrder,e);t&&this.fields.groupBy?"None"!==this.sortOrder?this.curViewDS=uy.groupDataSource(uy.getDataSource(t,i),this.listBaseOption.fields,this.sortOrder):this.curViewDS=uy.groupDataSource(t,this.listBaseOption.fields,this.sortOrder):t&&"None"!==this.sortOrder?this.curViewDS=uy.getDataSource(t,i):this.curViewDS=t},e.prototype.isInAnimation=function(){return this.curUL.classList.contains(".e-animate")},e.prototype.renderRemoteLists=function(t,e){this.isDestroyed||(this.localData=t.result,e.removeElement(e.contentContainer),this.renderList(),this.trigger("actionComplete",t))},e.prototype.triggerActionFailure=function(t){this.isDestroyed||this.trigger("actionFailure",t)},e.prototype.setLocalData=function(){var t=this;this.trigger("actionBegin");var e=this;if(this.dataSource instanceof ox)this.dataSource.ready?this.dataSource.ready.then(function(i){t.isOffline=t.dataSource.dataSource.offline,t.dataSource instanceof ox&&t.isOffline&&t.renderRemoteLists(i,e)}).catch(function(e){t.triggerActionFailure(e)}):this.dataSource.executeQuery(this.getQuery()).then(function(i){t.renderRemoteLists(i,e)}).catch(function(e){t.triggerActionFailure(e)});else if(this.dataSource&&this.dataSource.length)this.localData=this.dataSource,this.renderList(),this.trigger("actionComplete",{data:this.localData});else{var i=this.element.querySelector("ul");i&&(O(i),this.setProperties({dataSource:uy.createJsonFromElement(i)},!0),this.localData=this.dataSource,this.renderList(),this.trigger("actionComplete",{data:this.localData}))}},e.prototype.reRender=function(){this.removeElement(this.headerEle),this.removeElement(this.ulElement),this.removeElement(this.contentContainer),this.isReact&&this.clearTemplate(),-1===Object.keys(window).indexOf("ejsInterop")&&(this.element.innerHTML=""),this.headerEle=this.ulElement=this.liCollection=void 0,this.header(),this.setLocalData()},e.prototype.resetCurrentList=function(){this.setViewDataSource(this.curViewDS),this.contentContainer.innerHTML="",this.createList(),this.renderIntoDom(this.curUL)},e.prototype.setAttributes=function(t){for(var e=0;e<t.length;e++){var i=t[e];i.classList.contains("e-list-item")&&(i.setAttribute("id",this.element.id+"_"+i.getAttribute("data-uid")),i.setAttribute("tabindex","-1"))}},e.prototype.createList=function(){this.currentLiElements=[],this.isNestedList=!1,this.ulElement=this.curUL=uy.createList(this.createElement,this.curViewDS,this.listBaseOption,null,this),this.liCollection=this.curUL.querySelectorAll("."+Bx.listItem),this.setAttributes(this.liCollection)},e.prototype.exceptionEvent=function(t){this.trigger("actionFailure",t)},e.prototype.UpdateCurrentUL=function(){this.ulElement=this.curUL=this.element.querySelector("."+Bx.parentItem),this.curUL&&(this.liCollection=this.curUL.querySelectorAll("."+Bx.listItem))},e.prototype.renderSubList=function(t){this.liElement=t;var e=t.getAttribute("data-uid");if(t.classList.contains(Bx.hasChild)&&e){var i=j(t.parentNode,"."+Bx.parentItem),n=this.element.querySelector("[pid='"+e+"']");if(this.curDSLevel.push(e),this.setViewDataSource(this.getSubDS()),!n){var r=this.curViewDS;n=uy.createListFromJson(this.createElement,r,this.listBaseOption,this.curDSLevel.length,null,this),this.isReact&&this.renderReactTemplates();var o=n.querySelectorAll("."+Bx.listItem);this.setAttributes(o),n.setAttribute("pID",e),n.style.display="none",this.renderIntoDom(n)}if(this.switchView(i,n),this.liCollection=this.curUL.querySelectorAll("."+Bx.listItem),this.selectedItems){var s=ka(this.selectedItems.data,this.listBaseOption.fields);this.header(s[this.listBaseOption.fields.text],!0,"header")}this.selectedLI=void 0}},e.prototype.renderIntoDom=function(t){this.contentContainer.appendChild(t)},e.prototype.renderList=function(t){this.setViewDataSource(t),this.enableVirtualization?(Object.keys(this.dataSource).length&&(!this.template&&!this.groupTemplate||this.virtualizationModule.isNgTemplate()||(this.isReact||this.isVue?("string"==typeof this.template&&(this.listBaseOption.template=null),"string"==typeof this.groupTemplate&&(this.listBaseOption.groupTemplate=null)):(this.listBaseOption.template=null,this.listBaseOption.groupTemplate=null),this.listBaseOption.itemCreated=this.virtualizationModule.createUIItem.bind(this.virtualizationModule))),this.virtualizationModule.uiVirtualization()):(this.createList(),this.contentContainer=this.createElement("div",{className:Bx.content}),this.element.appendChild(this.contentContainer),this.renderIntoDom(this.ulElement),this.isReact&&this.renderReactTemplates())},e.prototype.getElementUID=function(t){var e={};return t instanceof Element?e[this.fields.id]=t.getAttribute("data-uid"):e=t,e},e.prototype.render=function(){this.element.classList.add(Bx.root),L(this.element,{role:"list",tabindex:"0"}),this.setCSSClass(),this.setEnableRTL(),this.setEnable(),this.setSize(),this.wireEvents(),this.header(),this.setLocalData(),this.setHTMLAttribute(),this.rippleFn=et(this.element,{selector:"."+Bx.listItem}),this.renderComplete()},e.prototype.destroy=function(){this.isReact&&this.clearTemplate(),this.unWireEvents();var e=[Bx.root,Bx.disable,"e-rtl","e-has-header","e-lib"].concat(this.cssClass.split(" ").filter(function(t){return t}));x([this.element],e),this.element.removeAttribute("role"),this.element.removeAttribute("tabindex"),this.curUL=this.ulElement=this.liCollection=this.headerEle=void 0,this.element.innerHTML="",this.contentContainer=null,this.selectedItems=null,this.selectedLI=null,this.liElement=null,this.targetElement=null,this.currentLiElements=null,this.virtualCheckBox=null,t.prototype.destroy.call(this)},e.prototype.back=function(){var t=this.curDSLevel[this.curDSLevel.length-1];if(void 0!==t&&!this.isInAnimation()){this.curDSLevel.pop(),this.setViewDataSource(this.getSubDS());var e=this.element.querySelector("[data-uid='"+t+"']"),i=this.curUL;e?e=e.parentElement:(this.createList(),this.renderIntoDom(this.ulElement),e=this.curUL);var n=ka(this.curDSJSON,this.listBaseOption.fields)[this.fields.text];this.switchView(i,e,!0),this.removeFocus();var r=this.element.querySelector("[data-uid='"+t+"']");r.classList.remove(Bx.disable),r.classList.add(Bx.focused),this.showCheckBox&&r.querySelector("."+Bx.checkboxIcon).classList.contains(Bx.checked)||r.classList.remove(Bx.selected),this.liCollection=this.curUL.querySelectorAll("."+Bx.listItem),this.enableHtmlSanitizer&&this.setProperties({headerTitle:Yu.sanitize(this.headerTitle)},!0),this.header(this.curDSLevel.length?n:this.headerTitle,!!this.curDSLevel.length,"header")}},e.prototype.selectItem=function(t){this.enableVirtualization?this.virtualizationModule.selectItem(t):this.showCheckBox?this.setCheckboxLI(this.getLiFromObjOrElement(t)):!0===h(t)?this.removeSelect():this.setSelectLI(this.getLiFromObjOrElement(t))},e.prototype.getLiFromObjOrElement=function(t){var e,i=this.dataSource instanceof ox?this.localData:this.dataSource;if(!h(t))if("string"==typeof i[0]||"number"==typeof i[0])if(t instanceof Element){for(var n=t.getAttribute("data-uid").toString(),r=0;r<this.liCollection.length;r++)if(this.liCollection[r].getAttribute("data-uid").toString()===n){e=this.liCollection[r];break}}else Array.prototype.some.call(this.curUL.querySelectorAll("."+Bx.listItem),function(i){return i.innerText.trim()===t.toString()&&(e=i,!0)});else{var o=this.getItemData(t),s=ka(o,this.listBaseOption.fields);if(o&&(e=this.element.querySelector('[data-uid="'+s[this.fields.id]+'"]'),!this.enableVirtualization&&h(e))){var a=this.element.querySelectorAll("."+Bx.listItem);for(r=0;r<a.length;r++)a[r].innerText.trim()===s[this.fields.text]&&(e=a[r])}}return e},e.prototype.selectMultipleItems=function(t){if(!h(t))for(var e=0;e<t.length;e++)h(t[e])||this.selectItem(t[e])},e.prototype.getParentId=function(){var t=[];if(this.isNestedList)for(var e=this.curDSLevel.length-1;e>=0;e--)t.push(this.curDSLevel[e]);return t},e.prototype.updateSelectedId=function(){this.selectedId=[];for(var t=this.curUL.getElementsByClassName(Bx.selected),e=0;e<t.length;e++){var i=this.getItemData(t[e]);i[this.listBaseOption.fields.id]&&this.selectedId.push(i[this.listBaseOption.fields.id])}},e.prototype.getSelectedItems=function(){var t,e=!1;this.selectedId=[];var i=this.dataSource instanceof ox?this.localData:this.dataSource;if(this.enableVirtualization&&!e)t=this.virtualizationModule.getSelectedItems(),e=!0;else if(this.showCheckBox&&!e){var n=this.curUL.getElementsByClassName(Bx.selected),r=[],o=[];this.selectedId=[];for(var s=[],a=0;a<n.length;a++)if("string"==typeof i[0]||"number"==typeof i[0])r.push(n[a].innerText.trim());else{var l=this.getItemData(n[a]),c=ka(l,this.listBaseOption.fields);this.isNestedList?s.push({data:l,parentId:this.getParentId()}):o.push(l),c?(r.push(c[this.listBaseOption.fields.text]),this.selectedId.push(c[this.listBaseOption.fields.id])):(r.push(void 0),this.selectedId.push(void 0))}"string"!=typeof i[0]&&"number"!=typeof i[0]||e||(t={item:n,data:i,text:r},e=!0),this.isNestedList&&!e?(t={item:n,data:s,text:r},e=!0):e||(t={item:n,data:o,text:r},e=!0)}else if(!e){var d=this.element.getElementsByClassName(Bx.selected)[0];c=ka(this.getItemData(d),this.listBaseOption.fields);"string"!=typeof i[0]&&"number"!=typeof i[0]||e?e||(h(c)||h(d)?(t=void 0,e=!0):(this.selectedId.push(c[this.listBaseOption.fields.id]),t={text:c[this.listBaseOption.fields.text],item:d,data:this.getItemData(d)},e=!0)):(t=h(d)?void 0:{item:d,data:i,text:d.innerText.trim()},e=!0)}return t},e.prototype.findItem=function(t){return this.getItemData(t)},e.prototype.enableItem=function(t){this.setItemState(t,!0),this.enableVirtualization&&this.virtualizationModule.enableItem(t)},e.prototype.disableItem=function(t){this.setItemState(t,!1),this.enableVirtualization&&this.virtualizationModule.disableItem(t)},e.prototype.setItemState=function(t,e){var i=this.getItemData(t),n=ka(i,this.listBaseOption.fields);if(i){var r=this.element.querySelector('[data-uid="'+n[this.fields.id]+'"]');e?(r&&r.classList.remove(Bx.disable),delete i[this.fields.enabled]):e||(r&&r.classList.add(Bx.disable),i[this.fields.enabled]=!1)}},e.prototype.showItem=function(t){this.showHideItem(t,!1,""),this.enableVirtualization&&this.virtualizationModule.showItem(t)},e.prototype.hideItem=function(t){this.showHideItem(t,!0,"none"),this.enableVirtualization&&this.virtualizationModule.hideItem(t)},e.prototype.showHideItem=function(t,e,i){var n=this.getItemData(t),r=ka(n,this.listBaseOption.fields);if(n){var o=this.element.querySelector('[data-uid="'+r[this.fields.id]+'"]');o&&(o.style.display=i),e?n[this.fields.isVisible]=!1:delete n[this.fields.isVisible]}},e.prototype.addItem=function(t,e){void 0===e&&(e=void 0);var i=this.dataSource instanceof ox?this.localData:this.dataSource;this.addItemInternally(t,e,i)},e.prototype.addItemInternally=function(t,e,i){if(t instanceof Array)if(this.enableVirtualization)this.virtualizationModule.addItem(t,e,i);else{var n=this.findItemFromDS(i,e),r=void 0;if(n){(r=ka(n,this.listBaseOption.fields)[this.fields.child])||(r=[]),r=r.concat(t)}if(n instanceof Array){for(var o=0;o<t.length;o++){i.push(t[o]),this.setViewDataSource(i);var s=this.contentContainer?this.contentContainer.children[0]:null;this.contentContainer&&s?this.addItemIntoDom(t[o],s,this.curViewDS):this.reRender()}this.liCollection=this.curUL.querySelectorAll("."+Bx.listItem)}else n&&(n[this.fields.child]=r,this.addItemInNestedList(n,t))}},e.prototype.addItemInNestedList=function(t,e){var i=t[this.fields.id],n=t[this.fields.child],r=this.element.querySelector("[pid='"+i+"']"),o=this.element.querySelector("[data-uid='"+i+"']"),s=r||(o?j(o,"ul"):null),a=r?n:[t];if(!!o&&!o.classList.contains(Bx.hasChild)){var l=uy.createListItemFromJson(this.createElement,a,this.listBaseOption,null,null,this);this.setAttributes(l),s.insertBefore(l[0],o),T(o)}if(r&&e)for(var h=0;h<e.length;h++)a.push(e[h]),this.addItemIntoDom(e[h],s,a)},e.prototype.addItemIntoDom=function(t,e,i){var n=i.indexOf(t);this.addListItem(t,n,e,i);var r=i[n-1];r&&r.isHeader&&1===r.items.length&&this.addListItem(r,n-1,e,i)},e.prototype.addListItem=function(t,e,i,n){var r=this.getLiFromObjOrElement(n[e+1])||this.getLiFromObjOrElement(n[e+2])||null,o=uy.createListItemFromJson(this.createElement,[t],this.listBaseOption,null,null,this);if(this.setAttributes(o),this.template&&this.isReact&&this.renderReactTemplates(),this.fields.groupBy&&n[e+1]&&n[e+1].isHeader){var s=this.getLiFromObjOrElement(n[e-1]);s&&(r=s.nextElementSibling)}i.insertBefore(o[0],r)},e.prototype.removeItem=function(t){var e=this.dataSource instanceof ox?this.localData:this.dataSource;this.enableVirtualization?this.virtualizationModule.removeItem(t):this.removeItemFromList(t,e)},e.prototype.removeItemFromList=function(t,e){var i,n=this,r=this.curViewDS,o=t instanceof Element?this.getElementUID(t):t;if(i=this.findItemFromDS(e,o,!0)){var s;s=this.findItemFromDS(i,o);var a=r.indexOf(s),l=this.getLiFromObjOrElement(t),c=void 0;this.validateNestedView(l),this.fields.groupBy&&this.curViewDS[a-1]&&r[a-1].isHeader&&1===r[a-1].items.length&&l&&l.previousElementSibling.classList.contains(Bx.groupListItem)&&(h(l.nextElementSibling)||l.nextElementSibling&&l.nextElementSibling.classList.contains(Bx.groupListItem))&&(c=l.previousElementSibling),l&&T(l),c&&T(c);var d=i.length-1<=0?this.findParent(this.localData,this.fields.id,function(t){return t===s[n.fields.id]},null):null,p=i.indexOf(s);if(i.splice(p,1),this.setViewDataSource(e),d&&d.parent&&Array.isArray(d.parent[this.fields.child])&&d.parent[this.fields.child].length<=0){var u=this.getLiFromObjOrElement(d.parent);if(u){var g=uy.createListItemFromJson(this.createElement,[d.parent],this.listBaseOption,null,null,this);this.setAttributes(g),u.parentElement.insertBefore(g[0],u),u.parentElement.removeChild(u)}}i.length<=0&&this.back(),this.liCollection=Array.prototype.slice.call(this.element.querySelectorAll("."+Bx.listItem))}},e.prototype.validateNestedView=function(t){var e=t?t.getAttribute("data-uid").toString().toLowerCase():null;if(e&&this.curDSLevel&&this.curDSLevel.length>0)for(;this.curDSLevel.some(function(t){return t.toString().toLowerCase()===e});)this.back()},e.prototype.removeMultipleItems=function(t){if(t.length)for(var e=0;e<t.length;e++)this.removeItem(t[e])},e.prototype.findParent=function(t,e,i,n){if(t.hasOwnProperty(e)&&!0===i(t[e]))return l({},t);for(var r=0;r<Object.keys(t).length;r++)if(t[Object.keys(t)[r]]&&"object"==typeof t[Object.keys(t)[r]]){var o=this.findParent(t[Object.keys(t)[r]],e,i,t);if(null!=o)return o.parent||(o.parent=n),o}return null},e.prototype.getModuleName=function(){return"listview"},e.prototype.requiredModules=function(){var t=[];return this.enableVirtualization&&t.push({args:[this],member:"virtualization"}),t},e.prototype.getPersistData=function(){return this.addOnPersist(["cssClass","enableRtl","htmlAttributes","enable","fields","animation","headerTitle","sortOrder","showIcon","height","width","showCheckBox","checkBoxPosition","selectedId"])},jx([W("")],e.prototype,"cssClass",void 0),jx([W(!1)],e.prototype,"enableVirtualization",void 0),jx([W({})],e.prototype,"htmlAttributes",void 0),jx([W(!0)],e.prototype,"enable",void 0),jx([W([])],e.prototype,"dataSource",void 0),jx([W()],e.prototype,"query",void 0),jx([Q(uy.defaultMappedFields,Hx)],e.prototype,"fields",void 0),jx([W({effect:"SlideLeft",duration:400,easing:"ease"})],e.prototype,"animation",void 0),jx([W("None")],e.prototype,"sortOrder",void 0),jx([W(!1)],e.prototype,"showIcon",void 0),jx([W(!1)],e.prototype,"showCheckBox",void 0),jx([W("Left")],e.prototype,"checkBoxPosition",void 0),jx([W("")],e.prototype,"headerTitle",void 0),jx([W(!1)],e.prototype,"showHeader",void 0),jx([W(!1)],e.prototype,"enableHtmlSanitizer",void 0),jx([W("")],e.prototype,"height",void 0),jx([W("")],e.prototype,"width",void 0),jx([W(null)],e.prototype,"template",void 0),jx([W(null)],e.prototype,"headerTemplate",void 0),jx([W(null)],e.prototype,"groupTemplate",void 0),jx([Z()],e.prototype,"select",void 0),jx([Z()],e.prototype,"actionBegin",void 0),jx([Z()],e.prototype,"actionComplete",void 0),jx([Z()],e.prototype,"actionFailure",void 0),e=jx([$],e)}(Kp),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),Vx=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},_x=(function(t){function e(e,i){var n=t.call(this,i,e)||this;return n.getHelper=function(t){var e=n.getSortableElement(t.sender.target);if(!n.isValidTarget(e,n))return!1;var i;return n.helper?i=n.helper({sender:e,element:t.element}):((i=e.cloneNode(!0)).style.width=e.offsetWidth+"px",i.style.height=e.offsetHeight+"px"),I([i],["e-sortableclone"]),document.body.appendChild(i),i},n.onDrag=function(t){if(t.target){n.trigger("drag",{event:t.event,element:n.element,target:t.target});var e=n.getSortableInstance(t.target),i=n.getSortableElement(t.target,e);if(!(n.isValidTarget(i,e)||t.target.className.indexOf("e-list-group-item")>-1)||n.curTarget===i&&h(e.placeHolder)||e.placeHolderElement&&e.placeHolderElement===t.target)n.curTarget!==n.target&&n.scope&&n.curTarget!==i&&!h(e.placeHolder)&&(O(n.getSortableInstance(n.curTarget).placeHolderElement),n.curTarget=n.target);else{if(t.target.className.indexOf("e-list-group-item")>-1&&(i=t.target),n.curTarget=i,n.target===i)return;var r=n.getIndex(e.placeHolderElement,e),o=n.getPlaceHolder(i,e),s=void 0;if(o){r=h(r)?n.getIndex(n.target):r,s=n.getIndex(i,e,t.event);var a=n.isPlaceHolderPresent(e);if(a&&r===s)return;a&&O(e.placeHolderElement),e.placeHolderElement=o,t.target.className.indexOf("e-list-group-item")>-1?e.element.insertBefore(e.placeHolderElement,e.element.children[s]):e.element!==n.element&&s===e.element.childElementCount?e.element.appendChild(e.placeHolderElement):e.element.insertBefore(e.placeHolderElement,e.element.children[s]),n.refreshDisabled(r,s,e)}else{r=h(r)?n.getIndex(n.target):n.getIndex(i,e)<r||!r?r:r-1,s=n.getIndex(i,e);var l=e.element!==n.element?s:r<s?s+1:s;n.updateItemClass(e),e.element.insertBefore(n.target,e.element.children[l]),n.refreshDisabled(r,s,e),n.curTarget=n.target,n.trigger("drop",{droppedElement:n.target,element:e.element,previousIndex:r,currentIndex:s,target:t.target,helper:document.getElementsByClassName("e-sortableclone")[0],event:t.event,scope:n.scope})}}if(e=n.getSortableInstance(n.curTarget),h(i)&&t.target!==e.placeHolderElement)n.isPlaceHolderPresent(e)&&n.removePlaceHolder(e);else{var c;[].slice.call(document.getElementsByClassName("e-sortable-placeholder")).forEach(function(t){(c=n.getSortableInstance(t)).element&&c!==e&&n.removePlaceHolder(c)})}}},n.onDragStart=function(t){n.target=n.getSortableElement(t.target);var e=!1;n.target.classList.add("e-grabbed"),n.curTarget=n.target,t.helper=document.getElementsByClassName("e-sortableclone")[0];var i={cancel:!1,element:n.element,target:n.target};n.trigger("beforeDragStart",i,function(i){i.cancel&&(e=i.cancel,n.onDragStop(t))}),e||(f?n.trigger("dragStart",{event:t.event,element:n.element,target:n.target,bindEvents:t.bindEvents,dragElement:t.dragElement}):n.trigger("dragStart",{event:t.event,element:n.element,target:n.target}))},n.onDragStop=function(t){var e,i,r,o=n.getSortableInstance(n.curTarget);e=n.getIndex(n.target);var s=n.isPlaceHolderPresent(o);if(s){var a=n.getIndex(o.placeHolderElement,o),l={previousIndex:e,currentIndex:a,target:t.target,droppedElement:n.target,helper:t.helper,cancel:!1,handled:!1};n.trigger("beforeDrop",l,function(i){if(!i.cancel){if(r=i.handled,n.updateItemClass(o),i.handled){var s=n.target.cloneNode(!0);n.target.classList.remove("e-grabbed"),n.target=s}o.element.insertBefore(n.target,o.placeHolderElement);var a=n.getIndex(n.target,o);e=n===o&&e-a>1?e-1:e,n.trigger("drop",{event:t.event,element:o.element,previousIndex:e,currentIndex:a,target:t.target,helper:t.helper,droppedElement:n.target,scopeName:n.scope,handled:r})}O(o.placeHolderElement)})}if(o=n.getSortableInstance(t.target),i=o.element.childElementCount,e=n.getIndex(n.target),o.element===t.target||!s&&n.curTarget===n.target){var h={previousIndex:e,currentIndex:n.curTarget===n.target?e:i,target:t.target,droppedElement:n.target,helper:t.helper,cancel:!1};n.trigger("beforeDrop",h,function(r){o.element!==t.target||r.cancel||(n.updateItemClass(o),o.element.appendChild(n.target),n.trigger("drop",{event:t.event,element:o.element,previousIndex:e,currentIndex:i,target:t.target,helper:t.helper,droppedElement:n.target,scopeName:n.scope}))})}n.target.classList.remove("e-grabbed"),n.target=null,n.curTarget=null,O(t.helper),H(n.element,"draggable").intDestroy(t.event)},n.bind(),n}Ux(e,t),i=e,e.prototype.bind=function(){this.element.id||(this.element.id=d("sortable")),this.itemClass||(this.itemClass="e-sort-item",this.dataBind()),this.initializeDraggable()},e.prototype.initializeDraggable=function(){new ou(this.element,{helper:this.getHelper,dragStart:this.onDragStart,drag:this.onDrag,dragStop:this.onDragStop,dragTarget:"."+this.itemClass,enableTapHold:!0,tapHoldThreshold:200,queryPositionInfo:this.queryPositionInfo,distance:5}),this.wireEvents()},e.prototype.wireEvents=function(){var t=this.element;Ep.add(t,"keydown",this.keyDownHandler,this)},e.prototype.unwireEvents=function(){var t=this.element;Ep.remove(t,"keydown",this.keyDownHandler)},e.prototype.keyDownHandler=function(t){if(27===t.keyCode){var e=H(this.element,"draggable");e&&e.intDestroy(null);var i=document.getElementsByClassName("e-sortableclone")[0];i&&i.remove();var n=document.getElementsByClassName("e-sortable-placeholder")[0];n&&n.remove()}},e.prototype.getPlaceHolder=function(t,e){if(e.placeHolder){var i=e.placeHolder({element:e.element,grabbedElement:this.target,target:t});return i.classList.add("e-sortable-placeholder"),i}return null},e.prototype.isValidTarget=function(t,e){return t&&u(t,e.element)&&t.classList.contains(e.itemClass)&&!t.classList.contains("e-disabled")},e.prototype.removePlaceHolder=function(t){O(t.placeHolderElement),t.placeHolderElement=null},e.prototype.updateItemClass=function(t){this!==t&&(this.target.classList.remove(this.itemClass),this.target.classList.add(t.itemClass))},e.prototype.getSortableInstance=function(t){if(t=j(t,".e-"+this.getModuleName())){var e=H(t,i);return e.scope&&this.scope&&e.scope===this.scope?e:this}return this},e.prototype.refreshDisabled=function(t,e,i){if(i===this)for(var n=void 0,r=t<e,o=void 0,s=r?t:e,a=r?e:t;s<=a;)(n=this.element.children[s]).classList.contains("e-disabled")?(o=this.getIndex(n),this.element.insertBefore(n,this.element.children[r?o+2:o-1]),s=r?o+2:o+1):s++},e.prototype.getIndex=function(t,e,i){void 0===e&&(e=this);var n,r;return[].slice.call(e.element.children).forEach(function(e,o){if(e.classList.contains("e-sortable-placeholder")&&(r=!0),e!==t);else if(n=o,!h(i)){r&&(n-=1);var s=t.getBoundingClientRect(),a=s.bottom-(s.bottom-s.top)/2;n=i.clientY<=a?n:n+1}}),n},e.prototype.getSortableElement=function(t,e){return void 0===e&&(e=this),j(t,"."+e.itemClass)},e.prototype.queryPositionInfo=function(t){return t.left=pageXOffset?parseFloat(t.left)-pageXOffset+"px":t.left,t.top=pageYOffset?parseFloat(t.top)-pageYOffset+"px":t.top,t},e.prototype.isPlaceHolderPresent=function(t){return t.placeHolderElement&&!!j(t.placeHolderElement,"#"+t.element.id)},e.prototype.moveTo=function(t,e,i){!function(t,e,i,n){var r=[];if(e||(e=t),i&&i.length?i.forEach(function(e){r.push(t.children[e])}):r=[].slice.call(t.children),h(n))r.forEach(function(t){e.appendChild(t)});else{var o=e.children[n];r.forEach(function(t){e.insertBefore(t,o)})}}(this.element,t,e,i)},e.prototype.destroy=function(){this.unwireEvents(),"e-sort-item"===this.itemClass&&(this.itemClass=null,this.dataBind()),H(this.element,ou).destroy(),t.prototype.destroy.call(this)},e.prototype.getModuleName=function(){return"sortable"},e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"itemClass":[].slice.call(this.element.children).forEach(function(i){i.classList.contains(e.itemClass)&&i.classList.remove(e.itemClass),t.itemClass&&i.classList.add(t.itemClass)})}}};var i;Vx([W(!1)],e.prototype,"enableAnimation",void 0),Vx([W(null)],e.prototype,"itemClass",void 0),Vx([W(null)],e.prototype,"scope",void 0),Vx([W()],e.prototype,"helper",void 0),Vx([W()],e.prototype,"placeHolder",void 0),Vx([Z()],e.prototype,"drag",void 0),Vx([Z()],e.prototype,"beforeDragStart",void 0),Vx([Z()],e.prototype,"dragStart",void 0),Vx([Z()],e.prototype,"beforeDrop",void 0),Vx([Z()],e.prototype,"drop",void 0),e=i=Vx([$],e)}(Op),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),Fx=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Yx="e-focused",Wx="e-menu-header",Qx="e-selected",Xx="e-separator",qx="uparrow",Gx="downarrow",Zx="leftarrow",$x="rightarrow",Kx="e-menu-item",Jx="e-menu-hide",tM="e-menu-popup",eM=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _x(e,t),Fx([W("id")],e.prototype,"itemId",void 0),Fx([W("parentId")],e.prototype,"parentId",void 0),Fx([W("text")],e.prototype,"text",void 0),Fx([W("iconCss")],e.prototype,"iconCss",void 0),Fx([W("url")],e.prototype,"url",void 0),Fx([W("separator")],e.prototype,"separator",void 0),Fx([W("items")],e.prototype,"children",void 0),e}(Rp),iM=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _x(e,t),Fx([W(null)],e.prototype,"iconCss",void 0),Fx([W("")],e.prototype,"id",void 0),Fx([W(!1)],e.prototype,"separator",void 0),Fx([q([],e)],e.prototype,"items",void 0),Fx([W("")],e.prototype,"text",void 0),Fx([W("")],e.prototype,"url",void 0),e}(Rp),nM=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _x(e,t),Fx([W("SlideDown")],e.prototype,"effect",void 0),Fx([W(400)],e.prototype,"duration",void 0),Fx([W("ease")],e.prototype,"easing",void 0),e}(Rp),rM=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.navIdx=[],n.animation=new zp({}),n.isTapHold=!1,n.tempItem=[],n.showSubMenuOn="Auto",n}return _x(e,t),e.prototype.preRender=function(){if(!this.isMenu){var t=void 0;if("EJS-CONTEXTMENU"===this.element.tagName){t=this.createElement("ul",{id:d(this.getModuleName()),className:"e-control e-lib e-"+this.getModuleName()});var e=n("ej2_instances",this.element);x([this.element],["e-control","e-lib","e-"+this.getModuleName()]),this.clonedElement=this.element,this.element=t,r("ej2_instances",e,this.element)}else{t=this.createElement("ul",{id:d(this.getModuleName())}),E([].slice.call(this.element.cloneNode(!0).children),t);var i=this.element.nextElementSibling;i?this.element.parentElement.insertBefore(t,i):this.element.parentElement.appendChild(t),this.clonedElement=t}this.clonedElement.style.display="none"}if("EJS-MENU"===this.element.tagName){for(var o=this.element,s=n("ej2_instances",o),a=(t=this.createElement("ul"),this.createElement("EJS-MENU",{className:"e-"+this.getModuleName()+"-wrapper"})),l=0,h=o.attributes.length;l<h;l++)t.setAttribute(o.attributes[l].nodeName,o.attributes[l].nodeValue);o.parentNode.insertBefore(a,o),T(o),o=t,a.appendChild(o),r("ej2_instances",s,o),this.clonedElement=a,this.element=o,this.element.id||(this.element.id=d(this.getModuleName()))}},e.prototype.render=function(){var t=this;this.initialize(),this.renderItems(),this.wireEvents(),this.renderComplete();var e=this.getWrapper();this.template&&this.enableScrolling&&(this.isReact||this.isAngular)&&requestAnimationFrame(function(){La(t.createElement,e,t.element,"hscroll",t.enableRtl)})},e.prototype.initialize=function(){var t=this.getWrapper();t||(t=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"}),this.isMenu?this.element.parentElement.insertBefore(t,this.element):document.body.appendChild(t)),this.cssClass&&I([t],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.enableRtl&&t.classList.add("e-rtl"),t.appendChild(this.element),this.isMenu&&this.hamburgerMode&&(this.target||this.createHeaderContainer(t)),this.defaultOption=this.showItemOnClick},e.prototype.renderItems=function(){if(!this.items.length){var t=uy.createJsonFromElement(this.element,{fields:{child:"items"}});this.setProperties({items:t},!0),f()&&!this.isMenu?this.element=this.removeChildElement(this.element):this.element.innerHTML=""}var e=this.createItems(this.items);if(E(Array.prototype.slice.call(e.children),this.element),this.element.classList.add("e-menu-parent"),this.isMenu&&(!this.hamburgerMode&&this.element.classList.contains("e-vertical")&&this.setBlankIconStyle(this.element),this.enableScrolling)){var i=this.getWrapper();this.element.classList.contains("e-vertical")?La(this.createElement,i,this.element,"vscroll",this.enableRtl):La(this.createElement,i,this.element,"hscroll",this.enableRtl)}},e.prototype.wireEvents=function(){var t=this.getWrapper();if(this.target){for(var e=void 0,i=z(this.target),n=0,r=i.length;n<r;n++)e=i[n],this.isMenu?Ep.add(e,"click",this.menuHeaderClickHandler,this):Np.isIos?new yu(e,{tapHold:this.touchHandler.bind(this)}):Ep.add(e,"contextmenu",this.cmenuHandler,this);if(this.targetElement=e,!this.isMenu){Ep.add(this.targetElement,"mousewheel DOMMouseScroll",this.scrollHandler,this);for(var o=0,s=pi(this.targetElement);o<s.length;o++){var a=s[o];Ep.add(a,"mousewheel DOMMouseScroll",this.scrollHandler,this)}}}Np.isDevice||(this.delegateMoverHandler=this.moverHandler.bind(this),this.delegateMouseDownHandler=this.mouseDownHandler.bind(this),Ep.add(this.isMenu?document:t,"mouseover",this.delegateMoverHandler,this),Ep.add(document,"mousedown",this.delegateMouseDownHandler,this)),this.delegateClickHandler=this.clickHandler.bind(this),Ep.add(document,"click",this.delegateClickHandler,this),this.wireKeyboardEvent(t),this.rippleFn=et(t,{selector:"."+Kx})},e.prototype.wireKeyboardEvent=function(t){var e={downarrow:Gx,uparrow:qx,enter:"enter",leftarrow:Zx,rightarrow:$x,escape:"escape"};this.isMenu&&(e.home="home",e.end="end",e.tab="tab"),new pu(t,{keyAction:this.keyBoardHandler.bind(this),keyConfigs:e})},e.prototype.mouseDownHandler=function(t){j(t.target,".e-"+this.getModuleName()+"-wrapper")===this.getWrapper()||j(t.target,".e-"+this.getModuleName()+"-popup")||this.closeMenu(this.isMenu?null:this.navIdx.length,t)},e.prototype.keyHandler=function(t){38!==t.keyCode&&40!==t.keyCode||t.target&&(t.target.classList.contains("e-contextmenu")||t.target.classList.contains("e-menu-item"))&&t.preventDefault()},e.prototype.keyBoardHandler=function(t){var e="",i=t.target,n=this.isMenu&&!this.hamburgerMode&&!this.element.classList.contains("e-vertical")&&this.navIdx.length<1;if(t.preventDefault(),this.enableScrolling&&13===t.keyCode&&i.classList.contains("e-scroll-nav")&&this.removeLIStateByClass([Yx,Qx],[j(i,".e-"+this.getModuleName()+"-wrapper")]),n)switch(t.action){case $x:e=$x,t.action=Gx;break;case Zx:e=Zx,t.action=qx;break;case Gx:e=Gx,t.action=$x;break;case qx:e=qx,t.action=""}else if(this.enableRtl)switch(t.action){case Zx:n=!0,e=Zx,t.action=$x;break;case $x:n=!0,e=$x,t.action=Zx}switch(t.action){case Gx:case qx:case"end":case"home":case"tab":this.upDownKeyHandler(t);break;case $x:this.rightEnterKeyHandler(t);break;case Zx:this.leftEscKeyHandler(t);break;case"enter":this.hamburgerMode&&"SPAN"===i.tagName&&i.classList.contains("e-menu-icon")?this.menuHeaderClickHandler(t):this.rightEnterKeyHandler(t);break;case"escape":this.leftEscKeyHandler(t)}n&&(t.action=e)},e.prototype.upDownKeyHandler=function(t){var e=this.getUlByNavIdx(),i=t.action===Gx||"home"===t.action||"tab"===t.action?0:e.childElementCount-1,n=i,r=this.getLIByClass(e,Yx);r&&("end"!==t.action&&"home"!==t.action&&(n=this.getIdx(e,r)),r.classList.remove(Yx),"end"!==t.action&&"home"!==t.action&&(t.action===Gx?n++:n--,n===(t.action===Gx?e.childElementCount:-1)&&(n=i)));var o=e.children[n];n=this.isValidLI(o,n,t.action),e.children[n].classList.add(Yx),e.children[n].focus()},e.prototype.isValidLI=function(t,e,i){var n=this.getUlByNavIdx(),r=i===Gx||"home"===i||"tab"===i?0:n.childElementCount-1;return(t.classList.contains(Xx)||t.classList.contains("e-disabled")||t.classList.contains(Jx))&&(i===Gx&&e===n.childElementCount-1?e=r:i===qx&&0===e?e=r:i===Gx||i===$x?e++:e--),((t=n.children[e]).classList.contains(Xx)||t.classList.contains("e-disabled")||t.classList.contains(Jx))&&(e=this.isValidLI(t,e,i)),e},e.prototype.getUlByNavIdx=function(t){if(void 0===t&&(t=this.navIdx.length),this.isMenu){var e=[this.getWrapper()].concat([].slice.call(z("."+tM)))[t];return h(e)?null:A(".e-menu-parent",e)}return this.getWrapper().children[t]},e.prototype.rightEnterKeyHandler=function(t){var e,i=this.getUlByNavIdx(),n=this.getLIByClass(i,Yx);if(n){var r=this.getIdx(i,n),o=this.navIdx.concat(r),s=this.getItem(o);s.items.length?(this.navIdx.push(r),this.keyType="right",this.action=t.action,this.openMenu(n,s,-1,-1,t)):"enter"===t.action&&(this.isMenu&&0===this.navIdx.length?this.removeLIStateByClass([Qx],[this.getWrapper()]):n.classList.remove(Yx),n.classList.add(Qx),e={element:n,item:s,event:t},this.trigger("select",e),this.closeMenu(null,t))}},e.prototype.leftEscKeyHandler=function(t){this.navIdx.length?(this.keyType="left",this.closeMenu(this.navIdx.length,t)):"escape"===t.action&&this.closeMenu(null,t)},e.prototype.scrollHandler=function(t){this.closeMenu(null,t)},e.prototype.touchHandler=function(t){this.isTapHold=!0,this.cmenuHandler(t.originalEvent)},e.prototype.cmenuHandler=function(t){t.preventDefault(),this.currentTarget=t.target,this.isCMenu=!0,this.pageX=t.changedTouches?t.changedTouches[0].pageX+1:t.pageX+1,this.pageY=t.changedTouches?t.changedTouches[0].pageY+1:t.pageY+1,this.closeMenu(null,t),this.isCMenu&&(this.canOpen(t.target)&&this.openMenu(null,null,this.pageY,this.pageX,t),this.isCMenu=!1)},e.prototype.closeMenu=function(t,e,i){var n=this;if(void 0===t&&(t=0),void 0===e&&(e=null),this.isMenuVisible()){var r,o,s=void 0,a=this.getWrapper(),l=void 0,c=this.getPopups(),d=!1,p=this.isMenu?c.length+1:a.childElementCount,u=this.isMenu&&1!==p?A(".e-ul",c[p-2]):z(".e-menu-parent",a)[p-1];if(this.isMenu&&u.classList.contains("e-menu")&&((s=this.getLIByClass(u,Qx))&&s.classList.remove(Qx),d=!0),!d){var g=e&&e.target&&this.getLI(e.target);this.cli=g||u.children[0],r=this.navIdx.length?this.getItem(this.navIdx):null,o=r?r.items:this.items,l={element:u,parentItem:r,items:o,event:e,cancel:!1,isFocused:!0},this.trigger("beforeClose",l,function(s){var l,c,d,p="",m=!s.cancel;(m||n.isCMenu)&&(n.isMenu?(l=j(u,"."+tM),n.hamburgerMode&&(l.parentElement.style.minHeight="",j(u,".e-menu-item").setAttribute("aria-expanded","false")),n.unWireKeyboardEvent(l),za(y(l.children[0],Lx),l.children[0]),(d=y(l,Am)).hide(),p=l.id,d.destroy(),T(l)):n.toggleAnimation(u,!1),c={element:u,parentItem:r,items:o},n.trigger("onClose",c),n.navIdx.pop(),n.isMenu||(Ep.remove(u,"keydown",n.keyHandler),n.keyType="")),n.updateReactTemplate();var f,v,b,S=n.getWrapper()&&n.getUlByNavIdx();n.isCMenu&&(n.canOpen(e.target)&&n.openMenu(null,null,n.pageY,n.pageX,e),n.isCMenu=!1),n.isMenu&&S&&p.length?(f=new RegExp("(.*)-ej2menu-"+n.element.id+"-popup").exec(p)[1],v=S.querySelector('[id="'+f+'"]'),b=g&&S.querySelector('[id="'+g.id+'"]')):S&&(v=S.querySelector(".e-menu-item.e-selected"),b=g&&S.querySelector('[id="'+g.id+'"]'));var w=g&&g.querySelectorAll(".e-menu-item");if(m&&n.hamburgerMode&&t&&!w.length)n.afterCloseMenu(e);else if(m&&!n.hamburgerMode&&v&&!b&&"left"!==n.keyType&&(n.navIdx.length||!n.isMenu&&0===n.navIdx.length)){var I=e&&e.target.classList.contains("e-vscroll")?j(e.target,".e-menu-wrapper"):null;I?(I=I.querySelector(".e-menu-item"),(n.showItemOnClick||I&&n.getIndex(I.id,!0).length<=n.navIdx.length)&&n.closeMenu(n.navIdx[n.navIdx.length-1],e,!0)):n.closeMenu(n.navIdx[n.navIdx.length-1],e)}else if(m&&!i&&!t&&(n.hamburgerMode&&n.navIdx.length||1===n.navIdx.length&&g&&S!==g.parentElement))n.closeMenu(null,e);else if(m&&h(t)&&n.navIdx.length)n.closeMenu(null,e);else if(!m||n.isMenu||t||0!==n.navIdx.length||n.isMenusClosed)if(m&&n.isMenu&&e&&e.target&&0!==n.navIdx.length&&j(e.target,".e-menu-parent.e-control"))n.closeMenu(0,e);else if(m&&!n.isMenu&&z(".e-menu-parent",a)[t-1]&&3===e.which)n.closeMenu(null,e);else{if(!m||"right"!==n.keyType&&"click"!==n.keyType){var x=n.getUlByNavIdx(),M=n.getLIByClass(x,Qx);if(M&&(M.setAttribute("aria-expanded","false"),M.classList.remove(Qx),(s.isFocused&&g||"left"===n.keyType)&&(M.classList.add(Yx),e.target&&e.target.classList.contains("e-edit-template")||M.focus())),!m&&n.hamburgerMode&&g&&"false"===g.getAttribute("aria-expanded")&&"true"===g.getAttribute("aria-haspopup")){j(g,".e-menu-parent.e-control")?n.navIdx=[]:n.navIdx.pop(),n.navIdx.push(n.cliIdx);var C=n.getItem(n.navIdx);g.setAttribute("aria-expanded","true"),n.openMenu(g,C,-1,-1,e)}}else n.afterCloseMenu(e);n.navIdx.length<1&&("Hover"!==n.showSubMenuOn&&"Click"!==n.showSubMenuOn||(n.showItemOnClick=n.defaultOption,n.showSubMenuOn="Auto"))}else n.isMenusClosed=!0,n.closeMenu(0,e);n.removeStateWrapper()})}}},e.prototype.updateReactTemplate=function(){if(this.isReact&&this.template&&0===this.navIdx.length){var t=this.portals.splice(0,this.items.length);this.clearTemplate(["template"]),this.portals=t,this.renderReactTemplates()}},e.prototype.getMenuItemModel=function(t,e){if(h(t))return null;h(e)&&(e=0);var i=this.getFields(e);return{text:t[i.text],id:t[i.id],items:t[i.child],separator:t[i.separator],iconCss:t[i.iconCss],url:t[i.url]}},e.prototype.getPopups=function(){var t=this,e=[];return[].slice.call(document.querySelectorAll("."+tM)).forEach(function(i){!h(i.querySelector("."+Kx))&&t.getIndex(i.querySelector("."+Kx).id,!0).length&&e.push(i)}),e},e.prototype.isMenuVisible=function(){return this.navIdx.length>0||this.element.classList.contains("e-contextmenu")&&C(this.element).valueOf()},e.prototype.canOpen=function(t){var e=!0;if(this.filter){e=!1;for(var i=this.filter.split(" "),n=0,r=i.length;n<r;n++)if(j(t,"."+i[n])){e=!0;break}}return e},e.prototype.openMenu=function(t,e,i,n,r,o){var s=this;void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=null),void 0===o&&(o=this.targetElement);var a=this.getWrapper();this.lItem=t;var l=""!==this.element.id?this.element.id:"menu";if(this.isMenusClosed=!1,h(i)&&(i=-1),h(n)&&(n=-1),t){if(this.uList=this.createItems(e[this.getField("children",this.navIdx.length-1)]),!this.isMenu&&Np.isDevice){a.lastChild.style.display="none";var c={text:e[this.getField("text")].toString(),iconCss:"e-icons e-previous"},d=new iM(this.items[0],"items",c,!0),p=this.createItems([d]).children[0];p.classList.add(Wx),this.uList.insertBefore(p,this.uList.children[0])}this.isMenu?(this.popupWrapper=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper "+tM,id:t.id+"-ej2menu-"+l+"-popup"}),this.hamburgerMode?(i=t.offsetHeight,t.appendChild(this.popupWrapper)):document.body.appendChild(this.popupWrapper),this.isNestedOrVertical=this.element.classList.contains("e-vertical")||1!==this.navIdx.length,this.popupObj=this.generatePopup(this.popupWrapper,this.uList,t,this.isNestedOrVertical),this.template&&this.renderReactTemplates(),this.hamburgerMode?this.calculateIndentSize(this.uList,t):(this.cssClass&&I([this.popupWrapper],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.popupObj.hide()),this.hamburgerMode||this.showItemOnClick||!this.hoverDelay?this.triggerBeforeOpen(t,this.uList,e,r,0,0,"menu"):(window.clearInterval(this.timer),this.timer=window.setTimeout(function(){s.triggerBeforeOpen(t,s.uList,e,r,0,0,"menu")},this.hoverDelay))):(this.uList.style.zIndex=this.element.style.zIndex,a.appendChild(this.uList),!this.showItemOnClick&&this.hoverDelay?(window.clearInterval(this.timer),this.timer=window.setTimeout(function(){s.triggerBeforeOpen(t,s.uList,e,r,i,n,"none")},this.hoverDelay)):this.triggerBeforeOpen(t,this.uList,e,r,i,n,"none"))}else this.uList=this.element,this.uList.style.zIndex=ui(o||this.element).toString(),this.triggerBeforeOpen(t,this.uList,e,r,i,n,"none")},e.prototype.calculateIndentSize=function(t,e){var i=getComputedStyle(e),n=parseInt(i.textIndent,10);this.navIdx.length<2&&!e.classList.contains("e-blankicon")?n*=2:n+=n/4,t.style.textIndent=n+"px";var r=t.querySelectorAll(".e-blankicon");if(r&&r.length)for(var o=t.querySelector(".e-menu-icon"),s=getComputedStyle(o),a=parseInt(s.marginRight,10)+o.offsetWidth+n,l=0;l<r.length;l++)r[l].style.textIndent=a+"px"},e.prototype.generatePopup=function(t,e,i,n){var r=this,o=new Am(t,{actionOnScroll:this.hamburgerMode?"none":"reposition",relateTo:i,collision:this.hamburgerMode?{X:"none",Y:"none"}:{X:n||this.enableRtl?"none":"flip",Y:"fit"},position:n&&!this.hamburgerMode?{X:"right",Y:"top"}:{X:"left",Y:"bottom"},targetType:"relative",enableRtl:this.enableRtl,content:e,open:function(){var t=A(".e-menu-vscroll",o.element);t&&(t.style.height="inherit",t.style.maxHeight="");var e=A(".e-ul",o.element);o.element.style.maxHeight="",e.focus(),r.triggerOpen(e)}});return o},e.prototype.createHeaderContainer=function(t){t=t||this.getWrapper();var e=this.createElement("span",{className:"e-"+this.getModuleName()+"-header"}),i=this.enableHtmlSanitizer?Yu.sanitize(this.title):this.title,n=this.createElement("span",{className:"e-"+this.getModuleName()+"-title",innerHTML:i}),r=this.createElement("span",{className:"e-icons e-"+this.getModuleName()+"-icon",attrs:{tabindex:"0"}});e.appendChild(n),e.appendChild(r),t.insertBefore(e,this.element)},e.prototype.openHamburgerMenu=function(t){this.hamburgerMode&&this.triggerBeforeOpen(null,this.element,null,t,0,0,"hamburger")},e.prototype.closeHamburgerMenu=function(t){var e=this,i={element:this.element,parentItem:null,event:t,items:this.items,cancel:!1};this.trigger("beforeClose",i,function(i){i.cancel||(e.closeMenu(null,t),e.element.classList.add("e-hide-menu"),e.trigger("onClose",{element:e.element,parentItem:null,items:e.items}))})},e.prototype.callFit=function(t,e,i,n,r){return Qe(t,null,{X:e,Y:i},{top:n,left:r})},e.prototype.triggerBeforeOpen=function(t,e,i,n,r,o,s){var a=this,l=t?i[this.getField("children",this.navIdx.length-1)]:this.items,h={element:e,items:l,parentItem:i,event:n,cancel:!1,top:r,left:o,showSubMenuOn:"Auto"},c=s;this.trigger("beforeOpen",h,function(r){switch(c){case"menu":a.hamburgerMode||("Auto"!==r.showSubMenuOn&&(a.showItemOnClick=!a.defaultOption,a.showSubMenuOn=r.showSubMenuOn),a.top=r.top,a.left=r.left),a.popupWrapper.style.display="block",a.hamburgerMode||(a.popupWrapper.style.maxHeight=a.popupWrapper.getBoundingClientRect().height+"px",a.enableScrolling&&La(a.createElement,a.popupWrapper,a.uList,"vscroll",a.enableRtl),a.checkScrollOffset(n)),a.hamburgerMode||a.left||a.top?(a.popupObj.collision={X:"none",Y:"none"},a.popupWrapper.style.display=""):(a.popupObj.refreshPosition(a.lItem,!0),a.left=parseInt(a.popupWrapper.style.left,10),a.top=parseInt(a.popupWrapper.style.top,10),a.enableRtl&&(a.left=a.isNestedOrVertical?a.left-a.popupWrapper.offsetWidth-a.lItem.parentElement.offsetWidth+2:a.left-a.popupWrapper.offsetWidth+a.lItem.offsetWidth),a.template&&(a.isReact||a.isAngular)?requestAnimationFrame(function(){a.collision(),a.popupWrapper.style.display=""}):(a.collision(),a.popupWrapper.style.display=""));break;case"none":a.top=r.top,a.left=r.left;break;case"hamburger":r.cancel||(a.element.classList.remove("e-hide-menu"),a.triggerOpen(a.element))}if("hamburger"!==c)if(r.cancel)a.isMenu?(a.popupObj.destroy(),T(a.popupWrapper)):e.className.indexOf("e-ul")>-1&&T(e),a.navIdx.pop();else if(a.isMenu)if(a.hamburgerMode)a.popupWrapper.style.top=a.top+"px",a.popupWrapper.style.left="0px",a.toggleAnimation(a.popupWrapper);else{a.setBlankIconStyle(a.popupWrapper),a.wireKeyboardEvent(a.popupWrapper),et(a.popupWrapper,{selector:"."+Kx}),a.popupWrapper.style.left=a.left+"px",a.popupWrapper.style.top=a.top+"px";var o="None"!==a.animationSettings.effect?{name:a.animationSettings.effect,duration:a.animationSettings.duration,timingFunction:a.animationSettings.easing}:null;a.popupObj.show(o,a.lItem)}else a.setBlankIconStyle(a.uList),a.setPosition(a.lItem,a.uList,a.top,a.left),a.toggleAnimation(a.uList);if("right"===a.keyType){var s=a.getUlByNavIdx();if(t.classList.remove(Yx),a.isMenu&&1===a.navIdx.length&&a.removeLIStateByClass([Qx],[a.getWrapper()]),t.classList.add(Qx),"enter"===a.action){var l={element:t,item:i,event:n};a.trigger("select",l)}t.focus(),s=a.getUlByNavIdx();var h=a.isValidLI(s.children[0],0,a.action);s.children[h].classList.add(Yx),s.children[h].focus()}})},e.prototype.collision=function(){var t;if(t=Xe(this.popupWrapper,null,this.left,this.top),(this.isNestedOrVertical||this.enableRtl)&&(t.indexOf("right")>-1||t.indexOf("left")>-1)){this.popupObj.collision.X="none";var e=j(this.lItem,".e-"+this.getModuleName()+"-wrapper").offsetWidth;this.left=this.enableRtl?je(this.lItem,this.isNestedOrVertical?"right":"left","top").left:this.left-this.popupWrapper.offsetWidth-e+2}((t=Xe(this.popupWrapper,null,this.left,this.top)).indexOf("left")>-1||t.indexOf("right")>-1)&&(this.left=this.callFit(this.popupWrapper,!0,!1,this.top,this.left).left),this.popupWrapper.style.left=this.left+"px"},e.prototype.setBlankIconStyle=function(t){var e=[].slice.call(t.getElementsByClassName("e-blankicon"));if(e.length){var i=t.querySelector(".e-menu-item:not(.e-blankicon):not(.e-separator)");if(i){var n=i.querySelector(".e-menu-icon");if(n){var r=this.enableRtl?{padding:"paddingRight",margin:"marginLeft"}:{padding:"paddingLeft",margin:"marginRight"},o=getComputedStyle(n),s=parseInt(o.fontSize,10);parseInt(o.width,10)&&parseInt(o.width,10)>s&&(s=parseInt(o.width,10));var a=s+parseInt(o[r.margin],10)+parseInt(getComputedStyle(i)[r.padding],10)+"px";e.forEach(function(t){t.style[r.padding]=a})}}}},e.prototype.checkScrollOffset=function(t){var e=this.getWrapper();if(e.children[0].classList.contains("e-menu-hscroll")&&1===this.navIdx.length){var i=h(t)?this.element:j(t.target,"."+Kx),n=A(".e-hscroll-bar",e);n.scrollLeft>i.offsetLeft&&(n.scrollLeft-=n.scrollLeft-i.offsetLeft);var r=n.scrollLeft+n.offsetWidth,o=i.offsetLeft+i.offsetWidth;r<o&&(n.scrollLeft+=o-r)}},e.prototype.setPosition=function(t,e,i,n){if(this.toggleVisiblity(e),e===this.element||n>-1&&i>-1){if((s=Xe(e,null,n,i)).indexOf("right")>-1&&(n-=e.offsetWidth),s.indexOf("bottom")>-1){if((i=(o=this.callFit(e,!1,!0,i,n)).top-20)<0){var r=pageYOffset+document.documentElement.clientHeight-e.getBoundingClientRect().height;r>-1&&(i=r)}}if((s=Xe(e,null,n,i)).indexOf("left")>-1){n=(o=this.callFit(e,!0,!1,i,n)).left}}else if(Np.isDevice)i=Number(this.element.style.top.replace("px","")),n=Number(this.element.style.left.replace("px",""));else{var o;i=(o=je(t,this.enableRtl?"left":"right","top")).top,n=o.left;var s,a=(s=Xe(e,null,this.enableRtl?n-e.offsetWidth:n,i)).indexOf("left")>-1||s.indexOf("right")>-1;a&&(n=(o=je(t,this.enableRtl?"right":"left","top")).left),(this.enableRtl||a)&&(n=this.enableRtl&&a?n:n-e.offsetWidth),s.indexOf("bottom")>-1&&(i=(o=this.callFit(e,!1,!0,i,n)).top)}this.toggleVisiblity(e,!1),e.style.top=i+"px",e.style.left=n+"px"},e.prototype.toggleVisiblity=function(t,e){void 0===e&&(e=!0),t.style.visibility=e?"hidden":"",t.style.display=e?"block":"none"},e.prototype.createItems=function(t){var e=this,i=this.navIdx?this.navIdx.length:0,n=this.getFields(i),r=this.hasField(t,this.getField("iconCss",i)),o={showIcon:r,moduleName:"menu",fields:n,template:this.template,itemNavigable:!0,itemCreating:function(t){t.curData[t.fields[n.id]]||(t.curData[t.fields[n.id]]=d("menuitem")),h(t.curData.htmlAttributes)&&(t.curData.htmlAttributes={}),Object.assign(t.curData.htmlAttributes,{role:"menuitem",tabindex:"-1"}),e.isMenu&&!t.curData[e.getField("separator",i)]&&(t.curData.htmlAttributes["aria-label"]=t.curData[t.fields.text]?t.curData[t.fields.text]:t.curData[t.fields.id]),""===t.curData[t.fields[n.iconCss]]&&(t.curData[t.fields[n.iconCss]]=null)},itemCreated:function(t){if(t.curData[e.getField("separator",i)]&&(t.item.classList.add(Xx),t.item.setAttribute("role","separator")),!r||t.curData[t.fields.iconCss]||t.curData[e.getField("separator",i)]||t.item.classList.add("e-blankicon"),t.curData[t.fields.child]&&t.curData[t.fields.child].length){var n=e.createElement("span",{className:"e-icons e-caret"});t.item.appendChild(n),t.item.setAttribute("aria-haspopup","true"),t.item.setAttribute("aria-expanded","false"),t.item.classList.add("e-menu-caret-icon")}e.isMenu&&e.template&&(t.item.setAttribute("id",t.curData[t.fields.id].toString()),t.item.removeAttribute("data-uid"),t.item.classList.contains("e-level-1")&&t.item.classList.remove("e-level-1"),t.item.classList.contains("e-has-child")&&t.item.classList.remove("e-has-child"),t.item.removeAttribute("aria-level"));var o={item:t.curData,element:t.item};e.trigger("beforeItemRender",o)}};this.setProperties({items:this.items},!0),this.isMenu&&(o.templateID=this.element.id+"Template");var s=uy.createList(this.createElement,t,o,!this.template,this);return s.setAttribute("tabindex","0"),this.isMenu?s.setAttribute("role","menu"):s.setAttribute("role","menubar"),s},e.prototype.moverHandler=function(t){var e=t.target;this.liTrgt=e;var i=this.getLI(e),n=i?j(i,".e-"+this.getModuleName()+"-wrapper"):this.getWrapper(),r=this.getWrapper(),o=new RegExp("-ej2menu-(.*)-popup"),s=!1;if(n){if((""!==n.id?o.exec(n.id)[1]:n.querySelector("ul").id)!==this.element.id){if(this.removeLIStateByClass([Yx,Qx],[this.getWrapper()]),!this.navIdx.length)return;s=!0}i&&j(i,".e-"+this.getModuleName()+"-wrapper")&&!s?(this.removeLIStateByClass([Yx],this.isMenu?[n].concat(this.getPopups()):[n]),this.removeLIStateByClass([Yx],this.isMenu?[r].concat(this.getPopups()):[r]),i.classList.add(Yx),this.showItemOnClick||this.clickHandler(t)):this.isMenu&&this.showItemOnClick&&!s&&this.removeLIStateByClass([Yx],[n].concat(this.getPopups())),this.isMenu&&(this.showItemOnClick||e.parentElement===n||j(e,".e-"+this.getModuleName()+"-popup")||i&&(!i||this.getIndex(i.id,!0).length)||"Hover"===this.showSubMenuOn?s&&!this.showItemOnClick&&this.navIdx.length&&(this.isClosed=!0,this.closeMenu(null,t)):(this.removeLIStateByClass([Yx],[n]),this.navIdx.length&&(this.isClosed=!0,this.closeMenu(null,t))),this.isClosed||this.removeStateWrapper(),this.isClosed=!1)}},e.prototype.removeStateWrapper=function(){if(this.liTrgt){var t=j(this.liTrgt,".e-menu-vscroll");"DIV"===this.liTrgt.tagName&&t&&this.removeLIStateByClass([Yx,Qx],[t])}},e.prototype.removeLIStateByClass=function(t,e){for(var i,n=function(n){t.forEach(function(t){(i=A("."+t,e[n]))&&i.classList.remove(t)})},r=0;r<e.length;r++)n(r)},e.prototype.getField=function(t,e){void 0===e&&(e=0);var i=this.fields[""+t];return"string"==typeof i?i:i[e]?i[e].toString():i[i.length-1].toString()},e.prototype.getFields=function(t){return void 0===t&&(t=0),{id:this.getField("itemId",t),iconCss:this.getField("iconCss",t),text:this.getField("text",t),url:this.getField("url",t),child:this.getField("children",t),separator:this.getField("separator",t)}},e.prototype.hasField=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i][""+e])return!0;return!1},e.prototype.menuHeaderClickHandler=function(t){j(t.target,".e-menu-wrapper").querySelector("ul.e-menu-parent").id===this.element.id&&(this.element.className.indexOf("e-hide-menu")>-1?this.openHamburgerMenu(t):this.closeHamburgerMenu(t))},e.prototype.clickHandler=function(t){if(this.isTapHold)this.isTapHold=!1;else{var e=this.getWrapper(),i=t.target,n=this.cli=this.getLI(i),r=new RegExp("-ej2menu-(.*)-popup"),o=n?j(n,".e-"+this.getModuleName()+"-wrapper"):null,s=n&&o&&(this.isMenu?this.getIndex(n.id,!0).length>0:e.firstElementChild.id===o.firstElementChild.id);if(Np.isDevice&&this.isMenu&&(this.removeLIStateByClass([Yx],[e].concat(this.getPopups())),this.mouseDownHandler(t)),n&&o&&this.isMenu){var a=o.id?r.exec(o.id)[1]:o.querySelector(".e-menu-parent").id;if(this.element.id!==a)return}if(s&&"click"===t.type&&!n.classList.contains(Wx)){this.setLISelected(n);var l=this.getIndex(n.id,!0),h={element:n,item:this.getItem(l),event:t};this.trigger("select",h)}if(s&&("mouseover"===t.type||Np.isDevice||this.showItemOnClick)){var c=void 0;if(n.classList.contains(Wx)){c=e.children[this.navIdx.length-1],this.toggleAnimation(c);(u=this.getLIByClass(c,Qx))&&u.classList.remove(Qx),T(n.parentNode),this.navIdx.pop()}else if(!n.classList.contains(Xx)){this.showSubMenu=!0;var d=n.parentNode;if(this.cliIdx=this.getIdx(d,n),this.isMenu||!Np.isDevice){var p=this.isMenu?Array.prototype.indexOf.call([e].concat(this.getPopups()),j(d,".e-"+this.getModuleName()+"-wrapper")):this.getIdx(e,d);if(this.navIdx[p]===this.cliIdx&&(this.showSubMenu=!1),p!==this.navIdx.length&&("mouseover"!==t.type||this.showSubMenu)){var u;(u=this.getLIByClass(d,Qx))&&u.classList.remove(Qx),this.isClosed=!0,this.keyType="click",this.showItemOnClick&&this.setLISelected(n),this.closeMenu(p+1,t),this.showItemOnClick&&this.setLISelected(n)}}this.isClosed||this.afterCloseMenu(t),this.isClosed=!1}}else if(this.isMenu&&"DIV"===i.tagName&&this.navIdx.length&&j(i,".e-menu-vscroll")){var g=j(i,"."+tM),m=Array.prototype.indexOf.call(this.getPopups(),g)+1;m<this.navIdx.length&&(this.closeMenu(m+1,t),g&&this.removeLIStateByClass([Yx,Qx],[g]))}else this.isMenu&&this.hamburgerMode&&"SPAN"===i.tagName&&i.classList.contains("e-menu-icon")?this.menuHeaderClickHandler(t):"UL"===i.tagName&&(this.isMenu?!i.parentElement.classList.contains("e-menu-wrapper")||this.getIndex(i.querySelector("."+Kx).id,!0).length:i.parentElement===e)||(n||this.removeLIStateByClass([Qx],[e]),n&&n.querySelector(".e-caret")||this.closeMenu(null,t))}},e.prototype.afterCloseMenu=function(t){var e;if(this.showSubMenu){e=this.showItemOnClick&&0===this.navIdx.length?j(t.target,".e-menu-parent.e-control"):j(this.element,".e-menu-parent.e-control");var i=this.navIdx.concat(this.cliIdx),n=this.getItem(i);if(n&&n[this.getField("children",i.length-1)]&&n[this.getField("children",i.length-1)].length?(("mouseover"===t.type||Np.isDevice&&this.isMenu)&&this.setLISelected(this.cli),(!this.hamburgerMode&&e||this.hamburgerMode&&"false"===this.cli.getAttribute("aria-expanded"))&&(this.cli.setAttribute("aria-expanded","true"),this.navIdx.push(this.cliIdx),this.openMenu(this.cli,n,null,null,t))):"mouseover"!==t.type&&this.closeMenu(null,t),!e){var r=this.getUlByNavIdx(),o=this.getLIByClass(r,Qx);o&&(o.setAttribute("aria-expanded","false"),o.classList.remove(Qx))}}this.keyType=""},e.prototype.setLISelected=function(t){var e=this.getLIByClass(t.parentElement,Qx);e&&e.classList.remove(Qx),this.isMenu||t.classList.remove(Yx),t.classList.add(Qx)},e.prototype.getLIByClass=function(t,e){for(var i=0,n=t.children.length;i<n;i++)if(t.children[i].classList.contains(e))return t.children[i];return null},e.prototype.getItemIndex=function(t,e){var i;i="string"==typeof t?t:t.id;var n=!1!==e;return this.getIndex(i,n)},e.prototype.setItem=function(t,e,i){var n;n=i?e||t.id:e||t.text;var r=this.getIndex(n,i),o=this.getItem(r);Object.assign(o,t)},e.prototype.getItem=function(t){var e=(t=t.slice()).pop();return this.getItems(t)[e]},e.prototype.getItems=function(t){for(var e=this.items,i=0;i<t.length;i++)e=e[t[i]][this.getField("children",i)];return e},e.prototype.setItems=function(t,e){var i=this.getItems(e);i.splice(0,i.length);for(var n=0;n<t.length;n++)i.splice(n,0,t[n])},e.prototype.getIdx=function(t,e,i){void 0===i&&(i=!0);var n=Array.prototype.indexOf.call(t.children,e);return i&&t.children[0].classList.contains(Wx)&&n--,n},e.prototype.getLI=function(t){return"LI"===t.tagName&&t.classList.contains("e-menu-item")?t:j(t,"li.e-menu-item")},e.prototype.updateItemsByNavIdx=function(){for(var t=this.items,e=0,i=0;i<this.navIdx.length&&(t=t[i].items);i++){e++;var n=this.getUlByNavIdx(e);if(!n)break;this.updateItem(n,t)}},e.prototype.removeChildElement=function(t){for(;t.firstElementChild;)t.removeChild(t.firstElementChild);return t},e.prototype.onPropertyChanged=function(t,e){for(var i=this,n=this.getWrapper(),r=function(r){switch(r){case"cssClass":e.cssClass&&x([n],e.cssClass.split(" ")),t.cssClass&&I([n],t.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"enableRtl":n.classList.toggle("e-rtl");break;case"showItemOnClick":o.unWireEvents(),o.showItemOnClick=t.showItemOnClick,o.wireEvents();break;case"enableScrolling":if(t.enableScrolling){var s;o.element.classList.contains("e-vertical")?La(o.createElement,n,o.element,"vscroll",o.enableRtl):La(o.createElement,n,o.element,"hscroll",o.enableRtl),o.getPopups().forEach(function(t){s=A(".e-ul",t),La(i.createElement,t,s,"vscroll",i.enableRtl)})}else{var a=n.children[0];o.element.classList.contains("e-vertical")?za(y(a,Lx),a):za(y(a,bx),a),n.style.overflow="",n.appendChild(o.element),o.getPopups().forEach(function(t){za(y(a=t.children[0],Lx),a),t.style.overflow=""})}break;case"items":var l=void 0,h=void 0,c=void 0;if(o.isReact&&o.template&&o.clearTemplate(["template"]),Object.keys(e.items).length){var d=Object.keys(t.items);for(p=0;p<d.length;p++)(h=o.getChangedItemIndex(t,[],Number(d[p]))).length<=o.getWrapper().children.length&&(l=h.pop(),c=o.getItems(h),o.insertAfter([c[l]],c[l].text),o.removeItem(c,h,l),o.setItems(c,h)),h.length=0}else{if(o.updateItem(o.element,o.items),o.enableScrolling&&o.element.parentElement.classList.contains("e-custom-scroll")&&(o.element.classList.contains("e-vertical")?La(o.createElement,n,o.element,"vscroll",o.enableRtl):La(o.createElement,n,o.element,"hscroll",o.enableRtl)),!o.hamburgerMode)for(var p=1,u=n.childElementCount;p<u;p++)T(n.lastElementChild);o.navIdx=[]}}},o=this,s=0,a=Object.keys(t);s<a.length;s++){r(a[s])}},e.prototype.updateItem=function(t,e){if(f()&&!this.isMenu)t=this.removeChildElement(t);else{if(this.enableScrolling){var i=this.getWrapper().children[0];this.element.classList.contains("e-vertical")?za(y(i,Lx),i):za(y(i,bx),i)}t.innerHTML=""}[].slice.call(this.createItems(e).children).forEach(function(e){t.appendChild(e)})},e.prototype.getChangedItemIndex=function(t,e,i){e.push(i);var n=Object.keys(t.items[i]).pop();if("items"===n){var r=t.items[i],o=Object.keys(r.items).pop();o&&this.getChangedItemIndex(r,e,Number(o))}else"isParentArray"===n&&e.length>1&&e.pop();return e},e.prototype.removeItem=function(t,e,i){t.splice(i,1);var n=this.getWrapper().children;e.length<n.length&&T(n[e.length].children[i])},e.prototype.unWireEvents=function(t){void 0===t&&(t=this.target);var e=this.getWrapper();if(t){for(var i=void 0,n=void 0,r=z(t),o=0,s=r.length;o<s;o++)i=r[o],this.isMenu?Ep.remove(i,"click",this.menuHeaderClickHandler):Np.isIos?(n=y(i,yu))&&n.destroy():Ep.remove(i,"contextmenu",this.cmenuHandler);if(!this.isMenu){Ep.remove(this.targetElement,"mousewheel DOMMouseScroll",this.scrollHandler);for(var a=0,l=pi(this.targetElement);a<l.length;a++){var h=l[a];Ep.remove(h,"mousewheel DOMMouseScroll",this.scrollHandler)}}}Np.isDevice||(Ep.remove(this.isMenu?document:e,"mouseover",this.delegateMoverHandler),Ep.remove(document,"mousedown",this.delegateMouseDownHandler)),Ep.remove(document,"click",this.delegateClickHandler),this.unWireKeyboardEvent(e),this.rippleFn()},e.prototype.unWireKeyboardEvent=function(t){var e=y(t,pu);e&&e.destroy()},e.prototype.toggleAnimation=function(t,e){var i=this;void 0===e&&(e=!0);var n,r;"None"!==this.animationSettings.effect&&e?this.animation.animate(t,{name:this.animationSettings.effect,duration:this.animationSettings.duration,timingFunction:this.animationSettings.easing,begin:function(t){i.hamburgerMode?(r=t.element.parentElement,t.element.style.position="absolute",n=r.offsetHeight,t.element.style.maxHeight=t.element.offsetHeight+"px",r.style.maxHeight=""):(t.element.style.display="block",t.element.style.maxHeight=t.element.getBoundingClientRect().height+"px")},progress:function(t){i.hamburgerMode&&(r.style.minHeight=n+t.element.offsetHeight+"px")},end:function(t){i.hamburgerMode?(t.element.style.position="",t.element.style.maxHeight="",r.style.minHeight="",t.element.style.top="0px",t.element.children[0].focus(),i.triggerOpen(t.element.children[0])):i.end(t.element,e)}}):this.end(t,e)},e.prototype.triggerOpen=function(t){var e=this.navIdx.length?this.getItem(this.navIdx):null,i={element:t,parentItem:e,items:e?e.items:this.items};this.trigger("onOpen",i),this.isMenu||Ep.add(t,"keydown",this.keyHandler,this)},e.prototype.end=function(t,e){if(e)if(t.style.display="block",t.style.maxHeight="",this.triggerOpen(t),t.querySelector("."+Yx))t.querySelector("."+Yx).focus();else{var i=this.getWrapper().children[this.getIdx(this.getWrapper(),t)-1];this.currentTarget?this.currentTarget.classList.contains("e-numerictextbox")||this.currentTarget.classList.contains("e-textbox")||"INPUT"===this.currentTarget.tagName||(i?i.querySelector("."+Qx).focus():this.element.focus()):i?i.querySelector("."+Qx).focus():this.element.focus()}else if(t===this.element){var n=this.getLIByClass(this.element,Yx);n&&n.classList.remove(Yx);var r=this.getLIByClass(this.element,Qx);r&&r.classList.remove(Qx),t.style.display="none"}else T(t)},e.prototype.getPersistData=function(){return""},e.prototype.getWrapper=function(){return j(this.element,".e-"+this.getModuleName()+"-wrapper")},e.prototype.getIndex=function(t,e,i,n,r,o){void 0===i&&(i=this.items),void 0===n&&(n=[]),void 0===r&&(r=!1),void 0===o&&(o=0);var s;o=r?o+1:0;for(var a=0,l=i.length;a<l;a++){if(s=i[a],(e?s[this.getField("itemId",o)]:s[this.getField("text",o)])===t){n.push(a);break}if(s[this.getField("children",o)]&&s[this.getField("children",o)].length){if(-1!==(n=this.getIndex(t,e,s[this.getField("children",o)],n,!0,o))[n.length-1]){n.unshift(a);break}a!==l-1&&n.pop()}else a===l-1&&n.push(-1)}return r||-1!==n[0]?n:[]},e.prototype.enableItems=function(t,e,i){void 0===e&&(e=!0);for(var n,r,o,s,a="e-disabled",l=0;l<t.length;l++){if(o=this.getIndex(t[l],i),this.navIdx.length){if(1!==o.length){s=!1;for(var h=0,c=o.length-1;h<c;h++)if(o[h]!==this.navIdx[h]){s=!0;break}if(s)continue}}else if(1!==o.length)continue;r=o.pop(),(n=this.getUlByNavIdx(o.length))&&(e?this.isMenu?(n.children[r].classList.remove(a),n.children[r].removeAttribute("aria-disabled")):Np.isDevice&&!n.classList.contains("e-contextmenu")?n.children[r+1].classList.remove(a):n.children[r].classList.remove(a):this.isMenu?(n.children[r].classList.add(a),n.children[r].setAttribute("aria-disabled","true")):Np.isDevice&&!n.classList.contains("e-contextmenu")?n.children[r+1].classList.add(a):n.children[r].classList.add(a))}},e.prototype.showItems=function(t,e){this.showHideItems(t,!1,e)},e.prototype.hideItems=function(t,e){this.showHideItems(t,!0,e)},e.prototype.showHideItems=function(t,e,i){for(var n,r,o,s=0;s<t.length;s++)r=(o=this.getIndex(t[s],i)).pop(),(n=this.getUlByNavIdx(o.length))&&(e?Np.isDevice&&!n.classList.contains("e-contextmenu")?n.children[r+1].classList.add(Jx):n.children[r].classList.add(Jx):Np.isDevice&&!n.classList.contains("e-contextmenu")?n.children[r+1].classList.remove(Jx):n.children[r].classList.remove(Jx))},e.prototype.removeItems=function(t,e){for(var i,n,r,o=0;o<t.length;o++)i=(n=this.getIndex(t[o],e)).pop(),r=this.getItems(n),h(i)||this.removeItem(r,n,i)},e.prototype.insertAfter=function(t,e,i){this.insertItems(t,e,i)},e.prototype.insertBefore=function(t,e,i){this.insertItems(t,e,i,!1)},e.prototype.insertItems=function(t,e,i,n){void 0===n&&(n=!0);for(var r,o,s,a,l,c=0;c<t.length;c++){o=(s=this.getIndex(e,i)).pop(),a=this.getItems(s),l=new iM(a[0],"items",t[c],!0),a.splice(n?o+1:o,0,l);var d=this.isMenu?[this.getWrapper()].concat(this.getPopups()):[].slice.call(this.getWrapper().children);if(!h(o)&&s.length<d.length){o=n?o+1:o,r=this.createItems(a).children[o];var p=this.isMenu?A(".e-menu-parent",d[s.length]):d[s.length];p.insertBefore(r,p.children[o])}}},e.prototype.removeAttributes=function(){var t=this;["top","left","display","z-index"].forEach(function(e){t.element.style.removeProperty(e)}),["role","tabindex","class","style"].forEach(function(e){"class"===e&&t.element.classList.contains("e-menu-parent")&&t.element.classList.remove("e-menu-parent"),-1!==["class","style"].indexOf(e)&&t.element.getAttribute(e)||t.element.removeAttribute(e),t.isMenu&&"class"===e&&t.element.classList.contains("e-vertical")&&t.element.classList.remove("e-vertical")})},e.prototype.destroy=function(){var e=this.getWrapper();if(e){if(this.unWireEvents(),this.isMenu)this.closeMenu(),f()&&!this.isMenu?this.element=this.removeChildElement(this.element):this.element.innerHTML="",this.removeAttributes(),e.parentNode.insertBefore(this.element,e),this.clonedElement=null;else{if(this.clonedElement.style.display="","EJS-CONTEXTMENU"===this.clonedElement.tagName)I([this.clonedElement],["e-control","e-lib","e-"+this.getModuleName()]),this.element=this.clonedElement;else if(this.refreshing&&this.clonedElement.childElementCount&&"LI"===this.clonedElement.children[0].tagName&&this.setProperties({items:[]},!0),document.getElementById(this.clonedElement.id)){var i=this.clonedElement.nextElementSibling;i&&i!==e?this.clonedElement.parentElement.insertBefore(this.element,i):this.clonedElement.parentElement.appendChild(this.element),f()&&!this.isMenu?this.element=this.removeChildElement(this.element):this.element.innerHTML="",E([].slice.call(this.clonedElement.children),this.element),T(this.clonedElement),this.removeAttributes()}this.clonedElement=null}this.isMenu&&this.clonedElement?(T(this.element),e.style.display="",e.classList.remove("e-"+this.getModuleName()+"-wrapper"),e.removeAttribute("data-ripple")):T(e),t.prototype.destroy.call(this),this.template&&this.clearTemplate(["template"])}this.rippleFn=null},Fx([Z()],e.prototype,"beforeItemRender",void 0),Fx([Z()],e.prototype,"beforeOpen",void 0),Fx([Z()],e.prototype,"onOpen",void 0),Fx([Z()],e.prototype,"beforeClose",void 0),Fx([Z()],e.prototype,"onClose",void 0),Fx([Z()],e.prototype,"select",void 0),Fx([Z()],e.prototype,"created",void 0),Fx([W("")],e.prototype,"cssClass",void 0),Fx([W(0)],e.prototype,"hoverDelay",void 0),Fx([W(!1)],e.prototype,"showItemOnClick",void 0),Fx([W("")],e.prototype,"target",void 0),Fx([W("")],e.prototype,"filter",void 0),Fx([W(null)],e.prototype,"template",void 0),Fx([W(!1)],e.prototype,"enableScrolling",void 0),Fx([W(!1)],e.prototype,"enableHtmlSanitizer",void 0),Fx([Q({itemId:"id",text:"text",parentId:"parentId",iconCss:"iconCss",url:"url",separator:"separator",children:"items"},eM)],e.prototype,"fields",void 0),Fx([q([],iM)],e.prototype,"items",void 0),Fx([Q({duration:400,easing:"ease",effect:"SlideDown"},nM)],e.prototype,"animationSettings",void 0),e=Fx([$],e)}(Kp),oM=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),sM=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},aM="e-toolbar-items",lM="e-toolbar-item",hM="e-separator",cM="e-popup-up-icon",dM="e-popup-down-icon",pM="e-overlay",uM="e-popup-text",gM="e-overflow-show",mM="e-overflow-hide",fM="e-hor-nav",vM="e-tbar-pos",yM="e-toolbar-pop",bM="e-toolbar-popup",SM="e-nav-active",wM="e-ignore",IM="e-popup-alone",xM="e-hidden",MM="e-multirow-separator",CM="e-extended-separator",NM="e-toolbar-extended",EM="e-tbar-extended",DM=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return oM(e,t),sM([W("")],e.prototype,"id",void 0),sM([W("")],e.prototype,"text",void 0),sM([W("auto")],e.prototype,"width",void 0),sM([W("")],e.prototype,"cssClass",void 0),sM([W(!1)],e.prototype,"showAlwaysInPopup",void 0),sM([W(!1)],e.prototype,"disabled",void 0),sM([W("")],e.prototype,"prefixIcon",void 0),sM([W("")],e.prototype,"suffixIcon",void 0),sM([W(!0)],e.prototype,"visible",void 0),sM([W("None")],e.prototype,"overflow",void 0),sM([W("")],e.prototype,"template",void 0),sM([W("Button")],e.prototype,"type",void 0),sM([W("Both")],e.prototype,"showTextOn",void 0),sM([W(null)],e.prototype,"htmlAttributes",void 0),sM([W("")],e.prototype,"tooltipText",void 0),sM([W("Left")],e.prototype,"align",void 0),sM([Z()],e.prototype,"click",void 0),sM([W(-1)],e.prototype,"tabIndex",void 0),e}(Rp),TM=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.resizeContext=n.resize.bind(n),n.keyConfigs={moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow",popupOpen:"enter",popupClose:"escape",tab:"tab",home:"home",end:"end"},n}return oM(e,t),e.prototype.destroy=function(){var e=this;(this.isReact||this.isAngular)&&this.clearTemplate();var i=this.element.querySelectorAll(".e-control.e-btn");for([].slice.call(i).forEach(function(t){h(t)||h(t.ej2_instances)||h(t.ej2_instances[0])||t.ej2_instances[0].isDestroyed||t.ej2_instances[0].destroy()}),this.unwireEvents(),this.tempId.forEach(function(t){h(e.element.querySelector(t))||(document.body.appendChild(e.element.querySelector(t)).style.display="none")}),this.destroyItems();this.element.lastElementChild;)this.element.removeChild(this.element.lastElementChild);this.trgtEle&&(this.element.appendChild(this.ctrlTem),this.trgtEle=null,this.ctrlTem=null),this.popObj&&(this.popObj.destroy(),T(this.popObj.element)),this.activeEle&&(this.activeEle=null),this.popObj=null,this.tbarAlign=null,this.tbarItemsCol=[],this.remove(this.element,"e-toolpop"),this.cssClass&&x([this.element],this.cssClass.split(" ")),this.element.removeAttribute("style"),["aria-disabled","aria-orientation","role"].forEach(function(t){return e.element.removeAttribute(t)}),t.prototype.destroy.call(this)},e.prototype.preRender=function(){var t={enableCollision:this.enableCollision,scrollStep:this.scrollStep};this.trigger("beforeCreate",t),this.enableCollision=t.enableCollision,this.scrollStep=t.scrollStep,this.scrollModule=null,this.popObj=null,this.tempId=[],this.tbarItemsCol=this.items,this.isVertical=!!this.element.classList.contains("e-vertical"),this.isExtendedOpen=!1,this.popupPriCount=0,this.enableRtl&&this.add(this.element,"e-rtl")},e.prototype.wireEvents=function(){Ep.add(this.element,"click",this.clickHandler,this),window.addEventListener("resize",this.resizeContext),this.allowKeyboard&&this.wireKeyboardEvent()},e.prototype.wireKeyboardEvent=function(){this.keyModule=new pu(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs}),Ep.add(this.element,"keydown",this.docKeyDown,this),this.updateTabIndex("0")},e.prototype.updateTabIndex=function(t){var e=this.element.querySelector("."+lM+":not(."+pM+" ):not(."+hM+" ):not(."+xM+" )");if(!h(e)&&!h(e.firstElementChild)){var i=e.firstElementChild.getAttribute("data-tabindex");i&&"-1"===i&&"INPUT"!==e.firstElementChild.tagName&&e.firstElementChild.setAttribute("tabindex",t)}},e.prototype.unwireKeyboardEvent=function(){this.keyModule&&(Ep.remove(this.element,"keydown",this.docKeyDown),this.keyModule.destroy(),this.keyModule=null)},e.prototype.docKeyDown=function(t){if("INPUT"!==t.target.tagName){var e=!h(this.popObj)&&C(this.popObj.element)&&"Extended"!==this.overflowMode;9===t.keyCode&&!0===t.target.classList.contains("e-hor-nav")&&e&&this.popObj.hide({name:"FadeOut",duration:100});(40===t.keyCode||38===t.keyCode||35===t.keyCode||36===t.keyCode)&&t.preventDefault()}},e.prototype.unwireEvents=function(){Ep.remove(this.element,"click",this.clickHandler),this.destroyScroll(),this.unwireKeyboardEvent(),window.removeEventListener("resize",this.resizeContext),Ep.remove(document,"scroll",this.docEvent),Ep.remove(document,"click",this.docEvent)},e.prototype.clearProperty=function(){this.tbarEle=[],this.tbarAlgEle={lefts:[],centers:[],rights:[]}},e.prototype.docEvent=function(t){var e=j(t.target,".e-popup");this.popObj&&C(this.popObj.element)&&!e&&"Popup"===this.overflowMode&&this.popObj.hide({name:"FadeOut",duration:100})},e.prototype.destroyScroll=function(){this.scrollModule&&(this.tbarAlign&&this.add(this.scrollModule.element,vM),this.scrollModule.destroy(),this.scrollModule=null)},e.prototype.destroyItems=function(){if(this.element&&[].slice.call(this.element.querySelectorAll("."+lM)).forEach(function(t){T(t)}),this.tbarAlign){var t=this.element.querySelector("."+aM);[].slice.call(t.children).forEach(function(t){T(t)}),this.tbarAlign=!1,this.remove(t,vM)}this.clearProperty()},e.prototype.destroyMode=function(){this.scrollModule&&(this.remove(this.scrollModule.element,"e-rtl"),this.destroyScroll()),this.remove(this.element,EM),this.remove(this.element,"e-extended-toolbar");var t=this.element.querySelector(".e-toolbar-multirow");t&&this.remove(t,"e-toolbar-multirow"),this.popObj&&this.popupRefresh(this.popObj.element,!0)},e.prototype.add=function(t,e){t.classList.add(e)},e.prototype.remove=function(t,e){t.classList.remove(e)},e.prototype.elementFocus=function(t){var e=t.firstElementChild;e?(e.focus(),this.activeEleSwitch(t)):t.focus()},e.prototype.clstElement=function(t,e){return t&&this.popObj&&C(this.popObj.element)?this.popObj.element.querySelector("."+lM):this.element===e||t?this.element.querySelector("."+lM+":not(."+pM+" ):not(."+hM+" ):not(."+xM+" )"):j(e,"."+lM)},e.prototype.keyHandling=function(t,e,i,n,r){var o,s,a=this.popObj,l=this.element,h={name:"FadeOut",duration:100},c="moveUp"===e.action?"previous":"next";switch(e.action){case"moveRight":if(this.isVertical)return;l===i?this.elementFocus(t):n||this.eleFocus(t,"next");break;case"moveLeft":if(this.isVertical)return;n||this.eleFocus(t,"previous");break;case"home":case"end":if(t){var d=j(t,".e-popup"),p=this.element.querySelector("."+NM);"Extended"===this.overflowMode&&p&&p.classList.contains("e-popup-open")&&(d="end"===e.action?p:null),d?C(this.popObj.element)&&(s=[].slice.call(d.children),o="home"===e.action?s[0]:s[s.length-1]):(s=this.element.querySelectorAll("."+aM+" ."+lM+":not(."+hM+")"),o="home"===e.action?s[0]:s[s.length-1]),o&&this.elementFocus(o)}break;case"moveUp":case"moveDown":if(this.isVertical)"moveUp"===e.action?this.eleFocus(t,"previous"):this.eleFocus(t,"next");else if(a&&j(i,".e-popup")){var u=a.element,g=u.firstElementChild;"previous"===c&&g===t?u.lastElementChild.firstChild.focus():"next"===c&&u.lastElementChild===t?g.firstChild.focus():this.eleFocus(t,c)}else"moveDown"===e.action&&a&&C(a.element)&&this.elementFocus(t);break;case"tab":if(!r&&!n){var m=t.firstElementChild;l===i&&(this.activeEle?this.activeEle.focus():(this.activeEleRemove(m),m.focus()))}break;case"popupClose":a&&"Extended"!==this.overflowMode&&a.hide(h);break;case"popupOpen":if(!n)return;a&&!C(a.element)?(a.element.style.top=l.offsetHeight+"px",a.show({name:"FadeIn",duration:100})):a.hide(h)}},e.prototype.keyActionHandler=function(t){var e=t.target;if("INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName&&!this.element.classList.contains(pM)){t.preventDefault();var i=e.classList.contains(fM),n=e.classList.contains("e-scroll-nav"),r=this.clstElement(i,e);(r||n)&&this.keyHandling(r,t,e,i,n)}},e.prototype.disable=function(t){var e=this.element;t?e.classList.add(pM):e.classList.remove(pM),this.activeEle&&this.activeEle.setAttribute("tabindex",this.activeEle.getAttribute("data-tabindex")),this.scrollModule&&this.scrollModule.disable(t),this.popObj&&(C(this.popObj.element)&&"Extended"!==this.overflowMode&&this.popObj.hide(),e.querySelector("#"+e.id+"_nav").setAttribute("tabindex",t?"-1":"0"))},e.prototype.eleContains=function(t){return t.classList.contains(hM)||t.classList.contains(pM)||t.getAttribute("disabled")||t.classList.contains(xM)||!C(t)||!t.classList.contains(lM)},e.prototype.eleFocus=function(t,e){var i=Object(t)[e+"ElementSibling"];if(i){if(this.eleContains(i))return void this.eleFocus(i,e);this.elementFocus(i)}else if(this.tbarAlign){var n=Object(t.parentElement)[e+"ElementSibling"];if(h(n)||0!==n.children.length||(n=Object(n)[e+"ElementSibling"]),!h(n)&&n.children.length>0)if("next"===e){var r=n.querySelector("."+lM);this.eleContains(r)?this.eleFocus(r,e):(r.firstElementChild.focus(),this.activeEleSwitch(r))}else{r=n.lastElementChild;this.eleContains(r)?this.eleFocus(r,e):this.elementFocus(r)}}else if(!h(t)){var o=this.element.querySelectorAll("."+aM+" ."+lM+":not(."+hM+"):not(."+pM+"):not(."+xM+")");"next"===e&&o?this.elementFocus(o[0]):"previous"===e&&o&&this.elementFocus(o[o.length-1])}},e.prototype.clickHandler=function(t){var e=this,i=t.target,n=this.element,r=!h(j(i,"."+yM)),o=i.classList,s=j(i,"."+fM);s||(s=i),n.children[0].classList.contains("e-hscroll")||n.children[0].classList.contains("e-vscroll")||!o.contains(fM)||(o=i.querySelector(".e-icons").classList),(o.contains(cM)||o.contains(dM))&&this.popupClickHandler(n,s,"e-rtl");var a,l=j(t.target,"."+lM);if(!h(l)&&!l.classList.contains(pM)||s.classList.contains(fM)){if(l){a=this.items[this.tbarEle.indexOf(l)]}var c={originalEvent:t,item:a};a&&!h(a.click)&&this.trigger("items["+this.tbarEle.indexOf(l)+"].click",c),c.cancel||this.trigger("clicked",c,function(t){!h(e.popObj)&&r&&!t.cancel&&"Popup"===e.overflowMode&&t.item&&"Input"!==t.item.type&&e.popObj.hide({name:"FadeOut",duration:100})})}},e.prototype.popupClickHandler=function(t,e,i){var n=this.popObj;C(n.element)?(e.classList.remove(SM),n.hide({name:"FadeOut",duration:100})):(t.classList.contains(i)&&(n.enableRtl=!0,n.position={X:"left",Y:"top"}),0!==n.offsetX||t.classList.contains(i)||(n.enableRtl=!1,n.position={X:"right",Y:"top"}),n.dataBind(),n.refreshPosition(),n.element.style.top=this.getElementOffsetY()+"px","Extended"===this.overflowMode&&(n.element.style.minHeight="0px"),e.classList.add(SM),n.show({name:"FadeIn",duration:100}))},e.prototype.render=function(){this.initialize(),this.renderControl(),this.wireEvents(),this.renderComplete()},e.prototype.initialize=function(){var t=m(this.width),e=m(this.height);"msie"===Np.info.name&&"auto"===this.height&&"MultiRow"!==this.overflowMode||P(this.element,{height:e}),P(this.element,{width:t});var i={role:"toolbar","aria-disabled":"false","aria-orientation":this.isVertical?"vertical":"horizontal"};L(this.element,i),this.cssClass&&I([this.element],this.cssClass.split(" "))},e.prototype.renderControl=function(){var t=this.element;this.trgtEle=t.children.length>0?t.querySelector("div"):null,this.tbarAlgEle={lefts:[],centers:[],rights:[]},this.renderItems(),this.renderLayout()},e.prototype.renderLayout=function(){this.renderOverflowMode(),this.tbarAlign&&this.itemPositioning(),this.popObj&&this.popObj.element.childElementCount>1&&this.checkPopupRefresh(this.element,this.popObj.element)&&this.popupRefresh(this.popObj.element,!1),this.separator()},e.prototype.itemsAlign=function(t,e){var i,n;this.tbarEle||(this.tbarEle=[]);for(var r=0;r<t.length;r++)i=this.renderSubComponent(t[parseInt(r.toString(),10)],r),-1===this.tbarEle.indexOf(i)&&this.tbarEle.push(i),this.tbarAlign||this.tbarItemAlign(t[parseInt(r.toString(),10)],e,r),(n=e.querySelector(".e-toolbar-"+t[parseInt(r.toString(),10)].align.toLowerCase()))?(t[parseInt(r.toString(),10)].showAlwaysInPopup&&"Show"!==t[parseInt(r.toString(),10)].overflow||this.tbarAlgEle[(t[parseInt(r.toString(),10)].align+"s").toLowerCase()].push(i),n.appendChild(i)):e.appendChild(i);if(this.isReact){this.notify("render-react-toolbar-template",this.portals),this.renderReactTemplates()}},e.prototype.changeOrientation=function(){var t=this.element;this.isVertical?(t.classList.remove("e-vertical"),this.isVertical=!1,"auto"!==this.height&&"100%"!==this.height||(t.style.height=this.height),t.setAttribute("aria-orientation","horizontal")):(t.classList.add("e-vertical"),this.isVertical=!0,t.setAttribute("aria-orientation","vertical"),P(this.element,{height:m(this.height),width:m(this.width)})),this.destroyMode(),this.refreshOverflow()},e.prototype.initScroll=function(t,e){!this.scrollModule&&this.checkOverflow(t,e[0])&&(this.tbarAlign&&this.element.querySelector("."+aM+" .e-toolbar-center").removeAttribute("style"),this.isVertical?this.scrollModule=new Lx({scrollStep:this.scrollStep,enableRtl:this.enableRtl},e[0]):this.scrollModule=new bx({scrollStep:this.scrollStep,enableRtl:this.enableRtl},e[0]),this.cssClass&&I([e[0]],this.cssClass.split(" ")),this.remove(this.scrollModule.element,vM),P(this.element,{overflow:"hidden"}))},e.prototype.itemWidthCal=function(t){var e,i=this,n=0;return[].slice.call(z("."+lM,t)).forEach(function(t){C(t)&&(e=window.getComputedStyle(t),n+=i.isVertical?t.offsetHeight:t.offsetWidth,n+=parseFloat(i.isVertical?e.marginTop:e.marginRight),n+=parseFloat(i.isVertical?e.marginBottom:e.marginLeft))}),n},e.prototype.getScrollCntEle=function(t){var e=this.isVertical?".e-vscroll-content":".e-hscroll-content";return t.querySelector(e)},e.prototype.checkOverflow=function(t,e){if(h(t)||h(e)||!C(t))return!1;var i=this.isVertical?t.offsetHeight:t.offsetWidth,n=this.isVertical?e.offsetHeight:e.offsetWidth;(this.tbarAlign||this.scrollModule||i===n)&&(n=this.itemWidthCal(this.scrollModule?this.getScrollCntEle(e):e));var r=t.querySelector("."+fM),o=t.querySelector(".e-scroll-nav"),s=0;return r?s=this.isVertical?r.offsetHeight:r.offsetWidth:o&&(s=this.isVertical?2*o.offsetHeight:2*o.offsetWidth),n>i-s},e.prototype.refreshOverflow=function(){this.resize()},e.prototype.toolbarAlign=function(t){this.tbarAlign&&(this.add(t,vM),this.itemPositioning())},e.prototype.renderOverflowMode=function(){var t=this.element,e=t.querySelector("."+aM),i=this.popupPriCount>0;if(t&&t.children.length>0)switch(this.offsetWid=t.offsetWidth,this.remove(this.element,"e-toolpop"),"msie"===Np.info.name&&"auto"===this.height&&(t.style.height=""),this.overflowMode){case"Scrollable":h(this.scrollModule)&&this.initScroll(t,[].slice.call(t.getElementsByClassName(aM)));break;case"Popup":this.add(this.element,"e-toolpop"),this.tbarAlign&&this.removePositioning(),(this.checkOverflow(t,e)||i)&&this.setOverflowAttributes(t),this.toolbarAlign(e);break;case"MultiRow":this.add(e,"e-toolbar-multirow"),this.checkOverflow(t,e)&&this.tbarAlign&&(this.removePositioning(),this.add(e,"e-multirow-pos")),"hidden"===t.style.overflow&&(t.style.overflow=""),"msie"!==Np.info.name&&"auto"===t.style.height||(t.style.height="auto");break;case"Extended":this.add(this.element,"e-extended-toolbar"),(this.checkOverflow(t,e)||i)&&(this.tbarAlign&&this.removePositioning(),this.setOverflowAttributes(t)),this.toolbarAlign(e)}},e.prototype.setOverflowAttributes=function(t){this.createPopupEle(t,[].slice.call(z("."+aM+" ."+lM,t)));L(this.element.querySelector("."+fM),{tabindex:"0",role:"button","aria-haspopup":"true","aria-label":"overflow"})},e.prototype.separator=function(){var t=this.element,e=[].slice.call(t.querySelectorAll("."+hM)),i=t.querySelector("."+MM),n=t.querySelector("."+CM),r="MultiRow"===this.overflowMode?i:n;null!==r&&("MultiRow"===this.overflowMode?r.classList.remove(MM):"Extended"===this.overflowMode&&r.classList.remove(CM));for(var o=0;o<=e.length-1;o++)e[parseInt(o.toString(),10)].offsetLeft<30&&0!==e[parseInt(o.toString(),10)].offsetLeft&&("MultiRow"===this.overflowMode?e[parseInt(o.toString(),10)].classList.add(MM):"Extended"===this.overflowMode&&e[parseInt(o.toString(),10)].classList.add(CM))},e.prototype.createPopupEle=function(t,e){var i=t.querySelector("."+fM),n=this.isVertical;i||this.createPopupIcon(t),i=t.querySelector("."+fM);var r=n?i.offsetHeight:i.offsetWidth,o=(n?t.offsetHeight:t.offsetWidth)-r;this.element.classList.remove("e-rtl"),P(this.element,{direction:"initial"}),this.checkPriority(t,e,o,!0),this.enableRtl&&this.element.classList.add("e-rtl"),this.element.style.removeProperty("direction"),this.createPopup()},e.prototype.pushingPoppedEle=function(t,e,i,n,r){var o=t.element,s=[].slice.call(z("."+bM,o.querySelector("."+aM))),a=z("."+gM,i),l=0,h=0;s.forEach(function(o,s){a=z("."+gM,i),o.classList.contains(gM)&&a.length>0?t.tbResize&&a.length>s?(i.insertBefore(o,a[parseInt(s.toString(),10)]),++h):(i.insertBefore(o,i.children[a.length]),++h):o.classList.contains(gM)?(i.insertBefore(o,i.firstChild),++h):t.tbResize&&o.classList.contains(mM)&&i.children.length>0&&0===a.length?(i.insertBefore(o,i.firstChild),++h):o.classList.contains(mM)?e.push(o):t.tbResize?(i.insertBefore(o,i.childNodes[l+h]),++l):i.appendChild(o),o.classList.contains(hM)?P(o,{display:"",height:r+"px"}):P(o,{display:"",height:n+"px"})}),e.forEach(function(t){i.appendChild(t)});for(var c=z("."+lM,o.querySelector("."+aM)),d=c.length-1;d>=0;d--){var p=c[parseInt(d.toString(),10)];if(!p.classList.contains(hM)||"Extended"===this.overflowMode)break;P(p,{display:"none"})}},e.prototype.createPopup=function(){var t,e,i=this.element;"Extended"===this.overflowMode&&(e=i.querySelector("."+hM+":not(."+bM+")"),t="auto"===i.style.height||""===i.style.height?null:e.offsetHeight);var n,r=i.querySelector("."+lM+":not(."+hM+"):not(."+bM+")"),o="auto"===i.style.height||""===i.style.height?null:r&&r.offsetHeight;if(A("#"+i.id+"_popup."+yM,i))n=A("#"+i.id+"_popup."+yM,i);else{var s=this.createElement("div",{id:i.id+"_popup",className:yM+" "+NM}),a=this.createElement("div",{id:i.id+"_popup",className:yM});n="Extended"===this.overflowMode?s:a}this.pushingPoppedEle(this,[],n,o,t),this.popupInit(i,n)},e.prototype.getElementOffsetY=function(){return"Extended"===this.overflowMode&&"border-box"===window.getComputedStyle(this.element).getPropertyValue("box-sizing")?this.element.clientHeight:this.element.offsetHeight},e.prototype.popupInit=function(t,e){if(this.popObj){var i=this.popObj.element;P(i,{maxHeight:"",display:"block"}),P(i,{maxHeight:i.offsetHeight+"px",display:""})}else{t.appendChild(e),this.cssClass&&I([e],this.cssClass.split(" ")),P(this.element,{overflow:""});var n=window.getComputedStyle(this.element),r=new Am(null,{relateTo:this.element,offsetY:this.isVertical?0:this.getElementOffsetY(),enableRtl:this.enableRtl,open:this.popupOpen.bind(this),close:this.popupClose.bind(this),collision:{Y:this.enableCollision?"flip":"none"},position:this.enableRtl?{X:"left",Y:"top"}:{X:"right",Y:"top"}});if("Extended"===this.overflowMode&&(r.width=parseFloat(n.width)+2*parseFloat(n.borderRightWidth),r.offsetX=0),r.appendTo(e),Ep.add(document,"scroll",this.docEvent.bind(this)),Ep.add(document,"click ",this.docEvent.bind(this)),r.element.style.maxHeight=r.element.offsetHeight+"px",this.isVertical&&(r.element.style.visibility="hidden"),this.isExtendedOpen){var o=this.element.querySelector("."+fM);o.classList.add(SM),R(o.firstElementChild,[cM],[dM]),this.element.querySelector("."+NM).classList.add("e-popup-open")}else r.hide();this.popObj=r}},e.prototype.tbarPopupHandler=function(t){"Extended"===this.overflowMode&&(t?this.add(this.element,EM):this.remove(this.element,EM))},e.prototype.popupOpen=function(t){var e=this.popObj;this.isVertical||(e.offsetY=this.getElementOffsetY(),e.dataBind());var i=this.popObj.element,n=this.popObj.element.parentElement,r=n.querySelector("."+fM);r.setAttribute("aria-expanded","true"),P(e.element,{height:"auto",maxHeight:""}),e.element.style.maxHeight=e.element.offsetHeight+"px","Extended"===this.overflowMode&&(e.element.style.minHeight="");var o=i.offsetTop+i.offsetHeight+je(n).top,s=r.firstElementChild;r.classList.add(SM),R(s,[cM],[dM]),this.tbarPopupHandler(!0);var a=h(window.scrollY)?0:window.scrollY;if(!this.isVertical&&window.innerHeight+a<o&&this.element.offsetTop<i.offsetHeight){var l=i.offsetHeight-(o-window.innerHeight-a+5);e.height=l+"px";for(var c=0;c<=i.childElementCount;c++){var d=i.children[parseInt(c.toString(),10)];if(d.offsetTop+d.offsetHeight>l){l=d.offsetTop;break}}P(e.element,{maxHeight:l+"px"})}else if(this.isVertical){var p=this.element.getBoundingClientRect();P(e.element,{maxHeight:p.top+this.element.offsetHeight+"px",bottom:0,visibility:""})}if(e){var u=i.getBoundingClientRect();u.right>document.documentElement.clientWidth&&u.width>n.getBoundingClientRect().width&&(e.collision={Y:"none"},e.dataBind()),e.refreshPosition()}},e.prototype.popupClose=function(t){var e=this.element.querySelector("."+fM);e.setAttribute("aria-expanded","false");var i=e.firstElementChild;e.classList.remove(SM),R(i,[dM],[cM]),this.tbarPopupHandler(!1)},e.prototype.checkPriority=function(t,e,i,n){for(var r,o=this.popupPriCount>0,s=i,a=0,l=0,h=0,c=function(t,e){var i=!1;return e.forEach(function(e){t.classList.contains(e)&&(i=!0)}),i},d=e.length-1;d>=0;d--){var p=void 0,u=window.getComputedStyle(e[parseInt(d.toString(),10)]);this.isVertical?(p=parseFloat(u.marginTop),p+=parseFloat(u.marginBottom)):(p=parseFloat(u.marginRight),p+=parseFloat(u.marginLeft));var g=e[parseInt(d.toString(),10)]===this.tbarEle[0];g&&(this.tbarEleMrgn=p),r=this.isVertical?e[parseInt(d.toString(),10)].offsetHeight:e[parseInt(d.toString(),10)].offsetWidth;var m=g?r+p:r;if(c(e[parseInt(d.toString(),10)],[IM])&&o&&(e[parseInt(d.toString(),10)].classList.add(bM),this.isVertical?P(e[parseInt(d.toString(),10)],{display:"none",minHeight:m+"px"}):P(e[parseInt(d.toString(),10)],{display:"none",minWidth:m+"px"}),h++),this.isVertical?e[parseInt(d.toString(),10)].offsetTop+e[parseInt(d.toString(),10)].offsetHeight+p>i:e[parseInt(d.toString(),10)].offsetLeft+e[parseInt(d.toString(),10)].offsetWidth+p>i){if(e[parseInt(d.toString(),10)].classList.contains(hM)){if("Extended"===this.overflowMode){if(l===h){c(f=e[parseInt(d.toString(),10)],[hM,wM])&&(e[parseInt(d.toString(),10)].classList.add(bM),h++)}l++}else if("Popup"===this.overflowMode){if(a>0&&l===h){var f;c(f=e[d+l+(a-1)],[hM,wM])&&P(f,{display:"none"})}a++,l=0,h=0}}else l++;e[parseInt(d.toString(),10)].classList.contains(gM)&&n?i-=(this.isVertical?e[parseInt(d.toString(),10)].offsetHeight:e[parseInt(d.toString(),10)].offsetWidth)+p:c(e[parseInt(d.toString(),10)],[hM,wM])?i-=(this.isVertical?e[parseInt(d.toString(),10)].offsetHeight:e[parseInt(d.toString(),10)].offsetWidth)+p:(e[parseInt(d.toString(),10)].classList.add(bM),this.isVertical?P(e[parseInt(d.toString(),10)],{display:"none",minHeight:m+"px"}):P(e[parseInt(d.toString(),10)],{display:"none",minWidth:m+"px"}),h++)}}if(n){var v=z("."+lM+":not(."+bM+")",this.element);this.checkPriority(t,v,s,!1)}},e.prototype.createPopupIcon=function(t){var e=t.id.concat("_nav"),i="e-"+t.id.concat("_nav e-hor-nav");i="Extended"===this.overflowMode?i+" e-expended-nav":i;var n=this.createElement("div",{id:e,className:i});"msie"!==Np.info.name&&"edge"!==Np.info.name||n.classList.add("e-ie-align");var r=this.createElement("div",{className:dM+" e-icons"});n.appendChild(r),n.setAttribute("tabindex","0"),n.setAttribute("role","button"),t.appendChild(n)},e.prototype.tbarPriRef=function(t,e,i,n,r,o,s,a){var l=a,c=this.popObj.element,d=z("."+bM+":not(."+gM+")",c).length,p=function(t,e){return t.classList.contains(e)};if(0===z(".e-toolbar-item:not(.e-separator):not(.e-overflow-show)",t).length){var u=t.children[e-(e-i)-1],g=!h(u)&&p(u,wM);if(!h(u)&&p(u,hM)&&!C(u)||g){u.style.display="inherit";var m=u.offsetWidth+2*parseFloat(window.getComputedStyle(u).marginRight),f=u.previousElementSibling;o+m<s||r?(t.insertBefore(n,t.children[e+l-(e-i)]),h(f)||(f.style.display="")):f.classList.contains(hM)&&(f.style.display="none"),u.style.display=""}else t.insertBefore(n,t.children[e+l-(e-i)])}else t.insertBefore(n,t.children[e+l-d])},e.prototype.popupRefresh=function(t,e){var i=this,n=this.element,r=this.isVertical,o=n.querySelector("."+aM),s=n.querySelector("."+fM);if(!h(s)){o.removeAttribute("style"),t.style.display="block";var a;a=r?n.offsetHeight-(s.offsetHeight+o.offsetHeight):n.offsetWidth-(s.offsetWidth+o.offsetWidth);var l=0;[].slice.call(t.children).forEach(function(t){l+=i.popupEleWidth(t),P(t,{position:""})}),a+(r?s.offsetHeight:s.offsetWidth)>l&&0===this.popupPriCount&&(e=!0),this.popupEleRefresh(a,t,e),t.style.display="",0===t.children.length&&s&&this.popObj&&(T(s),s=null,this.popObj.destroy(),T(this.popObj.element),this.popObj=null)}},e.prototype.ignoreEleFetch=function(t,e){var i=[].slice.call(e.querySelectorAll("."+wM)),n=[],r=0;return i.length>0?(i.forEach(function(t){n.push([].slice.call(e.children).indexOf(t))}),n.forEach(function(e){e<=t&&r++}),r):0},e.prototype.checkPopupRefresh=function(t,e){e.style.display="block";var i=this.popupEleWidth(e.firstElementChild);e.firstElementChild.style.removeProperty("Position");var n=t.offsetWidth-t.querySelector("."+fM).offsetWidth,r=t.querySelector("."+aM).offsetWidth;return e.style.removeProperty("display"),n>i+r},e.prototype.popupEleWidth=function(t){t.style.position="absolute";var e=this.isVertical?t.offsetHeight:t.offsetWidth,i=t.querySelector(".e-tbar-btn-text");if(t.classList.contains("e-tbtn-align")||t.classList.contains(uM)){var n=t.children[0];!h(i)&&t.classList.contains(uM)?i.style.display="none":!h(i)&&t.classList.contains("e-toolbar-text")&&(i.style.display="block"),n.style.minWidth="0%",e=parseFloat(this.isVertical?t.style.minHeight:t.style.minWidth),n.style.minWidth="",n.style.minHeight="",h(i)||(i.style.display="")}return e},e.prototype.popupEleRefresh=function(t,e,i){for(var n,r,o=this.popupPriCount>0,s=this.tbarEle,a=this.element.querySelector("."+aM),l=0,h=function(e){if(e.classList.contains(IM)&&o&&!i)return"continue";var h=c.popupEleWidth(e);if(e===c.tbarEle[0]&&(h+=c.tbarEleMrgn),e.style.position="",!(h<t||i))return"break";if(P(e,{minWidth:"",height:"",minHeight:""}),e.classList.contains(mM)||e.classList.remove(bM),r=c.tbarEle.indexOf(e),c.tbarAlign){var d=c.items[parseInt(r.toString(),10)].align;r=c.tbarAlgEle[(d+"s").toLowerCase()].indexOf(e),s=c.tbarAlgEle[(d+"s").toLowerCase()],a=c.element.querySelector("."+aM+" .e-toolbar-"+d.toLowerCase())}var p=0;"Extended"!==c.overflowMode&&s.slice(0,r).forEach(function(e){(e.classList.contains(gM)||e.classList.contains(hM))&&(e.classList.contains(hM)&&(e.style.display="",t-=e.offsetWidth),p++)}),l=c.ignoreEleFetch(r,a),e.classList.contains(gM)?(c.tbarPriRef(a,r,p,e,i,h,t,l),t-=e.offsetWidth):0===r?(a.insertBefore(e,a.firstChild),t-=e.offsetWidth):(n=z("."+gM,c.popObj.element).length,a.insertBefore(e,a.children[r+l-n]),t-=e.offsetWidth),e.style.height=""},c=this,d=0,p=[].slice.call(e.children);d<p.length;d++){if("break"===h(p[d]))break}this.checkOverflow(this.element,this.element.getElementsByClassName(aM)[0])&&!i&&this.renderOverflowMode()},e.prototype.removePositioning=function(){var t=this.element.querySelector("."+aM);if(!h(t)&&t.classList.contains(vM)){this.remove(t,vM);var e=[].slice.call(t.childNodes);e[1].removeAttribute("style"),e[2].removeAttribute("style")}},e.prototype.refreshPositioning=function(){var t=this.element.querySelector("."+aM);this.add(t,vM),this.itemPositioning()},e.prototype.itemPositioning=function(){var t,e=this.element.querySelector("."+aM);if(!h(e)&&e.classList.contains(vM)){var i,n=this.element.querySelector("."+fM);if(this.scrollModule){var r=this.isVertical?"e-vscroll-content":"e-hscroll-content";i=[].slice.call(e.querySelector("."+r).children)}else i=[].slice.call(e.childNodes);t=this.isVertical?i[0].offsetHeight+i[2].offsetHeight:i[0].offsetWidth+i[2].offsetWidth;var o=this.isVertical?this.element.offsetHeight:this.element.offsetWidth;if(n){o-=this.isVertical?n.offsetHeight:n.offsetWidth;var s=(this.isVertical?n.offsetHeight:n.offsetWidth)+"px";i[2].removeAttribute("style"),this.isVertical?this.enableRtl?i[2].style.top=s:i[2].style.bottom=s:this.enableRtl?i[2].style.left=s:i[2].style.right=s}if(!(o<=t)){var a=(o-t-(this.isVertical?i[1].offsetHeight:i[1].offsetWidth))/2;i[1].removeAttribute("style");var l=(this.isVertical?i[0].offsetHeight:i[0].offsetWidth)+a+"px";this.isVertical?this.enableRtl?i[1].style.marginBottom=l:i[1].style.marginTop=l:this.enableRtl?i[1].style.marginRight=l:i[1].style.marginLeft=l}}},e.prototype.tbarItemAlign=function(t,e,i){var n=this;if(!t.showAlwaysInPopup||"Show"===t.overflow){var r=[];if(r.push(this.createElement("div",{className:"e-toolbar-left"})),r.push(this.createElement("div",{className:"e-toolbar-center"})),r.push(this.createElement("div",{className:"e-toolbar-right"})),0===i&&"Left"!==t.align)r.forEach(function(t){e.appendChild(t)}),this.tbarAlign=!0,this.add(e,vM);else if("Left"!==t.align){var o=e.childNodes,s=r[0];[].slice.call(o).forEach(function(t){n.tbarAlgEle.lefts.push(t),s.appendChild(t)}),e.appendChild(s),e.appendChild(r[1]),e.appendChild(r[2]),this.tbarAlign=!0,this.add(e,vM)}}},e.prototype.ctrlTemplate=function(){var t=this;this.ctrlTem=this.trgtEle.cloneNode(!0),this.add(this.trgtEle,aM),this.tbarEle=[];[].slice.call(this.trgtEle.children).forEach(function(e){"DIV"===e.tagName&&(t.tbarEle.push(e),h(e.firstElementChild)||e.firstElementChild.setAttribute("aria-disabled","false"),t.add(e,lM))})},e.prototype.renderItems=function(){var t=this.element,e=this.items;if(null!=this.trgtEle)this.ctrlTemplate();else if(t&&e.length>0){var i=void 0;t&&t.children.length>0&&(i=t.querySelector("."+aM)),i||(i=this.createElement("div",{className:aM})),this.itemsAlign(e,i),t.appendChild(i)}},e.prototype.setAttr=function(t,e){for(var i,n=Object.keys(t),r=0;r<n.length;r++)"class"===(i=n[parseInt(r.toString(),10)])?this.add(e,t[""+i]):e.setAttribute(i,t[""+i])},e.prototype.enableItems=function(t,e){var i,n=t,r=n.length;h(e)&&(e=!0);var o=function(t,e){t?(e.classList.remove(pM),h(e.firstElementChild)||e.firstElementChild.setAttribute("aria-disabled","false")):(e.classList.add(pM),h(e.firstElementChild)||e.firstElementChild.setAttribute("aria-disabled","true"))};if(!h(r)&&r>=1){for(var s=0,a=[].slice.call(n);s<r;s++){var l=a[parseInt(s.toString(),10)];if("number"==typeof l){if(i=this.getElementByIndex(l),h(i))return;n[parseInt(s.toString(),10)]=i}else i=l;o(e,i)}e?x(n,pM):I(n,pM)}else{if("number"==typeof n){if(i=this.getElementByIndex(n),h(i))return}else i=t;o(e,i)}},e.prototype.getElementByIndex=function(t){return this.tbarEle[parseInt(t.toString(),10)]?this.tbarEle[parseInt(t.toString(),10)]:null},e.prototype.addItems=function(t,e){var i;this.extendedOpen();var n=this.element.querySelector("."+aM);if(h(n))this.itemsRerender(t);else{var r,o="Left";h(e)&&(e=0),t.forEach(function(t){h(t.align)||"Left"===t.align||"Left"!==o||(o=t.align)});for(var s=0,a=t;s<a.length;s++){var l=a[s];if(h(l.type)&&(l.type="Button"),i=z("."+lM,this.element),l.align=o,r=this.renderSubComponent(l,e),this.tbarEle.length>=e&&i.length>=0){h(this.scrollModule)&&this.destroyMode();var c="L"===l.align[0]?0:"C"===l.align[0]?1:2,d=void 0;this.tbarAlign||"Left"===o?this.tbarAlign?((d=j(i[0],"."+aM).children[parseInt(c.toString(),10)]).insertBefore(r,d.children[parseInt(e.toString(),10)]),this.tbarAlgEle[(l.align+"s").toLowerCase()].splice(e,0,r),this.refreshPositioning()):0===i.length?(i=z("."+aM,this.element))[0].appendChild(r):i[0].parentNode.insertBefore(r,i[parseInt(e.toString(),10)]):(this.tbarItemAlign(l,n,1),this.tbarAlign=!0,(d=j(i[0],"."+aM).children[parseInt(c.toString(),10)]).appendChild(r),this.tbarAlgEle[(l.align+"s").toLowerCase()].push(r),this.refreshPositioning()),this.items.splice(e,0,l),l.template&&this.tbarEle.splice(this.tbarEle.length-1,1),this.tbarEle.splice(e,0,r),e++,this.offsetWid=n.offsetWidth}}n.style.width="",this.renderOverflowMode(),this.isReact&&this.renderReactTemplates()}},e.prototype.removeItems=function(t){var e,i=t,n=[].slice.call(z("."+lM,this.element));if("number"==typeof i)e=parseInt(t.toString(),10),this.removeItemByIndex(e,n);else if(i&&i.length>1)for(var r=0,o=[].slice.call(i);r<o.length;r++){var s=o[r];e=this.tbarEle.indexOf(s),this.removeItemByIndex(e,n),n=z("."+lM,this.element)}else{s=i&&i.length&&1===i.length?i[0]:t;e=n.indexOf(s),this.removeItemByIndex(e,n)}this.resize()},e.prototype.removeItemByIndex=function(t,e){if(this.tbarEle[parseInt(t.toString(),10)]&&e[parseInt(t.toString(),10)]){var i=this.tbarEle.indexOf(e[parseInt(t.toString(),10)]);if(this.tbarAlign){var n=this.tbarAlgEle[(this.items[parseInt(i.toString(),10)].align+"s").toLowerCase()].indexOf(this.tbarEle[parseInt(i.toString(),10)]);this.tbarAlgEle[(this.items[parseInt(i.toString(),10)].align+"s").toLowerCase()].splice(parseInt(n.toString(),10),1)}this.isReact&&this.clearTemplate();var r=e[parseInt(t.toString(),10)].querySelector(".e-control.e-btn");h(r)||h(r.ej2_instances[0])||r.ej2_instances[0].isDestroyed||r.ej2_instances[0].destroy(),T(e[parseInt(t.toString(),10)]),this.items.splice(i,1),this.tbarEle.splice(i,1)}},e.prototype.templateRender=function(t,e,i,n){var r,o=i.type,s=t;if("object"==typeof t&&(r="function"==typeof s.appendTo),"string"!=typeof t&&r){if("Input"===o){p=this.createElement("input");i.id?p.id=i.id:p.id=d("tbr-ipt"),e.appendChild(p),s.appendTo(p)}}else{var a=void 0,l=t,c=new RegExp(/<(?=.*? .*?\/ ?>|br|hr|input|!--|wbr)[a-z]+.*?>|<([a-z]+).*?<\/\1>/i);l="string"==typeof t?t.trim():t;try{if("object"!=typeof t||h(t.tagName))if("string"==typeof t&&c.test(l))e.innerHTML=l;else if(document.querySelectorAll(l).length){var p,u=(p=document.querySelector(l)).outerHTML.trim();e.appendChild(p),p.style.display="",h(u)||this.tempId.push(l)}else a=gt(l);else e.appendChild(t)}catch(t){a=gt(l)}var g=void 0;if(!h(a)){var m=this.element.id+n+"_template";g=a({},this,"template",m,this.isStringTemplate)}!h(g)&&g.length>0&&[].slice.call(g).forEach(function(t){h(t.tagName)||(t.style.display=""),e.appendChild(t)})}this.add(e,"e-template"),this.tbarEle.push(e)},e.prototype.buttonRendering=function(t,e){var i=this.createElement("button",{className:"e-tbar-btn"});i.setAttribute("type","button");var n,r,o=t.text;t.id?i.id=t.id:i.id=d("e-tbr-btn");var s=this.createElement("span",{className:"e-tbar-btn-text"});o?(s.innerHTML=this.enableHtmlSanitizer?Yu.sanitize(o):o,i.appendChild(s),i.classList.add("e-tbtn-txt")):this.add(e,"e-tbtn-align"),(t.prefixIcon||t.suffixIcon)&&(t.prefixIcon&&t.suffixIcon||t.prefixIcon?(n=t.prefixIcon+" e-icons",r="Left"):(n=t.suffixIcon+" e-icons",r="Right"));var a=new Um({iconCss:n,iconPosition:r});return a.createElement=this.createElement,a.appendTo(i),t.width&&P(i,{width:m(t.width)}),i},e.prototype.renderSubComponent=function(t,e){var i,n=this.createElement("div",{className:lM}),r=this.createElement("div",{innerHTML:this.enableHtmlSanitizer?Yu.sanitize(t.tooltipText):t.tooltipText});if(this.tbarEle||(this.tbarEle=[]),t.htmlAttributes&&this.setAttr(t.htmlAttributes,n),t.tooltipText&&n.setAttribute("title",r.textContent),t.cssClass&&(n.className=n.className+" "+t.cssClass),t.template)this.templateRender(t.template,n,t,e);else switch(t.type){case"Button":(i=this.buttonRendering(t,n)).setAttribute("tabindex",h(t.tabIndex)?"-1":t.tabIndex.toString()),i.setAttribute("data-tabindex",h(t.tabIndex)?"-1":t.tabIndex.toString()),i.setAttribute("aria-label",t.text||t.tooltipText),i.setAttribute("aria-disabled","false"),n.appendChild(i),n.addEventListener("click",this.itemClick.bind(this));break;case"Separator":this.add(n,hM)}if(t.showTextOn){var o=t.showTextOn;"Toolbar"===o?(this.add(n,"e-toolbar-text"),this.add(n,"e-tbtn-align")):"Overflow"===o&&this.add(n,uM)}if(t.overflow){var s=t.overflow;"Show"===s?this.add(n,gM):"Hide"===s&&(n.classList.contains(hM)||this.add(n,mM))}return"Show"!==t.overflow&&t.showAlwaysInPopup&&!n.classList.contains(hM)&&(this.add(n,IM),this.popupPriCount++),t.disabled&&this.add(n,pM),!1===t.visible&&this.add(n,xM),n},e.prototype.getDataTabindex=function(t){return h(t.getAttribute("data-tabindex"))?"-1":t.getAttribute("data-tabindex")},e.prototype.itemClick=function(t){this.activeEleSwitch(t.currentTarget)},e.prototype.activeEleSwitch=function(t){this.activeEleRemove(t.firstElementChild),this.activeEle.focus()},e.prototype.activeEleRemove=function(t){h(this.activeEle)||this.activeEle.setAttribute("tabindex",this.getDataTabindex(this.activeEle)),this.activeEle=t,"-1"===this.getDataTabindex(this.activeEle)&&(h(this.trgtEle)&&!t.parentElement.classList.contains("e-template")?(this.updateTabIndex("-1"),t.removeAttribute("tabindex")):this.activeEle.setAttribute("tabindex",this.getDataTabindex(this.activeEle)))},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.getModuleName=function(){return"toolbar"},e.prototype.itemsRerender=function(t){this.items=this.tbarItemsCol,(this.isReact||this.isAngular)&&this.clearTemplate(),this.destroyMode(),this.destroyItems(),this.items=t,this.tbarItemsCol=this.items,this.renderItems(),this.renderOverflowMode(),this.isReact&&this.renderReactTemplates()},e.prototype.resize=function(){var t=this.element;this.tbResize=!0,this.tbarAlign&&this.itemPositioning(),this.popObj&&"Popup"===this.overflowMode&&this.popObj.hide();var e=this.checkOverflow(t,t.getElementsByClassName(aM)[0]);if(!e){this.destroyScroll();var i=t.querySelector("."+aM);h(i)||(this.remove(i,"e-multirow-pos"),this.tbarAlign&&this.add(i,vM))}if(!e||!this.scrollModule||this.offsetWid!==t.offsetWidth){if((this.offsetWid>t.offsetWidth||e)&&this.renderOverflowMode(),this.popObj){if("Extended"===this.overflowMode){var n=window.getComputedStyle(this.element);this.popObj.width=parseFloat(n.width)+2*parseFloat(n.borderRightWidth)}this.tbarAlign&&this.removePositioning(),this.popupRefresh(this.popObj.element,!1),this.tbarAlign&&this.refreshPositioning()}this.element.querySelector(".e-hscroll-bar")&&(this.scrollStep=this.element.querySelector(".e-hscroll-bar").offsetWidth),this.offsetWid=t.offsetWidth,this.tbResize=!1,this.separator()}},e.prototype.extendedOpen=function(){var t=this.element.querySelector("."+NM);"Extended"===this.overflowMode&&t&&(this.isExtendedOpen=t.classList.contains("e-popup-open"))},e.prototype.updateHideEleTabIndex=function(t,e,i,n,r){i&&(n=r.indexOf(t));for(var o=r[++n];o;){if(!this.eleContains(o)){var s=o.firstElementChild.getAttribute("data-tabindex");e&&"-1"===s?o.firstElementChild.setAttribute("tabindex","0"):s!==o.firstElementChild.getAttribute("tabindex")&&o.firstElementChild.setAttribute("tabindex",s);break}o=r[++n]}},e.prototype.onPropertyChanged=function(t,e){var i=this.element,n=i.offsetWidth;this.extendedOpen();for(var r=0,o=Object.keys(t);r<o.length;r++){switch(o[r]){case"items":if(t.items instanceof Array&&e.items instanceof Array)this.itemsRerender(t.items);else for(var s=Object.keys(t.items),a=0;a<s.length;a++){var l=parseInt(Object.keys(t.items)[parseInt(a.toString(),10)],10),c=Object.keys(t.items[parseInt(l.toString(),10)])[0],d=Object(t.items[parseInt(l.toString(),10)])[""+c];if("function"!=typeof d){if(this.tbarAlign||"align"===c){this.refresh(),this.trigger("created");break}var p="showAlwaysInPopup"===c&&!d,u="overflow"===c&&0!==this.popupPriCount;(p||this.items[parseInt(l.toString(),10)].showAlwaysInPopup&&u)&&--this.popupPriCount,h(this.scrollModule)&&this.destroyMode();var g=[].slice.call(z("."+aM+" ."+lM,i));this.isReact&&this.items[parseInt(l.toString(),10)].template&&this.clearTemplate(),T(g[parseInt(l.toString(),10)]),this.tbarEle.splice(l,1),this.addItems([this.items[parseInt(l.toString(),10)]],l),this.items.splice(l,1),this.items[parseInt(l.toString(),10)].template&&this.tbarEle.splice(this.items.length,1)}}break;case"width":P(i,{width:m(t.width)}),this.renderOverflowMode(),this.popObj&&n<i.offsetWidth&&this.popupRefresh(this.popObj.element,!1);break;case"height":P(this.element,{height:m(t.height)});break;case"overflowMode":this.destroyMode(),this.renderOverflowMode(),this.enableRtl&&this.add(i,"e-rtl"),this.refreshOverflow();break;case"enableRtl":t.enableRtl?this.add(i,"e-rtl"):this.remove(i,"e-rtl"),h(this.scrollModule)||(t.enableRtl?this.add(this.scrollModule.element,"e-rtl"):this.remove(this.scrollModule.element,"e-rtl")),h(this.popObj)||(t.enableRtl?this.add(this.popObj.element,"e-rtl"):this.remove(this.popObj.element,"e-rtl")),this.tbarAlign&&this.itemPositioning();break;case"scrollStep":this.scrollModule&&(this.scrollModule.scrollStep=this.scrollStep);break;case"enableCollision":this.popObj&&(this.popObj.collision={Y:this.enableCollision?"flip":"none"});break;case"cssClass":e.cssClass&&x([this.element],e.cssClass.split(" ")),t.cssClass&&I([this.element],t.cssClass.split(" "));break;case"allowKeyboard":this.unwireKeyboardEvent(),t.allowKeyboard&&this.wireKeyboardEvent()}}},e.prototype.hideItem=function(t,e){var i,n="object"==typeof t,r=t;if(n||!h(r)){var o=[].slice.call(z("."+lM,this.element));if(n)i=t;else if(this.tbarEle[parseInt(r.toString(),10)]){i=[].slice.call(z("."+lM,this.element))[parseInt(r.toString(),10)]}i&&(e?(i.classList.add(xM),i.classList.contains(hM)||(h(i.firstElementChild.getAttribute("tabindex"))||"-1"!==i.firstElementChild.getAttribute("tabindex"))&&this.updateHideEleTabIndex(i,e,n,r,o)):(i.classList.remove(xM),i.classList.contains(hM)||this.updateHideEleTabIndex(i,e,n,r,o)),this.refreshOverflow())}},sM([q([],DM)],e.prototype,"items",void 0),sM([W("auto")],e.prototype,"width",void 0),sM([W("auto")],e.prototype,"height",void 0),sM([W("")],e.prototype,"cssClass",void 0),sM([W("Scrollable")],e.prototype,"overflowMode",void 0),sM([W()],e.prototype,"scrollStep",void 0),sM([W(!0)],e.prototype,"enableCollision",void 0),sM([W(!0)],e.prototype,"enableHtmlSanitizer",void 0),sM([W(!0)],e.prototype,"allowKeyboard",void 0),sM([Z()],e.prototype,"clicked",void 0),sM([Z()],e.prototype,"created",void 0),sM([Z()],e.prototype,"destroyed",void 0),sM([Z()],e.prototype,"beforeCreate",void 0),e=sM([$],e)}(Kp),OM=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),LM=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},AM="e-acrdn-root",zM="e-accordion",kM="e-acrdn-item",jM="e-acrdn-header",PM="e-acrdn-header-content",RM="e-acrdn-panel",BM="e-acrdn-content",HM="e-toggle-icon",UM="e-content-hide",VM="e-selected",_M="e-active",FM="e-overlay",YM="e-toggle-animation",WM="e-expand-state",QM="e-accordion-container",XM=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return OM(e,t),LM([W("SlideDown")],e.prototype,"effect",void 0),LM([W(400)],e.prototype,"duration",void 0),LM([W("linear")],e.prototype,"easing",void 0),e}(Rp),qM=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return OM(e,t),LM([Q({effect:"SlideUp",duration:400,easing:"linear"},XM)],e.prototype,"collapse",void 0),LM([Q({effect:"SlideDown",duration:400,easing:"linear"},XM)],e.prototype,"expand",void 0),e}(Rp),GM=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return OM(e,t),LM([W(null)],e.prototype,"content",void 0),LM([W(null)],e.prototype,"header",void 0),LM([W(null)],e.prototype,"cssClass",void 0),LM([W(null)],e.prototype,"iconCss",void 0),LM([W(!1)],e.prototype,"expanded",void 0),LM([W(!0)],e.prototype,"visible",void 0),LM([W(!1)],e.prototype,"disabled",void 0),LM([W()],e.prototype,"id",void 0),e}(Rp),ZM=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.keyConfigs={moveUp:"uparrow",moveDown:"downarrow",enter:"enter",space:"space",home:"home",end:"end"},n}return OM(e,t),e.prototype.destroy=function(){(this.isReact||this.isAngular||this.isVue)&&this.clearTemplate();var e=this.element;if(t.prototype.destroy.call(this),this.unwireEvents(),this.isDestroy=!0,this.restoreContent(null),[].slice.call(e.children).forEach(function(t){e.removeChild(t)}),this.trgtEle){for(this.trgtEle=null;this.ctrlTem.firstElementChild;)e.appendChild(this.ctrlTem.firstElementChild);this.ctrlTem=null}e.classList.remove(AM),e.removeAttribute("style"),this.element.removeAttribute("data-ripple"),!this.isNested&&kp&&this.removeRippleEffect()},e.prototype.preRender=function(){var t=j(this.element,"."+RM);this.isNested=!1,this.templateEle=[],this.isDestroy||(this.isDestroy=!1),t&&t.firstElementChild&&t.firstElementChild.firstElementChild?t.firstElementChild.firstElementChild.classList.contains(zM)&&(t.classList.add("e-nested"),this.isNested=!0):this.element.classList.add(AM),this.enableRtl&&this.add(this.element,"e-rtl")},e.prototype.add=function(t,e){t.classList.add(e)},e.prototype.remove=function(t,e){t.classList.remove(e)},e.prototype.render=function(){this.initializeHeaderTemplate(),this.initializeItemTemplate(),this.initialize(),this.renderControl(),this.wireEvents(),this.renderComplete()},e.prototype.initialize=function(){var t=m(this.width),e=m(this.height);P(this.element,{width:t,height:e}),h(this.initExpand)&&(this.initExpand=[]),this.expandedIndices.length>0&&(this.initExpand=this.expandedIndices)},e.prototype.renderControl=function(){this.trgtEle=this.element.children.length>0?A("div",this.element):null,this.renderItems(),this.initItemExpand()},e.prototype.wireFocusEvents=function(){for(var t=0,e=[].slice.call(this.element.querySelectorAll("."+kM));t<e.length;t++){var i=e[t],n=i.querySelector("."+jM);i.childElementCount>0&&n&&(Ep.clearEvents(n),Ep.add(n,"focus",this.focusIn,this),Ep.add(n,"blur",this.focusOut,this))}},e.prototype.unwireEvents=function(){Ep.remove(this.element,"click",this.clickHandler),h(this.keyModule)||this.keyModule.destroy()},e.prototype.wireEvents=function(){Ep.add(this.element,"click",this.clickHandler,this),this.isNested||this.isDestroy||(this.removeRippleEffect=et(this.element,{selector:"."+jM})),this.isNested||(this.keyModule=new pu(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}))},e.prototype.templateParser=function(t){if(t)try{return document.querySelectorAll(t).length?gt(document.querySelector(t).innerHTML.trim()):gt(t)}catch(e){return gt(t)}},e.prototype.initializeHeaderTemplate=function(){this.headerTemplate&&(this.headerTemplateFn=this.templateParser(this.headerTemplate))},e.prototype.initializeItemTemplate=function(){this.itemTemplate&&(this.itemTemplateFn=this.templateParser(this.itemTemplate))},e.prototype.getHeaderTemplate=function(){return this.headerTemplateFn},e.prototype.getItemTemplate=function(){return this.itemTemplateFn},e.prototype.focusIn=function(t){t.target.parentElement.classList.add("e-item-focus")},e.prototype.focusOut=function(t){t.target.parentElement.classList.remove("e-item-focus")},e.prototype.ctrlTemplate=function(){this.ctrlTem=this.element.cloneNode(!0);var t,e=A("."+QM,this.element);t=e?e.children:this.element.children;var i=[];[].slice.call(t).forEach(function(t){i.push({header:t.childElementCount>0&&t.children[0]?t.children[0]:"",content:t.childElementCount>1&&t.children[1]?t.children[1]:""}),t.parentNode.removeChild(t)}),e&&this.element.removeChild(e),this.setProperties({items:i},!0)},e.prototype.toggleIconGenerate=function(){var t=this.createElement("div",{className:HM}),e=this.createElement("span",{className:"e-tgl-collapse-icon e-icons"});return t.appendChild(e),t},e.prototype.initItemExpand=function(){var t=this.initExpand.length;if(0!==t){if("Single"===this.expandMode)this.expandItem(!0,this.initExpand[t-1]);else for(var e=0;e<t;e++)this.expandItem(!0,this.initExpand[parseInt(e.toString(),10)]);this.isReact&&this.renderReactTemplates()}},e.prototype.renderItems=function(){var t,e,i=this,n=this.element;if(h(this.trgtEle)||this.ctrlTemplate(),this.dataSource.length>0)this.dataSource.forEach(function(t,r){e=i.renderInnerItem(t,r),n.appendChild(e),e.childElementCount>0&&(Ep.add(e.querySelector("."+jM),"focus",i.focusIn,i),Ep.add(e.querySelector("."+jM),"blur",i.focusOut,i))});else{var r=this.items;n&&r.length>0&&r.forEach(function(e,r){t=i.renderInnerItem(e,r),n.appendChild(t),t.childElementCount>0&&(Ep.add(t.querySelector("."+jM),"focus",i.focusIn,i),Ep.add(t.querySelector("."+jM),"blur",i.focusOut,i))})}this.isReact&&this.renderReactTemplates()},e.prototype.clickHandler=function(t){var e,i=t.target,n=this.getItems(),r={};if(j(i,"."+zM)===this.element){i.classList.add("e-target");var o=j(i,"."+kM),s=j(i,"."+jM),a=j(i,"."+RM);o&&(h(s)||h(a))&&(s=o.children[0],a=o.children[1]),s&&(e=A("."+HM,s));var l;s?l=j(s,"."+kM):a&&(l=j(a,"."+kM));var c=this.getIndexByItem(o);l&&(r.item=n[this.getIndexByItem(l)]),r.originalEvent=t;!(!h(e)&&o.childElementCount<=1)||!h(a)&&h(A("."+jM+" ."+HM,l))?this.afterContentRender(i,r,o,s,a,l):(o.appendChild(this.contentRendering(c)),this.ariaAttrUpdate(o),this.afterContentRender(i,r,o,s,a,l)),this.isReact&&this.renderReactTemplates()}},e.prototype.afterContentRender=function(t,e,i,n,r,o){var s=this,a=[];this.trigger("clicked",e);var l=r&&!h(A(".e-target",r)),c=r&&!h(A("."+zM,r))&&h(j(t,".e-acrdn-panel .e-accordion")),d=r&&h(A("."+zM,r))||!(j(t,"."+zM)===this.element);if(l=l&&(c||d),t.classList.remove("e-target"),!(t.classList.contains(RM)||t.classList.contains(BM)||l)){var p=this.element.querySelector("."+QM),u=p?p.children:this.element.children;[].slice.call(u).forEach(function(t){t.classList.contains(_M)&&a.push(t)});var g=[].slice.call(this.element.querySelectorAll("."+kM+" [e-animate]"));if(g.length>0)for(var m=0,f=g;m<f.length;m++){var v=f[m];a.push(v.parentElement)}var y=-1!==a.indexOf(o)&&"true"===r.getAttribute("e-animate"),b=!1;if(!h(i)&&!h(n)){var S=A("."+RM,i),w=j(i,"."+AM).querySelector("."+WM);if(h(S))return;b=w===i,!C(S)||y&&!o.classList.contains(VM)?(a.length>0&&"Single"===this.expandMode&&!y&&a.forEach(function(t){s.collapse(A("."+RM,t)),t.classList.remove(WM)}),this.expand(S)):this.collapse(S),h(w)||b||w.classList.remove(WM)}}},e.prototype.eleMoveFocus=function(t,e,i){var n,r=j(i,"."+kM);i===e?n=("moveUp"===t?i.lastElementChild:i).querySelector("."+jM):i.classList.contains(jM)&&(r="moveUp"===t?r.previousElementSibling:r.nextElementSibling)&&(n=A("."+jM,r)),n&&n.focus()},e.prototype.keyActionHandler=function(t){var e=t.target;if(!h(j(t.target,jM))||e.classList.contains(zM)||e.classList.contains(jM)){var i,n=this.element;switch(t.action){case"moveUp":case"moveDown":this.eleMoveFocus(t.action,n,e);break;case"space":case"enter":!h(i=e.nextElementSibling)&&i.classList.contains(RM)?"true"!==i.getAttribute("e-animate")&&e.click():e.click(),t.preventDefault();break;case"home":case"end":("home"===t.action?n.firstElementChild.children[0]:n.lastElementChild.children[0]).focus(),t.preventDefault()}}},e.prototype.headerEleGenerate=function(){var t=this.createElement("div",{className:jM,id:d("acrdn_header")});return L(t,{tabindex:"0",role:"button","aria-disabled":"false","aria-expanded":"false"}),t},e.prototype.renderInnerItem=function(t,e){var i=this.createElement("div",{className:kM,id:t.id||d("acrdn_item")});if(this.headerTemplate){var n=this.headerEleGenerate(),r=this.createElement("div",{className:PM});return n.appendChild(r),E(this.getHeaderTemplate()(t,this,"headerTemplate",this.element.id+"_headerTemplate",!1),r),i.appendChild(n),n.appendChild(this.toggleIconGenerate()),this.add(i,"e-select"),i}if(t.header&&this.angularnativeCondiCheck(t,"header")){this.enableHtmlSanitizer&&"string"==typeof t.header&&(t.header=Yu.sanitize(t.header));n=this.headerEleGenerate(),r=this.createElement("div",{className:PM});n.appendChild(r),n.appendChild(this.fetchElement(r,t.header,e,!0)),i.appendChild(n)}var o=A("."+jM,i);if(!t.expanded||h(e)||this.enablePersistence||-1===this.initExpand.indexOf(e)&&this.initExpand.push(e),t.cssClass&&I([i],t.cssClass.split(" ")),t.disabled&&I([i],FM),!1===t.visible&&I([i],"e-hide"),t.iconCss){var s=this.createElement("div",{className:"e-acrdn-header-icon"}),a=this.createElement("span",{className:t.iconCss+" e-icons"});s.appendChild(a),h(o)?((o=this.headerEleGenerate()).appendChild(s),i.appendChild(o)):o.insertBefore(s,o.childNodes[0])}if(t.content&&this.angularnativeCondiCheck(t,"content")){var l=this.toggleIconGenerate();h(o)&&(o=this.headerEleGenerate(),i.appendChild(o)),o.appendChild(l),this.add(i,"e-select")}return i},e.prototype.angularnativeCondiCheck=function(t,e){var i="content"===e?t.content:t.header;if(this.isAngular&&!h(i.elementRef)){var n=i.elementRef.nativeElement.data;if(h(n)||""===n||-1===n.indexOf("bindings="))return!0;var r=JSON.parse(i.elementRef.nativeElement.data.replace("bindings=",""));return!(!h(r)&&"false"===r["ng-reflect-ng-if"])}return!0},e.prototype.fetchElement=function(t,e,i,n){var r,o;try{if(document.querySelectorAll(e).length&&"Button"!==e){var s=document.querySelector(e);o=s.outerHTML.trim(),t.appendChild(s),s.style.display=""}else r=gt(e)}catch(i){"string"==typeof e?t.innerHTML=Yu.sanitize(e):!h(this.trgtEle)&&e instanceof HTMLElement?(t.appendChild(e),t.firstElementChild.style.display=""):r=gt(e)}var a;if(!h(r)){this.isReact&&this.renderReactTemplates();var l=void 0,c=void 0;t.classList.contains(PM)?(l=this.element.id+i+"_header",c="header"):t.classList.contains(BM)&&(l=this.element.id+i+"_content",c="content"),a=r({},this,c,l,this.isStringTemplate)}return h(a)||!(a.length>0)||h(a[0].tagName)&&1===a.length?0===t.childElementCount&&(t.innerHTML=Yu.sanitize(e)):[].slice.call(a).forEach(function(e){h(e.tagName)||(e.style.display=""),t.appendChild(e)}),h(o)||-1===this.templateEle.indexOf(e)&&this.templateEle.push(e),t},e.prototype.ariaAttrUpdate=function(t){var e=A("."+jM,t),i=A("."+RM,t);e.setAttribute("aria-controls",i.id),i.setAttribute("aria-labelledby",e.id),i.setAttribute("role","region")},e.prototype.contentRendering=function(t){var e=this.createElement("div",{className:RM+" "+UM,id:d("acrdn_panel")});L(e,{"aria-hidden":"true"});var i=this.createElement("div",{className:BM});return this.dataSource.length>0?(this.isReact&&this.renderReactTemplates(),E(this.getItemTemplate()(this.dataSource[parseInt(t.toString(),10)],this,"itemTemplate",this.element.id+"_itemTemplate",!1),i),e.appendChild(i)):(this.enableHtmlSanitizer&&(this.items[parseInt(t.toString(),10)].content,1)&&(this.items[parseInt(t.toString(),10)].content=Yu.sanitize(this.items[parseInt(t.toString(),10)].content)),e.appendChild(this.fetchElement(i,this.items[parseInt(t.toString(),10)].content,t,!1))),e},e.prototype.expand=function(t){var e=this,i=this.getItems(),n=j(t,"."+kM);if(!(h(t)||C(t)&&"true"!==t.getAttribute("e-animate")||n.classList.contains(FM))){var r=j(n,"."+AM).querySelector("."+WM),o={name:this.animation.expand.effect,duration:this.animation.expand.duration,timingFunction:this.animation.expand.easing},s=A("."+HM,n).firstElementChild,a={element:n,item:i[this.getIndexByItem(n)],index:this.getIndexByItem(n),content:n.querySelector("."+RM),isExpanded:!0};this.trigger("expanding",a,function(i){i.cancel||(s.classList.add(YM),e.expandedItemsPush(n),h(r)||r.classList.remove(WM),n.classList.add(WM),"None"===o.name?(e.expandProgress("begin",s,t,n,i),e.expandProgress("end",s,t,n,i)):e.expandAnimation(o.name,s,t,n,o,i))})}},e.prototype.expandAnimation=function(t,e,i,n,r,o){var s,a=this;this.lastActiveItemId=n.id,"SlideDown"===t?(r.begin=function(){a.expandProgress("begin",e,i,n,o),i.style.position="absolute",s=n.offsetHeight,i.style.maxHeight=i.offsetHeight+"px",n.style.maxHeight=""},r.progress=function(){n.style.minHeight=s+i.offsetHeight+"px"},r.end=function(){P(i,{position:"",maxHeight:""}),n.style.minHeight="",a.expandProgress("end",e,i,n,o)}):(r.begin=function(){a.expandProgress("begin",e,i,n,o)},r.end=function(){a.expandProgress("end",e,i,n,o)}),new zp(r).animate(i)},e.prototype.expandProgress=function(t,e,i,n,r){this.remove(i,UM),this.add(n,VM),this.add(e,"e-expand-icon"),"end"===t&&(this.add(n,_M),i.setAttribute("aria-hidden","false"),L(i.previousElementSibling,{"aria-expanded":"true"}),e.classList.remove(YM),this.trigger("expanded",r))},e.prototype.expandedItemsPush=function(t){var e=this.getIndexByItem(t);if(-1===this.expandedIndices.indexOf(e)){var i=[].slice.call(this.expandedIndices);i.push(e),this.setProperties({expandedIndices:i},!0)}},e.prototype.getIndexByItem=function(t){var e=this.getItemElements();return[].slice.call(e).indexOf(t)},e.prototype.getItemElements=function(){var t=[],e=this.element.children;return[].slice.call(e).forEach(function(e){e.classList.contains(kM)&&t.push(e)}),t},e.prototype.expandedItemsPop=function(t){var e=this.getIndexByItem(t),i=[].slice.call(this.expandedIndices);i.splice(i.indexOf(e),1),this.setProperties({expandedIndices:i},!0)},e.prototype.collapse=function(t){var e=this,i=this.getItems(),n=j(t,"."+kM);if(!h(t)&&C(t)&&!n.classList.contains(FM)){var r={name:this.animation.collapse.effect,duration:this.animation.collapse.duration,timingFunction:this.animation.collapse.easing},o=A("."+HM,n).firstElementChild,s={element:n,item:i[this.getIndexByItem(n)],index:this.getIndexByItem(n),content:n.querySelector("."+RM),isExpanded:!1};this.trigger("expanding",s,function(i){i.cancel||(e.expandedItemsPop(n),n.classList.remove(WM),o.classList.add(YM),"None"===r.name?(e.collapseProgress("begin",o,t,n,i),e.collapseProgress("end",o,t,n,i)):e.collapseAnimation(r.name,t,n,o,r,i))})}},e.prototype.collapseAnimation=function(t,e,i,n,r,o){var s,a,l,h,c=this;this.lastActiveItemId=i.id,"SlideUp"===t?(r.begin=function(){l=i.offsetHeight,i.style.minHeight=l+"px",e.style.position="absolute",s=i.offsetHeight,a=e.offsetHeight,e.style.maxHeight=a+"px",c.collapseProgress("begin",n,e,i,o)},r.progress=function(){(h=s-(a-e.offsetHeight))<l&&(i.style.minHeight=h+"px")},r.end=function(){e.style.display="none",c.collapseProgress("end",n,e,i,o),i.style.minHeight="",P(e,{position:"",maxHeight:"",display:""})}):(r.begin=function(){c.collapseProgress("begin",n,e,i,o)},r.end=function(){c.collapseProgress("end",n,e,i,o)}),new zp(r).animate(e)},e.prototype.collapseProgress=function(t,e,i,n,r){this.remove(e,"e-expand-icon"),this.remove(n,VM),"end"===t&&(this.add(i,UM),e.classList.remove(YM),this.remove(n,_M),i.setAttribute("aria-hidden","true"),L(i.previousElementSibling,{"aria-expanded":"false"}),this.trigger("expanded",r))},e.prototype.getModuleName=function(){return"accordion"},e.prototype.getItems=function(){return this.itemTemplate&&this.headerTemplate?this.dataSource:this.items},e.prototype.addItem=function(t,e){var i=this,n=this.element,r=this.getItemElements(),o=this.getItems();if(h(e)&&(e=o.length),n.childElementCount>=e){(t instanceof Array?t:[t]).forEach(function(t,s){var a=e+s;o.splice(a,0,t);var l=i.renderInnerItem(t,a);n.childElementCount===a?n.appendChild(l):n.insertBefore(l,r[parseInt(a.toString(),10)]),Ep.add(l.querySelector("."+jM),"focus",i.focusIn,i),Ep.add(l.querySelector("."+jM),"blur",i.focusOut,i),i.expandedIndices=[],i.expandedItemRefresh(n),t&&t.expanded&&i.expandItem(!0,a)})}this.isReact&&this.renderReactTemplates()},e.prototype.expandedItemRefresh=function(t){var e=this,i=this.getItemElements();[].slice.call(i).forEach(function(t){t.classList.contains(VM)&&e.expandedItemsPush(t)})},e.prototype.removeItem=function(t){this.isReact&&this.clearTemplate(["headerTemplate","itemTemplate"],t);var e=this.getItemElements()[parseInt(t.toString(),10)],i=this.getItems();h(e)||(this.restoreContent(t),T(e),i.splice(t,1),this.expandedIndices=[],this.expandedItemRefresh(this.element))},e.prototype.select=function(t){var e=this.getItemElements()[parseInt(t.toString(),10)];h(e)||h(A("."+jM,e))||e.children[0].focus()},e.prototype.hideItem=function(t,e){var i=this.getItemElements()[parseInt(t.toString(),10)];h(i)||(h(e)&&(e=!0),e?this.add(i,"e-hide"):this.remove(i,"e-hide"))},e.prototype.enableItem=function(t,e){var i=this.getItemElements()[parseInt(t.toString(),10)];if(!h(i)){var n=i.firstElementChild;e?(this.remove(i,FM),L(n,{tabindex:"0","aria-disabled":"false"}),n.focus()):(i.classList.contains(_M)&&(this.expandItem(!1,t),this.eleMoveFocus("movedown",this.element,n)),this.add(i,FM),n.setAttribute("aria-disabled","true"),n.removeAttribute("tabindex"))}},e.prototype.expandItem=function(t,e){var i=this,n=this.getItemElements();if(h(e))if("Single"===this.expandMode&&t){var r=n[n.length-1];this.itemExpand(t,r,this.getIndexByItem(r))}else{var o=A("#"+this.lastActiveItemId,this.element);[].slice.call(n).forEach(function(e){i.itemExpand(t,e,i.getIndexByItem(e)),e.classList.remove(WM)});var s=A("."+WM,this.element);s&&s.classList.remove(WM),o&&o.classList.add(WM)}else{if(h(r=n[parseInt(e.toString(),10)])||!r.classList.contains("e-select")||r.classList.contains(_M)&&t)return;"Single"===this.expandMode&&this.expandItem(!1),this.itemExpand(t,r,e)}},e.prototype.itemExpand=function(t,e,i){var n=e.children[1];e.classList.contains(FM)||(h(n)&&t?(n=this.contentRendering(i),e.appendChild(n),this.ariaAttrUpdate(e),this.expand(n)):h(n)||(t?this.expand(n):this.collapse(n)),this.isReact&&this.renderReactTemplates())},e.prototype.destroyItems=function(){this.restoreContent(null),(this.isReact||this.isAngular||this.isVue)&&this.clearTemplate(),[].slice.call(this.element.querySelectorAll("."+kM)).forEach(function(t){T(t)})},e.prototype.restoreContent=function(t){var e;e=h(t)?this.element:this.element.querySelectorAll("."+kM)[parseInt(t.toString(),10)],this.templateEle.forEach(function(t){h(e.querySelector(t))||(document.body.appendChild(e.querySelector(t)).style.display="none")})},e.prototype.updateItem=function(t,e){if(!h(t)){var i=this.getItems(),n=i[parseInt(e.toString(),10)];i.splice(e,1),this.restoreContent(e),T(t),this.addItem(n,e)}},e.prototype.setTemplate=function(t,e,i){e.innerHTML="",this.templateCompile(e,t,i),this.isReact&&this.renderReactTemplates()},e.prototype.templateCompile=function(t,e,i){var n=this.createElement("div");this.fetchElement(n,e,i,!1),0!==n.childNodes.length&&[].slice.call(n.childNodes).forEach(function(e){t.appendChild(e)})},e.prototype.getPersistData=function(){return this.addOnPersist(["expandedIndices"])},e.prototype.onPropertyChanged=function(t,e){for(var i=this.element,n=!1,r=0,o=Object.keys(t);r<o.length;r++){switch(o[r]){case"items":if(t.items instanceof Array&&e.items instanceof Array)n=!0;else for(var s=Object.keys(t.items),a=0;a<s.length;a++){var l=parseInt(Object.keys(t.items)[parseInt(a.toString(),10)],10),c=Object.keys(t.items[parseInt(l.toString(),10)])[0],d=z("."+kM,this.element)[parseInt(l.toString(),10)],p=Object(e.items[parseInt(l.toString(),10)])[""+c],u=Object(t.items[parseInt(l.toString(),10)])[""+c];if(("header"===c||"iconCss"===c||"expanded"===c||"content"===c&&""===p)&&this.updateItem(d,l),"cssClass"!==c||h(d)||(p&&x([d],p.split(" ")),u&&I([d],u.split(" "))),"visible"!==c||h(d)||(!1===Object(t.items[parseInt(l.toString(),10)])[""+c]?d.classList.add("e-hide"):d.classList.remove("e-hide")),"disabled"!==c||h(d)||this.enableItem(l,!u),"content"===c&&!h(d)&&2===d.children.length)if("function"==typeof u){var g=d.querySelector("."+BM);g.innerHTML="",this.setTemplate(u,g,l)}else d.classList.contains(VM)&&this.expandItem(!1,l),T(d.querySelector("."+RM))}break;case"dataSource":case"expandedIndices":null===this.expandedIndices&&(this.expandedIndices=[]),n=!0;break;case"headerTemplate":this.initializeHeaderTemplate(),n=!0;break;case"itemTemplate":this.initializeItemTemplate(),n=!0;break;case"enableRtl":t.enableRtl?this.add(i,"e-rtl"):this.remove(i,"e-rtl");break;case"height":P(this.element,{height:m(t.height)});break;case"width":P(this.element,{width:m(t.width)});break;case"expandMode":"Single"===t.expandMode&&this.expandedIndices.length>1&&this.expandItem(!1)}}n&&(this.initExpand=[],this.expandedIndices.length>0&&(this.initExpand=this.expandedIndices),this.destroyItems(),this.renderItems(),this.initItemExpand())},LM([q([],GM)],e.prototype,"items",void 0),LM([W([])],e.prototype,"dataSource",void 0),LM([W()],e.prototype,"itemTemplate",void 0),LM([W()],e.prototype,"headerTemplate",void 0),LM([W("100%")],e.prototype,"width",void 0),LM([W("auto")],e.prototype,"height",void 0),LM([W([])],e.prototype,"expandedIndices",void 0),LM([W("Multiple")],e.prototype,"expandMode",void 0),LM([W(!1)],e.prototype,"enableHtmlSanitizer",void 0),LM([Q({},qM)],e.prototype,"animation",void 0),LM([Z()],e.prototype,"clicked",void 0),LM([Z()],e.prototype,"expanding",void 0),LM([Z()],e.prototype,"expanded",void 0),LM([Z()],e.prototype,"created",void 0),LM([Z()],e.prototype,"destroyed",void 0),e=LM([$],e)}(Kp),$M=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),KM=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},JM=function(t){function e(e,i){return t.call(this,e,i)||this}return $M(e,t),e.prototype.preRender=function(){this.isMenu=!1,this.element.id=this.element.id||d("ej2-contextmenu"),t.prototype.preRender.call(this)},e.prototype.initialize=function(){t.prototype.initialize.call(this),L(this.element,{role:"menubar",tabindex:"0"}),this.element.style.zIndex=ui(this.element).toString()},e.prototype.open=function(e,i,n){t.prototype.openMenu.call(this,null,null,e,i,null,n)},e.prototype.close=function(){t.prototype.closeMenu.call(this)},e.prototype.onPropertyChanged=function(e,i){t.prototype.onPropertyChanged.call(this,e,i);for(var n=0,r=Object.keys(e);n<r.length;n++){switch(r[n]){case"filter":this.close(),this.filter=e.filter;break;case"target":this.unWireEvents(i.target),this.wireEvents()}}},e.prototype.getModuleName=function(){return"contextmenu"},KM([W("")],e.prototype,"target",void 0),KM([W("")],e.prototype,"filter",void 0),KM([q([],iM)],e.prototype,"items",void 0),e=KM([$],e)}(rM),tC=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),eC=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},iC="e-vertical",nC=(function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.tempItems=[],n}tC(e,t),e.prototype.getModuleName=function(){return"menu"},e.prototype.preRender=function(){if(this.isMenu=!0,this.element.id=this.element.id||d("ej2-menu"),this.template){try{document.querySelectorAll(this.template).length&&(this.template=document.querySelector(this.template).innerHTML.trim(),this.clearChanges())}catch(t){}this.updateMenuItems(this.items)}else this.updateMenuItems(this.items);t.prototype.preRender.call(this)},e.prototype.initialize=function(){t.prototype.initialize.call(this),L(this.element,{role:"menubar",tabindex:"0"}),"Vertical"===this.orientation?(this.element.classList.add(iC),this.hamburgerMode&&!this.target&&this.element.previousElementSibling.classList.add(iC),this.element.setAttribute("aria-orientation","vertical")):Np.isDevice&&!this.enableScrolling&&this.element.parentElement.classList.add("e-scrollable"),this.hamburgerMode&&(this.element.parentElement.classList.add("e-hamburger"),"Horizontal"===this.orientation&&this.element.classList.add("e-hide-menu"))},e.prototype.updateMenuItems=function(t){this.tempItems=t,this.items=[],this.tempItems.map(this.createMenuItems,this),this.setProperties({items:this.items},!0),this.tempItems=[]},e.prototype.onPropertyChanged=function(e,i){for(var n=this,r=0,o=Object.keys(e);r<o.length;r++){switch(o[r]){case"orientation":"Vertical"===e.orientation?(this.element.classList.add(iC),this.hamburgerMode&&(this.target||this.element.previousElementSibling.classList.add(iC),this.element.classList.remove("e-hide-menu")),this.element.setAttribute("aria-orientation","vertical")):(this.element.classList.remove(iC),this.hamburgerMode&&(this.target||this.element.previousElementSibling.classList.remove(iC),this.element.classList.add("e-hide-menu")),this.element.removeAttribute("aria-orientation"));break;case"items":Object.keys(i.items).length||this.updateMenuItems(e.items);break;case"hamburgerMode":this.element.previousElementSibling||t.prototype.createHeaderContainer.call(this),e.hamburgerMode?(this.element.parentElement.classList.add("e-hamburger"),[].slice.call(this.element.getElementsByClassName("e-blankicon")).forEach(function(t){t.style[n.enableRtl?"paddingRight":"paddingLeft"]=""})):(this.element.parentElement.classList.remove("e-hamburger"),"Vertical"===this.orientation&&this.setBlankIconStyle(this.element)),"Vertical"===this.orientation?(this.target||this.element.previousElementSibling.classList.add(iC),this.element.classList.remove("e-hide-menu")):(this.target?this.element.previousElementSibling.classList.add(iC):this.element.previousElementSibling.classList.remove(iC),this.element.classList[e.hamburgerMode?"add":"remove"]("e-hide-menu"));break;case"title":this.hamburgerMode&&this.element.previousElementSibling&&(e.title=this.enableHtmlSanitizer?Yu.sanitize(e.title):e.title,this.element.previousElementSibling.querySelector(".e-menu-title").innerHTML=e.title);break;case"target":this.hamburgerMode&&(this.unWireEvents(i.target),this.wireEvents(),"Horizontal"===this.orientation&&(e.target?this.element.previousElementSibling.classList.add(iC):(this.element.previousElementSibling||t.prototype.createHeaderContainer.call(this),this.element.previousElementSibling.classList.remove(iC)),this.element.classList.add("e-hide-menu")))}}t.prototype.onPropertyChanged.call(this,e,i)},e.prototype.createMenuItems=function(t){var e,i,n=this.items,r=this.getField("parentId");if(t[""+r]){for(e=this.getIndex(t[""+r].toString(),!0),i=0;i<e.length;i++)n[e[i]].items||(n[e[i]].items=[]),n=n[e[i]].items;n.push(t)}else this.items.push(t)},e.prototype.open=function(){t.prototype.openHamburgerMenu.call(this)},e.prototype.close=function(){t.prototype.closeHamburgerMenu.call(this)},eC([W("Horizontal")],e.prototype,"orientation",void 0),eC([W("")],e.prototype,"target",void 0),eC([W(null)],e.prototype,"template",void 0),eC([W(!1)],e.prototype,"enableScrolling",void 0),eC([W(!1)],e.prototype,"hamburgerMode",void 0),eC([W("Menu")],e.prototype,"title",void 0),eC([W(!1)],e.prototype,"enableHtmlSanitizer",void 0),eC([Q({itemId:"id",text:"text",parentId:"parentId",iconCss:"iconCss",url:"url",separator:"separator",children:"items"},eM)],e.prototype,"fields",void 0),e=eC([$],e)}(rM),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),rC=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},oC="e-tab-header",sC="e-content",aC="e-item",lC="e-active",hC="e-disable",cC="e-hidden",dC="e-close-icon",pC="e-close-show",uC="e-tab-text",gC="e-indicator",mC="e-tab-wrap",fC="e-text-wrap",vC="e-toolbar-items",yC="e-toolbar-item",bC="e-toolbar-popup",SC="e-progress",wC="e-vertical-tab",IC="e-horizontal-bottom",xC="e-reorder-active-item",MC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return nC(e,t),rC([W("SlideLeftIn")],e.prototype,"effect",void 0),rC([W(600)],e.prototype,"duration",void 0),rC([W("ease")],e.prototype,"easing",void 0),e}(Rp),CC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return nC(e,t),rC([Q({effect:"SlideLeftIn",duration:600,easing:"ease"},MC)],e.prototype,"previous",void 0),rC([Q({effect:"SlideRightIn",duration:600,easing:"ease"},MC)],e.prototype,"next",void 0),e}(Rp),NC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return nC(e,t),rC([W("")],e.prototype,"text",void 0),rC([W("")],e.prototype,"iconCss",void 0),rC([W("left")],e.prototype,"iconPosition",void 0),e}(Rp),EC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return nC(e,t),rC([Q({},NC)],e.prototype,"header",void 0),rC([W(null)],e.prototype,"headerTemplate",void 0),rC([W("")],e.prototype,"content",void 0),rC([W("")],e.prototype,"cssClass",void 0),rC([W(!1)],e.prototype,"disabled",void 0),rC([W(!0)],e.prototype,"visible",void 0),rC([W()],e.prototype,"id",void 0),rC([W(-1)],e.prototype,"tabIndex",void 0),e}(Rp),DC=(function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.show={},n.hide={},n.maxHeight=0,n.title="Close",n.isInteracted=!1,n.lastIndex=0,n.isAdd=!1,n.isIconAlone=!1,n.draggableItems=[],n.resizeContext=n.refreshActiveTabBorder.bind(n),n.keyConfigs={tab:"tab",home:"home",end:"end",enter:"enter",space:"space",delete:"delete",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow"},n}nC(e,t),e.prototype.destroy=function(){if((this.isReact||this.isAngular)&&this.clearTemplate(),h(this.tbObj)||(this.tbObj.destroy(),this.tbObj=null),this.unWireEvents(),this.element.removeAttribute("aria-disabled"),this.expTemplateContent(),this.isTemplate){var e=A(".e-tab > ."+sC,this.element);this.element.classList.remove("e-template"),h(e)||(e.innerHTML=this.cnt)}else for(;this.element.firstElementChild;)O(this.element.firstElementChild);if(this.btnCls&&(this.btnCls=null),this.hdrEle=null,this.cntEle=null,this.tbItems=null,this.tbItem=null,this.tbPop=null,this.prevItem=null,this.popEle=null,this.bdrLine=null,this.content=null,this.dragItem=null,this.cloneElement=null,this.draggingItems=[],this.draggableItems&&this.draggableItems.length>0){for(var i=0;i<this.draggableItems.length;i++)this.draggableItems[i].destroy(),this.draggableItems[i]=null;this.draggableItems=[]}t.prototype.destroy.call(this),this.trigger("destroyed")},e.prototype.refresh=function(){this.isReact&&this.clearTemplate(),t.prototype.refresh.call(this),this.isReact&&this.renderReactTemplates()},e.prototype.preRender=function(){var t=j(this.element,"."+sC);this.prevIndex=0,this.isNested=!1,this.isPopup=!1,this.initRender=!0,this.isSwipeed=!1,this.itemIndexArray=[],this.templateEle=[],this.allowDragAndDrop&&(this.dragArea=h(this.dragArea)?"#"+this.element.id+" ."+oC:this.dragArea),h(t)||(t.parentElement.classList.add("e-nested"),this.isNested=!0);var e=Np.info.name,i="msie"===e?"e-ie":"edge"===e?"e-edge":"safari"===e?"e-safari":"";P(this.element,{width:m(this.width),height:m(this.height)}),this.setCssClass(this.element,this.cssClass,!0),L(this.element,{"aria-disabled":"false"}),this.setCssClass(this.element,i,!0),this.updatePopAnimationConfig()},e.prototype.render=function(){this.btnCls=this.createElement("span",{className:"e-icons "+dC,attrs:{title:this.title}}),this.tabId=this.element.id.length>0?"-"+this.element.id:ut(),this.renderContainer(),this.wireEvents(),this.initRender=!1},e.prototype.renderContainer=function(){var t=this.element;if(this.items.forEach(function(t,e){h(t.id)&&!h(t.setProperties)&&t.setProperties({id:"tabitem_"+e.toString()},!0)}),this.items.length>0&&0===t.children.length)t.appendChild(this.createElement("div",{className:sC})),this.setOrientation(this.headerPlacement,this.createElement("div",{className:oC})),this.isTemplate=!1;else if(this.element.children.length>0){this.isTemplate=!0,t.classList.add("e-template");var e=t.querySelector("."+oC);e&&"Bottom"===this.headerPlacement&&this.setOrientation(this.headerPlacement,e)}if(!h(A("."+oC,this.element))&&!h(A("."+sC,this.element))){if(this.renderHeader(),this.tbItems=A("."+oC+" ."+vC,this.element),h(this.tbItems)||et(this.tbItems,{selector:".e-tab-wrap"}),this.renderContent(),z("."+yC,this.element).length>0){this.tbItems=A("."+oC+" ."+vC,this.element),this.bdrLine=this.createElement("div",{className:gC+" "+cC+" e-ignore"});var i=A("."+this.scrCntClass,this.tbItems);h(i)?this.tbItems.insertBefore(this.bdrLine,this.tbItems.firstChild):i.insertBefore(this.bdrLine,i.firstChild),this.setContentHeight(!0),this.select(this.selectedItem)}if(this.tbItem=z("."+yC,this.hdrEle),!h(this.tbItem))for(var n=0;n<this.items.length;n++)if(this.tbItem[n]){var r=this.items[n].id;this.tbItem[n].setAttribute("data-id",r)}this.setRTL(this.enableRtl)}},e.prototype.renderHeader=function(){var t=this,e=this.headerPlacement,i=[];if(this.hdrEle=this.getTabHeader(),this.addVerticalClass(),this.isTemplate){this.element.children.length>1&&this.element.children[1].classList.contains(oC)&&this.setProperties({headerPlacement:"Bottom"},!0);for(var n=this.hdrEle.children.length,r=[],o=0;o<n;o++)r.push(this.hdrEle.children.item(o).innerHTML);if(n>0){for(;this.hdrEle.firstElementChild;)T(this.hdrEle.firstElementChild);var s=this.createElement("div",{className:"e-items"});this.hdrEle.appendChild(s),r.forEach(function(e,i){t.lastIndex=i;var n={className:aC,id:aC+t.tabId+"_"+i},r=t.createElement("span",{className:uC,innerHTML:e,attrs:{role:"presentation"}}).outerHTML,o=t.createElement("div",{className:fC,innerHTML:r+t.btnCls.outerHTML}).outerHTML,a=t.createElement("div",{className:mC,innerHTML:o,attrs:{role:"tab",tabIndex:"-1","aria-selected":"false","aria-controls":sC+t.tabId+"_"+i,"aria-disabled":"false"}});s.appendChild(t.createElement("div",n)),z(".e-item",s)[i].appendChild(a)})}}else i=this.parseObject(this.items,0);this.tbObj=new TM({width:"Left"===e||"Right"===e?"auto":"100%",height:"Left"===e||"Right"===e?"100%":"auto",overflowMode:this.overflowMode,items:0!==i.length?i:[],clicked:this.clickHandler.bind(this),scrollStep:this.scrollStep,enableHtmlSanitizer:this.enableHtmlSanitizer,cssClass:this.cssClass}),this.tbObj.isStringTemplate=!0,this.tbObj.createElement=this.createElement,this.tbObj.appendTo(this.hdrEle),L(this.hdrEle,{role:"tablist"}),h(this.element.getAttribute("aria-label"))?h(this.element.getAttribute("aria-labelledby"))||(this.hdrEle.setAttribute("aria-labelledby",this.element.getAttribute("aria-labelledby")),this.element.removeAttribute("aria-labelledby")):(this.hdrEle.setAttribute("aria-label",this.element.getAttribute("aria-label")),this.element.removeAttribute("aria-label")),this.setCloseButton(this.showCloseButton);var a=this.tbObj.element.querySelector("."+vC);h(a)||(h(a.id)||""===a.id)&&(a.id=this.element.id+"_tab_header_items")},e.prototype.renderContent=function(){this.cntEle=A("."+sC,this.element);var t=z("."+yC,this.element);if(this.isTemplate){this.cnt=this.cntEle.children.length>0?this.cntEle.innerHTML:"";for(var e=this.cntEle.children,i=0;i<t.length;i++)e.length-1>=i&&(I([e.item(i)],aC),L(e.item(i),{role:"tabpanel","aria-labelledby":aC+this.tabId+"_"+i}),e.item(i).id=sC+this.tabId+"_"+i)}},e.prototype.reRenderItems=function(){this.renderContainer(),h(this.cntEle)||(this.touchModule=new yu(this.cntEle,{swipe:this.swipeHandler.bind(this)}))},e.prototype.parseObject=function(t,e){var i=this,n=z(".e-tab-header ."+yC,this.element),r=this.lastIndex;if(!this.isReplace&&n.length>0){var o=[];n.forEach(function(t){o.push(i.getIndexFromEle(t.id))}),r=Math.max.apply(Math,o)}var s,a=[],l=[];return t.forEach(function(t,o){var c=h(t.header)||h(t.header.iconPosition)?"":t.header.iconPosition,d=h(t.header)||h(t.header.iconCss)?"":t.header.iconCss;if(h(t.headerTemplate)&&(h(t.header)||h(t.header.text)||0===t.header.text.length&&""===d))l.push(o);else{var p=t.headerTemplate||t.header.text;"string"==typeof p&&i.enableHtmlSanitizer&&(p=Yu.sanitize(p));var u;i.isReplace&&!h(i.tbId)&&""!==i.tbId?(u=parseInt(i.tbId.substring(i.tbId.lastIndexOf("_")+1),10),i.tbId=""):u=e+o,i.lastIndex=0===n.length?o:i.isReplace?u:r+1+o;var g=t.disabled?" e-disable e-overlay":"",m=!1===t.visible?" "+cC:"";s=i.createElement("div",{className:uC,attrs:{role:"presentation"}});var f=p instanceof Object?p.outerHTML:p,v=!h(f)&&""!==f;h(p.tagName)?i.headerTextCompile(s,p,o):s.appendChild(p);var y=i.createElement("span",{className:"e-icons e-tab-icon e-icon-"+c+" "+d}),b=i.createElement("div",{className:fC});b.appendChild(s),""!==p&&void 0!==p&&""!==d?("left"===c||"top"===c?b.insertBefore(y,b.firstElementChild):b.appendChild(y),s,i.isIconAlone=!1):(""===d?s:y)===y&&(T(s),b.appendChild(y),i.isIconAlone=!0);var S=h(t.tabIndex)?"-1":t.tabIndex.toString(),w=t.disabled?{}:{tabIndex:S,"data-tabindex":S,role:"tab","aria-selected":"false","aria-disabled":"false"};b.appendChild(i.btnCls.cloneNode(!0));var I=i.createElement("div",{className:mC,attrs:w});I.appendChild(b),i.itemIndexArray===[]?i.itemIndexArray.push(aC+i.tabId+"_"+i.lastIndex):i.itemIndexArray.splice(e+o,0,aC+i.tabId+"_"+i.lastIndex);var x={htmlAttributes:{id:aC+i.tabId+"_"+i.lastIndex},template:I};x.cssClass=(void 0!==t.cssClass?t.cssClass:" ")+" "+g+" "+m+" "+(""!==d?"e-i"+c:"")+" "+(v?"":"e-icon"),"top"!==c&&"bottom"!==c||i.element.classList.add("e-vertical-icon"),a.push(x),o++}}),this.isAdd||l.forEach(function(t){i.items.splice(t,1)}),this.isIconAlone?this.element.classList.add("e-icon-tab"):this.element.classList.remove("e-icon-tab"),a},e.prototype.removeActiveClass=function(){var t=this.getTabHeader();if(t){var e=z("."+yC+"."+lC,t);[].slice.call(e).forEach(function(t){return t.classList.remove(lC)}),[].slice.call(e).forEach(function(t){return t.firstElementChild.setAttribute("aria-selected","false")})}},e.prototype.checkPopupOverflow=function(t){this.tbPop=A(".e-toolbar-pop",this.element);var e=A(".e-hor-nav",this.element),i=A("."+vC,this.element),n=i.lastChild,r=!1;return!this.isVertical()&&(this.enableRtl&&e.offsetLeft+e.offsetWidth>i.offsetLeft||!this.enableRtl&&e.offsetLeft<i.offsetWidth)?r=!0:this.isVertical()&&e.offsetTop<n.offsetTop+n.offsetHeight&&(r=!0),r&&(t.classList.add(bC),this.tbPop.insertBefore(t,z("."+bC,this.tbPop)[0])),!0},e.prototype.popupHandler=function(t){var e=t.querySelector(".e-ripple-element");h(e)||(e.outerHTML="",t.querySelector("."+mC).classList.remove("e-ripple")),this.tbItem=z("."+vC+" ."+yC,this.hdrEle);var i=this.tbItem[this.tbItem.length-1];if(0!==this.tbItem.length){if(t.classList.remove(bC),t.removeAttribute("style"),this.tbItems.appendChild(t),this.actEleId=t.id,this.checkPopupOverflow(i)){var n=this.tbItems.lastChild.previousElementSibling;this.checkPopupOverflow(n)}this.isPopup=!0}return z("."+yC,this.tbItems).length-1},e.prototype.setCloseButton=function(t){var e=A("."+oC,this.element);!0===t?e.classList.add(pC):e.classList.remove(pC),this.tbObj.refreshOverflow(),this.refreshActiveTabBorder()},e.prototype.prevCtnAnimation=function(t,e){this.enableRtl||this.element.classList.contains("e-rtl");return this.isPopup||t<=e?"SlideLeftIn"===this.animation.previous.effect?{name:"SlideLeftOut",duration:this.animation.previous.duration,timingFunction:this.animation.previous.easing}:null:"SlideRightIn"===this.animation.next.effect?{name:"SlideRightOut",duration:this.animation.next.duration,timingFunction:this.animation.next.easing}:null},e.prototype.triggerPrevAnimation=function(t,e){var i=this,n=this.prevCtnAnimation(e,this.selectedItem);h(n)?t.classList.remove(lC):(n.begin=function(){P(t,{position:"absolute"}),t.classList.add(SC),t.classList.add("e-view")},n.end=function(){t.style.display="none",t.classList.remove(lC),t.classList.remove(SC),t.classList.remove("e-view"),P(t,{display:"",position:""}),0!==t.childNodes.length||i.isTemplate||T(t)},new zp(n).animate(t))},e.prototype.triggerAnimation=function(t,e){var i,n=this,r=this.prevIndex;[].slice.call(this.element.querySelector("."+sC).children).forEach(function(t){t.id===n.prevActiveEle&&(i=t)});var o=this.tbItem[r],s=this.getTrgContent(this.cntEle,this.extIndex(t));if(h(i)&&!h(o)){var a=this.extIndex(o.id);i=this.getTrgContent(this.cntEle,a)}h(s)||(this.prevActiveEle=s.id);var l=h(this.animation)||this.animation.next==={}||this.animation.previous==={}||h(this.animation.next.effect)||h(this.animation.previous.effect)||"None"==this.animation.previous.effect||"None"==this.animation.next.effect;if(this.initRender||!1===e||this.animation==={}||l)i&&i!==s&&i.classList.remove(lC);else{var c,d=A("."+sC,this.element);if(this.prevIndex>this.selectedItem&&!this.isPopup){var p=this.animation.previous.effect;c={name:"None"===p?"":"SlideLeftIn"!==p?p:"SlideLeftIn",duration:this.animation.previous.duration,timingFunction:this.animation.previous.easing}}else if(this.isPopup||this.prevIndex<this.selectedItem||this.prevIndex===this.selectedItem){var u=this.animation.next.effect;c={name:"None"===u?"":"SlideRightIn"!==u?u:"SlideRightIn",duration:this.animation.next.duration,timingFunction:this.animation.next.easing}}c.progress=function(){d.classList.add(SC),n.setActiveBorder()},c.end=function(){d.classList.remove(SC),s.classList.add(lC)},this.initRender||h(i)||this.triggerPrevAnimation(i,r),this.isPopup=!1,""===c.name?s.classList.add(lC):new zp(c).animate(s)}},e.prototype.keyPressed=function(t){var e=j(t,"."+oC+" ."+yC),i=this.getEleIndex(e);!h(this.popEle)&&t.classList.contains("e-hor-nav")?this.popEle.classList.contains("e-popup-open")?this.popObj.hide(this.hide):this.popObj.show(this.show):t.classList.contains("e-scroll-nav")?t.click():h(e)||!1!==e.classList.contains(lC)||(this.selectTab(i,null,!0),h(this.popEle)||this.popObj.hide(this.hide))},e.prototype.getTabHeader=function(){if(!h(this.element)){var t=[].slice.call(this.element.children).filter(function(t){return t.classList.contains(oC)});if(t.length>0)return t[0];var e=[].slice.call(this.element.children).filter(function(t){return!t.classList.contains("blazor-template")})[0];if(e)return[].slice.call(e.children).filter(function(t){return t.classList.contains(oC)})[0]}},e.prototype.getEleIndex=function(t){return Array.prototype.indexOf.call(z("."+yC,this.getTabHeader()),t)},e.prototype.extIndex=function(t){return t.replace(aC+this.tabId+"_","")},e.prototype.expTemplateContent=function(){var t=this;this.templateEle.forEach(function(e){h(t.element.querySelector(e))||(document.body.appendChild(t.element.querySelector(e)).style.display="none")})},e.prototype.templateCompile=function(t,e,i){var n=this.createElement("div");this.compileElement(n,e,"content",i),0!==n.childNodes.length&&t.appendChild(n),this.isReact&&this.renderReactTemplates()},e.prototype.compileElement=function(t,e,i,n){var r;"string"==typeof e?(e=e.trim(),this.isVue?r=gt(Yu.sanitize(e)):t.innerHTML=Yu.sanitize(e)):r=gt(e);var o;h(r)||(o=r({},this,i)),!h(r)&&o.length>0&&[].slice.call(o).forEach(function(e){t.appendChild(e)})},e.prototype.headerTextCompile=function(t,e,i){this.compileElement(t,e,"headerTemplate",i)},e.prototype.getContent=function(t,e,i,n){var r;if("string"==typeof(e=h(e)?"":e)||h(e.innerHTML))if("string"==typeof e&&this.enableHtmlSanitizer&&(e=Yu.sanitize(e)),"."===e[0]||"#"===e[0])if(document.querySelectorAll(e).length){var o=document.querySelector(e);r=o.outerHTML.trim(),"clone"===i?t.appendChild(o.cloneNode(!0)):(t.appendChild(o),o.style.display="")}else this.templateCompile(t,e,n);else this.templateCompile(t,e,n);else t.appendChild(e);h(r)||-1===this.templateEle.indexOf(e.toString())&&this.templateEle.push(e.toString())},e.prototype.getTrgContent=function(t,e){return this.element.classList.contains("e-nested")?A(".e-nested> .e-content > #"+sC+this.tabId+"_"+e,this.element):this.findEle(t.children,sC+this.tabId+"_"+e)},e.prototype.findEle=function(t,e){for(var i,n=0;n<t.length;n++)if(t[n].id===e){i=t[n];break}return i},e.prototype.isVertical=function(){var t="Left"===this.headerPlacement||"Right"===this.headerPlacement;return this.scrCntClass=t?"e-vscroll-content":"e-hscroll-content",t},e.prototype.addVerticalClass=function(){if(this.isVertical()){var t="Left"===this.headerPlacement?"e-vertical-left":"e-vertical-right";I([this.hdrEle],["e-vertical",t]),this.element.classList.contains("e-nested")?I([this.hdrEle],[wC,t]):I([this.element],[wC,t])}"Bottom"===this.headerPlacement&&I([this.hdrEle],[IC])},e.prototype.updatePopAnimationConfig=function(){this.show={name:this.isVertical()?"FadeIn":"SlideDown",duration:100},this.hide={name:this.isVertical()?"FadeOut":"SlideUp",duration:100}},e.prototype.changeOrientation=function(t){this.setOrientation(t,this.hdrEle);var e=this.hdrEle.querySelector("."+lC),i=!!this.hdrEle.classList.contains("e-vertical");x([this.element],[wC]),x([this.hdrEle],["e-vertical","e-vertical-left","e-vertical-right"]),i!==this.isVertical()&&(this.changeToolbarOrientation(),!h(e)&&e.classList.contains(bC)&&this.popupHandler(e)),this.addVerticalClass(),this.setActiveBorder(),this.focusItem()},e.prototype.focusItem=function(){var t=A(" #e-item"+this.tabId+"_"+this.selectedItem,this.hdrEle);h(t)||t.firstElementChild.focus()},e.prototype.changeToolbarOrientation=function(){this.tbObj.setProperties({height:this.isVertical()?"100%":"auto",width:this.isVertical()?"auto":"100%"},!0),this.tbObj.changeOrientation(),this.updatePopAnimationConfig()},e.prototype.setOrientation=function(t,e){var i=Array.prototype.indexOf.call(this.element.children,e),n=Array.prototype.indexOf.call(this.element.children,this.element.querySelector("."+sC));"Bottom"===t&&n>i?this.element.appendChild(e):(x([e],[IC]),this.element.insertBefore(e,A("."+sC,this.element)))},e.prototype.setCssClass=function(t,e,i){if(""!==e)for(var n=e.split(" "),r=0;r<n.length;r++)i?t.classList.add(n[r]):t.classList.remove(n[r])},e.prototype.setContentHeight=function(t){if(this.element.classList.contains("e-fill-mode")&&x([this.element],["e-fill-mode"]),!h(this.cntEle)){var e=this.getTabHeader();if("None"===this.heightAdjustMode){if("auto"===this.height)return;this.isVertical()||P(this.cntEle,{height:this.element.clientHeight-e.offsetHeight+"px"})}else if("Fill"===this.heightAdjustMode)I([this.element],["e-fill-mode"]),P(this.element,{height:"100%"}),this.cntEle.style.height="calc(100% - "+this.hdrEle.offsetHeight+"px)";else if("Auto"===this.heightAdjustMode){if(!0===this.isTemplate)for(var i=z(".e-content > .e-item",this.element),n=0;n<i.length;n++)i[n].setAttribute("style","display:block; visibility: visible"),this.maxHeight=Math.max(this.maxHeight,this.getHeight(i[n])),i[n].style.removeProperty("display"),i[n].style.removeProperty("visibility");else{this.cntEle=A("."+sC,this.element),!0===t&&this.cntEle.appendChild(this.createElement("div",{id:sC+this.tabId+"_0",className:"e-item "+lC,attrs:{role:"tabpanel","aria-labelledby":aC+this.tabId+"_0"}}));var r=this.cntEle.children.item(0);for(n=0;n<this.items.length;n++)for(this.getContent(r,this.items[n].content,"clone",n),this.maxHeight=Math.max(this.maxHeight,this.getHeight(r));r.firstChild;)r.removeChild(r.firstChild);this.isReact&&this.clearTemplate(["content"]),this.templateEle=[],this.getContent(r,this.items[0].content,"render",0),this.prevIndex!==this.selectedItem&&r.classList.remove(lC)}P(this.cntEle,{height:this.maxHeight+"px"})}else P(this.cntEle,{height:"auto"})}},e.prototype.getHeight=function(t){var e=window.getComputedStyle(t);return t.offsetHeight+parseFloat(e.getPropertyValue("padding-top"))+parseFloat(e.getPropertyValue("padding-bottom"))+parseFloat(e.getPropertyValue("margin-top"))+parseFloat(e.getPropertyValue("margin-bottom"))},e.prototype.setActiveBorder=function(){var t=this.getTabHeader(),e=A("."+yC+"."+lC,t);if(!h(e)){this.reorderActiveTab?t&&t.classList.remove(xC):(e.classList.contains(bC)&&!this.bdrLine.classList.contains(cC)&&this.bdrLine.classList.add(cC),t&&!t.classList.contains(xC)&&t.classList.add(xC));var i=j(e,".e-tab");if(this.element===i){this.tbItems=A("."+vC,t);var n=A("."+gC,t),r=A("."+vC+" ."+this.scrCntClass,t);if(this.isVertical()){P(n,{left:"",right:""});P(n,0!==(h(r)?this.tbItems.offsetHeight:r.offsetHeight)?{top:e.offsetTop+"px",height:e.offsetHeight+"px"}:{top:0,height:0})}else{if("MultiRow"===this.overflowMode){P(n,{top:("Bottom"===this.headerPlacement?e.offsetTop:e.offsetHeight+e.offsetTop)+"px",height:""})}else P(n,{top:"",height:""});var o=h(r)?this.tbItems.offsetWidth:r.offsetWidth;P(n,0!==o?{left:e.offsetLeft+"px",right:o-(e.offsetLeft+e.offsetWidth)+"px"}:{left:"auto",right:"auto"})}h(this.bdrLine)||e.classList.contains(bC)||this.bdrLine.classList.remove(cC)}}},e.prototype.setActive=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1),this.tbItem=z("."+yC,this.getTabHeader());var n=this.tbItem[t];if(!(t<0||isNaN(t)||0===this.tbItem.length))if(t>=0&&!e&&(this.allowServerDataBinding=!1,this.setProperties({selectedItem:t},!0),this.allowServerDataBinding=!0,this.initRender||this.serverDataBind()),n.classList.contains(lC))this.setActiveBorder();else{this.isTemplate||L(n.firstElementChild,{"aria-controls":sC+this.tabId+"_"+t});var r=n.id;this.removeActiveClass(),n.classList.add(lC),n.firstElementChild.setAttribute("aria-selected","true");var o=Number(this.extIndex(r));if(h(this.prevActiveEle)&&(this.prevActiveEle=sC+this.tabId+"_"+o),this.isTemplate){if(A("."+sC,this.element).children.length>0){var s=this.findEle(A("."+sC,this.element).children,sC+this.tabId+"_"+o);h(s)||s.classList.add(lC),this.triggerAnimation(r,this.enableAnimation)}}else{this.cntEle=A(".e-tab > ."+sC,this.element);var a=this.getTrgContent(this.cntEle,this.extIndex(r));if(h(a)){this.cntEle.appendChild(this.createElement("div",{id:sC+this.tabId+"_"+this.extIndex(r),className:"e-item "+lC,attrs:{role:"tabpanel","aria-labelledby":aC+this.tabId+"_"+this.extIndex(r)}}));var l=this.getTrgContent(this.cntEle,this.extIndex(r)),c=Array.prototype.indexOf.call(this.itemIndexArray,r);this.getContent(l,this.items[c].content,"render",c)}else a.classList.add(lC);this.triggerAnimation(r,this.enableAnimation)}if(this.setActiveBorder(),this.refreshItemVisibility(n),!this.initRender&&!e){n.firstElementChild.focus();var d={previousItem:this.prevItem,previousIndex:this.prevIndex,selectedItem:n,selectedIndex:t,selectedContent:A("#"+sC+this.tabId+"_"+this.selectingID,this.content),isSwiped:this.isSwipeed,isInteracted:i};this.trigger("selected",d)}}},e.prototype.setItems=function(t){this.isReplace=!0,this.tbItems=A("."+vC,this.getTabHeader()),this.tbObj.items=this.parseObject(t,0),this.tbObj.dataBind(),this.isReplace=!1},e.prototype.setRTL=function(t){this.tbObj.enableRtl=t,this.tbObj.dataBind(),this.setCssClass(this.element,"e-rtl",t),this.refreshActiveBorder()},e.prototype.refreshActiveBorder=function(){h(this.bdrLine)||this.bdrLine.classList.add(cC),this.setActiveBorder()},e.prototype.showPopup=function(t){var e=A(".e-popup.e-toolbar-pop",this.hdrEle);if(e.classList.contains("e-popup-close")){var i=e&&e.ej2_instances[0];i.position.X="Left"===this.headerPlacement?"left":"right",i.dataBind(),i.show(t)}},e.prototype.bindDraggable=function(){var t=this;if(this.allowDragAndDrop){var e=this.element.querySelector("."+oC);if(e){e.querySelectorAll("."+yC).forEach(function(e){t.initializeDrag(e)})}}},e.prototype.wireEvents=function(){this.bindDraggable(),window.addEventListener("resize",this.resizeContext),Ep.add(this.element,"mouseover",this.hoverHandler,this),Ep.add(this.element,"keydown",this.spaceKeyDown,this),h(this.cntEle)||(this.touchModule=new yu(this.cntEle,{swipe:this.swipeHandler.bind(this)})),this.keyModule=new pu(this.element,{keyAction:this.keyHandler.bind(this),keyConfigs:this.keyConfigs}),this.tabKeyModule=new pu(this.element,{keyAction:this.keyHandler.bind(this),keyConfigs:{openPopup:"shift+f10",tab:"tab",shiftTab:"shift+tab"},eventName:"keydown"})},e.prototype.unWireEvents=function(){h(this.keyModule)||this.keyModule.destroy(),h(this.tabKeyModule)||this.tabKeyModule.destroy(),h(this.cntEle)||h(this.touchModule)||(this.touchModule.destroy(),this.touchModule=null),window.removeEventListener("resize",this.resizeContext),Ep.remove(this.element,"mouseover",this.hoverHandler),Ep.remove(this.element,"keydown",this.spaceKeyDown),this.element.classList.remove("e-rtl"),this.element.classList.remove("e-focused")},e.prototype.clickHandler=function(t){this.element.classList.remove("e-focused");var e=t.originalEvent.target,i=j(e,"."+yC),n=this.getEleIndex(i);e.classList.contains(dC)?this.removeTab(n):this.isVertical()&&j(e,".e-hor-nav")?this.showPopup(this.show):(this.isPopup=!1,h(i)||n===this.selectedItem||this.selectTab(n,t.originalEvent,!0))},e.prototype.swipeHandler=function(t){if(!(t.velocity<3&&h(t.originalEvent.changedTouches))){this.isNested&&this.element.setAttribute("data-swipe","true");var e=this.element.querySelector('[data-swipe="true"]');if(e)e.removeAttribute("data-swipe");else{if(this.isSwipeed=!0,"Right"===t.swipeDirection&&0!==this.selectedItem){for(var i=this.selectedItem-1;i>=0;i--)if(!this.tbItem[i].classList.contains(cC)){this.selectTab(i,null,!0);break}}else if("Left"===t.swipeDirection&&this.selectedItem!==z("."+yC,this.element).length-1)for(var n=this.selectedItem+1;n<this.tbItem.length;n++)if(!this.tbItem[n].classList.contains(cC)){this.selectTab(n,null,!0);break}this.isSwipeed=!1}}},e.prototype.spaceKeyDown=function(t){if(32===t.keyCode&&32===t.which||35===t.keyCode&&35===t.which){h(j(t.target,"."+oC))||t.preventDefault()}},e.prototype.keyHandler=function(t){if(!this.element.classList.contains(hC)){this.element.classList.add("e-focused");var e=t.target,i=this.getTabHeader(),n=A("."+lC,i);this.popEle=A(".e-toolbar-pop",i),h(this.popEle)||(this.popObj=this.popEle.ej2_instances[0]);var r=j(document.activeElement,"."+yC),o=j(e,"."+yC);switch(t.action){case"space":case"enter":if(e.parentElement.classList.contains(hC))return;if("enter"===t.action&&e.classList.contains("e-hor-nav")){this.showPopup(this.show);break}this.keyPressed(e);break;case"tab":case"shiftTab":e.classList.contains(mC)&&!1===j(e,"."+yC).classList.contains(lC)&&e.setAttribute("tabindex",e.getAttribute("data-tabindex")),this.popObj&&C(this.popObj.element)&&this.popObj.hide(this.hide),h(n)||"-1"!==n.children.item(0).getAttribute("tabindex")||n.children.item(0).setAttribute("tabindex","0");break;case"moveLeft":case"moveRight":h(r)||this.refreshItemVisibility(r);break;case"openPopup":t.preventDefault(),!h(this.popEle)&&this.popEle.classList.contains("e-popup-close")&&this.popObj.show(this.show);break;case"delete":if(!0===this.showCloseButton&&!h(o)){var s=o.nextSibling;!h(s)&&s.classList.contains(yC)&&s.firstElementChild.focus(),this.removeTab(this.getEleIndex(o))}this.setActiveBorder()}}},e.prototype.refreshItemVisibility=function(t){var e=A("."+this.scrCntClass,this.tbItems);if(!this.isVertical()&&!h(e)){var i=A(".e-hscroll-bar",this.tbItems);i.removeAttribute("tabindex");var n=i.scrollLeft,r=n+i.offsetWidth,o=t.offsetLeft,s=t.offsetWidth,a=t.offsetLeft+t.offsetWidth;if(n<o&&r<a){var l=r-o;i.scrollLeft=n+(s-l)}else if(n>o&&r>a){l=a-n;i.scrollLeft=n-(s-l)}}},e.prototype.getIndexFromEle=function(t){return parseInt(t.substring(t.lastIndexOf("_")+1),10)},e.prototype.hoverHandler=function(t){var e=t.target;!h(e.classList)&&e.classList.contains(dC)&&e.setAttribute("title",new uu("tab",{closeButtonTitle:this.title},this.locale).getConstant("closeButtonTitle"))},e.prototype.evalOnPropertyChangeItems=function(t,e){if(t.items instanceof Array&&e.items instanceof Array)if(this.lastIndex=0,h(this.tbObj))this.reRenderItems();else{(this.isReact||this.isAngular)&&this.clearTemplate(),this.setItems(t.items),this.templateEle.length>0&&this.expTemplateContent(),this.templateEle=[];for(var i=A(".e-tab > ."+sC,this.element);i.firstElementChild;)T(i.firstElementChild);this.select(this.selectedItem),this.draggableItems=[],this.bindDraggable()}else for(var n=Object.keys(t.items),r=0;r<n.length;r++)for(var o=parseInt(Object.keys(t.items)[r],10),s=Object.keys(t.items[o]),a=0;a<s.length;a++){var l=Object(e.items[o])[s[a]],c=Object(t.items[o])[s[a]],d=this.element.querySelectorAll("."+yC)[o],p=void 0;p=d&&!h(d.id)&&""!==d.id?this.getIndexFromEle(d.id):o;var u=A("."+vC+" #"+aC+this.tabId+"_"+p,this.element),g=A(".e-content #"+sC+this.tabId+"_"+p,this.element);if("header"===s[a]||"headerTemplate"===s[a]){var m=h(this.items[o].header)||h(this.items[o].header.iconCss)?"":this.items[o].header.iconCss;if(""===(this.items[o].headerTemplate||this.items[o].header.text)&&""===m)this.removeTab(o);else{this.tbId=d.id;var f=[];f.push(this.items[o]),this.items.splice(o,1),this.itemIndexArray.splice(o,1),this.tbObj.items.splice(o,1);var v=u.classList.contains(cC);T(u),this.isReplace=!0,this.addTab(f,o),v&&this.hideTab(o),this.isReplace=!1}}if("content"===s[a]&&!h(g)){if(("string"==typeof c||h(c.innerHTML))&&("."===c[0]||"#"===c[0])&&c.length){var y=document.querySelector(c);g.appendChild(y),y.style.display=""}else""===c&&"#"===l[0]?(document.body.appendChild(this.element.querySelector(l)).style.display="none",g.innerHTML=c):this.isReact?(g.innerHTML="",this.templateCompile(g,c,o)):"function"!=typeof c&&(g.innerHTML=c)}"cssClass"===s[a]&&(h(u)||(u.classList.remove(l),u.classList.add(c)),h(g)||(g.classList.remove(l),g.classList.add(c))),"disabled"===s[a]&&this.enableTab(o,!0!==c),"visible"===s[a]&&this.hideTab(o,!0!==c)}},e.prototype.initializeDrag=function(t){var e=this,i=new ou(t,{dragArea:this.dragArea,dragTarget:"."+yC,clone:!0,helper:this.helper.bind(this),dragStart:this.itemDragStart.bind(this),drag:function(t){var i,n,r=e.getEleIndex(e.dragItem),o={draggedItem:e.dragItem,event:t.event,target:t.target,droppedItem:t.target.closest("."+yC),clonedElement:e.cloneElement,index:r};if(h(t.target.closest(".e-tab"))||t.target.closest(".e-tab").isEqualNode(e.element)||e.dragArea==="."+oC){if(t.target.closest(e.dragArea)||"Popup"===e.overflowMode?(document.body.style.cursor="",e.dragItem.querySelector("."+mC).style.visibility="hidden",e.cloneElement.classList.contains(cC)&&x([e.cloneElement],cC)):(document.body.style.cursor="not-allowed",I([e.cloneElement],cC),e.dragItem.classList.contains(cC)&&x([e.dragItem],cC),e.dragItem.querySelector("."+mC).style.visibility="visible"),"Scrollable"===e.overflowMode&&!h(e.element.querySelector(".e-hscroll"))){var s=e.element.querySelector(".e-scroll-right-nav"),a=e.element.querySelector(".e-scroll-left-nav"),l=e.element.querySelector(".e-hscroll-bar");!h(s)&&Math.abs(s.offsetWidth/2+s.offsetLeft)>e.cloneElement.offsetLeft+e.cloneElement.offsetWidth&&(l.scrollLeft-=10),!h(a)&&Math.abs(a.offsetLeft+a.offsetWidth-e.cloneElement.offsetLeft)>a.offsetWidth/2&&(l.scrollLeft+=10)}e.cloneElement.style.pointerEvents="none",n=j(t.target,"."+yC+".e-draggable");var c=0;"Scrollable"!==e.overflowMode||h(e.element.querySelector(".e-hscroll"))||(c=e.element.querySelector(".e-hscroll-content").offsetWidth),null!=n&&!n.isSameNode(e.dragItem)&&n.closest(".e-tab").isSameNode(e.dragItem.closest(".e-tab"))&&((i=e.getEleIndex(n))<r&&Math.abs(n.offsetLeft+n.offsetWidth-e.cloneElement.offsetLeft)>n.offsetWidth/2&&e.dragAction(n,r,i),i>r&&Math.abs(n.offsetWidth/2)+n.offsetLeft-c<e.cloneElement.offsetLeft+e.cloneElement.offsetWidth&&e.dragAction(n,r,i)),e.droppedIndex=e.getEleIndex(e.dragItem),e.trigger("dragging",o)}else e.trigger("dragging",o)},dragStop:this.itemDragStop.bind(this)});this.draggableItems.push(i)},e.prototype.helper=function(t){return this.cloneElement=this.createElement("div"),t.element&&(this.cloneElement=t.element.cloneNode(!0),I([this.cloneElement],"e-tab-clone-element"),this.element.querySelector("."+oC).classList.contains(pC)&&I([this.cloneElement],pC),x([this.cloneElement.querySelector("."+mC)],"e-ripple"),h(this.cloneElement.querySelector(".e-ripple-element"))||O(this.cloneElement.querySelector(".e-ripple-element")),document.body.appendChild(this.cloneElement)),this.cloneElement},e.prototype.itemDragStart=function(t){var e=this;this.draggingItems=this.items.map(function(t){return t}),this.dragItem=t.element;var i={draggedItem:t.element,event:t.event,target:t.target,droppedItem:null,index:this.getEleIndex(this.dragItem),clonedElement:this.cloneElement,cancel:!1};this.trigger("onDragStart",i,function(t){t.cancel?T(e.cloneElement):(e.removeActiveClass(),I([e.tbItems.querySelector("."+gC)],cC),e.dragItem.querySelector("."+mC).style.visibility="hidden")})},e.prototype.dragAction=function(t,e,i){if(this.items.length>0){var n=this.draggingItems[e];this.draggingItems.splice(e,1),this.draggingItems.splice(i,0,n)}if("MultiRow"===this.overflowMode&&t.parentNode.insertBefore(this.dragItem,t.nextElementSibling),e>i)if(this.dragItem.parentElement.isSameNode(t.parentElement))this.dragItem.parentNode.insertBefore(this.dragItem,t);else if("Extended"===this.overflowMode)if(t.isSameNode(t.parentElement.lastChild)){var r=this.dragItem.parentNode;t.parentNode.insertBefore(this.dragItem,t),r.insertBefore(t.parentElement.lastChild,r.childNodes[0])}else this.dragItem.parentNode.insertBefore(t.parentElement.lastChild,this.dragItem.parentElement.childNodes[0]),t.parentNode.insertBefore(this.dragItem,t);else{var o=t.parentElement.lastChild;if(t.isSameNode(o)){r=this.dragItem.parentNode;t.parentNode.insertBefore(this.dragItem,t),r.insertBefore(o,r.childNodes[0])}else this.dragItem.parentNode.insertBefore(t.parentElement.lastChild,this.dragItem.parentElement.childNodes[0]),t.parentNode.insertBefore(this.dragItem,t)}e<i&&(this.dragItem.parentElement.isSameNode(t.parentElement)?this.dragItem.parentNode.insertBefore(this.dragItem,t.nextElementSibling):"Extended"===this.overflowMode?(this.dragItem.parentElement.appendChild(t.parentElement.firstElementChild),t.parentNode.insertBefore(this.dragItem,t.nextSibling)):(this.dragItem.parentNode.insertBefore(t.parentElement.lastChild,this.dragItem.parentElement.childNodes[0]),t.parentNode.insertBefore(this.dragItem,t)))},e.prototype.itemDragStop=function(t){var e=this;T(this.cloneElement),this.cloneElement=null,this.dragItem.querySelector("."+mC).style.visibility="visible",document.body.style.cursor="";var i={draggedItem:this.dragItem,event:t.event,target:t.target,droppedItem:this.tbItem[this.droppedIndex],clonedElement:null,index:this.droppedIndex,cancel:!1};this.trigger("dragged",i,function(t){t.cancel?e.refresh():e.items.length>0&&e.draggingItems.length>0?(e.items=e.draggingItems,e.selectedItem=e.droppedIndex,e.refresh()):(e.dragItem.querySelector("."+mC).style.visibility="",x([e.tbItems.querySelector("."+gC)],cC),e.selectTab(e.droppedIndex,null,!0))}),this.dragItem=null},e.prototype.enableTab=function(t,e){var i=z("."+yC,this.element)[t];h(i)||(!0===e?(i.classList.remove(hC,"e-overlay"),i.firstElementChild.setAttribute("tabindex",i.firstElementChild.getAttribute("data-tabindex"))):(i.classList.add(hC,"e-overlay"),i.firstElementChild.removeAttribute("tabindex"),i.classList.contains(lC)&&this.select(t+1)),h(this.items[t])||(this.items[t].disabled=!e,this.dataBind()),i.firstElementChild.setAttribute("aria-disabled",!0===e?"false":"true"))},e.prototype.addTab=function(t,e){var i=this,n={addedItems:t,cancel:!1};this.isReplace?this.addingTabContent(t,e):this.trigger("adding",n,function(n){n.cancel||i.addingTabContent(t,e)}),this.isReact&&this.renderReactTemplates()},e.prototype.addingTabContent=function(t,e){var i=this,n=0;if(this.hdrEle=A("."+oC,this.element),h(this.hdrEle))this.items=t,this.reRenderItems(),this.bindDraggable();else{var r=z(".e-tab-header ."+yC,this.element).length;if(0!==r&&(n=this.lastIndex+1),h(e)&&(e=r-1),r<e||e<0||isNaN(e))return;0!==r||h(this.hdrEle)||(this.hdrEle.style.display=""),h(this.bdrLine)||this.bdrLine.classList.add(cC),this.tbItems=A("."+vC,this.getTabHeader()),this.isAdd=!0;var o=this.parseObject(t,e);this.isAdd=!1;var s,a=0;t.forEach(function(t,r){if(s=t.headerTemplate||t.header.text,h(t.headerTemplate||t.header)||h(s)||0===s.length&&!h(t.header)&&h(t.header.iconCss)||(o[r]&&(h(t.id)&&(t.id=aC+i.tabId+"_tabitem_"+(n+r).toString()),o[r].htmlAttributes["data-id"]=t.id),i.items.splice(e+a,0,t),a++),i.isTemplate&&!h(t.header)&&!h(t.header.text)){var l=n+r,c=i.createElement("div",{id:sC+i.tabId+"_"+l,className:aC,attrs:{role:"tabpanel","aria-labelledby":"e-item_"+l}});i.cntEle.insertBefore(c,i.cntEle.children[e+r]);var d=i.getTrgContent(i.cntEle,l.toString());i.getContent(d,t.content,"render",e)}}),this.tbObj.addItems(o,e),this.isReplace||this.trigger("added",{addedItems:t}),this.selectedItem===e?this.select(e):(this.setActiveBorder(),this.tbItem=z("."+yC,this.getTabHeader())),this.bindDraggable()}},e.prototype.removeTab=function(t){var e=this,i=z("."+yC,this.element)[t];if(!h(i)){var n={removedItem:i,removedIndex:t,cancel:!1};this.trigger("removing",n,function(n){if(!n.cancel){e.tbObj.removeItems(t),e.allowDragAndDrop&&t!==Array.prototype.indexOf.call(e.itemIndexArray,i.id)&&(t=Array.prototype.indexOf.call(e.itemIndexArray,i.id));var r=e.itemIndexArray.indexOf(i.id);e.items.splice(r,1),e.itemIndexArray.splice(r,1),e.refreshActiveBorder();var o=A("#"+sC+e.tabId+"_"+e.extIndex(i.id),A("."+sC,e.element));if(!h(o)){var s=e.registeredTemplate;e.portals;if(s&&s.content){for(var a=[],l=0;l<s.content.length;l++){var c=s.content[l].rootNodes[0],d=j(c,".e-item");if(!h(c)&&d===o){a.push(s.content[l]);break}}a.length>0&&e.clearTemplate(["content"],a)}T(o)}e.trigger("removed",n),e.draggableItems&&e.draggableItems.length>0&&(e.draggableItems[t].destroy(),e.draggableItems[t]=null,e.draggableItems.splice(t,1)),i.classList.contains(lC)?(t=t>z("."+yC+":not(."+bC+")",e.element).length-1?t-1:t,e.enableAnimation=!1,e.selectedItem=t,e.select(t)):t!==e.selectedItem&&(t<e.selectedItem&&(t=e.itemIndexArray.indexOf(e.tbItem[e.selectedItem].id),e.setProperties({selectedItem:t>-1?t:e.selectedItem},!0),e.prevIndex=e.selectedItem),e.tbItem=z("."+yC,e.getTabHeader())),0===z("."+yC,e.element).length&&(e.hdrEle.style.display="none"),e.enableAnimation=!0}})}},e.prototype.hideTab=function(t,e){var i,n=z("."+yC,this.element)[t];if(!h(n)){if(h(e)&&(e=!0),this.bdrLine.classList.add(cC),!0===e)if(n.classList.add(cC),0!==(i=z("."+yC+":not(."+cC+")",this.tbItems)).length&&n.classList.contains(lC)){if(0!==t)for(var r=t-1;r>=0;r--){if(!this.tbItem[r].classList.contains(cC)){this.select(r);break}if(0===r)for(var o=t+1;o<this.tbItem.length;o++)if(!this.tbItem[o].classList.contains(cC)){this.select(o);break}}else for(o=t+1;o<this.tbItem.length;o++)if(!this.tbItem[o].classList.contains(cC)){this.select(o);break}}else 0===i.length&&this.element.classList.add(cC);else this.element.classList.remove(cC),i=z("."+yC+":not(."+cC+")",this.tbItems),n.classList.remove(cC),0===i.length&&this.select(t);this.setActiveBorder(),n.setAttribute("aria-hidden",""+e),"Popup"===this.overflowMode&&this.tbObj&&this.tbObj.refreshOverflow()}},e.prototype.selectTab=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=!1),this.isInteracted=i,this.select(t,e)},e.prototype.select=function(t,e){var i=this,n=this.getTabHeader();this.tbItems=A("."+vC,n),this.tbItem=z("."+yC,n),this.content=A("."+sC,this.element),this.prevItem=this.tbItem[this.prevIndex],h(this.selectedItem)||this.selectedItem<0||this.tbItem.length<=this.selectedItem||isNaN(this.selectedItem)?this.selectedItem=0:this.selectedID=this.extIndex(this.tbItem[this.selectedItem].id);var r=this.tbItem[t];h(r)?this.selectedID="0":this.selectingID=this.extIndex(r.id),h(this.prevItem)||this.prevItem.classList.contains(hC)||this.prevItem.children.item(0).setAttribute("tabindex",this.prevItem.firstElementChild.getAttribute("tabindex"));var o={event:e,previousItem:this.prevItem,previousIndex:this.prevIndex,selectedItem:this.tbItem[this.selectedItem],selectedIndex:this.selectedItem,selectedContent:h(this.content)?null:A("#"+sC+this.tabId+"_"+this.selectedID,this.content),selectingItem:r,selectingIndex:t,selectingContent:h(this.content)?null:A("#"+sC+this.tabId+"_"+this.selectingID,this.content),isSwiped:this.isSwipeed,isInteracted:this.isInteracted,cancel:!1};this.initRender?this.selectingContent(t,this.isInteracted):this.trigger("selecting",o,function(e){e.cancel||i.selectingContent(t,i.isInteracted)}),this.isInteracted=!1},e.prototype.selectingContent=function(t,e){if("number"==typeof t){if(!h(this.tbItem[t])&&(this.tbItem[t].classList.contains(hC)||this.tbItem[t].classList.contains(cC)))for(var i=t+1;i<this.items.length;i++){if(!1===this.items[i].disabled&&!0===this.items[i].visible){t=i;break}t=0}if(this.tbItem.length>t&&t>=0&&!isNaN(t))if(this.prevIndex=this.selectedItem,this.prevItem=this.tbItem[this.prevIndex],this.tbItem[t].classList.contains(bC)&&this.reorderActiveTab){if(this.setActive(this.popupHandler(this.tbItem[t]),null,e),!h(this.items)&&this.items.length>0&&this.allowDragAndDrop){this.tbItem=z("."+vC+" ."+yC,this.hdrEle);var n=this.items[t];this.items.splice(t,1),this.items.splice(this.tbItem.length-1,0,n);var r=this.itemIndexArray[t];this.itemIndexArray.splice(t,1),this.itemIndexArray.splice(this.tbItem.length-1,0,r)}}else this.setActive(t,null,e);else this.setActive(0,null,e)}else t instanceof HTMLElement&&this.setActive(this.getEleIndex(t),null,e)},e.prototype.getItemIndex=function(t){for(var e,i=0;i<this.tbItem.length;i++){if(t===this.tbItem[i].getAttribute("data-id")){e=i;break}}return e},e.prototype.disable=function(t){this.setCssClass(this.element,hC,t),this.element.setAttribute("aria-disabled",""+t)},e.prototype.getPersistData=function(){return this.addOnPersist(["selectedItem","actEleId"])},e.prototype.getModuleName=function(){return"tab"},e.prototype.onPropertyChanged=function(t,e){for(var i=this,n=0,r=Object.keys(t);n<r.length;n++){switch(r[n]){case"width":P(this.element,{width:m(t.width)});break;case"height":P(this.element,{height:m(t.height)}),this.setContentHeight(!1);break;case"cssClass":var o=this.element.querySelector("."+oC);""===e.cssClass||h(e.cssClass)?(this.setCssClass(this.element,t.cssClass,!0),h(o)||this.setCssClass(o,t.cssClass,!0)):(this.setCssClass(this.element,e.cssClass,!1),this.setCssClass(this.element,t.cssClass,!0),h(o)||(this.setCssClass(o,e.cssClass,!1),this.setCssClass(o,t.cssClass,!0)));break;case"items":this.evalOnPropertyChangeItems(t,e);break;case"showCloseButton":this.setCloseButton(t.showCloseButton);break;case"reorderActiveTab":this.refreshActiveTabBorder();break;case"selectedItem":this.selectedItem=e.selectedItem,this.select(t.selectedItem);break;case"headerPlacement":this.changeOrientation(t.headerPlacement);break;case"enableRtl":this.setRTL(t.enableRtl);break;case"overflowMode":this.tbObj.overflowMode=t.overflowMode,this.tbObj.dataBind(),this.refreshActiveTabBorder();break;case"heightAdjustMode":this.setContentHeight(!1),this.select(this.selectedItem);break;case"scrollStep":this.tbObj&&(this.tbObj.scrollStep=this.scrollStep);break;case"allowDragAndDrop":this.bindDraggable();break;case"dragArea":this.allowDragAndDrop&&(this.draggableItems.forEach(function(t){t.dragArea=i.dragArea}),this.refresh())}}},e.prototype.refreshActiveTab=function(){if(this.isReact&&this.isTemplate&&this.clearTemplate(),this.isTemplate){var t=this.element.querySelector("."+vC),e=this.element.querySelector("."+yC+"."+lC),i=this.getIndexFromEle(e.id),n=e.innerText,r=this.element.querySelector("."+sC).querySelector("."+lC).children[0],o=r.innerHTML;T(e),T(r);var s={className:yC+" e-template "+lC,id:aC+this.tabId+"_"+i},a=this.createElement("span",{className:uC,innerHTML:n,attrs:{role:"presentation"}}).outerHTML,l=this.createElement("div",{className:fC,innerHTML:a+this.btnCls.outerHTML}).outerHTML,c=(y=e.firstElementChild.getAttribute("data-tabindex"),this.createElement("div",{className:mC,innerHTML:l,attrs:{tabIndex:y,"data-tabindex":y,role:"tab","aria-controls":sC+this.tabId+"_"+i,"aria-selected":"true","aria-disabled":"false"}}));t.insertBefore(this.createElement("div",s),t.children[i+1]),this.element.querySelector("."+yC+"."+lC).appendChild(c);w=this.createElement("div",{innerHTML:o});this.element.querySelector("."+sC).querySelector("."+lC).appendChild(w)}else if(this.element.querySelector("."+yC+"."+lC)){T(this.element.querySelector("."+yC+"."+lC).children[0]),T(this.element.querySelector("."+sC).querySelector("."+lC).children[0]);var d=this.items[this.selectedItem],p=h(d.header)||h(d.header.iconPosition)?"":d.header.iconPosition,u=h(d.header)||h(d.header.iconCss)?"":d.header.iconCss,g=d.headerTemplate||d.header.text,m=this.createElement("div",{className:uC,attrs:{role:"presentation"}});h(g.tagName)?this.headerTextCompile(m,g,this.selectedItem):m.appendChild(g);var f=this.createElement("span",{className:"e-icons e-tab-icon e-icon-"+p+" "+u}),v=this.createElement("div",{className:fC});v.appendChild(m),""!==g&&void 0!==g&&""!==u?("left"===p||"top"===p?v.insertBefore(f,v.firstElementChild):v.appendChild(f),m,this.isIconAlone=!1):(""===u?m:f)===f&&(T(m),v.appendChild(f),this.isIconAlone=!0);var y=h(d.tabIndex)?"-1":d.tabIndex.toString(),b=d.disabled?{}:{tabIndex:y,"data-tabindex":y,role:"tab","aria-selected":"true","aria-disabled":"false"};v.appendChild(this.btnCls.cloneNode(!0));var S=this.createElement("div",{className:mC,attrs:b});S.appendChild(v),"top"!==p&&"bottom"!==p||this.element.classList.add("e-vertical-icon"),this.element.querySelector("."+yC+"."+lC).appendChild(S);var w=this.createElement("div"),I=d.content,x=void 0;if("string"==typeof I||h(I.innerHTML))if("string"==typeof I&&this.enableHtmlSanitizer&&(I=Yu.sanitize(I)),"."===I[0]||"#"===I[0])if(document.querySelectorAll(I).length){var M=document.querySelector(I);x=M.outerHTML.trim(),w.appendChild(M),M.style.display=""}else this.compileElement(w,I,"content",this.selectedItem);else this.compileElement(w,I,"content",this.selectedItem);else w.appendChild(I);h(x)||-1===this.templateEle.indexOf(I.toString())&&this.templateEle.push(I.toString()),this.element.querySelector(".e-item."+lC).appendChild(w)}this.isReact&&this.renderReactTemplates()},e.prototype.refreshActiveTabBorder=function(){var t=A("."+yC+"."+bC+"."+lC,this.element);!h(t)&&this.reorderActiveTab&&this.select(this.getEleIndex(t)),this.refreshActiveBorder()},rC([q([],EC)],e.prototype,"items",void 0),rC([W("100%")],e.prototype,"width",void 0),rC([W("auto")],e.prototype,"height",void 0),rC([W("")],e.prototype,"cssClass",void 0),rC([W(0)],e.prototype,"selectedItem",void 0),rC([W("Top")],e.prototype,"headerPlacement",void 0),rC([W("Content")],e.prototype,"heightAdjustMode",void 0),rC([W("Scrollable")],e.prototype,"overflowMode",void 0),rC([W("Dynamic")],e.prototype,"loadOn",void 0),rC([W(!1)],e.prototype,"enablePersistence",void 0),rC([W(!1)],e.prototype,"enableHtmlSanitizer",void 0),rC([W(!1)],e.prototype,"showCloseButton",void 0),rC([W(!0)],e.prototype,"reorderActiveTab",void 0),rC([W()],e.prototype,"scrollStep",void 0),rC([W()],e.prototype,"dragArea",void 0),rC([W(!1)],e.prototype,"allowDragAndDrop",void 0),rC([Q({},CC)],e.prototype,"animation",void 0),rC([Z()],e.prototype,"created",void 0),rC([Z()],e.prototype,"adding",void 0),rC([Z()],e.prototype,"added",void 0),rC([Z()],e.prototype,"selecting",void 0),rC([Z()],e.prototype,"selected",void 0),rC([Z()],e.prototype,"removing",void 0),rC([Z()],e.prototype,"removed",void 0),rC([Z()],e.prototype,"onDragStart",void 0),rC([Z()],e.prototype,"dragging",void 0),rC([Z()],e.prototype,"dragged",void 0),rC([Z()],e.prototype,"destroyed",void 0),e=rC([$],e)}(Kp),{RTL:"e-rtl",DISABLE:"e-disabled",INPUT:"e-input",TEXTAREA:"e-multi-line-input",INPUTGROUP:"e-input-group",FLOATINPUT:"e-float-input",FLOATLINE:"e-float-line",FLOATTEXT:"e-float-text",FLOATTEXTCONTENT:"e-float-text-content",CLEARICON:"e-clear-icon",CLEARICONHIDE:"e-clear-icon-hide",LABELTOP:"e-label-top",LABELBOTTOM:"e-label-bottom",NOFLOATLABEL:"e-no-float-label",INPUTCUSTOMTAG:"e-input-custom-tag",FLOATCUSTOMTAG:"e-float-custom-tag"});!function(t){function e(e){i(e.floatLabelType,e.element),e.element.addEventListener("focus",function(){var i=d(this);(i.classList.contains("e-input-group")||i.classList.contains("e-outline")||i.classList.contains("e-filled"))&&i.classList.add("e-input-focus"),setTimeout(function(){t.calculateWidth(e.element,i)},80)}),e.element.addEventListener("blur",function(){var i=d(this);(i.classList.contains("e-input-group")||i.classList.contains("e-outline")||i.classList.contains("e-filled"))&&i.classList.remove("e-input-focus"),setTimeout(function(){t.calculateWidth(e.element,i)},80)}),e.element.addEventListener("input",function(){i(_,e.element)})}function i(t,e){var i=e.value;""!==i&&!h(i)&&e.parentElement?e.parentElement.classList.add("e-valid-input"):"Always"!==t&&e.parentElement&&e.parentElement.classList.remove("e-valid-input")}function n(){var t=d(this).getElementsByClassName("e-float-text")[0];h(t)||(I([t],DC.LABELTOP),t.classList.contains(DC.LABELBOTTOM)&&x([t],DC.LABELBOTTOM))}function r(){var t=d(this);if(t.getElementsByTagName("textarea")[0]?""===t.getElementsByTagName("textarea")[0].value:""===t.getElementsByTagName("input")[0].value){var e=t.getElementsByClassName("e-float-text")[0];h(e)||(e.classList.contains(DC.LABELTOP)&&x([e],DC.LABELTOP),I([e],DC.LABELBOTTOM))}}function o(t){t.addEventListener("focus",n),t.addEventListener("blur",r)}function s(t,e,i){var n=h(i)?w:i;"Auto"===t.floatLabelType&&o(t.element),h(e.container)?(e.container=g(t,DC.FLOATINPUT,DC.FLOATCUSTOMTAG,"div",n),t.element.parentNode&&t.element.parentNode.insertBefore(e.container,t.element)):(h(t.customTag)||e.container.classList.add(DC.FLOATCUSTOMTAG),e.container.classList.add(DC.FLOATINPUT));var r=n("span",{className:DC.FLOATLINE}),s=n("label",{className:DC.FLOATTEXT});if(h(t.element.id)||""===t.element.id||(s.id="label_"+t.element.id.replace(/ /g,"_"),L(t.element,{"aria-labelledby":s.id})),h(t.element.placeholder)||""===t.element.placeholder||(s.innerText=f(t.element.placeholder),t.element.removeAttribute("placeholder")),h(t.properties)||h(t.properties.placeholder)||""===t.properties.placeholder||(s.innerText=f(t.properties.placeholder)),s.innerText||e.container.classList.add(DC.NOFLOATLABEL),e.container.classList.contains("e-float-icon-left")){var a=e.container.querySelector(".e-input-in-wrap");a.appendChild(t.element),a.appendChild(r),a.appendChild(s)}else e.container.appendChild(t.element),e.container.appendChild(r),e.container.appendChild(s);c(t.element.value,s),"Always"===t.floatLabelType&&(s.classList.contains(DC.LABELBOTTOM)&&x([s],DC.LABELBOTTOM),I([s],DC.LABELTOP)),"Auto"===t.floatLabelType&&(t.element.addEventListener("input",function(e){c(t.element.value,s,t.element)}),t.element.addEventListener("blur",function(e){c(t.element.value,s)})),h(t.element.getAttribute("id"))||s.setAttribute("for",t.element.getAttribute("id"))}function a(t,e){"Always"===t&&e.classList.contains("e-outline")&&e.classList.add("e-valid-input")}function l(t,e,i){t&&!i?x([e],DC.CLEARICONHIDE):I([e],DC.CLEARICONHIDE)}function c(t,e,i){if(void 0===i&&(i=null),t)I([e],DC.LABELTOP),e.classList.contains(DC.LABELBOTTOM)&&x([e],DC.LABELBOTTOM);else{(null==i||i!==document.activeElement)&&(e.classList.contains(DC.LABELTOP)&&x([e],DC.LABELTOP),I([e],DC.LABELBOTTOM))}}function d(t){var e=h(t.parentNode)?t:t.parentNode;return e&&e.classList.contains("e-input-in-wrap")&&(e=e.parentNode),e}function p(t,e,i){(void 0===F||F)&&e.addEventListener("click",function(i){t.classList.contains(DC.DISABLE)||t.readOnly||(i.preventDefault(),t!==document.activeElement&&t.focus(),t.value="",I([e],DC.CLEARICONHIDE))}),t.addEventListener("input",function(i){l(t.value,e)}),t.addEventListener("focus",function(i){l(t.value,e,t.readOnly)}),t.addEventListener("blur",function(t){setTimeout(function(){I([e],DC.CLEARICONHIDE)},200)})}function u(t,e){if(d(t).classList.contains(DC.FLOATINPUT)&&"Auto"===e){var i=d(t).getElementsByClassName("e-float-text")[0];c(t.value,i,t)}}function g(t,e,i,n,r){var o,s=h(r)?w:r;return h(t.customTag)?o=s(n,{className:e}):(o=s(t.customTag,{className:e})).classList.add(i),o.classList.add("e-control-wrapper"),o}function f(t){var e="";if(!h(t)&&""!==t){var i=document.createElement("span");i.innerHTML='<input  placeholder="'+t+'"/>';e=i.children[0].placeholder}return e}function v(t,e,i){h(i)||""===i||x(e,i.split(" ")),h(t)||""===t||I(e,t.split(" "))}function y(t,e,i){var n="multiselect"===i?t:t.clientWidth-parseInt(getComputedStyle(t,null).getPropertyValue("padding-left"),10);h(e.getElementsByClassName("e-float-text-content")[0])||(e.getElementsByClassName("e-float-text-content")[0].classList.contains("e-float-text-overflow")&&e.getElementsByClassName("e-float-text-content")[0].classList.remove("e-float-text-overflow"),(n<e.getElementsByClassName("e-float-text-content")[0].clientWidth||n===e.getElementsByClassName("e-float-text-content")[0].clientWidth)&&e.getElementsByClassName("e-float-text-content")[0].classList.add("e-float-text-overflow"))}function b(t,e){t=f(t);var i=d(e);i.classList.contains(DC.FLOATINPUT)?h(t)||""===t?(i.classList.add(DC.NOFLOATLABEL),i.getElementsByClassName("e-float-text-content")[0]?i.getElementsByClassName(DC.FLOATTEXT)[0].children[0].textContent="":i.getElementsByClassName(DC.FLOATTEXT)[0].textContent=""):(i.getElementsByClassName("e-float-text-content")[0]?i.getElementsByClassName(DC.FLOATTEXT)[0].children[0].textContent=t:i.getElementsByClassName(DC.FLOATTEXT)[0].textContent=t,i.classList.remove(DC.NOFLOATLABEL),e.removeAttribute("placeholder")):h(t)||""===t?e.removeAttribute("placeholder"):L(e,{placeholder:t})}function S(t,e,i){t?L(e,{readonly:""}):e.removeAttribute("readonly"),h(i)||u(e,i)}function M(t,e){t?I(e,DC.RTL):x(e,DC.RTL)}function C(t,e,i,n){var r={disabled:"disabled","aria-disabled":"true"},o=!h(n);t?(e.classList.remove(DC.DISABLE),E(r,e),o&&x([n],DC.DISABLE)):(e.classList.add(DC.DISABLE),D(r,e),o&&I([n],DC.DISABLE)),h(i)||u(e,i)}function N(t,e,i,n,r){var o=h(r)?w:r;t?i.clearButton=function(t,e,i,n){var r=(h(n)?w:n)("span",{className:DC.CLEARICON}),o=e.container;h(i)?(e.container.classList.contains(DC.FLOATINPUT)?e.container.querySelector("."+DC.FLOATTEXT):t).insertAdjacentElement("afterend",r):o.appendChild(r);return!h(o)&&o.classList.contains(DC.FLOATINPUT)&&I([o],DC.INPUTGROUP),I([r],DC.CLEARICONHIDE),p(t,r),r.setAttribute("aria-label","close"),r}(e,i,n,o):(O(i.clearButton),i.clearButton=null)}function E(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){var r=n[i],o=d(e);"disabled"===r&&e.classList.remove(DC.DISABLE),"disabled"===r&&o.classList.contains(DC.INPUTGROUP)&&o.classList.remove(DC.DISABLE),"placeholder"===r&&o.classList.contains(DC.FLOATINPUT)?o.getElementsByClassName(DC.FLOATTEXT)[0].textContent="":e.removeAttribute(r)}}function D(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){var r=n[i],o=d(e);"disabled"===r&&e.classList.add(DC.DISABLE),"disabled"===r&&o.classList.contains(DC.INPUTGROUP)&&o.classList.add(DC.DISABLE),"placeholder"===r&&o.classList.contains(DC.FLOATINPUT)?o.getElementsByClassName(DC.FLOATTEXT)[0].textContent=t[""+r]:e.setAttribute(r,t[""+r])}}function A(t,e){if(t.classList.contains("e-outline")&&t.getElementsByClassName("e-float-text")[0]){var i=e("span",{className:DC.FLOATTEXTCONTENT});i.innerHTML=t.getElementsByClassName("e-float-text")[0].innerHTML,t.getElementsByClassName("e-float-text")[0].innerHTML="",t.getElementsByClassName("e-float-text")[0].appendChild(i)}}function z(t,e,i){var n=[];n.push(i);var r=h(i)?e.querySelectorAll(".e-input-group-icon"):n;if(t&&r.length>0)for(var o=0;o<r.length;o++)r[parseInt(o.toString())].addEventListener("mousedown",k,!1),r[parseInt(o.toString())].addEventListener("mouseup",P,!1);else if(r.length>0)for(o=0;o<r.length;o++)r[parseInt(o.toString())].removeEventListener("mousedown",k,this),r[parseInt(o.toString())].removeEventListener("mouseup",P,this)}function k(){for(var t=this.parentElement;!t.classList.contains("e-input-group");)t=t.parentElement;!function(t,e){t.classList.contains("e-disabled")||t.querySelector("input").readOnly||e.classList.add("e-input-btn-ripple")}(t,this)}function P(){var t=this;setTimeout(function(){t.classList.remove("e-input-btn-ripple")},500)}function B(t,e){var i=e("span",{className:t});return i.classList.add("e-input-group-icon"),i}function H(t,e,i,n){var r=h(n)?w:n,o=B(t,r);e.classList.add("e-float-icon-left");var s=e.querySelector(".e-input-in-wrap");if(h(s)){s=r("span",{className:"e-input-in-wrap"}),i.parentNode.insertBefore(s,i);var a=e.querySelectorAll(i.tagName+" ~ *");s.appendChild(i);for(var l=0;l<a.length;l++)s.appendChild(a[parseInt(l.toString())])}return s.parentNode.insertBefore(o,s),e.classList.contains(DC.INPUTGROUP)||e.classList.add(DC.INPUTGROUP),z(!0,e,o),o}function U(t,e,i){var n=B(t,h(i)?w:i);e.classList.contains(DC.INPUTGROUP)||e.classList.add(DC.INPUTGROUP);return(e.classList.contains("e-float-icon-left")?e.querySelector(".e-input-in-wrap"):e).appendChild(n),z(!0,e,n),n}function V(t,e){"hidden"===e.type?t.classList.add("e-hidden"):t.classList.contains("e-hidden")&&t.classList.remove("e-hidden")}var _,F=!0;t.createInput=function(t,i){var n=h(i)?w:i,r={container:null,buttons:[],clearButton:null};if(_=t.floatLabelType,F=t.bindClearAction,h(t.floatLabelType)||"Never"===t.floatLabelType?(r.container=g(t,DC.INPUTGROUP,DC.INPUTCUSTOMTAG,"span",n),t.element.parentNode.insertBefore(r.container,t.element),I([t.element],DC.INPUT),r.container.appendChild(t.element)):s(t,r,n),e(t),h(t.properties)||h(t.properties.showClearButton)||!t.properties.showClearButton||"TEXTAREA"===t.element.tagName||(N(t.properties.showClearButton,t.element,r,!0,n),r.clearButton.setAttribute("role","button"),r.container.classList.contains(DC.FLOATINPUT)&&I([r.container],DC.INPUTGROUP)),!h(t.buttons)&&"TEXTAREA"!==t.element.tagName)for(var o=0;o<t.buttons.length;o++)r.buttons.push(U(t.buttons[o],r.container,n));return h(t.element)||"TEXTAREA"!==t.element.tagName||I([r.container],DC.TEXTAREA),V(r.container,t.element),r=function(t,e){if(!h(t.properties))for(var i=0,n=Object.keys(t.properties);i<n.length;i++){var r=n[i];switch(r){case"cssClass":v(t.properties.cssClass,[e.container]),a(t.floatLabelType,e.container);break;case"enabled":C(t.properties.enabled,t.element,t.floatLabelType,e.container);break;case"enableRtl":M(t.properties.enableRtl,[e.container]);break;case"placeholder":b(t.properties.placeholder,t.element);break;case"readonly":S(t.properties.readonly,t.element)}}return e}(t,r),A(r.container,n),r},t.bindInitialEvent=e,t.wireFloatingEvents=o,t.wireClearBtnEvents=p,t.destroy=function(){},t.setValue=function(t,e,n,r){if(e.value=t,y(e,e.parentElement),h(n)||"Auto"!==n||u(e,n),!h(r)&&r){var o=d(e);if(!h(o)){var s=o.getElementsByClassName(DC.CLEARICON)[0];h(s)||(e.value&&!h(o)&&o.classList.contains("e-input-focus")?x([s],DC.CLEARICONHIDE):I([s],DC.CLEARICONHIDE))}}i(n,e)},t.setCssClass=v,t.calculateWidth=y,t.setWidth=function(t,e){"number"==typeof t?e.style.width=m(t):"string"==typeof t&&(e.style.width=t.match(/px|%|em/)?t:m(t)),y(e.firstChild,e)},t.setPlaceholder=b,t.setReadonly=S,t.setEnableRtl=M,t.setEnabled=C,t.setClearButton=N,t.removeAttributes=E,t.addAttributes=D,t.removeFloating=function(t){var e=t.container;if(!h(e)&&e.classList.contains(DC.FLOATINPUT)){var i=e.querySelector("textarea")?e.querySelector("textarea"):e.querySelector("input"),o=e.querySelector("."+DC.FLOATTEXT).textContent,s=null!==e.querySelector(".e-clear-icon");T(e.querySelector("."+DC.FLOATLINE)),T(e.querySelector("."+DC.FLOATTEXT)),R(e,[DC.INPUTGROUP],[DC.FLOATINPUT]),function(t){t.removeEventListener("focus",n),t.removeEventListener("blur",r)}(i),L(i,{placeholder:o}),i.classList.add(DC.INPUT),s||"INPUT"!==i.tagName||i.removeAttribute("required")}},t.addFloating=function(t,e,i,n){var r=h(n)?w:n,o=j(t,"."+DC.INPUTGROUP);if(_=e,"Never"!==e){var l=o.tagName,c={element:t,floatLabelType:e,customTag:l="DIV"!==l&&"SPAN"!==l?l:null,properties:{placeholder:i}},d=o.querySelector(".e-clear-icon"),p={container:o};t.classList.remove(DC.INPUT),s(c,p,r),A(p.container,r),y(c.element,p.container);var u=o.classList.contains("e-float-icon-left");if(h(d)&&(d=u?o.querySelector(".e-input-in-wrap").querySelector(".e-input-group-icon"):o.querySelector(".e-input-group-icon")),h(d))u&&(d=o.querySelector(".e-input-group-icon")),h(d)&&o.classList.remove(DC.INPUTGROUP);else{var g=o.querySelector("."+DC.FLOATLINE),m=o.querySelector("."+DC.FLOATTEXT),f=u?o.querySelector(".e-input-in-wrap"):o;f.insertBefore(t,d),f.insertBefore(g,d),f.insertBefore(m,d)}}a(e,t.parentElement)},t.createSpanElement=A,t.setRipple=function(t,e){for(var i=0;i<e.length;i++)z(t,e[parseInt(i.toString())].container)},t.addIcon=function(t,e,i,n,r){var o="string"==typeof e?e.split(","):e;if("append"===t.toLowerCase())for(var s=0,a=o;s<a.length;s++)U(a[s],i,r);else for(var l=0,h=o;l<h.length;l++)H(h[l],i,n,r);i.getElementsByClassName("e-input-group-icon")[0]&&i.getElementsByClassName("e-float-text-overflow")[0]&&i.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon")},t.prependSpan=H,t.appendSpan=U,t.validateInputType=V}(zx||(zx={}));var TC,OC=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),LC=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},AC="e-input-group-icon",zC="increment",kC="decrement",jC=new RegExp("^(-)?(\\d*)$"),PC=["title","style","class"],RC=0,BC=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.isVue=!1,n.preventChange=!1,n.isAngular=!1,n.isDynamicChange=!1,n.numericOptions=e,n}return OC(e,t),e.prototype.preRender=function(){this.isPrevFocused=!1,this.decimalSeparator=".",this.intRegExp=new RegExp("/^(-)?(d*)$/"),this.isCalled=!1;var t=n("ej2_instances",this.element);if(this.cloneElement=this.element.cloneNode(!0),x([this.cloneElement],["e-control","e-numerictextbox","e-lib"]),this.angularTagName=null,this.formEle=j(this.element,"form"),"EJS-NUMERICTEXTBOX"===this.element.tagName){this.angularTagName=this.element.tagName;for(var e=this.createElement("input"),i=0;i<this.element.attributes.length;i++){var o=this.element.attributes[i].nodeName;"id"!==o&&"class"!==o?(e.setAttribute(this.element.attributes[i].nodeName,this.element.attributes[i].nodeValue),e.innerHTML=this.element.innerHTML):"class"===o&&e.setAttribute(o,this.element.className.split(" ").filter(function(t){return 0!==t.indexOf("ng-")}).join(" "))}this.element.hasAttribute("name")&&this.element.removeAttribute("name"),this.element.classList.remove("e-control","e-numerictextbox"),this.element.appendChild(e),this.element=e,r("ej2_instances",t,this.element)}L(this.element,{role:"spinbutton",tabindex:"0",autocomplete:"off"});var s={incrementTitle:"Increment value",decrementTitle:"Decrement value",placeholder:this.placeholder};this.l10n=new uu("numerictextbox",s,this.locale),""!==this.l10n.getConstant("placeholder")&&this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.element.hasAttribute("id")||this.element.setAttribute("id",d("numerictextbox")),this.isValidState=!0,this.inputStyle=null,this.inputName=null,this.cultureInfo={},this.initCultureInfo(),this.initCultureFunc(),this.prevValue=this.value,this.updateHTMLAttrToElement(),this.checkAttributes(!1),this.formEle&&(this.inputEleValue=this.value),this.validateMinMax(),this.validateStep(),null===this.placeholder&&this.updatePlaceholder()},e.prototype.render=function(){"input"===this.element.tagName.toLowerCase()&&(this.createWrapper(),this.showSpinButton&&this.spinBtnCreation(),this.setElementWidth(this.width),this.container.classList.contains("e-input-group")||this.container.classList.add("e-input-group"),this.changeValue(null===this.value||isNaN(this.value)?null:this.strictMode?this.trimValue(this.value):this.value),this.wireEvents(),null===this.value||isNaN(this.value)||this.decimals&&this.setProperties({value:this.roundNumber(this.value,this.decimals)},!0),(this.element.getAttribute("value")||this.value)&&(this.element.setAttribute("value",this.element.value),this.hiddenInput.setAttribute("value",this.hiddenInput.value)),this.elementPrevValue=this.element.value,this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false"),!h(j(this.element,"fieldset"))&&j(this.element,"fieldset").disabled&&(this.enabled=!1),this.renderComplete())},e.prototype.checkAttributes=function(t){for(var e=0,i=t?h(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["value","min","max","step","disabled","readonly","style","name","placeholder"];e<i.length;e++){var n=i[e];if(!h(this.element.getAttribute(n)))switch(n){case"disabled":if(h(this.numericOptions)||void 0===this.numericOptions.enabled||t){var o="disabled"!==this.element.getAttribute(n)&&""!==this.element.getAttribute(n)&&"true"!==this.element.getAttribute(n);this.setProperties({enabled:o},!t)}break;case"readonly":if(h(this.numericOptions)||void 0===this.numericOptions.readonly||t){var s="readonly"===this.element.getAttribute(n)||""===this.element.getAttribute(n)||"true"===this.element.getAttribute(n);this.setProperties({readonly:s},!t)}break;case"placeholder":(h(this.numericOptions)||void 0===this.numericOptions.placeholder||t)&&this.setProperties({placeholder:this.element.placeholder},!t);break;case"value":if(h(this.numericOptions)||void 0===this.numericOptions.value||t){var a=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(n));this.setProperties(r(n,a,{}),!t)}break;case"min":if(h(this.numericOptions)||void 0===this.numericOptions.min||t){var l=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(n));null===l||isNaN(l)||this.setProperties(r(n,l,{}),!t)}break;case"max":if(h(this.numericOptions)||void 0===this.numericOptions.max||t){var c=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(n));null===c||isNaN(c)||this.setProperties(r(n,c,{}),!t)}break;case"step":if(h(this.numericOptions)||void 0===this.numericOptions.step||t){var d=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(n));null===d||isNaN(d)||this.setProperties(r(n,d,{}),!t)}break;case"style":this.inputStyle=this.element.getAttribute(n);break;case"name":this.inputName=this.element.getAttribute(n);break;default:var p=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(n));(null!==p&&!isNaN(p)||"value"===n)&&this.setProperties(r(n,p,{}),!0)}}},e.prototype.updatePlaceholder=function(){this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0)},e.prototype.initCultureFunc=function(){this.instance=new hp(this.locale)},e.prototype.initCultureInfo=function(){this.cultureInfo.format=this.format,null!==n("currency",this)&&(r("currency",this.currency,this.cultureInfo),this.setProperties({currencyCode:this.currency},!0))},e.prototype.createWrapper=function(){var t=this.cssClass;h(this.cssClass)||""===this.cssClass||(t=this.getNumericValidClassList(this.cssClass));var e=zx.createInput({element:this.element,floatLabelType:this.floatLabelType,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:t,enableRtl:this.enableRtl,showClearButton:this.showClearButton,enabled:this.enabled}},this.createElement);this.inputWrapper=e,this.container=e.container,this.container.setAttribute("class","e-control-wrapper e-numeric "+this.container.getAttribute("class")),this.updateHTMLAttrToWrapper(),this.readonly&&L(this.element,{"aria-readonly":"true"}),this.hiddenInput=this.createElement("input",{attrs:{type:"text",validateHidden:"true",class:"e-numeric-hidden"}}),this.inputName=null!==this.inputName?this.inputName:this.element.id,this.element.removeAttribute("name"),L(this.hiddenInput,{name:this.inputName}),this.container.insertBefore(this.hiddenInput,this.container.childNodes[1]),this.updateDataAttribute(!1),null!==this.inputStyle&&L(this.container,{style:this.inputStyle})},e.prototype.updateDataAttribute=function(t){var e={};if(t)e=this.htmlAttributes;else for(var i=0;i<this.element.attributes.length;i++)e[this.element.attributes[i].name]=this.element.getAttribute(this.element.attributes[i].name);for(var n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];0===o.indexOf("data")&&this.hiddenInput.setAttribute(o,e[""+o])}},e.prototype.updateHTMLAttrToElement=function(){if(!h(this.htmlAttributes))for(var t=0,e=Object.keys(this.htmlAttributes);t<e.length;t++){var i=e[t];PC.indexOf(i)<0&&this.element.setAttribute(i,this.htmlAttributes[""+i])}},e.prototype.updateCssClass=function(t,e){zx.setCssClass(this.getNumericValidClassList(t),[this.container],this.getNumericValidClassList(e))},e.prototype.getNumericValidClassList=function(t){var e=t;return h(t)||""===t||(e=t.replace(/\s+/g," ").trim()),e},e.prototype.updateHTMLAttrToWrapper=function(){if(!h(this.htmlAttributes))for(var t=0,e=Object.keys(this.htmlAttributes);t<e.length;t++){var i=e[t];if(PC.indexOf(i)>-1)if("class"===i){var n=this.getNumericValidClassList(this.htmlAttributes[""+i]);""!==n&&I([this.container],n.split(" "))}else if("style"===i){var r=this.container.getAttribute(i);r=h(r)?this.htmlAttributes[""+i]:r+this.htmlAttributes[""+i],this.container.setAttribute(i,r)}else this.container.setAttribute(i,this.htmlAttributes[""+i])}},e.prototype.setElementWidth=function(t){h(t)||("number"==typeof t?this.container.style.width=m(t):"string"==typeof t&&(this.container.style.width=t.match(/px|%|em/)?t:m(t)))},e.prototype.spinBtnCreation=function(){this.spinDown=zx.appendSpan(AC+" e-spin-down",this.container,this.createElement),L(this.spinDown,{title:this.l10n.getConstant("decrementTitle")}),this.spinUp=zx.appendSpan(AC+" e-spin-up",this.container,this.createElement),L(this.spinUp,{title:this.l10n.getConstant("incrementTitle")}),this.wireSpinBtnEvents()},e.prototype.validateMinMax=function(){("number"!=typeof this.min||isNaN(this.min))&&this.setProperties({min:-Number.MAX_VALUE},!0),("number"!=typeof this.max||isNaN(this.max))&&this.setProperties({max:Number.MAX_VALUE},!0),null!==this.decimals&&(this.min!==-Number.MAX_VALUE&&this.setProperties({min:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.min))},!0),this.max!==Number.MAX_VALUE&&this.setProperties({max:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.max))},!0)),this.setProperties({min:this.min>this.max?this.max:this.min},!0),this.min!==-Number.MAX_VALUE&&L(this.element,{"aria-valuemin":this.min.toString()}),this.max!==Number.MAX_VALUE&&L(this.element,{"aria-valuemax":this.max.toString()})},e.prototype.formattedValue=function(t,e){return this.instance.getNumberFormat({maximumFractionDigits:t,minimumFractionDigits:t,useGrouping:!1})(e)},e.prototype.validateStep=function(){null!==this.decimals&&this.setProperties({step:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.step))},!0)},e.prototype.action=function(t,e){this.isInteract=!0;var i=this.isFocused?this.instance.getNumberParser({format:"n"})(this.element.value):this.value;this.changeValue(this.performAction(i,this.step,t)),this.raiseChangeEvent(e)},e.prototype.checkErrorClass=function(){this.isValidState?x([this.container],"e-error"):I([this.container],"e-error"),L(this.element,{"aria-invalid":this.isValidState?"false":"true"})},e.prototype.bindClearEvent=function(){this.showClearButton&&Ep.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this)},e.prototype.resetHandler=function(t){t.preventDefault(),this.inputWrapper.clearButton.classList.contains("e-clear-icon-hide")&&!this.inputWrapper.container.classList.contains("e-static-clear")||this.clear(t),this.isInteract=!0,this.raiseChangeEvent(t)},e.prototype.clear=function(t){this.setProperties({value:null},!0),this.setElementValue(""),this.hiddenInput.value="";if(j(this.element,"form")){var e=this.element.nextElementSibling,i=document.createEvent("KeyboardEvent");i.initEvent("keyup",!1,!0),e.dispatchEvent(i)}},e.prototype.resetFormHandler=function(){"EJS-NUMERICTEXTBOX"===this.element.tagName?this.updateValue(null):this.updateValue(this.inputEleValue)},e.prototype.setSpinButton=function(){h(this.spinDown)||L(this.spinDown,{title:this.l10n.getConstant("decrementTitle"),"aria-label":this.l10n.getConstant("decrementTitle")}),h(this.spinUp)||L(this.spinUp,{title:this.l10n.getConstant("incrementTitle"),"aria-label":this.l10n.getConstant("incrementTitle")})},e.prototype.wireEvents=function(){Ep.add(this.element,"focus",this.focusHandler,this),Ep.add(this.element,"blur",this.focusOutHandler,this),Ep.add(this.element,"keydown",this.keyDownHandler,this),Ep.add(this.element,"keyup",this.keyUpHandler,this),Ep.add(this.element,"input",this.inputHandler,this),Ep.add(this.element,"keypress",this.keyPressHandler,this),Ep.add(this.element,"change",this.changeHandler,this),Ep.add(this.element,"paste",this.pasteHandler,this),this.enabled&&(this.bindClearEvent(),this.formEle&&Ep.add(this.formEle,"reset",this.resetFormHandler,this))},e.prototype.wireSpinBtnEvents=function(){Ep.add(this.spinUp,Np.touchStartEvent,this.mouseDownOnSpinner,this),Ep.add(this.spinDown,Np.touchStartEvent,this.mouseDownOnSpinner,this),Ep.add(this.spinUp,Np.touchEndEvent,this.mouseUpOnSpinner,this),Ep.add(this.spinDown,Np.touchEndEvent,this.mouseUpOnSpinner,this),Ep.add(this.spinUp,Np.touchMoveEvent,this.touchMoveOnSpinner,this),Ep.add(this.spinDown,Np.touchMoveEvent,this.touchMoveOnSpinner,this)},e.prototype.unwireEvents=function(){Ep.remove(this.element,"focus",this.focusHandler),Ep.remove(this.element,"blur",this.focusOutHandler),Ep.remove(this.element,"keyup",this.keyUpHandler),Ep.remove(this.element,"input",this.inputHandler),Ep.remove(this.element,"keydown",this.keyDownHandler),Ep.remove(this.element,"keypress",this.keyPressHandler),Ep.remove(this.element,"change",this.changeHandler),Ep.remove(this.element,"paste",this.pasteHandler),this.formEle&&Ep.remove(this.formEle,"reset",this.resetFormHandler)},e.prototype.unwireSpinBtnEvents=function(){Ep.remove(this.spinUp,Np.touchStartEvent,this.mouseDownOnSpinner),Ep.remove(this.spinDown,Np.touchStartEvent,this.mouseDownOnSpinner),Ep.remove(this.spinUp,Np.touchEndEvent,this.mouseUpOnSpinner),Ep.remove(this.spinDown,Np.touchEndEvent,this.mouseUpOnSpinner),Ep.remove(this.spinUp,Np.touchMoveEvent,this.touchMoveOnSpinner),Ep.remove(this.spinDown,Np.touchMoveEvent,this.touchMoveOnSpinner)},e.prototype.changeHandler=function(t){t.stopPropagation(),this.element.value.length||this.setProperties({value:null},!0);var e=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(e,t)},e.prototype.raiseChangeEvent=function(t){if(this.prevValue!==this.value){var e={};this.changeEventArgs={value:this.value,previousValue:this.prevValue,isInteracted:this.isInteract,isInteraction:this.isInteract,event:t},t&&(this.changeEventArgs.event=t),void 0===this.changeEventArgs.event&&(this.changeEventArgs.isInteracted=!1,this.changeEventArgs.isInteraction=!1),a(e,this.changeEventArgs),this.prevValue=this.value,this.isInteract=!1,this.elementPrevValue=this.element.value,this.preventChange=!1,this.trigger("change",e)}},e.prototype.pasteHandler=function(){var t=this;if(this.enabled&&!this.readonly){var e=this.element.value;setTimeout(function(){t.numericRegex().test(t.element.value)||t.setElementValue(e)})}},e.prototype.preventHandler=function(){var t=this,e=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);setTimeout(function(){if(t.element.selectionStart>0){var i=t.element.selectionStart,r=t.element.selectionStart-1,o=t.element.value.split(""),s=n("decimal",S(t.locale)),a=s.charCodeAt(0);" "===t.element.value[r]&&t.element.selectionStart>0&&!e?(h(t.prevVal)?t.element.value=t.element.value.trim():0!==r?t.element.value=t.prevVal:0===r&&(t.element.value=t.element.value.trim()),t.element.setSelectionRange(r,r)):isNaN(parseFloat(t.element.value[t.element.selectionStart-1]))&&45!==t.element.value[t.element.selectionStart-1].charCodeAt(0)?(o.indexOf(t.element.value[t.element.selectionStart-1])!==o.lastIndexOf(t.element.value[t.element.selectionStart-1])&&t.element.value[t.element.selectionStart-1].charCodeAt(0)===a||t.element.value[t.element.selectionStart-1].charCodeAt(0)!==a)&&(t.element.value=t.element.value.substring(0,r)+t.element.value.substring(i,t.element.value.length),t.element.setSelectionRange(r,r),isNaN(parseFloat(t.element.value[t.element.selectionStart-1]))&&t.element.selectionStart>0&&t.element.value.length&&t.preventHandler()):isNaN(parseFloat(t.element.value[t.element.selectionStart-2]))&&t.element.selectionStart>1&&45!==t.element.value[t.element.selectionStart-2].charCodeAt(0)&&(o.indexOf(t.element.value[t.element.selectionStart-2])!==o.lastIndexOf(t.element.value[t.element.selectionStart-2])&&t.element.value[t.element.selectionStart-2].charCodeAt(0)===a||t.element.value[t.element.selectionStart-2].charCodeAt(0)!==a)&&(t.element.setSelectionRange(r,r),t.nextEle=t.element.value[t.element.selectionStart],t.cursorPosChanged=!0,t.preventHandler()),!0===t.cursorPosChanged&&t.element.value[t.element.selectionStart]===t.nextEle&&isNaN(parseFloat(t.element.value[t.element.selectionStart-1]))&&(t.element.setSelectionRange(t.element.selectionStart+1,t.element.selectionStart+1),t.cursorPosChanged=!1,t.nextEle=null),""===t.element.value.trim()&&t.element.setSelectionRange(0,0),t.element.selectionStart>0&&(45===t.element.value[t.element.selectionStart-1].charCodeAt(0)&&t.element.selectionStart>1&&(h(t.prevVal)?t.element.value=t.element.value:t.element.value=t.prevVal,t.element.setSelectionRange(t.element.selectionStart,t.element.selectionStart)),t.element.value[t.element.selectionStart-1]===s&&0===t.decimals&&t.validateDecimalOnType&&(t.element.value=t.element.value.substring(0,r)+t.element.value.substring(i,t.element.value.length))),t.prevVal=t.element.value}})},e.prototype.keyUpHandler=function(){if(this.enabled&&!this.readonly){!(!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))&&Np.isDevice&&this.preventHandler();var t=this.instance.getNumberParser({format:"n"})(this.element.value);t=null===t||isNaN(t)?null:t,this.hiddenInput.value=t||0===t?t.toString():null;if(j(this.element,"form")){var e=this.element.nextElementSibling,i=document.createEvent("KeyboardEvent");i.initEvent("keyup",!1,!0),e.dispatchEvent(i)}}},e.prototype.inputHandler=function(t){if(this.enabled&&!this.readonly){var e=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);if((navigator.userAgent.toLowerCase().indexOf("firefox")>-1||e)&&Np.isDevice&&this.preventHandler(),this.isAngular&&this.element.value!==n("decimal",S(this.locale))&&this.element.value!==n("minusSign",S(this.locale))){var i=this.instance.getNumberParser({format:"n"})(this.element.value);i=isNaN(i)?null:i,this.localChange({value:i}),this.preventChange=!0}if(this.isVue){var r=this.instance.getNumberParser({format:"n"})(this.element.value),o=this.instance.getNumberParser({format:"n"})(this.elementPrevValue);(new RegExp("[^0-9]+$").test(this.element.value)||(-1!==this.elementPrevValue.indexOf(".")||-1!==this.elementPrevValue.indexOf("-"))&&"0"===this.element.value[this.element.value.length-1])&&(r=this.value);var s={event:t,value:null===r||isNaN(r)?null:r,previousValue:null===o||isNaN(o)?null:o};this.preventChange=!0,this.elementPrevValue=this.element.value,this.trigger("input",s)}}},e.prototype.keyDownHandler=function(t){if(!this.readonly)switch(t.keyCode){case 38:t.preventDefault(),this.action(zC,t);break;case 40:t.preventDefault(),this.action(kC,t)}},e.prototype.performAction=function(t,e,i){(null===t||isNaN(t))&&(t=0);var n=i===zC?t+e:t-e;return n=this.correctRounding(t,e,n),this.strictMode?this.trimValue(n):n},e.prototype.correctRounding=function(t,e,i){var n=new RegExp("[,.](.*)"),r=n.test(t.toString()),o=n.test(e.toString());if(r||o){var s=r?n.exec(t.toString())[0].length:0,a=o?n.exec(e.toString())[0].length:0,l=Math.max(s,a);return t=this.roundValue(i,l)}return i},e.prototype.roundValue=function(t,e){e=e||0;var i=Math.pow(10,e);return t*=i,t=Math.round(t)/i},e.prototype.updateValue=function(t,e){e&&(this.isInteract=!0),null===t||isNaN(t)||this.decimals&&(t=this.roundNumber(t,this.decimals)),this.changeValue(null===t||isNaN(t)?null:this.strictMode?this.trimValue(t):t),this.isDynamicChange||this.raiseChangeEvent(e)},e.prototype.updateCurrency=function(t,e){r(t,e,this.cultureInfo),this.updateValue(this.value)},e.prototype.changeValue=function(t){if(t||0===t){var e=this.getNumberOfDecimals(t);this.setProperties({value:this.roundNumber(t,e)},!0)}else t=null,this.setProperties({value:t},!0);this.modifyText(),this.strictMode||this.validateState()},e.prototype.modifyText=function(){if(this.value||0===this.value){var t=this.formatNumber(),e=this.isFocused?t:this.instance.getNumberFormat(this.cultureInfo)(this.value);this.setElementValue(e),L(this.element,{"aria-valuenow":t}),this.hiddenInput.value=this.value.toString(),null!==this.value&&this.serverDecimalSeparator&&(this.hiddenInput.value=this.hiddenInput.value.replace(".",this.serverDecimalSeparator))}else this.setElementValue(""),this.element.removeAttribute("aria-valuenow"),this.hiddenInput.value=null},e.prototype.setElementValue=function(t,e){zx.setValue(t,e||this.element,this.floatLabelType,this.showClearButton)},e.prototype.validateState=function(){this.isValidState=!0,(this.value||0===this.value)&&(this.isValidState=!(this.value>this.max||this.value<this.min)),this.checkErrorClass()},e.prototype.getNumberOfDecimals=function(t){var e,i=new RegExp("[eE][-+]?([0-9]+)"),n=t.toString();if(i.test(n)){var r=i.exec(n);h(r)||(n=t.toFixed(Math.min(parseInt(r[1],10),20)))}var o=n.split(".")[1];return e=o&&o.length?o.length:0,null!==this.decimals&&(e=e<this.decimals?e:this.decimals),e},e.prototype.formatNumber=function(){var t=this.getNumberOfDecimals(this.value);return this.instance.getNumberFormat({maximumFractionDigits:t,minimumFractionDigits:t,useGrouping:!1})(this.value)},e.prototype.trimValue=function(t){return t>this.max?this.max:t<this.min?this.min:t},e.prototype.roundNumber=function(t,e){var i=t,n=e||0,r=i.toString().split("e"),o=(i=Math.round(Number(r[0]+"e"+(r[1]?Number(r[1])+n:n)))).toString().split("e");return i=Number(o[0]+"e"+(o[1]?Number(o[1])-n:-n)),Number(i.toFixed(n))},e.prototype.cancelEvent=function(t){return t.preventDefault(),!1},e.prototype.keyPressHandler=function(t){if(!this.enabled||this.readonly)return!0;if(!Np.isDevice&&"11.0"===Np.info.version&&13===t.keyCode){var e=this.instance.getNumberParser({format:"n"})(this.element.value);return this.updateValue(e,t),!0}if(0===t.which||t.metaKey||t.ctrlKey||8===t.keyCode||13===t.keyCode)return!0;var i=String.fromCharCode(t.which),r=n("decimal",S(this.locale)),o="NumpadDecimal"===t.code&&i!==r;o&&(i=r);var s=this.element.value;if(s=s.substring(0,this.element.selectionStart)+i+s.substring(this.element.selectionEnd),this.numericRegex().test(s)){if(o){var a=this.element.selectionStart+1;this.element.value=s,this.element.setSelectionRange(a,a),t.preventDefault(),t.stopPropagation()}return!0}return t.preventDefault(),t.stopPropagation(),!1},e.prototype.numericRegex=function(){var t=n("decimal",S(this.locale)),e="*";return"."===t&&(t="\\"+t),0===this.decimals&&this.validateDecimalOnType?jC:(this.decimals&&this.validateDecimalOnType&&(e="{0,"+this.decimals+"}"),new RegExp("^(-)?(((\\d+("+t+"\\d"+e+")?)|("+t+"\\d"+e+")))?$"))},e.prototype.mouseWheel=function(t){t.preventDefault();var e,i=t;i.wheelDelta?e=i.wheelDelta/120:i.detail&&(e=-i.detail/3),e>0?this.action(zC,t):e<0&&this.action(kC,t),this.cancelEvent(t)},e.prototype.focusHandler=function(t){var e=this;if(clearTimeout(RC),this.focusEventArgs={event:t,value:this.value,container:this.container},this.trigger("focus",this.focusEventArgs),this.enabled&&!this.readonly){if(this.isFocused=!0,x([this.container],"e-error"),this.prevValue=this.value,this.value||0===this.value){var i=this.formatNumber();if(this.setElementValue(i),!this.isPrevFocused)if(Np.isDevice||"11.0"!==Np.info.version){var n=Np.isDevice&&Np.isIos?600:0;RC=setTimeout(function(){e.element.setSelectionRange(0,i.length)},n)}else this.element.setSelectionRange(0,i.length)}Np.isDevice||Ep.add(this.element,"mousewheel DOMMouseScroll",this.mouseWheel,this)}},e.prototype.focusOutHandler=function(t){var e=this;if(this.blurEventArgs={event:t,value:this.value,container:this.container},this.trigger("blur",this.blurEventArgs),this.enabled&&!this.readonly){if(this.isPrevFocused){if(t.preventDefault(),Np.isDevice){var i=this.element.value;this.element.focus(),this.isPrevFocused=!1;var n=this.element;setTimeout(function(){e.setElementValue(i,n)},200)}}else{this.isFocused=!1,this.element.value.length||this.setProperties({value:null},!0);var r=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(r),Np.isDevice||Ep.remove(this.element,"mousewheel DOMMouseScroll",this.mouseWheel)}if(j(this.element,"form")){var o=this.element.nextElementSibling,s=document.createEvent("FocusEvent");s.initEvent("focusout",!1,!0),o.dispatchEvent(s)}}},e.prototype.mouseDownOnSpinner=function(t){var e=this;if(this.isFocused&&(this.isPrevFocused=!0,t.preventDefault()),this.getElementData(t)){this.getElementData(t);var i=t.currentTarget,n=i.classList.contains("e-spin-up")?zC:kC;Ep.add(i,"mouseleave",this.mouseUpClick,this),this.timeOut=setInterval(function(){e.isCalled=!0,e.action(n,t)},150),Ep.add(document,"mouseup",this.mouseUpClick,this)}},e.prototype.touchMoveOnSpinner=function(t){var e;if("touchmove"===t.type){var i=t.touches;e=i.length&&document.elementFromPoint(i[0].pageX,i[0].pageY)}else e=document.elementFromPoint(t.clientX,t.clientY);e.classList.contains(AC)||clearInterval(this.timeOut)},e.prototype.mouseUpOnSpinner=function(t){if(this.prevValue=this.value,this.isPrevFocused&&(this.element.focus(),Np.isDevice||(this.isPrevFocused=!1)),Np.isDevice||t.preventDefault(),this.getElementData(t)){var e=t.currentTarget,i=e.classList.contains("e-spin-up")?zC:kC;Ep.remove(e,"mouseleave",this.mouseUpClick),this.isCalled||this.action(i,t),this.isCalled=!1,Ep.remove(document,"mouseup",this.mouseUpClick);if(j(this.element,"form")){var n=this.element.nextElementSibling,r=document.createEvent("KeyboardEvent");r.initEvent("keyup",!1,!0),n.dispatchEvent(r)}}},e.prototype.getElementData=function(t){return!(t.which&&3===t.which||t.button&&2===t.button||!this.enabled||this.readonly)&&(clearInterval(this.timeOut),!0)},e.prototype.floatLabelTypeUpdate=function(){zx.removeFloating(this.inputWrapper);var t=this.hiddenInput;this.hiddenInput.remove(),zx.addFloating(this.element,this.floatLabelType,this.placeholder,this.createElement),this.container.insertBefore(t,this.container.childNodes[1])},e.prototype.mouseUpClick=function(t){t.stopPropagation(),clearInterval(this.timeOut),this.isCalled=!1,Ep.remove(this.spinUp,"mouseleave",this.mouseUpClick),Ep.remove(this.spinDown,"mouseleave",this.mouseUpClick)},e.prototype.increment=function(t){void 0===t&&(t=this.step),this.isInteract=!1,this.changeValue(this.performAction(this.value,t,zC)),this.raiseChangeEvent()},e.prototype.decrement=function(t){void 0===t&&(t=this.step),this.isInteract=!1,this.changeValue(this.performAction(this.value,t,kC)),this.raiseChangeEvent()},e.prototype.destroy=function(){this.unwireEvents(),T(this.hiddenInput),this.showSpinButton&&(this.unwireSpinBtnEvents(),T(this.spinUp),T(this.spinDown));for(var e=["aria-labelledby","role","autocomplete","aria-readonly","aria-disabled","autocapitalize","spellcheck","aria-autocomplete","tabindex","aria-valuemin","aria-valuemax","aria-valuenow","aria-invalid"],i=0;i<e.length;i++)this.element.removeAttribute(e[i]);this.element.classList.remove("e-input"),this.container.insertAdjacentElement("afterend",this.element),T(this.container),this.spinUp=null,this.spinDown=null,this.container=null,this.hiddenInput=null,this.changeEventArgs=null,this.blurEventArgs=null,this.focusEventArgs=null,this.inputWrapper=null,zx.destroy(),t.prototype.destroy.call(this)},e.prototype.getText=function(){return this.element.value},e.prototype.focusIn=function(){document.activeElement!==this.element&&this.enabled&&(this.element.focus(),I([this.container],["e-input-focus"]))},e.prototype.focusOut=function(){document.activeElement===this.element&&this.enabled&&(this.element.blur(),x([this.container],["e-input-focus"]))},e.prototype.getPersistData=function(){return this.addOnPersist(["value"])},e.prototype.onPropertyChanged=function(t,e){for(var i=0,o=Object.keys(t);i<o.length;i++){var s=o[i];switch(s){case"width":this.setElementWidth(t.width),zx.calculateWidth(this.element,this.container);break;case"cssClass":this.updateCssClass(t.cssClass,e.cssClass);break;case"enabled":zx.setEnabled(t.enabled,this.element),this.bindClearEvent();break;case"enableRtl":zx.setEnableRtl(t.enableRtl,[this.container]);break;case"readonly":zx.setReadonly(t.readonly,this.element),this.readonly?L(this.element,{"aria-readonly":"true"}):this.element.removeAttribute("aria-readonly");break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.updateDataAttribute(!0),this.checkAttributes(!0),zx.validateInputType(this.container,this.element);break;case"placeholder":zx.setPlaceholder(t.placeholder,this.element),zx.calculateWidth(this.element,this.container);break;case"step":this.step=t.step,this.validateStep();break;case"showSpinButton":this.updateSpinButton(t);break;case"showClearButton":this.updateClearButton(t);break;case"floatLabelType":this.floatLabelType=t.floatLabelType,this.floatLabelTypeUpdate();break;case"value":this.isDynamicChange=(this.isAngular||this.isVue)&&this.preventChange,this.updateValue(t.value),this.isDynamicChange&&(this.preventChange=!1,this.isDynamicChange=!1);break;case"min":case"max":r(s,n(s,t),this),this.validateMinMax(),this.updateValue(this.value);break;case"strictMode":this.strictMode=t.strictMode,this.updateValue(this.value),this.validateState();break;case"locale":this.initCultureFunc(),this.l10n.setLocale(this.locale),this.setSpinButton(),this.updatePlaceholder(),zx.setPlaceholder(this.placeholder,this.element),this.updateValue(this.value);break;case"currency":var a=n(s,t);this.setProperties({currencyCode:a},!0),this.updateCurrency(s,a);break;case"currencyCode":var l=n(s,t);this.setProperties({currency:l},!0),this.updateCurrency("currency",l);break;case"format":r(s,n(s,t),this),this.initCultureInfo(),this.updateValue(this.value);break;case"decimals":this.decimals=t.decimals,this.updateValue(this.value)}}},e.prototype.updateClearButton=function(t){zx.setClearButton(t.showClearButton,this.element,this.inputWrapper,void 0,this.createElement),this.bindClearEvent()},e.prototype.updateSpinButton=function(t){t.showSpinButton?this.spinBtnCreation():(T(this.spinUp),T(this.spinDown))},e.prototype.getModuleName=function(){return"numerictextbox"},LC([W("")],e.prototype,"cssClass",void 0),LC([W(null)],e.prototype,"value",void 0),LC([W(-Number.MAX_VALUE)],e.prototype,"min",void 0),LC([W(Number.MAX_VALUE)],e.prototype,"max",void 0),LC([W(1)],e.prototype,"step",void 0),LC([W(null)],e.prototype,"width",void 0),LC([W(null)],e.prototype,"placeholder",void 0),LC([W({})],e.prototype,"htmlAttributes",void 0),LC([W(!0)],e.prototype,"showSpinButton",void 0),LC([W(!1)],e.prototype,"readonly",void 0),LC([W(!0)],e.prototype,"enabled",void 0),LC([W(!1)],e.prototype,"showClearButton",void 0),LC([W(!1)],e.prototype,"enablePersistence",void 0),LC([W("n2")],e.prototype,"format",void 0),LC([W(null)],e.prototype,"decimals",void 0),LC([W(null)],e.prototype,"currency",void 0),LC([W(null)],e.prototype,"currencyCode",void 0),LC([W(!0)],e.prototype,"strictMode",void 0),LC([W(!1)],e.prototype,"validateDecimalOnType",void 0),LC([W("Never")],e.prototype,"floatLabelType",void 0),LC([Z()],e.prototype,"created",void 0),LC([Z()],e.prototype,"destroyed",void 0),LC([Z()],e.prototype,"change",void 0),LC([Z()],e.prototype,"focus",void 0),LC([Z()],e.prototype,"blur",void 0),e=LC([$],e)}(Kp),HC="e-error",UC="e-input-group",VC="e-float-input",_C="e-label-top",FC="e-label-bottom",YC={0:"[0-9]",9:"[0-9 ]","#":"[0-9 +-]",L:"[A-Za-z]","?":"[A-Za-z ]","&":"[^ ]+",C:"[^]+",A:"[A-Za-z0-9]",a:"[A-Za-z0-9 ]"},WC=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),QC=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},XC=["title","style","class"],qC=(function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.initInputValue="",n.isAngular=!1,n.preventChange=!1,n.isClicked=!1,n.maskOptions=e,n}WC(e,t),e.prototype.getModuleName=function(){return"maskedtextbox"},e.prototype.preRender=function(){this.promptMask="",this.hiddenMask="",this.escapeMaskValue="",this.regExpCollec=YC,this.customRegExpCollec=[],this.undoCollec=[],this.redoCollec=[],this.changeEventArgs={},this.focusEventArgs={},this.blurEventArgs={},this.maskKeyPress=!1,this.isFocus=!1,this.isInitial=!1,this.isIosInvalid=!1;var t=n("ej2_instances",this.element);if(this.cloneElement=this.element.cloneNode(!0),x([this.cloneElement],["e-control","e-maskedtextbox","e-lib"]),this.angularTagName=null,this.formElement=j(this.element,"form"),"EJS-MASKEDTEXTBOX"===this.element.tagName){this.angularTagName=this.element.tagName;for(var e=this.createElement("input"),i=0;i<this.element.attributes.length;i++)e.setAttribute(this.element.attributes[i].nodeName,this.element.attributes[i].nodeValue),e.innerHTML=this.element.innerHTML;this.element.hasAttribute("id")&&this.element.removeAttribute("id"),this.element.classList.remove("e-control","e-maskedtextbox"),this.element.classList.add("e-mask-container"),this.element.appendChild(e),this.element=e,r("ej2_instances",t,this.element)}this.updateHTMLAttrToElement(),this.checkHtmlAttributes(!1),this.formElement&&(this.initInputValue=this.value)},e.prototype.getPersistData=function(){return this.addOnPersist(["value"])},e.prototype.render=function(){"input"===this.element.tagName.toLowerCase()&&("Never"===this.floatLabelType&&I([this.element],"e-input"),this.createWrapper(),this.updateHTMLAttrToWrapper(),""===this.element.name&&this.element.setAttribute("name",this.element.id),this.isInitial=!0,this.resetMaskedTextBox(),this.isInitial=!1,this.setMaskPlaceholder(!0,!1),this.setWidth(this.width),this.preEleVal=this.element.value,Np.isDevice||"11.0"!==Np.info.version&&"edge"!==Np.info.name||this.element.blur(),Np.isDevice&&Np.isIos&&this.element.blur(),(this.element.getAttribute("value")||this.value)&&this.element.setAttribute("value",this.element.value),!h(j(this.element,"fieldset"))&&j(this.element,"fieldset").disabled&&(this.enabled=!1),this.renderComplete())},e.prototype.updateHTMLAttrToElement=function(){if(!h(this.htmlAttributes))for(var t=0,e=Object.keys(this.htmlAttributes);t<e.length;t++){var i=e[t];XC.indexOf(i)<0&&this.element.setAttribute(i,this.htmlAttributes[""+i])}},e.prototype.updateCssClass=function(t,e){zx.setCssClass(this.getValidClassList(t),[this.inputObj.container],this.getValidClassList(e))},e.prototype.getValidClassList=function(t){var e=t;return h(t)||""===t||(e=t.replace(/\s+/g," ").trim()),e},e.prototype.updateHTMLAttrToWrapper=function(){if(!h(this.htmlAttributes))for(var t=0,e=Object.keys(this.htmlAttributes);t<e.length;t++){var i=e[t];if(XC.indexOf(i)>-1)if("class"===i){var n=this.htmlAttributes[""+i].replace(/\s+/g," ").trim();""!==n&&I([this.inputObj.container],n.split(" "))}else if("style"===i){var r=this.inputObj.container.getAttribute(i);r=h(r)?this.htmlAttributes[""+i]:r+this.htmlAttributes[""+i],this.inputObj.container.setAttribute(i,r)}else this.inputObj.container.setAttribute(i,this.htmlAttributes[""+i])}},e.prototype.resetMaskedTextBox=function(){this.promptMask="",this.hiddenMask="",this.escapeMaskValue="",this.customRegExpCollec=[],this.undoCollec=[],this.redoCollec=[],this.promptChar.length>1&&(this.promptChar=this.promptChar[0]),function(){if(L(this.element,{role:"textbox",autocomplete:"off",autocapitalize:"off",spellcheck:"false","aria-live":"assertive"}),this.mask){for(var t=this.mask.split("]"),e=0;e<t.length;e++)if("\\"===t[e][t[e].length-1]){t[e]=t[e]+"]";for(var i=t[e].split("["),n=0;n<i.length;n++)"\\"===i[n][i[n].length-1]&&(i[n]=i[n]+"["),Va.call(this,i[n])}else if((i=t[e].split("[")).length>1){var r=!1;for(n=0;n<i.length;n++)"\\"===i[n]?(this.customRegExpCollec.push("["),this.hiddenMask+=i[n]+"["):""===i[n]?r=!0:""!==i[n]&&r||n===i.length-1?(this.customRegExpCollec.push("["+i[n]+"]"),this.hiddenMask+=this.promptChar,r=!1):Va.call(this,i[n])}else Va.call(this,i[0]);if(this.escapeMaskValue=this.hiddenMask,this.promptMask=this.hiddenMask.replace(/[09?LCAa#&]/g,this.promptChar),!h(this.customCharacters))for(e=0;e<this.promptMask.length;e++)h(this.customCharacters[this.promptMask[e]])||(this.promptMask=this.promptMask.replace(new RegExp(this.promptMask[e],"g"),this.promptChar));var o=0;if(this.hiddenMask.match(new RegExp(/\\/)))for(e=0;e<this.hiddenMask.length;e++)n=0,e>=1&&(n=e),n-=o=this.hiddenMask.length-this.promptMask.length,e>0&&"\\"!==this.hiddenMask[e-1]&&(">"===this.hiddenMask[e]||"<"===this.hiddenMask[e]||"|"===this.hiddenMask[e])&&(this.promptMask=this.promptMask.substring(0,n)+this.promptMask.substring(e+1-o,this.promptMask.length),this.escapeMaskValue=this.escapeMaskValue.substring(0,n)+this.escapeMaskValue.substring(e+1-o,this.escapeMaskValue.length)),"\\"===this.hiddenMask[e]&&(this.promptMask=this.promptMask.substring(0,n)+this.hiddenMask[e+1]+this.promptMask.substring(e+2-o,this.promptMask.length),this.escapeMaskValue=this.escapeMaskValue.substring(0,n)+this.escapeMaskValue[e+1]+this.escapeMaskValue.substring(e+2-o,this.escapeMaskValue.length));else this.promptMask=this.promptMask.replace(/[>|<]/g,""),this.escapeMaskValue=this.hiddenMask.replace(/[>|<]/g,"");L(this.element,{"aria-invalid":"false"})}}.call(this),function(){hl.call(this,this.promptMask),ll.call(this,this.value)}.call(this),(null===this.mask||""===this.mask&&void 0!==this.value)&&hl.call(this,this.value);var t=Ua.call(this,this.element);this.prevValue=t,this.value=t,this.isInitial||Pa.call(this),function(){Ep.add(this.element,"keydown",$a,this),Ep.add(this.element,"keypress",tl,this),Ep.add(this.element,"keyup",il,this),Ep.add(this.element,"input",Za,this),Ep.add(this.element,"focus",Ya,this),Ep.add(this.element,"blur",Qa,this),Ep.add(this.element,"paste",Xa,this),Ep.add(this.element,"cut",qa,this),Ep.add(this.element,"drop",Ga,this),Ep.add(this.element,"mousedown",_a,this),Ep.add(this.element,"mouseup",Fa,this),this.enabled&&(Ra.call(this),this.formElement&&Ep.add(this.formElement,"reset",Ha,this))}.call(this)},e.prototype.setMaskPlaceholder=function(t,e){(e||this.placeholder)&&(zx.setPlaceholder(this.placeholder,this.element),(this.element.value===this.promptMask&&t&&"Always"!==this.floatLabelType||this.element.value===this.promptMask&&"Never"===this.floatLabelType)&&hl.call(this,""))},e.prototype.setWidth=function(t){if(!h(t))if("number"==typeof t)this.inputObj.container.style.width=m(t),this.element.style.width=m(t);else if("string"==typeof t){var e=t.match(/px|%|em/)?t:m(t);this.inputObj.container.style.width=e,this.element.style.width=e}},e.prototype.checkHtmlAttributes=function(t){for(var e=0,i=t?h(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["placeholder","disabled","value","readonly"];e<i.length;e++){var n=i[e];if(!h(this.element.getAttribute(n)))switch(n){case"placeholder":(h(this.maskOptions)||void 0===this.maskOptions.placeholder||t)&&this.setProperties({placeholder:this.element.placeholder},!t);break;case"disabled":if(h(this.maskOptions)||void 0===this.maskOptions.enabled||t){var r="disabled"!==this.element.getAttribute(n)&&""!==this.element.getAttribute(n)&&"true"!==this.element.getAttribute(n);this.setProperties({enabled:r},!t)}break;case"value":(h(this.maskOptions)||void 0===this.maskOptions.value||t)&&this.setProperties({value:this.element.value},!t);break;case"readonly":if(h(this.maskOptions)||void 0===this.maskOptions.readonly||t){var o="readonly"===this.element.getAttribute(n)||""===this.element.getAttribute(n)||"true"===this.element.getAttribute(n);this.setProperties({readonly:o},!t)}}}},e.prototype.createWrapper=function(){var t=this.cssClass;h(this.cssClass)||""===this.cssClass||(t=this.getValidClassList(this.cssClass)),this.inputObj=zx.createInput({element:this.element,floatLabelType:this.floatLabelType,properties:{enableRtl:this.enableRtl,cssClass:t,enabled:this.enabled,readonly:this.readonly,placeholder:this.placeholder,showClearButton:this.showClearButton}},this.createElement),this.inputObj.container.setAttribute("class","e-control-wrapper e-mask "+this.inputObj.container.getAttribute("class"))},e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"value":ll.call(this,this.value),this.placeholder&&this.setMaskPlaceholder(!1,!1);break;case"placeholder":this.setMaskPlaceholder(!0,!0);break;case"width":this.setWidth(t.width),zx.calculateWidth(this.element,this.inputObj.container);break;case"cssClass":this.updateCssClass(t.cssClass,e.cssClass);break;case"enabled":zx.setEnabled(t.enabled,this.element,this.floatLabelType,this.inputObj.container);break;case"readonly":zx.setReadonly(t.readonly,this.element);break;case"enableRtl":zx.setEnableRtl(t.enableRtl,[this.inputObj.container]);break;case"customCharacters":this.customCharacters=t.customCharacters,this.resetMaskedTextBox();break;case"showClearButton":zx.setClearButton(t.showClearButton,this.element,this.inputObj,void 0,this.createElement),Ra.call(this);break;case"floatLabelType":this.floatLabelType=t.floatLabelType,zx.removeFloating(this.inputObj),zx.addFloating(this.element,this.floatLabelType,this.placeholder,this.createElement);break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.checkHtmlAttributes(!0);break;case"mask":var r=this.value;this.mask=t.mask,this.updateValue(r);break;case"promptChar":t.promptChar.length>1&&(t.promptChar=t.promptChar[0]),t.promptChar?this.promptChar=t.promptChar:this.promptChar="_";var o=this.element.value.replace(new RegExp("["+e.promptChar+"]","g"),this.promptChar);this.promptMask===this.element.value&&(o=this.promptMask.replace(new RegExp("["+e.promptChar+"]","g"),this.promptChar)),this.promptMask=this.promptMask.replace(new RegExp("["+e.promptChar+"]","g"),this.promptChar),this.undoCollec=this.redoCollec=[],hl.call(this,o)}}this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange},e.prototype.updateValue=function(t){this.resetMaskedTextBox(),ll.call(this,t)},e.prototype.getMaskedValue=function(){return function(t){return t.value}.call(this,this.element)},e.prototype.focusIn=function(){document.activeElement!==this.element&&this.enabled&&(this.element.focus(),I([this.inputObj.container],["e-input-focus"]))},e.prototype.focusOut=function(){document.activeElement===this.element&&this.enabled&&(this.element.blur(),x([this.inputObj.container],["e-input-focus"]))},e.prototype.destroy=function(){Pa.call(this);for(var e=["aria-labelledby","role","autocomplete","aria-readonly","aria-disabled","autocapitalize","spellcheck","aria-autocomplete","aria-live","aria-invalid"],i=0;i<e.length;i++)this.element.removeAttribute(e[i]);this.element.classList.remove("e-input"),this.inputObj&&(this.inputObj.container.insertAdjacentElement("afterend",this.element),T(this.inputObj.container)),this.blurEventArgs=null,zx.destroy(),this.changeEventArgs=null,this.inputObj=null,t.prototype.destroy.call(this)},QC([W(null)],e.prototype,"cssClass",void 0),QC([W(null)],e.prototype,"width",void 0),QC([W(null)],e.prototype,"placeholder",void 0),QC([W("Never")],e.prototype,"floatLabelType",void 0),QC([W({})],e.prototype,"htmlAttributes",void 0),QC([W(!0)],e.prototype,"enabled",void 0),QC([W(!1)],e.prototype,"readonly",void 0),QC([W(!1)],e.prototype,"showClearButton",void 0),QC([W(!1)],e.prototype,"enablePersistence",void 0),QC([W(null)],e.prototype,"mask",void 0),QC([W("_")],e.prototype,"promptChar",void 0),QC([W(null)],e.prototype,"value",void 0),QC([W(null)],e.prototype,"customCharacters",void 0),QC([Z()],e.prototype,"created",void 0),QC([Z()],e.prototype,"destroyed",void 0),QC([Z()],e.prototype,"change",void 0),QC([Z()],e.prototype,"focus",void 0),QC([Z()],e.prototype,"blur",void 0),e=QC([$],e)}(Kp),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),GC=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},ZC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return qC(e,t),GC([W("None")],e.prototype,"placement",void 0),GC([W(10)],e.prototype,"largeStep",void 0),GC([W(1)],e.prototype,"smallStep",void 0),GC([W(!1)],e.prototype,"showSmallTicks",void 0),GC([W(null)],e.prototype,"format",void 0),e}(Rp),$C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return qC(e,t),GC([W(null)],e.prototype,"color",void 0),GC([W(null)],e.prototype,"start",void 0),GC([W(null)],e.prototype,"end",void 0),e}(Rp),KC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return qC(e,t),GC([W(!1)],e.prototype,"enabled",void 0),GC([W(null)],e.prototype,"minStart",void 0),GC([W(null)],e.prototype,"minEnd",void 0),GC([W(null)],e.prototype,"maxStart",void 0),GC([W(null)],e.prototype,"maxEnd",void 0),GC([W(!1)],e.prototype,"startHandleFixed",void 0),GC([W(!1)],e.prototype,"endHandleFixed",void 0),e}(Rp),JC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return qC(e,t),GC([W("")],e.prototype,"cssClass",void 0),GC([W("Before")],e.prototype,"placement",void 0),GC([W("Focus")],e.prototype,"showOn",void 0),GC([W(!1)],e.prototype,"isVisible",void 0),GC([W(null)],e.prototype,"format",void 0),e}(Rp),tN="e-slider",eN="e-rtl",iN="e-slider-input",nN="e-control-wrapper",rN="e-handle",oN="e-range",sN="e-slider-button",aN="e-first-button",lN="e-second-button",hN="e-scale",cN="e-tick",dN="e-large",pN="e-tick-value",uN="e-slider-tooltip",gN="e-slider-hover",mN="e-handle-first",fN="e-handle-second",vN="e-disabled",yN="e-slider-container",bN="e-slider-horizontal-before",SN="e-slider-horizontal-after",wN="e-slider-vertical-before",IN="e-slider-vertical-after",xN="e-material-tooltip-open",MN="e-tooltip-active",CN="e-material-slider",NN="e-slider-track",EN="e-slider-horizantal-color",DN="e-slider-vertical-color",TN="e-handle-focused",ON="e-vertical",LN="e-horizontal",AN="e-handle-start",zN="e-material-tooltip-start",kN="e-tab-handle",jN="e-button-icon",PN="e-small-size",RN="e-tick-pos",BN="e-first-tick",HN="e-last-tick",UN="e-slider-btn",VN="e-tab-track",_N="e-tab-range",FN="e-handle-active",YN="e-material-handle",WN="e-material-range",QN="e-material-default",XN="e-material-tooltip-show",qN="e-material-tooltip-hide",GN="e-read-only",ZN="e-limits",$N="e-limit-bar",KN="e-limit-first",JN="e-limit-second",tE="e-drag-horizontal",eE="e-drag-vertical",iE=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.horDir="left",n.verDir="bottom",n.transition={handle:"left .4s cubic-bezier(.25, .8, .25, 1), right .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1) , bottom .4s cubic-bezier(.25, .8, .25, 1)",rangeBar:"all .4s cubic-bezier(.25, .8, .25, 1)"},n.transitionOnMaterialTooltip={handle:"left 1ms ease-out, right 1ms ease-out, bottom 1ms ease-out, top 1ms ease-out",rangeBar:"left 1ms ease-out, right 1ms ease-out, bottom 1ms ease-out, width 1ms ease-out, height 1ms ease-out"},n.scaleTransform="transform .4s cubic-bezier(.25, .8, .25, 1)",n.customAriaText=null,n.drag=!0,n.isDragComplete=!1,n.initialTooltip=!0,n}return qC(e,t),e.prototype.preRender=function(){this.l10n=new uu("slider",{incrementTitle:"Increase",decrementTitle:"Decrease"},this.locale),this.isElementFocused=!1,this.tickElementCollection=[],this.tooltipFormatInfo={},this.ticksFormatInfo={},this.initCultureInfo(),this.initCultureFunc(),this.formChecker()},e.prototype.formChecker=function(){var t=j(this.element,"form");t?(this.isForm=!0,h(this.formResetValue)||this.setProperties({value:this.formResetValue},!0),this.formResetValue=this.value,"Range"!==this.type||!h(this.formResetValue)&&"object"==typeof this.formResetValue?h(this.formResetValue)&&(this.formResetValue=parseFloat(m(this.min))):this.formResetValue=[parseFloat(m(this.min)),parseFloat(m(this.max))],this.formElement=t):this.isForm=!1},e.prototype.initCultureFunc=function(){this.internationalization=new hp(this.locale)},e.prototype.initCultureInfo=function(){this.tooltipFormatInfo.format=h(this.tooltip.format)?null:this.tooltip.format,this.ticksFormatInfo.format=h(this.ticks.format)?null:this.ticks.format},e.prototype.formatString=function(t,e){var i=null,n=null;if(t||0===t){i=this.formatNumber(t);var r=this.numberOfDecimals(t);n=this.internationalization.getNumberFormat(e)(this.makeRoundNumber(t,r))}return{elementVal:i,formatString:n}},e.prototype.formatNumber=function(t){var e=this.numberOfDecimals(t);return this.internationalization.getNumberFormat({maximumFractionDigits:e,minimumFractionDigits:e,useGrouping:!1})(t)},e.prototype.numberOfDecimals=function(t){var e=t.toString().split(".")[1];return e&&e.length?e.length:0},e.prototype.makeRoundNumber=function(t,e){var i=e||0;return Number(t.toFixed(i))},e.prototype.fractionalToInteger=function(t){t=0===this.numberOfDecimals(t)?Number(t).toFixed(this.noOfDecimals):t;for(var e=1,i=0;i<this.noOfDecimals;i++)e*=10;return t=Number((t*e).toFixed(0))},e.prototype.render=function(){var t=this;this.initialize(),this.initRender(),this.wireEvents(),this.setZindex(),this.renderComplete(),"EJS-SLIDER"===this.element.tagName&&"none"==this.getTheme(this.sliderContainer)&&setTimeout(function(){t.refresh()},0)},e.prototype.initialize=function(){I([this.element],tN),this.setCSSClass()},e.prototype.setElementWidth=function(t){h(t)||("number"==typeof t?this.sliderContainer.style.width=m(t):"string"==typeof t&&(this.sliderContainer.style.width=t.match(/px|%|em/)?t:m(t)))},e.prototype.setCSSClass=function(t){t&&x([this.element],t.split(" ")),this.cssClass&&I([this.element],this.cssClass.split(" "))},e.prototype.setEnabled=function(){this.enabled?(x([this.sliderContainer],[vN]),this.tooltip.isVisible&&this.tooltipElement&&"Always"===this.tooltip.showOn&&this.tooltipElement.classList.remove(vN),this.wireEvents()):(I([this.sliderContainer],[vN]),this.tooltip.isVisible&&this.tooltipElement&&"Always"===this.tooltip.showOn&&this.tooltipElement.classList.add(vN),this.unwireEvents())},e.prototype.getTheme=function(t){return window.getComputedStyle(t,":after").getPropertyValue("content").replace(/['"]+/g,"")},e.prototype.initRender=function(){this.sliderContainer=this.createElement("div",{className:yN+" "+nN}),this.element.parentNode.insertBefore(this.sliderContainer,this.element),this.sliderContainer.appendChild(this.element),this.sliderTrack=this.createElement("div",{className:NN}),this.element.appendChild(this.sliderTrack),this.setElementWidth(this.width),this.element.tabIndex=-1,this.getThemeInitialization(),this.setHandler(),this.createRangeBar(),this.limits.enabled&&this.createLimitBar(),this.setOrientClass(),this.hiddenInput=this.createElement("input",{attrs:{type:"hidden",value:h(this.value)?this.min.toString():this.value.toString(),name:this.element.getAttribute("name")||this.element.getAttribute("id")||"_"+(1e3*Math.random()).toFixed(0)+"slider",class:iN}}),this.hiddenInput.tabIndex=-1,this.sliderContainer.appendChild(this.hiddenInput),this.showButtons&&this.setButtons(),this.setEnableRTL(),"Range"===this.type?this.rangeValueUpdate():this.value=h(this.value)?parseFloat(m(this.min.toString())):this.value,this.previousVal="Range"!==this.type?this.checkHandleValue(parseFloat(m(this.value.toString()))):[this.checkHandleValue(parseFloat(m(this.value[0].toString()))),this.checkHandleValue(parseFloat(m(this.value[1].toString())))],this.previousChanged=this.previousVal,h(this.element.hasAttribute("name"))||this.element.removeAttribute("name"),this.setValue(),this.limits.enabled&&this.setLimitBar(),"None"!==this.ticks.placement&&this.renderScale(),this.tooltip.isVisible&&this.renderTooltip(),this.enabled?x([this.sliderContainer],[vN]):I([this.sliderContainer],[vN]),this.readonly?I([this.sliderContainer],[GN]):x([this.sliderContainer],[GN])},e.prototype.getThemeInitialization=function(){this.isMaterial="material"===this.getTheme(this.sliderContainer)||"material-dark"===this.getTheme(this.sliderContainer),this.isBootstrap="bootstrap"===this.getTheme(this.sliderContainer)||"bootstrap-dark"===this.getTheme(this.sliderContainer),this.isBootstrap4="bootstrap4"===this.getTheme(this.sliderContainer),this.isTailwind="tailwind"===this.getTheme(this.sliderContainer)||"tailwind-dark"===this.getTheme(this.sliderContainer),this.isBootstrap5="bootstrap5"===this.getTheme(this.sliderContainer),this.isFluent="FluentUI"===this.getTheme(this.sliderContainer),this.isMaterialTooltip=this.isMaterial&&"Range"!==this.type&&this.tooltip.isVisible},e.prototype.createRangeBar=function(){"Default"!==this.type&&(this.rangeBar=this.createElement("div",{attrs:{class:oN}}),this.element.appendChild(this.rangeBar),this.drag&&"Range"===this.type&&("Horizontal"===this.orientation?this.rangeBar.classList.add(tE):this.rangeBar.classList.add(eE)))},e.prototype.createLimitBar=function(){var t="Range"!==this.type?$N:KN;t+=" "+ZN,this.limitBarFirst=this.createElement("div",{attrs:{class:t}}),this.element.appendChild(this.limitBarFirst),"Range"===this.type&&(this.limitBarSecond=this.createElement("div",{attrs:{class:JN+" "+ZN}}),this.element.appendChild(this.limitBarSecond))},e.prototype.setOrientClass=function(){"Vertical"!==this.orientation?(this.sliderContainer.classList.remove(ON),this.sliderContainer.classList.add(LN),this.firstHandle.setAttribute("aria-orientation","horizontal"),"Range"===this.type&&this.secondHandle.setAttribute("aria-orientation","horizontal")):(this.sliderContainer.classList.remove(LN),this.sliderContainer.classList.add(ON),this.firstHandle.setAttribute("aria-orientation","vertical"),"Range"===this.type&&this.secondHandle.setAttribute("aria-orientation","vertical"))},e.prototype.setAriaAttributes=function(t){var e=this,i=this.min,n=this.max;if(!h(this.customValues)&&this.customValues.length>0&&(i=this.customValues[0],n=this.customValues[this.customValues.length-1]),"Range"!==this.type)L(t,{"aria-valuemin":i.toString(),"aria-valuemax":n.toString()});else{(!h(this.customValues)&&this.customValues.length>0?[[i.toString(),this.customValues[this.value[1]].toString()],[this.customValues[this.value[0]].toString(),n.toString()]]:[[i.toString(),this.value[1].toString()],[this.value[0].toString(),n.toString()]]).forEach(function(t,i){var n=0===i?e.firstHandle:e.secondHandle;n&&L(n,{"aria-valuemin":t[0],"aria-valuemax":t[1]})})}},e.prototype.createSecondHandle=function(){this.secondHandle=this.createElement("div",{attrs:{class:rN,role:"slider",tabIndex:"0","aria-label":"slider"}}),this.secondHandle.classList.add(fN),this.element.appendChild(this.secondHandle)},e.prototype.createFirstHandle=function(){this.firstHandle=this.createElement("div",{attrs:{class:rN,role:"slider",tabIndex:"0","aria-label":"slider"}}),this.firstHandle.classList.add(mN),this.element.appendChild(this.firstHandle),this.isMaterialTooltip&&(this.materialHandle=this.createElement("div",{attrs:{class:rN+" "+YN}}),this.element.appendChild(this.materialHandle))},e.prototype.wireFirstHandleEvt=function(t){t?(Ep.remove(this.firstHandle,"mousedown touchstart",this.handleFocus),Ep.remove(this.firstHandle,"transitionend",this.transitionEnd),Ep.remove(this.firstHandle,"mouseenter touchenter",this.handleOver),Ep.remove(this.firstHandle,"mouseleave touchend",this.handleLeave)):(Ep.add(this.firstHandle,"mousedown touchstart",this.handleFocus,this),Ep.add(this.firstHandle,"transitionend",this.transitionEnd,this),Ep.add(this.firstHandle,"mouseenter touchenter",this.handleOver,this),Ep.add(this.firstHandle,"mouseleave touchend",this.handleLeave,this))},e.prototype.wireSecondHandleEvt=function(t){t?(Ep.remove(this.secondHandle,"mousedown touchstart",this.handleFocus),Ep.remove(this.secondHandle,"transitionend",this.transitionEnd),Ep.remove(this.secondHandle,"mouseenter touchenter",this.handleOver),Ep.remove(this.secondHandle,"mouseleave touchend",this.handleLeave)):(Ep.add(this.secondHandle,"mousedown touchstart",this.handleFocus,this),Ep.add(this.secondHandle,"transitionend",this.transitionEnd,this),Ep.add(this.secondHandle,"mouseenter touchenter",this.handleOver,this),Ep.add(this.secondHandle,"mouseleave touchend",this.handleLeave,this))},e.prototype.handleStart=function(){"Range"!==this.type&&(this.firstHandle.classList[0===this.handlePos1?"add":"remove"](AN),this.isMaterialTooltip&&(this.materialHandle.classList[0===this.handlePos1?"add":"remove"](AN),this.tooltipElement&&this.tooltipElement.classList[0===this.handlePos1?"add":"remove"](zN)))},e.prototype.transitionEnd=function(t){"transform"!==t.propertyName&&(this.handleStart(),this.enableAnimation||(this.getHandle().style.transition="none"),"Default"!==this.type&&(this.rangeBar.style.transition="none"),this.isMaterial&&this.tooltip.isVisible&&"Default"===this.type&&(this.tooltipElement.style.transition=this.transition.handle),this.tooltipToggle(this.getHandle()),this.closeTooltip())},e.prototype.handleFocusOut=function(){this.firstHandle.classList.contains(TN)&&this.firstHandle.classList.remove(TN),"Range"===this.type&&this.secondHandle.classList.contains(TN)&&this.secondHandle.classList.remove(TN)},e.prototype.handleFocus=function(t){this.focusSliderElement(),this.sliderBarClick(t),t.currentTarget===this.firstHandle?(this.firstHandle.classList.add(TN),this.firstHandle.classList.add(kN)):(this.secondHandle.classList.add(TN),this.secondHandle.classList.add(kN)),Ep.add(document,"mousemove touchmove",this.sliderBarMove,this),Ep.add(document,"mouseup touchend",this.sliderBarUp,this)},e.prototype.handleOver=function(t){this.tooltip.isVisible&&"Hover"===this.tooltip.showOn&&this.tooltipToggle(t.currentTarget),"Default"===this.type&&this.tooltipToggle(this.getHandle())},e.prototype.handleLeave=function(t){!this.tooltip.isVisible||"Hover"!==this.tooltip.showOn||t.currentTarget.classList.contains(TN)||t.currentTarget.classList.contains(kN)||this.closeTooltip()},e.prototype.setHandler=function(){this.min>this.max&&(this.min=this.max),this.createFirstHandle(),"Range"===this.type&&this.createSecondHandle()},e.prototype.setEnableRTL=function(){this.enableRtl&&"Vertical"!==this.orientation?I([this.sliderContainer],eN):x([this.sliderContainer],eN);var t="Vertical"!==this.orientation?this.horDir:this.verDir;this.enableRtl?(this.horDir="right",this.verDir="bottom"):(this.horDir="left",this.verDir="bottom");t!==("Vertical"!==this.orientation?this.horDir:this.verDir)&&"Horizontal"===this.orientation&&(P(this.firstHandle,{right:"",left:"auto"}),"Range"===this.type&&P(this.secondHandle,{top:"",left:"auto"})),this.setBarColor()},e.prototype.tooltipValue=function(){var t,e=this,i={value:this.value,text:""};this.initialTooltip&&(this.initialTooltip=!1,this.setTooltipContent(),i.text=t=this.tooltipObj.content,this.trigger("tooltipChange",i,function(i){e.addTooltipClass(i.text),t!==i.text&&(e.customAriaText=i.text,e.tooltipObj.content=i.text,e.setAriaAttrValue(e.firstHandle),"Range"===e.type&&e.setAriaAttrValue(e.secondHandle))}),this.isMaterialTooltip&&this.setPreviousVal("change",this.value))},e.prototype.setTooltipContent=function(){var t;t=this.formatContent(this.tooltipFormatInfo,!1),this.tooltipObj.content=t},e.prototype.formatContent=function(t,e){var i="",n=this.handleVal1,r=this.handleVal2;return!h(this.customValues)&&this.customValues.length>0&&(n=this.customValues[this.handleVal1],r=this.customValues[this.handleVal2]),e?("Range"===this.type?i=this.enableRtl&&"Vertical"!==this.orientation?h(this.tooltip)||h(this.tooltip.format)?r.toString()+" - "+n.toString():this.formatString(r,t).elementVal+" - "+this.formatString(n,t).elementVal:h(this.tooltip)||h(this.tooltip.format)?n.toString()+" - "+r.toString():this.formatString(n,t).elementVal+" - "+this.formatString(r,t).elementVal:h(n)||(i=h(this.tooltip)||h(this.tooltip.format)?n.toString():this.formatString(n,t).elementVal),i):("Range"===this.type?i=this.enableRtl&&"Vertical"!==this.orientation?h(t.format)?r.toString()+" - "+n.toString():this.formatString(r,t).formatString+" - "+this.formatString(n,t).formatString:h(t.format)?n.toString()+" - "+r.toString():this.formatString(n,t).formatString+" - "+this.formatString(r,t).formatString:h(n)||(i=h(t.format)?n.toString():this.formatString(n,t).formatString),i)},e.prototype.addTooltipClass=function(t){if(this.isMaterialTooltip){var e=t.toString().length;if(this.tooltipElement){i=e>4?{oldCss:QN,newCss:WN}:{oldCss:WN,newCss:QN};this.tooltipElement.classList.remove(i.oldCss),this.tooltipElement.classList.contains(i.newCss)||(this.tooltipElement.classList.add(i.newCss),this.tooltipElement.style.transform=e>4?"scale(1)":this.getTooltipTransformProperties(this.previousTooltipClass).rotate)}else{var i=e>4?WN:QN;this.tooltipObj.cssClass=uN+" "+i}}},e.prototype.tooltipPlacement=function(){return"Horizontal"===this.orientation?"Before"===this.tooltip.placement?"TopCenter":"BottomCenter":"Before"===this.tooltip.placement?"LeftCenter":"RightCenter"},e.prototype.tooltipBeforeOpen=function(t){this.tooltipElement=t.element,this.tooltip.cssClass&&I([this.tooltipElement],this.tooltip.cssClass.split(" ").filter(function(t){return t})),t.target.removeAttribute("aria-describedby"),this.isMaterialTooltip&&(this.tooltipElement.firstElementChild.classList.add(qN),this.handleStart(),this.setTooltipTransform())},e.prototype.tooltipCollision=function(t){if(this.isBootstrap||this.isBootstrap4||this.isMaterial&&!this.isMaterialTooltip){var e=this.isBootstrap4?3:6;switch(t){case"TopCenter":this.tooltipObj.setProperties({offsetY:-e},!1);break;case"BottomCenter":this.tooltipObj.setProperties({offsetY:e},!1);break;case"LeftCenter":this.tooltipObj.setProperties({offsetX:-e},!1);break;case"RightCenter":this.tooltipObj.setProperties({offsetX:e},!1)}}},e.prototype.materialTooltipEventCallBack=function(t){this.sliderBarClick(t),Ep.add(document,"mousemove touchmove",this.sliderBarMove,this),Ep.add(document,"mouseup touchend",this.sliderBarUp,this)},e.prototype.wireMaterialTooltipEvent=function(t){this.isMaterialTooltip&&(t?Ep.remove(this.tooltipElement,"mousedown touchstart",this.materialTooltipEventCallBack):Ep.add(this.tooltipElement,"mousedown touchstart",this.materialTooltipEventCallBack,this))},e.prototype.tooltipPositionCalculation=function(t){var e;switch(t){case"TopCenter":e=bN;break;case"BottomCenter":e=SN;break;case"LeftCenter":e=wN;break;case"RightCenter":e=IN}return e},e.prototype.getTooltipTransformProperties=function(t){var e;if(this.tooltipElement){var i="Horizontal"===this.orientation?this.tooltipElement.clientHeight+14-this.tooltipElement.clientHeight/2:this.tooltipElement.clientWidth+14-this.tooltipElement.clientWidth/2;e="Horizontal"===this.orientation?t===bN?{rotate:"rotate(45deg)",translate:"translateY("+i+"px)"}:{rotate:"rotate(225deg)",translate:"translateY("+-i+"px)"}:t===wN?{rotate:"rotate(-45deg)",translate:"translateX("+i+"px)"}:{rotate:"rotate(-225deg)",translate:"translateX("+-i+"px)"}}return e},e.prototype.openMaterialTooltip=function(){var t=this;if(this.isMaterialTooltip){this.refreshTooltip(this.firstHandle);var e=this.tooltipElement.firstElementChild;e.classList.remove(qN),e.classList.add(XN),this.firstHandle.style.cursor="default",this.tooltipElement.style.transition=this.scaleTransform,this.tooltipElement.classList.add(xN),this.materialHandle.style.transform="scale(0)",e.innerText.length>4?this.tooltipElement.style.transform="scale(1)":this.tooltipElement.style.transform=this.getTooltipTransformProperties(this.previousTooltipClass).rotate,"Default"===this.type?setTimeout(function(){t.tooltipElement.style.transition=t.transition.handle},2500):setTimeout(function(){t.tooltipElement.style.transition="none"},2500)}},e.prototype.closeMaterialTooltip=function(){var t=this;if(this.isMaterialTooltip){var e=this.tooltipElement.firstElementChild;this.tooltipElement.style.transition=this.scaleTransform,e.classList.remove(XN),e.classList.add(qN),this.firstHandle.style.cursor="-webkit-grab",this.firstHandle.style.cursor="grab",this.materialHandle&&(this.materialHandle.style.transform="scale(1)"),this.tooltipElement.classList.remove(xN),this.setTooltipTransform(),this.tooltipTarget=void 0,setTimeout(function(){t.tooltipElement.style.transition="none"},2500)}},e.prototype.checkTooltipPosition=function(t){var e=this.tooltipPositionCalculation(t.collidedPosition);void 0!==this.tooltipCollidedPosition&&this.tooltipCollidedPosition===t.collidedPosition&&t.element.classList.contains(e)||(this.isMaterialTooltip&&(void 0!==e&&(t.element.classList.remove(this.previousTooltipClass),t.element.classList.add(e),this.previousTooltipClass=e),t.element.style.transform&&t.element.classList.contains(xN)&&t.element.firstElementChild.innerText.length<=4&&(t.element.style.transform=this.getTooltipTransformProperties(this.previousTooltipClass).rotate)),this.tooltipCollidedPosition=t.collidedPosition),this.isMaterialTooltip&&this.tooltipElement&&-1!==this.tooltipElement.style.transform.indexOf("translate")&&this.setTooltipTransform()},e.prototype.setTooltipTransform=function(){var t=this.getTooltipTransformProperties(this.previousTooltipClass);this.tooltipElement.firstElementChild.innerText.length>4?this.tooltipElement.style.transform=t.translate+" scale(0.01)":this.tooltipElement.style.transform=t.translate+" "+t.rotate+" scale(0.01)"},e.prototype.renderTooltip=function(){this.tooltipObj=new Ny({showTipPointer:this.isBootstrap||this.isMaterial||this.isBootstrap4||this.isTailwind||this.isBootstrap5||this.isFluent,cssClass:uN,height:this.isMaterial?30:"auto",animation:{open:{effect:"None"},close:{effect:"FadeOut",duration:500}},opensOn:"Custom",beforeOpen:this.tooltipBeforeOpen.bind(this),beforeCollision:this.checkTooltipPosition.bind(this),beforeClose:this.tooltipBeforeClose.bind(this),enableHtmlSanitizer:this.enableHtmlSanitizer}),this.tooltipObj.appendTo(this.firstHandle),this.initializeTooltipProps()},e.prototype.initializeTooltipProps=function(){var t="Auto"===this.tooltip.showOn?"Hover":this.tooltip.showOn;this.setProperties({tooltip:{showOn:t}},!0),this.tooltipObj.position=this.tooltipPlacement(),this.tooltipCollision(this.tooltipObj.position),[this.firstHandle,this.rangeBar,this.secondHandle].forEach(function(t){h(t)||(t.style.transition="none")}),this.isMaterialTooltip&&(this.sliderContainer.classList.add(CN),this.tooltipValue(),this.tooltipObj.animation.close.effect="None",this.tooltipObj.open(this.firstHandle))},e.prototype.tooltipBeforeClose=function(){this.tooltipElement=void 0,this.tooltipCollidedPosition=void 0},e.prototype.setButtons=function(){this.firstBtn=this.createElement("div",{className:sN+" "+aN}),this.firstBtn.appendChild(this.createElement("span",{className:jN})),this.isTailwind&&this.firstBtn.querySelector("span").classList.add("e-icons"),this.firstBtn.tabIndex=-1,this.secondBtn=this.createElement("div",{className:sN+" "+lN}),this.secondBtn.appendChild(this.createElement("span",{className:jN})),this.isTailwind&&this.secondBtn.querySelector("span").classList.add("e-icons"),this.secondBtn.tabIndex=-1,this.sliderContainer.classList.add(UN),this.sliderContainer.appendChild(this.firstBtn),this.sliderContainer.appendChild(this.secondBtn),this.sliderContainer.appendChild(this.element),this.buttonTitle()},e.prototype.buttonTitle=function(){var t=this.enableRtl&&"Vertical"!==this.orientation;this.l10n.setLocale(this.locale);var e=this.l10n.getConstant("decrementTitle"),i=this.l10n.getConstant("incrementTitle");L(t?this.secondBtn:this.firstBtn,{"aria-label":e,title:e}),L(t?this.firstBtn:this.secondBtn,{"aria-label":i,title:i})},e.prototype.buttonFocusOut=function(){this.isMaterial&&this.getHandle().classList.remove("e-large-thumb-size")},e.prototype.repeatButton=function(t){var e,i=this.handleValueUpdate(),n=this.enableRtl&&"Vertical"!==this.orientation;t.target.parentElement.classList.contains(aN)||t.target.classList.contains(aN)?e=n?this.add(i,parseFloat(this.step.toString()),!0):this.add(i,parseFloat(this.step.toString()),!1):(t.target.parentElement.classList.contains(lN)||t.target.classList.contains(lN))&&(e=n?this.add(i,parseFloat(this.step.toString()),!1):this.add(i,parseFloat(this.step.toString()),!0)),this.limits.enabled&&(e=this.getLimitCorrectedValues(e)),e>=this.min&&e<=this.max&&(this.changeHandleValue(e),this.tooltipToggle(this.getHandle()))},e.prototype.repeatHandlerMouse=function(t){t.preventDefault(),"mousedown"!==t.type&&"touchstart"!==t.type||(this.buttonClick(t),this.repeatInterval=setInterval(this.repeatButton.bind(this),180,t))},e.prototype.materialChange=function(){this.getHandle().classList.contains("e-large-thumb-size")||this.getHandle().classList.add("e-large-thumb-size")},e.prototype.focusHandle=function(){this.getHandle().classList.contains(kN)||this.getHandle().classList.add(kN)},e.prototype.repeatHandlerUp=function(t){this.changeEvent("changed",t),this.closeTooltip(),clearInterval(this.repeatInterval),this.getHandle().focus()},e.prototype.customTickCounter=function(t){var e=4;return!h(this.customValues)&&this.customValues.length>0&&(t>4&&(e=3),t>7&&(e=2),t>14&&(e=1),t>28&&(e=0)),e},e.prototype.renderScale=function(){var t="Vertical"===this.orientation?"v":"h";this.noOfDecimals=this.numberOfDecimals(this.step),this.ul=this.createElement("ul",{className:hN+" e-"+t+"-scale "+cN+"-"+this.ticks.placement.toLowerCase(),attrs:{role:"presentation",tabIndex:"-1","aria-hidden":"true"}}),this.ul.style.zIndex="-1",Np.isAndroid&&"h"===t&&this.ul.classList.add(RN);var e=this.ticks.smallStep;this.ticks.showSmallTicks?e<=0&&(e=parseFloat(m(this.step))):e=this.ticks.largeStep>0?this.ticks.largeStep:parseFloat(m(this.max))-parseFloat(m(this.min));var i=this.fractionalToInteger(this.min),n=this.fractionalToInteger(this.max),r=this.fractionalToInteger(e),o=!h(this.customValues)&&this.customValues.length>0&&this.customValues.length-1,s=this.customTickCounter(o),a=!h(this.customValues)&&this.customValues.length>0?o*s+o:Math.abs((n-i)/r);this.element.appendChild(this.ul);var l,c=parseFloat(this.min.toString());"v"===t&&(c=parseFloat(this.max.toString()));var d,p=0,u=100/a;u===1/0&&(u=5);for(var g=0,f=!h(this.customValues)&&this.customValues.length>0?this.customValues.length-1:0,v=0;g<=a;g++){if(l=this.createElement("li",{attrs:{class:cN,role:"presentation",tabIndex:"-1","aria-hidden":"true"}}),!h(this.customValues)&&this.customValues.length>0)(d=g%(s+1)==0)&&("h"===t?(c=this.customValues[v],v++):(c=this.customValues[f],f--),l.setAttribute("title",c.toString()));else if(l.setAttribute("title",c.toString()),0===this.numberOfDecimals(this.max)&&0===this.numberOfDecimals(this.min)&&0===this.numberOfDecimals(this.step))d="h"===t?(c-parseFloat(this.min.toString()))%this.ticks.largeStep==0:Math.abs(c-parseFloat(this.max.toString()))%this.ticks.largeStep==0;else{var y=this.fractionalToInteger(this.ticks.largeStep),b=this.fractionalToInteger(c);d="h"===t?(b-i)%y==0:Math.abs(b-parseFloat(n.toString()))%y==0}d&&l.classList.add(dN),"h"===t?l.style.width=u+"%":l.style.height=u+"%";var S=d?"Both"===this.ticks.placement?2:1:0;if(d)for(var w=0;w<S;w++)this.createTick(l,c,u);else h(this.customValues)&&this.formatTicksValue(l,c);this.ul.appendChild(l),this.tickElementCollection.push(l);var I=void 0;h(this.customValues)&&(I=this.numberOfDecimals(e)>this.numberOfDecimals(c)?this.numberOfDecimals(e):this.numberOfDecimals(c),c="h"===t?this.makeRoundNumber(c+e,I):this.makeRoundNumber(c-e,I),p=this.makeRoundNumber(p+e,I))}this.ticksAlignment(t,u)},e.prototype.ticksAlignment=function(t,e,i){void 0===i&&(i=!0),this.firstChild=this.ul.firstElementChild,this.lastChild=this.ul.lastElementChild,this.firstChild.classList.add(BN),this.lastChild.classList.add(HN),this.sliderContainer.classList.add(hN+"-"+this.ticks.placement.toLowerCase()),"h"===t?(this.firstChild.style.width=e/2+"%",this.lastChild.style.width=e/2+"%"):(this.firstChild.style.height=e/2+"%",this.lastChild.style.height=e/2+"%");var n={ticksWrapper:this.ul,tickElements:this.tickElementCollection};i&&this.trigger("renderedTicks",n),this.scaleAlignment()},e.prototype.createTick=function(t,e,i){var n=this.createElement("span",{className:pN+" "+cN+"-"+this.ticks.placement.toLowerCase(),attrs:{role:"presentation",tabIndex:"-1","aria-hidden":"true"}});t.appendChild(n),h(this.customValues)?this.formatTicksValue(t,e,n,i):this.enableHtmlSanitizer?n.innerHTML=Yu.sanitize(e.toString()):n.innerHTML=e.toString()},e.prototype.formatTicksValue=function(t,e,i,n){var r=this,o=this.formatNumber(e),s={value:e,text:h(this.ticks)||h(this.ticks.format)?o:this.formatString(e,this.ticksFormatInfo).formatString,tickElement:t};this.trigger("renderingTicks",s,function(e){t.setAttribute("title",e.text.toString()),i&&(r.enableHtmlSanitizer?i.innerHTML=Yu.sanitize(e.text.toString()):i.innerHTML=e.text.toString())})},e.prototype.scaleAlignment=function(){this.tickValuePosition();this.orientation;"Vertical"===this.orientation?this.element.getBoundingClientRect().width<=15?this.sliderContainer.classList.add(PN):this.sliderContainer.classList.remove(PN):this.element.getBoundingClientRect().height<=15?this.sliderContainer.classList.add(PN):this.sliderContainer.classList.remove(PN)},e.prototype.tickValuePosition=function(){this.firstChild=this.element.querySelector("ul").children[0];var t,e,i=this.firstChild.getBoundingClientRect(),n=this.ticks.smallStep,r=Math.abs(parseFloat(m(this.max))-parseFloat(m(this.min)))/n;this.firstChild.children.length>0&&(t=this.firstChild.children[0].getBoundingClientRect());var o,s=[this.sliderContainer.querySelectorAll("."+cN+"."+dN+" ."+pN)];o="Both"===this.ticks.placement?[].slice.call(s[0],2):[].slice.call(s[0],1);for(var a="Vertical"===this.orientation?2*i.height:2*i.width,l=0;l<this.firstChild.children.length;l++)"Vertical"===this.orientation?this.firstChild.children[l].style.top=-t.height/2+"px":this.enableRtl?this.firstChild.children[l].style.left=(a-this.firstChild.children[l].getBoundingClientRect().width)/2+"px":this.firstChild.children[l].style.left=-t.width/2+"px";for(l=0;l<o.length;l++)e=o[l].getBoundingClientRect(),"Vertical"===this.orientation?P(o[l],{top:(a-e.height)/2+"px"}):P(o[l],{left:(a-e.width)/2+"px"});this.enableRtl&&this.lastChild.children.length&&0!==r&&(this.lastChild.children[0].style.left=-this.lastChild.getBoundingClientRect().width/2+"px","Both"===this.ticks.placement&&(this.lastChild.children[1].style.left=-this.lastChild.getBoundingClientRect().width/2+"px")),0===r&&("Horizontal"===this.orientation&&(this.enableRtl?(this.firstChild.classList.remove(HN),this.firstChild.style.right=this.firstHandle.style.right,this.firstChild.children[0].style.left=this.firstChild.getBoundingClientRect().width/2+2+"px","Both"===this.ticks.placement&&(this.firstChild.children[1].style.left=this.firstChild.getBoundingClientRect().width/2+2+"px")):(this.firstChild.classList.remove(HN),this.firstChild.style.left=this.firstHandle.style.left)),"Vertical"===this.orientation&&this.firstChild.classList.remove(HN))},e.prototype.setAriaAttrValue=function(t){var e,i=!h(this.ticks)&&!h(this.ticks.format),n=i?this.formatContent(this.tooltipFormatInfo,!1):this.formatContent(this.ticksFormatInfo,!1),r=i?this.formatContent(this.ticksFormatInfo,!0):this.formatContent(this.tooltipFormatInfo,!0);e=2===(n=this.customAriaText?this.customAriaText:n).split(" - ").length?n.split(" - "):[n,n],this.setAriaAttributes(t),"Range"!==this.type?L(t,{"aria-valuenow":r,"aria-valuetext":n}):this.enableRtl?t===this.firstHandle?L(t,{"aria-valuenow":r.split(" - ")[1],"aria-valuetext":e[1]}):L(t,{"aria-valuenow":r.split(" - ")[0],"aria-valuetext":e[0]}):t===this.firstHandle?L(t,{"aria-valuenow":r.split(" - ")[0],"aria-valuetext":e[0]}):L(t,{"aria-valuenow":r.split(" - ")[1],"aria-valuetext":e[1]})},e.prototype.handleValueUpdate=function(){return"Range"===this.type?1===this.activeHandle?this.handleVal1:this.handleVal2:this.handleVal1},e.prototype.getLimitCorrectedValues=function(t){return t="MinRange"===this.type||"Default"===this.type?this.getLimitValueAndPosition(t,this.limits.minStart,this.limits.minEnd)[0]:1===this.activeHandle?this.getLimitValueAndPosition(t,this.limits.minStart,this.limits.minEnd)[0]:this.getLimitValueAndPosition(t,this.limits.maxStart,this.limits.maxEnd)[0]},e.prototype.focusSliderElement=function(){this.isElementFocused||(this.element.focus(),this.isElementFocused=!0)},e.prototype.buttonClick=function(t){this.focusSliderElement();var e,i=this.enableRtl&&"Vertical"!==this.orientation,n=this.handleValueUpdate();40===t.keyCode||37===t.keyCode||t.currentTarget.classList.contains(aN)?e=i?this.add(n,parseFloat(this.step.toString()),!0):this.add(n,parseFloat(this.step.toString()),!1):38===t.keyCode||39===t.keyCode||t.currentTarget.classList.contains(lN)?e=i?this.add(n,parseFloat(this.step.toString()),!1):this.add(n,parseFloat(this.step.toString()),!0):33===t.keyCode||t.currentTarget.classList.contains(aN)?e=i?this.add(n,parseFloat(this.ticks.largeStep.toString()),!1):this.add(n,parseFloat(this.ticks.largeStep.toString()),!0):34===t.keyCode||t.currentTarget.classList.contains(lN)?e=i?this.add(n,parseFloat(this.ticks.largeStep.toString()),!0):this.add(n,parseFloat(this.ticks.largeStep.toString()),!1):36===t.keyCode?e=parseFloat(this.min.toString()):35===t.keyCode&&(e=parseFloat(this.max.toString())),this.limits.enabled&&(e=this.getLimitCorrectedValues(e)),this.changeHandleValue(e),!this.isMaterial||this.tooltip.isVisible||this.getHandle().classList.contains(kN)||this.materialChange(),this.tooltipToggle(this.getHandle()),this.getHandle().focus(),this.focusHandle(),t.currentTarget.classList.contains(aN)&&Ep.add(this.firstBtn,"mouseup touchend",this.buttonUp,this),t.currentTarget.classList.contains(lN)&&Ep.add(this.secondBtn,"mouseup touchend",this.buttonUp,this)},e.prototype.tooltipToggle=function(t){this.isMaterialTooltip?this.tooltipElement.classList.contains(xN)?this.refreshTooltip(this.firstHandle):this.openMaterialTooltip():this.tooltipElement?this.refreshTooltip(t):this.openTooltip(t)},e.prototype.buttonUp=function(t){t.currentTarget.classList.contains(aN)&&Ep.remove(this.firstBtn,"mouseup touchend",this.buttonUp),t.currentTarget.classList.contains(lN)&&Ep.remove(this.secondBtn,"mouseup touchend",this.buttonUp)},e.prototype.setRangeBar=function(){"Horizontal"===this.orientation?"MinRange"===this.type?(this.enableRtl?this.rangeBar.style.right="0px":this.rangeBar.style.left="0px",P(this.rangeBar,{width:h(this.handlePos1)?0:this.handlePos1+"px"})):(this.enableRtl?this.rangeBar.style.right=this.handlePos1+"px":this.rangeBar.style.left=this.handlePos1+"px",P(this.rangeBar,{width:this.handlePos2-this.handlePos1+"px"})):"MinRange"===this.type?(this.rangeBar.style.bottom="0px",P(this.rangeBar,{height:h(this.handlePos1)?0:this.handlePos1+"px"})):(this.rangeBar.style.bottom=this.handlePos1+"px",P(this.rangeBar,{height:this.handlePos2-this.handlePos1+"px"}))},e.prototype.checkValidValueAndPos=function(t){return t=this.checkHandleValue(t),t=this.checkHandlePosition(t)},e.prototype.setLimitBarPositions=function(t,e,i,n){"Horizontal"===this.orientation?this.enableRtl?(this.limitBarFirst.style.right=t+"px",this.limitBarFirst.style.width=e-t+"px"):(this.limitBarFirst.style.left=t+"px",this.limitBarFirst.style.width=e-t+"px"):(this.limitBarFirst.style.bottom=t+"px",this.limitBarFirst.style.height=e-t+"px"),"Range"===this.type&&("Horizontal"===this.orientation?this.enableRtl?(this.limitBarSecond.style.right=i+"px",this.limitBarSecond.style.width=n-i+"px"):(this.limitBarSecond.style.left=i+"px",this.limitBarSecond.style.width=n-i+"px"):(this.limitBarSecond.style.bottom=i+"px",this.limitBarSecond.style.height=n-i+"px"))},e.prototype.setLimitBar=function(){if("Default"===this.type||"MinRange"===this.type){var t=this.getLimitValueAndPosition(this.limits.minStart,this.limits.minStart,this.limits.minEnd,!0)[0];t=this.checkValidValueAndPos(t);var e=this.getLimitValueAndPosition(this.limits.minEnd,this.limits.minStart,this.limits.minEnd,!0)[0];e=this.checkValidValueAndPos(e),this.setLimitBarPositions(t,e)}else if("Range"===this.type){var i=this.getLimitValueAndPosition(this.limits.minStart,this.limits.minStart,this.limits.minEnd,!0)[0];i=this.checkValidValueAndPos(i);var n=this.getLimitValueAndPosition(this.limits.minEnd,this.limits.minStart,this.limits.minEnd,!0)[0];n=this.checkValidValueAndPos(n);var r=this.getLimitValueAndPosition(this.limits.maxStart,this.limits.maxStart,this.limits.maxEnd,!0)[0];r=this.checkValidValueAndPos(r);var o=this.getLimitValueAndPosition(this.limits.maxEnd,this.limits.maxStart,this.limits.maxEnd,!0)[0];o=this.checkValidValueAndPos(o),this.setLimitBarPositions(i,n,r,o)}},e.prototype.getLimitValueAndPosition=function(t,e,i,n){return h(e)&&(e=this.min,h(t)&&n&&(t=e)),h(i)&&(i=this.max,h(t)&&n&&(t=i)),t<e&&(t=e),t>i&&(t=i),[t,this.checkHandlePosition(t)]},e.prototype.setValue=function(){if(!h(this.customValues)&&this.customValues.length>0&&(this.min=0,this.max=this.customValues.length-1,this.setBarColor()),this.setAriaAttributes(this.firstHandle),this.handleVal1=h(this.value)?this.checkHandleValue(parseFloat(this.min.toString())):this.checkHandleValue(parseFloat(this.value.toString())),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.preHandlePos1=this.handlePos1,h(this.activeHandle)?"Range"===this.type?this.activeHandle=2:this.activeHandle=1:this.activeHandle=this.activeHandle,"Default"===this.type||"MinRange"===this.type){if(this.limits.enabled){var t=this.getLimitValueAndPosition(this.handleVal1,this.limits.minStart,this.limits.minEnd);this.handleVal1=t[0],this.handlePos1=t[1],this.preHandlePos1=this.handlePos1}this.setHandlePosition(null),this.handleStart(),this.value=this.handleVal1,this.setAriaAttrValue(this.firstHandle),this.changeEvent("changed",null)}else this.validateRangeValue();"Default"!==this.type&&this.setRangeBar(),this.limits.enabled&&this.setLimitBar()},e.prototype.rangeValueUpdate=function(){null!==this.value&&"object"==typeof this.value||(this.value=[parseFloat(m(this.min)),parseFloat(m(this.max))])},e.prototype.validateRangeValue=function(){this.rangeValueUpdate(),this.setRangeValue()},e.prototype.modifyZindex=function(){"Range"===this.type?1===this.activeHandle?(this.firstHandle.style.zIndex=this.zIndex+4+"",this.secondHandle.style.zIndex=this.zIndex+3+""):(this.firstHandle.style.zIndex=this.zIndex+3+"",this.secondHandle.style.zIndex=this.zIndex+4+""):this.isMaterialTooltip&&this.tooltipElement&&(this.tooltipElement.style.zIndex=ui(this.element)+"")},e.prototype.setHandlePosition=function(t){var e,i=this,n=1===this.activeHandle?this.handlePos1:this.handlePos2;e=this.isMaterialTooltip?[this.firstHandle,this.materialHandle]:[this.getHandle()],this.handleStart(),e.forEach(function(t){"Horizontal"===i.orientation?i.enableRtl?t.style.right=n+"px":t.style.left=n+"px":t.style.bottom=n+"px"}),this.changeEvent("change",t)},e.prototype.getHandle=function(){return 1===this.activeHandle?this.firstHandle:this.secondHandle},e.prototype.setRangeValue=function(){this.updateRangeValue(),this.activeHandle=1,this.setHandlePosition(null),this.activeHandle=2,this.setHandlePosition(null),this.activeHandle=1},e.prototype.changeEvent=function(t,e){var i="change"===t?this.previousVal:this.previousChanged;if("Range"!==this.type)this.setProperties({value:this.handleVal1},!0),i===this.value||this.isMaterialTooltip&&this.initialTooltip||(this.trigger(t,this.changeEventArgs(t,e)),this.initialTooltip=!0,this.setPreviousVal(t,this.value)),this.setAriaAttrValue(this.firstHandle);else{var n=this.value=[this.handleVal1,this.handleVal2];this.setProperties({value:n},!0),(i.length===this.value.length&&this.value[0]!==i[0]||this.value[1]!==i[1])&&(this.initialTooltip=!1,this.trigger(t,this.changeEventArgs(t,e)),this.initialTooltip=!0,this.setPreviousVal(t,this.value)),this.setAriaAttrValue(this.getHandle())}this.hiddenInput.value=this.value.toString()},e.prototype.changeEventArgs=function(t,e){var i;return this.tooltip.isVisible&&this.tooltipObj&&this.initialTooltip?(this.tooltipValue(),i={value:this.value,previousValue:"change"===t?this.previousVal:this.previousChanged,action:t,text:this.tooltipObj.content,isInteracted:!h(e)}):i={value:this.value,previousValue:"change"===t?this.previousVal:this.previousChanged,action:t,text:h(this.ticksFormatInfo.format)?this.value.toString():"Range"!==this.type?this.formatString(this.value,this.ticksFormatInfo).formatString:this.formatString(this.value[0],this.ticksFormatInfo).formatString+" - "+this.formatString(this.value[1],this.ticksFormatInfo).formatString,isInteracted:!h(e)},i},e.prototype.setPreviousVal=function(t,e){"change"===t?this.previousVal=e:this.previousChanged=e},e.prototype.updateRangeValue=function(){var t=this.value.toString().split(",").map(Number);if(this.enableRtl&&"Vertical"!==this.orientation||this.rtl?this.value=[t[1],t[0]]:this.value=[t[0],t[1]],this.enableRtl&&"Vertical"!==this.orientation?(this.handleVal1=this.checkHandleValue(this.value[1]),this.handleVal2=this.checkHandleValue(this.value[0])):(this.handleVal1=this.checkHandleValue(this.value[0]),this.handleVal2=this.checkHandleValue(this.value[1])),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handlePos2=this.checkHandlePosition(this.handleVal2),this.handlePos1>this.handlePos2&&(this.handlePos1=this.handlePos2,this.handleVal1=this.handleVal2),this.preHandlePos1=this.handlePos1,this.preHandlePos2=this.handlePos2,this.limits.enabled){this.activeHandle=1;var e=this.getLimitValueAndPosition(this.handleVal1,this.limits.minStart,this.limits.minEnd);this.handleVal1=e[0],this.handlePos1=e[1],this.preHandlePos1=this.handlePos1,this.activeHandle=2,e=this.getLimitValueAndPosition(this.handleVal2,this.limits.maxStart,this.limits.maxEnd),this.handleVal2=e[0],this.handlePos2=e[1],this.preHandlePos2=this.handlePos2}},e.prototype.checkHandlePosition=function(t){var e;return t=100*(t-parseFloat(m(this.min)))/(parseFloat(m(this.max))-parseFloat(m(this.min))),e="Horizontal"===this.orientation?this.element.getBoundingClientRect().width*(t/100):this.element.getBoundingClientRect().height*(t/100),parseFloat(m(this.max))===parseFloat(m(this.min))&&(e="Horizontal"===this.orientation?this.element.getBoundingClientRect().width:this.element.getBoundingClientRect().height),e},e.prototype.checkHandleValue=function(t){if(this.min>this.max&&(this.min=this.max),this.min===this.max)return parseFloat(m(this.max));var e=this.tempStartEnd();return t<e.start?t=e.start:t>e.end&&(t=e.end),t},e.prototype.reposition=function(){var t=this;this.firstHandle.style.transition="none","Default"!==this.type&&(this.rangeBar.style.transition="none"),"Range"===this.type&&(this.secondHandle.style.transition="none"),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handleVal2&&(this.handlePos2=this.checkHandlePosition(this.handleVal2)),"Horizontal"===this.orientation?(this.enableRtl?this.firstHandle.style.right=this.handlePos1+"px":this.firstHandle.style.left=this.handlePos1+"px",this.isMaterialTooltip&&(this.enableRtl?this.materialHandle.style.right=this.handlePos1+"px":this.materialHandle.style.left=this.handlePos1+"px"),"MinRange"===this.type?(this.enableRtl?this.rangeBar.style.right="0px":this.rangeBar.style.left="0px",P(this.rangeBar,{width:h(this.handlePos1)?0:this.handlePos1+"px"})):"Range"===this.type&&(this.enableRtl?this.secondHandle.style.right=this.handlePos2+"px":this.secondHandle.style.left=this.handlePos2+"px",this.enableRtl?this.rangeBar.style.right=this.handlePos1+"px":this.rangeBar.style.left=this.handlePos1+"px",P(this.rangeBar,{width:this.handlePos2-this.handlePos1+"px"}))):(this.firstHandle.style.bottom=this.handlePos1+"px",this.isMaterialTooltip&&(this.materialHandle.style.bottom=this.handlePos1+"px"),"MinRange"===this.type?(this.rangeBar.style.bottom="0px",P(this.rangeBar,{height:h(this.handlePos1)?0:this.handlePos1+"px"})):"Range"===this.type&&(this.secondHandle.style.bottom=this.handlePos2+"px",this.rangeBar.style.bottom=this.handlePos1+"px",P(this.rangeBar,{height:this.handlePos2-this.handlePos1+"px"}))),this.limits.enabled&&this.setLimitBar(),"None"!==this.ticks.placement&&this.ul&&(this.removeElement(this.ul),this.ul=void 0,this.renderScale()),this.handleStart(),this.tooltip.isVisible||setTimeout(function(){t.firstHandle.style.transition=t.scaleTransform,"Range"===t.type&&(t.secondHandle.style.transition=t.scaleTransform)}),this.refreshTooltip(this.tooltipTarget),this.setBarColor()},e.prototype.changeHandleValue=function(t){var e=null;1===this.activeHandle?(this.limits.enabled&&this.limits.startHandleFixed||(this.handleVal1=this.checkHandleValue(t),this.handlePos1=this.checkHandlePosition(this.handleVal1),"Range"===this.type&&this.handlePos1>this.handlePos2&&(this.handlePos1=this.handlePos2,this.handleVal1=this.handleVal2),this.handlePos1!==this.preHandlePos1&&(e=this.preHandlePos1=this.handlePos1)),this.modifyZindex()):(this.limits.enabled&&this.limits.endHandleFixed||(this.handleVal2=this.checkHandleValue(t),this.handlePos2=this.checkHandlePosition(this.handleVal2),"Range"===this.type&&this.handlePos2<this.handlePos1&&(this.handlePos2=this.handlePos1,this.handleVal2=this.handleVal1),this.handlePos2!==this.preHandlePos2&&(e=this.preHandlePos2=this.handlePos2)),this.modifyZindex()),null!==e&&("Default"!==this.type&&this.setRangeBar(),this.setHandlePosition(null))},e.prototype.tempStartEnd=function(){return this.min>this.max?{start:this.max,end:this.min}:{start:this.min,end:this.max}},e.prototype.xyToPosition=function(t){if(this.min===this.max)return 100;if("Horizontal"===this.orientation){var e=t.x-this.element.getBoundingClientRect().left,i=this.element.offsetWidth/100;this.val=e/i}else{var n=t.y-this.element.getBoundingClientRect().top;i=this.element.offsetHeight/100;this.val=100-n/i}var r=this.stepValueCalculation(this.val);return r<0?r=0:r>100&&(r=100),this.enableRtl&&"Vertical"!==this.orientation&&(r=100-r),"Horizontal"===this.orientation?this.element.getBoundingClientRect().width*(r/100):this.element.getBoundingClientRect().height*(r/100)},e.prototype.stepValueCalculation=function(t){0===this.step&&(this.step=1);var e=parseFloat(m(this.step))/((parseFloat(m(this.max))-parseFloat(m(this.min)))/100),i=t%Math.abs(e);return 0!==i&&(e/2>i?t-=i:t+=Math.abs(e)-i),t},e.prototype.add=function(t,e,i){var n=Math.pow(10,3);return i?(Math.round(t*n)+Math.round(e*n))/n:(Math.round(t*n)-Math.round(e*n))/n},e.prototype.positionToValue=function(t){var e,i=parseFloat(m(this.max))-parseFloat(m(this.min));e="Horizontal"===this.orientation?t/this.element.getBoundingClientRect().width*i:t/this.element.getBoundingClientRect().height*i;return this.add(e,parseFloat(this.min.toString()),!0)},e.prototype.sliderBarClick=function(t){t.preventDefault();var e;"mousedown"===t.type||"mouseup"===t.type||"click"===t.type?e={x:t.clientX,y:t.clientY}:"touchend"!==t.type&&"touchstart"!==t.type||(e={x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY});var i=this.xyToPosition(e),n=this.positionToValue(i);if("Range"===this.type&&this.handlePos2-i<i-this.handlePos1){if(this.activeHandle=2,!this.limits.enabled||!this.limits.endHandleFixed){if(this.limits.enabled){n=(r=this.getLimitValueAndPosition(n,this.limits.maxStart,this.limits.maxEnd))[0],i=r[1]}this.secondHandle.classList.add(FN),this.handlePos2=this.preHandlePos2=i,this.handleVal2=n}this.modifyZindex(),this.secondHandle.focus()}else{if(this.activeHandle=1,!this.limits.enabled||!this.limits.startHandleFixed){if(this.limits.enabled){var r;n=(r=this.getLimitValueAndPosition(n,this.limits.minStart,this.limits.minEnd))[0],i=r[1]}this.firstHandle.classList.add(FN),this.handlePos1=this.preHandlePos1=i,this.handleVal1=n}this.modifyZindex(),this.firstHandle.focus()}this.isMaterialTooltip&&this.tooltipElement.classList.add(MN);var o=this.element.querySelector("."+kN);o&&this.getHandle()!==o&&o.classList.remove(kN);var s,a=1===this.activeHandle?this.firstHandle:this.secondHandle;if(("click"===t.type||"mousedown"===t.type)&&t.target===a){var l=t.clientX,h=t.clientY;s=document.elementFromPoint(l,h)}if(t.target===a&&s!=a)return!this.isMaterial||this.tooltip.isVisible||this.getHandle().classList.contains(kN)||this.materialChange(),this.sliderBarUp(t),void this.tooltipToggle(this.getHandle());if(this.checkRepeatedValue(n)){var c=this.isMaterial&&this.tooltip.isVisible?this.transitionOnMaterialTooltip:this.transition;this.getHandle().style.transition=c.handle,"Default"!==this.type&&(this.rangeBar.style.transition=c.rangeBar),this.setHandlePosition(t),this.isMaterialTooltip&&(this.initialTooltip=!1),this.changeEvent("changed",t),"Default"!==this.type&&this.setRangeBar()}},e.prototype.handleValueAdjust=function(t,e,i){1===i?(this.handleVal1=e,this.handleVal2=this.handleVal1+this.minDiff):2===i&&(this.handleVal2=e,this.handleVal1=this.handleVal2-this.minDiff),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handlePos2=this.checkHandlePosition(this.handleVal2)},e.prototype.dragRangeBarMove=function(t){var e,i;"touchmove"!==t.type&&t.preventDefault(),this.rangeBarDragged=!0;var n;this.rangeBar.style.transition="none",this.firstHandle.style.transition="none",this.secondHandle.style.transition="none";var r,o;if("mousemove"===t.type?(r=(e=[t.clientX,t.clientY])[0],o=e[1]):(r=(i=[t.changedTouches[0].clientX,t.changedTouches[0].clientY])[0],o=i[1]),!(this.limits.enabled&&this.limits.startHandleFixed||this.limits.enabled&&this.limits.endHandleFixed)){if(n=this.enableRtl?{x:r+this.secondPartRemain,y:o+this.secondPartRemain}:{x:r-this.firstPartRemain,y:o+this.secondPartRemain},this.handlePos1=this.xyToPosition(n),this.handleVal1=this.positionToValue(this.handlePos1),n=this.enableRtl?{x:r-this.firstPartRemain,y:o-this.firstPartRemain}:{x:r+this.secondPartRemain,y:o-this.firstPartRemain},this.handlePos2=this.xyToPosition(n),this.handleVal2=this.positionToValue(this.handlePos2),this.limits.enabled){var s=this.getLimitValueAndPosition(this.handleVal1,this.limits.minStart,this.limits.minEnd);this.handleVal1=s[0],this.handlePos1=s[1],this.handleVal1===this.limits.minEnd&&this.handleValueAdjust(this.handleVal1,this.limits.minEnd,1),this.handleVal1===this.limits.minStart&&this.handleValueAdjust(this.handleVal1,this.limits.minStart,1),s=this.getLimitValueAndPosition(this.handleVal2,this.limits.maxStart,this.limits.maxEnd),this.handleVal2=s[0],this.handlePos2=s[1],this.handleVal2===this.limits.maxStart&&this.handleValueAdjust(this.handleVal2,this.limits.maxStart,2),this.handleVal2===this.limits.maxEnd&&this.handleValueAdjust(this.handleVal2,this.limits.maxEnd,2)}this.handleVal2===this.max&&this.handleValueAdjust(this.handleVal2,this.max,2),this.handleVal1===this.min&&this.handleValueAdjust(this.handleVal1,this.min,1)}this.activeHandle=1,this.setHandlePosition(t),this.activeHandle=2,this.setHandlePosition(t),this.tooltipToggle(this.rangeBar),this.setRangeBar()},e.prototype.sliderBarUp=function(t){this.changeEvent("changed",t),this.handleFocusOut(),this.firstHandle.classList.remove(FN),"Range"===this.type&&(this.initialTooltip=!1,this.secondHandle.classList.remove(FN)),this.closeTooltip(),this.isMaterial&&(this.getHandle().classList.remove("e-large-thumb-size"),this.isMaterialTooltip&&this.tooltipElement.classList.remove(MN)),Ep.remove(document,"mousemove touchmove",this.sliderBarMove),Ep.remove(document,"mouseup touchend",this.sliderBarUp)},e.prototype.sliderBarMove=function(t){"touchmove"!==t.type&&t.preventDefault();var e;e="mousemove"===t.type?{x:t.clientX,y:t.clientY}:{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY};var i=this.xyToPosition(e),n=this.positionToValue(i);if(i=Math.round(i),"Range"!==this.type&&1===this.activeHandle){if(!this.limits.enabled||!this.limits.startHandleFixed){if(this.limits.enabled){var r=this.getLimitValueAndPosition(n,this.limits.minStart,this.limits.minEnd);i=r[1],n=r[0]}this.handlePos1=i,this.handleVal1=n}this.firstHandle.classList.add(FN)}if("Range"===this.type)if(1===this.activeHandle){if(this.firstHandle.classList.add(FN),!(this.limits.enabled&&this.limits.startHandleFixed||(i>this.handlePos2&&(i=this.handlePos2,n=this.handleVal2),i===this.preHandlePos1))){if(this.limits.enabled){n=(o=this.getLimitValueAndPosition(n,this.limits.minStart,this.limits.minEnd))[0],i=o[1]}this.handlePos1=this.preHandlePos1=i,this.handleVal1=n,this.activeHandle=1}}else if(2===this.activeHandle&&(this.secondHandle.classList.add(FN),!(this.limits.enabled&&this.limits.endHandleFixed||(i<this.handlePos1&&(i=this.handlePos1,n=this.handleVal1),i===this.preHandlePos2)))){if(this.limits.enabled){var o;n=(o=this.getLimitValueAndPosition(n,this.limits.maxStart,this.limits.maxEnd))[0],i=o[1]}this.handlePos2=this.preHandlePos2=i,this.handleVal2=n,this.activeHandle=2}this.checkRepeatedValue(n)&&(this.getHandle().style.transition=this.scaleTransform,"Default"!==this.type&&(this.rangeBar.style.transition="none"),this.setHandlePosition(t),!this.isMaterial||this.tooltip.isVisible||this.getHandle().classList.contains(kN)||this.materialChange(),this.tooltipToggle(this.getHandle()),"Default"!==this.type&&this.setRangeBar())},e.prototype.dragRangeBarUp=function(t){this.rangeBarDragged?this.isDragComplete=!0:(this.focusSliderElement(),this.sliderBarClick(t)),this.changeEvent("changed",t),this.closeTooltip(),Ep.remove(document,"mousemove touchmove",this.dragRangeBarMove),Ep.remove(document,"mouseup touchend",this.dragRangeBarUp),this.rangeBarDragged=!1},e.prototype.checkRepeatedValue=function(t){if("Range"===this.type){if(t===(this.enableRtl&&"Vertical"!==this.orientation?1===this.activeHandle?this.previousVal[1]:this.previousVal[0]:1===this.activeHandle?this.previousVal[0]:this.previousVal[1]))return 0}else if(t===this.previousVal)return 0;return 1},e.prototype.refreshTooltip=function(t){this.tooltip.isVisible&&this.tooltipObj&&(this.tooltipValue(),t&&(this.tooltipObj.refresh(t),this.tooltipTarget=t))},e.prototype.openTooltip=function(t){this.tooltip.isVisible&&this.tooltipObj&&!this.isMaterialTooltip&&(this.tooltipValue(),this.tooltipObj.open(t),this.tooltipTarget=t)},e.prototype.closeTooltip=function(){this.tooltip.isVisible&&this.tooltipObj&&"Always"!==this.tooltip.showOn&&!this.isMaterialTooltip&&(this.tooltipValue(),this.tooltipObj.close(),this.tooltipTarget=void 0)},e.prototype.keyDown=function(t){switch(t.keyCode){case 37:case 38:case 39:case 40:case 33:case 34:case 36:case 35:t.preventDefault(),this.buttonClick(t)}},e.prototype.wireButtonEvt=function(t){t?(Ep.remove(this.firstBtn,"mouseleave touchleave",this.buttonFocusOut),Ep.remove(this.secondBtn,"mouseleave touchleave",this.buttonFocusOut),Ep.remove(this.firstBtn,"mousedown touchstart",this.repeatHandlerMouse),Ep.remove(this.firstBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp),Ep.remove(this.secondBtn,"mousedown touchstart",this.repeatHandlerMouse),Ep.remove(this.secondBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp),Ep.remove(this.firstBtn,"focusout",this.sliderFocusOut),Ep.remove(this.secondBtn,"focusout",this.sliderFocusOut)):(Ep.add(this.firstBtn,"mouseleave touchleave",this.buttonFocusOut,this),Ep.add(this.secondBtn,"mouseleave touchleave",this.buttonFocusOut,this),Ep.add(this.firstBtn,"mousedown touchstart",this.repeatHandlerMouse,this),Ep.add(this.firstBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp,this),Ep.add(this.secondBtn,"mousedown touchstart",this.repeatHandlerMouse,this),Ep.add(this.secondBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp,this),Ep.add(this.firstBtn,"focusout",this.sliderFocusOut,this),Ep.add(this.secondBtn,"focusout",this.sliderFocusOut,this))},e.prototype.rangeBarMousedown=function(t){var e,i;if(t.preventDefault(),this.focusSliderElement(),"Range"===this.type&&this.drag&&t.target===this.rangeBar){var n=void 0,r=void 0;"mousedown"===t.type?(n=(e=[t.clientX,t.clientY])[0],r=e[1]):"touchstart"===t.type&&(n=(i=[t.changedTouches[0].clientX,t.changedTouches[0].clientY])[0],r=i[1]),"Horizontal"===this.orientation?(this.firstPartRemain=n-this.rangeBar.getBoundingClientRect().left,this.secondPartRemain=this.rangeBar.getBoundingClientRect().right-n):(this.firstPartRemain=r-this.rangeBar.getBoundingClientRect().top,this.secondPartRemain=this.rangeBar.getBoundingClientRect().bottom-r),this.minDiff=this.handleVal2-this.handleVal1,this.tooltipToggle(this.rangeBar);var o=this.element.querySelector("."+kN);o&&o.classList.remove(kN),Ep.add(document,"mousemove touchmove",this.dragRangeBarMove,this),Ep.add(document,"mouseup touchend",this.dragRangeBarUp,this)}},e.prototype.elementClick=function(t){this.isDragComplete?this.isDragComplete=!1:(t.preventDefault(),this.focusSliderElement(),this.sliderBarClick(t),this.focusHandle())},e.prototype.wireEvents=function(){this.onresize=this.reposition.bind(this),window.addEventListener("resize",this.onresize),this.enabled&&!this.readonly&&(Ep.add(this.element,"click",this.elementClick,this),"Range"===this.type&&this.drag&&Ep.add(this.rangeBar,"mousedown touchstart",this.rangeBarMousedown,this),Ep.add(this.sliderContainer,"keydown",this.keyDown,this),Ep.add(this.sliderContainer,"keyup",this.keyUp,this),Ep.add(this.element,"focusout",this.sliderFocusOut,this),Ep.add(this.sliderContainer,"mouseover mouseout touchstart touchend",this.hover,this),this.wireFirstHandleEvt(!1),"Range"===this.type&&this.wireSecondHandleEvt(!1),this.showButtons&&this.wireButtonEvt(!1),this.wireMaterialTooltipEvent(!1),this.isForm&&Ep.add(this.formElement,"reset",this.formResetHandler,this))},e.prototype.unwireEvents=function(){Ep.remove(this.element,"click",this.elementClick),"Range"===this.type&&this.drag&&Ep.remove(this.rangeBar,"mousedown touchstart",this.rangeBarMousedown),Ep.remove(this.sliderContainer,"keydown",this.keyDown),Ep.remove(this.sliderContainer,"keyup",this.keyUp),Ep.remove(this.element,"focusout",this.sliderFocusOut),Ep.remove(this.sliderContainer,"mouseover mouseout touchstart touchend",this.hover),this.wireFirstHandleEvt(!0),"Range"===this.type&&this.wireSecondHandleEvt(!0),this.showButtons&&this.wireButtonEvt(!0),this.wireMaterialTooltipEvent(!0),Ep.remove(this.element,"reset",this.formResetHandler)},e.prototype.formResetHandler=function(){this.setProperties({value:this.formResetValue},!0),this.setValue()},e.prototype.keyUp=function(t){if(9===t.keyCode&&t.target.classList.contains(rN)&&(this.focusSliderElement(),!t.target.classList.contains(kN))){this.element.querySelector("."+kN)&&this.element.querySelector("."+kN).classList.remove(kN),t.target.classList.add(kN);var e=t.target.parentElement;e===this.element&&(e.querySelector("."+NN).classList.add(VN),"Range"!==this.type&&"MinRange"!==this.type||e.querySelector("."+oN).classList.add(_N)),"Range"===this.type&&(t.target.previousSibling.classList.contains(rN)?this.activeHandle=2:this.activeHandle=1),this.getHandle().focus(),this.tooltipToggle(this.getHandle())}this.closeTooltip(),this.changeEvent("changed",t)},e.prototype.hover=function(t){if(!h(t))if("mouseover"===t.type||"touchmove"===t.type||"mousemove"===t.type||"pointermove"===t.type||"touchstart"===t.type)this.sliderContainer.classList.add(gN);else{this.sliderContainer.classList.remove(gN);var e=t.currentTarget;this.tooltip.isVisible&&"Always"!==this.tooltip.showOn&&this.tooltipObj&&this.isMaterialTooltip&&!e.classList.contains(TN)&&!e.classList.contains(kN)&&this.closeMaterialTooltip()}},e.prototype.sliderFocusOut=function(t){t.relatedTarget!==this.secondHandle&&t.relatedTarget!==this.firstHandle&&t.relatedTarget!==this.element&&t.relatedTarget!==this.firstBtn&&t.relatedTarget!==this.secondBtn&&(this.closeMaterialTooltip(),this.closeTooltip(),this.element.querySelector("."+kN)&&this.element.querySelector("."+kN).classList.remove(kN),this.element.querySelector("."+VN)&&(this.element.querySelector("."+VN).classList.remove(VN),"Range"!==this.type&&"MinRange"!==this.type||!this.element.querySelector("."+_N)||this.element.querySelector("."+_N).classList.remove(_N)),this.hiddenInput.focus(),this.hiddenInput.blur(),this.isElementFocused=!1)},e.prototype.removeElement=function(t){t.parentNode&&t.parentNode.removeChild(t)},e.prototype.changeSliderType=function(t,e){this.isMaterialTooltip&&this.materialHandle&&(this.sliderContainer.classList.remove(CN),this.removeElement(this.materialHandle),this.materialHandle=void 0),this.removeElement(this.firstHandle),this.firstHandle=void 0,"Default"!==t&&("Range"===t&&(this.removeElement(this.secondHandle),this.secondHandle=void 0),this.removeElement(this.rangeBar),this.rangeBar=void 0),this.tooltip.isVisible&&!h(this.tooltipObj)&&(this.tooltipObj.destroy(),this.tooltipElement=void 0,this.tooltipCollidedPosition=void 0),this.limits.enabled&&("MinRange"===t||"Default"===t?h(this.limitBarFirst)||(this.removeElement(this.limitBarFirst),this.limitBarFirst=void 0):h(this.limitBarSecond)||(this.removeElement(this.limitBarSecond),this.limitBarSecond=void 0)),this.activeHandle=1,this.getThemeInitialization(),"Range"===this.type&&this.rangeValueUpdate(),this.createRangeBar(),this.limits.enabled&&this.createLimitBar(),this.setHandler(),this.setOrientClass(),this.wireFirstHandleEvt(!1),"Range"===this.type&&this.wireSecondHandleEvt(!1),this.setValue(),this.tooltip.isVisible&&(this.renderTooltip(),this.wireMaterialTooltipEvent(!1)),this.setBarColor(),"tooltip"!==e&&this.updateConfig()},e.prototype.changeRtl=function(){if(this.enableRtl||"Range"!==this.type||(this.value=[this.handleVal2,this.handleVal1]),this.updateConfig(),this.tooltip.isVisible&&this.tooltipObj.refresh(this.firstHandle),this.showButtons){var t=this.enableRtl&&"Vertical"!==this.orientation;L(t?this.secondBtn:this.firstBtn,{"aria-label":"Decrease",title:"Decrease"}),L(t?this.firstBtn:this.secondBtn,{"aria-label":"Increase",title:"Increase"})}},e.prototype.changeOrientation=function(){this.changeSliderType(this.type,"null")},e.prototype.updateConfig=function(){this.setEnableRTL(),this.setValue(),this.tooltip.isVisible&&this.refreshTooltip(this.tooltipTarget),"None"!==this.ticks.placement&&this.ul&&(this.removeElement(this.ul),this.ul=void 0,this.renderScale()),this.limitsPropertyChange()},e.prototype.limitsPropertyChange=function(){this.limits.enabled?(h(this.limitBarFirst)&&"Range"!==this.type&&this.createLimitBar(),h(this.limitBarFirst)&&h(this.limitBarSecond)&&"Range"===this.type&&this.createLimitBar(),this.setLimitBar(),this.setValue()):(h(this.limitBarFirst)||T(this.limitBarFirst),h(this.limitBarSecond)||T(this.limitBarSecond))},e.prototype.getPersistData=function(){return this.addOnPersist(["value"])},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.unwireEvents(),window.removeEventListener("resize",this.onresize),x([this.sliderContainer],[vN]),this.firstHandle.removeAttribute("aria-orientation"),"Range"===this.type&&this.secondHandle.removeAttribute("aria-orientation"),this.sliderContainer.parentNode.insertBefore(this.element,this.sliderContainer),T(this.sliderContainer),this.tooltip.isVisible&&this.tooltipObj.destroy(),this.element.innerHTML=""},e.prototype.onPropertyChanged=function(t,e){for(var i=this,n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];switch(o){case"cssClass":this.setCSSClass(e.cssClass);break;case"value":if(t&&e){var s=h(t.value)?"Range"===this.type?[this.min,this.max]:this.min:t.value;this.setProperties({value:s},!0),h(e.value)||e.value.toString()===s.toString()||(this.setValue(),this.refreshTooltip(this.tooltipTarget),"Range"===this.type&&(h(t.value)||e.value[1]===s[1]?this.activeHandle=1:this.activeHandle=2))}break;case"min":case"step":case"max":this.setMinMaxValue();break;case"tooltip":h(t.tooltip)||h(e.tooltip)||this.setTooltip(o);break;case"type":h(e)||!Object.keys(e).length||h(e.type)||(this.changeSliderType(e.type,o),this.setZindex());break;case"enableRtl":e.enableRtl!==t.enableRtl&&"Vertical"!==this.orientation&&(this.rtl=e.enableRtl,this.changeRtl());break;case"limits":this.limitsPropertyChange();break;case"orientation":this.changeOrientation();break;case"ticks":h(this.sliderContainer.querySelector("."+hN))||(T(this.ul),Array.prototype.forEach.call(this.sliderContainer.classList,function(t){t.match(/e-scale-/)&&i.sliderContainer.classList.remove(t)})),"None"!==this.ticks.placement&&(this.renderScale(),this.setZindex());break;case"locale":this.showButtons&&this.buttonTitle();break;case"showButtons":t.showButtons?(this.setButtons(),this.reposition(),this.enabled&&!this.readonly&&this.wireButtonEvt(!1)):this.firstBtn&&this.secondBtn&&(this.sliderContainer.removeChild(this.firstBtn),this.sliderContainer.removeChild(this.secondBtn),this.sliderContainer.classList.remove(UN),this.firstBtn=void 0,this.secondBtn=void 0,this.reposition());break;case"enabled":this.setEnabled();break;case"readonly":this.setReadOnly();break;case"customValues":this.setValue(),this.reposition();break;case"colorRange":this.reposition();break;case"width":this.setElementWidth(t.width),this.setMinMaxValue(),this.limits&&this.limitsPropertyChange()}}},e.prototype.setReadOnly=function(){this.readonly?(this.unwireEvents(),this.sliderContainer.classList.add(GN)):(this.wireEvents(),this.sliderContainer.classList.remove(GN))},e.prototype.setMinMaxValue=function(){var t=this;this.setValue(),this.refreshTooltip(this.tooltipTarget),h(this.sliderContainer.querySelector("."+hN))||this.ul&&(T(this.ul),Array.prototype.forEach.call(this.sliderContainer.classList,function(e){e.match(/e-scale-/)&&t.sliderContainer.classList.remove(e)})),"None"!==this.ticks.placement&&(this.renderScale(),this.setZindex())},e.prototype.setZindex=function(){this.zIndex=6,h(this.ticks)||"None"===this.ticks.placement||(this.ul.style.zIndex=this.zIndex+-7+"",this.element.style.zIndex=this.zIndex+2+""),this.isMaterial||h(this.ticks)||"Both"!==this.ticks.placement||(this.element.style.zIndex=this.zIndex+2+""),this.firstHandle.style.zIndex=this.zIndex+3+"","Range"===this.type&&(this.secondHandle.style.zIndex=this.zIndex+4+"")},e.prototype.setTooltip=function(t){this.changeSliderType(this.type,t)},e.prototype.setBarColor=function(){for(var t,e,i=this.sliderTrack.lastElementChild;i;)this.sliderTrack.removeChild(i),i=this.sliderTrack.lastElementChild;for(var n=0;n<this.colorRange.length;n++)if(!h(this.colorRange[n].start)&&!h(this.colorRange[n].end)&&this.colorRange[n].end>this.colorRange[n].start){this.colorRange[n].start<this.min&&(this.colorRange[n].start=this.min),this.colorRange[n].end>this.max&&(this.colorRange[n].end=this.max);var r=this.checkHandlePosition(this.colorRange[n].start),o=this.checkHandlePosition(this.colorRange[n].end),s=this.createElement("div");s.style.backgroundColor=this.colorRange[n].color,s.style.border="1px solid "+this.colorRange[n].color,"Horizontal"===this.orientation?(e=EN,t=this.enableRtl?h(this.customValues)?this.checkHandlePosition(this.max)-this.checkHandlePosition(this.colorRange[n].end):this.checkHandlePosition(this.customValues.length-this.colorRange[n].end-1):this.checkHandlePosition(this.colorRange[n].start),s.style.width=o-r+"px",s.style.left=t+"px"):(e=DN,t=this.checkHandlePosition(this.colorRange[n].start),s.style.height=o-r+"px",s.style.bottom=t+"px"),s.classList.add(e),this.sliderTrack.appendChild(s)}},e.prototype.getModuleName=function(){return"slider"},GC([W(null)],e.prototype,"value",void 0),GC([W(null)],e.prototype,"customValues",void 0),GC([W(1)],e.prototype,"step",void 0),GC([W(null)],e.prototype,"width",void 0),GC([W(0)],e.prototype,"min",void 0),GC([W(100)],e.prototype,"max",void 0),GC([W(!1)],e.prototype,"readonly",void 0),GC([W("Default")],e.prototype,"type",void 0),GC([q([{}],$C)],e.prototype,"colorRange",void 0),GC([Q({},ZC)],e.prototype,"ticks",void 0),GC([Q({},KC)],e.prototype,"limits",void 0),GC([W(!0)],e.prototype,"enabled",void 0),GC([Q({},JC)],e.prototype,"tooltip",void 0),GC([W(!1)],e.prototype,"showButtons",void 0),GC([W(!0)],e.prototype,"enableAnimation",void 0),GC([W("Horizontal")],e.prototype,"orientation",void 0),GC([W("")],e.prototype,"cssClass",void 0),GC([W(!1)],e.prototype,"enableHtmlSanitizer",void 0),GC([Z()],e.prototype,"created",void 0),GC([Z()],e.prototype,"change",void 0),GC([Z()],e.prototype,"changed",void 0),GC([Z()],e.prototype,"renderingTicks",void 0),GC([Z()],e.prototype,"renderedTicks",void 0),GC([Z()],e.prototype,"tooltipChange",void 0),e=GC([$],e)}(Kp),nE=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),rE=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},oE={EMAIL:new RegExp("^[A-Za-z0-9._%+-]{1,}@[A-Za-z0-9._%+-]{1,}([.]{1}[a-zA-Z0-9]{2,}|[.]{1}[a-zA-Z0-9]{2,4}[.]{1}[a-zA-Z0-9]{2,4})$"),URL:/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/m,DATE_ISO:new RegExp("^([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$"),DIGITS:new RegExp("^[0-9]*$"),PHONE:new RegExp("^[+]?[0-9]{9,13}$"),CREDITCARD:new RegExp("^\\d{13,16}$")};!function(t){t[t.Message=0]="Message",t[t.Label=1]="Label"}(TC||(TC={}));!function(t){function e(e,i){var n=t.call(this,i,e)||this;if(n.validated=[],n.errorRules=[],n.allowSubmit=!1,n.required="required",n.infoElement=null,n.inputElement=null,n.selectQuery="input:not([type=reset]):not([type=button]), select, textarea",n.localyMessage={},n.defaultMessages={required:"This field is required.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateIso:"Please enter a valid date ( ISO ).",creditcard:"Please enter valid card number",number:"Please enter a valid number.",digits:"Please enter only digits.",maxLength:"Please enter no more than {0} characters.",minLength:"Please enter at least {0} characters.",rangeLength:"Please enter a value between {0} and {1} characters long.",range:"Please enter a value between {0} and {1}.",max:"Please enter a value less than or equal to {0}.",min:"Please enter a value greater than or equal to {0}.",regex:"Please enter a correct value.",tel:"Please enter a valid phone number.",pattern:"Please enter a correct pattern value.",equalTo:"Please enter the valid match text"},void 0===n.rules&&(n.rules={}),n.l10n=new uu("formValidator",n.defaultMessages,n.locale),n.locale&&n.localeFunc(),np.on("notifyExternalChange",n.afterLocalization,n),e="string"==typeof e?A(e,document):e,null!=n.element)return n.element.setAttribute("novalidate",""),n.inputElements=z(n.selectQuery,n.element),n.createHTML5Rules(),n.wireEvents(),n}nE(e,t),i=e,e.prototype.addRules=function(t,e){t&&(this.rules.hasOwnProperty(t)?l(this.rules[""+t],e,{}):this.rules[""+t]=e)},e.prototype.removeRules=function(t,e){if(t||e)if(this.rules[""+t]&&!e)delete this.rules[""+t];else{if(h(this.rules[""+t]&&e))return;for(var i=0;i<e.length;i++)delete this.rules[""+t][e[parseInt(i.toString())]]}else this.rules={}},e.prototype.validate=function(t){var e=Object.keys(this.rules);if(t&&e.length)return this.validateRules(t),-1!==e.indexOf(t)&&0===this.errorRules.filter(function(e){return e.name===t}).length;this.errorRules=[];for(var i=0,n=e;i<n.length;i++){var r=n[i];this.validateRules(r)}return 0===this.errorRules.length},e.prototype.reset=function(){this.element.reset(),this.clearForm()},e.prototype.getInputElement=function(t){return this.inputElement=A('[name="'+t+'"]',this.element),this.inputElement},e.prototype.destroy=function(){this.reset(),this.unwireEvents(),this.rules={};for(var e=0,i=z("."+this.errorClass+", ."+this.validClass,this.element);e<i.length;e++){T(i[e])}t.prototype.destroy.call(this),np.off("notifyExternalChange",this.afterLocalization)},e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"locale":this.localeFunc()}}},e.prototype.localeFunc=function(){for(var t=0,e=Object.keys(this.defaultMessages);t<e.length;t++){var i=e[t];this.l10n.setLocale(this.locale);var n=this.l10n.getConstant(i);this.localyMessage[""+i]=n}},e.prototype.getModuleName=function(){return"formValidator"},e.prototype.afterLocalization=function(t){this.locale=t.locale,this.localeFunc()},e.prototype.refresh=function(){this.unwireEvents(),this.inputElements=z(this.selectQuery,this.element),this.wireEvents()},e.prototype.clearForm=function(){this.errorRules=[],this.validated=[];for(var t=0,e=z(this.selectQuery,this.element);t<e.length;t++){var i=e[t];i.removeAttribute("aria-invalid"),i.classList.remove(this.errorClass),i.name.length>0&&(this.getInputElement(i.name),this.getErrorElement(i.name),this.hideMessage(i.name)),i.classList.remove(this.validClass)}},e.prototype.createHTML5Rules=function(){for(var t=["required","validateHidden","regex","rangeLength","maxLength","minLength","dateIso","digits","pattern","data-val-required","type","data-validation","min","max","range","equalTo","data-val-minlength-min","data-val-equalto-other","data-val-maxlength-max","data-val-range-min","data-val-regex-pattern","data-val-length-max","data-val-creditcard","data-val-phone"],e=["hidden","email","url","date","number","tel"],i=0,n=this.inputElements;i<n.length;i++){for(var r=n[i],o={},s=0,a=t;s<a.length;s++){var l=a[s];if(null!==r.getAttribute(l))switch(l){case"required":this.defRule(r,o,l,r.required);break;case"data-validation":l=r.getAttribute(l),this.defRule(r,o,l,!0);break;case"type":-1!==e.indexOf(r.type)&&this.defRule(r,o,r.type,!0);break;case"rangeLength":case"range":this.defRule(r,o,l,JSON.parse(r.getAttribute(l)));break;case"equalTo":var h=r.getAttribute(l);this.defRule(r,o,l,h);break;default:"true"===r.getAttribute("data-val")?this.annotationRule(r,o,l,r.getAttribute(l)):this.defRule(r,o,l,r.getAttribute(l))}}0!==Object.keys(o).length&&this.addRules(r.name,o)}},e.prototype.annotationRule=function(t,e,i,n){var r=i.split("-"),o=["required","creditcard","phone","maxlength","minlength","range","regex","equalto"],s=r[r.length-1],a=r[r.length-2];if(-1!==o.indexOf(s))switch(s){case"required":this.defRule(t,e,"required",n);break;case"creditcard":this.defRule(t,e,"creditcard",n);break;case"phone":this.defRule(t,e,"tel",n)}else if(-1!==o.indexOf(a))switch(a){case"maxlength":this.defRule(t,e,"maxLength",n);break;case"minlength":this.defRule(t,e,"minLength",n);break;case"range":var l=t.getAttribute("data-val-range-min"),h=t.getAttribute("data-val-range-max");this.defRule(t,e,"range",[l,h]);break;case"equalto":var c=t.getAttribute(i).split(".");this.defRule(t,e,"equalTo",c[c.length-1]);break;case"regex":this.defRule(t,e,"regex",n)}},e.prototype.defRule=function(t,e,i,n){var r,o=t.getAttribute("data-"+i+"-message"),s=t.getAttribute("data-val-"+i);this.rules[t.name]&&"validateHidden"!==i&&"hidden"!==i&&(this.getInputElement(t.name),r=this.getErrorMessage(this.rules[t.name][""+i],i)),o?n=[n,o]:s?n=[n,s]:r&&(n=[n,r]),e[""+i]=n},e.prototype.wireEvents=function(){for(var t=0,e=this.inputElements;t<e.length;t++){var n=e[t];i.isCheckable(n)?Ep.add(n,"click",this.clickHandler,this):"SELECT"===n.tagName?Ep.add(n,"change",this.changeHandler,this):(Ep.add(n,"focusout",this.focusOutHandler,this),Ep.add(n,"keyup",this.keyUpHandler,this))}Ep.add(this.element,"submit",this.submitHandler,this),Ep.add(this.element,"reset",this.resetHandler,this)},e.prototype.unwireEvents=function(){for(var t=0,e=this.inputElements;t<e.length;t++){var i=e[t];Ep.clearEvents(i)}Ep.remove(this.element,"submit",this.submitHandler),Ep.remove(this.element,"reset",this.resetHandler)},e.prototype.focusOutHandler=function(t){this.trigger("focusout",t);var e=t.target;this.rules[e.name]&&(this.rules[e.name][this.required]||e.value.length>0?this.validate(e.name):-1===this.validated.indexOf(e.name)&&this.validated.push(e.name))},e.prototype.keyUpHandler=function(t){this.trigger("keyup",t);var e=t.target;(9!==t.which||this.rules[e.name]&&(!this.rules[e.name]||this.rules[e.name][this.required]))&&-1!==this.validated.indexOf(e.name)&&this.rules[e.name]&&-1===[16,17,18,20,35,36,37,38,39,40,45,144,225].indexOf(t.which)&&this.validate(e.name)},e.prototype.clickHandler=function(t){this.trigger("click",t);var e=t.target;"submit"!==e.type?this.validate(e.name):null!==e.getAttribute("formnovalidate")&&(this.allowSubmit=!0)},e.prototype.changeHandler=function(t){this.trigger("change",t);var e=t.target;this.validate(e.name)},e.prototype.submitHandler=function(t){this.trigger("submit",t),this.allowSubmit||this.validate()?this.allowSubmit=!1:t.preventDefault()},e.prototype.resetHandler=function(){this.clearForm()},e.prototype.validateRules=function(t){if(this.rules[""+t]){var e=Object.keys(this.rules[""+t]),i=!1,n=!1,r=e.indexOf("validateHidden"),o=e.indexOf("hidden");if(this.getInputElement(t),-1!==o&&(i=!0),-1!==r&&(n=!0),!i||i&&n){-1!==r&&e.splice(r,1),-1!==o&&e.splice(o-1,1),this.getErrorElement(t);for(var s=0,a=e;s<a.length;s++){var l=a[s],h=this.getErrorMessage(this.rules[""+t][""+l],l),c={name:t,message:h},d={inputName:t,element:this.inputElement,message:h};if(!this.isValid(t,l)&&!this.inputElement.classList.contains(this.ignore)){this.removeErrorRules(t),this.errorRules.push(c),this.inputElement.setAttribute("aria-invalid","true"),this.inputElement.setAttribute("aria-describedby",this.inputElement.id+"-info"),this.inputElement.classList.add(this.errorClass),this.inputElement.classList.remove(this.validClass),this.infoElement?this.showMessage(c):this.createErrorElement(t,c.message,this.inputElement),d.errorElement=this.infoElement,d.status="failure",this.inputElement.classList.add(this.errorClass),this.inputElement.classList.remove(this.validClass),this.optionalValidationStatus(t,d),this.trigger("validationComplete",d),"required"===l&&this.inputElement.setAttribute("aria-required","true");break}this.hideMessage(t),d.status="success",this.trigger("validationComplete",d)}}}},e.prototype.optionalValidationStatus=function(t,e){this.rules[""+t][this.required]||this.inputElement.value.length||h(this.infoElement)||(this.infoElement.innerHTML=this.inputElement.value,this.infoElement.setAttribute("aria-invalid","false"),e.status="",this.hideMessage(t))},e.prototype.isValid=function(t,e){var n=this.rules[""+t][""+e],r=n instanceof Array&&"string"==typeof n[1]?n[0]:n,o=this.rules[""+t][""+e],s={value:this.inputElement.value,param:r,element:this.inputElement,formElement:this.element};if(this.trigger("validationBegin",s),!s.param&&"required"===e)return!0;if(o&&"function"==typeof o[0]){return o[0].call(this,{element:this.inputElement,value:this.inputElement.value})}return i.isCheckable(this.inputElement)?"required"!==e||z('input[name="'+t+'"]:checked',this.element).length>0:i.checkValidator[""+e](s)},e.prototype.getErrorMessage=function(t,e){var i=this.inputElement.getAttribute("data-"+e+"-message")?this.inputElement.getAttribute("data-"+e+"-message"):t instanceof Array&&"string"==typeof t[1]?t[1]:0!==Object.keys(this.localyMessage).length?this.localyMessage[""+e]:this.defaultMessages[""+e],n=i.match(/{(\d)}/g);if(!h(n))for(var r=0;r<n.length;r++){var o=t instanceof Array?t[parseInt(r.toString())]:t;i=i.replace(n[parseInt(r.toString())],o)}return i},e.prototype.createErrorElement=function(t,e,i){var n=w(this.errorElement,{className:this.errorClass,innerHTML:e,attrs:{for:t}});if(this.errorOption===TC.Message&&(n.classList.remove(this.errorClass),n.classList.add("e-message"),n=w(this.errorContainer,{className:this.errorClass,innerHTML:n.outerHTML})),n.id=this.inputElement.name+"-info",this.element.querySelector('[data-valmsg-for="'+i.id+'"]'))this.element.querySelector('[data-valmsg-for="'+i.id+'"]').appendChild(n);else if(!0===i.hasAttribute("data-msg-containerid")){A("#"+i.getAttribute("data-msg-containerid"),this.element).appendChild(n)}else null!=this.customPlacement?this.customPlacement.call(this,this.inputElement,n):this.inputElement.parentNode.insertBefore(n,this.inputElement.nextSibling);n.style.display="block",this.getErrorElement(t),this.validated.push(t),this.checkRequired(t)},e.prototype.getErrorElement=function(t){return this.infoElement=A(this.errorElement+"."+this.errorClass,this.inputElement.parentElement),this.infoElement||(this.infoElement=A(this.errorElement+"."+this.errorClass+'[for="'+t+'"]',this.element)),this.infoElement},e.prototype.removeErrorRules=function(t){for(var e=0;e<this.errorRules.length;e++){this.errorRules[parseInt(e.toString())].name===t&&this.errorRules.splice(e,1)}},e.prototype.showMessage=function(t){this.infoElement.style.display="block",this.infoElement.innerHTML=t.message,this.checkRequired(t.name)},e.prototype.hideMessage=function(t){this.infoElement&&(this.infoElement.style.display="none",this.removeErrorRules(t),this.inputElement.classList.add(this.validClass),this.inputElement.classList.remove(this.errorClass),this.inputElement.setAttribute("aria-invalid","false"))},e.prototype.checkRequired=function(t){this.rules[""+t][this.required]||this.inputElement.value.length||h(this.infoElement)||(this.infoElement.innerHTML=this.inputElement.value,this.infoElement.setAttribute("aria-invalid","false"),this.hideMessage(t))},e.isCheckable=function(t){var e=t.getAttribute("type");return e&&("checkbox"===e||"radio"===e||"submit"===e)};var i;e.checkValidator={required:function(t){return isNaN(Date.parse(t.value))?t.value.toString().length>0:!isNaN(new Date(t.value).getTime())},email:function(t){return oE.EMAIL.test(t.value)},url:function(t){return oE.URL.test(t.value)},dateIso:function(t){return oE.DATE_ISO.test(t.value)},tel:function(t){return oE.PHONE.test(t.value)},creditcard:function(t){return oE.CREDITCARD.test(t.value)},number:function(t){return!isNaN(Number(t.value))&&-1===t.value.indexOf(" ")},digits:function(t){return oE.DIGITS.test(t.value)},maxLength:function(t){return t.value.length<=t.param},minLength:function(t){return t.value.length>=t.param},rangeLength:function(t){var e=t.param;return t.value.length>=e[0]&&t.value.length<=e[1]},range:function(t){var e=t.param;return!isNaN(Number(t.value))&&Number(t.value)>=e[0]&&Number(t.value)<=e[1]},date:function(t){return!isNaN(new Date(t.value).getTime())},max:function(t){return isNaN(Number(t.value))?new Date(t.value).getTime()<=new Date(JSON.parse(JSON.stringify(t.param))).getTime():+t.value<=t.param},min:function(t){if(isNaN(Number(t.value))){if(-1!==t.value.indexOf(",")){var e=t.value.replace(/,/g,"");return parseFloat(e)>=t.param}return new Date(t.value).getTime()>=new Date(JSON.parse(JSON.stringify(t.param))).getTime()}return+t.value>=t.param},regex:function(t){return new RegExp(t.param).test(t.value)},equalTo:function(t){var e=t.formElement.querySelector("#"+t.param);return t.param=e.value,t.param===t.value}},rE([W("")],e.prototype,"locale",void 0),rE([W("e-hidden")],e.prototype,"ignore",void 0),rE([W()],e.prototype,"rules",void 0),rE([W("e-error")],e.prototype,"errorClass",void 0),rE([W("e-valid")],e.prototype,"validClass",void 0),rE([W("label")],e.prototype,"errorElement",void 0),rE([W("div")],e.prototype,"errorContainer",void 0),rE([W(TC.Label)],e.prototype,"errorOption",void 0),rE([Z()],e.prototype,"focusout",void 0),rE([Z()],e.prototype,"keyup",void 0),rE([Z()],e.prototype,"click",void 0),rE([Z()],e.prototype,"change",void 0),rE([Z()],e.prototype,"submit",void 0),rE([Z()],e.prototype,"validationBegin",void 0),rE([Z()],e.prototype,"validationComplete",void 0),rE([Z()],e.prototype,"customPlacement",void 0),e=i=rE([$],e)}(Op);var sE,aE=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),lE=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},hE="e-upload-file-list",cE="e-file-status",dE="e-file-remove-btn",pE="e-file-delete-btn",uE="e-file-abort-btn",gE="e-file-reload-btn",mE="e-upload-drag-hover",fE="e-upload-progress-wrap",vE="e-upload-progress-bar",yE="e-progress-bar-text",bE="e-upload-progress",SE="e-upload-success",wE="e-upload-fails",IE="e-file-container",xE="e-clear-icon-focus",ME="e-file-pause-btn",CE="e-file-play-btn",NE="e-restrict-retry",EE=["title","style","class"],DE="e-file-invalid",TE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return aE(e,t),lE([W("")],e.prototype,"name",void 0),lE([W(null)],e.prototype,"size",void 0),lE([W("")],e.prototype,"type",void 0),e}(Rp),OE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return aE(e,t),lE([W("Browse...")],e.prototype,"browse",void 0),lE([W("Upload")],e.prototype,"upload",void 0),lE([W("Clear")],e.prototype,"clear",void 0),e}(Rp),LE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return aE(e,t),lE([W("")],e.prototype,"saveUrl",void 0),lE([W("")],e.prototype,"removeUrl",void 0),lE([W(0)],e.prototype,"chunkSize",void 0),lE([W(3)],e.prototype,"retryCount",void 0),lE([W(500)],e.prototype,"retryAfterDelay",void 0),e}(Rp),AE=(function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.initialAttr={accept:null,multiple:!1,disabled:!1},n.uploadedFilesData=[],n.base64String=[],n.isForm=!1,n.allTypes=!1,n.pausedData=[],n.uploadMetaData=[],n.tabIndex="0",n.btnTabIndex="0",n.disableKeyboardNavigation=!1,n.count=-1,n.actionCompleteCount=0,n.flag=!0,n.selectedFiles=[],n.uploaderName="UploadFiles",n.fileStreams=[],n.newFileRef=0,n.isFirstFileOnSelection=!1,n.dragCounter=0,n.isAngular=!1,n.fileList=[],n.filesData=[],n.uploaderOptions=e,n}aE(e,t),e.prototype.onPropertyChanged=function(t,e){for(var i=0,r=Object.keys(t);i<r.length;i++){switch(r[i]){case"allowedExtensions":this.setExtensions(this.allowedExtensions),this.clearAll();break;case"enabled":this.setControlStatus();break;case"multiple":this.setMultipleSelection();break;case"enableRtl":this.setRTL(),this.reRenderFileList();break;case"buttons":this.buttons.browse=h(this.buttons.browse)?"":this.buttons.browse,this.buttons.clear=h(this.buttons.clear)?"":this.buttons.clear,this.buttons.upload=h(this.buttons.upload)?"":this.buttons.upload,this.renderButtonTemplates();break;case"dropArea":this.unBindDropEvents(),this.updateDropArea();break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.checkHTMLAttributes(!0);break;case"files":this.renderPreLoadFiles();break;case"directoryUpload":this.updateDirectoryAttributes();break;case"template":this.clearAll();break;case"minFileSize":case"maxFileSize":case"autoUpload":case"sequentialUpload":this.clearAll();break;case"locale":this.l10n.setLocale(this.locale),this.setLocalizedTexts(),this.preLocaleObj=n("currentLocale",this.l10n);break;case"cssClass":this.setCSSClass(e.cssClass)}}},e.prototype.setLocalizedTexts=function(){h(this.template)&&("string"==typeof this.buttons.browse&&(this.browseButton.innerText="Browse..."===this.buttons.browse?this.localizedTexts("Browse"):this.buttons.browse,this.browseButton.setAttribute("title",this.browseButton.innerText),this.uploadWrapper&&!h(this.uploadWrapper.querySelector(".e-file-drop"))&&(this.uploadWrapper.querySelector(".e-file-drop").innerHTML=this.localizedTexts("dropFilesHint"))),this.updateFileList())},e.prototype.getKeyValue=function(t){for(var e,i=0,n=Object.keys(this.preLocaleObj);i<n.length;i++){var r=n[i];this.preLocaleObj[""+r]===t&&(e=r)}return e},e.prototype.updateFileList=function(){if(this.fileList.length>0&&!h(this.uploadWrapper.querySelector(".e-upload-files")))for(var t=0;t<this.fileList.length;t++)this.fileList[t].querySelector(".e-file-status").innerHTML=this.localizedTexts(this.getKeyValue(this.filesData[t].status)),this.filesData[t].status=this.localizedTexts(this.getKeyValue(this.filesData[t].status)),this.fileList[t].classList.contains(SE)&&this.fileList[t].querySelector(".e-icons").setAttribute("title",this.localizedTexts("delete")),this.fileList[t].querySelector(".e-file-play-btn")&&this.fileList[t].querySelector(".e-icons").setAttribute("title",this.localizedTexts("resume")),this.fileList[t].querySelector(".e-file-remove-btn")&&this.fileList[t].querySelector(".e-icons").setAttribute("title",this.localizedTexts("remove")),this.fileList[t].querySelector(".e-file-reload-btn")&&this.fileList[t].querySelector(".e-icons").setAttribute("title",this.localizedTexts("retry")),this.autoUpload||(this.uploadButton.innerText="Upload"===this.buttons.upload?this.localizedTexts("Upload"):this.buttons.upload,this.uploadButton.setAttribute("title",this.localizedTexts("Upload")),this.clearButton.innerText="Clear"===this.buttons.clear?this.localizedTexts("Clear"):this.buttons.clear,this.clearButton.setAttribute("title",this.localizedTexts("Clear")))},e.prototype.reRenderFileList=function(){this.listParent&&(T(this.listParent),this.listParent=null,this.fileList=[],this.createFileList(this.filesData),this.actionButtons&&(this.removeActionButtons(),this.renderActionButtons(),this.checkActionButtonStatus()))},e.prototype.preRender=function(){this.localeText={Browse:"Browse...",Clear:"Clear",Upload:"Upload",invalidFileName:"File Name is not allowed",dropFilesHint:"Or drop files here",invalidMaxFileSize:"File size is too large",invalidMinFileSize:"File size is too small",invalidFileType:"File type is not allowed",uploadFailedMessage:"File failed to upload",uploadSuccessMessage:"File uploaded successfully",removedSuccessMessage:"File removed successfully",removedFailedMessage:"Unable to remove file",inProgress:"Uploading",readyToUploadMessage:"Ready to upload",abort:"Abort",remove:"Remove",cancel:"Cancel",delete:"Delete file",pauseUpload:"File upload paused",pause:"Pause",resume:"Resume",retry:"Retry",fileUploadCancel:"File upload canceled",invalidFileSelection:"Invalid files selected",totalFiles:"Total files",size:"Size"},this.l10n=new uu("uploader",this.localeText,this.locale),this.preLocaleObj=n("currentLocale",this.l10n),this.formRendered(),this.updateHTMLAttrToElement(),this.checkHTMLAttributes(!1);var t=n("ej2_instances",this.element);if("EJS-UPLOADER"===this.element.tagName){for(var e=this.createElement("input",{attrs:{type:"file"}}),i=0;i<this.element.attributes.length;i++)"id"!==this.element.attributes[i].nodeName?e.setAttribute(this.element.attributes[i].nodeName,this.element.attributes[i].nodeValue):"id"===this.element.attributes[i].nodeName&&e.setAttribute(this.element.attributes[i].nodeName,d("uploader")),e.innerHTML=this.element.innerHTML;e.hasAttribute("name")||e.setAttribute("name","UploadFiles"),this.element.appendChild(e),this.element=e,r("ej2_instances",t,this.element)}t[0].isPureReactComponent&&(h(t[0].props.name)?!h(t[0].props.id)&&h(t[0].props.name)?this.element.setAttribute("name",t[0].props.id):this.element.setAttribute("name","UploadFiles"):this.element.setAttribute("name",t[0].props.name)),h(this.element.getAttribute("name"))&&this.element.setAttribute("name",this.element.getAttribute("id")),this.element.hasAttribute("type")||this.element.setAttribute("type","file"),this.updateDirectoryAttributes(),this.keyConfigs={enter:"enter"},this.element.hasAttribute("tabindex")&&(this.tabIndex=this.element.getAttribute("tabindex")),this.browserName=Np.info.name,this.uploaderName=this.element.getAttribute("name")},e.prototype.formRendered=function(){var t=j(this.element,"form");if(!h(t))for(;t&&t!==document.documentElement;t=t.parentElement)"FORM"===t.tagName&&(this.isForm=!0,this.formElement=t,t.setAttribute("enctype","multipart/form-data"),t.setAttribute("encoding","multipart/form-data"))},e.prototype.getPersistData=function(){return this.addOnPersist(["filesData"])},e.prototype.getModuleName=function(){return"uploader"},e.prototype.updateDirectoryAttributes=function(){this.directoryUpload?(this.element.setAttribute("directory","true"),this.element.setAttribute("webkitdirectory","true")):(this.element.removeAttribute("directory"),this.element.removeAttribute("webkitdirectory"))},e.prototype.render=function(){this.renderBrowseButton(),this.initializeUpload(),this.updateHTMLAttrToWrapper(),this.wireEvents(),this.setMultipleSelection(),this.setExtensions(this.allowedExtensions),this.setRTL(),this.renderPreLoadFiles(),this.setControlStatus(),this.setCSSClass()},e.prototype.renderBrowseButton=function(){this.browseButton=this.createElement("button",{className:"e-css e-btn",attrs:{type:"button"}}),this.browseButton.setAttribute("tabindex",this.tabIndex),"string"==typeof this.buttons.browse?(this.browseButton.textContent="Browse..."===this.buttons.browse?this.localizedTexts("Browse"):this.buttons.browse,this.browseButton.setAttribute("title",this.browseButton.innerText)):this.browseButton.appendChild(this.buttons.browse),this.element.setAttribute("aria-label","Uploader")},e.prototype.renderActionButtons=function(){this.element.setAttribute("tabindex","-1"),this.actionButtons=this.createElement("div",{className:"e-upload-actions"}),this.uploadButton=this.createElement("button",{className:"e-file-upload-btn e-css e-btn e-flat e-primary",attrs:{type:"button",tabindex:this.btnTabIndex}}),this.clearButton=this.createElement("button",{className:"e-file-clear-btn e-css e-btn e-flat",attrs:{type:"button",tabindex:this.btnTabIndex}}),this.actionButtons.appendChild(this.clearButton),this.actionButtons.appendChild(this.uploadButton),this.renderButtonTemplates(),this.uploadWrapper.appendChild(this.actionButtons),this.browseButton.blur(),this.isPreloadFiles||this.uploadButton.focus(),this.wireActionButtonEvents()},e.prototype.serverActionButtonsEventBind=function(t){t&&!this.isForm&&(this.browseButton.blur(),this.actionButtons=t,this.uploadButton=this.actionButtons.querySelector(".e-file-upload-btn"),this.clearButton=this.actionButtons.querySelector(".e-file-clear-btn"),this.uploadButton.focus(),this.unwireActionButtonEvents(),this.wireActionButtonEvents(),this.checkActionButtonStatus())},e.prototype.wireActionButtonEvents=function(){Ep.add(this.uploadButton,"click",this.uploadButtonClick,this),Ep.add(this.clearButton,"click",this.clearButtonClick,this)},e.prototype.unwireActionButtonEvents=function(){Ep.remove(this.uploadButton,"click",this.uploadButtonClick),Ep.remove(this.clearButton,"click",this.clearButtonClick)},e.prototype.removeActionButtons=function(){this.actionButtons&&(this.unwireActionButtonEvents(),T(this.actionButtons),this.actionButtons=null)},e.prototype.renderButtonTemplates=function(){if("string"==typeof this.buttons.browse?(this.browseButton.textContent="Browse..."===this.buttons.browse?this.localizedTexts("Browse"):this.buttons.browse,this.browseButton.setAttribute("title",this.browseButton.textContent)):(this.browseButton.innerHTML="",this.browseButton.appendChild(this.buttons.browse)),this.uploadButton){var t=h(this.buttons.upload)?"Upload":this.buttons.upload;this.buttons.upload=t,"string"==typeof this.buttons.upload?(this.uploadButton.textContent="Upload"===this.buttons.upload?this.localizedTexts("Upload"):this.buttons.upload,this.uploadButton.setAttribute("title",this.uploadButton.textContent)):(this.uploadButton.innerHTML="",this.uploadButton.appendChild(this.buttons.upload))}if(this.clearButton){var e=h(this.buttons.clear)?"Clear":this.buttons.clear;this.buttons.clear=e,"string"==typeof this.buttons.clear?(this.clearButton.textContent="Clear"===this.buttons.clear?this.localizedTexts("Clear"):this.buttons.clear,this.clearButton.setAttribute("title",this.clearButton.textContent)):(this.clearButton.innerHTML="",this.clearButton.appendChild(this.buttons.clear))}},e.prototype.initializeUpload=function(){this.element.setAttribute("tabindex","-1");var t=this.createElement("span",{className:"e-file-select"});this.element.parentElement.insertBefore(t,this.element),this.dropAreaWrapper=this.createElement("div",{className:"e-file-select-wrap"}),this.element.parentElement.insertBefore(this.dropAreaWrapper,this.element),t.appendChild(this.element),this.dropAreaWrapper.appendChild(this.browseButton),this.dropAreaWrapper.appendChild(t),this.uploadWrapper=this.createElement("div",{className:"e-upload e-control-wrapper"}),this.dropAreaWrapper.parentElement.insertBefore(this.uploadWrapper,this.dropAreaWrapper),this.uploadWrapper.appendChild(this.dropAreaWrapper),this.setDropArea()},e.prototype.renderPreLoadFiles=function(){if(this.files.length){if(this.enablePersistence&&this.filesData.length)return void this.createFileList(this.filesData);if(h(this.files[0].size))return;this.isPreloadFiles=!0;var t=[].slice.call(this.files),e=[];this.multiple||(this.clearData(),t=[t[0]]);for(var i=0,n=t;i<n.length;i++){var r=n[i],o={name:r.name+"."+r.type.split(".")[r.type.split(".").length-1],rawFile:"",size:r.size,status:this.localizedTexts("uploadSuccessMessage"),type:r.type,validationMessages:{minSize:"",maxSize:""},statusCode:"2"};e.push(o),this.filesData.push(o)}this.createFileList(e),this.autoUpload||!this.listParent||this.actionButtons||this.isForm&&!this.allowUpload()||!this.showFileList||this.renderActionButtons(),this.checkActionButtonStatus(),this.sequentialUpload&&(this.count=this.filesData.length-1),this.isPreloadFiles=!1}},e.prototype.checkActionButtonStatus=function(){if(this.actionButtons){var t=this.uploadWrapper.querySelectorAll(".e-validation-fails").length+this.uploadWrapper.querySelectorAll(".e-upload-fails:not(.e-upload-progress)").length+this.uploadWrapper.querySelectorAll("span."+SE).length+this.uploadWrapper.querySelectorAll("span."+bE).length;t>0&&t===this.uploadWrapper.querySelectorAll("li").length?this.uploadButton.setAttribute("disabled","disabled"):this.uploadButton.removeAttribute("disabled")}},e.prototype.setDropArea=function(){var t=this.dropAreaWrapper.querySelector(".e-file-drop");if(this.dropArea){this.dropZoneElement="string"!=typeof this.dropArea?this.dropArea:A(this.dropArea,document);for(var e=this.element,i=!1;e.parentNode;)(e=e.parentNode)===this.dropZoneElement&&(i=!0,t?t.innerHTML=this.localizedTexts("dropFilesHint"):this.createDropTextHint());!i&&t&&O(t)}else h(this.uploaderOptions)||void 0!==this.uploaderOptions.dropArea||(this.createDropTextHint(),this.dropZoneElement=this.uploadWrapper,this.setProperties({dropArea:this.uploadWrapper},!0));this.bindDropEvents()},e.prototype.updateDropArea=function(){if(this.dropArea)this.setDropArea();else{this.dropZoneElement=null;var t=this.dropAreaWrapper.querySelector(".e-file-drop");t&&O(t)}},e.prototype.createDropTextHint=function(){var t=this.createElement("span",{className:"e-file-drop"});t.innerHTML=this.localizedTexts("dropFilesHint"),this.dropAreaWrapper.appendChild(t)},e.prototype.updateHTMLAttrToElement=function(){if(!h(this.htmlAttributes))for(var t=0,e=Object.keys(this.htmlAttributes);t<e.length;t++){var i=e[t];EE.indexOf(i)<0&&this.element.setAttribute(i,this.htmlAttributes[""+i])}},e.prototype.updateHTMLAttrToWrapper=function(){if(!h(this.htmlAttributes))for(var t=0,e=Object.keys(this.htmlAttributes);t<e.length;t++){var i=e[t];if(EE.indexOf(i)>-1)if("class"===i){var n=this.htmlAttributes[""+i].replace(/\s+/g," ").trim();""!==n&&I([this.uploadWrapper],n.split(" "))}else if("style"===i){var r=this.uploadWrapper.getAttribute(i);r=h(r)?this.htmlAttributes[""+i]:r+this.htmlAttributes[""+i],this.uploadWrapper.setAttribute(i,r)}else this.uploadWrapper.setAttribute(i,this.htmlAttributes[""+i])}},e.prototype.setMultipleSelection=function(){if(this.multiple&&!this.element.hasAttribute("multiple")){var t=document.createAttribute("multiple");t.value="multiple",this.element.setAttributeNode(t)}else this.multiple||this.element.removeAttribute("multiple")},e.prototype.checkAutoUpload=function(t){this.autoUpload?(this.sequentialUpload?this.sequenceUpload(t):this.upload(t),this.removeActionButtons()):this.actionButtons||this.renderActionButtons(),this.checkActionButtonStatus()},e.prototype.sequenceUpload=function(t){if(this.filesData.length-t.length==0||"1"!==this.filesData[this.filesData.length-t.length-1].statusCode){(this.multiple||this.count<0)&&++this.count;var e=!this.showFileList;"object"==typeof this.filesData[this.count]?(this.isFirstFileOnSelection=!1,this.upload(this.filesData[this.count],e),"0"===this.filesData[this.count].statusCode&&this.sequenceUpload(t)):--this.count}},e.prototype.setCSSClass=function(t){var e=t;h(t)||(e=t.replace(/\s+/g," ").trim()),h(t)||""===e||x([this.uploadWrapper],e.split(" "));var i=this.cssClass;h(this.cssClass)||""===this.cssClass||(i=this.cssClass.replace(/\s+/g," ").trim()),h(this.cssClass)||""===i||I([this.uploadWrapper],i.split(i.indexOf(",")>-1?",":" "))},e.prototype.wireEvents=function(){Ep.add(this.browseButton,"click",this.browseButtonClick,this),Ep.add(this.element,"change",this.onSelectFiles,this),Ep.add(document,"click",this.removeFocus,this),this.keyboardModule=new pu(this.uploadWrapper,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.isForm&&Ep.add(this.formElement,"reset",this.resetForm,this)},e.prototype.unWireEvents=function(){Ep.remove(this.browseButton,"click",this.browseButtonClick),Ep.remove(this.element,"change",this.onSelectFiles),Ep.remove(document,"click",this.removeFocus),this.isForm&&Ep.remove(this.formElement,"reset",this.resetForm),this.keyboardModule&&this.keyboardModule.destroy()},e.prototype.resetForm=function(){this.clearAll()},e.prototype.keyActionHandler=function(t){var e=t.target;switch(t.action){case"enter":if(t.target===this.clearButton)this.clearButtonClick();else if(t.target===this.uploadButton)this.uploadButtonClick();else if(t.target===this.browseButton)this.browseButtonClick();else if(e.classList.contains(ME)){(i=this.getCurrentMetaData(null,t)).file.statusCode="4",i.file.status=this.localizedTexts("pauseUpload"),this.abortUpload(i,!1)}else if(e.classList.contains(CE))this.resumeUpload(this.getCurrentMetaData(null,t),t);else if(e.classList.contains(gE)){var i;if(h(i=this.getCurrentMetaData(null,t))){var n=t.target.parentElement,r=this.filesData[this.fileList.indexOf(n)];this.retry(r)}else i.file.statusCode="1",i.file.status=this.localizedTexts("readyToUploadMessage"),this.chunkUpload(i.file)}else this.removeFiles(t),e.classList.contains(uE)||this.browseButton.focus();t.preventDefault(),t.stopPropagation()}},e.prototype.getCurrentMetaData=function(t,e){var i,n;if(h(t)){var r=e.target.parentElement;i=this.filesData[this.fileList.indexOf(r)]}else i=t;for(var o=0;o<this.uploadMetaData.length;o++)this.uploadMetaData[o].file.name===i.name&&(n=this.uploadMetaData[o]);return n},e.prototype.removeFocus=function(){this.uploadWrapper&&this.listParent&&this.listParent.querySelector("."+xE)&&(document.activeElement.blur(),this.listParent.querySelector("."+xE).classList.remove(xE))},e.prototype.browseButtonClick=function(){this.element.click()},e.prototype.uploadButtonClick=function(){this.sequentialUpload?this.sequenceUpload(this.filesData):this.upload(this.filesData)},e.prototype.clearButtonClick=function(){this.clearAll(),this.sequentialUpload&&(this.count=-1),this.actionCompleteCount=0},e.prototype.bindDropEvents=function(){this.dropZoneElement&&(Ep.add(this.dropZoneElement,"drop",this.dropElement,this),Ep.add(this.dropZoneElement,"dragover",this.dragHover,this),Ep.add(this.dropZoneElement,"dragleave",this.onDragLeave,this),Ep.add(this.dropZoneElement,"paste",this.onPasteFile,this),Ep.add(this.dropZoneElement,"dragenter",this.onDragEnter,this))},e.prototype.unBindDropEvents=function(){this.dropZoneElement&&(Ep.remove(this.dropZoneElement,"drop",this.dropElement),Ep.remove(this.dropZoneElement,"dragover",this.dragHover),Ep.remove(this.dropZoneElement,"dragleave",this.onDragLeave),Ep.remove(this.dropZoneElement,"dragenter",this.onDragEnter))},e.prototype.onDragEnter=function(t){this.enabled&&(this.dropZoneElement.classList.add(mE),this.dragCounter=this.dragCounter+1,t.preventDefault(),t.stopPropagation())},e.prototype.onDragLeave=function(){this.enabled&&(this.dragCounter=this.dragCounter-1,this.dragCounter||this.dropZoneElement.classList.remove(mE))},e.prototype.dragHover=function(t){this.enabled&&("Default"!==this.dropEffect&&(t.dataTransfer.dropEffect=this.dropEffect.toLowerCase()),t.preventDefault(),t.stopPropagation())},e.prototype.dropElement=function(t){this.dragCounter=0,this.dropZoneElement.classList.remove(mE),this.onSelectFiles(t),t.preventDefault(),t.stopPropagation()},e.prototype.onPasteFile=function(t){var e=t.clipboardData.items;if("paste"===t.type&&"msie"!==this.browserName&&"edge"!==this.browserName&&"safari"!==this.browserName&&(this.element.files=t.clipboardData.files),1===e.length){var i=[].slice.call(e)[0];"file"===i.kind&&i.type.match("^image/")&&this.renderSelectedFiles(t,[i.getAsFile()],!1,!0)}},e.prototype.getSelectedFiles=function(t){for(var e=[],i=this.fileList[t],n=this.getFilesData(),r=+i.getAttribute("data-files-count"),o=0,s=0;s<t;s++)o+=+this.fileList[s].getAttribute("data-files-count");for(var a=o;a<o+r;a++)e.push(n[a]);return e},e.prototype.removeFiles=function(t){if(this.enabled){var e=t.target.parentElement,i=this.fileList.indexOf(e),n=this.fileList[i],r=this.isFormUpload(),o=r?this.getSelectedFiles(i):this.getFilesInArray(this.filesData[i]);if(!h(o)){if(t.target.classList.contains(uE)&&!r){if(o[0].statusCode="5",!h(n)){var s=n.querySelector("."+uE);ki({target:s,width:"20px"}),Qi(s)}this.sequentialUpload&&this.uploadSequential(),n.classList.contains(NE)||this.checkActionComplete(!0)}else j(t.target,".e-spinner-pane")||this.remove(o,!1,!1,!0,t);this.checkActionButtonStatus()}}},e.prototype.removeFilesData=function(t,e){var i;if(e)this.showFileList||(i=this.filesData.indexOf(t),this.filesData.splice(i,1));else{var n=this.getLiElement(t);h(n)||(this.element.value="",T(n),i=this.fileList.indexOf(n),this.fileList.splice(i,1),this.filesData.splice(i,1),0!==this.fileList.length||h(this.listParent)||(T(this.listParent),this.listParent=null,this.removeActionButtons()),this.sequentialUpload&&i<=this.count&&--this.count)}},e.prototype.removeUploadedFile=function(t,e,i,n){var r=this,o=t,s=new gp(this.asyncSettings.removeUrl,"POST",!0,null);s.emitError=!1;var a=new FormData;s.beforeSend=function(n){e.currentRequest=s.httpRequest,i?r.removingEventCallback(e,a,o,t):r.trigger("removing",e,function(e){e.cancel?n.cancel=!0:r.removingEventCallback(e,a,o,t)})},s.onLoad=function(t){return r.removeCompleted(t,o,n),{}},s.onError=function(t){return r.removeFailed(t,o,n),{}},s.send(a)},e.prototype.removingEventCallback=function(t,e,i,n){var r=this.element.getAttribute("name"),o=this.getLiElement(n);if(!(h(o)||h(o.querySelector("."+pE))&&h(o.querySelector("."+dE)))){var s=o.querySelector("."+pE)?o.querySelector("."+pE):o.querySelector("."+dE);ki({target:s,width:"20px"}),Qi(s)}t.postRawFile&&!h(i.rawFile)&&""!==i.rawFile?e.append(r,i.rawFile,i.name):e.append(r,i.name),this.updateFormData(e,t.customFormData)},e.prototype.updateFormData=function(t,e){if(e.length>0&&e[0])for(var i=function(i){var n=e[i],r=Object.keys(n).map(function(t){return n[""+t]});t.append(Object.keys(n)[0],r)},n=0;n<e.length;n++)i(n)},e.prototype.updateCustomheader=function(t,e){if(e.length>0&&e[0])for(var i=function(i){var n=e[i],r=Object.keys(n).map(function(t){return n[""+t]});t.setRequestHeader(Object.keys(n)[0],r)},n=0;n<e.length;n++)i(n)},e.prototype.removeCompleted=function(t,e,i){var n=t&&t.currentTarget?this.getResponse(t):null,r=t.target;if(4===r.readyState&&r.status>=200&&r.status<=299){var o={e:t,response:n,operation:"remove",file:this.updateStatus(e,this.localizedTexts("removedSuccessMessage"),"2")};this.trigger("success",o),this.removeFilesData(e,i);var s=this.uploadedFilesData.indexOf(e);this.uploadedFilesData.splice(s,1),this.trigger("change",{files:this.uploadedFilesData})}else this.removeFailed(t,e,i)},e.prototype.removeFailed=function(t,e,i){var n={e:t,response:t&&t.currentTarget?this.getResponse(t):null,operation:"remove",file:this.updateStatus(e,this.localizedTexts("removedFailedMessage"),"0")};if(!i){var r=this.filesData.indexOf(e),o=this.fileList[r];if(o){o.classList.remove(SE),o.classList.add(wE);var s=o.querySelector("."+cE);s&&(s.classList.remove(SE),s.classList.add(wE))}this.checkActionButtonStatus()}this.trigger("failure",n);var a=this.getLiElement(e);if(!h(a)&&!h(a.querySelector("."+pE))){qi(a.querySelector("."+pE)),T(a.querySelector(".e-spinner-pane"))}},e.prototype.getFilesFromFolder=function(t){this.filesEntries=[];var e=this.multiple?t.dataTransfer.items:[t.dataTransfer.items[0]];if(this.checkDirectoryUpload(e))for(var i=function(i){var r=e[i].webkitGetAsEntry();if(r.isFile){var o=[];r.file(function(t){var e=r.fullPath;o.push({path:e,file:t})}),n.renderSelectedFiles(t,o,!0)}else r.isDirectory&&n.traverseFileTree(r,t)},n=this,r=0;r<e.length;r++)i(r)},e.prototype.checkDirectoryUpload=function(t){for(var e=0;t&&e<t.length;e++){if(t[e].webkitGetAsEntry().isDirectory)return!0}return!1},e.prototype.traverseFileTree=function(t,e){if(t.isFile)this.filesEntries.push(t);else if(t.isDirectory){var i=t.createReader();this.readFileFromDirectory(i,e)}},e.prototype.readFileFromDirectory=function(t,e){var i=this;t.readEntries(function(n){for(var r=0;r<n.length;r++)i.traverseFileTree(n[r],e);i.pushFilesEntries(e),n.length&&i.readFileFromDirectory(t)})},e.prototype.pushFilesEntries=function(t){for(var e=this,i=[],n=function(n){r.filesEntries[n].file(function(r){if(e.filesEntries.length){var o=e.filesEntries[n].fullPath;i.push({path:o,file:r}),n===e.filesEntries.length-1&&(e.filesEntries=[],e.renderSelectedFiles(t,i,!0))}})},r=this,o=0;o<this.filesEntries.length;o++)n(o)},e.prototype.onSelectFiles=function(t){if(this.enabled){var e;if("drop"===t.type)if(this.directoryUpload)this.getFilesFromFolder(t);else{var i=this.sortFilesList=t.dataTransfer.files;"msie"!==this.browserName&&"edge"!==this.browserName&&"safari"!==this.browserName&&(this.element.files=i),i.length>0&&(e=this.multiple?this.sortFileList(i):[i[0]],this.renderSelectedFiles(t,e))}else e=[].slice.call(t.target.files),this.renderSelectedFiles(t,e);this.isAngular&&t.stopPropagation()}},e.prototype.getBase64=function(t){return new Promise(function(e,i){var n=new FileReader;n.readAsDataURL(t),n.onload=function(){return e(n.result)},n.onerror=function(t){return i(t)}})},e.prototype.renderSelectedFiles=function(t,e,i,n){var r=this;this.base64String=[];var o={event:t,cancel:!1,filesData:[],isModified:!1,modifiedFilesData:[],progressInterval:"",isCanceled:!1,currentRequest:null,customFormData:null};if(e.length<1)return o.isCanceled=!0,void this.trigger("selected",o);this.flag=!0;var s=[];this.multiple||(this.clearData(!0),e=[e[0]]);for(var a=0;a<e.length;a++){var l=i?e[a].file:e[a];this.updateInitialFileDetails(t,e,l,a,s,i,n)}if(o.filesData=s,this.allowedExtensions.indexOf("*")>-1&&(this.allTypes=!0),this.enableHtmlSanitizer)for(a=0;a<s.length;a++){var h=Yu.beforeSanitize();if(Yu.serializeValue(h,s[parseInt(a.toString())].name)!==s[parseInt(a.toString())].name){var c=e[parseInt(a.toString())].name.replace(/[\u00A0-\u9999<>\&]/g,function(t){return"&#"+t.charCodeAt(0)+";"});s[parseInt(a.toString())].name=c,s[parseInt(a.toString())].status=this.localizedTexts("invalidFileName"),s[parseInt(a.toString())].statusCode="0"}}this.allTypes||(s=this.checkExtension(s)),this.trigger("selected",o,function(t){r._internalRenderSelect(t,s)})},e.prototype.updateInitialFileDetails=function(t,e,i,n,r,o,s){var a={name:o?e[n].path.substring(1,e[n].path.length):s?d(i.name.substring(0,i.name.lastIndexOf(".")))+"."+this.getFileType(i.name):this.directoryUpload?e[n].webkitRelativePath:i.name,rawFile:i,size:i.size,status:this.localizedTexts("readyToUploadMessage"),type:this.getFileType(i.name),validationMessages:this.validatedFileSize(i.size),statusCode:"1",id:d(i.name.substring(0,i.name.lastIndexOf(".")))+"."+this.getFileType(i.name)};s&&(a.fileSource="paste"),a.status=""!==a.validationMessages.minSize?this.localizedTexts("invalidMinFileSize"):""!==a.validationMessages.maxSize?this.localizedTexts("invalidMaxFileSize"):a.status,""===a.validationMessages.minSize&&""===a.validationMessages.maxSize||(a.statusCode="0"),r.push(a)},e.prototype._internalRenderSelect=function(t,e){if(!t.cancel){if(this.selectedFiles=this.selectedFiles.concat(e),this.btnTabIndex=this.disableKeyboardNavigation?"-1":"0",this.showFileList){if(t.isModified&&t.modifiedFilesData.length>0){for(var i=0;i<t.modifiedFilesData.length;i++)for(var n=0;n<e.length;n++)t.modifiedFilesData[i].id===e[n].id&&(t.modifiedFilesData[i].rawFile=e[n].rawFile);var r=this.allTypes?t.modifiedFilesData:this.checkExtension(t.modifiedFilesData);this.updateSortedFileList(r),this.filesData=r,this.isForm&&!this.allowUpload()||this.checkAutoUpload(r)}else this.createFileList(e,!0),this.filesData=this.filesData.concat(e),this.isForm&&!this.allowUpload()||this.checkAutoUpload(e);h(t.progressInterval)||""===t.progressInterval||(this.progressInterval=t.progressInterval)}else this.filesData=this.filesData.concat(e),this.autoUpload&&this.upload(this.filesData,!0);this.raiseActionComplete(),this.isFirstFileOnSelection=!0}},e.prototype.allowUpload=function(){var t=!1;return this.isForm&&!h(this.asyncSettings.saveUrl)&&""!==this.asyncSettings.saveUrl&&(t=!0),t},e.prototype.isFormUpload=function(){var t=!1;return!this.isForm||!h(this.asyncSettings.saveUrl)&&""!==this.asyncSettings.saveUrl||!h(this.asyncSettings.removeUrl)&&""!==this.asyncSettings.removeUrl||(t=!0),t},e.prototype.clearData=function(t){h(this.listParent)||(T(this.listParent),this.listParent=null),"msie"===this.browserName||t||(this.element.value=""),this.fileList=[],this.filesData=[],this.removeActionButtons()},e.prototype.updateSortedFileList=function(t){var e=this.createElement("div",{id:"clonewrapper"}),i=-1;if(this.listParent){for(var n=0;n<this.listParent.querySelectorAll("li").length;n++){var r=this.listParent.querySelectorAll("li")[n];e.appendChild(r.cloneNode(!0))}for(var o=0,s=this.listParent.querySelectorAll("li");o<s.length;o++){T(s[o])}this.removeActionButtons();var a=[].slice.call(e.childNodes);T(this.listParent),this.listParent=null,this.fileList=[],this.createParentUL();for(var l=0;l<t.length;l++){for(var h=0;h<this.filesData.length;h++)this.filesData[h].name===t[l].name&&(this.listParent.appendChild(a[h]),Ep.add(a[h].querySelector(".e-icons"),"click",this.removeFiles,this),this.fileList.push(a[h]),i=l);i!==l&&this.createFileList([t[l]])}}else this.createFileList(t)},e.prototype.isBlank=function(t){return!t||/^\s*$/.test(t)},e.prototype.checkExtension=function(t){var e=t;if(!this.isBlank(this.allowedExtensions)){for(var i=[],n=0,r=this.allowedExtensions.split(",");n<r.length;n++){var o=r[n];i.push(o.trim().toLocaleLowerCase())}for(var s=0;s<t.length;s++)-1===i.indexOf(("."+t[s].type).toLocaleLowerCase())&&(t[s].status=this.localizedTexts("invalidFileType"),t[s].statusCode="0")}return e},e.prototype.validatedFileSize=function(t){var e="",i="";t<this.minFileSize?e=this.localizedTexts("invalidMinFileSize"):t>this.maxFileSize?i=this.localizedTexts("invalidMaxFileSize"):(e="",i="");return{minSize:e,maxSize:i}},e.prototype.isPreLoadFile=function(t){for(var e=!1,i=0;i<this.files.length;i++)this.files[i].name===t.name.slice(0,t.name.lastIndexOf("."))&&this.files[i].type===t.type&&(e=!0);return e},e.prototype.createCustomfileList=function(t){this.createParentUL();for(var e=0,i=t;e<i.length;e++){var n=i[e],r=this.createElement("li",{className:hE,attrs:{"data-file-name":n.name}});this.uploadTemplateFn=this.templateComplier(this.template);var o=this.uploadTemplateFn(n,this,"template",this.element.id+"Template",this.isStringTemplate,null,r);if(o){E([].slice.call(o),r)}var s=t.indexOf(n),a={element:r,fileInfo:n,index:s,isPreload:this.isPreLoadFile(n)},l={element:r,fileInfo:n,index:s,isPreload:this.isPreLoadFile(n)};this.trigger("rendering",a),this.trigger("fileListRendering",l),this.listParent.appendChild(r),this.fileList.push(r)}this.renderReactTemplates()},e.prototype.createParentUL=function(){h(this.listParent)&&(this.listParent=this.createElement("ul",{className:"e-upload-files"}),this.uploadWrapper.appendChild(this.listParent))},e.prototype.formFileList=function(t,e){var i=this.createElement("li",{className:hE});i.setAttribute("data-files-count",t.length+"");for(var n,r=this.createElement("span",{className:IE}),o=0,s=t;o<s.length;o++){var a=s[o],l=this.createElement("span",{className:"e-file-name"});l.innerHTML=this.getFileNameOnly(a.name);var c=this.createElement("span",{className:"e-file-type"}),d=this.getFileType(a.name);if(c.innerHTML="."+d,d||c.classList.add("e-hidden"),this.enableRtl){var p=this.createElement("span",{className:"e-rtl-container"});p.appendChild(c),p.appendChild(l),r.appendChild(p)}else r.appendChild(l),r.appendChild(c);this.truncateName(l),n=this.formValidateFileInfo(a,i)}i.appendChild(r),this.setListToFileInfo(t,i);var u=this.listParent.querySelectorAll("li").length,g=this.createElement("span");if(i.classList.contains(DE)?(g.classList.add(cE),g.classList.add(DE),g.innerText=t.length>1?this.localizedTexts("invalidFileSelection"):n):(g.classList.add(t.length>1?"e-file-information":"e-file-size"),g.innerText=t.length>1?this.localizedTexts("totalFiles")+": "+t.length+" , "+this.localizedTexts("size")+": "+this.bytesToSize(this.getFileSize(t)):this.bytesToSize(t[0].size),this.createFormInput(t)),r.appendChild(g),h(i.querySelector(".e-icons"))){var m=this.createElement("span",{className:"e-icons",attrs:{tabindex:this.btnTabIndex}});"msie"===this.browserName&&m.classList.add("e-msie"),m.setAttribute("title",this.localizedTexts("remove")),i.appendChild(r),i.appendChild(m),Ep.add(m,"click",this.removeFiles,this),m.classList.add(dE)}var f={element:i,fileInfo:this.mergeFileInfo(t,i),index:u,isPreload:this.isPreLoadFile(this.mergeFileInfo(t,i))},v={element:i,fileInfo:this.mergeFileInfo(t,i),index:u,isPreload:this.isPreLoadFile(this.mergeFileInfo(t,i))};this.trigger("rendering",f),this.trigger("fileListRendering",v),this.listParent.appendChild(i),this.fileList.push(i)},e.prototype.formValidateFileInfo=function(t,e){var i=t.status,n=this.validatedFileSize(t.size);""===n.minSize&&""===n.maxSize||(this.addInvalidClass(e),i=""!==n.minSize?this.localizedTexts("invalidMinFileSize"):""!==n.maxSize?this.localizedTexts("invalidMaxFileSize"):i);var r=this.checkExtension(this.getFilesInArray(t))[0].status;return r===this.localizedTexts("invalidFileType")&&(this.addInvalidClass(e),i=r),i},e.prototype.addInvalidClass=function(t){t.classList.add(DE)},e.prototype.createFormInput=function(t){if("safari"!==this.browserName){var e=this.element.cloneNode(!0);e.classList.add("e-hidden-file-input");for(var i=0,n=t;i<n.length;i++){n[i].input=e}e.setAttribute("id",d("hiddenUploader")),e.setAttribute("name",this.uploaderName),this.uploadWrapper.querySelector(".e-file-select").appendChild(e),"msie"!==this.browserName&&"edge"!==this.browserName&&(this.element.value="")}},e.prototype.getFileSize=function(t){for(var e=0,i=0,n=t;i<n.length;i++){e+=n[i].size}return e},e.prototype.mergeFileInfo=function(t,e){for(var i={name:"",rawFile:"",size:0,status:"",type:"",validationMessages:{minSize:"",maxSize:""},statusCode:"1",list:e},n=[],r="",o=0,s=t;o<s.length;o++){var a=s[o];n.push(a.name),r=a.type}return i.name=n.join(", "),i.size=this.getFileSize(t),i.type=r,i.status=this.statusForFormUpload(t,e),i},e.prototype.statusForFormUpload=function(t,e){for(var i,n=!0,r=0,o=t;r<o.length;r++){var s=o[r];i=s.status;var a=this.validatedFileSize(s.size);""===a.minSize&&""===a.maxSize||(n=!1,i=""!==a.minSize?this.localizedTexts("invalidMinFileSize"):""!==a.maxSize?this.localizedTexts("invalidMaxFileSize"):i);var l=this.checkExtension(this.getFilesInArray(s))[0].status;l===this.localizedTexts("invalidFileType")&&(n=!1,i=l)}return n?i=this.localizedTexts("totalFiles")+": "+t.length+" , "+this.localizedTexts("size")+": "+this.bytesToSize(this.getFileSize(t)):(e.classList.add(DE),i=t.length>1?this.localizedTexts("invalidFileSelection"):i),i},e.prototype.formCustomFileList=function(t,e){this.createParentUL();var i=this.createElement("li",{className:hE});i.setAttribute("data-files-count",t.length+""),this.setListToFileInfo(t,i);var n=this.mergeFileInfo(t,i);i.setAttribute("data-file-name",n.name),this.uploadTemplateFn=this.templateComplier(this.template);var r=this.uploadTemplateFn(n,this,"template",this.element.id+"Template",this.isStringTemplate,null,i);if(r){E([].slice.call(r),i)}var o=this.listParent.querySelectorAll("li").length;i.classList.contains(DE)||this.createFormInput(t);var s={element:i,fileInfo:n,index:o,isPreload:this.isPreLoadFile(n)},a={element:i,fileInfo:n,index:o,isPreload:this.isPreLoadFile(n)};this.trigger("rendering",s),this.trigger("fileListRendering",a),this.listParent.appendChild(i),this.fileList.push(i),this.renderReactTemplates()},e.prototype.createFileList=function(t,e){if(this.createParentUL(),""===this.template||h(this.template))if(this.isFormUpload())this.uploadWrapper.classList.add("e-form-upload"),this.formFileList(t,this.element.files);else for(var i=0,n=t;i<n.length;i++){var r=n[i],o=this.createElement("li",{className:hE,attrs:{"data-file-name":r.name,"data-files-count":"1"}}),s=this.createElement("span",{className:IE}),a=this.createElement("span",{className:"e-file-name",attrs:{title:r.name}});a.innerHTML=this.getFileNameOnly(r.name);var l=this.createElement("span",{className:"e-file-type"}),c=this.getFileType(r.name);if(l.innerHTML="."+c,c||l.classList.add("e-hidden"),this.enableRtl){var d=this.createElement("span",{className:"e-rtl-container"});d.appendChild(l),d.appendChild(a),s.appendChild(d)}else s.appendChild(a),s.appendChild(l);var p=this.createElement("span",{className:"e-file-size"});p.innerHTML=this.bytesToSize(r.size),s.appendChild(p);var u=this.createElement("span",{className:cE});s.appendChild(u),u.innerHTML=r.status,o.appendChild(s);var g=this.createElement("span",{className:" e-icons",attrs:{tabindex:this.btnTabIndex}});"msie"===this.browserName&&g.classList.add("e-msie"),g.setAttribute("title",this.localizedTexts("remove")),o.appendChild(g),Ep.add(g,"click",this.removeFiles,this),"2"===r.statusCode?(u.classList.add(SE),g.classList.add(pE),g.setAttribute("title",this.localizedTexts("delete"))):"1"!==r.statusCode&&(u.classList.remove(SE),u.classList.add("e-validation-fails")),this.autoUpload&&"1"===r.statusCode&&""!==this.asyncSettings.saveUrl&&(u.innerHTML=""),g.classList.contains(pE)||g.classList.add(dE);var m=t.indexOf(r),f={element:o,fileInfo:r,index:m,isPreload:this.isPreLoadFile(r)},v={element:o,fileInfo:r,index:m,isPreload:this.isPreLoadFile(r)};this.trigger("rendering",f),this.trigger("fileListRendering",v),this.listParent.appendChild(o),this.fileList.push(o),this.truncateName(a);var y=this.flag;this.isPreLoadFile(r)&&(this.flag=!1,this.checkActionComplete(!0),this.flag=y)}else this.isFormUpload()?(this.uploadWrapper.classList.add("e-form-upload"),this.formCustomFileList(t,this.element.files)):this.createCustomfileList(t)},e.prototype.getSlicedName=function(t){var e=t.textContent;t.dataset.tail=e.slice(e.length-10)},e.prototype.setListToFileInfo=function(t,e){for(var i=0,n=t;i<n.length;i++){n[i].list=e}},e.prototype.truncateName=function(t){var e=t;"edge"!==this.browserName&&e.offsetWidth<e.scrollWidth?this.getSlicedName(e):e.offsetWidth+1<e.scrollWidth&&this.getSlicedName(e)},e.prototype.getFileType=function(t){var e,i=t.lastIndexOf(".");return i>=0&&(e=t.substring(i+1)),e||""},e.prototype.getFileNameOnly=function(t){var e=this.getFileType(t);return e=t.split("."+e)[0]},e.prototype.setInitialAttributes=function(){if(this.initialAttr.accept&&this.element.setAttribute("accept",this.initialAttr.accept),this.initialAttr.disabled&&this.element.setAttribute("disabled","disabled"),this.initialAttr.multiple){var t=document.createAttribute("multiple");this.element.setAttributeNode(t)}},e.prototype.filterfileList=function(t){for(var e=[],i=0;i<t.length;i++)this.getLiElement(t[i]).classList.contains(SE)||e.push(t[i]);return e},e.prototype.updateStatus=function(t,e,i,n){if(void 0===n&&(n=!0),""===e||h(e)||""===i||h(i)||(t.status=e,t.statusCode=i),n){var r=this.getLiElement(t);h(r)||h(r.querySelector("."+cE))||""===e||h(e)||(r.querySelector("."+cE).textContent=e)}return t},e.prototype.getLiElement=function(t){for(var e,i=0;i<this.filesData.length;i++)h(t)||(h(this.filesData[i].id)||h(t.id)?this.filesData[i].name!==t.name:this.filesData[i].name!==t.name||this.filesData[i].id!==t.id)||(e=i);return this.fileList[e]},e.prototype.createProgressBar=function(t){var e=this.createElement("span",{className:fE}),i=this.createElement("progressbar",{className:vE,attrs:{value:"0",max:"100"}}),n=this.createElement("span",{className:"e-progress-inner-wrap"});i.setAttribute("style","width: 0%");var r=this.createElement("span",{className:yE});r.textContent="0%",n.appendChild(i),e.appendChild(n),e.appendChild(r),t.querySelector("."+IE).appendChild(e)},e.prototype.updateProgressbar=function(t,e){if(!isNaN(Math.round(t.loaded/t.total*100))&&!h(e.querySelector("."+vE)))if(h(this.progressInterval)||""===this.progressInterval)this.changeProgressValue(e,Math.round(t.loaded/t.total*100).toString()+"%");else{var i=Math.round(t.loaded/t.total*100)%parseInt(this.progressInterval,10);0!==i&&100!==i||this.changeProgressValue(e,Math.round(t.loaded/t.total*100).toString()+"%")}},e.prototype.changeProgressValue=function(t,e){t.querySelector("."+vE).setAttribute("style","width:"+e),t.querySelector("."+yE).textContent=e},e.prototype.uploadInProgress=function(t,e,i,n){var r=this.getLiElement(e);if(!h(r)||i){if(h(r))this.cancelUploadingFile(e,t,n);else{"5"===e.statusCode&&this.cancelUploadingFile(e,t,n,r),r.querySelectorAll("."+fE).length>0||!r.querySelector("."+cE)||(r.querySelector("."+cE).classList.add(bE),this.createProgressBar(r),this.updateProgressBarClasses(r,bE),r.querySelector("."+cE).classList.remove(wE)),this.updateProgressbar(t,r);var o=r.querySelector("."+dE);h(o)||(o.classList.add(uE,bE),o.setAttribute("title",this.localizedTexts("abort")),o.classList.remove(dE))}var s={e:t,operation:"upload",file:this.updateStatus(e,this.localizedTexts("inProgress"),"3")};this.trigger("progress",s)}},e.prototype.cancelUploadingFile=function(t,e,i,n){var r=this;if("5"===t.statusCode){var o={event:e,fileData:t,cancel:!1,customFormData:[]};this.trigger("canceling",o,function(e){if(e.cancel){if(t.statusCode="3",!h(n)){var o=n.querySelector("."+uE);h(o)||(qi(o),T(n.querySelector(".e-spinner-pane")))}}else{i.emitError=!1,i.httpRequest.abort();var s=new FormData;if("5"===t.statusCode){var a=r.element.getAttribute("name");s.append(a,t.name),s.append("cancel-uploading",t.name),r.updateFormData(s,e.customFormData);var l=new gp(r.asyncSettings.removeUrl,"POST",!0,null);l.emitError=!1,l.onLoad=function(e){return r.removecanceledFile(e,t),{}},l.send(s)}}})}},e.prototype.removecanceledFile=function(t,e){var i=this.getLiElement(e);if(!(h(i)||i.querySelector("."+gE)||h(i.querySelector("."+uE)))){this.updateStatus(e,this.localizedTexts("fileUploadCancel"),"5"),this.renderFailureState(t,e,i);var n=i.querySelector("."+dE);h(i)||(qi(n),h(i.querySelector(".e-spinner-pane"))||T(i.querySelector(".e-spinner-pane")));var r={event:t,response:t&&t.currentTarget?this.getResponse(t):null,operation:"cancel",file:e};this.trigger("success",r)}},e.prototype.renderFailureState=function(t,e,i){var n=this;this.updateProgressBarClasses(i,wE),this.removeProgressbar(i,"failure"),h(i.querySelector(".e-file-status"))||i.querySelector(".e-file-status").classList.add(wE);var r=i.querySelector("."+uE);if(!h(r)){r.classList.remove(uE,bE),r.classList.add(dE),r.setAttribute("title",this.localizedTexts("remove")),this.pauseButton=this.createElement("span",{className:"e-icons e-file-reload-btn",attrs:{tabindex:this.btnTabIndex}}),r.parentElement.insertBefore(this.pauseButton,r),this.pauseButton.setAttribute("title",this.localizedTexts("retry"));i.querySelector("."+gE).addEventListener("click",function(t){n.reloadcanceledFile(t,e,i,!1)},!1)}},e.prototype.reloadcanceledFile=function(t,e,i,n){e.statusCode="1",e.status=this.localizedTexts("readyToUploadMessage"),n||(h(i.querySelector("."+cE))||i.querySelector("."+cE).classList.remove(wE),h(i.querySelector("."+gE))||T(i.querySelector("."+gE)),this.pauseButton=null),h(i)||i.classList.add(NE),this.upload([e])},e.prototype.uploadComplete=function(t,e,i){var n=t.target;if(4===n.readyState&&n.status>=200&&n.status<=299){var r=this.getLiElement(e);if(h(r)&&(!i||h(i)))return;if(!h(r)){this.updateProgressBarClasses(r,SE),this.removeProgressbar(r,"success");var o=r.querySelector("."+uE);h(o)||(o.classList.add(pE),o.setAttribute("title",this.localizedTexts("delete")),o.classList.remove(uE),o.classList.remove(bE))}this.raiseSuccessEvent(t,e)}else this.uploadFailed(t,e)},e.prototype.getResponse=function(t){var e=t.currentTarget;return{readyState:e.readyState,statusCode:e.status,statusText:e.statusText,headers:e.getAllResponseHeaders(),withCredentials:e.withCredentials}},e.prototype.raiseSuccessEvent=function(t,e){var i=this,n=t&&t.currentTarget?this.getResponse(t):null,r=this.localizedTexts("uploadSuccessMessage"),o={e:t,response:n,operation:"upload",file:this.updateStatus(e,r,"2",!1),statusText:r},s=this.getLiElement(e);if(!h(s)){var a=s.querySelector(".e-spinner-pane");h(a)||(qi(s),T(a))}this.trigger("success",o,function(t){i.updateStatus(e,t.statusText,"2"),i.uploadedFilesData.push(e),i.trigger("change",{file:i.uploadedFilesData}),i.checkActionButtonStatus(),i.fileList.length>0&&(i.getLiElement(e).classList.contains(NE)?i.getLiElement(e).classList.remove(NE):(i.uploadSequential(),i.checkActionComplete(!0)))})},e.prototype.uploadFailed=function(t,e){var i=this,n=this.getLiElement(e),r=t&&t.currentTarget?this.getResponse(t):null,o=this.localizedTexts("uploadFailedMessage"),s={e:t,response:r,operation:"upload",file:this.updateStatus(e,o,"0",!1),statusText:o};h(n)||this.renderFailureState(t,e,n),this.trigger("failure",s,function(t){i.updateStatus(e,t.statusText,"0"),i.checkActionButtonStatus(),i.uploadSequential(),i.checkActionComplete(!0)})},e.prototype.uploadSequential=function(){this.sequentialUpload&&(this.autoUpload?this.checkAutoUpload(this.filesData):this.uploadButtonClick())},e.prototype.checkActionComplete=function(t){t?++this.actionCompleteCount:--this.actionCompleteCount,this.raiseActionComplete()},e.prototype.raiseActionComplete=function(){if(this.filesData.length===this.actionCompleteCount&&this.flag){this.flag=!1;var t={fileData:[]};t.fileData=this.getSelectedFileStatus(this.selectedFiles),this.trigger("actionComplete",t)}},e.prototype.getSelectedFileStatus=function(t){for(var e=[],i=0,n=0;n<t.length;n++)for(var r=t[n],o=0;o<this.filesData.length;o++)this.filesData[o].name===r.name&&this.filesData[o].status===r.status&&(e[i]=this.filesData[o],++i);return e},e.prototype.updateProgressBarClasses=function(t,e){var i=t.querySelector("."+vE);h(i)||i.classList.add(e)},e.prototype.removeProgressbar=function(t,e){var i=this;h(t.querySelector("."+fE))||(this.progressAnimation=new zp({duration:1250}),this.progressAnimation.animate(t.querySelector("."+fE),{name:"FadeOut"}),this.progressAnimation.animate(t.querySelector("."+yE),{name:"FadeOut"}),setTimeout(function(){i.animateProgressBar(t,e)},750))},e.prototype.animateProgressBar=function(t,e){"success"===e?(t.classList.add(SE),h(t.querySelector("."+cE))||(t.querySelector("."+cE).classList.remove(bE),this.progressAnimation.animate(t.querySelector("."+cE),{name:"FadeIn"}),t.querySelector("."+cE).classList.add(SE))):h(t.querySelector("."+cE))||(t.querySelector("."+cE).classList.remove(bE),this.progressAnimation.animate(t.querySelector("."+cE),{name:"FadeIn"}),t.querySelector("."+cE).classList.add(wE)),t.querySelector("."+fE)&&T(t.querySelector("."+fE))},e.prototype.setExtensions=function(t){""===t||h(t)?this.element.removeAttribute("accept"):this.element.setAttribute("accept",t)},e.prototype.templateComplier=function(t){if(t)try{return z(t,document).length?gt(A(t,document).innerHTML.trim()):gt(t)}catch(e){return gt(t)}},e.prototype.setRTL=function(){this.enableRtl?I([this.uploadWrapper],"e-rtl"):x([this.uploadWrapper],"e-rtl")},e.prototype.localizedTexts=function(t){return this.l10n.setLocale(this.locale),this.l10n.getConstant(t)},e.prototype.setControlStatus=function(){this.enabled?(this.uploadWrapper.classList.contains("e-disabled")&&this.uploadWrapper.classList.remove("e-disabled"),!h(this.browseButton)&&this.element.hasAttribute("disabled")&&(this.element.removeAttribute("disabled"),this.browseButton.removeAttribute("disabled")),!h(this.clearButton)&&this.clearButton.hasAttribute("disabled")&&this.clearButton.removeAttribute("disabled"),!h(this.uploadButton)&&this.uploadButton.hasAttribute("disabled")&&this.uploadButton.hasAttribute("disabled")):(this.uploadWrapper.classList.add("e-disabled"),this.element.setAttribute("disabled","disabled"),this.browseButton.setAttribute("disabled","disabled"),h(this.clearButton)||this.clearButton.setAttribute("disabled","disabled"),h(this.uploadButton)||this.uploadButton.setAttribute("disabled","disabled"))},e.prototype.checkHTMLAttributes=function(t){for(var e=0,i=t?h(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["accept","multiple","disabled"];e<i.length;e++){var n=i[e];if(!h(this.element.getAttribute(n)))switch(n){case"accept":(h(this.uploaderOptions)||void 0===this.uploaderOptions.allowedExtensions||t)&&(this.setProperties({allowedExtensions:this.element.getAttribute("accept")},!t),this.initialAttr.accept=this.allowedExtensions);break;case"multiple":if(h(this.uploaderOptions)||void 0===this.uploaderOptions.multiple||t){var r="multiple"===this.element.getAttribute(n)||""===this.element.getAttribute(n)||"true"===this.element.getAttribute(n);this.setProperties({multiple:r},!t),this.initialAttr.multiple=!0}break;case"disabled":if(h(this.uploaderOptions)||void 0===this.uploaderOptions.enabled||t){var o="disabled"!==this.element.getAttribute(n)&&""!==this.element.getAttribute(n)&&"true"!==this.element.getAttribute(n);this.setProperties({enabled:o},!t),this.initialAttr.disabled=!0}}}},e.prototype.chunkUpload=function(t,e,i){var n=Math.min(this.asyncSettings.chunkSize,t.size),r={chunkIndex:0,blob:t.rawFile.slice(0,n),file:t,start:0,end:n,retryCount:0,request:null};this.sendRequest(t,r,e,i)},e.prototype.sendRequest=function(t,e,i,n){var r=this,o=new FormData,s=t.rawFile.slice(e.start,e.end);o.append(this.uploaderName,s,t.name),o.append("chunk-index",e.chunkIndex.toString()),o.append("chunkIndex",e.chunkIndex.toString());var a=Math.max(Math.ceil(t.size/this.asyncSettings.chunkSize),1);o.append("total-chunk",a.toString()),o.append("totalChunk",a.toString());var l=new gp({url:this.asyncSettings.saveUrl,type:"POST",async:!0,contentType:null});l.emitError=!1,l.onLoad=function(t){return r.chunkUploadComplete(t,e,i),{}},l.onUploadProgress=function(t){return r.chunkUploadInProgress(t,e,i),{}};var h={fileData:t,customFormData:[],cancel:!1,chunkSize:0===this.asyncSettings.chunkSize?null:this.asyncSettings.chunkSize};l.beforeSend=function(i){h.currentRequest=l.httpRequest,h.currentChunkIndex=e.chunkIndex,0===h.currentChunkIndex?r.trigger("uploading",h,function(e){r.uploadingEventCallback(o,e,i,t)}):r.trigger("chunkUploading",h,function(e){r.uploadingEventCallback(o,e,i,t)})},l.onError=function(t){return r.chunkUploadFailed(t,e,i),{}},l.send(o),e.request=l},e.prototype.uploadingEventCallback=function(t,e,i,n){e.cancel?this.eventCancelByArgs(i,e,n):this.updateFormData(t,e.customFormData)},e.prototype.eventCancelByArgs=function(t,e,i){var n=this;if(t.cancel=!0,"5"!==e.fileData.statusCode){e.fileData.statusCode="5",e.fileData.status=this.localizedTexts("fileUploadCancel");var r=this.getLiElement(e.fileData);if(r){h(r.querySelector("."+cE))||(r.querySelector("."+cE).innerHTML=this.localizedTexts("fileUploadCancel"),r.querySelector("."+cE).classList.add(wE)),this.pauseButton=this.createElement("span",{className:"e-icons e-file-reload-btn",attrs:{tabindex:this.btnTabIndex}});var o=r.querySelector("."+dE);o&&o.parentElement.insertBefore(this.pauseButton,o),this.pauseButton.setAttribute("title",this.localizedTexts("retry")),this.pauseButton.addEventListener("click",function(t){n.reloadcanceledFile(t,i,r)},!1),this.checkActionButtonStatus()}}},e.prototype.checkChunkUpload=function(){return!(this.asyncSettings.chunkSize<=0||h(this.asyncSettings.chunkSize))},e.prototype.chunkUploadComplete=function(t,e,i){var n,r=this,o=t.target;if(4===o.readyState&&o.status>=200&&o.status<300){var s=t&&t.currentTarget?this.getResponse(t):null,a=Math.max(Math.ceil(e.file.size/this.asyncSettings.chunkSize),1),l={event:t,file:e.file,chunkIndex:e.chunkIndex,totalChunk:a,chunkSize:this.asyncSettings.chunkSize,response:s};if(this.trigger("chunkSuccess",l),!h(i)&&i||(n=this.getLiElement(e.file)),this.updateMetaData(e),e.end===e.file.size&&(e.file.statusCode="3"),"5"===e.file.statusCode){var c={event:t,fileData:e.file,cancel:!1,customFormData:[]};this.trigger("canceling",c,function(t){if(t.cancel){e.file.statusCode="3";var s=n.querySelector("."+uE);h(n)||h(s)||(qi(s),T(n.querySelector(".e-spinner-pane"))),r.sendNextRequest(e)}else{e.request.emitError=!1,o.abort();var a=new FormData,l=r.element.getAttribute("name");a.append(l,e.file.name),a.append("cancel-uploading",e.file.name),a.append("cancelUploading",e.file.name),r.updateFormData(a,t.customFormData);var c=new gp(r.asyncSettings.removeUrl,"POST",!0,null);c.emitError=!1,c.onLoad=function(t){return r.removeChunkFile(t,e,i),{}},c.send(a)}})}else{if(a-1===e.chunkIndex&&a>e.chunkIndex){var d=this.pausedData.indexOf(e);return d>=0&&this.pausedData.splice(d,1),h(this.template)&&(h(i)||!i)&&n&&(n&&!h(n.querySelector("."+ME))&&T(n.querySelector("."+ME)),this.removeChunkProgressBar(e)),void this.raiseSuccessEvent(t,e.file)}"4"!==e.file.statusCode&&this.sendNextRequest(e)}}else this.chunkUploadFailed(t,e)},e.prototype.sendNextRequest=function(t){t.start=t.end,t.end+=this.asyncSettings.chunkSize,t.end=Math.min(t.end,t.file.size),t.chunkIndex+=1,this.sendRequest(t.file,t)},e.prototype.removeChunkFile=function(t,e,i){if(h(this.template)&&h(i)&&!i){var n=this.getLiElement(e.file),r=n.querySelector("."+uE),o=r;this.updateStatus(e.file,this.localizedTexts("fileUploadCancel"),"5"),this.updateProgressBarClasses(n,wE),this.removeProgressbar(n,"failure"),r&&r.classList.remove(uE),r&&r.classList.add(dE),r&&r.setAttribute("title",this.localizedTexts("remove"));var s=n.querySelector("."+ME);s&&s.classList.add(gE),s&&s.classList.remove(ME),s&&s.setAttribute("title",this.localizedTexts("retry")),h(n)||h(r)||h(n.querySelector(".e-spinner-pane"))||(qi(o),T(n.querySelector(".e-spinner-pane")))}},e.prototype.pauseUpload=function(t,e,i){t.file.statusCode="4",t.file.status=this.localizedTexts("pause"),this.updateMetaData(t);var n={event:e||null,file:t.file,chunkIndex:t.chunkIndex,chunkCount:Math.round(t.file.size/this.asyncSettings.chunkSize),chunkSize:this.asyncSettings.chunkSize};this.abortUpload(t,i,n)},e.prototype.abortUpload=function(t,e,i){"4"!==t.file.statusCode&&(t.request.emitError=!1,t.request.httpRequest.abort());var n=this.getLiElement(t.file);if(h(this.template)&&(h(e)||!e)){var r=n.querySelector("."+ME);r.classList.remove(ME),r.classList.add(CE),r.setAttribute("title",this.localizedTexts("resume")),r.nextElementSibling.classList.add(dE),r.nextElementSibling.classList.remove(uE),r.nextElementSibling.setAttribute("title",this.localizedTexts("remove"))}for(var o=0;o<this.pausedData.length;o++)this.pausedData[o].file.name===t.file.name&&this.pausedData.splice(o,1);this.pausedData.push(t),this.trigger("pausing",i)},e.prototype.resumeUpload=function(t,e,i){var n,r=this.getLiElement(t.file);h(r)||(n=r.querySelector("."+CE)),h(n)||!h(i)&&i||(n.classList.remove(CE),n.classList.add(ME),n.setAttribute("title",this.localizedTexts("pause")),n.nextElementSibling.classList.remove(dE),n.nextElementSibling.classList.add(uE),n.nextElementSibling.setAttribute("title",this.localizedTexts("abort"))),t.file.status=this.localizedTexts("inProgress"),t.file.statusCode="3",this.updateMetaData(t);var o={event:e||null,file:t.file,chunkIndex:t.chunkIndex,chunkCount:Math.round(t.file.size/this.asyncSettings.chunkSize),chunkSize:this.asyncSettings.chunkSize};this.trigger("resuming",o);for(var s=0;s<this.pausedData.length;s++)this.pausedData[s].end===this.pausedData[s].file.size?this.chunkUploadComplete(e,t,i):this.pausedData[s].file.name===t.file.name&&(this.pausedData[s].start=this.pausedData[s].end,this.pausedData[s].end=this.pausedData[s].end+this.asyncSettings.chunkSize,this.pausedData[s].end=Math.min(this.pausedData[s].end,this.pausedData[s].file.size),this.pausedData[s].chunkIndex=this.pausedData[s].chunkIndex+1,this.sendRequest(this.pausedData[s].file,this.pausedData[s],i))},e.prototype.updateMetaData=function(t){-1===this.uploadMetaData.indexOf(t)?this.uploadMetaData.push(t):(this.uploadMetaData.splice(this.uploadMetaData.indexOf(t),1),this.uploadMetaData.push(t))},e.prototype.removeChunkProgressBar=function(t){var e=this.getLiElement(t.file);if(!h(e)){this.updateProgressBarClasses(e,SE),this.removeProgressbar(e,"success");var i=e.querySelector("."+uE);h(i)||(i.classList.add(pE),i.setAttribute("title",this.localizedTexts("delete")),i.classList.remove(uE,bE))}},e.prototype.chunkUploadFailed=function(t,e,i){var n,r=this,o=Math.max(Math.ceil(e.file.size/this.asyncSettings.chunkSize),1);!h(this.template)||!h(i)&&i||(n=this.getLiElement(e.file));var s=t&&t.currentTarget?this.getResponse(t):null,a={event:t,file:e.file,chunkIndex:e.chunkIndex,totalChunk:o,chunkSize:this.asyncSettings.chunkSize,cancel:!1,response:s};this.trigger("chunkFailure",a,function(o){if(!o.cancel)if(e.retryCount<r.asyncSettings.retryCount)setTimeout(function(){r.retryRequest(n,e,i)},r.asyncSettings.retryAfterDelay);else{if(!h(n)){var a=n.querySelector("."+ME)?n.querySelector("."+ME):n.querySelector("."+CE);h(a)||(a.classList.add(gE),a.classList.remove(ME,CE)),r.updateProgressBarClasses(n,wE),r.removeProgressbar(n,"failure"),n.querySelector(".e-icons").classList.remove(bE);var l=n.querySelector("."+uE)?n.querySelector("."+uE):n.querySelector("."+dE);l.classList.remove(uE),h(n.querySelector("."+ME))||T(n.querySelector("."+ME)),e.start>0?(l.classList.add(pE),l.setAttribute("title",r.localizedTexts("delete"))):(l.classList.add(dE),l.setAttribute("title",r.localizedTexts("remove")))}e.retryCount=0;var c=e.file,d=r.localizedTexts("uploadFailedMessage"),p={e:t,response:s,operation:"upload",file:r.updateStatus(c,d,"0",!1),statusText:d};r.trigger("failure",p,function(t){r.updateStatus(c,t.statusText,"0"),r.uploadSequential(),r.checkActionComplete(!0)})}})},e.prototype.retryRequest=function(t,e,i){h(this.template)&&(h(i)||!i)&&t&&this.updateProgressBarClasses(t,wE),e.retryCount+=1,this.sendRequest(e.file,e)},e.prototype.checkPausePlayAction=function(t){var e=t.target,i=t.target.parentElement,n=this.fileList.indexOf(i),r=this.filesData[n],o=this.getCurrentMetaData(r);e.classList.contains(ME)?this.pauseUpload(o,t):e.classList.contains(CE)?this.resumeUpload(o,t):e.classList.contains(gE)&&(o.file.status===this.localizedTexts("fileUploadCancel")?this.retryUpload(o,!1):this.retryUpload(o,!0))},e.prototype.retryUpload=function(t,e){e?(t.end=t.end+this.asyncSettings.chunkSize,t.start=t.start+this.asyncSettings.chunkSize,this.sendRequest(t.file,t)):(t.file.statusCode="1",t.file.status=this.localizedTexts("readyToUploadMessage"),this.chunkUpload(t.file)),this.getLiElement(t.file).classList.add(NE)},e.prototype.chunkUploadInProgress=function(t,e,i){var n=this;if("4"!==e.file.statusCode){"4"!==e.file.statusCode&&"5"!==e.file.statusCode&&(e.file.statusCode="3",e.file.status=this.localizedTexts("inProgress")),this.updateMetaData(e);var r=this.getLiElement(e.file);if(!h(r)){var o=r.querySelector("."+gE);if(h(o)||(o.classList.add(ME),o.setAttribute("title",this.localizedTexts("pause")),o.classList.remove(gE)),!h(r)){if(!(r.querySelectorAll("."+fE).length>0)){var s=r.querySelector("."+cE);h(this.template)&&(s.classList.add(bE),s.classList.remove(wE),this.createProgressBar(r),this.updateProgressBarClasses(r,bE));var a=r.querySelector("."+dE)?r.querySelector("."+dE):r.querySelector("."+pE);h(a)||(a.classList.add(uE),a.setAttribute("title",this.localizedTexts("abort")),a.classList.remove(dE))}if(!isNaN(Math.round(t.loaded/t.total*100))&&h(this.template)&&"4"!==e.file.statusCode){var l=void 0,c=Math.ceil(e.file.size/this.asyncSettings.chunkSize)-1;this.asyncSettings.chunkSize&&c&&(l=Math.round(e.chunkIndex/c*100),this.changeProgressValue(r,l.toString()+"%"))}0===e.chunkIndex&&this.checkActionButtonStatus()}if(h(r.querySelector("."+ME))&&h(this.template)&&h(r.querySelector("."+pE))){this.pauseButton=this.createElement("span",{className:"e-icons e-file-pause-btn",attrs:{tabindex:this.btnTabIndex}}),"msie"===this.browserName&&this.pauseButton.classList.add("e-msie");var d=r.querySelector("."+uE);d.parentElement.insertBefore(this.pauseButton,d),this.pauseButton.setAttribute("title",this.localizedTexts("pause")),this.pauseButton.addEventListener("click",function(t){n.checkPausePlayAction(t)},!1)}}}},e.prototype.bytesToSize=function(t){var e=-1;if(!t)return"0.0 KB";do{t/=1024,e++}while(t>99);return e>=2&&(t*=1024,e=1),Math.max(t,0).toFixed(1)+" "+["KB","MB"][e]},e.prototype.sortFileList=function(t){for(var e=t=t||this.sortFilesList,i=[],n=0;n<e.length;n++)i.push(e[n].name);for(var r=[],o=0,s=i.sort();o<s.length;o++){var a=s[o];for(n=0;n<e.length;n++)a===e[n].name&&r.push(e[n])}return r},e.prototype.destroy=function(){this.element.value=null,this.clearTemplate(),this.clearAll(),this.unWireEvents(),this.unBindDropEvents(),this.multiple&&this.element.removeAttribute("multiple"),this.enabled||this.element.removeAttribute("disabled"),this.element.removeAttribute("accept"),this.setInitialAttributes();for(var e=0,i=["aria-label","directory","webkitdirectory","tabindex"];e<i.length;e++){var n=i[e];this.element.removeAttribute(n)}h(this.uploadWrapper)||(this.uploadWrapper.parentElement.appendChild(this.element),T(this.uploadWrapper)),this.uploadWrapper=null,this.uploadWrapper=null,this.browseButton=null,this.dropAreaWrapper=null,this.dropZoneElement=null,this.dropArea=null,this.keyboardModule=null,this.clearButton=null,this.uploadButton=null,t.prototype.destroy.call(this)},e.prototype.upload=function(t,e){var i=this;if(t=t||this.filesData,this.sequentialUpload&&(this.isFirstFileOnSelection||e))this.sequenceUpload(t);else{var n=this.getFilesInArray(t);this.trigger("beforeUpload",{customFormData:[],currentRequest:null,cancel:!1},function(t){t.cancel||i.uploadFiles(n,e)})}},e.prototype.getFilesInArray=function(t){var e=[];return t instanceof Array?e=t:e.push(t),e},e.prototype.serverReadFileBase64=function(t,e,i){var n=this;return new Promise(function(r,o){var s=n.fileStreams[t].rawFile;try{var a=new FileReader;a.onload=function(t){return function(){try{var e=t.result,i=e?e.split(";base64,")[1]:null;r(i)}catch(t){o(t)}}}(a),a.readAsDataURL(s.slice(e,e+i))}catch(t){o(t)}})},e.prototype.uploadFileCount=function(t){var e=this.filesData;if(!e||0===e.length)return-1;return e.length},e.prototype.getFileRead=function(t,e){var i=this.filesData;if(!i||0===i.length)return-1;var n=i[t],r=this.newFileRef++;return this.fileStreams[r]=n,r},e.prototype.getFileInfo=function(t,e){var i=this.filesData;if(!i||0===i.length)return null;return i[t]?this.filesData[t]:null},e.prototype.uploadFiles=function(t,e){var i=[];if(""!==this.asyncSettings.saveUrl&&!h(this.asyncSettings.saveUrl)){if(!e||h(e))if(this.multiple)i=this.filterfileList(t);else{var n=[];n.push(t[0]),i=this.filterfileList(n)}else i=t;for(var r=0;r<i.length;r++)this.uploadFilesRequest(i,r,e)}},e.prototype.uploadFilesRequest=function(t,e,i){var n=this,r=this.checkChunkUpload(),o=new gp(this.asyncSettings.saveUrl,"POST",!0,null);o.emitError=!1;var s={fileData:t[e],customFormData:[],cancel:!1},a=new FormData;if(o.beforeSend=function(i){s.currentRequest=o.httpRequest,n.trigger("uploading",s,function(r){r.cancel&&n.eventCancelByArgs(i,r,t[e]),n.updateFormData(a,r.customFormData)})},"1"===t[e].statusCode){var l=this.element.getAttribute("name");a.append(l,t[e].rawFile,t[e].name),r&&t[e].size>this.asyncSettings.chunkSize?this.chunkUpload(t[e],i,e):(o.onLoad=function(r){return s.cancel?{}:(n.uploadComplete(r,t[e],i),{})},o.onUploadProgress=function(r){return s.cancel?{}:(n.uploadInProgress(r,t[e],i,o),{})},o.onError=function(i){return n.uploadFailed(i,t[e]),{}},o.send(a))}},e.prototype.spliceFiles=function(t){for(var e=this.fileList[t],i=this.getFilesData(),n=+e.getAttribute("data-files-count"),r=0,o=0;o<t;o++)r+=+this.fileList[o].getAttribute("data-files-count");for(var s=r+n-1;s>=r;s--)i.splice(s,1)},e.prototype.remove=function(t,e,i,n,r){var o=this;h(n)&&(n=!0);var s={event:r,cancel:!1,filesData:[],customFormData:[],postRawFile:n,currentRequest:null};this.trigger("beforeRemove",{cancel:!1,customFormData:[],currentRequest:null},function(n){if(!n.cancel)if(o.isFormUpload())s.filesData=t,o.trigger("removing",s,function(e){if(!e.cancel)for(var i=!1,n=void 0,r=0,s=o.getFilesInArray(t);r<s.length;r++){var a=s[r];if(i||(n=o.fileList.indexOf(a.list)),n>-1){var l=h(a.input)?null:a.input;l&&T(l),o.spliceFiles(n),T(o.fileList[n]),o.fileList.splice(n,1),i=!0,n=-1}}});else if(o.isForm&&(h(o.asyncSettings.removeUrl)||""===o.asyncSettings.removeUrl))s.filesData=o.getFilesData(),o.trigger("removing",s,function(t){t.cancel||o.clearAll()});else{var a=[];(t=h(t)?o.filesData:t)instanceof Array?a=t:a.push(t),s.filesData=a;for(var l=o.asyncSettings.removeUrl,c=""!==l&&!h(l),d=function(t){var n=o.uploadedFilesData.indexOf(t);("2"===t.statusCode||"4"===t.statusCode||"0"===t.statusCode&&-1!==n)&&c?o.removeUploadedFile(t,s,i,e):i?o.removeFilesData(t,e):o.trigger("removing",s,function(i){i.cancel||o.removeFilesData(t,e)}),r&&!r.target.classList.contains(dE)&&o.checkActionComplete(!1)},p=0,u=a;p<u.length;p++){d(u[p])}}})},e.prototype.clearAll=function(){var t=this;if(h(this.listParent))return"msie"!==this.browserName&&(this.element.value=""),void(this.filesData=[]);var e={cancel:!1,filesData:this.filesData};this.trigger("clearing",e,function(e){e.cancel||(t.clearData(),t.actionCompleteCount=0,t.count=-1)})},e.prototype.getFilesData=function(t){return h(t)?this.filesData:this.getSelectedFiles(t)},e.prototype.pause=function(t,e){t=t||this.filesData;var i=this.getFilesInArray(t);this.pauseUploading(i,e)},e.prototype.pauseUploading=function(t,e){for(var i=this.getFiles(t),n=0;n<i.length;n++)"3"===i[n].statusCode&&this.pauseUpload(this.getCurrentMetaData(i[n],null),null,e)},e.prototype.getFiles=function(t){var e=[];return h(t)||t instanceof Array?e=t:e.push(t),e},e.prototype.resume=function(t,e){t=t||this.filesData;var i=this.getFilesInArray(t);this.resumeFiles(i,e)},e.prototype.resumeFiles=function(t,e){for(var i=this.getFiles(t),n=0;n<i.length;n++)"4"===i[n].statusCode&&this.resumeUpload(this.getCurrentMetaData(i[n],null),null,e)},e.prototype.retry=function(t,e,i){t=t||this.filesData;var n=this.getFilesInArray(t);this.sequentialUpload&&this.isFirstFileOnSelection&&(this.isFirstFileOnSelection=!1),this.retryFailedFiles(n,e,i)},e.prototype.retryFailedFiles=function(t,e,i){for(var n=this.getFiles(t),r=0;r<n.length;r++)if("5"===n[r].statusCode||"0"===n[r].statusCode)if(this.asyncSettings.chunkSize>0&&this.getCurrentMetaData(n[r],null))this.retryUpload(this.getCurrentMetaData(n[r],null),e);else{var o=void 0;i||(o=this.fileList[this.filesData.indexOf(n[r])]),this.reloadcanceledFile(null,n[r],o,i)}},e.prototype.cancel=function(t){t=t||this.filesData;var e=this.getFilesInArray(t);this.cancelUpload(e)},e.prototype.cancelUpload=function(t){var e=this.getFiles(t);if(this.asyncSettings.chunkSize>0){for(var i=0;i<e.length;i++)if("3"===e[i].statusCode){var n=this.getCurrentMetaData(e[i],null);n.file.statusCode="5",n.file.status=this.localizedTexts("fileUploadCancel"),this.updateMetaData(n),this.showHideUploadSpinner(e[i])}}else for(i=0;i<e.length;i++)"3"===e[i].statusCode&&(e[i].statusCode="5",e[i].status=this.localizedTexts("fileUploadCancel"),this.showHideUploadSpinner(e[i]))},e.prototype.showHideUploadSpinner=function(t){var e=this.getLiElement(t);if(!h(e)&&h(this.template)){var i=e.querySelector("."+uE);ki({target:i,width:"20px"}),Qi(i)}},lE([Q({saveUrl:"",removeUrl:""},LE)],e.prototype,"asyncSettings",void 0),lE([W(!1)],e.prototype,"sequentialUpload",void 0),lE([W({})],e.prototype,"htmlAttributes",void 0),lE([W("")],e.prototype,"cssClass",void 0),lE([W(!0)],e.prototype,"enabled",void 0),lE([W(null)],e.prototype,"template",void 0),lE([W(!0)],e.prototype,"multiple",void 0),lE([W(!0)],e.prototype,"autoUpload",void 0),lE([W(!0)],e.prototype,"enableHtmlSanitizer",void 0),lE([Q({},OE)],e.prototype,"buttons",void 0),lE([W("")],e.prototype,"allowedExtensions",void 0),lE([W(0)],e.prototype,"minFileSize",void 0),lE([W(3e7)],e.prototype,"maxFileSize",void 0),lE([W(null)],e.prototype,"dropArea",void 0),lE([q([{}],TE)],e.prototype,"files",void 0),lE([W(!0)],e.prototype,"showFileList",void 0),lE([W(!1)],e.prototype,"directoryUpload",void 0),lE([W("Default")],e.prototype,"dropEffect",void 0),lE([Z()],e.prototype,"created",void 0),lE([Z()],e.prototype,"actionComplete",void 0),lE([Z()],e.prototype,"rendering",void 0),lE([Z()],e.prototype,"beforeUpload",void 0),lE([Z()],e.prototype,"fileListRendering",void 0),lE([Z()],e.prototype,"selected",void 0),lE([Z()],e.prototype,"uploading",void 0),lE([Z()],e.prototype,"success",void 0),lE([Z()],e.prototype,"failure",void 0),lE([Z()],e.prototype,"removing",void 0),lE([Z()],e.prototype,"beforeRemove",void 0),lE([Z()],e.prototype,"clearing",void 0),lE([Z()],e.prototype,"progress",void 0),lE([Z()],e.prototype,"change",void 0),lE([Z()],e.prototype,"chunkSuccess",void 0),lE([Z()],e.prototype,"chunkFailure",void 0),lE([Z()],e.prototype,"chunkUploading",void 0),lE([Z()],e.prototype,"canceling",void 0),lE([Z()],e.prototype,"pausing",void 0),lE([Z()],e.prototype,"resuming",void 0),e=lE([$],e)}(Kp),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),zE=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},kE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return AE(e,t),zE([W("")],e.prototype,"iconCss",void 0),zE([W("")],e.prototype,"id",void 0),zE([W(!1)],e.prototype,"separator",void 0),zE([W("")],e.prototype,"text",void 0),zE([W("")],e.prototype,"url",void 0),zE([W(!1)],e.prototype,"disabled",void 0),e}(Rp),jE=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),PE=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},RE="e-menu-icon",BE="e-item",HE="e-dropdown-popup",UE="e-separator",VE="e-vertical",_E=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.isPopupCreated=!0,n}return jE(e,t),e.prototype.preRender=function(){},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.toggle=function(){this.canOpen()?this.openPopUp():this.closePopup()},e.prototype.render=function(){this.initialize(),this.disabled||this.wireEvents(),this.renderComplete()},e.prototype.addItems=function(t,e){for(var i,n=this.items.length,r=0,o=this.items.length;r<o;r++)if(e===this.items[r].text){n=r;break}for(var s=t.length-1;s>=0;s--)i=new kE(this,"items",t[s],!0),this.items.splice(n,0,i);this.canOpen()||this.createItems()},e.prototype.removeItems=function(t,e){for(var i=!1,n=0,r=t.length;n<r;n++)for(var o=0,s=this.items.length;o<s;o++)if(t[n]===(e?this.items[o].id:this.items[o].text)){this.items.splice(o,1),i=!0;break}i&&this.getULElement()&&this.createItems()},e.prototype.createPopup=function(){var t,e=this.createElement("div",{className:HE,id:this.element.id+"-popup"});document.body.appendChild(e),this.dropDown=new Am(e,{relateTo:this.element,collision:{X:"fit",Y:"flip"},position:{X:"left",Y:"bottom"},targetType:"relative",content:this.target?this.getTargetElement():"",enableRtl:this.enableRtl}),"fixed"===this.dropDown.element.style.position&&this.dropDown.refreshPosition(this.element),this.dropDown.hide(),L(this.element,(t={},t["aria-haspopup"]=this.items.length||this.target?"true":"false",t["aria-expanded"]="false",t.type="button",t["aria-label"]=this.element.textContent?this.element.textContent:"dropdownbutton",t)),this.cssClass&&I([e],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.isPopupCreated=!0},e.prototype.getTargetElement=function(){return"string"==typeof this.target?A(this.target):this.target},e.prototype.createItems=function(t){var e,i,n,r,o=this.items,s=this.hasIcon(this.items,"iconCss"),a=this.getULElement();a?a.innerHTML="":a=this.createElement("ul",{attrs:{role:"menu",tabindex:"0"}});for(var l=0;l<o.length;l++){var c=(i=o[l]).text;n=this.createElement("li",{innerHTML:i.url?"":c,className:i.separator?BE+" "+UE:BE,attrs:i.separator?{role:"separator",tabindex:"-1"}:{role:"menuitem",tabindex:"-1","aria-label":c},id:i.id?i.id:d("e-"+this.getModuleName()+"-item")}),this.enableHtmlSanitizer?n.textContent=i.url?"":c:n.innerHTML=i.url?"":c,i.url&&(n.appendChild(this.createAnchor(i)),n.classList.add("e-url")),i.iconCss?(e=this.createElement("span",{className:RE+" "+i.iconCss}),i.url?n.childNodes[0].appendChild(e):n.insertBefore(e,n.childNodes[0])):s&&!i.separator&&n.classList.add("e-blank-icon"),i.disabled&&n.classList.add("e-disabled"),r={item:i,element:n},this.trigger("beforeItemRender",r),a.appendChild(n)}t&&this.getPopUpElement().appendChild(a),s&&function(t,e){var i=[].slice.call(t.getElementsByClassName("e-blank-icon"));e&&[].slice.call(t.getElementsByClassName("e-item")).forEach(function(t){(t.style.paddingLeft||t.style.paddingRight)&&t.removeAttribute("style")});if(i.length){var n=t.querySelector(".e-item:not(.e-blank-icon):not(.e-separator)");if(!h(n)){n.classList.contains("e-url")&&(n=n.querySelector(".e-menu-url"));var r,o=n.querySelector(".e-menu-icon"),s=t.classList.contains("e-rtl");r=s?{padding:"paddingRight",margin:"marginLeft"}:{padding:"paddingLeft",margin:"marginRight"};var a=parseInt(getComputedStyle(o).fontSize,10)+parseInt(getComputedStyle(o)[r.margin],10)+parseInt(getComputedStyle(n).paddingLeft,10)+"px";i.forEach(function(t){t.classList.contains("e-url")?t.querySelector(".e-menu-url").style[r.padding]=a:t.style[r.padding]=a})}}}(this.getPopUpElement())},e.prototype.hasIcon=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i][""+e])return!0;return!1},e.prototype.createAnchor=function(t){var e=this.enableHtmlSanitizer?Yu.sanitize(t.text):t.text;return this.createElement("a",{className:"e-menu-text e-menu-url",innerHTML:e,attrs:{href:t.url}})},e.prototype.initialize=function(){this.button=new Um({iconCss:this.iconCss,iconPosition:this.iconPosition,cssClass:this.cssClass,content:this.content,disabled:this.disabled,enableRtl:this.enableRtl,enablePersistence:this.enablePersistence}),this.button.createElement=this.createElement,this.button.appendTo(this.element),this.element.id||(this.element.id=d("e-"+this.getModuleName())),this.appendArrowSpan(),this.setActiveElem([this.element]),this.target&&!this.isColorPicker()||!this.createPopupOnClick?this.createPopup():this.isPopupCreated=!1},e.prototype.isColorPicker=function(){if(!this.element)return!1;var t=this.element.previousSibling;return!!(t&&t.classList&&t.classList.contains("e-split-colorpicker"))},e.prototype.appendArrowSpan=function(){this.element.appendChild(this.createElement("span",{className:"e-btn-icon e-icons e-icon-"+(this.cssClass.indexOf(VE)>-1?"bottom":"right")+" e-caret"}))},e.prototype.setActiveElem=function(t){this.activeElem=t},e.prototype.getModuleName=function(){return"dropdown-btn"},e.prototype.canOpen=function(){var t=!1;return this.isPopupCreated&&(t=this.getPopUpElement().classList.contains("e-popup-close")),t},e.prototype.destroy=function(){var e=this;if(t.prototype.destroy.call(this),"dropdown-btn"===this.getModuleName()){var i;this.element.querySelector("span.e-caret")&&T(this.element.querySelector("span.e-caret")),this.cssClass&&(i=this.cssClass.split(" ")),this.button.destroy(),i&&x([this.element],i),x(this.activeElem,["e-active"]);(this.element.getAttribute("class")?["aria-haspopup","aria-expanded","aria-owns","type"]:["aria-haspopup","aria-expanded","aria-owns","type","class"]).forEach(function(t){e.element.removeAttribute(t)}),this.popupUnWireEvents(),this.destroyPopup(),this.isPopupCreated=!1,this.disabled||this.unWireEvents()}},e.prototype.destroyPopup=function(){if(this.isPopupCreated){if(this.dropDown.destroy(),this.getPopUpElement()){var t=document.getElementById(this.getPopUpElement().id);t&&(x([t],["e-popup-open","e-popup-close"]),T(t))}Ep.remove(this.getPopUpElement(),"click",this.clickHandler),Ep.remove(this.getPopUpElement(),"keydown",this.keyBoardHandler),this.isPopupCreated&&(this.dropDown=void 0)}this.isPopupCreated=!1},e.prototype.getPopUpElement=function(){var t=null;return this.dropDown&&(t=this.dropDown.element),t},e.prototype.getULElement=function(){var t=null;return this.getPopUpElement()&&(t=this.getPopUpElement().children[0]),t},e.prototype.wireEvents=function(){this.delegateMousedownHandler=this.mousedownHandler.bind(this),this.createPopupOnClick||Ep.add(document,"mousedown touchstart",this.delegateMousedownHandler,this),Ep.add(this.element,"click",this.clickHandler,this),Ep.add(this.element,"keydown",this.keyBoardHandler,this)},e.prototype.popupWireEvents=function(){var t=this.getPopUpElement();this.createPopupOnClick&&Ep.add(document,"mousedown touchstart",this.delegateMousedownHandler,this),t&&(Ep.add(t,"click",this.clickHandler,this),Ep.add(t,"keydown",this.keyBoardHandler,this),this.closeActionEvents&&Ep.add(t,this.closeActionEvents,this.focusoutHandler,this)),this.rippleFn=et(t,{selector:"."+BE})},e.prototype.popupUnWireEvents=function(){var t=this.getPopUpElement();this.createPopupOnClick&&Ep.remove(document,"mousedown touchstart",this.delegateMousedownHandler),t&&t.parentElement&&(Ep.remove(t,"click",this.clickHandler),Ep.remove(t,"keydown",this.keyBoardHandler),this.closeActionEvents&&Ep.remove(t,this.closeActionEvents,this.focusoutHandler)),kp&&this.rippleFn&&this.rippleFn()},e.prototype.keyBoardHandler=function(t){if(t.target!==this.element||9!==t.keyCode&&(t.altKey||40!==t.keyCode)&&38!==t.keyCode)switch(t.keyCode){case 38:case 40:!t.altKey||38!==t.keyCode&&40!==t.keyCode?this.upDownKeyHandler(t):this.keyEventHandler(t);break;case 9:case 13:case 27:case 32:this.keyEventHandler(t)}},e.prototype.upDownKeyHandler=function(t){(!this.target||38!==t.keyCode&&40!==t.keyCode)&&(t.preventDefault(),function(t,e){var i=40===e?0:t.childElementCount-1,n=i,r=t.querySelector(".e-selected");r&&r.classList.remove("e-selected");for(var o=0,s=t.children.length;o<s;o++)t.children[o].classList.contains("e-focused")&&(n=o,t.children[o].classList.remove("e-focused"),40===e?n++:n--,n===(40===e?t.childElementCount:-1)&&(n=i));-1!==(n=dl(t,t.children[n],n,e))&&(I([t.children[n]],"e-focused"),t.children[n].focus())}(this.getULElement(),t.keyCode))},e.prototype.keyEventHandler=function(t){(!this.target||13!==t.keyCode&&9!==t.keyCode)&&(13===t.keyCode&&this.activeElem[0].classList.contains("e-split-btn")?this.activeElem[0].focus():t.target&&t.target.className.indexOf("e-edit-template")>-1&&32===t.keyCode||(9!==t.keyCode&&t.preventDefault(),27===t.keyCode||38===t.keyCode||9===t.keyCode?this.canOpen()||this.closePopup(t,this.element):this.clickHandler(t)))},e.prototype.getLI=function(t){return"LI"===t.tagName?t:j(t,"li")},e.prototype.mousedownHandler=function(t){var e=t.target;!this.dropDown||this.canOpen()||j(e,'[id="'+this.getPopUpElement().id+'"]')||j(e,'[id="'+this.element.id+'"]')||this.closePopup(t)},e.prototype.focusoutHandler=function(t){if(this.isPopupCreated&&!this.canOpen()){var e=t.relatedTarget;if(e&&e.className.indexOf("e-item")>-1){var i=this.getLI(e);if(i){var n=Array.prototype.indexOf.call(this.getULElement().children,i),r=this.items[n];if(r){var o={element:i,item:r};this.trigger("select",o)}}}this.closePopup(t)}},e.prototype.clickHandler=function(t){var e=t.target;if(j(e,'[id="'+this.element.id+'"]'))!this.createPopupOnClick||this.target&&!this.isColorPicker()?this.getPopUpElement().classList.contains("e-popup-close")?this.openPopUp(t):this.closePopup(t):this.isPopupCreated?this.closePopup(t,this.activeElem[0]):(this.createPopup(),this.openPopUp(t));else if(j(e,'[id="'+this.getPopUpElement().id+'"]')){var i=void 0,n=void 0,r=void 0,o=this.getLI(e);o&&(n=Array.prototype.indexOf.call(this.getULElement().children,o),(r=this.items[n])&&(i={element:o,item:r},this.trigger("select",i)),this.closePopup(t,this.activeElem[0]))}},e.prototype.openPopUp=function(t){var e=this;void 0===t&&(t=null);var i=this.getPopUpElement();if(this.target)if(this.activeElem.length>1){var n=H(this.activeElem[0],"split-btn");n.isReact&&i.childNodes.length<1&&(n.appendReactElement(this.getTargetElement(),this.getPopUpElement()),this.renderReactTemplates())}else this.isReact&&i.childNodes.length<1&&(this.appendReactElement(this.getTargetElement(),this.getPopUpElement()),this.renderReactTemplates());else this.createItems(!0);var r=this.getULElement();this.popupWireEvents();var o={element:r,items:this.items,event:t,cancel:!1};this.trigger("beforeOpen",o,function(t){if(!t.cancel){var i=e.getULElement();e.dropDown.show(null,e.element),I([e.element],"e-active"),e.element.setAttribute("aria-expanded","true"),e.element.setAttribute("aria-owns",e.getPopUpElement().id),i&&i.focus();var n={element:i,items:e.items};e.trigger("open",n)}})},e.prototype.closePopup=function(t,e){var i=this;void 0===t&&(t=null);var n=this.getULElement(),r={element:n,items:this.items,event:t,cancel:!1};this.trigger("beforeClose",r,function(t){if(t.cancel)n&&n.focus();else{var r=i.getPopUpElement();r&&Ep.remove(r,"keydown",i.keyBoardHandler),i.popupUnWireEvents();var o=i.getULElement(),s=void 0;o&&(s=o.querySelector(".e-selected")),s&&s.classList.remove("e-selected"),i.dropDown.hide(),x(i.activeElem,"e-active"),i.element.setAttribute("aria-expanded","false"),i.element.removeAttribute("aria-owns"),e&&e.focus();var a={element:o,items:i.items};i.trigger("close",a),!i.target&&o&&T(o),i.target&&!i.isColorPicker()||i.createPopupOnClick&&i.destroyPopup(),i.target&&(i.isPopupCreated=!i.createPopupOnClick)}})},e.prototype.unWireEvents=function(){this.createPopupOnClick||Ep.remove(document,"mousedown touchstart",this.delegateMousedownHandler),Ep.remove(this.element,"click",this.clickHandler),Ep.remove(this.element,"keydown",this.keyBoardHandler),this.isPopupCreated&&(Ep.remove(this.getPopUpElement(),"click",this.clickHandler),Ep.remove(this.getPopUpElement(),"keydown",this.keyBoardHandler))},e.prototype.onPropertyChanged=function(t,e){this.button.setProperties(cl(t,["content","cssClass","iconCss","iconPosition","disabled","enableRtl"]));var i;this.isPopupCreated&&(i=this.getPopUpElement(),this.dropDown.setProperties(cl(t,["enableRtl"])));for(var n=0,r=Object.keys(t);n<r.length;n++){switch(r[n]){case"content":this.element.querySelector("span.e-caret")||this.appendArrowSpan();break;case"disabled":t.disabled?(this.unWireEvents(),this.isPopupCreated&&!this.canOpen()&&this.closePopup()):this.wireEvents();break;case"cssClass":if(t.cssClass.indexOf(VE)>-1||e.cssClass.indexOf(VE)>-1){this.element.querySelector("span.e-caret")||this.appendArrowSpan();var o=this.element.querySelector("span.e-caret");t.cssClass.indexOf(VE)>-1?R(o,["e-icon-bottom"],["e-icon-right"]):R(o,["e-icon-right"],["e-icon-bottom"])}this.isPopupCreated&&(e.cssClass&&x([i],e.cssClass.split(" ")),t.cssClass&&I([i],t.cssClass.replace(/\s+/g," ").trim().split(" ")));break;case"target":this.dropDown.content=this.getTargetElement(),this.dropDown.dataBind();break;case"items":this.isPopupCreated&&this.getULElement()&&this.createItems();break;case"createPopupOnClick":t.createPopupOnClick?this.destroyPopup():this.createPopup()}}},e.prototype.focusIn=function(){this.element.focus()},PE([W("")],e.prototype,"content",void 0),PE([W("")],e.prototype,"cssClass",void 0),PE([W(!1)],e.prototype,"disabled",void 0),PE([W("")],e.prototype,"iconCss",void 0),PE([W("Left")],e.prototype,"iconPosition",void 0),PE([W(!1)],e.prototype,"enableHtmlSanitizer",void 0),PE([q([],kE)],e.prototype,"items",void 0),PE([W(!1)],e.prototype,"createPopupOnClick",void 0),PE([W("")],e.prototype,"target",void 0),PE([W("")],e.prototype,"closeActionEvents",void 0),PE([Z()],e.prototype,"beforeItemRender",void 0),PE([Z()],e.prototype,"beforeOpen",void 0),PE([Z()],e.prototype,"beforeClose",void 0),PE([Z()],e.prototype,"close",void 0),PE([Z()],e.prototype,"open",void 0),PE([Z()],e.prototype,"select",void 0),PE([Z()],e.prototype,"created",void 0),e=PE([$],e)}(Kp),FE=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),YE=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},WE="EJS-SPLITBUTTON",QE=function(t){function e(e,i){return t.call(this,e,i)||this}return FE(e,t),e.prototype.preRender=function(){var t=this.element;if(t.tagName===WE){for(var e=n("ej2_instances",t),i=this.createElement("button",{attrs:{type:"button"}}),o=this.createElement(WE,{className:"e-"+this.getModuleName()+"-wrapper"}),s=0,a=t.attributes.length;s<a;s++)i.setAttribute(t.attributes[s].nodeName,t.attributes[s].nodeValue);t.parentNode.insertBefore(o,t),T(t),t=i,o.appendChild(t),r("ej2_instances",e,t),this.wrapper=o,this.element=t}this.element.id||(this.element.id=d("e-"+this.getModuleName()))},e.prototype.render=function(){this.initWrapper(),this.createPrimaryButton(),this.renderControl()},e.prototype.renderControl=function(){this.createSecondaryButton(),this.setActiveElem([this.element,this.secondaryBtnObj.element]),this.setAria(),this.wireEvents(),this.renderComplete()},e.prototype.addItems=function(e,i){t.prototype.addItems.call(this,e,i),this.secondaryBtnObj.items=this.items},e.prototype.removeItems=function(e,i){t.prototype.removeItems.call(this,e,i),this.secondaryBtnObj.items=this.items},e.prototype.initWrapper=function(){this.wrapper||(this.wrapper=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"}),this.element.parentNode.insertBefore(this.wrapper,this.element)),this.element.classList.remove("e-"+this.getModuleName()),this.enableRtl&&this.wrapper.classList.add("e-rtl"),this.cssClass&&I([this.wrapper],this.cssClass.replace(/\s+/g," ").trim().split(" "))},e.prototype.createPrimaryButton=function(){var t={cssClass:this.cssClass,enableRtl:this.enableRtl,iconCss:this.iconCss,iconPosition:this.iconPosition,content:this.content,disabled:this.disabled};this.primaryBtnObj=new Um(t),this.primaryBtnObj.createElement=this.createElement,this.primaryBtnObj.appendTo(this.element),this.element.classList.add("e-"+this.getModuleName()),this.element.type="button",this.wrapper.appendChild(this.element)},e.prototype.createSecondaryButton=function(){var t=this,e=this.createElement("button",{className:"e-icon-btn",attrs:{tabindex:"-1"},id:this.element.id+"_dropdownbtn"});this.wrapper.appendChild(e);var i={cssClass:this.cssClass,disabled:this.disabled,enableRtl:this.enableRtl,items:this.items,target:this.target,createPopupOnClick:this.createPopupOnClick};i.beforeItemRender=function(e){t.createPopupOnClick&&(t.secondaryBtnObj.dropDown.relateTo=t.wrapper,t.dropDown=t.secondaryBtnObj.dropDown),t.trigger("beforeItemRender",e)},i.open=function(e){t.trigger("open",e)},i.close=function(e){t.trigger("close",e)},i.select=function(e){t.trigger("select",e)},i.beforeOpen=function(e){t.createPopupOnClick&&0==t.items.length&&(t.secondaryBtnObj.dropDown.relateTo=t.wrapper,t.dropDown=t.secondaryBtnObj.dropDown);var i=new XE;return t.trigger("beforeOpen",e,function(t){i.resolve(t)}),i},i.beforeClose=function(e){var i=new XE;return t.trigger("beforeClose",e,function(t){i.resolve(t)}),i},this.secondaryBtnObj=new _E(i),this.secondaryBtnObj.createElement=this.createElement,this.secondaryBtnObj.appendTo(e),this.createPopupOnClick||(this.secondaryBtnObj.dropDown.relateTo=this.wrapper,this.dropDown=this.secondaryBtnObj.dropDown),this.secondaryBtnObj.activeElem=[this.element,this.secondaryBtnObj.element],this.secondaryBtnObj.element.querySelector(".e-btn-icon").classList.remove("e-icon-right")},e.prototype.setAria=function(){L(this.element,{"aria-expanded":"false","aria-haspopup":"true","aria-label":this.element.textContent+" splitbutton","aria-owns":this.element.id+"_dropdownbtn-popup"})},e.prototype.getModuleName=function(){return"split-btn"},e.prototype.toggle=function(){this.secondaryBtnObj.toggle()},e.prototype.destroy=function(){var e=this,i=["e-rtl"];if(this.cssClass&&(i=i.concat(this.cssClass.split(" "))),this.element){var n=document.getElementById(this.element.id);n&&n.parentElement===this.wrapper&&(this.wrapper.tagName===WE?(this.wrapper.innerHTML="",x([this.wrapper],["e-rtl","e-"+this.getModuleName()+"-wrapper"]),x([this.wrapper],this.cssClass.split(" "))):(x([this.element],i),["aria-label","aria-haspopup","aria-expanded","aria-owns","type"].forEach(function(t){e.element.removeAttribute(t)}),this.wrapper.parentNode.insertBefore(this.element,this.wrapper),O(this.wrapper)),this.unWireEvents())}this.primaryBtnObj.destroy(),this.secondaryBtnObj.destroy(),t.prototype.destroy.call(this),this.element.getAttribute("class")||this.element.removeAttribute("class")},e.prototype.wireEvents=function(){Ep.add(this.element,"click",this.primaryBtnClickHandler,this),new pu(this.element,{keyAction:this.btnKeyBoardHandler.bind(this),keyConfigs:{altdownarrow:"alt+downarrow",enter:"enter"}})},e.prototype.unWireEvents=function(){Ep.remove(this.element,"click",this.primaryBtnClickHandler),y(this.element,pu).destroy()},e.prototype.primaryBtnClickHandler=function(){this.trigger("click",{element:this.element})},e.prototype.btnKeyBoardHandler=function(t){switch(t.action){case"altdownarrow":this.clickHandler(t);break;case"enter":this.clickHandler(t),this.getPopUpElement().classList.contains("e-popup-close")?this.secondaryBtnObj.element.classList.remove("e-active"):(this.element.classList.remove("e-active"),this.secondaryBtnObj.element.classList.add("e-active"))}},e.prototype.onPropertyChanged=function(t,e){var i=["content","iconCss","iconPosition","cssClass","disabled","enableRtl"];this.primaryBtnObj.setProperties(cl(t,i)),i=["beforeOpen","beforeItemRender","select","open","close","cssClass","disabled","enableRtl","createPopupOnClick"],Object.keys(t).indexOf("items")>-1&&(this.secondaryBtnObj.items=t.items,this.secondaryBtnObj.dataBind()),this.secondaryBtnObj.setProperties(cl(t,i));for(var n=0,r=Object.keys(t);n<r.length;n++){switch(r[n]){case"cssClass":e.cssClass&&x([this.wrapper],e.cssClass.split(" ")),I([this.wrapper],t.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"enableRtl":t.enableRtl?I([this.wrapper],"e-rtl"):x([this.wrapper],"e-rtl")}}},e.prototype.focusIn=function(){this.element.focus()},YE([W("")],e.prototype,"content",void 0),YE([W("")],e.prototype,"cssClass",void 0),YE([W(!1)],e.prototype,"disabled",void 0),YE([W("")],e.prototype,"iconCss",void 0),YE([W("Left")],e.prototype,"iconPosition",void 0),YE([W(!1)],e.prototype,"createPopupOnClick",void 0),YE([q([],kE)],e.prototype,"items",void 0),YE([W("")],e.prototype,"target",void 0),YE([Z()],e.prototype,"beforeItemRender",void 0),YE([Z()],e.prototype,"beforeOpen",void 0),YE([Z()],e.prototype,"beforeClose",void 0),YE([Z()],e.prototype,"click",void 0),YE([Z()],e.prototype,"close",void 0),YE([Z()],e.prototype,"open",void 0),YE([Z()],e.prototype,"select",void 0),YE([Z()],e.prototype,"created",void 0),e=YE([$],e)}(_E),XE=function(){return function(){var t=this;this.promise=new Promise(function(e,i){t.resolve=e,t.reject=i}),this.catch=this.promise.catch.bind(this.promise),this.then=this.promise.then.bind(this.promise)}}(),qE=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),GE=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},ZE="e-hide-spinner",$E="e-progress-active",KE="e-btn-content",JE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return qE(e,t),GE([W(null)],e.prototype,"template",void 0),GE([W(16)],e.prototype,"width",void 0),GE([W("Left")],e.prototype,"position",void 0),e}(Rp),tD=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return qE(e,t),GE([W(400)],e.prototype,"duration",void 0),GE([W("None")],e.prototype,"effect",void 0),GE([W("ease")],e.prototype,"easing",void 0),e}(Rp),eD=(function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.step=1,n}qE(e,t),e.prototype.preRender=function(){t.prototype.preRender.call(this)},e.prototype.render=function(){t.prototype.render.call(this),this.init(),this.wireEvents(),this.setAria(),this.renderComplete()},e.prototype.start=function(t){this.isPaused=!1,this.startProgress(t||this.percent,this.progressTime)},e.prototype.stop=function(){this.isPaused=!0,cancelAnimationFrame(this.timerId)},e.prototype.progressComplete=function(){this.isPaused=!1,this.finishProgress()},e.prototype.getModuleName=function(){return"progress-btn"},e.prototype.destroy=function(){var e=this,i=[ZE,$E,"e-round-corner","e-"+t.prototype.getModuleName.call(this),"e-spin-"+this.spinSettings.position.toLowerCase()];t.prototype.destroy.call(this),this.unWireEvents(),this.element.innerHTML="",this.cssClass&&(i=i.concat(this.cssClass.split(" "))),x([this.element],i);(this.element.getAttribute("class")?["aria-label","aria-valuemin","aria-valuemax","aria-valuenow"]:["aria-label","aria-valuemin","aria-valuemax","aria-valuenow","class"]).forEach(function(t){e.element.removeAttribute(t)}),this.disabled&&this.element.removeAttribute("disabled")},e.prototype.init=function(){this.element.classList.add("e-"+t.prototype.getModuleName.call(this)),this.setContent(),this.createSpinner(),this.enableProgress&&this.createProgress()},e.prototype.createSpinner=function(){var t=this.createElement("span",{className:"e-spinner"});this.setSpinPosition(t),ki({target:t,width:this.spinSettings.width||16,template:this.spinSettings.template},this.createElement)},e.prototype.getSpinner=function(){return this.element.getElementsByClassName("e-spinner")[0]},e.prototype.getProgress=function(){return this.element.getElementsByClassName("e-progress")[0]},e.prototype.setSpinPosition=function(t){var e=this.spinSettings.position||"Left";"Left"===e||"Top"===e?this.element.insertBefore(t,this.element.getElementsByClassName(KE)[0]):this.element.appendChild(t),this.element.classList.add("e-spin-"+e.toLowerCase())},e.prototype.createProgress=function(){this.element.appendChild(this.createElement("span",{className:"e-progress"}))},e.prototype.setContent=function(){var t;t=this.element.innerHTML,this.enableHtmlSanitizer&&(t=Yu.sanitize(this.element.innerHTML)),this.element.innerHTML="",this.element.appendChild(this.createElement("span",{className:KE,innerHTML:t}))},e.prototype.setContentIcon=function(t){var e=this.createElement("span",{className:KE,innerHTML:t});if(this.iconCss){var i=this.createElement("span",{className:"e-btn-icon "+this.iconCss});this.element.textContent.trim()?(i.classList.add("e-icon-"+this.iconPosition.toLowerCase()),"Top"!==this.iconPosition&&"Bottom"!==this.iconPosition||this.element.classList.add("e-"+this.iconPosition.toLowerCase()+"-icon-btn")):this.element.classList.add("e-icon-btn");var n=e.childNodes[0];!n||"Left"!==this.iconPosition&&"Top"!==this.iconPosition?e.appendChild(i):e.insertBefore(i,n)}this.element.appendChild(e)},e.prototype.clickHandler=function(){this.element.classList.contains($E)||this.startProgress()},e.prototype.startProgress=function(t,e){var i=this.element.classList,n=i.contains("e-vertical");i.add($E),i.contains(ZE)||Qi(this.element),this.startAnimate(Date.now(),e||0,e?Date.now()-1*this.duration/100:Date.now(),t||0,0,this.step,0,n),this.startContAnimate()},e.prototype.startAnimate=function(t,e,i,n,r,o,s,a){var l=this;try{var h=t-i,c=this.duration*o/100,d=h?h<c?h-c:h%c:0;this.progressTime=e=e+h-d,i=t-d,n+=(h-d)/this.duration*100;var p={percent:r=(e-s)%c==0||100===n?n:r,currentDuration:e,step:o};this.eIsVertical=a,0===n?this.trigger("begin",p,function(t){l.successCallback(t,n,r,e,s,d,i)}):100===n||e===this.duration?this.trigger("end",p,function(t){l.successCallback(t,n,r,e,s,d,i)}):this.trigger("progress",p,function(t){l.successCallback(t,n,r,e,s,d,i)})}catch(t){cancelAnimationFrame(this.timerId),this.trigger("fail",t)}},e.prototype.successCallback=function(t,e,i,n,r,o,s){var a=this,l=e,h=i,c=o,d=n,p=r,u=s,g=this.eIsVertical;l!==t.percent&&t.percent!==h&&(l=t.percent),this.percent=l,this.step=t.step,(d-p)%(this.duration*t.step/100)!=0&&100!==l||(this.timerId=requestAnimationFrame(function(){a.enableProgress&&(a.getProgress().style[g?"height":"width"]=l+"%"),a.element.setAttribute("aria-valuenow",l.toString())}),h=l,p=d),this.isPaused||(d<this.duration&&l<100?this.interval=window.setTimeout(function(){a.startAnimate(Date.now(),d,u,l,h,t.step,p,g)},this.duration/100-c):this.interval=window.setTimeout(function(){a.progressTime=a.percent=0,a.enableProgress&&(a.getProgress().style[g?"height":"width"]="0%"),a.element.setAttribute("aria-valuenow","0"),a.hideSpin()},100))},e.prototype.startContAnimate=function(){var t=this,e=this.element.getElementsByClassName(KE)[0];"None"!==this.animationSettings.effect?new zp({}).animate(e,{duration:this.animationSettings.duration,name:"Progress"+this.animationSettings.effect,timingFunction:this.animationSettings.easing,begin:function(){"Center"===t.spinSettings.position&&t.setSpinnerSize()},end:function(){e.classList.add("e-animate-end")}}):"Center"===this.spinSettings.position&&this.setSpinnerSize()},e.prototype.finishProgress=function(){var t=this.element.classList,e=t.contains("e-vertical");t.add($E);for(var i=this.percent;i<100;i++)(i+=10)>100&&(i=100),this.enableProgress&&(this.getProgress().style[e?"height":"width"]=this.percent<100?i+"%":"100%");this.element.setAttribute("aria-valuenow","0"),this.hideSpin();var n={step:this.step,currentDuration:this.progressTime,percent:100};clearTimeout(this.interval),this.trigger("end",n),this.progressTime=this.percent=0},e.prototype.setSpinnerSize=function(){var t=this.element.getElementsByClassName(KE)[0],e=this.getSpinner();e.style.width=Math.max(e.offsetWidth,t.offsetWidth)+"px",e.style.height=Math.max(e.offsetHeight,t.offsetHeight)+"px",t.classList.add("e-cont-animate")},e.prototype.hideSpin=function(){var t=this.element.getElementsByClassName(KE)[0];if(this.element.classList.contains(ZE)||qi(this.element),this.element.classList.remove($E),"None"!==this.animationSettings.effect&&t.classList.remove("e-animate-end"),"Center"===this.spinSettings.position){var e=this.getSpinner();t.classList.remove("e-cont-animate"),e.style.width="auto",e.style.height="auto"}},e.prototype.setIconSpan=function(){var t=this.element.getElementsByClassName(KE)[0],e=this.element.getElementsByClassName("e-btn-icon")[0];!t.childNodes[0]||"Left"!==this.iconPosition&&"Top"!==this.iconPosition?t.appendChild(e):t.insertBefore(e,t.childNodes[0])},e.prototype.setAria=function(){L(this.element,{"aria-label":this.element.textContent+" progress","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":"0"})},e.prototype.wireEvents=function(){Ep.add(this.element,"click",this.clickHandler,this)},e.prototype.unWireEvents=function(){Ep.remove(this.element,"click",this.clickHandler)},e.prototype.onPropertyChanged=function(e,i){var n=this.element,r=!1;this.element.querySelector(".e-spinner-pane").classList.contains("e-spin-show")&&(r=!0),t.prototype.onPropertyChanged.call(this,e,i);for(var o=0,s=Object.keys(e);o<s.length;o++){switch(s[o]){case"content":this.setContent(),this.createSpinner(),r&&(Qi(this.element),r=!1),this.enableProgress&&this.createProgress(),n.setAttribute("aria-label",n.textContent+" progress");break;case"iconCss":i.iconCss||this.setIconSpan();break;case"iconPosition":this.setIconSpan();break;case"enableProgress":e.enableProgress?this.createProgress():O(this.getProgress());break;case"spinSettings":e.spinSettings.position&&(n.classList.remove("e-spin-"+i.spinSettings.position.toLowerCase()),this.setSpinPosition(this.getSpinner())),(e.spinSettings.template||e.spinSettings.width)&&(n.removeChild(this.getSpinner()),this.createSpinner())}}},e.prototype.focusIn=function(){this.element.focus()},GE([W(!1)],e.prototype,"enableProgress",void 0),GE([W(2e3)],e.prototype,"duration",void 0),GE([W("Left")],e.prototype,"iconPosition",void 0),GE([W("")],e.prototype,"iconCss",void 0),GE([W(!1)],e.prototype,"disabled",void 0),GE([W(!1)],e.prototype,"isPrimary",void 0),GE([W("")],e.prototype,"cssClass",void 0),GE([W("")],e.prototype,"content",void 0),GE([W(!1)],e.prototype,"isToggle",void 0),GE([W(!1)],e.prototype,"enableHtmlSanitizer",void 0),GE([Q({},JE)],e.prototype,"spinSettings",void 0),GE([Q({},tD)],e.prototype,"animationSettings",void 0),GE([Z()],e.prototype,"created",void 0),GE([Z()],e.prototype,"begin",void 0),GE([Z()],e.prototype,"progress",void 0),GE([Z()],e.prototype,"end",void 0),GE([Z()],e.prototype,"fail",void 0),e=GE([$],e)}(Um),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),iD=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},nD="e-ctrl-btn",rD="e-switch-ctrl-btn",oD="e-hide-hex-value",sD="e-hide-opacity",aD="e-hide-switchable-value",lD="e-hide-value",hD="e-hide-valueswitcher",cD="e-hsv-color",dD="e-selected-value",pD="e-mode-switch-btn",uD="e-nocolor-item",gD="e-opacity-value",mD="e-palette",fD="e-color-palette",vD="e-color-picker",yD="e-preview-container",bD="e-previous",SD="e-show-value",wD="e-selected",ID="e-split-preview",xD=["#000000","#f44336","#e91e63","#9c27b0","#673ab7","#2196f3","#03a9f4","#00bcd4","#009688","#ffeb3b","#ffffff","#ffebee","#fce4ec","#f3e5f5","#ede7f6","#e3f2fd","#e1f5fe","#e0f7fa","#e0f2f1","#fffde7","#f2f2f2","#ffcdd2","#f8bbd0","#e1bee7","#d1c4e9","#bbdefb","#b3e5fc","#b2ebf2","#b2dfdb","#fff9c4","#e6e6e6","#ef9a9a","#f48fb1","#ce93d8","#b39ddb","#90caf9","#81d4fa","#80deea","#80cbc4","#fff59d","#cccccc","#e57373","#f06292","#ba68c8","#9575cd","#64b5f6","#4fc3f7","#4dd0e1","#4db6ac","#fff176","#b3b3b3","#ef5350","#ec407a","#ab47bc","#7e57c2","#42a5f5","#29b6f6","#26c6da","#26a69a","#ffee58","#999999","#e53935","#d81b60","#8e24aa","#5e35b1","#1e88e5","#039be5","#00acc1","#00897b","#fdd835","#808080","#d32f2f","#c2185b","#7b1fa2","#512da8","#1976d2","#0288d1","#0097a7","#00796b","#fbc02d","#666666","#c62828","#ad1457","#6a1b9a","#4527a0","#1565c0","#0277bd","#00838f","#00695c","#f9a825","#4d4d4d","#b71c1c","#880e4f","#4a148c","#311b92","#0d47a1","#01579b","#006064","#004d40","#f57f17"],MD=(function(t){function e(e,i){return t.call(this,e,i)||this}eD(e,t),e.prototype.preRender=function(){var t=this.element;this.formElement=j(this.element,"form"),this.formElement&&Ep.add(this.formElement,"reset",this.formResetHandler,this);this.l10n=new uu("colorpicker",{Apply:"Apply",Cancel:"Cancel",ModeSwitcher:"Switch Mode"},this.locale),t.getAttribute("ejs-for")&&!t.getAttribute("name")&&t.setAttribute("name",t.id)},e.prototype.render=function(){this.initWrapper(),this.inline?this.createWidget():this.createSplitBtn(),this.enableOpacity||I([this.container.parentElement],sD),this.renderComplete()},e.prototype.initWrapper=function(){var t=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"});this.element.parentNode.insertBefore(t,this.element),t.appendChild(this.element),L(this.element,{tabindex:"-1",spellcheck:"false","aria-label":"colorpicker"}),this.container=this.createElement("div",{className:"e-container"}),this.getWrapper().appendChild(this.container);var e=this.value?this.roundValue(this.value).toLowerCase():"#008000ff";this.noColor&&"Palette"===this.mode&&""===this.value&&(e="");var i=e.slice(0,7);h(this.initialInputValue)&&(this.initialInputValue=i),this.element.value=i,this.enableOpacity?this.setProperties({value:e},!0):this.setProperties({value:i},!0),this.enableRtl&&t.classList.add("e-rtl"),this.cssClass&&I([t],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.tileRipple=et(this.container,{selector:".e-tile"}),this.ctrlBtnRipple=et(this.container,{selector:".e-btn"})},e.prototype.getWrapper=function(){return this.element.parentElement},e.prototype.createWidget=function(){"Palette"===this.mode?(this.createPalette(),this.inline||this.firstPaletteFocus()):(this.createPicker(),this.inline||this.getDragHandler().focus()),this.isRgb=!0,this.createInput(),this.createCtrlBtn(),this.disabled||this.wireEvents(),this.inline&&this.disabled&&this.toggleDisabled(!0),Np.isDevice&&this.refreshPopupPos()},e.prototype.createSplitBtn=function(){var t=this,e=this.createElement("button",{className:"e-split-colorpicker"});this.getWrapper().appendChild(e),this.splitBtn=new QE({iconCss:"e-selected-color",target:this.container,disabled:this.disabled,enableRtl:this.enableRtl,createPopupOnClick:this.createPopupOnClick,open:this.onOpen.bind(this),click:function(){t.trigger("change",{currentValue:{hex:t.value.slice(0,7),rgba:t.convertToRgbString(t.hexToRgb(t.value))},previousValue:{hex:null,rgba:null},value:t.value})}}),this.splitBtn.createElement=this.createElement,this.splitBtn.appendTo(e);var i=this.createElement("span",{className:ID});A(".e-selected-color",e).appendChild(i),i.style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value));var n=this.getPopupEle();if(I([n],"e-colorpicker-popup"),this.cssClass&&I([n],this.cssClass.replace(/\s+/g," ").trim().split(" ")),Np.isDevice){var r=this.getPopupInst();r.relateTo=document.body,r.position={X:"center",Y:"center"},r.targetType="container",r.collision={X:"fit",Y:"fit"},r.offsetY=4,n.style.zIndex=ui(this.splitBtn.element).toString()}this.bindCallBackEvent()},e.prototype.onOpen=function(){this.trigger("open",{element:this.container})},e.prototype.getPopupInst=function(){return y(this.getPopupEle(),Am)},e.prototype.bindCallBackEvent=function(){var t=this;this.splitBtn.beforeOpen=function(e){var i=new XE;return t.trigger("beforeOpen",e,function(n){if(!n.cancel){var r=t.getPopupEle();r.style.top=m(0+pageYOffset),r.style.left=m(0+pageXOffset),r.style.display="block",t.createWidget(),r.style.display="",Np.isDevice&&(t.modal=t.createElement("div"),t.modal.className="e-"+t.getModuleName()+" e-modal",t.modal.style.display="none",document.body.insertBefore(t.modal,r),document.body.className+=" e-colorpicker-overflow",t.modal.style.display="block",t.modal.style.zIndex=(Number(r.style.zIndex)-1).toString())}e.cancel=n.cancel,i.resolve(n)}),i},this.splitBtn.beforeClose=function(e){var i=new XE;if(h(e.event))i.resolve(e);else{var n={element:t.container,event:e.event,cancel:!1};t.trigger("beforeClose",n,function(n){Np.isDevice&&e.event.target===t.modal&&(n.cancel=!0),n.cancel||t.onPopupClose(),e.cancel=n.cancel,i.resolve(n)})}return i}},e.prototype.onPopupClose=function(){this.unWireEvents(),this.destroyOtherComp(),this.container.style.width="",A("."+ID,this.splitBtn.element).style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value)),this.container.innerHTML="",x([this.container],[vD,fD]),Np.isDevice&&this.modal&&(x([document.body],"e-colorpicker-overflow"),this.modal.style.display="none",this.modal.outerHTML="",this.modal=null)},e.prototype.createPalette=function(){if(R(this.container,[fD],[vD]),this.presetColors){var t=this.createElement("div",{className:"e-custom-palette"});this.appendElement(t);var e=Object.keys(this.presetColors);if(1===e.length)this.appendPalette(this.presetColors[e[0]],e[0],t);else for(var i=0,n=e.length;i<n;i++)this.appendPalette(this.presetColors[e[i]],e[i],t);z(".e-row",t).length>10&&I([t],"e-palette-group")}else this.appendPalette(xD,"default");"Palette"===this.mode&&!this.modeSwitcher&&this.noColor&&this.setNoColor();var r=parseInt(getComputedStyle(this.container).borderBottomWidth,10);this.container.style.width=m(this.container.children[0].offsetWidth+r+r),this.rgb=this.hexToRgb(this.roundValue(this.value)),this.hsv=this.rgbToHsv.apply(this,this.rgb)},e.prototype.firstPaletteFocus=function(){A("."+wD,this.container.children[0])||z("."+mD,this.container)[0].focus()},e.prototype.appendPalette=function(t,e,i){var n=this.createElement("div",{className:mD,attrs:{tabindex:"0",role:"grid"}});i?i.appendChild(n):this.appendElement(n);for(var r,o,s,a=0,l=t.length;a<l;a++)0!==a&&a%this.columns!=0||(r=this.createElement("div",{className:"e-row",attrs:{role:"row"}}),n.appendChild(r)),s=this.roundValue(t[a]).toLowerCase(),o=this.createElement("span",{className:"e-tile",attrs:{role:"gridcell","aria-label":s,"aria-selected":"false",tabindex:"0"}}),this.trigger("beforeTileRender",{element:o,presetName:e,value:t[a]}),r.appendChild(o),this.value===s&&(this.addTileSelection(o),n.focus()),o.style.backgroundColor=this.convertToRgbString(this.hexToRgb(s))},e.prototype.setNoColor=function(){var t=this.container.querySelector(".e-row").children[0];t.classList.add(uD),this.value||(t.classList.add(wD),j(t,"."+mD).focus()),["aria-selected","aria-label"].forEach(function(e){t.removeAttribute(e)}),t.style.backgroundColor=""},e.prototype.appendElement=function(t,e){void 0===e&&(e=0);var i=this.container.children[e];i?this.container.insertBefore(t,i):this.container.appendChild(t)},e.prototype.addTileSelection=function(t){t.classList.add(wD),t.setAttribute("aria-selected","true")},e.prototype.createPicker=function(){R(this.container,[vD],[fD]);var t=this.createElement("div",{className:"e-hsv-container"});this.appendElement(t),t.appendChild(this.createElement("div",{className:cD}));var e=this.createElement("span",{className:"e-handler",attrs:{tabindex:"0"}});t.appendChild(e),null===this.value&&(this.value="#008000ff"),this.rgb=this.hexToRgb(this.value),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.setHsvContainerBg(),this.setHandlerPosition(),this.createSlider(),this.createDragTooltip()},e.prototype.setHsvContainerBg=function(t){void 0===t&&(t=this.hsv[0]),this.getHsvContainer().style.backgroundColor=this.convertToRgbString(this.hsvToRgb(t,100,100,1))},e.prototype.getHsvContainer=function(){return A(".e-hsv-container",this.container)},e.prototype.setHandlerPosition=function(){var t=this.getDragHandler(),e=A("."+cD,this.container);this.enableRtl?t.style.left=m(e.offsetWidth*Math.abs(100-this.hsv[1])/100):t.style.left=m(e.offsetWidth*this.hsv[1]/100),t.style.top=m(e.offsetHeight*(100-this.hsv[2])/100)},e.prototype.createSlider=function(){var t=this.createElement("div",{className:"e-slider-preview"});this.appendElement(t,1),this.createPreview(t);var e=this.createElement("div",{className:"e-colorpicker-slider"});t.insertBefore(e,t.children[0]);var i=this.createElement("div",{className:"e-hue-slider"});e.appendChild(i),this.hueSlider=new iE({value:this.hsv[0],min:0,max:359,enableRtl:this.enableRtl,enabled:!this.disabled,change:this.hueChange.bind(this)}),this.hueSlider.createElement=this.createElement,this.hueSlider.appendTo(i),this.enableOpacity&&(i=this.createElement("div",{className:"e-opacity-slider"}),e.appendChild(i),this.createOpacitySlider(i))},e.prototype.createOpacitySlider=function(t){this.opacitySlider=new iE({value:100*this.rgb[3],min:0,max:100,enableRtl:this.enableRtl,enabled:!this.disabled,change:this.opacityChange.bind(this)}),this.opacitySlider.createElement=this.createElement,this.opacitySlider.appendTo(t);var e=this.createElement("div",{className:"e-opacity-empty-track"});t.appendChild(e),this.updateOpacitySliderBg()},e.prototype.updateOpacitySliderBg=function(){var t=this.enableRtl?"to left":"to right",e=A(".e-opacity-empty-track",this.opacitySlider.element);e&&(e.style.background="linear-gradient("+t+", rgba("+this.rgb.slice(0,3)+", 0) 0%, "+this.convertToRgbString(this.rgb.slice(0,3))+" 100%)")},e.prototype.hueChange=function(t){this.hsv[0]=t.value,this.setHsvContainerBg(),this.convertToOtherFormat()},e.prototype.opacityChange=function(t){var e=t.value,i=this.rgbToHex(this.rgb);this.hsv[3]=e/100,this.rgb[3]=e/100;var n=this.rgbToHex(this.rgb);this.updateOpacityInput(e);var r=this.convertToRgbString(this.rgb);this.updatePreview(r),this.triggerEvent(n,i,r)},e.prototype.updateOpacityInput=function(t){if(this.enableOpacity&&!this.getWrapper().classList.contains(lD)){var e=y(A("."+gD,this.container),BC);e.value=t,e.dataBind()}},e.prototype.createPreview=function(t){var e=this.createElement("div",{className:yD});t.appendChild(e);var i=this.createElement("span",{className:"e-preview e-current"});e.appendChild(i);var n=this.convertToRgbString(this.rgb);i.style.backgroundColor=n,i=this.createElement("span",{className:"e-preview "+bD}),e.appendChild(i),i.style.backgroundColor=n},e.prototype.isPicker=function(){return!this.container.classList.contains(fD)},e.prototype.getPopupEle=function(){return this.container.parentElement},e.prototype.createNumericInput=function(t,e,i,n){var r=this,o=new BC({value:e,placeholder:i,min:0,max:n,format:"###.##",showSpinButton:!1,floatLabelType:"Always",enableRtl:this.enableRtl,enabled:!this.disabled,readonly:!this.isPicker(),change:function(t){t.event&&r.inputHandler(t.event)}});o.createElement=this.createElement,o.appendTo(t)},e.prototype.createInput=function(){var t=this.isPicker(),e=this.getWrapper();if(t&&!e.classList.contains(lD)||!t&&e.classList.contains(SD)){var i=this.createElement("div",{className:dD});t?this.appendElement(i,2):this.appendElement(i,1);var n=this.createElement("div",{className:"e-input-container"});if(i.appendChild(n),e.classList.contains(hD)||this.appendValueSwitchBtn(i),!e.classList.contains(oD)){var r=this.createElement("input",{className:"e-hex",attrs:{maxlength:"7",spellcheck:"false","aria-label":"HEX"}});n.appendChild(r),zx.createInput({element:r,floatLabelType:"Always",properties:{placeholder:"HEX",enableRtl:this.enableRtl,enabled:!this.disabled,readonly:!this.isPicker()}},this.createElement),zx.setValue(this.value.slice(0,7),r),r.addEventListener("input",this.inputHandler.bind(this))}if(!e.classList.contains(aD)){var o=void 0,s=void 0;this.isRgb?(o="RGB",s=this.rgb):(o="HSV",s=this.hsv);for(var a=["rh","gs","bv"],l=0;l<3;l++)this.createNumericInput(n.appendChild(this.createElement("input",{className:"e-"+a[l]+"-value"})),s[l],o[l],255);this.enableOpacity&&this.appendOpacityValue(n)}}},e.prototype.appendOpacityValue=function(t){this.createNumericInput(t.appendChild(this.createElement("input",{className:gD})),100*this.rgb[3],"A",100)},e.prototype.appendValueSwitchBtn=function(t){var e=this.createElement("button",{className:"e-icons e-css e-btn e-flat e-icon-btn e-value-switch-btn",attrs:{title:"Toggle format"}});t.appendChild(e),this.isPicker()&&!this.getWrapper().classList.contains(aD)&&e.addEventListener("click",this.formatSwitchHandler.bind(this))},e.prototype.createCtrlBtn=function(){if(this.modeSwitcher||this.showButtons){this.l10n.setLocale(this.locale);var t=this.createElement("div",{className:rD});if(this.container.appendChild(t),this.showButtons){var e=this.createElement("div",{className:nD});t.appendChild(e);var i=this.l10n.getConstant("Apply");e.appendChild(this.createElement("button",{innerHTML:i,className:"e-btn e-css e-flat e-primary e-small e-apply",attrs:{title:i}}));var n=this.l10n.getConstant("Cancel");e.appendChild(this.createElement("button",{innerHTML:n,className:"e-btn e-css e-flat e-small e-cancel",attrs:{title:n}}))}this.modeSwitcher&&this.appendModeSwitchBtn()}},e.prototype.appendModeSwitchBtn=function(){var t=this.createElement("button",{className:"e-icons e-btn e-flat e-icon-btn "+pD,attrs:{title:this.l10n.getConstant("ModeSwitcher")}});A("."+rD,this.container).insertBefore(t,A("."+nD,this.container))},e.prototype.createDragTooltip=function(){var t=this,e=new Ny({opensOn:"Custom",showTipPointer:!1,cssClass:"e-color-picker-tooltip",beforeOpen:function(e){t.tooltipEle=e.element},animation:{open:{effect:"None"},close:{effect:"None"}}});e.createElement=this.createElement,e.appendTo(this.container),e.open(this.container),this.tooltipEle.style.zIndex=ui(this.tooltipEle).toString(),A(".e-tip-content",this.tooltipEle).appendChild(this.createElement("div",{className:"e-tip-transparent"}))},e.prototype.getTooltipInst=function(){return y(this.container,Ny)},e.prototype.setTooltipOffset=function(t){this.getTooltipInst().offsetY=t},e.prototype.toggleDisabled=function(t){t?this.getWrapper().classList.add("e-disabled"):this.getWrapper().classList.remove("e-disabled"),this.showButtons&&[].slice.call(z(".e-btn",this.container)).forEach(function(e){t?L(e,{disabled:""}):e.removeAttribute("disabled")})},e.prototype.convertToRgbString=function(t){return t.length?4===t.length?"rgba("+t.join()+")":"rgb("+t.join()+")":""},e.prototype.convertToHsvString=function(t){return 4===t.length?"hsva("+t.join()+")":"hsv("+t.join()+")"},e.prototype.updateHsv=function(){this.hsv[1]=this.hsv[1]>100?100:this.hsv[1],this.hsv[2]=this.hsv[2]>100?100:this.hsv[2],this.setHandlerPosition()},e.prototype.convertToOtherFormat=function(t){void 0===t&&(t=!1);var e=this.rgbToHex(this.rgb);this.rgb=this.hsvToRgb.apply(this,this.hsv);var i=this.rgbToHex(this.rgb),n=this.convertToRgbString(this.rgb);this.updatePreview(n),this.updateInput(i),this.triggerEvent(i,e,n,t)},e.prototype.updateInput=function(t){var e=this.getWrapper();e.classList.contains(lD)||(e.classList.contains(oD)||zx.setValue(t.substr(0,7),A(".e-hex",this.container)),e.classList.contains(aD)||(this.isRgb?this.updateValue(this.rgb,!1):this.updateValue(this.hsv,!1)))},e.prototype.updatePreview=function(t){this.enableOpacity&&this.updateOpacitySliderBg(),A(".e-tip-transparent",this.tooltipEle).style.backgroundColor=t,A("."+yD+" .e-current",this.container).style.backgroundColor=t,A("."+yD+" ."+bD,this.container).style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value))},e.prototype.getDragHandler=function(){return A(".e-handler",this.container)},e.prototype.removeTileSelection=function(){[].slice.call(z("."+wD,this.container.children[0])).forEach(function(t){t.classList.remove(wD),t.setAttribute("aria-selected","false")})},e.prototype.convertRgbToNumberArray=function(t){return t.slice(t.indexOf("(")+1,t.indexOf(")")).split(",").map(function(t,e){return 3!==e?parseInt(t,10):parseFloat(t)})},e.prototype.getValue=function(t,e){if(t||(t=this.value),e=e?e.toLowerCase():"hex","r"===t[0]){var i=this.convertRgbToNumberArray(t);if("hex"===e||"hexa"===e){var n=this.rgbToHex(i);return"hex"===e?n.slice(0,7):n}return"hsv"===e?this.convertToHsvString(this.rgbToHsv.apply(this,i.slice(0,3))):"hsva"===e?this.convertToHsvString(this.rgbToHsv.apply(this,i)):"null"}if("h"===t[0]){i=this.hsvToRgb.apply(this,this.convertRgbToNumberArray(t));if("rgba"===e)return this.convertToRgbString(i);if("hex"===e||"hexa"===e){n=this.rgbToHex(i);return"hex"===e?n.slice(0,7):n}return"rgb"===e?this.convertToRgbString(i.slice(0,3)):"null"}t=this.roundValue(t);var r=this.hexToRgb(t);return"rgb"!==e&&"hsv"!==e||(r=r.slice(0,3)),"rgba"===e||"rgb"===e?this.convertToRgbString(r):"hsva"===e||"hsv"===e?this.convertToHsvString(this.rgbToHsv.apply(this,r)):"hex"===e?t.slice(0,7):"a"===e?r[3].toString():"null"},e.prototype.toggle=function(){this.container.parentElement.classList.contains("e-popup-close")?this.splitBtn.toggle():this.closePopup(null)},e.prototype.getModuleName=function(){return"colorpicker"},e.prototype.getPersistData=function(){return this.addOnPersist(["value"])},e.prototype.wireEvents=function(){if(this.isPicker()){var t=this.getDragHandler();Ep.add(t,"keydown",this.pickerKeyDown,this);var e=A("."+nD,this.container);e&&Ep.add(e,"keydown",this.ctrlBtnKeyDown,this),Ep.add(this.getHsvContainer(),"mousedown touchstart",this.handlerDown,this),(this.modeSwitcher||this.showButtons)&&this.addCtrlSwitchEvent(),Ep.add(A("."+bD,this.container),"click",this.previewHandler,this)}else Ep.add(this.container,"click",this.paletteClickHandler,this),Ep.add(this.container,"keydown",this.paletteKeyDown,this)},e.prototype.formResetHandler=function(){this.value=this.initialInputValue,L(this.element,{value:this.initialInputValue})},e.prototype.addCtrlSwitchEvent=function(){var t=A("."+rD,this.container);t&&Ep.add(t,"click",this.btnClickHandler,this)},e.prototype.ctrlBtnKeyDown=function(t){if(13===t.keyCode){if(A(".e-apply",this.container)){var e=this.rgbToHex(this.rgb);this.triggerChangeEvent(e)}this.splitBtn.element.focus()}},e.prototype.pickerKeyDown=function(t){switch(t.keyCode){case 39:this.handlerDragPosition(1,this.enableRtl?-1:1,t);break;case 37:this.handlerDragPosition(1,this.enableRtl?1:-1,t);break;case 38:this.handlerDragPosition(2,1,t);break;case 40:this.handlerDragPosition(2,-1,t);break;case 13:t.preventDefault();var e=this.rgbToHex(this.rgb);this.enterKeyHandler(e,t)}},e.prototype.enterKeyHandler=function(t,e){this.triggerChangeEvent(t),this.inline||this.splitBtn.element.focus()},e.prototype.closePopup=function(t){var e=this,i={element:this.container,event:t,cancel:!1};this.trigger("beforeClose",i,function(t){t.cancel||(e.splitBtn.toggle(),e.onPopupClose())})},e.prototype.triggerChangeEvent=function(t){var e=t.slice(0,7);this.trigger("change",{currentValue:{hex:e,rgba:this.convertToRgbString(this.rgb)},previousValue:{hex:this.value.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(this.value))},value:this.enableOpacity?t:e}),this.enableOpacity?this.setProperties({value:t},!0):this.setProperties({value:e},!0),this.element.value=e||"#000000"},e.prototype.handlerDragPosition=function(t,e,i){i.preventDefault(),this.hsv[t]+=e*(i.ctrlKey?1:3),this.hsv[t]<0&&(this.hsv[t]=0),this.updateHsv(),this.convertToOtherFormat(!0)},e.prototype.handlerDown=function(t){t.preventDefault(),"mousedown"===t.type?(this.clientX=Math.abs(t.pageX-pageXOffset),this.clientY=Math.abs(t.pageY-pageYOffset),this.setTooltipOffset(8)):(this.clientX=Math.abs(t.changedTouches[0].pageX-pageXOffset),this.clientY=Math.abs(t.changedTouches[0].pageY-pageYOffset),this.setTooltipOffset(-8)),this.setHsv(this.clientX,this.clientY),this.getDragHandler().style.transition="left .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1)",this.updateHsv(),this.convertToOtherFormat(),this.getDragHandler().focus(),Ep.add(document,"mousemove touchmove",this.handlerMove,this),Ep.add(document,"mouseup touchend",this.handlerEnd,this)},e.prototype.handlerMove=function(t){"touchmove"!==t.type&&t.preventDefault();var e,i;"mousemove"===t.type?(e=Math.abs(t.pageX-pageXOffset),i=Math.abs(t.pageY-pageYOffset)):(e=Math.abs(t.changedTouches[0].pageX-pageXOffset),i=Math.abs(t.changedTouches[0].pageY-pageYOffset)),this.setHsv(e,i);var n=this.getDragHandler();this.updateHsv(),this.convertToOtherFormat(),this.getTooltipInst().refresh(n),this.tooltipEle.style.transform||(Math.abs(this.clientX-e)>8||Math.abs(this.clientY-i)>8)&&(A("."+cD,this.container).style.cursor="pointer",n.style.transition="none",this.inline||(this.tooltipEle.style.zIndex=(parseInt(this.getPopupEle().style.zIndex,10)+1).toString()),this.tooltipEle.style.transform="rotate(45deg)",n.classList.add("e-hide-handler"))},e.prototype.setHsv=function(t,e){var i=A("."+cD,this.container),n=i.getBoundingClientRect();t=this.enableRtl?t>n.right?0:Math.abs(t-n.right):t>n.left?Math.abs(t-n.left):0,e=e>n.top?Math.abs(e-n.top):0,this.hsv[2]=Math.round(10*Number(100*(i.offsetHeight-Math.max(0,Math.min(i.offsetHeight,e-i.offsetTop)))/i.offsetHeight))/10,this.hsv[1]=Math.round(10*Number(100*Math.max(0,Math.min(i.offsetWidth,t-i.offsetLeft))/i.offsetWidth))/10},e.prototype.handlerEnd=function(t){"touchend"!==t.type&&t.preventDefault(),Ep.remove(document,"mousemove touchmove",this.handlerMove),Ep.remove(document,"mouseup touchend",this.handlerEnd);var e=this.getDragHandler();A("."+cD,this.container).style.cursor="",this.tooltipEle.style.transform&&(this.tooltipEle.style.transform="",e.classList.remove("e-hide-handler")),this.inline||this.showButtons||this.closePopup(t)},e.prototype.btnClickHandler=function(t){var e=t.target;j(e,"."+pD)?(t.stopPropagation(),this.switchToPalette()):(e.classList.contains("e-apply")||e.classList.contains("e-cancel"))&&this.ctrlBtnClick(e,t)},e.prototype.switchToPalette=function(){this.trigger("beforeModeSwitch",{element:this.container,mode:"Palette"}),this.unWireEvents(),this.destroyOtherComp(),T(A(".e-slider-preview",this.container)),this.getWrapper().classList.contains(lD)||O(A("."+dD,this.container)),T(this.getHsvContainer()),this.createPalette(),this.firstPaletteFocus(),this.createInput(),this.refreshPopupPos(),this.wireEvents(),this.trigger("onModeSwitch",{element:this.container,mode:"Palette"})},e.prototype.refreshPopupPos=function(){if(!this.inline){var t=this.getPopupEle();t.style.left=m(0+pageXOffset),t.style.top=m(0+pageYOffset),this.getPopupInst().refreshPosition(this.splitBtn.element.parentElement)}},e.prototype.formatSwitchHandler=function(){this.isRgb?(this.updateValue(this.hsv,!0,3,[360,100,100]),this.isRgb=!1):(this.updateValue(this.rgb,!0,2),this.isRgb=!0)},e.prototype.updateValue=function(t,e,i,n){for(var r,o=["e-rh-value","e-gs-value","e-bv-value"],s=0,a=o.length;s<a;s++)(r=y(A("."+o[s],this.container),BC)).value=Math.round(t[s]),e&&(r.placeholder=o[s].substr(i,1).toUpperCase(),r.max=n?n[s]:255),r.dataBind()},e.prototype.previewHandler=function(t){var e=t.target,i=this.rgbToHex(this.rgb);this.rgb=this.convertRgbToNumberArray(e.style.backgroundColor),this.rgb[3]||(this.rgb[3]=1);var n=this.rgbToHex(this.rgb),r=this.rgbToHsv.apply(this,this.rgb);r[0]!==this.hsv[0]&&(this.hueSlider.setProperties({value:r[0]},!0),this.hueSlider.refresh()),this.setHsvContainerBg(r[0]),this.enableOpacity&&r[3]!==this.hsv[3]&&(this.opacitySlider.setProperties({value:100*r[3]},!0),this.opacitySlider.refresh(),this.updateOpacitySliderBg()),this.hsv=r,this.setHandlerPosition(),this.updateInput(n),A("."+yD+" .e-current",this.container).style.backgroundColor=this.convertToRgbString(this.rgb),this.triggerEvent(n,i,this.convertToRgbString(this.rgb))},e.prototype.paletteClickHandler=function(t){t.preventDefault();var e=t.target;if(e.classList.contains("e-tile")){if(this.removeTileSelection(),this.addTileSelection(e),e.classList.contains(uD))this.noColorTile();else{var i=e.getAttribute("aria-label"),n=this.rgbToHex(this.rgb);this.rgb=this.hexToRgb(this.roundValue(i)),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.getWrapper().classList.contains(SD)&&this.updateInput(i),this.triggerEvent(i,n,this.convertToRgbString(this.rgb))}this.inline||this.showButtons||this.closePopup(t)}else j(e,"."+pD)?this.switchToPicker():e.classList.contains("e-apply")||e.classList.contains("e-cancel")?this.ctrlBtnClick(e,t):this.getWrapper().classList.contains(SD)&&j(e,".e-value-switch-btn")&&this.formatSwitchHandler()},e.prototype.noColorTile=function(t){void 0===t&&(t=!1);var e=this.rgbToHex(this.rgb);this.rgb=[],this.hsv=[],this.triggerEvent("",e,"",t)},e.prototype.switchToPicker=function(){var t=this.getWrapper();this.trigger("beforeModeSwitch",{element:this.container,mode:"Picker"}),this.unWireEvents(),[].slice.call(z("."+mD,this.container)).forEach(function(t){T(t)}),t.classList.contains(SD)&&T(A("."+dD,this.container)),this.container.style.width="";var e=A(".e-custom-palette",this.container);this.presetColors&&O(e),this.createPicker(),this.getDragHandler().focus(),this.createInput(),this.refreshPopupPos(),this.wireEvents(),this.trigger("onModeSwitch",{element:this.container,mode:"Picker"})},e.prototype.ctrlBtnClick=function(t,e){if(t.classList.contains("e-apply")){var i=this.rgbToHex(this.rgb);this.triggerChangeEvent(i)}this.inline||(this.closePopup(e),this.splitBtn.element.focus())},e.prototype.paletteKeyDown=function(t){var e=t.target;if(e.classList.contains(mD)){var i,n,r=[].slice.call(z(".e-tile",e)),o=r.filter(function(t){return t.classList.contains("e-selected")}).pop();switch(!t.altKey&&t.keyCode){case 39:t.preventDefault(),i=o?r[this.tilePosition(r,o,this.enableRtl?-1:1)]:r[this.enableRtl?r.length-1:0],this.keySelectionChanges(i);break;case 37:t.preventDefault(),i=o?r[this.tilePosition(r,o,this.enableRtl?1:-1)]:r[this.enableRtl?0:r.length-1],this.keySelectionChanges(i);break;case 38:t.preventDefault(),i=r[n=o?this.tilePosition(r,o,-this.columns):0]?r[n]:r[n-this.columns],this.keySelectionChanges(i);break;case 40:t.preventDefault(),r[n=o?this.tilePosition(r,o,this.columns):r.length-1]?i=r[n]:(n%=r.length,i=r[n+=r[r.length-1].parentElement.childElementCount]),this.keySelectionChanges(i);break;case 13:if(t.preventDefault(),o){var s=o.getAttribute("aria-label");this.enterKeyHandler(s||"",t)}}}},e.prototype.keySelectionChanges=function(t){if(this.removeTileSelection(),this.addTileSelection(t),t.classList.contains(uD))this.noColorTile(!0);else{var e=t.getAttribute("aria-label"),i=this.rgbToHex(this.rgb);this.rgb=this.hexToRgb(e),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.getWrapper().classList.contains(SD)&&this.updateInput(e),this.triggerEvent(e,i,this.convertToRgbString(this.rgb),!0)}},e.prototype.tilePosition=function(t,e,i){var n=(t=Array.prototype.slice.call(t)).length,r=this.columns-t[n-1].parentElement.childElementCount,o=t.indexOf(e);return(o+=i)<0?o+=n+r:o%=n+r,o},e.prototype.inputHandler=function(t){var e=t.target;if(e.value.length){var i,n;switch(A(".e-float-text",e.parentElement).textContent){case"HEX":var r="";if(("#"===e.value[0]&&5!==e.value.length||"#"!==e.value[0]&&4!==e.value.length)&&(r=this.roundValue(e.value)),9!==r.length)return;n=this.rgbToHex(this.rgb),this.rgb=this.hexToRgb(r+r.substr(-2)),this.inputValueChange(this.rgbToHsv.apply(this,this.rgb),n,e.value);break;case"R":this.rgb[0]!==Number(e.value)&&(n=this.rgbToHex(this.rgb),this.rgb[0]=Number(e.value),i=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(i,n));break;case"G":this.rgb[1]!==Number(e.value)&&(n=this.rgbToHex(this.rgb),this.rgb[1]=Number(e.value),i=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(i,n));break;case"B":this.rgb[2]!==Number(e.value)&&(n=this.rgbToHex(this.rgb),this.rgb[2]=Number(e.value),i=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(i,n));break;case"H":this.hueSlider.value=Number(e.value);break;case"S":this.hsv[1]!==Number(e.value)&&(this.hsv[1]=Number(e.value),this.updateHsv(),this.convertToOtherFormat());break;case"V":this.hsv[2]!==Number(e.value)&&(this.hsv[2]=Number(e.value),this.updateHsv(),this.convertToOtherFormat());break;case"A":this.opacitySlider.value=Number(e.value)}}},e.prototype.inputValueChange=function(t,e,i){t[0]!==this.hsv[0]&&(this.hueSlider.setProperties({value:t[0]},!0),this.hueSlider.refresh(),this.setHsvContainerBg(t[0])),this.hsv=t;var n=this.rgbToHex(this.rgb);this.setHandlerPosition(),this.updateInput(i||n);var r=this.convertToRgbString(this.rgb);this.updatePreview(r),this.triggerEvent(n,e,r)},e.prototype.triggerEvent=function(t,e,i,n){void 0===n&&(n=!1);var r=t.slice(0,7);this.showButtons||n?this.trigger("select",{currentValue:{hex:r,rgba:i},previousValue:{hex:e.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(e))}}):(this.trigger("change",{currentValue:{hex:r,rgba:i},previousValue:{hex:this.value.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(this.value))},value:t}),this.enableOpacity?this.setProperties({value:t},!0):this.setProperties({value:r},!0),this.element.value=r||"#000000")},e.prototype.destroy=function(){var e=this,i=this.getWrapper();t.prototype.destroy.call(this),["tabindex","spellcheck"].forEach(function(t){e.element.removeAttribute(t)}),this.inline?(this.unWireEvents(),this.destroyOtherComp()):(this.isPopupOpen()&&(this.unWireEvents(),this.destroyOtherComp()),this.splitBtn.destroy(),this.splitBtn=null),this.tileRipple(),this.tileRipple=null,this.ctrlBtnRipple(),this.ctrlBtnRipple=null,this.element.nextElementSibling&&T(this.element.nextElementSibling),i&&(i.parentElement.insertBefore(this.element,i),T(i)),this.container=null,this.formElement&&Ep.remove(this.formElement,"reset",this.formResetHandler)},e.prototype.destroyOtherComp=function(){if(this.isPicker()){this.hueSlider.destroy(),this.enableOpacity&&(this.opacitySlider.destroy(),this.opacitySlider=null),this.hueSlider=null;var t=this.getTooltipInst();t.close(),t.destroy(),this.tooltipEle=null}},e.prototype.isPopupOpen=function(){return this.getPopupEle().classList.contains("e-popup-open")},e.prototype.unWireEvents=function(){if(this.isPicker()){var t=this.getDragHandler();Ep.remove(t,"keydown",this.pickerKeyDown);var e=A("."+nD,this.container);e&&Ep.remove(e,"keydown",this.ctrlBtnKeyDown),Ep.remove(this.getHsvContainer(),"mousedown touchstart",this.handlerDown),(this.modeSwitcher||this.showButtons)&&Ep.remove(A("."+rD,this.container),"click",this.btnClickHandler),Ep.remove(A("."+bD,this.container),"click",this.previewHandler)}else Ep.remove(this.container,"click",this.paletteClickHandler),Ep.remove(this.container,"keydown",this.paletteKeyDown)},e.prototype.roundValue=function(t){if(!t)return"";"#"!==t[0]&&(t="#"+t);var e=t.length;if(4===e&&(t+="f",e=5),5===e){for(var i="",n=1,r=t.length;n<r;n++)i+=t.charAt(n)+t.charAt(n);t="#"+i,e=9}return 7===e&&(t+="ff"),t},e.prototype.hexToRgb=function(t){if(!t)return[];9!==(t=t.trim()).length&&(t=this.roundValue(t));var e=Number((parseInt(t.slice(-2),16)/255).toFixed(2));t=t.slice(1,7);var i=parseInt(t,16),n=[];return n.push(i>>16&255),n.push(i>>8&255),n.push(255&i),n.push(e),n},e.prototype.rgbToHsv=function(t,e,i,n){if(this.rgb&&!this.rgb.length)return[];t/=255,e/=255,i/=255;var r,o=Math.max(t,e,i),s=Math.min(t,e,i),a=o,l=o-s,c=0===o?0:l/o;if(o===s)r=0;else{switch(o){case t:r=(e-i)/l+(e<i?6:0);break;case e:r=(i-t)/l+2;break;case i:r=(t-e)/l+4}r/=6}var d=[Math.round(360*r),Math.round(1e3*c)/10,Math.round(1e3*a)/10];return h(n)||d.push(n),d},e.prototype.hsvToRgb=function(t,e,i,n){var r,o,s;if(e/=100,i/=100,0===e)return r=o=s=i,[Math.round(255*r),Math.round(255*o),Math.round(255*s),n];t/=60;var a=Math.floor(t),l=t-a,c=i*(1-e),d=i*(1-e*l),p=i*(1-e*(1-l));switch(a){case 0:r=i,o=p,s=c;break;case 1:r=d,o=i,s=c;break;case 2:r=c,o=i,s=p;break;case 3:r=c,o=d,s=i;break;case 4:r=p,o=c,s=i;break;default:r=i,o=c,s=d}var u=[Math.round(255*r),Math.round(255*o),Math.round(255*s)];return h(n)||u.push(n),u},e.prototype.rgbToHex=function(t){return t.length?"#"+this.hex(t[0])+this.hex(t[1])+this.hex(t[2])+(h(t[3])?"":0!==t[3]?(Math.round(255*t[3])+65536).toString(16).substr(-2):"00"):""},e.prototype.hex=function(t){return("0"+t.toString(16)).slice(-2)},e.prototype.changeModeSwitcherProp=function(t){var e=A("."+rD,this.container);t?e?this.appendModeSwitchBtn():(this.createCtrlBtn(),this.isPicker()&&!this.disabled&&this.addCtrlSwitchEvent()):e&&(this.showButtons?T(A("."+pD,e)):O(e))},e.prototype.changeShowBtnProps=function(t){var e=A("."+rD,this.container);t?(e&&O(e),this.createCtrlBtn(),this.isPicker()&&!this.disabled&&this.addCtrlSwitchEvent()):this.modeSwitcher?T(A("."+nD,e)):O(e)},e.prototype.changeValueProp=function(t){if(this.isPicker())this.rgb=this.hexToRgb(t),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.setHandlerPosition(),T(j(this.hueSlider.element,".e-slider-preview")),this.createSlider(),this.setHsvContainerBg(),this.updateInput(t),4===this.rgb.length&&this.updateOpacityInput(100*this.rgb[3]);else{this.removeTileSelection();var e=this.container.querySelector('span[aria-label="'+this.roundValue(t)+'"]');e&&this.addTileSelection(e)}},e.prototype.setInputEleProps=function(){O(A("."+dD,this.container)),this.createInput()},e.prototype.changeDisabledProp=function(t){this.isPicker()&&(this.hueSlider.enabled=!t,this.opacitySlider.enabled=!t,this.setInputEleProps()),t?(this.toggleDisabled(!0),this.unWireEvents()):(this.toggleDisabled(!1),this.wireEvents())},e.prototype.changeCssClassProps=function(t,e){var i=this.getWrapper(),n=this.getPopupEle();e&&x([i,n],e.split(" ")),t&&I([i,n],t.replace(/\s+/g," ").trim().split(" "))},e.prototype.changeRtlProps=function(t){t?I([this.getWrapper()],"e-rtl"):x([this.getWrapper()],"e-rtl")},e.prototype.changePaletteProps=function(){T(this.container.children[0]),this.container.style.width="",this.createPalette()},e.prototype.changeOpacityProps=function(t){var e=this.getWrapper();t?(x([this.container.parentElement],sD),this.createOpacitySlider(A(".e-colorpicker-slider",this.container).appendChild(this.createElement("div",{className:"e-opacity-slider"}))),e.classList.contains(lD)||e.classList.contains(aD)||this.appendOpacityValue(A(".e-input-container",this.container))):(I([this.container.parentElement],sD),this.opacitySlider.destroy(),O(this.opacitySlider.element),this.opacitySlider=null,e.classList.contains(lD)||e.classList.contains(aD)||O(A("."+gD,this.container).parentElement))},e.prototype.onPropertyChanged=function(t,e){var i=this;if(!h(t.value)){var n=this.roundValue(t.value);if(9===n.length){this.element.value=this.roundValue(n).slice(0,7);var r=this.splitBtn&&A("."+ID,this.splitBtn.element);r&&(r.style.backgroundColor=this.convertToRgbString(this.hexToRgb(t.value)))}else this.value=e.value}if(!this.inline&&h(t.inline)){if(this.splitBtn.setProperties(cl(t,["disabled","enableRtl"])),!this.isPopupOpen())return this.changeCssClassProps(t.cssClass,e.cssClass),void this.changeRtlProps(t.enableRtl)}for(var o=function(n){switch(n){case"inline":t.inline?(s.getWrapper().appendChild(s.container),s.splitBtn.destroy(),T(s.element.nextElementSibling),s.container.children.length||s.createWidget()):(s.destroyOtherComp(),s.unWireEvents(),s.container.innerHTML="",s.createSplitBtn());break;case"cssClass":s.changeCssClassProps(t.cssClass,e.cssClass);var r=t.cssClass.split(" ").concat(e.cssClass.split(" ")),o=0;(r=r.reduce(function(t,e){return t.indexOf(e)<0&&t.push(e),t},[])).forEach(function(t){if(0===o&&(t===lD||t===hD||t===SD||t===oD||t===aD)){A("."+dD,i.container)&&O(A("."+dD,i.container)),i.createInput(),o++}});break;case"enableRtl":s.isPicker()&&(s.hueSlider.enableRtl=t.enableRtl,s.enableOpacity&&(s.opacitySlider.enableRtl=t.enableRtl),s.setInputEleProps()),s.changeRtlProps(t.enableRtl);break;case"disabled":s.changeDisabledProp(t.disabled);break;case"value":s.value!==e.value&&s.changeValueProp(t.value);break;case"showButtons":s.changeShowBtnProps(t.showButtons);break;case"mode":"Picker"===t.mode?s.switchToPicker():s.switchToPalette();break;case"modeSwitcher":s.changeModeSwitcherProp(t.modeSwitcher);break;case"columns":case"presetColors":s.isPicker()||s.changePaletteProps();break;case"noColor":t.noColor?"Palette"!==s.mode||s.modeSwitcher||s.setNoColor():s.changePaletteProps();break;case"enableOpacity":s.changeOpacityProps(t.enableOpacity)}},s=this,a=0,l=Object.keys(t);a<l.length;a++){o(l[a])}},e.prototype.focusIn=function(){this.element.parentElement.focus()},iD([W("#008000ff")],e.prototype,"value",void 0),iD([W("")],e.prototype,"cssClass",void 0),iD([W(!1)],e.prototype,"disabled",void 0),iD([W("Picker")],e.prototype,"mode",void 0),iD([W(!0)],e.prototype,"modeSwitcher",void 0),iD([W(null)],e.prototype,"presetColors",void 0),iD([W(!0)],e.prototype,"showButtons",void 0),iD([W(10)],e.prototype,"columns",void 0),iD([W(!1)],e.prototype,"inline",void 0),iD([W(!1)],e.prototype,"noColor",void 0),iD([W(!1)],e.prototype,"enablePersistence",void 0),iD([W(!0)],e.prototype,"enableOpacity",void 0),iD([W(!1)],e.prototype,"createPopupOnClick",void 0),iD([Z()],e.prototype,"select",void 0),iD([Z()],e.prototype,"change",void 0),iD([Z()],e.prototype,"beforeTileRender",void 0),iD([Z()],e.prototype,"beforeOpen",void 0),iD([Z()],e.prototype,"open",void 0),iD([Z()],e.prototype,"beforeClose",void 0),iD([Z()],e.prototype,"beforeModeSwitch",void 0),iD([Z()],e.prototype,"onModeSwitch",void 0),iD([Z()],e.prototype,"created",void 0),e=iD([$],e)}(Kp),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),CD=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},ND=["title","style","class"],ED=(function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.previousValue=null,n.isAngular=!1,n.isHiddenInput=!1,n.isForm=!1,n.inputPreviousValue=null,n.isVue=!1,n.textboxOptions=e,n}MD(e,t),e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"floatLabelType":zx.removeFloating(this.textboxWrapper),zx.addFloating(this.respectiveElement,this.floatLabelType,this.placeholder);break;case"enabled":zx.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container),this.bindClearEvent();break;case"width":zx.setWidth(t.width,this.textboxWrapper.container);break;case"value":var r=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.isBlank(this.value)||(this.value=this.value.toString()),this.isProtectedOnChange=r,zx.setValue(this.value,this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value),this.inputPreviousValue=this.respectiveElement.value,(this.isAngular||this.isVue)&&!0===this.preventChange?(this.previousValue=this.isAngular?this.value:this.previousValue,this.preventChange=!1):(h(this.isAngular)||!this.isAngular||this.isAngular&&!this.preventChange||this.isAngular&&h(this.preventChange))&&this.raiseChangeEvent();break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.checkAttributes(!0),zx.validateInputType(this.textboxWrapper.container,this.element);break;case"readonly":zx.setReadonly(this.readonly,this.respectiveElement);break;case"type":"TEXTAREA"!==this.respectiveElement.tagName&&(this.respectiveElement.setAttribute("type",this.type),zx.validateInputType(this.textboxWrapper.container,this.element),this.raiseChangeEvent());break;case"showClearButton":"TEXTAREA"!==this.respectiveElement.tagName&&(zx.setClearButton(this.showClearButton,this.respectiveElement,this.textboxWrapper),this.bindClearEvent());break;case"enableRtl":zx.setEnableRtl(this.enableRtl,[this.textboxWrapper.container]);break;case"placeholder":zx.setPlaceholder(this.placeholder,this.respectiveElement),zx.calculateWidth(this.respectiveElement,this.textboxWrapper.container);break;case"autocomplete":"on"!==this.autocomplete&&""!==this.autocomplete?this.respectiveElement.autocomplete=this.autocomplete:this.removeAttributes(["autocomplete"]);break;case"cssClass":this.updateCssClass(t.cssClass,e.cssClass);break;case"locale":this.globalize=new hp(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),zx.setPlaceholder(this.placeholder,this.respectiveElement)}}},e.prototype.getModuleName=function(){return"textbox"},e.prototype.isBlank=function(t){return!t||/^\s*$/.test(t)},e.prototype.preRender=function(){if(this.cloneElement=this.element.cloneNode(!0),this.formElement=j(this.element,"form"),h(this.formElement)||(this.isForm=!0),"EJS-TEXTBOX"===this.element.tagName){for(var t=n("ej2_instances",this.element),e=this.multiline?this.createElement("textarea"):this.createElement("input"),i=0;i<this.element.attributes.length;i++){"id"!==(a=this.element.attributes[i].nodeName)&&"class"!==a?(e.setAttribute(a,this.element.attributes[i].nodeValue),e.innerHTML=this.element.innerHTML,"name"===a&&this.element.removeAttribute("name")):"class"===a&&e.setAttribute(a,this.element.className.split(" ").filter(function(t){return 0!==t.indexOf("ng-")}).join(" "))}this.element.appendChild(e),this.element=e,r("ej2_instances",t,this.element)}this.updateHTMLAttrToElement(),this.checkAttributes(!1),!h(this.textboxOptions)&&void 0!==this.textboxOptions.value||""===this.element.value||this.setProperties({value:this.element.value},!0),"TEXTAREA"!==this.element.tagName&&this.element.setAttribute("type",this.type),"text"===this.type&&this.element.setAttribute("role","textbox"),this.globalize=new hp(this.locale);var o={placeholder:this.placeholder};if(this.l10n=new uu("textbox",o,this.locale),""!==this.l10n.getConstant("placeholder")&&this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.element.hasAttribute("id")||this.element.setAttribute("id",d("textbox")),this.element.hasAttribute("name")||this.element.setAttribute("name",this.element.getAttribute("id")),"INPUT"===this.element.tagName&&this.multiline){this.isHiddenInput=!0,this.textarea=this.createElement("textarea"),this.element.parentNode.insertBefore(this.textarea,this.element),this.element.setAttribute("type","hidden"),this.textarea.setAttribute("name",this.element.getAttribute("name")),this.element.removeAttribute("name"),this.textarea.setAttribute("role",this.element.getAttribute("role")),this.element.removeAttribute("role"),this.textarea.setAttribute("id",d("textarea"));var s=["placeholder","disabled","value","readonly","type","autocomplete"];for(i=0;i<this.element.attributes.length;i++){var a=this.element.attributes[i].nodeName;this.element.hasAttribute(a)&&ND.indexOf(a)<0&&"id"!==a&&"type"!==a&&"e-mappinguid"!==a&&(this.textarea.setAttribute(a,this.element.attributes[i].nodeValue),s.indexOf(a)<0&&(this.element.removeAttribute(a),i--))}}},e.prototype.checkAttributes=function(t){for(var e=0,i=t?h(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["placeholder","disabled","value","readonly","type","autocomplete"];e<i.length;e++){var n=i[e];if(!h(this.element.getAttribute(n)))switch(n){case"disabled":if(h(this.textboxOptions)||void 0===this.textboxOptions.enabled||t){var r="disabled"!==this.element.getAttribute(n)&&""!==this.element.getAttribute(n)&&"true"!==this.element.getAttribute(n);this.setProperties({enabled:r},!t)}break;case"readonly":if(h(this.textboxOptions)||void 0===this.textboxOptions.readonly||t){var o="readonly"===this.element.getAttribute(n)||""===this.element.getAttribute(n)||"true"===this.element.getAttribute(n);this.setProperties({readonly:o},!t)}break;case"placeholder":(h(this.textboxOptions)||void 0===this.textboxOptions.placeholder||t)&&this.setProperties({placeholder:this.element.placeholder},!t);break;case"autocomplete":if(h(this.textboxOptions)||void 0===this.textboxOptions.autocomplete||t){var s="off"===this.element.autocomplete?"off":"on";this.setProperties({autocomplete:s},!t)}break;case"value":(h(this.textboxOptions)||void 0===this.textboxOptions.value||t)&&""!==this.element.value&&this.setProperties({value:this.element.value},!t);break;case"type":(h(this.textboxOptions)||void 0===this.textboxOptions.type||t)&&this.setProperties({type:this.element.type},!t)}}},e.prototype.render=function(){var t=this.cssClass;h(this.cssClass)||""===this.cssClass||(t=this.getInputValidClassList(this.cssClass)),this.respectiveElement=this.isHiddenInput?this.textarea:this.element,this.textboxWrapper=zx.createInput({element:this.respectiveElement,floatLabelType:this.floatLabelType,properties:{enabled:this.enabled,enableRtl:this.enableRtl,cssClass:t,readonly:this.readonly,placeholder:this.placeholder,showClearButton:this.showClearButton}}),this.updateHTMLAttrToWrapper(),this.isHiddenInput&&this.respectiveElement.parentNode.insertBefore(this.element,this.respectiveElement),this.wireEvents(),h(this.value)||(zx.setValue(this.value,this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value)),h(this.value)||(this.initialValue=this.value,this.setInitialValue()),"on"!==this.autocomplete&&""!==this.autocomplete?this.respectiveElement.autocomplete=this.autocomplete:h(this.textboxOptions)||void 0===this.textboxOptions.autocomplete||this.removeAttributes(["autocomplete"]),this.previousValue=this.value,this.inputPreviousValue=this.value,this.respectiveElement.defaultValue=this.respectiveElement.value,zx.setWidth(this.width,this.textboxWrapper.container),!h(j(this.element,"fieldset"))&&j(this.element,"fieldset").disabled&&(this.enabled=!1),this.renderComplete()},e.prototype.updateHTMLAttrToWrapper=function(){if(!h(this.htmlAttributes))for(var t=0,e=Object.keys(this.htmlAttributes);t<e.length;t++){var i=e[t];if(ND.indexOf(i)>-1)if("class"===i){var n=this.getInputValidClassList(this.htmlAttributes[""+i]);""!==n&&I([this.textboxWrapper.container],n.split(" "))}else if("style"===i){var r=this.textboxWrapper.container.getAttribute(i);r=h(r)?this.htmlAttributes[""+i]:r+this.htmlAttributes[""+i],this.textboxWrapper.container.setAttribute(i,r)}else this.textboxWrapper.container.setAttribute(i,this.htmlAttributes[""+i])}},e.prototype.updateHTMLAttrToElement=function(){if(!h(this.htmlAttributes))for(var t=0,e=Object.keys(this.htmlAttributes);t<e.length;t++){var i=e[t];ND.indexOf(i)<0&&this.element.setAttribute(i,this.htmlAttributes[""+i])}},e.prototype.updateCssClass=function(t,e){zx.setCssClass(this.getInputValidClassList(t),[this.textboxWrapper.container],this.getInputValidClassList(e))},e.prototype.getInputValidClassList=function(t){var e=t;return h(t)||""===t||(e=t.replace(/\s+/g," ").trim()),e},e.prototype.setInitialValue=function(){this.isAngular||this.respectiveElement.setAttribute("value",this.initialValue)},e.prototype.wireEvents=function(){Ep.add(this.respectiveElement,"focus",this.focusHandler,this),Ep.add(this.respectiveElement,"blur",this.focusOutHandler,this),Ep.add(this.respectiveElement,"input",this.inputHandler,this),Ep.add(this.respectiveElement,"change",this.changeHandler,this),this.isForm&&Ep.add(this.formElement,"reset",this.resetForm,this),this.bindClearEvent(),!h(this.textboxWrapper.container.querySelector(".e-float-text"))&&"Auto"===this.floatLabelType&&this.textboxWrapper.container.classList.contains("e-autofill")&&this.textboxWrapper.container.classList.contains("e-outline")&&Ep.add(this.textboxWrapper.container.querySelector(".e-float-text"),"animationstart",this.animationHandler,this)},e.prototype.animationHandler=function(){this.textboxWrapper.container.classList.add("e-valid-input");var t=this.textboxWrapper.container.querySelector(".e-float-text");h(t)||(t.classList.add("e-label-top"),t.classList.contains("e-label-bottom")&&t.classList.remove("e-label-bottom"))},e.prototype.resetValue=function(t){var e=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.value=t,this.isProtectedOnChange=e},e.prototype.resetForm=function(){if(this.isAngular?this.resetValue(""):this.resetValue(this.initialValue),!h(this.textboxWrapper)){var t=this.textboxWrapper.container.querySelector(".e-float-text");h(t)||"Always"===this.floatLabelType||(h(this.initialValue)||""===this.initialValue?(t.classList.add("e-label-bottom"),t.classList.remove("e-label-top")):""!==this.initialValue&&(t.classList.add("e-label-top"),t.classList.remove("e-label-bottom")))}},e.prototype.focusHandler=function(t){var e={container:this.textboxWrapper.container,event:t,value:this.value};this.trigger("focus",e)},e.prototype.focusOutHandler=function(t){null===this.previousValue&&null===this.value&&""===this.respectiveElement.value||this.previousValue===this.value||this.raiseChangeEvent(t,!0);var e={container:this.textboxWrapper.container,event:t,value:this.value};this.trigger("blur",e)},e.prototype.inputHandler=function(t){var e={event:t,value:this.respectiveElement.value,previousValue:this.inputPreviousValue,container:this.textboxWrapper.container};this.inputPreviousValue=this.respectiveElement.value,this.isAngular&&(this.localChange({value:this.respectiveElement.value}),this.preventChange=!0),this.isVue&&(this.preventChange=!0),this.trigger("input",e),t.stopPropagation()},e.prototype.changeHandler=function(t){this.setProperties({value:this.respectiveElement.value},!0),this.previousValue!=this.value&&this.raiseChangeEvent(t,!0),t.stopPropagation()},e.prototype.raiseChangeEvent=function(t,e){var i={event:t,value:this.value,previousValue:this.previousValue,container:this.textboxWrapper.container,isInteraction:e||!1,isInteracted:e||!1};this.preventChange=!1,this.trigger("change",i),this.previousValue=this.value,"INPUT"===this.element.tagName&&this.multiline&&"mozilla"===Np.info.name&&(this.element.value=this.respectiveElement.value)},e.prototype.bindClearEvent=function(){this.showClearButton&&"TEXTAREA"!==this.respectiveElement.tagName&&(this.enabled?Ep.add(this.textboxWrapper.clearButton,"mousedown touchstart",this.resetInputHandler,this):Ep.remove(this.textboxWrapper.clearButton,"mousedown touchstart",this.resetInputHandler))},e.prototype.resetInputHandler=function(t){if(t.preventDefault(),!this.textboxWrapper.clearButton.classList.contains("e-clear-icon-hide")||this.textboxWrapper.container.classList.contains("e-static-clear")){zx.setValue("",this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value),this.setProperties({value:this.respectiveElement.value},!0);var e={event:t,value:this.respectiveElement.value,previousValue:this.inputPreviousValue,container:this.textboxWrapper.container};if(this.trigger("input",e),this.inputPreviousValue=this.respectiveElement.value,this.raiseChangeEvent(t,!0),j(this.element,"form")){var i=this.element,n=document.createEvent("KeyboardEvent");n.initEvent("keyup",!1,!0),i.dispatchEvent(n)}}},e.prototype.unWireEvents=function(){Ep.remove(this.respectiveElement,"focus",this.focusHandler),Ep.remove(this.respectiveElement,"blur",this.focusOutHandler),Ep.remove(this.respectiveElement,"input",this.inputHandler),Ep.remove(this.respectiveElement,"change",this.changeHandler),this.isForm&&Ep.remove(this.formElement,"reset",this.resetForm),!h(this.textboxWrapper.container.querySelector(".e-float-text"))&&"Auto"===this.floatLabelType&&this.textboxWrapper.container.classList.contains("e-outline")&&this.textboxWrapper.container.classList.contains("e-autofill")&&Ep.remove(this.textboxWrapper.container.querySelector(".e-float-text"),"animationstart",this.animationHandler)},e.prototype.destroy=function(){this.unWireEvents(),"INPUT"===this.element.tagName&&this.multiline&&(T(this.textboxWrapper.container.getElementsByTagName("textarea")[0]),this.respectiveElement=this.element,this.element.removeAttribute("type")),this.respectiveElement.value=this.respectiveElement.defaultValue,this.respectiveElement.classList.remove("e-input"),this.removeAttributes(["aria-disabled","aria-readonly","aria-labelledby"]),h(this.textboxWrapper)||(this.textboxWrapper.container.insertAdjacentElement("afterend",this.respectiveElement),T(this.textboxWrapper.container)),this.textboxWrapper=null,zx.destroy(),t.prototype.destroy.call(this)},e.prototype.addIcon=function(t,e){zx.addIcon(t,e,this.textboxWrapper.container,this.respectiveElement,this.createElement)},e.prototype.getPersistData=function(){return this.addOnPersist(["value"])},e.prototype.addAttributes=function(t){for(var e=0,i=Object.keys(t);e<i.length;e++){var n=i[e];"disabled"===n?(this.setProperties({enabled:!1},!0),zx.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container)):"readonly"===n?(this.setProperties({readonly:!0},!0),zx.setReadonly(this.readonly,this.respectiveElement)):"class"===n?this.respectiveElement.classList.add(t[""+n]):"placeholder"===n?(this.setProperties({placeholder:t[""+n]},!0),zx.setPlaceholder(this.placeholder,this.respectiveElement)):("rows"===n&&this.respectiveElement.tagName,this.respectiveElement.setAttribute(n,t[""+n]))}},e.prototype.removeAttributes=function(t){for(var e=0,i=t;e<i.length;e++){var n=i[e];"disabled"===n?(this.setProperties({enabled:!0},!0),zx.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container)):"readonly"===n?(this.setProperties({readonly:!1},!0),zx.setReadonly(this.readonly,this.respectiveElement)):"placeholder"===n?(this.setProperties({placeholder:null},!0),zx.setPlaceholder(this.placeholder,this.respectiveElement)):this.respectiveElement.removeAttribute(n)}},e.prototype.focusIn=function(){document.activeElement!==this.respectiveElement&&this.enabled&&(this.respectiveElement.focus(),(this.textboxWrapper.container.classList.contains("e-input-group")||this.textboxWrapper.container.classList.contains("e-outline")||this.textboxWrapper.container.classList.contains("e-filled"))&&I([this.textboxWrapper.container],["e-input-focus"]))},e.prototype.focusOut=function(){document.activeElement===this.respectiveElement&&this.enabled&&(this.respectiveElement.blur(),(this.textboxWrapper.container.classList.contains("e-input-group")||this.textboxWrapper.container.classList.contains("e-outline")||this.textboxWrapper.container.classList.contains("e-filled"))&&x([this.textboxWrapper.container],["e-input-focus"]))},CD([W("text")],e.prototype,"type",void 0),CD([W(!1)],e.prototype,"readonly",void 0),CD([W(null)],e.prototype,"value",void 0),CD([W("Never")],e.prototype,"floatLabelType",void 0),CD([W("")],e.prototype,"cssClass",void 0),CD([W(null)],e.prototype,"placeholder",void 0),CD([W("on")],e.prototype,"autocomplete",void 0),CD([W({})],e.prototype,"htmlAttributes",void 0),CD([W(!1)],e.prototype,"multiline",void 0),CD([W(!0)],e.prototype,"enabled",void 0),CD([W(!1)],e.prototype,"showClearButton",void 0),CD([W(!1)],e.prototype,"enablePersistence",void 0),CD([W(null)],e.prototype,"width",void 0),CD([Z()],e.prototype,"created",void 0),CD([Z()],e.prototype,"destroyed",void 0),CD([Z()],e.prototype,"change",void 0),CD([Z()],e.prototype,"blur",void 0),CD([Z()],e.prototype,"focus",void 0),CD([Z()],e.prototype,"input",void 0),e=CD([$],e)}(Kp),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),DD=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.minDistance=5,e.previous=0,e.interval=30,e.timeout=null,e.isSignatureEmpty=!0,e.backgroundLoaded=null,e.clearArray=[],e.isBlazor=!1,e.isResponsive=!1,e.signPointsColl=[],e.signRatioPointsColl=[],e}return ED(e,t),e.prototype.initialize=function(t,e){this.element=t,this.canvasContext=this.element.getContext("2d"),this.canvasContext.canvas.tabIndex=-1,e&&(this.dotnetRef=e,this.isBlazor=!0,this.signatureValue&&this.loadPersistedSignature()),this.setHTMLProperties(),h(this.signatureValue)&&this.updateSnapCollection(!0),this.wireEvents(),this.isBlazor||this.trigger("created",null)},e.prototype.wireEvents=function(){!h(this.pointColl)||this.isReadOnly||this.disabled?this.pointColl&&(Ep.add(this.canvasContext.canvas,"mousemove touchmove",this.mouseMoveHandler,this),Ep.add(this.canvasContext.canvas,"mouseup touchend",this.mouseUpHandler,this),Ep.add(document,"mouseup",this.mouseUpHandler,this)):(Ep.add(this.canvasContext.canvas,"mousedown touchstart",this.mouseDownHandler,this),Ep.add(this.canvasContext.canvas,"keydown",this.keyboardHandler,this),window.addEventListener("resize",this.resizeHandler.bind(this)))},e.prototype.unwireEvents=function(t){"mouseup"===t||"touchend"===t?(Ep.remove(this.canvasContext.canvas,"mousemove touchmove",this.mouseMoveHandler),Ep.remove(this.canvasContext.canvas,"mouseup touchend",this.mouseUpHandler),Ep.remove(document,"mouseup",this.mouseUpHandler)):(Ep.remove(this.canvasContext.canvas,"mousedown touchstart",this.mouseDownHandler),Ep.remove(this.canvasContext.canvas,"keydown",this.keyboardHandler),window.removeEventListener("resize",this.resizeHandler))},e.prototype.setHTMLProperties=function(){150===this.element.height&&300===this.element.width?(this.element.height=this.element.offsetHeight,this.element.width=this.element.offsetWidth,this.isResponsive=!0):this.element.height===this.element.offsetHeight-1&&this.element.width===this.element.offsetWidth-1||(this.element.height=this.element.offsetHeight,this.element.width=this.element.offsetWidth),this.canvasContext.scale(1,1),this.canvasContext.fillStyle=this.strokeColor,this.backgroundImage?(this.canvasContext.canvas.style.backgroundImage="url("+this.backgroundImage+")",this.canvasContext.canvas.style.backgroundRepeat="no-repeat"):this.backgroundColor&&(this.canvasContext.canvas.style.backgroundColor=this.backgroundColor)},e.prototype.mouseDownHandler=function(t){1!==t.buttons&&2!==t.buttons&&"touchstart"!==t.type||("touchstart"===t.type&&(t.preventDefault(),t.stopPropagation()),this.beginStroke(t),this.wireEvents())},e.prototype.mouseMoveHandler=function(t){1!==t.buttons&&2!==t.buttons&&"touchmove"!==t.type||("touchmove"===t.type&&(t.preventDefault(),t.stopPropagation()),this.interval?this.updateStrokeWithThrottle(t):this.updateStroke(t))},e.prototype.mouseUpHandler=function(t){"touchstart"===t.type&&(t.preventDefault(),t.stopPropagation()),this.endDraw(),this.updateSnapCollection(),this.unwireEvents(t.type),this.isBlazor?this.dotnetRef.invokeMethodAsync("TriggerEventAsync","mouseUp"):this.trigger("change",{actionName:"strokeUpdate"}),this.signatureValue=this.snapColl[this.incStep];for(var e=0;e<this.signPointsColl.length;e++)this.signRatioPointsColl.push({x:this.signPointsColl[e].x/this.canvasContext.canvas.width,y:this.signPointsColl[e].y/this.canvasContext.canvas.height});this.signPointsColl=[]},e.prototype.keyboardHandler=function(t){var e=this,i={fileName:"Signature",type:"Png",cancel:!1};switch(t.key){case"Delete":this.clear();break;case t.ctrlKey&&"s":this.isBlazor?this.dotnetRef.invokeMethodAsync("TriggerEventAsync","beforeSave"):this.trigger("beforeSave",i,function(t){i.cancel||e.save(t.type,t.fileName)}),t.preventDefault(),t.stopImmediatePropagation();break;case t.ctrlKey&&"z":this.undo();break;case t.ctrlKey&&"y":this.redo()}},e.prototype.resizeHandler=function(){var t=this;if(this.isResponsive){this.canvasContext.canvas.width=this.element.offsetWidth,this.canvasContext.canvas.height=this.element.offsetHeight,this.canvasContext.scale(1,1);for(var e=(this.minStrokeWidth+this.maxStrokeWidth)/2,i=0;i<this.signRatioPointsColl.length;i++)this.arcDraw(this.signRatioPointsColl[i].x*this.canvasContext.canvas.width,this.signRatioPointsColl[i].y*this.canvasContext.canvas.height,e);this.signPointsColl=[],this.canvasContext.closePath(),this.canvasContext.fill()}else{var n=new Image;n.src=this.snapColl[this.incStep],n.onload=function(){t.canvasContext.clearRect(0,0,t.element.width,t.element.height),t.canvasContext.drawImage(n,0,0,t.element.width,t.element.height)}}},e.prototype.beginStroke=function(t){this.refresh(),this.updateStroke(t)},e.prototype.updateStroke=function(t){var e=this.createPoint(t);this.addPoint(e)},e.prototype.updateStrokeWithThrottle=function(t){var e=Date.now(),i=this.interval-(e-this.previous);this.storedArgs=t,i<=0||i>this.interval?(this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.previous=e,this.updateStroke(this.storedArgs),this.timeout||(this.storedArgs=null)):this.timeout||(this.timeout=window.setTimeout(this.delay.bind(this),i))},e.prototype.delay=function(){this.previous=Date.now(),this.timeout=null,this.updateStroke(this.storedArgs),this.timeout||(this.storedArgs=null)},e.prototype.createPoint=function(t){var e=this.canvasContext.canvas.getBoundingClientRect();return"mousedown"===t.type||"mousemove"===t.type?this.point(t.clientX-e.left,t.clientY-e.top,(new Date).getTime()):this.point(t.touches[0].clientX-e.left,t.touches[0].clientY-e.top,(new Date).getTime())},e.prototype.point=function(t,e,i){return this.pointX=t,this.pointY=e,this.time=i||(new Date).getTime(),{x:this.pointX,y:this.pointY,time:this.time}},e.prototype.addPoint=function(t){var e,i,n=this.pointColl,r=n.length>0&&n[n.length-1],o=!!r&&this.distanceTo(r)<=this.minDistance;r&&r&&o||(n.push(t),n.length>2&&(3===n.length&&n.unshift(n[0]),e=this.calculateCurveControlPoints(n[0],n[1],n[2]).controlPoint2,i=this.calculateCurveControlPoints(n[1],n[2],n[3]).controlPoint1,this.startPoint=n[1],this.controlPoint1=e,this.controlPoint2=i,this.endPoint=n[2],this.startDraw(),n.shift()))},e.prototype.startDraw=function(){var t;t=this.pointVelocityCalc(this.startPoint),t=this.velocity*t+(1-this.velocity)*this.lastVelocity;var e=Math.max(this.maxStrokeWidth/(t+1),this.minStrokeWidth);this.curveDraw(this.lastWidth,e),this.lastVelocity=t,this.lastWidth=e},e.prototype.endDraw=function(){var t=this.pointColl.length>2,e=this.pointColl[0];!t&&e&&this.strokeDraw(e)},e.prototype.curveDraw=function(t,e){var i,n,r,o,s,a,l,h,c,d,p=this.canvasContext,u=e-t,g=this.bezierLengthCalc(),m=2*Math.ceil(g);for(p.beginPath(),n=0;n<m;n++)s=(o=(r=n/m)*r)*r,c=(h=(l=(a=1-r)*a)*a)*this.startPoint.x,c+=3*l*r*this.controlPoint1.x,c+=3*a*o*this.controlPoint2.x,c+=s*this.endPoint.x,d=h*this.startPoint.y,d+=3*l*r*this.controlPoint1.y,d+=3*a*o*this.controlPoint2.y,d+=s*this.endPoint.y,i=Math.min(t+s*u,this.maxStrokeWidth),this.arcDraw(c,d,i);p.closePath(),p.fill(),this.isSignatureEmpty=!1},e.prototype.strokeDraw=function(t){var e=this.canvasContext,i=(this.minStrokeWidth+this.maxStrokeWidth)/2;e.beginPath(),this.arcDraw(t.x,t.y,i),e.closePath(),e.fill(),this.isSignatureEmpty=!1},e.prototype.arcDraw=function(t,e,i){this.signPointsColl.push({x:t,y:e});var n=this.canvasContext;n.moveTo(t,e),n.arc(t,e,i,0,2*Math.PI,!1)},e.prototype.calculateCurveControlPoints=function(t,e,i){var n=t.x-e.x,r=t.y-e.y,o=e.x-i.x,s=e.y-i.y,a=(t.x+e.x)/2,l=(t.y+e.y)/2,h=(e.x+i.x)/2,c=(e.y+i.y)/2,d=Math.sqrt(n*n+r*r),p=Math.sqrt(o*o+s*s),u=p/(d+p),g=h+(a-h)*u,m=c+(l-c)*u,f=e.x-g,v=e.y-m;return{controlPoint1:this.point(a+f,l+v,0),controlPoint2:this.point(h+f,c+v,0)}},e.prototype.bezierLengthCalc=function(){var t,e,i,n,r,o,s,a,l=0;for(t=0;t<=10;t++)e=t/10,i=this.bezierPointCalc(e,this.startPoint.x,this.controlPoint1.x,this.controlPoint2.x,this.endPoint.x),n=this.bezierPointCalc(e,this.startPoint.y,this.controlPoint1.y,this.controlPoint2.y,this.endPoint.y),t>0&&(s=i-r,a=n-o,l+=Math.sqrt(s*s+a*a)),r=i,o=n;return l},e.prototype.bezierPointCalc=function(t,e,i,n,r){return e*(1-t)*(1-t)*(1-t)+3*i*(1-t)*(1-t)*t+3*n*(1-t)*t*t+r*t*t*t},e.prototype.pointVelocityCalc=function(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):0},e.prototype.distanceTo=function(t){return Math.sqrt(Math.pow(this.pointX-t.x,2)+Math.pow(this.pointY-t.y,2))},e.prototype.isRead=function(t){t?Ep.remove(this.canvasContext.canvas,"mousedown touchstart",this.mouseDownHandler):this.disabled||Ep.add(this.canvasContext.canvas,"mousedown touchstart",this.mouseDownHandler,this)},e.prototype.enableOrDisable=function(t){this.disabled=t,t?(this.canvasContext.canvas.style.filter="opacity(0.5)",this.isRead(!0)):(this.canvasContext.canvas.style.filter="",this.isRead(!1))},e.prototype.updateSnapCollection=function(t){if(h(this.incStep)?(this.incStep=-1,this.incStep++,this.snapColl=[],this.clearArray=[]):this.incStep++,this.incStep<this.snapColl.length&&(this.snapColl.length=this.incStep),this.incStep>0){var e=this.createElement("canvas",{className:"e-"+this.getModuleName()+"-wrapper"}),i=e.getContext("2d");e.width=this.canvasContext.canvas.width,e.height=this.canvasContext.canvas.height,i.drawImage(this.canvasContext.canvas,0,0,e.width,e.height),this.snapColl.push(e.toDataURL())}else this.snapColl.push(this.canvasContext.canvas.toDataURL());t&&this.clearArray.push(this.incStep)},e.prototype.setBackgroundImage=function(t){var e=this,i=new Image;i.crossOrigin="anonymous",i.src=t,i.onload=function(){e.canvasContext.globalCompositeOperation="source-over",e.canvasContext.drawImage(i,0,0,e.element.width,e.element.height),e.updateSnapCollection(),e.saveBackground(!0)},this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height)},e.prototype.setBackgroundColor=function(t){var e=this.canvasContext;e.strokeStyle=t;var i,n;for(i=1;i<=e.canvas.width;i++)for(n=1;n<=e.canvas.height;n++)e.strokeRect(0,0,i,n);this.updateSnapCollection()},e.prototype.loadPersistedSignature=function(){if(!h(this.signatureValue)){var t=this,e=new Image;e.src=this.signatureValue,e.onload=function(){t.canvasContext.clearRect(0,0,t.element.width,t.element.height),t.canvasContext.drawImage(e,0,0),t.updateSnapCollection()},this.isSignatureEmpty=!1}},e.prototype.getBlob=function(t){for(var e=t.split(","),i=e[0].match(/:(.*?);/)[1],n=atob(e[1]),r=n.length,o=new Uint8Array(r);r--;)o[r]=n.charCodeAt(r);return new Blob([o],{type:i})},e.prototype.download=function(t,e){var i=URL.createObjectURL(t),n=document.createElement("a");n.href=i,n.target="_parent",n.download=e,(document.body||document.documentElement).appendChild(n),n.click(),n.parentNode.removeChild(n)},e.prototype.refresh=function(){this.pointColl=[],this.lastVelocity=0,this.lastWidth=(this.minStrokeWidth+this.maxStrokeWidth)/2},e.prototype.clear=function(){this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height),this.refresh(),this.signRatioPointsColl=[],this.updateSnapCollection(!0),this.isSignatureEmpty=!0,this.isBlazor?this.dotnetRef.invokeMethodAsync("TriggerEventAsync","Clear"):this.trigger("change",{actionName:"clear"})},e.prototype.undo=function(){var t=this;if(this.incStep>0){this.incStep--;var e=new Image;e.src=this.snapColl[this.incStep],e.onload=function(){t.canvasContext.clearRect(0,0,t.element.width,t.element.height),t.canvasContext.drawImage(e,0,0,t.element.width,t.element.height)}}this.isClear(),this.isBlazor?this.dotnetRef.invokeMethodAsync("TriggerEventAsync","Undo"):this.trigger("change",{actionName:"undo"})},e.prototype.redo=function(){var t=this;if(this.incStep<this.snapColl.length-1){this.incStep++;var e=new Image;e.src=this.snapColl[this.incStep],e.onload=function(){t.canvasContext.clearRect(0,0,t.element.width,t.element.height),t.canvasContext.drawImage(e,0,0,t.element.width,t.element.height)}}this.isClear(),this.isBlazor?this.dotnetRef.invokeMethodAsync("TriggerEventAsync","Redo"):this.trigger("change",{actionName:"redo"})},e.prototype.isClear=function(){if(this.clearArray){for(var t=!1,e=0;e<this.clearArray.length;e++)this.clearArray[e]===this.incStep&&(this.isSignatureEmpty=!0,t=!0);t||(this.isSignatureEmpty=!1)}},e.prototype.isEmpty=function(){return this.isSignatureEmpty},e.prototype.canUndo=function(){return this.incStep>0},e.prototype.canRedo=function(){return this.incStep<this.snapColl.length-1},e.prototype.draw=function(t,e,i){this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height),e=e||"Arial",i=i||30,this.canvasContext.font=i+"px "+e,this.canvasContext.textAlign="center",this.canvasContext.textBaseline="middle",this.canvasContext.fillText(t,this.element.width/2,this.element.height/2),this.updateSnapCollection(),this.isSignatureEmpty=!1,this.trigger("change",{actionName:"draw-text"})},e.prototype.load=function(t,e,i){i=i||this.element.height,e=e||this.element.width,this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height);var n=this,r=new Image;r.src=t,"data"!==t.slice(0,4)&&(r.crossOrigin="anonymous"),r.onload=function(){Promise.all([createImageBitmap(r,0,0,e,i)]).then(function(r){var o=document.createElement("canvas");o.width=e,o.height=i,o.getContext("2d").drawImage(r[0],0,0),"data"!==t.slice(0,4)&&(n.canvasContext.globalCompositeOperation="source-over"),n.canvasContext.drawImage(o,0,0,e,i,0,0,n.element.width,n.element.height),n.updateSnapCollection()})},this.isSignatureEmpty=!1},e.prototype.saveBackground=function(t){var e;if(e=t&&this.backgroundImage?this.snapColl[this.incStep-1]:this.snapColl[this.incStep],t||(this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height),this.backgroundImage?this.setBackgroundImage(this.backgroundImage):this.backgroundColor&&(this.setBackgroundColor(this.backgroundColor),t=!0)),t){var i=this,n=new Image;n.crossOrigin="anonymous",n.src=e,n.onload=function(){i.backgroundLoaded=!0,i.canvasContext.globalCompositeOperation="source-over",i.canvasContext.drawImage(n,0,0,i.element.width,i.element.height),i.save(i.fileType,i.fileName)}}},e.prototype.save=function(t,e){if(this.saveWithBackground&&null==this.backgroundLoaded&&(this.backgroundImage||this.backgroundColor))this.backgroundLoaded=!1,this.fileType=t,this.fileName=e,this.saveBackground(!1);else if("Svg"===t)e=e||"Signature",this.toSVG(e);else if("Jpeg"===t)if(e=e||"Signature",!this.saveWithBackground||this.saveWithBackground&&!this.backgroundImage&&!this.backgroundColor)this.toJPEG(e);else{var i=this.canvasContext.canvas.toDataURL("image/jpeg");this.download(this.getBlob(i),e+".jpeg")}else{e=e||"Signature";i=this.canvasContext.canvas.toDataURL("image/png");this.download(this.getBlob(i),e+".png")}this.saveWithBackground&&this.backgroundLoaded&&this.resetSnap()},e.prototype.resetSnap=function(){this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height);var t=this,e=new Image;e.src=this.snapColl[this.incStep-1],e.onload=function(){t.canvasContext.drawImage(e,0,0,t.element.width,t.element.height),t.updateSnapCollection()},this.backgroundLoaded=null,this.snapColl.pop(),this.incStep--,this.snapColl.pop(),this.incStep--},e.prototype.toJPEG=function(t){var e=this,i=this.snapColl[this.incStep];this.setBackgroundColor("#ffffff");var n=this,r=new Image;r.crossOrigin="anonymous",r.src=i,r.onload=function(){n.canvasContext.globalCompositeOperation="source-over",n.canvasContext.drawImage(r,0,0,n.element.width,n.element.height);var i=n.canvasContext.canvas.toDataURL("image/jpeg");n.download(n.getBlob(i),t+".jpeg"),n.canvasContext.clearRect(0,0,n.canvasContext.canvas.width,n.canvasContext.canvas.height),e.resizeHandler()},this.snapColl.pop(),this.incStep--},e.prototype.toSVG=function(t){var e=this.canvasContext.canvas.toDataURL(),i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("width",this.canvasContext.canvas.width.toString()),i.setAttribute("height",this.canvasContext.canvas.height.toString());var n=document.createElementNS("http://www.w3.org/2000/svg","image");n.setAttributeNS(null,"height",this.canvasContext.canvas.height.toString()),n.setAttributeNS(null,"width",this.canvasContext.canvas.width.toString()),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e),i.appendChild(n);var r='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+this.canvasContext.canvas.width+'" height="'+this.canvasContext.canvas.height+'">'+i.innerHTML+"</svg>",o="data:image/svg+xml;base64,"+btoa(r);return null==t?o:(this.download(this.getBlob(o),t+".svg"),null)},e.prototype.saveAsBlob=function(){return this.getBlob(this.canvasContext.canvas.toDataURL("image/png"))},e.prototype.getSignature=function(t){if("Jpeg"===t){for(var e=this.canvasContext.getImageData(0,0,this.element.width,this.element.height),i=e.data,n=0;n<i.length;n+=4)i[n+3]<255&&(i[n]=255-i[n],i[n+1]=255-i[n+1],i[n+2]=255-i[n+2],i[n+3]=255-i[n+3]);this.canvasContext.putImageData(e,0,0);var r=this.canvasContext.canvas.toDataURL("image/jpeg");return this.resizeHandler(),r}return"Svg"===t?this.toSVG(null):this.canvasContext.canvas.toDataURL("image/png")},e.prototype.getModuleName=function(){return"signature"},e.prototype.getPersistData=function(){return this.signatureValue=this.snapColl[this.incStep],this.addOnPersist(["signatureValue"])},e.prototype.destroy=function(){"image-editor"!==this.getModuleName()&&(this.unwireEvents(null),x([this.element],"e-"+this.getModuleName()),this.element.removeAttribute("tabindex"),this.pointColl=null),t.prototype.destroy.call(this)},e.prototype.propertyChanged=function(t,e){var i=this.canvasContext;switch(t){case"backgroundColor":i.canvas.style.backgroundColor=e,this.backgroundColor=e;break;case"backgroundImage":i.canvas.style.backgroundImage="url("+e+")",this.backgroundImage=e;break;case"strokeColor":i.fillStyle=e,this.strokeColor=e;break;case"saveWithBackground":this.saveWithBackground=e;break;case"maxStrokeWidth":this.maxStrokeWidth=e;break;case"minStrokeWidth":this.minStrokeWidth=e;break;case"velocity":this.velocity=e;break;case"isReadOnly":this.isRead(e);break;case"disabled":this.enableOrDisable(e)}},e}(Kp),TD=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),OD=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},LD=(function(t){function e(e,i){return t.call(this,e,i)||this}TD(e,t),e.prototype.preRender=function(){},e.prototype.render=function(){this.initialize()},e.prototype.initialize=function(){I([this.element],"e-"+this.getModuleName()),t.prototype.initialize.call(this,this.element),this.enablePersistence&&this.loadPersistedSignature()},e.prototype.getModuleName=function(){return"signature"},e.prototype.getPersistData=function(){return this.addOnPersist(["signatureValue"])},e.prototype.onPropertyChanged=function(e,i){for(var n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];switch(o){case"backgroundColor":t.prototype.propertyChanged.call(this,o,e.backgroundColor);break;case"backgroundImage":t.prototype.propertyChanged.call(this,o,e.backgroundImage);break;case"strokeColor":e.strokeColor!==i.strokeColor&&t.prototype.propertyChanged.call(this,o,e.strokeColor);break;case"saveWithBackground":t.prototype.propertyChanged.call(this,o,e.saveWithBackground);break;case"isReadOnly":t.prototype.propertyChanged.call(this,o,e.isReadOnly);break;case"disabled":t.prototype.propertyChanged.call(this,o,e.disabled)}}},OD([W("")],e.prototype,"backgroundColor",void 0),OD([W("")],e.prototype,"backgroundImage",void 0),OD([W(!1)],e.prototype,"disabled",void 0),OD([W(!1)],e.prototype,"isReadOnly",void 0),OD([W(!0)],e.prototype,"saveWithBackground",void 0),OD([W("#000000")],e.prototype,"strokeColor",void 0),OD([W(.5)],e.prototype,"minStrokeWidth",void 0),OD([W(2)],e.prototype,"maxStrokeWidth",void 0),OD([W(.7)],e.prototype,"velocity",void 0),OD([W("en-US")],e.prototype,"locale",void 0),OD([W(!1)],e.prototype,"enableRtl",void 0),OD([W(!1)],e.prototype,"enablePersistence",void 0),OD([Z()],e.prototype,"beforeSave",void 0),OD([Z()],e.prototype,"change",void 0),OD([Z()],e.prototype,"created",void 0),e=OD([$],e)}(DD),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),AD=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},zD="e-rating-icon e-icons e-star-filled",kD="e-rating-intermediate",jD="e-rating-full",PD="e-rating-empty";!function(t){t.Top="Top",t.Bottom="Bottom",t.Left="Left",t.Right="Right"}(sE||(sE={}));var RD;!function(t){t.Full="Full",t.Half="Half",t.Quarter="Quarter",t.Exact="Exact"}(RD||(RD={}));!function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.itemElements=[],n}LD(e,t),e.prototype.preRender=function(){this.element.id||(this.element.id=d("e-"+this.getModuleName())),this.keyConfigs={downarrow:"downarrow",leftarrow:"leftarrow",rightarrow:"rightarrow",uparrow:"uparrow",space:"space"},this.tooltipOpen=!1},e.prototype.render=function(){this.initialize(),this.updateMinValue(),this.updateTemplateFunction(),this.triggerChange(null,this.value,!1),this.renderItems(),this.displayLabel()},e.prototype.initialize=function(){this.wrapper=this.createElement("div",{className:"e-"+this.getModuleName()+"-container "}),this.element.parentNode.insertBefore(this.wrapper,this.element),this.wrapper.appendChild(this.element),null==this.element.getAttribute("name")&&this.element.setAttribute("name",this.element.id),L(this.element,{"aria-label":"rating"}),this.renderItemList(),this.updateReset(),this.readOnly&&this.wrapper.classList.add("e-rating-readonly"),this.visible||this.wrapper.classList.add("e-rating-hidden"),this.enableRtl&&this.wrapper.classList.add("e-rtl"),this.enableAnimation&&this.wrapper.classList.add("e-rating-animation"),this.cssClass&&I([this.wrapper],this.cssClass.split(" ")),this.updateTooltip(),this.wireKeyboardEvent(),this.updateDisabled()},e.prototype.updateDisabled=function(){this.wrapper.classList[this.disabled?"add":"remove"]("e-disabled"),L(this.ratingItemList,{tabindex:this.disabled?"-1":"0"}),this.updateResetButton()},e.prototype.updateResetButton=function(){if(this.allowReset){var t=this.value<=this.min||this.disabled;this.resetElement.classList[t?"add":"remove"]("e-disabled"),L(this.resetElement,{tabindex:t?"-1":"0","aria-hidden":t.toString()})}},e.prototype.renderItemList=function(){var t=this;this.ratingItemList=this.createElement("div",{className:"e-rating-item-list",id:this.element.id+"_item-list"}),L(this.ratingItemList,{"aria-label":"rating",role:"slider"}),this.wrapper.appendChild(this.ratingItemList),Ep.add(this.ratingItemList,"touchmove",function(e){return t.touchMoveHandler(e)},this),Ep.add(this.ratingItemList,Np.touchEndEvent,this.touchEndHandler,this)},e.prototype.touchMoveHandler=function(t){var e=this.ratingItemList.getBoundingClientRect(),i=(t.touches[0].clientX-e.x)/e.width*this.itemsCount;i=(i=this.enableRtl?this.itemsCount-i:i)<this.min?this.min:i>this.itemsCount?this.itemsCount:i;var n=0===(i=this.validateValue(i))?null:this.itemElements[parseInt((Math.ceil(i)-1).toString(),10)];if(i!==this.currentValue){var r=this.currentValue;this.updateCurrentValue(i),this.triggerChange(t,i),this.showTooltip&&(n?(Math.ceil(i)!==Math.ceil(r)&&this.closeRatingTooltip(),this.openRatingTooltip(n,!0)):this.closeRatingTooltip())}else this.showTooltip&&n&&this.openRatingTooltip(n,!1)},e.prototype.touchEndHandler=function(){this.closeRatingTooltip()},e.prototype.updateTemplateFunction=function(){this.emptyTemplateFunction=this.emptyTemplate?this.getTemplateString(this.emptyTemplate):null,this.fullTemplateFunction=this.fullTemplate?this.getTemplateString(this.fullTemplate):null},e.prototype.renderItems=function(){for(var t=this,e=0;e<this.itemsCount;e++){var i=this.createElement("span",{className:"e-rating-item-container"}),n=this.createElement("span",{className:"e-rating-item"}),r=this.getRatingValue(this.value,e);this.renderItemContent(n,r,e,!1),i.appendChild(n),this.wireItemsEvents(i,e+1),this.itemElements.push(i);var o={element:i,value:e+1};this.trigger("beforeItemRender",o,function(e){t.ratingItemList.appendChild(e.element)})}L(this.ratingItemList,{"aria-valuemax":this.itemsCount.toString()}),this.updateItemValue(!1)},e.prototype.renderItemContent=function(t,e,i,n){n&&this.removeItemContent(t),this.fullTemplate&&1===e?(t.classList.add(jD),t.append(this.fullTemplateFunction({index:i,ratingValue:e},this,"ratingFullTemplate",this.element.id+"fullTemplate",this.isStringTemplate)[0])):this.emptyTemplate?(t.classList.add(PD),t.append(this.emptyTemplateFunction({index:i,ratingValue:e},this,"ratingEmptyTemplate",this.element.id+"emptyTemplate",this.isStringTemplate)[0])):I([t],zD.split(" "))},e.prototype.removeItemContent=function(t){t.classList.remove(jD,PD),x([t],zD.split(" ")),t.firstChild&&t.removeChild(t.firstChild)},e.prototype.updateTooltip=function(){this.showTooltip?(this.tooltipObj=new Ny({target:".e-rating-item-container",windowCollision:!0,opensOn:"Custom",cssClass:this.cssClass?"e-rating-tooltip "+this.cssClass:"e-rating-tooltip"}),this.tooltipObj.appendTo(this.ratingItemList)):h(this.tooltipObj)||(this.tooltipObj.destroy(),this.tooltipObj=null)},e.prototype.updateMinValue=function(){this.setProperties({min:this.validateValue(this.min)},!0),this.min>0&&this.value<this.min&&this.triggerChange(null,this.min,!1),L(this.ratingItemList,{"aria-valuemin":this.min.toString()})},e.prototype.validateValue=function(t){return t=t>this.itemsCount?this.itemsCount:t<0?0:this.precision===RD.Full||this.enableSingleSelection?Math.round(t):this.precision===RD.Half?Math.round(2*t)/2:this.precision===RD.Quarter?Math.round(4*t)/4:Math.round(10*t)/10},e.prototype.getRatingValue=function(t,e){return this.enableSingleSelection?t>e&&t<=e+1?1:0:t>=e+1?1:t<e?0:t-e},e.prototype.updateItemValue=function(t){void 0===t&&(t=!0),t&&this.isReact&&this.clearTemplate(["ratingEmptyTemplate","ratingFullTemplate"]);for(var e=0;e<this.itemsCount;e++){var i=this.itemElements[parseInt(e.toString(),10)];i.classList.remove("e-rating-selected",kD,"e-selected-value");var n=this.getRatingValue(this.currentValue,e);1===n?i.classList.add("e-rating-selected"):n>0?i.classList.add(kD):this.precision===RD.Full&&e+1<=this.value&&!this.enableSingleSelection&&i.classList.add("e-selected-value"),t&&this.updateItemContent(n,e),i.style.setProperty("--rating-value",100*n+"%"),i.classList[0===this.value&&0===e||this.value===e+1||n>0&&n<1?"add":"remove"]("e-rating-focus")}t&&this.renderReactTemplates(),this.updateResetButton(),L(this.ratingItemList,{"aria-valuenow":this.currentValue.toString()}),L(this.element,{value:this.value.toString()})},e.prototype.updateItemContent=function(t,e){if(this.fullTemplate||this.emptyTemplate){var i=this.itemElements[parseInt(e.toString(),10)].querySelector(".e-rating-item");if(this.fullTemplate&&1===t){if(!this.isReact&&i.classList.contains(jD))return;this.removeItemContent(i),i.classList.add(jD),i.append(this.fullTemplateFunction({ratingValue:t,index:e},this,"ratingFullTemplate",this.element.id+"fullTemplate"+e,this.isStringTemplate)[0])}else if(this.emptyTemplate){if(!this.isReact&&i.classList.contains(PD))return;this.removeItemContent(i),i.classList.add(PD),i.append(this.emptyTemplateFunction({ratingValue:t,index:e},this,"ratingEmptyTemplate",this.element.id+"emptyTemplate"+e,this.isStringTemplate)[0])}else this.removeItemContent(i),I([i],zD.split(" "))}},e.prototype.updateTooltipContent=function(t){if(this.showTooltip){this.isReact&&this.clearTemplate(["ratingTooltipTemplate"]);var e=void 0;if(this.tooltipTemplate){e=this.getTemplateString(this.tooltipTemplate)({value:this.currentValue},this,"ratingTooltipTemplate",this.element.id+"tooltipTemplate",this.isStringTemplate)[0]}else e=this.currentValue.toString();this.tooltipObj.setProperties({content:e},t),this.renderReactTemplates()}},e.prototype.getTemplateString=function(t){var e="";try{var i=A(t);e=i?"SCRIPT"===i.tagName?i.innerHTML:i.outerHTML:t}catch(i){e=t}return gt(e)},e.prototype.displayLabel=function(){this.showLabel?(this.spanLabel=this.createElement("span",{className:"e-rating-label"}),this.updateLabel(),this.updateLabelPosition()):this.wrapper.contains(this.spanLabel)&&(O(this.spanLabel),this.spanLabel=null)},e.prototype.updateLabel=function(){if(this.showLabel)if(this.labelTemplate){this.isReact&&this.clearTemplate(["ratingLabelTemplate"]),this.spanLabel.firstChild&&this.spanLabel.removeChild(this.spanLabel.firstChild);var t=this.getTemplateString(this.labelTemplate);this.spanLabel.append(t({value:this.currentValue},this,"ratingLabelTemplate",this.element.id+"labelTemplate",this.isStringTemplate)[0]),this.renderReactTemplates()}else this.spanLabel.textContent=this.currentValue+" / "+this.itemsCount},e.prototype.updateReset=function(){this.allowReset?(this.resetElement=this.createElement("span",{className:"e-icons e-reset",attrs:{"aria-label":"resetbutton",role:"button"}}),this.updateResetButton(),Ep.add(this.resetElement,"click",this.resetClicked,this),this.wrapper.insertBefore(this.resetElement,this.ratingItemList)):this.wrapper.contains(this.resetElement)&&(O(this.resetElement),this.resetElement=null)},e.prototype.updateLabelPosition=function(){this.clearLabelPosition(),this.spanLabel.classList.add("e-label-"+this.labelPosition.toLowerCase()),"Left"===this.labelPosition||"Top"===this.labelPosition?this.wrapper.firstChild.after(this.spanLabel):this.wrapper.appendChild(this.spanLabel)},e.prototype.clearLabelPosition=function(){var t=this.spanLabel.classList.value.match(/(e-label-[top|bottom|right|left]+)/g);t&&x([this.spanLabel],t)},e.prototype.wireItemsEvents=function(t,e){var i=this;Ep.add(t,"click",function(t){return i.clickHandler(t)},this),Ep.add(t,"mousemove",function(t){return i.mouseMoveHandler(e,t)},this),Ep.add(t,"mouseleave",this.mouseLeaveHandler,this)},e.prototype.clickHandler=function(t){this.currentValue=this.min>0&&this.currentValue<this.min?this.min:this.currentValue,this.triggerChange(t,this.currentValue),this.updateItemValue(),this.updateLabel(),this.updateResetButton()},e.prototype.updateValueChange=function(t,e,i){void 0===i&&(i=!0),this.triggerChange(t,e,i),this.updateItemValue(),this.updateLabel()},e.prototype.triggerChange=function(t,e,i){if(void 0===i&&(i=!0),e=this.validateValue(e),this.currentValue=e,this.currentValue!==this.value){var n={event:t,isInteracted:i,value:e,previousValue:this.value};this.setProperties({value:e},!0),this.trigger("valueChanged",n)}},e.prototype.mouseMoveHandler=function(t,e){var i=this.calculateCurrentValue(t,e);i=this.validateValue(i);var n=this.itemElements[parseInt((t-1).toString(),10)];if(i!==this.currentValue){this.updateCurrentValue(i),this.openRatingTooltip(n,!0);var r={element:n,event:e,value:i};this.trigger("onItemHover",r)}else this.openRatingTooltip(n,!1)},e.prototype.openRatingTooltip=function(t,e){this.showTooltip&&(this.tooltipOpen?e&&(this.updateTooltipContent(!0),this.tooltipObj.refresh(t)):(this.updateTooltipContent(!1),this.tooltipObj.open(t),this.tooltipOpen=!0))},e.prototype.closeRatingTooltip=function(){this.tooltipOpen&&(this.tooltipObj.close(),this.tooltipOpen=!1)},e.prototype.updateCurrentValue=function(t){this.currentValue=t,this.updateItemValue(),this.updateLabel()},e.prototype.mouseLeaveHandler=function(){this.closeRatingTooltip(),this.updateCurrentValue(this.value)},e.prototype.calculateCurrentValue=function(t,e){var i=t;return this.enableSingleSelection||this.precision===RD.Full||(i=e.offsetX/this.itemElements[t-1].clientWidth,i=this.enableRtl?1-i:i,this.precision===RD.Quarter?i=i<=.25?.25:i<=.5?.5:i<.75?.75:1:this.precision===RD.Half&&(i=i<=.5?.5:1),i=i+t-1),i},e.prototype.reset=function(){this.resetClicked(null,!1)},e.prototype.resetClicked=function(t,e){void 0===e&&(e=!0),this.updateValueChange(t,this.min,e),this.updateResetButton()},e.prototype.wireKeyboardEvent=function(){this.keyboardModuleRating=new pu(this.wrapper,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},e.prototype.keyActionHandler=function(t){if(!this.disabled&&!this.readOnly){if(t.target.classList.contains("e-rating-item-list"))switch(t.action){case"uparrow":this.handleNavigation(t,!0);break;case"downarrow":this.handleNavigation(t,!1);break;case"leftarrow":this.handleNavigation(t,this.enableRtl);break;case"rightarrow":this.handleNavigation(t,!this.enableRtl)}if(this.allowReset&&t.target.classList.contains("e-reset"))switch(t.action){case"space":this.resetClicked(t)}}},e.prototype.handleNavigation=function(t,e){if(!e&&this.value>this.min||e&&this.value<this.itemsCount){var i=this.precision===RD.Full||this.enableSingleSelection?1:this.precision===RD.Half?.5:this.precision===RD.Quarter?.25:Math.round(1)/10;i=e?this.value+i:this.value-i,this.updateValueChange(t,i),this.updateResetButton()}},e.prototype.updateContent=function(){this.isReact&&this.clearTemplate(["ratingEmptyTemplate","ratingFullTemplate"]);for(var t=0;t<this.itemsCount;t++){var e=this.itemElements[parseInt(t.toString(),10)].firstElementChild;this.renderItemContent(e,this.getRatingValue(this.value,t),t,!0)}},e.prototype.getModuleName=function(){return"rating"},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.removeItemElements=function(){for(var t=0;t<this.itemElements.length;t++)O(this.itemElements[parseInt(t.toString(),10)]);this.itemElements=[]},e.prototype.destroy=function(){var e=this;t.prototype.destroy.call(this),this.removeItemElements(),this.clearTemplate(),this.spanLabel&&(O(this.spanLabel),this.spanLabel=null),this.resetElement&&(O(this.resetElement),this.resetElement=null),this.showTooltip&&(this.tooltipObj.destroy(),this.tooltipObj=null),O(this.ratingItemList),this.ratingItemList=null,this.wrapper.parentNode.insertBefore(this.element,this.wrapper),O(this.wrapper),this.wrapper=null,this.keyboardModuleRating.destroy(),this.keyboardModuleRating=null,["value","aria-label","name"].forEach(function(t){e.element.removeAttribute(t)})},e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"value":this.updateValueChange(null,this.value>this.min?this.value:this.min,!1);break;case"min":this.updateMinValue(),this.updateItemValue(),this.updateLabel();break;case"showLabel":this.displayLabel();break;case"visible":this.wrapper.classList[this.visible?"remove":"add"]("e-rating-hidden");break;case"disabled":this.updateDisabled();break;case"readOnly":this.wrapper.classList[this.readOnly?"add":"remove"]("e-rating-readonly");break;case"allowReset":this.updateReset();break;case"enableRtl":this.wrapper.classList[this.enableRtl?"add":"remove"]("e-rtl");break;case"cssClass":e.cssClass&&x([this.wrapper],e.cssClass.split(" ")),t.cssClass&&I([this.wrapper],t.cssClass.split(" ")),this.tooltipObj&&this.tooltipObj.setProperties({cssClass:this.cssClass?"e-rating-tooltip "+this.cssClass:"e-rating-tooltip"});break;case"labelPosition":this.updateLabelPosition();break;case"showTooltip":this.updateTooltip();break;case"precision":this.updateMinValue(),this.triggerChange(null,this.value,!1),this.updateItemValue(),this.updateLabel();break;case"enableSingleSelection":this.updateValueChange(null,this.currentValue,!1);break;case"enableAnimation":this.wrapper.classList[this.enableAnimation?"add":"remove"]("e-rating-animation");break;case"emptyTemplate":case"fullTemplate":this.updateTemplateFunction(),this.updateContent();break;case"labelTemplate":this.updateLabel();break;case"itemsCount":this.removeItemElements(),this.renderItems(),this.updateLabel()}}},AD([W(!1)],e.prototype,"allowReset",void 0),AD([W("")],e.prototype,"cssClass",void 0),AD([W(!1)],e.prototype,"disabled",void 0),AD([W("")],e.prototype,"emptyTemplate",void 0),AD([W(!0)],e.prototype,"enableAnimation",void 0),AD([W(!1)],e.prototype,"enableSingleSelection",void 0),AD([W("")],e.prototype,"fullTemplate",void 0),AD([W(5)],e.prototype,"itemsCount",void 0),AD([W(sE.Right)],e.prototype,"labelPosition",void 0),AD([W("")],e.prototype,"labelTemplate",void 0),AD([W(0)],e.prototype,"min",void 0),AD([W(RD.Full)],e.prototype,"precision",void 0),AD([W(!1)],e.prototype,"readOnly",void 0),AD([W(!1)],e.prototype,"showLabel",void 0),AD([W(!0)],e.prototype,"showTooltip",void 0),AD([W("")],e.prototype,"tooltipTemplate",void 0),AD([W(0)],e.prototype,"value",void 0),AD([W(!0)],e.prototype,"visible",void 0),AD([Z()],e.prototype,"beforeItemRender",void 0),AD([Z()],e.prototype,"created",void 0),AD([Z()],e.prototype,"onItemHover",void 0),AD([Z()],e.prototype,"valueChanged",void 0),e=AD([$],e)}(Kp);var BD,HD=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),UD=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},VD="e-treeview",_D="e-icon-collapsible",FD="e-icon-expandable",YD="e-list-item",WD="e-list-text",QD="e-list-parent",XD="e-hover",qD="e-active",GD="e-icons-spinner",ZD="e-process",$D="e-icons",KD="e-text-content",JD="e-tree-input",tT="e-sibling",eT="e-drop-in",iT="e-drop-next",nT="e-fullrow",rT="e-selected",oT="e-expanded",sT="e-check",aT="e-stop",lT="e-checkbox-wrapper",hT="e-frame",cT="e-node-focus",dT="e-animation-active",pT="e-prevent",uT={treeRole:"group",itemRole:"treeitem",listRole:"group",itemText:"",wrapperRole:""},gT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return HD(e,t),UD([W("child")],e.prototype,"child",void 0),UD([W([])],e.prototype,"dataSource",void 0),UD([W("expanded")],e.prototype,"expanded",void 0),UD([W("hasChildren")],e.prototype,"hasChildren",void 0),UD([W("htmlAttributes")],e.prototype,"htmlAttributes",void 0),UD([W("iconCss")],e.prototype,"iconCss",void 0),UD([W("id")],e.prototype,"id",void 0),UD([W("imageUrl")],e.prototype,"imageUrl",void 0),UD([W("isChecked")],e.prototype,"isChecked",void 0),UD([W("parentID")],e.prototype,"parentID",void 0),UD([W(null)],e.prototype,"query",void 0),UD([W("selectable")],e.prototype,"selectable",void 0),UD([W("selected")],e.prototype,"selected",void 0),UD([W(null)],e.prototype,"tableName",void 0),UD([W("text")],e.prototype,"text",void 0),UD([W("tooltip")],e.prototype,"tooltip",void 0),UD([W("navigateUrl")],e.prototype,"navigateUrl",void 0),e}(Rp),mT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return HD(e,t),UD([W("SlideDown")],e.prototype,"effect",void 0),UD([W(400)],e.prototype,"duration",void 0),UD([W("linear")],e.prototype,"easing",void 0),e}(Rp),fT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return HD(e,t),UD([Q({effect:"SlideUp",duration:400,easing:"linear"},mT)],e.prototype,"collapse",void 0),UD([Q({effect:"SlideDown",duration:400,easing:"linear"},mT)],e.prototype,"expand",void 0),e}(Rp),vT=(function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.isRefreshed=!1,n.preventExpand=!1,n.checkedElement=[],n.disableNode=[],n.validArr=[],n.validNodes=[],n.expandChildren=[],n.isFieldChange=!1,n.changeDataSource=!1,n.hasTemplate=!1,n.isFirstRender=!1,n.isNodeDropped=!1,n.isInteracted=!1,n.isRightClick=!1,n.mouseDownStatus=!1,n}HD(e,t),i=e,e.prototype.getModuleName=function(){return"treeview"},e.prototype.preRender=function(){var t=this;this.checkActionNodes=[],this.parentNodeCheck=[],this.dragStartAction=!1,this.isAnimate=!1,this.keyConfigs={escape:"escape",end:"end",enter:"enter",f2:"f2",home:"home",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",ctrlDown:"ctrl+downarrow",ctrlUp:"ctrl+uparrow",ctrlEnter:"ctrl+enter",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",ctrlA:"ctrl+A",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftEnter:"shift+enter",shiftHome:"shift+home",shiftEnd:"shift+end",csDown:"ctrl+shift+downarrow",csUp:"ctrl+shift+uparrow",csEnter:"ctrl+shift+enter",csHome:"ctrl+shift+home",csEnd:"ctrl+shift+end",space:"space",shiftSpace:"shift+space",ctrlSpace:"ctrl+space"},this.listBaseOption={expandCollapse:!0,showIcon:!0,expandIconClass:FD,ariaAttributes:uT,expandIconPosition:"Left",itemCreated:function(e){t.beforeNodeCreate(e)},enableHtmlSanitizer:this.enableHtmlSanitizer,itemNavigable:this.fullRowNavigable},this.updateListProp(this.fields),this.aniObj=new zp({}),this.treeList=[],this.isLoaded=!1,this.isInitalExpand=!1,this.expandChildren=[],this.index=0,this.setTouchClass(),h(this.selectedNodes)&&this.setProperties({selectedNodes:[]},!0),h(this.checkedNodes)&&this.setProperties({checkedNodes:[]},!0),h(this.expandedNodes)?this.setProperties({expandedNodes:[]},!0):this.isInitalExpand=!0},e.prototype.getPersistData=function(){return this.addOnPersist(["selectedNodes","checkedNodes","expandedNodes"])},e.prototype.render=function(){this.initialRender=!0,this.initialize(),this.setDataBinding(!1),this.setDisabledMode(),this.setExpandOnType(),this.disabled||this.setRipple(),this.wireEditingEvents(this.allowEditing),this.setDragAndDrop(this.allowDragAndDrop),this.disabled||this.wireEvents(),this.initialRender=!1,this.renderComplete()},e.prototype.initialize=function(){this.element.setAttribute("role","tree"),this.element.setAttribute("aria-activedescendant",this.element.id+"_active"),this.setCssClass(null,this.cssClass),this.setEnableRtl(),this.setFullRow(this.fullRowSelect),this.setTextWrap(),this.nodeTemplateFn=this.templateComplier(this.nodeTemplate)},e.prototype.setDisabledMode=function(){this.disabled?this.element.classList.add("e-disabled"):this.element.classList.remove("e-disabled")},e.prototype.setEnableRtl=function(){(this.enableRtl?I:x)([this.element],"e-rtl")},e.prototype.setRipple=function(){var t={selector:".e-fullrow,.e-text-content",ignore:"."+KD+" > ."+$D+",.e-input-group,.e-input, ."+lT};this.rippleFn=et(this.element,t);var e={selector:"."+KD+" > ."+$D,isCenterRipple:!0};this.rippleIconFn=et(this.element,e)},e.prototype.setFullRow=function(t){(t?I:x)([this.element],"e-fullrow-wrap")},e.prototype.setMultiSelect=function(t){var e=A("."+QD,this.element);t?e.setAttribute("aria-multiselectable","true"):e.removeAttribute("aria-multiselectable")},e.prototype.templateComplier=function(t){if(t){this.hasTemplate=!0,this.element.classList.add("e-interaction");try{return document.querySelectorAll(t).length?gt(document.querySelector(t).innerHTML.trim()):gt(t)}catch(e){return gt(t)}}this.element.classList.remove("e-interaction")},e.prototype.setDataBinding=function(t){var e=this;this.treeList.push("false"),this.fields.dataSource instanceof ox?(this.isOffline=this.fields.dataSource.dataSource.offline,this.fields.dataSource.ready?this.fields.dataSource.ready.then(function(t){e.isOffline=e.fields.dataSource.dataSource.offline,e.fields.dataSource instanceof ox&&e.isOffline&&(e.treeList.pop(),e.treeData=t.result,e.isNumberTypeId=e.getType(),e.setRootData(),e.renderItems(!0),0!==e.treeList.length||e.isLoaded||e.finalize())}).catch(function(t){e.trigger("actionFailure",{error:t})}):this.fields.dataSource.executeQuery(this.getQuery(this.fields)).then(function(i){e.treeList.pop(),e.treeData=i.result,e.isNumberTypeId=e.getType(),e.setRootData(),t&&(e.changeDataSource=!0),e.renderItems(!0),e.changeDataSource=!1,0!==e.treeList.length||e.isLoaded||e.finalize()}).catch(function(t){e.trigger("actionFailure",{error:t})})):(this.treeList.pop(),h(this.fields.dataSource)?this.rootData=this.treeData=[]:(this.treeData=JSON.parse(JSON.stringify(this.fields.dataSource)),this.setRootData()),this.isNumberTypeId=this.getType(),this.renderItems(!1)),0!==this.treeList.length||this.isLoaded||this.finalize()},e.prototype.getQuery=function(t,e){void 0===e&&(e=null);var i,n=[];if(t.query)i=t.query.clone();else{i=new QI;for(var r=this.getActualProperties(t),o=0,s=Object.keys(r);o<s.length;o++){var a=s[o];"dataSource"!==a&&"tableName"!==a&&"child"!==a&&t[a]&&"url"!==a&&-1===n.indexOf(t[a])&&n.push(t[a])}i.select(n),r.hasOwnProperty("tableName")&&i.from(t.tableName)}return uy.addSorting(this.sortOrder,t.text,i),h(e)||h(t.parentID)||i.where(t.parentID,"equal",this.isNumberTypeId?parseFloat(e):e),i},e.prototype.getType=function(){return!!this.treeData[0]&&"number"==typeof n(this.fields.id,this.treeData[0])},e.prototype.setRootData=function(){if(this.dataType=this.getDataType(this.treeData,this.fields),1===this.dataType){this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID);var t=this.getChildNodes(this.treeData,void 0,!0);h(t)?this.rootData=[]:this.rootData=t}else this.rootData=this.treeData},e.prototype.renderItems=function(t){this.listBaseOption.ariaAttributes.level=1;var e=this.getSortedData(this.rootData);this.ulElement=uy.createList(this.createElement,t?this.rootData:e,this.listBaseOption),this.element.appendChild(this.ulElement);var i=this.ulElement.querySelectorAll(".e-list-item");if(!1===this.loadOnDemand)for(var n=0;n<i.length;)this.renderChildNodes(i[n],!0,null,!0),n++;(1===z("."+QD,this.element).length&&i&&0!==i.length||this.loadOnDemand)&&this.finalizeNode(this.element),this.parentNodeCheck=[],this.parentCheckData=[],this.updateCheckedStateFromDS(),this.autoCheck&&this.showCheckBox&&!this.isLoaded&&this.updateParentCheckState()},e.prototype.updateCheckedStateFromDS=function(t){if(this.validNodes=[],this.treeData&&this.showCheckBox){if(1===this.dataType){for(var e=this.fields,i=new ox(this.treeData).executeLocal((new QI).where(e.isChecked,"equal",!0,!1)),r=0;r<i.length;r++){var o=i[r][this.fields.id]?i[r][this.fields.id].toString():null;i[r][this.fields.parentID]&&i[r][this.fields.parentID].toString();if(-1!==this.checkedNodes.indexOf(o)||this.isLoaded||this.checkedNodes.push(o),i[r][this.fields.hasChildren])for(var s=i[r][this.fields.id],a=new ox(this.treeData).executeLocal((new QI).where(e.parentID,"equal",s,!1)),l=0;l<a.length;l++){var h=a[l][this.fields.id]?a[l][this.fields.id].toString():null;-1===this.checkedNodes.indexOf(h)&&this.autoCheck&&this.checkedNodes.push(h)}}for(r=0;r<this.checkedNodes.length;r++){var c=this.fields,d=new ox(this.treeData).executeLocal((new QI).where(c.id,"equal",this.checkedNodes[r],!0));if(d[0]&&this.autoCheck&&(this.getCheckedNodeDetails(c,d),this.checkIndeterminateState(d[0])),d.length>0){var p=d[0][this.fields.id]?d[0][this.fields.id].toString():null;this.checkedNodes.indexOf(p)>-1&&-1===this.validNodes.indexOf(p)&&this.validNodes.push(p)}for(var u=new ox(this.treeData).executeLocal((new QI).where(c.parentID,"equal",this.checkedNodes[r],!0)),g=0;g<u.length;g++){p=u[g][this.fields.id]?u[g][this.fields.id].toString():null;-1===this.checkedNodes.indexOf(p)&&this.autoCheck&&this.checkedNodes.push(p),this.checkedNodes.indexOf(p)>-1&&-1===this.validNodes.indexOf(p)&&this.validNodes.push(p)}}}else if(2===this.dataType||this.fields.dataSource instanceof ox&&this.isOffline){for(g=0;g<this.treeData.length;g++){var m=this.treeData[g][this.fields.id]?this.treeData[g][this.fields.id].toString():"";this.treeData[g][this.fields.isChecked]&&!this.isLoaded&&-1===this.checkedNodes.indexOf(m)&&this.checkedNodes.push(m),this.checkedNodes.indexOf(m)>-1&&-1===this.validNodes.indexOf(m)&&this.validNodes.push(m);var f=n(this.fields.child.toString(),this.treeData[g]);f&&this.updateChildCheckState(f,this.treeData[g])}this.validNodes=this.enablePersistence?this.checkedNodes:this.validNodes}this.setProperties({checkedNodes:this.validNodes},!0)}},e.prototype.getCheckedNodeDetails=function(t,e){var i=e[0][this.fields.parentID]?e[0][this.fields.parentID].toString():null,n=0,r=this.element.querySelector('[data-uid="'+e[0][this.fields.id]+'"]'),o=this.element.querySelector('[data-uid="'+e[0][this.fields.parentID]+'"]');if(r||o){if(o){A(".e-check",o)||this.changeState(o,"indeterminate",null,!0,!0)}}else{this.parentNodeCheck.length;-1===this.parentNodeCheck.indexOf(i)&&this.parentNodeCheck.push(i);for(var s=this.getChildNodes(this.treeData,i),a=0;a<s.length;a++){var l=s[a][this.fields.id]?s[a][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(l)&&n++,n===s.length&&-1===this.checkedNodes.indexOf(i)&&this.checkedNodes.push(i)}var h=new ox(this.treeData).executeLocal((new QI).where(t.id,"equal",i,!0));this.getCheckedNodeDetails(t,h)}},e.prototype.updateParentCheckState=function(){for(var t,e=z(".e-stop",this.element),i=0;i<e.length;i++){var n=j(e[i],"."+YD),r=n.getAttribute("data-uid").toString(),o=0;if(t=1===this.dataType?new ox(this.treeData).executeLocal((new QI).where(this.fields.parentID,"equal",r,!0)):this.getChildNodes(this.treeData,r)){for(var s=0;s<t.length;s++){var a=t[s][this.fields.id].toString();-1!==this.checkedNodes.indexOf(a)&&o++}if(o===t.length){var l=n.getAttribute("data-uid");-1===this.checkedNodes.indexOf(l)&&this.checkedNodes.push(l),this.changeState(n,"check",null,!0,!0)}else 0===o&&0===this.checkedNodes.length&&this.changeState(n,"uncheck",null,!0,!0)}}},e.prototype.checkIndeterminateState=function(t){var e;if(e=1===this.dataType?this.element.querySelector('[data-uid="'+t[this.fields.parentID]+'"]'):this.element.querySelector('[data-uid="'+t[this.fields.id]+'"]')){"true"!==e.querySelector("."+lT).getAttribute("aria-checked")&&this.changeState(e,"indeterminate",null,!0,!0)}else if(2===this.dataType){this.parentNodeCheck.length;-1===this.parentNodeCheck.indexOf(t[this.fields.id].toString())&&this.parentNodeCheck.push(t[this.fields.id].toString())}},e.prototype.updateChildCheckState=function(t,e){for(var i=0,r=e[this.fields.id]?e[this.fields.id].toString():"",o=0;o<t.length;o++){var s=t[o][this.fields.id]?t[o][this.fields.id].toString():"";t[o][this.fields.isChecked]&&!this.isLoaded&&-1===this.checkedNodes.indexOf(s)&&this.checkedNodes.push(s),-1!==this.checkedNodes.indexOf(r)&&-1===this.checkedNodes.indexOf(s)&&this.autoCheck&&this.checkedNodes.push(s),-1!==this.checkedNodes.indexOf(s)&&this.autoCheck&&i++,this.checkedNodes.indexOf(s)>-1&&-1===this.validNodes.indexOf(s)&&this.validNodes.push(s);var a=n(this.fields.child.toString(),t[o]);a&&a.length&&(-1===this.parentCheckData.indexOf(e)&&this.parentCheckData.push(e),this.updateChildCheckState(a,t[o])),i===t.length&&this.autoCheck&&-1===this.checkedNodes.indexOf(r)&&this.checkedNodes.push(r)}if(0!==i&&this.autoCheck){this.checkIndeterminateState(e);for(var l=0;l<this.parentCheckData.length;l++)e!==this.parentCheckData[l]&&this.parentCheckData[l]&&this.checkIndeterminateState(this.parentCheckData[l])}this.parentCheckData=[]},e.prototype.beforeNodeCreate=function(t){if(this.showCheckBox){var e=fi(this.createElement,!0,{cssClass:this.touchClass});e.setAttribute("role","checkbox"),e.setAttribute("aria-label","checkbox");var i=A("div.e-icons",t.item),r=t.item.getAttribute("data-uid");t.item.childNodes[0].insertBefore(e,t.item.childNodes[0].childNodes[h(i)?0:1]);var o=n(t.fields.isChecked,t.curData);this.checkedNodes.indexOf(r)>-1?(A(".e-frame",e).classList.add(sT),e.setAttribute("aria-checked","true"),this.addCheck(t.item)):h(o)||"true"!==o.toString()?e.setAttribute("aria-checked","false"):(A(".e-frame",e).classList.add(sT),e.setAttribute("aria-checked","true"),this.addCheck(t.item));var s=A(".e-frame",e);Ep.add(s,"mousedown",this.frameMouseHandler,this),Ep.add(s,"mouseup",this.frameMouseHandler,this)}this.fullRowSelect&&this.createFullRow(t.item),this.allowMultiSelection&&!t.item.classList.contains(rT)&&t.item.setAttribute("aria-selected","false");var a=t.fields;if(this.addActionClass(t,a.selected,rT),this.addActionClass(t,a.expanded,oT),t.item.setAttribute("tabindex","-1"),Ep.add(t.item,"focus",this.focusIn,this),!h(this.nodeTemplateFn)){var l=t.item.querySelector("."+WD),c=t.item.getAttribute("data-uid");l.innerHTML="",this.renderNodeTemplate(t.curData,l,c)}var d={node:t.item,nodeData:t.curData,text:t.text};this.isRefreshed||(this.trigger("drawNode",d),!1!==t.curData[this.fields.selectable]||this.showCheckBox||(t.item.classList.add(pT),t.item.firstElementChild.setAttribute("style","cursor: not-allowed")))},e.prototype.frameMouseHandler=function(t){vi(t,A(".e-ripple-container",t.target.parentElement))},e.prototype.addActionClass=function(t,e,i){var r=n(e,t.curData);h(r)||"false"===r.toString()||t.item.classList.add(i)},e.prototype.getDataType=function(t,e){if(this.fields.dataSource instanceof ox){for(var i=0;i<t.length;i++)if(this.isOffline){if("string"==typeof e.child&&h(n(e.child,t[i]))&&!h(n(e.parentID,t[i])))return 1}else if("string"==typeof e.child&&h(n(e.child,t[i])))return 1;return 2}i=0;for(var r=t.length;i<r;i++){if("string"==typeof e.child&&!h(n(e.child,t[i])))return 2;if(!h(n(e.parentID,t[i]))||!h(n(e.hasChildren,t[i])))return 1}return 1},e.prototype.getGroupedData=function(t,e){for(var i=(new QI).group(e),n=uy.getDataSource(t,i),r=[],o=0;o<n.length;o++){var s=n[o].items;r.push(s)}return r},e.prototype.getSortedData=function(t){return t&&"None"!==this.sortOrder&&(t=uy.getDataSource(t,uy.addSorting(this.sortOrder,this.fields.text))),t},e.prototype.finalizeNode=function(t){for(var e=z(".e-list-img",t),i=0;i<e.length;i++)e[i].setAttribute("alt","e-list-img");if(this.isLoaded){for(var n=z("."+rT,t),r=0;r<n.length;r++){this.selectNode(n[r],null);break}x(n,rT)}for(var o=z("."+YD+":not(."+oT+")",t),s=0;s<o.length;s++){var a=A("div.e-icons",o[s]);a&&a.classList.contains(FD)&&this.disableExpandAttr(o[s])}var l=z("."+oT,t);if(!this.isInitalExpand)for(r=0;r<l.length;r++)this.renderChildNodes(l[r]);x(l,oT),this.updateList(),this.isLoaded&&this.updateCheckedProp()},e.prototype.updateCheckedProp=function(){if(this.showCheckBox){var t=[].concat([],this.checkedNodes);this.setProperties({checkedNodes:t},!0)}},e.prototype.ensureIndeterminate=function(){if(this.autoCheck)for(var t=z("li",this.element),e=0;e<t.length;e++)t[e].classList.contains(YD)&&(A("."+QD,t[e])?this.ensureParentCheckState(t[e]):this.ensureChildCheckState(t[e]));else{var i=z(".e-stop",this.element);for(e=0;e<i.length;e++)i[e].classList.remove(aT)}},e.prototype.ensureParentCheckState=function(t){if(!h(t)){if(t.classList.contains(VD))return;var e=t;t.classList.contains(YD)&&(e=A("."+QD,t));var i=z(".e-check",e),n=z(".e-stop",e),r=z("."+YD,e),o=t.getElementsByClassName(lT)[0];r.length===i.length?this.changeState(o,"check",null,!0,!0):i.length>0||n.length>0?this.changeState(o,"indeterminate",null,!0,!0):0===i.length&&this.changeState(o,"uncheck",null,!0,!0);var s=j(t,"."+QD);if(!h(s)){var a=j(s,"."+YD);this.ensureParentCheckState(a)}}},e.prototype.ensureChildCheckState=function(t,e){if(!h(t)){var i=A("."+QD,t),r=void 0;if(!h(i)){r=z("."+lT,i);for(var o=t.getElementsByClassName(hT)[0].classList.contains(sT),s=t.getElementsByClassName(hT)[0].classList.contains(aT),a=i.querySelectorAll("li"),l=(i.parentElement.getAttribute("aria-expanded"),void 0),d=0;d<r.length;d++){var p=a[d].getAttribute("data-uid");if(h(this.currentLoadData)||h(n(this.fields.isChecked,this.currentLoadData[d]))){var u=r[d].getElementsByClassName(hT)[0].classList.contains(sT);o?l="check":u&&!this.isLoaded?l="check":-1!==this.checkedNodes.indexOf(p)&&this.isLoaded&&(s||o)?l="check":a[d].classList.contains("e-has-child")&&!c(this.parentNodeCheck)&&this.autoCheck&&(o||s)&&-1!==this.parentNodeCheck.indexOf(p)?(l="indeterminate",this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(p),1)):1===this.dataType&&!c(this.parentNodeCheck)&&this.autoCheck&&(o||s)&&-1!==this.parentNodeCheck.indexOf(p)?(l="indeterminate",this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(p),1)):l="uncheck"}else l=n(this.fields.isChecked,this.currentLoadData[d])?"check":"uncheck",-1!==this.ele&&(l=o?"check":"uncheck"),"uncheck"===l&&!c(this.parentNodeCheck)&&this.autoCheck&&-1!==this.parentNodeCheck.indexOf(p)&&(this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(p),1),l="indeterminate");this.changeState(r[d],l,e,!0,!0)}}this.autoCheck&&this.isLoaded&&this.updateParentCheckState()}},e.prototype.doCheckBoxAction=function(t,e){z("."+YD,this.element);if(h(t)){var i=z("."+lT,this.element);if(this.loadOnDemand)for(var n=0;n<i.length;n++)this.updateFieldChecked(i[n],e),this.changeState(i[n],e?"check":"uncheck",null,null,null,e);else for(n=0;n<i.length;n++)this.updateFieldChecked(i[n],e),this.changeState(i[n],e?"check":"uncheck")}else for(var r=t.length;r>=0;r--){var o=void 0;if(o=1===t.length?this.getElement(t[r-1]):this.getElement(t[r]),h(o)){var s=void 0;if(""!==(s=t[r-t.length]?t[r-t.length].toString():t[r]?t[r].toString():null)&&e&&s)this.setValidCheckedNode(s),this.dynamicCheckState(s,e);else if(-1!==this.checkedNodes.indexOf(s)&&""!==s&&!e){this.checkedNodes.splice(this.checkedNodes.indexOf(s),1);var a=this.getChildNodes(this.treeData,s);if(a){for(var l=0;l<a.length;l++){var c=a[l][this.fields.id]?a[l][this.fields.id].toString():null;if(-1!==this.checkedNodes.indexOf(c)){this.checkedNodes.splice(this.checkedNodes.indexOf(c),1);var d=this.element.querySelector('[data-uid="'+c+'"]');d&&this.changeState(d,"uncheck",null)}}-1!==this.parentNodeCheck.indexOf(s)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(s),1)}s&&this.dynamicCheckState(s,e),this.updateField(this.treeData,this.fields,s,"isChecked",null)}}else{var p=A("."+QD+" ."+lT,o);this.validateCheckNode(p,!e,o,null)}}if(t)for(var u=0;u<t.length;u++){s=t[u]?t[u].toString():"";e||this.updateField(this.treeData,this.fields,s,"isChecked",null)}this.autoCheck&&this.updateParentCheckState()},e.prototype.updateFieldChecked=function(t,e){var i=j(t,"."+YD),n=i.getAttribute("data-uid");"true"!==this.getNodeData(i).isChecked||e||this.updateField(this.treeData,this.fields,n,"isChecked",null)},e.prototype.dynamicCheckState=function(t,e){if(1===this.dataType){var i=0,r=new ox(this.treeData).executeLocal((new QI).where(this.fields.id,"equal",t,!0));if(r[0]){var o=r[0][this.fields.id]?r[0][this.fields.id].toString():null,s=r[0][this.fields.parentID]?r[0][this.fields.parentID].toString():null,a=((p=this.element.querySelector('[data-uid="'+s+'"]'))&&A(".e-stop",p),p?A(".e-check",p):null),l=this.element.querySelector('[data-uid="'+o+'"]'),h=this.getChildNodes(this.treeData,s);if(h)for(var c=0;c<h.length;c++){var d=h[c][this.fields.id]?h[c][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(d)&&i++}-1!==this.checkedNodes.indexOf(t)&&p&&o===t&&this.autoCheck?this.changeState(p,"indeterminate",null):-1===this.checkedNodes.indexOf(t)&&l&&o===t&&!e?this.changeState(l,"uncheck",null):-1!==this.checkedNodes.indexOf(t)&&l&&o===t&&e?this.changeState(l,"check",null):-1===this.checkedNodes.indexOf(t)&&!l&&p&&o===t&&this.autoCheck&&0!==i?this.changeState(p,"indeterminate",null):-1===this.checkedNodes.indexOf(t)&&!l&&p&&o===t&&this.autoCheck&&0===i?this.changeState(p,"uncheck",null):l||p||o!==t||!this.autoCheck||this.updateIndeterminate(t,e)}}else if(2===this.dataType||this.fields.dataSource instanceof ox&&this.isOffline){o=void 0;var p=void 0;for(a=void 0,c=0;c<this.treeData.length;c++){o=this.treeData[c][this.fields.id]?this.treeData[c][this.fields.id].toString():"",a=(p=this.element.querySelector('[data-uid="'+o+'"]'))?A(".e-check",p):null,-1===this.checkedNodes.indexOf(o)&&p&&a&&!e&&this.changeState(p,"uncheck",null);var u=n(this.fields.child.toString(),this.treeData[c]);u&&this.updateChildIndeterminate(u,o,t,e,o)}}},e.prototype.updateIndeterminate=function(t,e){var i,n=this.getTreeData(t),r=0;1===this.dataType&&(i=n[0][this.fields.parentID]?n[0][this.fields.parentID].toString():null);var o=this.getChildNodes(this.treeData,i);if(o)for(var s=0;s<o.length;s++){var a=o[s][this.fields.id]?o[s][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(a)&&r++}var l=this.element.querySelector('[data-uid="'+i+'"]');l&&e?this.changeState(l,"indeterminate",null):!e&&l&&-1===this.parentNodeCheck.indexOf(i)&&0!==r?this.changeState(l,"indeterminate",null):!e&&l&&-1===this.parentNodeCheck.indexOf(i)&&0===r?this.changeState(l,"uncheck",null):l||(e||-1!==this.checkedNodes.indexOf(i)||-1===this.parentNodeCheck.indexOf(i)?e&&-1===this.checkedNodes.indexOf(i)&&-1===this.parentNodeCheck.indexOf(i)?this.parentNodeCheck.push(i):e||-1===this.checkedNodes.indexOf(i)||-1!==this.parentNodeCheck.indexOf(i)||0===r||this.parentNodeCheck.push(i):this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(i),1),this.updateIndeterminate(i,e),-1===this.checkedNodes.indexOf(i)||e||this.checkedNodes.splice(this.checkedNodes.indexOf(i),1))},e.prototype.updateChildIndeterminate=function(t,e,i,r,o){for(var s=0,a=0;a<t.length;a++){var l=t[a][this.fields.id]?t[a][this.fields.id].toString():"";-1!==this.checkedNodes.indexOf(l)&&s++;var h=this.element.querySelector('[data-uid="'+e+'"]'),c=h?A(".e-stop",h):null,d=h?A(".e-check",h):null,p=this.element.querySelector('[data-uid="'+l+'"]'),u=p?A(".e-check",p):null;if(-1!==this.checkedNodes.indexOf(i)&&h&&l===i&&this.autoCheck)this.changeState(h,"indeterminate",null);else if(-1!==this.checkedNodes.indexOf(i)||!h||p||l!==i||r){if(-1===this.checkedNodes.indexOf(i)&&p&&l===i&&!r)this.changeState(p,"uncheck",null);else if(-1===this.checkedNodes.indexOf(i)&&c&&l===i&&this.autoCheck&&0===s&&!r)c.classList.remove(aT);else if(-1===this.checkedNodes.indexOf(i)&&!p&&d&&l===i&&0===s)this.changeState(h,"uncheck",null);else if(-1===this.checkedNodes.indexOf(l)&&p&&u&&0===s)this.changeState(p,"uncheck",null);else if(!p&&!h&&l===i||-1!==this.parentNodeCheck.indexOf(e)&&this.autoCheck){var g=this.element.querySelector('[data-uid="'+o+'"]');r&&0!==s?this.changeState(g,"indeterminate",null):r&&s===t.length&&-1===this.checkedNodes.indexOf(e)?this.checkedNodes.push(e):r||0!==s||-1===this.parentNodeCheck.indexOf(e)||this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(e)),-1===this.parentNodeCheck.indexOf(e)&&this.parentNodeCheck.push(e)}}else this.autoCheck?this.changeState(h,"uncheck",null):0!==s?this.changeState(h,"indeterminate",null):this.changeState(h,"uncheck",null);var m=n(this.fields.child.toString(),t[a]);m&&this.updateChildIndeterminate(m,l,i,r,o)}},e.prototype.changeState=function(t,e,i,n,r,o){var s,a=this,l=j(t,"."+YD);t===l&&(t=A("."+lT,l)),n?this.nodeCheckAction(t,e,l,s,i,n,r,o):(this.checkActionNodes=[],s=this.getCheckEvent(l,e,i),this.trigger("nodeChecking",s,function(s){s.cancel||a.nodeCheckAction(t,e,l,s,i,n,r,o)}))},e.prototype.nodeCheckAction=function(t,e,i,n,r,o,s,a){var l,d=t.getElementsByClassName(hT)[0];if("check"!==e||d.classList.contains(sT)?"uncheck"===e&&(d.classList.contains(sT)||d.classList.contains(aT))?(x([d],[sT,aT]),this.removeCheck(i),l="false"):"indeterminate"===e&&this.autoCheck&&(d.classList.remove(sT),d.classList.add(aT),this.removeCheck(i),l="mixed"):(d.classList.remove(aT),d.classList.add(sT),this.addCheck(i),l="true"),l="check"===e?"true":"uncheck"===e?"false":l,h(l)||t.setAttribute("aria-checked",l),s){var p=[].concat([],this.checkActionNodes);n=this.getCheckEvent(i,e,r),c(o)&&(n.data=p)}void 0!==a&&this.ensureStateChange(i,a),o||h(l)||(t.setAttribute("aria-checked",l),n.data[0].checked=l,this.trigger("nodeChecked",n),this.checkActionNodes=[])},e.prototype.addCheck=function(t){var e=t.getAttribute("data-uid");h(e)||-1!==this.checkedNodes.indexOf(e)||this.checkedNodes.push(e)},e.prototype.removeCheck=function(t){var e=this.checkedNodes.indexOf(t.getAttribute("data-uid"));e>-1&&this.checkedNodes.splice(e,1)},e.prototype.getCheckEvent=function(t,e,i){this.checkActionNodes.push(this.getNodeData(t));var n=this.checkActionNodes;return{action:e,cancel:!1,isInteracted:!h(i),node:t,data:n}},e.prototype.finalize=function(){var t=A("."+QD,this.element);if(!h(t)){t.setAttribute("role",uT.treeRole),this.setMultiSelect(this.allowMultiSelection);var e=A("."+YD,this.element);e&&(e.setAttribute("tabindex","0"),this.updateIdAttr(null,e)),this.allowTextWrap&&this.updateWrap(),this.renderReactTemplates(),this.hasPid=!!this.rootData[0]&&this.rootData[0].hasOwnProperty(this.fields.parentID),this.doExpandAction()}},e.prototype.setTextWrap=function(){(this.allowTextWrap?I:x)([this.element],"e-text-wrap"),Np.isIE&&(this.allowTextWrap?I:x)([this.element],"e-ie-wrap")},e.prototype.updateWrap=function(t){if(this.fullRowSelect)for(var e=t?z("."+YD,t):this.liList,i=e.length,n=0;n<i;n++)this.calculateWrap(e[n])},e.prototype.calculateWrap=function(t){var e=A("."+nT,t);e&&e.nextElementSibling&&(e.style.height=this.allowTextWrap?e.nextElementSibling.offsetHeight+"px":"")},e.prototype.doExpandAction=function(){var t=this.expandedNodes;if(this.isInitalExpand&&t.length>0)if(this.setProperties({expandedNodes:[]},!0),this.fields.dataSource instanceof ox)this.expandGivenNodes(t);else{for(var e=0;e<t.length;e++){var i=A('[data-uid="'+t[e]+'"]',this.element);if(h(i))t[e]&&-1===this.expandChildren.indexOf(t[e])&&this.expandChildren.push(t[e].toString());else{var n=A("."+FD,A("."+KD,i));h(n)||this.expandAction(i,n,null)}}this.afterFinalized()}else this.afterFinalized()},e.prototype.expandGivenNodes=function(t){var e=this;this.expandCallback(t[this.index],function(){e.index++,e.index<t.length?e.expandGivenNodes(t):e.afterFinalized()})},e.prototype.expandCallback=function(t,e){var i=A('[data-uid="'+t+'"]',this.element);if(h(i))e();else{var n=A("."+FD,A("."+KD,i));h(n)?e():this.expandAction(i,n,null,!1,e)}},e.prototype.afterFinalized=function(){if(this.doSelectionAction(),this.updateCheckedProp(),this.isAnimate=!0,this.isInitalExpand=!1,(!this.isLoaded||this.isFieldChange)&&!this.isNodeDropped){var t={data:this.treeData};this.trigger("dataBound",t)}this.isLoaded=!0,this.isNodeDropped=!1},e.prototype.doSelectionAction=function(){var t=z("."+rT,this.element),e=this.selectedNodes;if(e.length>0){this.setProperties({selectedNodes:[]},!0);for(var i=0;i<e.length;i++){var n=A('[data-uid="'+e[i]+'"]',this.element);if(n&&!n.classList.contains("e-active")?this.selectNode(n,null,!0):this.selectedNodes.push(e[i]),!this.allowMultiSelection)break}}else this.selectGivenNodes(t);x(t,rT)},e.prototype.selectGivenNodes=function(t){for(var e=0;e<t.length&&(t[e].classList.contains("e-disable")||this.selectNode(t[e],null,!0),this.allowMultiSelection);e++);},e.prototype.clickHandler=function(t){var e=Np.isDevice&&!Np.isIos?document.elementFromPoint(t.originalEvent.changedTouches[0].clientX,t.originalEvent.changedTouches[0].clientY):t.originalEvent.target;if(Ep.remove(this.element,"contextmenu",this.preventContextMenu),e&&!this.dragStartAction){var i=e.classList,n=j(e,"."+YD);if(n&&(!n.classList.contains(pT)||i.contains(FD)||i.contains(_D))){if(3!==t.originalEvent.which){var r=A(".e-ripple-element",n),o=A(".e-icons",n);if(this.removeHover(),this.setFocusElement(n),this.showCheckBox&&!n.classList.contains("e-disable")){var s=j(e,"."+lT);if(!h(s)){var a=A(".e-frame",s);return this.validateCheckNode(s,a.classList.contains(sT),n,t.originalEvent),void this.triggerClickEvent(t.originalEvent,n)}}i.contains(FD)?this.expandAction(n,e,t):i.contains(_D)?this.collapseNode(n,e,t):r&&o?o.classList.contains("e-ripple")&&o.classList.contains(FD)?this.expandAction(n,o,t):o.classList.contains("e-ripple")&&o.classList.contains(_D)?this.collapseNode(n,o,t):i.contains(QD)||i.contains(YD)||this.toggleSelect(n,t.originalEvent,!1):i.contains(QD)||i.contains(YD)||this.toggleSelect(n,t.originalEvent,!1)}3===t.originalEvent.which&&(this.isRightClick=!0),this.triggerClickEvent(t.originalEvent,n)}}},e.prototype.nodeCheckedEvent=function(t,e,i){j(t,"."+YD);var n=this.getCheckEvent(t,e?"uncheck":"check",i);n.data=n.data.splice(0,n.data.length-1),this.trigger("nodeChecked",n)},e.prototype.triggerClickEvent=function(t,e){var i={event:t,node:e};this.trigger("nodeClicked",i)},e.prototype.expandNode=function(t,e,i){var n=this;if(this.renderReactTemplates(),e.classList.contains(GD)&&this.hideSpinner(e),this.initialRender||e.classList.add("interaction"),!0!==i||!0===i&&t.classList.contains("e-expanded")){if(!0!==this.preventExpand){x([e],FD),I([e],_D);var r=0,o=0,s=this,a=A("."+QD,t),l=t;this.setHeight(l,a);var c=A("."+YD+"."+qD,t);this.isAnimate&&!this.isRefreshed?this.aniObj.animate(a,{name:this.animation.expand.effect,duration:this.animation.expand.duration,timingFunction:this.animation.expand.easing,begin:function(e){l.style.overflow="hidden",!h(c)&&c instanceof HTMLElement&&c.classList.add(dT),r=l.offsetHeight,o=A("."+KD,t).offsetHeight},progress:function(t){t.element.style.display="block",s.animateHeight(t,r,o)},end:function(t){t.element.style.display="block",!h(c)&&c instanceof HTMLElement&&c.classList.remove(dT),n.expandedNode(l,a,e)}}):this.expandedNode(l,a,e)}}else{A("."+QD,t).style.display="none",this.fields.dataSource instanceof ox==!0&&(this.preventExpand=!1)}this.initialRender&&e.classList.add("interaction")},e.prototype.expandedNode=function(t,e,i){e.style.display="block",t.style.display="block",t.style.overflow="",t.style.height="",x([i],ZD),this.addExpand(t),this.allowTextWrap&&this.isLoaded&&this.isFirstRender&&(this.updateWrap(t),this.isFirstRender=!1),this.isLoaded&&this.expandArgs&&!this.isRefreshed&&(this.expandArgs=this.getExpandEvent(t,null),this.expandArgs.isInteracted=this.isInteracted,this.trigger("nodeExpanded",this.expandArgs))},e.prototype.addExpand=function(t){t.setAttribute("aria-expanded","true"),x([t],"e-node-collapsed");var e=t.getAttribute("data-uid");h(e)||-1!==this.expandedNodes.indexOf(e)||this.expandedNodes.push(e)},e.prototype.collapseNode=function(t,e,i){var n=this;if(!e.classList.contains(ZD)){I([e],ZD);var r;this.isLoaded?(r=this.getExpandEvent(t,i),this.isInteracted=r.isInteracted,this.trigger("nodeCollapsing",r,function(i){i.cancel?x([e],ZD):n.nodeCollapseAction(t,e,i)})):this.nodeCollapseAction(t,e,r)}},e.prototype.nodeCollapseAction=function(t,e,i){var n=this;x([e],_D),I([e],FD);var r=0,o=0,s=this,a=A("."+QD,t),l=t,c=A("."+YD+"."+qD,t);this.isAnimate?this.aniObj.animate(a,{name:this.animation.collapse.effect,duration:this.animation.collapse.duration,timingFunction:this.animation.collapse.easing,begin:function(e){l.style.overflow="hidden",!h(c)&&c instanceof HTMLElement&&c.classList.add(dT),r=A("."+KD,t).offsetHeight,o=l.offsetHeight},progress:function(t){s.animateHeight(t,r,o)},end:function(t){t.element.style.display="none",!h(c)&&c instanceof HTMLElement&&c.classList.remove(dT),n.collapsedNode(l,a,e,i)}}):this.collapsedNode(l,a,e,i)},e.prototype.collapsedNode=function(t,e,i,n){e.style.display="none",t.style.overflow="",t.style.height="",x([i],ZD),this.removeExpand(t),this.isLoaded&&((n=this.getExpandEvent(t,null)).isInteracted=this.isInteracted,this.trigger("nodeCollapsed",n))},e.prototype.removeExpand=function(t,e){e?t.removeAttribute("aria-expanded"):this.disableExpandAttr(t);var i=this.expandedNodes.indexOf(t.getAttribute("data-uid"));i>-1&&this.expandedNodes.splice(i,1)},e.prototype.disableExpandAttr=function(t){t.setAttribute("aria-expanded","false"),I([t],"e-node-collapsed")},e.prototype.setHeight=function(t,e){e.style.display="block",e.style.visibility="hidden",t.style.height=t.offsetHeight+"px",e.style.display="none",e.style.visibility=""},e.prototype.animateHeight=function(t,e,i){var n=(i-e)*((t.duration-t.timeStamp)/t.duration)+e;t.element.parentElement.style.height=n+"px"},e.prototype.renderChildNodes=function(t,e,i,n){var r=this,o=A("div.e-icons",t);if(!h(o)){this.showSpinner(o);var s;if(this.fields.dataSource instanceof ox){var a=this.parents(t,"."+QD).length,l=this.getChildFields(this.fields,a,1);if(h(l)||h(l.dataSource))return T(o),void this.removeExpand(t,!0);this.treeList.push("false"),this.fields.dataSource instanceof ox&&this.isOffline?(this.treeList.pop(),s=this.getChildNodes(this.treeData,t.getAttribute("data-uid")),this.loadChild(s,l,o,t,e,i,n)):l.dataSource.executeQuery(this.getQuery(l,t.getAttribute("data-uid"))).then(function(a){r.treeList.pop(),s=a.result,1===r.dataType&&(r.dataType=2),r.loadChild(s,l,o,t,e,i,n)}).catch(function(t){r.trigger("actionFailure",{error:t})})}else{if(s=this.getChildNodes(this.treeData,t.getAttribute("data-uid")),this.currentLoadData=this.getSortedData(s),h(s)||0===s.length)return T(o),void this.removeExpand(t,!0);this.listBaseOption.ariaAttributes.level=parseFloat(t.getAttribute("aria-level"))+1,t.appendChild(uy.createList(this.createElement,this.currentLoadData,this.listBaseOption)),this.expandNode(t,o,n),this.setSelectionForChildNodes(s),this.ensureCheckNode(t),this.finalizeNode(t),this.disableTreeNodes(s),this.renderSubChild(t,e,n)}}},e.prototype.loadChild=function(t,e,i,n,o,s,a){if(this.currentLoadData=t,h(t)||0===t.length)T(i),this.removeExpand(n,!0);else{if(this.updateListProp(e),this.fields.dataSource instanceof ox&&!this.isOffline){var l=n.getAttribute("data-uid");r("child",t,this.getNodeObject(l))}this.listBaseOption.ariaAttributes.level=parseFloat(n.getAttribute("aria-level"))+1,n.appendChild(uy.createList(this.createElement,t,this.listBaseOption)),this.expandNode(n,i,a),this.setSelectionForChildNodes(t),this.ensureCheckNode(n),this.finalizeNode(n),this.disableTreeNodes(t),this.renderSubChild(n,o,a)}s&&s(),0!==this.treeList.length||this.isLoaded||this.finalize()},e.prototype.disableTreeNodes=function(t){for(var e=0;e<t.length;){var i=t[e][this.fields.id]?t[e][this.fields.id].toString():null;void 0!==this.disableNode&&-1!==this.disableNode.indexOf(i)&&this.doDisableAction([i]),e++}},e.prototype.setSelectionForChildNodes=function(t){var e;for(e=0;e<t.length;e++){var i=t[e][this.fields.id]?t[e][this.fields.id].toString():null;void 0!==this.selectedNodes&&-1!==this.selectedNodes.indexOf(i)&&this.doSelectionAction()}},e.prototype.ensureCheckNode=function(t){this.showCheckBox&&(this.ele=this.checkedElement?this.checkedElement.indexOf(t.getAttribute("data-uid")):null,this.autoCheck&&(this.ensureChildCheckState(t),this.ensureParentCheckState(t))),this.currentLoadData=null},e.prototype.getFields=function(t,e,i){return e===i?t:this.getFields(this.getChildMapper(t),e,i+1)},e.prototype.getChildFields=function(t,e,i){return e===i?this.getChildMapper(t):this.getChildFields(this.getChildMapper(t),e,i+1)},e.prototype.getChildMapper=function(t){return"string"==typeof t.child||h(t.child)?t:t.child},e.prototype.getChildNodes=function(t,e,i){var r=this;void 0===i&&(i=!1);var o;if(h(t))return o;if(1===this.dataType)return this.getChildGroup(this.groupedData,e,i);if("string"==typeof this.fields.child){var s=t.findIndex(function(t){return t[r.fields.id]&&t[r.fields.id].toString()===e});if(-1!==s)return n(this.fields.child,t[s]);if(-1===s)for(var a=0,l=t.length;a<l;a++){var c=n(this.fields.child,t[a]),d=h(c)?-1:c.findIndex(function(t){return t[r.fields.id]&&t[r.fields.id].toString()===e});if(-1!==d)return n(this.fields.child,c[d]);if(!h(c)&&void 0!==(o=this.getChildNodes(c,e)))break}}return o},e.prototype.getChildGroup=function(t,e,i){if(!h(t))for(var r=0,o=t.length;r<o;r++){if(h(t[r][0])||h(n(this.fields.parentID,t[r][0])))return i?t[r]:[];if(n(this.fields.parentID,t[r][0]).toString()===e)return t[r]}},e.prototype.renderSubChild=function(t,e,i){if(e)for(var n=z("."+FD,t),r=0,o=n.length;r<o;r++){var s=n[r];if(t.querySelector(".e-icons")!==n[r]){var a=j(s,"."+YD);this.expandArgs=this.getExpandEvent(a,null),!0!==i&&this.trigger("nodeExpanding",this.expandArgs),this.renderChildNodes(a,e,null,i)}}},e.prototype.toggleSelect=function(t,e,i){t.classList.contains("e-disable")||(this.allowMultiSelection&&(e&&e.ctrlKey||i)&&this.isActive(t)?this.unselectNode(t,e):this.selectNode(t,e,i))},e.prototype.isActive=function(t){return!!t.classList.contains(qD)},e.prototype.selectNode=function(t,e,i){var n=this;if(h(t)||!this.allowMultiSelection&&this.isActive(t)&&!h(e))this.setFocusElement(t);else{var r;this.isLoaded?(r=this.getSelectEvent(t,"select",e),this.trigger("nodeSelecting",r,function(r){r.cancel||r.node.classList.contains(pT)||n.nodeSelectAction(t,e,r,i)})):this.nodeSelectAction(t,e,r,i)}},e.prototype.nodeSelectAction=function(t,e,i,n){if(this.allowMultiSelection&&(n||e&&(!e||e.ctrlKey))||this.removeSelectAll(),this.allowMultiSelection&&e&&e.shiftKey){this.startNode||(this.startNode=t);var r=this.liList.indexOf(this.startNode),o=this.liList.indexOf(t);if(r>o){var s=r;r=o,o=s}for(var a=r;a<=o;a++){var l=this.liList[a];C(l)&&!l.classList.contains("e-disable")&&this.addSelect(l)}}else this.startNode=t,this.addSelect(t);this.isLoaded&&(i.nodeData=this.getNodeData(t),this.trigger("nodeSelected",i),this.isRightClick=!1),this.isRightClick=!1},e.prototype.unselectNode=function(t,e){var i,n=this;this.isLoaded?(i=this.getSelectEvent(t,"un-select",e),this.trigger("nodeSelecting",i,function(e){e.cancel||n.nodeUnselectAction(t,e)})):this.nodeUnselectAction(t,i)},e.prototype.nodeUnselectAction=function(t,e){this.removeSelect(t),this.setFocusElement(t),this.isLoaded&&(e.nodeData=this.getNodeData(t),this.trigger("nodeSelected",e))},e.prototype.setFocusElement=function(t){if(!h(t)){var e=this.getFocusedNode();e&&(x([e],cT),e.setAttribute("tabindex","-1")),I([t],cT),t.setAttribute("tabindex","0"),Ep.add(t,"blur",this.focusOut,this),this.updateIdAttr(e,t)}},e.prototype.addSelect=function(t){t.setAttribute("aria-selected","true"),I([t],qD);var e=t.getAttribute("data-uid");h(e)||-1!==this.selectedNodes.indexOf(e)||this.selectedNodes.push(e)},e.prototype.removeSelect=function(t){this.allowMultiSelection?t.setAttribute("aria-selected","false"):t.removeAttribute("aria-selected"),x([t],qD);var e=this.selectedNodes.indexOf(t.getAttribute("data-uid"));e>-1&&this.selectedNodes.splice(e,1)},e.prototype.removeSelectAll=function(){for(var t=this.element.querySelectorAll("."+qD),e=0,i=t;e<i.length;e++){var n=i[e];this.allowMultiSelection?n.setAttribute("aria-selected","false"):n.removeAttribute("aria-selected")}x(t,qD),this.setProperties({selectedNodes:[]},!0)},e.prototype.getSelectEvent=function(t,e,i){var n=this.getNodeData(t);return{action:e,cancel:!1,isInteracted:!h(i),node:t,nodeData:n}},e.prototype.setExpandOnType=function(){this.expandOnType="Auto"===this.expandOn?Np.isDevice?"Click":"DblClick":this.expandOn},e.prototype.expandHandler=function(t){var e=t.originalEvent.target;!e||e.classList.contains("e-input")||e.classList.contains(VD)||e.classList.contains(QD)||e.classList.contains(YD)||e.classList.contains($D)||this.showCheckBox&&j(e,"."+lT)||this.expandCollapseAction(j(e,"."+YD),t)},e.prototype.expandCollapseAction=function(t,e){var i=A("div.e-icons",t);if(i&&!i.classList.contains(ZD)){var n=i.classList;n.contains(FD)?this.expandAction(t,i,e):n.contains(_D)&&this.collapseNode(t,i,e)}},e.prototype.expandAction=function(t,e,i,n,r){var o=this;e.classList.contains(ZD)||(I([e],ZD),this.isLoaded&&!this.isRefreshed?(this.expandArgs=this.getExpandEvent(t,i),this.isInteracted=this.expandArgs.isInteracted,this.trigger("nodeExpanding",this.expandArgs,function(i){i.cancel?x([e],ZD):o.nodeExpandAction(t,e,n,r)})):this.nodeExpandAction(t,e,n,r))},e.prototype.nodeExpandAction=function(t,e,i,n){var r=A("."+QD,t);if(r&&"UL"===r.nodeName)this.expandNode(t,e);else{this.isFirstRender=!0,this.renderChildNodes(t,i,n);for(var o=z("."+YD,t),s=0;s<o.length;s++){var a=this.getId(o[s]);if(-1!==this.expandChildren.indexOf(a)&&void 0!==this.expandChildren){var l=A("."+FD,A("."+KD,o[s]));h(l)||this.expandAction(o[s],l,null),this.expandChildren.splice(this.expandChildren.indexOf(a),1)}}}},e.prototype.keyActionHandler=function(t){var e=this,i=t.target,n=this.getFocusedNode();if(i&&i.classList.contains("e-input")){var r=i;"enter"===t.action?r.blur():"escape"===t.action&&(r.value=this.oldText,r.blur())}else{t.preventDefault();var o={cancel:!1,event:t,node:n};this.trigger("keyPress",o,function(i){if(!i.cancel)switch(t.action){case"space":e.showCheckBox?e.checkNode(t):e.toggleSelect(n,t);break;case"moveRight":e.openNode(!e.enableRtl,t);break;case"moveLeft":e.openNode(!!e.enableRtl,t);break;case"shiftDown":e.shiftKeySelect(!0,t);break;case"moveDown":case"ctrlDown":case"csDown":e.navigateNode(!0);break;case"shiftUp":e.shiftKeySelect(!1,t);break;case"moveUp":case"ctrlUp":case"csUp":e.navigateNode(!1);break;case"home":case"shiftHome":case"ctrlHome":case"csHome":e.navigateRootNode(!0);break;case"end":case"shiftEnd":case"ctrlEnd":case"csEnd":e.navigateRootNode(!1);break;case"enter":case"ctrlEnter":case"shiftEnter":case"csEnter":case"shiftSpace":case"ctrlSpace":e.toggleSelect(n,t);break;case"f2":e.allowEditing&&!n.classList.contains("e-disable")&&e.createTextbox(n,t);break;case"ctrlA":if(e.allowMultiSelection){var r=z(".e-list-item:not(.e-active)",e.element);e.selectGivenNodes(r)}}})}},e.prototype.navigateToFocus=function(t){var e=this.getFocusedNode().querySelector("."+KD),i=e.getBoundingClientRect(),n=this.getScrollParent(this.element);if(!h(n)){var r=n.getBoundingClientRect();i.bottom>r.bottom?n.scrollTop+=i.bottom-r.bottom:i.top<r.top&&(n.scrollTop-=r.top-i.top)}this.isVisibleInViewport(e)||e.scrollIntoView(t)},e.prototype.isVisibleInViewport=function(t){var e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)},e.prototype.getScrollParent=function(t){return h(t)?null:t.scrollHeight>t.clientHeight?t:this.getScrollParent(t.parentElement)},e.prototype.shiftKeySelect=function(t,e){if(this.allowMultiSelection){var i=this.getFocusedNode(),n=t?this.getNextNode(i):this.getPrevNode(i);this.removeHover(),this.setFocusElement(n),this.toggleSelect(n,e,!1),this.navigateToFocus(!t)}else this.navigateNode(t)},e.prototype.checkNode=function(t){var e=this.getFocusedNode(),i=A("."+lT,e),n=A(" .e-frame",i).classList.contains(sT);e.classList.contains("e-disable")||0==e.getElementsByClassName("e-checkbox-disabled").length&&this.validateCheckNode(i,n,e,t)},e.prototype.validateCheckNode=function(t,e,i,n){var r=this,o=j(t,"."+YD);this.checkActionNodes=[];var s=e?"false":"true";h(s)||t.setAttribute("aria-checked",s);var a=this.getCheckEvent(o,e?"uncheck":"check",n);this.trigger("nodeChecking",a,function(o){o.cancel||r.nodeCheckingAction(t,e,i,o,n)})},e.prototype.nodeCheckingAction=function(t,e,i,n,r){if(-1===this.checkedElement.indexOf(i.getAttribute("data-uid"))&&(this.checkedElement.push(i.getAttribute("data-uid")),this.autoCheck)){var o=this.getChildNodes(this.treeData,i.getAttribute("data-uid"));null!==o?this.allCheckNode(o,this.checkedElement,null,null,!1):o=null}if(this.changeState(t,e?"uncheck":"check",r,!0),this.autoCheck){this.ensureChildCheckState(i),this.ensureParentCheckState(j(j(i,"."+QD),"."+YD));var s=void 0;"check"===n.action?s=!0:"uncheck"===n.action&&(s=!1),this.ensureStateChange(i,s)}this.nodeCheckedEvent(t,e,r)},e.prototype.ensureStateChange=function(t,e){var i=A("."+QD,t),n=t.getAttribute("data-uid"),r=this.fields;if(1===this.dataType&&this.autoCheck)for(var o=new ox(this.treeData).executeLocal((new QI).where(r.parentID,"equal",n,!0)),s=0;s<o.length;s++){var a=o[s][this.fields.id]?o[s][this.fields.id].toString():null,l=o[s][this.fields.isChecked]?o[s][this.fields.isChecked].toString():null;if(-1!==this.checkedNodes.indexOf(n)&&-1===this.checkedNodes.indexOf(a)){this.checkedNodes.push(a);var h=this.getChildNodes(this.treeData,a);this.getChildItems(h,e),-1!==this.parentNodeCheck.indexOf(a)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(a),1)}else if(-1===this.checkedNodes.indexOf(n)&&null===i&&-1!==this.checkedNodes.indexOf(a)){if(this.checkedNodes.splice(this.checkedNodes.indexOf(a),1),"true"===l&&this.updateField(this.treeData,this.fields,a,"isChecked",null),-1===this.checkedNodes.indexOf(n)&&null===i||-1!==this.parentNodeCheck.indexOf(a)){var c=this.getChildNodes(this.treeData,a);this.getChildItems(c,e),-1!==this.parentNodeCheck.indexOf(a)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(a),1)}}else{h=this.getChildNodes(this.treeData,a);this.getChildItems(h,e)}}else if(1!==this.dataType||this.autoCheck){(h=this.getChildNodes(this.treeData,n))&&this.childStateChange(h,n,i,e)}else if(e)for(s=0;s<this.treeData.length;s++){var d=this.treeData[s][this.fields.id]?this.treeData[s][this.fields.id].toString():null;-1===this.checkedNodes.indexOf(d)&&this.checkedNodes.push(d)}else{for(var p=new ox(this.treeData).executeLocal((new QI).where(r.isChecked,"equal",!0,!1)),s=0;s<p.length;s++){var u=p[s][this.fields.id]?p[s][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(u)&&this.checkedNodes.splice(this.checkedNodes.indexOf(u),1),this.updateField(this.treeData,this.fields,u,"isChecked",null)}this.checkedNodes=[]}},e.prototype.getChildItems=function(t,e){for(var i=0;i<t.length;i++){var n=t[i][this.fields.id]?t[i][this.fields.id].toString():null,r=t[i][this.fields.isChecked]?t[i][this.fields.isChecked].toString():null;-1===this.checkedNodes.indexOf(n)||e||this.checkedNodes.splice(this.checkedNodes.indexOf(n),1),-1===this.checkedNodes.indexOf(n)&&e&&this.checkedNodes.push(n),"true"!==r||e||this.updateField(this.treeData,this.fields,n,"isChecked",null);var o=this.getChildNodes(this.treeData,n);o.length>0&&this.getChildItems(o,e)}},e.prototype.childStateChange=function(t,e,i,n){for(var r=0;r<t.length;r++){var o=t[r][this.fields.id]?t[r][this.fields.id].toString():"",s=t[r][this.fields.isChecked]?t[r][this.fields.isChecked].toString():null;this.autoCheck?-1!==this.checkedNodes.indexOf(e)&&-1===this.checkedNodes.indexOf(o)?(this.checkedNodes.push(o),-1!==this.parentNodeCheck.indexOf(o)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(o),1)):-1!==this.checkedNodes.indexOf(e)||-1===this.checkedNodes.indexOf(o)||n||(this.checkedNodes.splice(this.checkedNodes.indexOf(o),1),"true"===s&&this.updateField(this.treeData,this.fields,o,"isChecked",null)):this.autoCheck||(n?-1===this.checkedNodes.indexOf(o)&&this.checkedNodes.push(o):(-1!==this.checkedNodes.indexOf(o)&&this.checkedNodes.splice(this.checkedNodes.indexOf(o),1),this.updateField(this.treeData,this.fields,o,"isChecked",null),this.checkedNodes=[]));var a=this.getChildNodes([t[r]],o);a&&this.childStateChange(a,e,i,n)}},e.prototype.allCheckNode=function(t,e,i,r,o){if(t)for(var s=0;s<t.length;s++){var a=n(this.fields.id,t[s]),l=this.element.querySelector('[data-uid="'+a+'"]');!1!==o&&-1===this.checkedElement.indexOf(a.toString())&&(null===l&&!h(t[s][this.fields.isChecked])&&-1===e.indexOf(a.toString())||0===r||2===i)&&(!1!==t[s][this.fields.isChecked]||2===i?e.push(a.toString()):r=null,r=!1!==t[s][this.fields.isChecked]||2===i?0:null),-1===e.indexOf(a.toString())&&h(i)&&e.push(a.toString());var c=n(this.fields.child.toString(),t[s]);if(!0===n(this.fields.hasChildren,t[s])||c){var d=n(this.fields.id,t[s]),p=void 0;(p=1===this.dataType?this.getChildNodes(this.treeData,d.toString()):c)&&(h(o)?this.allCheckNode(p,e,i,r):this.allCheckNode(p,e,i,r,o),r=null)}r=null}},e.prototype.openNode=function(t,e){var i=this.getFocusedNode(),n=A("div.e-icons",i);if(t){if(!n)return;n.classList.contains(FD)?this.expandAction(i,n,e):this.focusNextNode(i,!0)}else if(n&&n.classList.contains(_D))this.collapseNode(i,n,e);else{var r=j(j(i,"."+QD),"."+YD);if(!r)return;r.classList.contains("e-disable")||(this.setFocus(i,r),this.navigateToFocus(!0))}},e.prototype.navigateNode=function(t){var e=this.getFocusedNode();this.focusNextNode(e,t)},e.prototype.navigateRootNode=function(t){var e=this.getFocusedNode(),i=t?this.getRootNode():this.getEndNode();i.classList.contains("e-disable")||(this.setFocus(e,i),this.navigateToFocus(t))},e.prototype.getFocusedNode=function(){var t,e=A("."+YD+'[tabindex="0"]',this.element);return h(e)&&(t=A("."+YD,this.element)),h(e)?h(t)?this.element.firstElementChild:t:e},e.prototype.focusNextNode=function(t,e){var i=e?this.getNextNode(t):this.getPrevNode(t);if(this.setFocus(t,i),this.navigateToFocus(!e),i.classList.contains("e-disable")){var n=i.lastChild;null==i.previousSibling&&i.classList.contains("e-level-1")?this.focusNextNode(i,!0):null==i.nextSibling&&i.classList.contains("e-node-collapsed")?this.focusNextNode(i,!1):null==i.nextSibling&&n.classList.contains(KD)?this.focusNextNode(i,!1):this.focusNextNode(i,e)}},e.prototype.getNextNode=function(t){var e,i=this.liList.indexOf(t);do{if(i++,e=this.liList[i],h(e))return t}while(!C(e));return e},e.prototype.getPrevNode=function(t){var e,i=this.liList.indexOf(t);do{if(i--,e=this.liList[i],h(e))return t}while(!C(e));return e},e.prototype.getRootNode=function(){var t,e=0;do{t=this.liList[e],e++}while(!C(t));return t},e.prototype.getEndNode=function(){var t,e=this.liList.length-1;do{t=this.liList[e],e--}while(!C(t));return t},e.prototype.setFocus=function(t,e){x([t],[XD,cT]),t.setAttribute("tabindex","-1"),e.classList.contains("e-disable")||e.classList.contains(pT)||(I([e],[XD,cT]),e.setAttribute("tabindex","0"),e.focus(),Ep.add(e,"blur",this.focusOut,this),this.updateIdAttr(t,e))},e.prototype.updateIdAttr=function(t,e){this.element.removeAttribute("aria-activedescendant"),t&&t.removeAttribute("id"),e.setAttribute("id",this.element.id+"_active"),this.element.setAttribute("aria-activedescendant",this.element.id+"_active")},e.prototype.focusIn=function(){if(!this.mouseDownStatus){var t=this.getFocusedNode();t.setAttribute("tabindex","0"),I([t],[XD,cT]),Ep.add(t,"blur",this.focusOut,this)}this.mouseDownStatus=!1},e.prototype.focusOut=function(t){var e=this.getFocusedNode();t.target==e&&(x([e],[XD,cT]),Ep.remove(e,"blur",this.focusOut))},e.prototype.onMouseOver=function(t){var e=t.target,i=e.classList,n=j(e,"."+YD);!n||i.contains(QD)||i.contains(YD)?this.removeHover():n&&!n.classList.contains("e-disable")&&this.setHover(n)},e.prototype.setHover=function(t){t.classList.contains(XD)||t.classList.contains(pT)||(this.removeHover(),I([t],XD))},e.prototype.onMouseLeave=function(t){this.removeHover()},e.prototype.removeHover=function(){var t=z(".e-hover",this.element);t&&t.length&&x(t,XD)},e.prototype.getNodeData=function(t,e){if(!h(t)&&t.classList.contains(YD)&&!h(j(t,".e-control"))&&j(t,".e-control").classList.contains(VD)){var i=t.getAttribute("data-uid"),n=this.getText(t,e),r=j(t.parentNode,"."+YD),o=r?r.getAttribute("data-uid"):null,s=t.classList.contains(qD),a=!t.classList.contains(pT),l="true"===t.getAttribute("aria-expanded"),c=null!==t.getAttribute("aria-expanded")||null!=(A("."+FD,t)||A("."+_D,t)),d=null,p=A("."+lT,t);return this.showCheckBox&&p&&(d=p.getAttribute("aria-checked")),{id:i,text:n,parentID:o,selected:s,selectable:a,expanded:l,isChecked:d,hasChildren:c}}return{id:"",text:"",parentID:"",selected:!1,expanded:!1,isChecked:"",hasChildren:!1}},e.prototype.getText=function(t,e){if(e){var i=this.getNodeObject(t.getAttribute("data-uid")),r=parseFloat(t.getAttribute("aria-level"));return n(this.getFields(this.fields,r,1).text,i)}return A("."+WD,t).textContent},e.prototype.getExpandEvent=function(t,e){var i=this.getNodeData(t);return{cancel:!1,isInteracted:!h(e),node:t,nodeData:i,event:e}},e.prototype.renderNodeTemplate=function(t,e,i){var n=this.nodeTemplateFn(t,this,"nodeTemplate"+i,this.element.id+"nodeTemplate",this.isStringTemplate,void 0,e,this.root);n&&E(n=Array.prototype.slice.call(n),e)},e.prototype.destroyTemplate=function(t){this.clearTemplate(["nodeTemplate"+t.getAttribute("data-uid")])},e.prototype.reRenderNodes=function(){this.updateListProp(this.fields),Np.isIE?(this.ulElement=this.element.querySelector(".e-list-parent.e-ul"),this.ulElement.parentElement.removeChild(this.ulElement)):this.element.innerHTML="",h(this.nodeTemplateFn)||this.clearTemplate(),this.setTouchClass(),this.setProperties({selectedNodes:[],checkedNodes:[],expandedNodes:[]},!0),this.checkedElement=[],this.isLoaded=!1,this.setDataBinding(!0)},e.prototype.setCssClass=function(t,e){h(t)||""===t||x([this.element],t.split(" ")),h(e)||""===e||I([this.element],e.split(" "))},e.prototype.editingHandler=function(t){var e=t.target;if(!(!e||e.classList.contains(VD)||e.classList.contains(QD)||e.classList.contains(YD)||e.classList.contains($D)||e.classList.contains("e-input")||e.classList.contains("e-input-group"))){var i=j(e,"."+YD);this.createTextbox(i,t)}},e.prototype.createTextbox=function(t,e){var i=this,n=A("."+JD,this.element);n&&n.blur();var r=A("."+WD,t);this.updateOldText(t);var o=this.createElement("input",{className:JD,attrs:{value:this.oldText}}),s=this.getEditEvent(t,null,o.outerHTML);this.trigger("nodeEditing",s,function(e){if(!e.cancel){var n="width:"+(r.offsetWidth+5)+"px";I([t],"e-editing"),h(i.nodeTemplateFn)||i.destroyTemplate(t),i.isReact?setTimeout(function(){i.renderTextBox(s,r,n)},5):i.renderTextBox(s,r,n)}})},e.prototype.renderTextBox=function(t,e,i){e.innerHTML=t.innerHtml;var n=A("."+JD,e);this.inputObj=zx.createInput({element:n,properties:{enableRtl:this.enableRtl}},this.createElement),this.inputObj.container.setAttribute("style",i),n.focus();var r=n;r.setSelectionRange(0,r.value.length),this.wireInputEvents(n)},e.prototype.updateOldText=function(t){var e=t.getAttribute("data-uid");this.editData=this.getNodeObject(e);var i=parseFloat(t.getAttribute("aria-level"));this.editFields=this.getFields(this.fields,i,1),this.oldText=n(this.editFields.text,this.editData)},e.prototype.inputFocusOut=function(t){if(A("."+JD,this.element)){var e=t.target,i=e.value,n=j(e,"."+WD),r=j(e,"."+YD);T(this.inputObj.container),this.fields.dataSource instanceof ox&&!this.isOffline?this.crudOperation("update",null,r,i,null,null,!0):this.appendNewText(r,n,i,!0)}},e.prototype.appendNewText=function(t,e,i,n){var r=this,o=this.getEditEvent(t,i,null);this.trigger("nodeEdited",o,function(o){i=o.cancel?o.oldText:o.newText,r.updateText(t,e,i,n),o.oldText!==i&&r.triggerEvent("nodeEdited",[r.getNode(t)])})},e.prototype.updateText=function(t,e,i,n){var o=r(this.editFields.text,i,this.editData);if(h(this.nodeTemplateFn))this.enableHtmlSanitizer?e.innerText=i:e.innerHTML=i;else{e.innerText="";var s=t.getAttribute("data-uid");this.renderNodeTemplate(o,e,s),this.renderReactTemplates()}n&&(x([t],"e-editing"),t.focus(),Ep.add(t,"blur",this.focusOut,this),I([t],XD)),this.allowTextWrap&&this.calculateWrap(t)},e.prototype.getElement=function(t){return h(t)?null:"string"==typeof t?this.element.querySelector('[data-uid="'+t+'"]'):"object"==typeof t?v(t):null},e.prototype.getId=function(t){return h(t)?null:"string"==typeof t?t:"object"==typeof t?v(t).getAttribute("data-uid"):null},e.prototype.getEditEvent=function(t,e,i){return{cancel:!1,newText:e,node:t,nodeData:this.getNodeData(t),oldText:this.oldText,innerHtml:i}},e.prototype.getNodeObject=function(t){if(!h(t)){if(1!==this.dataType)return this.getChildNodeObject(this.treeData,this.fields,t);for(var e=0,i=this.treeData.length;e<i;e++){var r=n(this.fields.id,this.treeData[e]);if(!h(this.treeData[e])&&!h(r)&&r.toString()===t)return this.treeData[e]}}},e.prototype.getChildNodeObject=function(t,e,i){var r;if(h(t))return r;for(var o=0,s=t.length;o<s;o++){var a=n(e.id,t[o]);if(t[o]&&a&&a.toString()===i)return t[o];if("string"!=typeof e.child||h(n(e.child,t[o]))){if(this.fields.dataSource instanceof ox&&!h(n("child",t[o]))){if(void 0!==(r=this.getChildNodeObject(n("child",t[o]),this.getChildMapper(e),i)))break}}else{var l=n(e.child,t[o]);if(void 0!==(r=this.getChildNodeObject(l,this.getChildMapper(e),i)))break}}return r},e.prototype.setDragAndDrop=function(t){t&&!this.disabled?this.initializeDrag():this.destroyDrag()},e.prototype.initializeDrag=function(){var t,e=this,i=this;this.dragObj=new ou(this.element,{enableTailMode:!0,enableAutoScroll:!0,dragArea:this.dragArea,dragTarget:"."+KD,helper:function(n){e.dragTarget=n.sender.target;var r=j(e.dragTarget,"."+VD),o=j(e.dragTarget,"."+KD);if(e.dragLi=j(e.dragTarget,"."+YD),e.fullRowSelect&&!o&&e.dragTarget.classList.contains(nT)&&(o=e.dragTarget.nextElementSibling),!e.dragTarget||!n.element.isSameNode(r)||!o||e.dragTarget.classList.contains(VD)||e.dragTarget.classList.contains(QD)||e.dragTarget.classList.contains(YD)||e.dragLi.classList.contains("e-disable"))return!1;var s=o.cloneNode(!0);if(h(A("div.e-icons",s))){var a=i.createElement("div",{className:"e-icons "+FD});s.insertBefore(a,s.children[0])}var l="e-drag-item e-treeview "+e.cssClass+" "+(e.enableRtl?"e-rtl":"");(t=i.createElement("div",{className:l})).appendChild(s);var c=e.selectedNodes.length;if(c>1&&e.allowMultiSelection&&e.dragLi.classList.contains(qD)){var d=i.createElement("span",{className:"e-drop-count",innerHTML:""+c});t.appendChild(d)}return document.body.appendChild(t),document.body.style.cursor="",e.dragData=e.getNodeData(e.dragLi),t},dragStart:function(i){I([e.element],"e-dragging");var n,r=j(i.target,".e-list-item");r&&(n=parseInt(r.getAttribute("aria-level"),10));var o=e.getDragEvent(i.event,e,null,i.target,null,t,n);o.draggedNode.classList.contains("e-editing")?(e.dragObj.intDestroy(i.event),e.dragCancelAction(t)):e.trigger("nodeDragStart",o,function(n){n.cancel?(e.dragObj.intDestroy(i.event),e.dragCancelAction(t)):e.dragStartAction=!0})},drag:function(i){e.dragObj.setProperties({cursorAt:{top:!h(i.event.targetTouches)||Np.isDevice?60:-20}}),e.dragAction(i,t)},dragStop:function(t){x([e.element],"e-dragging"),e.removeVirtualEle();var i=t.target,n=j(i,".e-droppable");i&&n||(T(t.helper),document.body.style.cursor="");var r,o=j(i,".e-list-item");o&&(r=parseInt(o.getAttribute("aria-level"),10));var s=e.getDragEvent(t.event,e,i,i,null,t.helper,r);s.preventTargetExpand=!1,e.trigger("nodeDragStop",s,function(i){e.dragParent=i.draggedParentNode,e.preventExpand=i.preventTargetExpand,i.cancel&&(t.helper.parentNode&&T(t.helper),document.body.style.cursor=""),e.dragStartAction=!1})}}),this.dropObj=new lu(this.element,{out:function(t){!h(t)&&!t.target.classList.contains(tT)&&e.dropObj.dragData.default&&e.dropObj.dragData.default.helper.classList.contains(VD)&&(document.body.style.cursor="not-allowed")},over:function(t){document.body.style.cursor=""},drop:function(t){e.dropAction(t)}})},e.prototype.dragCancelAction=function(t){T(t),x([this.element],"e-dragging"),this.dragStartAction=!1},e.prototype.dragAction=function(t,e){var i=j(t.target,".e-droppable"),n=j(t.target,"."+KD),r=A("div.e-icons",e);x([r],[eT,iT,"e-drop-out","e-no-drop"]),this.removeVirtualEle(),document.body.style.cursor="";var o=t.target.classList;if(this.fullRowSelect&&!n&&!h(o)&&o.contains(nT)&&(n=t.target.nextElementSibling),i){var s=j(t.target,"."+YD),a=j(t.target,"."+lT),l=j(t.target,"."+_D),c=j(t.target,"."+FD);if(!i.classList.contains(VD)||n&&!s.isSameNode(this.dragLi)&&!this.isDescendant(this.dragLi,s))if(this.hasTemplate&&s){var d=A(this.fullRowSelect?"."+nT:"."+KD,s);if(t&&!c&&!l&&t.event.offsetY<7&&!a||c&&t.event.offsetY<5||l&&t.event.offsetX<3){var p=this.fullRowSelect?1:0;this.appendIndicator(s,r,p)}else if(t&&!c&&!l&&!a&&d&&t.event.offsetY>d.offsetHeight-10||c&&t.event.offsetY>19||l&&t.event.offsetX>19){p=this.fullRowSelect?2:1;this.appendIndicator(s,r,p)}else I([r],eT)}else if(s&&t&&!c&&!l&&t.event.offsetY<7&&!a||c&&t.event.offsetY<5||l&&t.event.offsetX<3){p=this.fullRowSelect?1:0;this.appendIndicator(s,r,p)}else if(s&&t&&!c&&!l&&t.target.offsetHeight>0&&t.event.offsetY>t.target.offsetHeight-10&&!a||c&&t.event.offsetY>19||l&&t.event.offsetX>19){p=this.fullRowSelect?2:1;this.appendIndicator(s,r,p)}else I([r],eT);else"LI"!==t.target.nodeName||s.isSameNode(this.dragLi)||this.isDescendant(this.dragLi,s)?t.target.classList.contains(tT)?I([r],iT):I([r],"e-drop-out"):(I([r],iT),this.renderVirtualEle(t))}else I([r],"e-no-drop"),document.body.style.cursor="not-allowed";var u,g=j(t.target,".e-list-item");g&&(u=parseInt(g.getAttribute("aria-level"),10));var m=this.getDragEvent(t.event,this,t.target,t.target,null,e,u);m.dropIndicator&&x([r],m.dropIndicator),this.trigger("nodeDragging",m),m.dropIndicator&&I([r],m.dropIndicator)},e.prototype.appendIndicator=function(t,e,i){I([e],iT);var n=this.createElement("div",{className:tT});t.insertBefore(n,t.children[i])},e.prototype.dropAction=function(t){var e,n,r,o=t.event.offsetY,s=t.target,a=!1,l=[],h=[];r=t.dragData.draggable;for(var c=0;c<r.ej2_instances.length;c++)if(r.ej2_instances[c]instanceof i){e=r.ej2_instances[c];break}if(e&&e.dragTarget){var d=j(e.dragTarget,"."+YD),p=j(s,"."+YD);if(h.push(d),null==p&&s.classList.contains(VD)&&(p=s.firstElementChild),T(t.droppedElement),document.body.style.cursor="",!p||p.isSameNode(d)||this.isDescendant(d,p))return void(this.fields.dataSource instanceof ox==!1&&(this.preventExpand=!1));if(e.allowMultiSelection&&d.classList.contains(qD)){var u=z("."+qD,e.element);if(h=u,t.target.offsetHeight<=33&&o>t.target.offsetHeight-10&&o>6)for(var g=u.length-1;g>=0;g--)p.isSameNode(u[g])||this.isDescendant(u[g],p)||this.appendNode(s,u[g],p,t,e,o);else for(var m=0;m<u.length;m++)p.isSameNode(u[m])||this.isDescendant(u[m],p)||this.appendNode(s,u[m],p,t,e,o)}else this.appendNode(s,d,p,t,e,o);n=parseInt(d.getAttribute("aria-level"),10),a=!0}this.fields.dataSource instanceof ox==!1&&(this.preventExpand=!1);for(var f=0;f<h.length;f++)l.push(this.getNode(h[f]));this.trigger("nodeDropped",this.getDragEvent(t.event,e,s,t.target,t.dragData.draggedElement,null,n,a)),e.element.id!==this.element.id&&(e.triggerEvent("nodeDropped",l),this.isNodeDropped=!0,this.fields.dataSource=this.treeData),this.triggerEvent("nodeDropped",l)},e.prototype.appendNode=function(t,e,i,n,r,o){var s=j(t,"."+lT),a=j(n.target,"."+_D),l=j(n.target,"."+FD);e.classList.contains("e-disable")||s||!(l&&n.event.offsetY<5||a&&n.event.offsetX<3||l&&n.event.offsetY>19||a&&n.event.offsetX>19||!l&&!a)?this.dropAsChildNode(e,i,r,null,n,o,!0):"LI"===t.nodeName?this.dropAsSiblingNode(e,i,n,r):t.firstElementChild&&t.classList.contains(VD)?"UL"===t.firstElementChild.nodeName&&this.dropAsSiblingNode(e,i,n,r):t.classList.contains("e-icon-collapsible")||t.classList.contains("e-icon-expandable")?this.dropAsSiblingNode(e,i,n,r):this.dropAsChildNode(e,i,r,null,n,o)},e.prototype.dropAsSiblingNode=function(t,e,i,n){var r,o=j(e,"."+QD),s=j(t,"."+QD),a=j(s,"."+YD);if(i.target.offsetHeight>0&&i.event.offsetY>i.target.offsetHeight-2?r=!1:i.event.offsetY<2?r=!0:(i.target.classList.contains("e-icon-expandable")||i.target.classList.contains("e-icon-collapsible"))&&(i.event.offsetY<5||i.event.offsetX<3?r=!0:(i.event.offsetY>15||i.event.offsetX>17)&&(r=!1)),i.target.classList.contains("e-icon-expandable")||i.target.classList.contains("e-icon-collapsible")){var l=i.target.closest("li");o.insertBefore(t,r?l:l.nextElementSibling)}else o.insertBefore(t,r?i.target:i.target.nextElementSibling);this.moveData(t,e,o,r,n),this.updateElement(s,a),this.updateAriaLevel(t),n.element.id===this.element.id?this.updateList():(n.updateInstance(),this.updateInstance())},e.prototype.dropAsChildNode=function(t,e,i,n,r,o,s){var a,l=j(t,"."+QD),h=j(l,"."+YD),c=j(e,"."+QD);if(r&&r.target&&(a=A(this.fullRowSelect?"."+nT:"."+KD,e)),r&&o<7&&!s)c.insertBefore(t,e),this.moveData(t,e,c,!0,i);else if(r&&r.target.offsetHeight>0&&o>r.target.offsetHeight-10&&!s&&!this.hasTemplate)c.insertBefore(t,e.nextElementSibling),this.moveData(t,e,c,!1,i);else if(this.hasTemplate&&a&&o>a.offsetHeight-10&&!s)c.insertBefore(t,e.nextElementSibling),this.moveData(t,e,c,!1,i);else{var d=this.expandParent(e),p=d.childNodes[n];d.insertBefore(t,p),this.moveData(t,p,d,!0,i)}this.updateElement(l,h),this.updateAriaLevel(t),i.element.id===this.element.id?this.updateList():(i.updateInstance(),this.updateInstance())},e.prototype.moveData=function(t,e,i,n,o){var s=j(i,"."+YD),a=this.getId(t),l=o.updateChildField(o.treeData,o.fields,a,null,null,!0),c=this.getId(e),d=this.getDataPos(this.treeData,this.fields,c),p=this.getId(s);if(1===this.dataType){this.updateField(this.treeData,this.fields,p,"hasChildren",!0);var u=h(d)?this.treeData.length:n?d:d+1;if(h(p)&&!this.hasPid)delete l[0][this.fields.parentID];else{var g=this.isNumberTypeId?parseFloat(p):p;r(this.fields.parentID,g,l[0])}if(this.treeData.splice(u,0,l[0]),o.element.id!==this.element.id){var m=o.removeChildNodes(a);u++;for(var f=0,v=m.length;f<v;f++)this.treeData.splice(u,0,m[f]),u++;o.groupedData=o.getGroupedData(o.treeData,o.fields.parentID)}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}else this.addChildData(this.treeData,this.fields,p,l,n?d:d+1)},e.prototype.expandParent=function(t){var e=A("div.e-icons",t);e&&e.classList.contains(FD)&&!0!==this.preventExpand&&this.expandAction(t,e,null);var i=A("."+QD,t);if(!0===this.preventExpand&&!i&&e&&this.renderChildNodes(t),i=A("."+QD,t),h(i)||!0!==this.preventExpand||(i.style.display="none"),h(i)||!1!==this.preventExpand||(i.style.display="block"),h(i)&&!0===this.preventExpand){h(e)&&uy.generateIcon(this.createElement,t,FD,this.listBaseOption);(n=A("div.e-icons",t))&&n.classList.add("e-icon-expandable"),i=uy.generateUL(this.createElement,[],null,this.listBaseOption),t.appendChild(i),n?x([n],_D):uy.generateIcon(this.createElement,t,FD,this.listBaseOption),t.setAttribute("aria-expanded","false"),i.style.display="none"}if(h(i)){this.trigger("nodeExpanding",this.getExpandEvent(t,null)),h(e)&&uy.generateIcon(this.createElement,t,_D,this.listBaseOption);var n;(n=A("div.e-icons",t))?x([n],FD):(uy.generateIcon(this.createElement,t,_D,this.listBaseOption),x([n=A("div.e-icons",t)],FD)),i=uy.generateUL(this.createElement,[],null,this.listBaseOption),t.appendChild(i),this.addExpand(t),this.trigger("nodeExpanded",this.getExpandEvent(t,null))}return i},e.prototype.updateElement=function(t,e){if(e&&0===t.childElementCount){var i=A("div.e-icons",e);T(t),T(i);var n=this.getId(e);this.updateField(this.treeData,this.fields,n,"hasChildren",!1),this.removeExpand(e,!0)}},e.prototype.updateAriaLevel=function(t){var e=this.parents(t,"."+QD).length;t.setAttribute("aria-level",""+e),this.updateChildAriaLevel(A("."+QD,t),e+1)},e.prototype.updateChildAriaLevel=function(t,e){if(!h(t))for(var i=t.childNodes,n=0,r=i.length;n<r;n++){var o=i[n];o.setAttribute("aria-level",""+e),this.updateChildAriaLevel(A("."+QD,o),e+1)}},e.prototype.renderVirtualEle=function(t){var e;t.event.offsetY>t.target.offsetHeight-2?e=!1:t.event.offsetY<2&&(e=!0);var i=this.createElement("div",{className:tT}),n=this.fullRowSelect?e?1:2:e?0:1;t.target.insertBefore(i,t.target.children[n])},e.prototype.removeVirtualEle=function(){var t=A("."+tT);t&&T(t)},e.prototype.destroyDrag=function(){this.dragObj&&this.dropObj&&(this.dragObj.destroy(),this.dropObj.destroy())},e.prototype.getDragEvent=function(t,e,i,n,r,o,s,a){var l=i?j(i,"."+YD):null,h=l?this.getNodeData(l):null,c=e?e.dragLi:r,d=e?e.dragData:null,p=i?this.parents(i,"."+YD):null,u=e.dragLi.parentElement,g=e.dragLi?j(u,"."+YD):null,m=null,f=null,v=[iT,eT,"e-drop-out","e-no-drop"],y=null,b=!0===a?c:l,S=b?j(b,".e-list-parent"):null,w=0,I=null;if(g=e.dragLi&&null===g?j(u,"."+VD):g,g=!0===a?this.dragParent:g,o)for(;w<4;){if(A(".e-icons",o).classList.contains(v[w])){y=v[w];break}w++}if(S){var x=0;for(w=0;w<S.childElementCount;w++){if(x=!0!==a&&S.children[w]===c&&l!==c?++x:x,!0!==a&&S.children[w].classList.contains("e-hover")){f=t.offsetY>=23?w+1:w;break}if(S.children[w]===b){t.offsetY,f=w;break}}f=0!==x?--f:f,I="e-drop-in"==y?"Inside":t.offsetY<7?"Before":"After"}if(i&&(m=0===p.length?null:i.classList.contains(YD)?p[0]:p[1]),l===c&&(m=l),i&&n.offsetHeight<=33&&t.offsetY<n.offsetHeight-10&&t.offsetY>6&&(m=l,!0!==a)){s=++s;var M=m?A(".e-list-parent",m):null;if(f=M?M.children.length:0,!(this.fields.dataSource instanceof ox)&&null===M&&m){var C=m.hasAttribute("data-uid")?this.getChildNodes(this.fields.dataSource,m.getAttribute("data-uid").toString()):null;f=C?C.length:0}}return{cancel:!1,clonedNode:o,event:t,draggedNode:c,draggedNodeData:d,droppedNode:l,droppedNodeData:h,dropIndex:f,dropLevel:s,draggedParentNode:g,dropTarget:m,dropIndicator:y,target:n,position:I}},e.prototype.addFullRow=function(t){var e=this.liList.length;if(t)for(var i=0;i<e;i++)this.createFullRow(this.liList[i]);else for(i=0;i<e;i++){T(A("."+nT,this.liList[i]))}},e.prototype.createFullRow=function(t){var e=this.createElement("div",{className:nT});t.insertBefore(e,t.childNodes[0])},e.prototype.addMultiSelect=function(t){if(t)for(var e=0,i=z("."+YD+':not([aria-selected="true"])',this.element);e<i.length;e++){i[e].setAttribute("aria-selected","false")}else for(var n=0,r=z("."+YD+'[aria-selected="false"]',this.element);n<r.length;n++){r[n].removeAttribute("aria-selected")}},e.prototype.collapseByLevel=function(t,e,i){if(e>0&&!h(t))for(var n=this.getVisibleNodes(i,t.childNodes),r=0,o=n.length;r<o;r++){var s=n[r],a=A("."+_D,A("."+KD,s));h(a)||this.collapseNode(s,a,null),this.collapseByLevel(A("."+QD,s),e-1,i)}},e.prototype.collapseAllNodes=function(t){for(var e=this.getVisibleNodes(t,z("."+_D,this.element)),i=0,n=e.length;i<n;i++){var r=e[i],o=j(r,"."+YD);this.collapseNode(o,r,null)}},e.prototype.expandByLevel=function(t,e,i){if(e>0&&!h(t))for(var n=this.getVisibleNodes(i,t.childNodes),r=0,o=n.length;r<o;r++){var s=n[r],a=A("."+FD,A("."+KD,s));h(a)||this.expandAction(s,a,null),this.expandByLevel(A("."+QD,s),e-1,i)}},e.prototype.expandAllNodes=function(t){for(var e=this.getVisibleNodes(t,z("."+FD,this.element)),i=0,n=e.length;i<n;i++){var r=e[i],o=j(r,"."+YD);this.expandAction(o,r,null,!0)}},e.prototype.getVisibleNodes=function(t,e){var i=Array.prototype.slice.call(e);if(t)for(var n=0;n<i.length;n++)C(i[n])||(i.splice(n,1),n--);return i},e.prototype.removeNode=function(t){var e=j(t,"."+QD),i=j(e,"."+YD);h(this.nodeTemplateFn)||this.destroyTemplate(t),T(t),this.updateElement(e,i),this.removeData(t)},e.prototype.updateInstance=function(){this.updateList(),this.updateSelectedNodes(),this.updateExpandedNodes()},e.prototype.updateList=function(){this.liList=Array.prototype.slice.call(z("."+YD,this.element))},e.prototype.updateSelectedNodes=function(){this.setProperties({selectedNodes:[]},!0);var t=z("."+qD,this.element);this.selectGivenNodes(t)},e.prototype.updateExpandedNodes=function(){this.setProperties({expandedNodes:[]},!0);for(var t=z('[aria-expanded="true"]',this.element),e=0,i=t.length;e<i;e++)this.addExpand(t[e])},e.prototype.removeData=function(t){if(1===this.dataType){var e=new ox(this.treeData),i=this.getId(t),n={},r=this.isNumberTypeId?parseFloat(i):i;n[this.fields.id]=r,e.remove(this.fields.id,n),this.removeChildNodes(i)}else{i=this.getId(t);this.updateChildField(this.treeData,this.fields,i,null,null,!0)}},e.prototype.removeChildNodes=function(t){var e=this.getChildGroup(this.groupedData,t,!1),i=[];if(e)for(var r=0,o=e.length;r<o;r++){var s=new ox(this.treeData),a=n(this.fields.id,e[r]).toString(),l={},h=this.isNumberTypeId?parseFloat(a):a;l[this.fields.id]=h;var c=s.remove(this.fields.id,l);i.push(c[0]),this.removeChildNodes(a)}return i},e.prototype.doGivenAction=function(t,e,i){for(var n=0,r=t.length;n<r;n++){var o=this.getElement(t[n]);if(!h(o)){var s=A("."+e,A("."+KD,o));h(s)||(i?this.expandAction(o,s,null):this.collapseNode(o,s,null))}}},e.prototype.addGivenNodes=function(t,e,i,n,o){if(0!==t.length){var s=this.getSortedData(t),a=e?parseFloat(e.getAttribute("aria-level"))+1:1;n&&this.updateMapper(a);var l,c,d=uy.createListItemFromJson(this.createElement,s,this.listBaseOption,a),p=this.getId(e);h(e)||(c=A("div.e-icons",e)),1===this.dataType&&c&&c.classList.contains(FD)&&!h(this.element.offsetParent)&&!this.element.offsetParent.parentElement.classList.contains("e-filemanager")&&(this.preventExpand=!0),1!==this.dataType&&(this.addChildData(this.treeData,this.fields,p,t,i),this.isFirstRender=!1);var u;if(u=o||(e?this.expandParent(e):A("."+QD,this.element)),l=u.childNodes[i],!this.isFirstRender||1===this.dataType){if(l||"None"===this.sortOrder){for(var g=0;g<d.length;g++)u.insertBefore(d[g],l);if(1===this.dataType&&!h(e)&&!h(this.element.offsetParent)&&!this.element.offsetParent.parentElement.classList.contains("e-filemanager")){this.preventExpand=!1;(m=A("div.e-icons",e))&&m.classList.contains(FD)&&this.expandAction(e,m,null)}}if(!l&&("Ascending"===this.sortOrder||"Descending"===this.sortOrder))if(0===u.childNodes.length){for(g=0;g<d.length;g++)u.insertBefore(d[g],l);if(1===this.dataType&&!h(e)&&!h(this.element.offsetParent)&&!this.element.offsetParent.parentElement.classList.contains("e-filemanager")){this.preventExpand=!1;var m;(m=A("div.e-icons",e))&&m.classList.contains(FD)&&this.expandAction(e,m,null)}}else{var f=u.childNodes;for(g=0;g<d.length;g++)for(var v=0;v<f.length;v++){if("Ascending"===this.sortOrder?f[v].textContent.toUpperCase()>d[g].innerText.toUpperCase():f[v].textContent.toUpperCase()<d[g].innerText.toUpperCase()){u.insertBefore(d[g],f[v]);break}u.insertBefore(d[g],f[f.length])}}}if(1===this.dataType){this.updateField(this.treeData,this.fields,p,"hasChildren",!0);var y=this.getId(l),b=h(y)?this.treeData.length:this.getDataPos(this.treeData,this.fields,y);for(v=0;v<t.length;v++){if(!h(p)){var S=this.isNumberTypeId?parseFloat(p):p;r(this.fields.parentID,S,t[v])}this.treeData.splice(b,0,t[v]),b++}}this.finalizeNode(u)}},e.prototype.updateMapper=function(t){var e=1===t?this.fields:this.getChildFields(this.fields,t-1,1);this.updateListProp(e)},e.prototype.updateListProp=function(t){var e=this.getActualProperties(t);this.listBaseOption.fields=e,this.listBaseOption.fields.url=e.hasOwnProperty("navigateUrl")?e.navigateUrl:"navigateUrl"},e.prototype.getDataPos=function(t,e,i){for(var r=null,o=0,s=t.length;o<s;o++){var a=n(e.id,t[o]);if(t[o]&&a&&a.toString()===i)return o;if("string"!=typeof e.child||h(n(e.child,t[o]))){if(this.fields.dataSource instanceof ox&&!h(n("child",t[o]))){var l=n("child",t[o]);if(null!==(r=this.getDataPos(l,this.getChildMapper(e),i)))break}}else{var c=n(e.child,t[o]);if(null!==(r=this.getDataPos(c,this.getChildMapper(e),i)))break}}return r},e.prototype.addChildData=function(t,e,i,r,o){var s;if(h(i)){o=h(o)?t.length:o;for(var a=0,l=r.length;a<l;a++)t.splice(o,0,r[a]),o++;return s}for(var c=0,d=t.length;c<d;c++){var p=n(e.id,t[c]);if(t[c]&&p&&p.toString()===i){if("string"==typeof e.child&&t[c].hasOwnProperty(e.child)&&null!==t[c][e.child]||this.fields.dataSource instanceof ox&&t[c].hasOwnProperty("child")){h(g=n(u="string"==typeof e.child?e.child:"child",t[c]))&&(g=[]),o=h(o)?g.length:o;for(a=0,l=r.length;a<l;a++)g.splice(o,0,r[a]),o++}else{var u="string"==typeof e.child?e.child:"child";t[c][u]=r}return!0}if("string"!=typeof e.child||h(n(e.child,t[c]))){if(this.fields.dataSource instanceof ox&&!h(n("child",t[c]))){var g=n("child",t[c]);if(void 0!==(s=this.addChildData(g,this.getChildMapper(e),i,r,o)))break}}else{var m=n(e.child,t[c]);if(void 0!==(s=this.addChildData(m,this.getChildMapper(e),i,r,o)))break}}return s},e.prototype.doDisableAction=function(t){var e=this.nodeType(t),i=this.checkValidId(e);this.validArr=[];for(var n=0,r=i.length;n<r;n++){var o=i[n][this.fields.id].toString();o&&-1===this.disableNode.indexOf(o)&&this.disableNode.push(o);var s=this.getElement(o);s&&(s.setAttribute("aria-disabled","true"),I([s],"e-disable"))}},e.prototype.doEnableAction=function(t){for(var e=this.nodeType(t),i=0,n=e.length;i<n;i++){var r=this.getElement(e[i]),o=e[i];o&&-1!==this.disableNode.indexOf(o)&&this.disableNode.splice(this.disableNode.indexOf(o),1),r&&(r.removeAttribute("aria-disabled"),x([r],"e-disable"))}},e.prototype.nodeType=function(t){for(var e=[],i=0,n=t.length;i<n;i++){var r=void 0;"string"==typeof t[i]?r=t[i]?t[i].toString():null:"object"==typeof t[i]&&(r=t[i]?t[i].getAttribute("data-uid").toString():null),-1==e.indexOf(r)&&e.push(r)}return e},e.prototype.checkValidId=function(t){var e=this;if(1===this.dataType)this.validArr=this.treeData.filter(function(i){return-1!==t.indexOf(i[e.fields.id]?i[e.fields.id].toString():null)});else if(2===this.dataType)for(var i=0;i<this.treeData.length;i++){var r=this.treeData[i][this.fields.id]?this.treeData[i][this.fields.id].toString():null;-1!==t.indexOf(r)&&this.validArr.push(this.treeData[i]);var o=n(this.fields.child.toString(),this.treeData[i]);o&&this.filterNestedChild(o,t)}return this.validArr},e.prototype.filterNestedChild=function(t,e){for(var i=0;i<t.length;i++){var r=t[i][this.fields.id]?t[i][this.fields.id].toString():null;-1!==e.indexOf(r)&&this.validArr.push(t[i]);var o=n(this.fields.child.toString(),t[i]);o&&this.filterNestedChild(o,e)}},e.prototype.setTouchClass=function(){var t=j(this.element,".e-bigger");this.touchClass=h(t)?"":"e-small"},e.prototype.updatePersistProp=function(){this.removeField(this.treeData,this.fields,["selected","expanded"]);for(var t=this.selectedNodes,e=0,i=t.length;e<i;e++)this.updateField(this.treeData,this.fields,t[e],"selected",!0);for(var n=this.expandedNodes,r=0,o=n.length;r<o;r++)this.updateField(this.treeData,this.fields,n[r],"expanded",!0);if(this.showCheckBox){this.removeField(this.treeData,this.fields,["isChecked"]);var s=this.checkedNodes,a=0;for(o=s.length;a<o;a++)this.updateField(this.treeData,this.fields,s[a],"isChecked",!0)}},e.prototype.removeField=function(t,e,i){if(!h(t)&&!h(e))for(var r=0,o=t.length;r<o;r++){for(var s=0;s<i.length;s++){var a=this.getMapperProp(e,i[s]);h(t[r][a])||delete t[r][a]}"string"!=typeof e.child||h(n(e.child,t[r]))?this.fields.dataSource instanceof ox&&!h(n("child",t[r]))&&this.removeField(n("child",t[r]),this.getChildMapper(e),i):this.removeField(n(e.child,t[r]),this.getChildMapper(e),i)}},e.prototype.getMapperProp=function(t,e){switch(e){case"selected":return h(t.selected)?"selected":t.selected;case"expanded":return h(t.expanded)?"expanded":t.expanded;case"isChecked":return h(t.isChecked)?"isChecked":t.isChecked;case"hasChildren":return h(t.hasChildren)?"hasChildren":t.hasChildren;default:return e}},e.prototype.updateField=function(t,e,i,n,o){if(!h(i))if(1===this.dataType){var s=this.isNumberTypeId?parseFloat(i):i,a=new ox(this.treeData).executeLocal((new QI).where(e.id,"equal",s,!1));r(this.getMapperProp(e,n),o,a[0])}else this.updateChildField(t,e,i,n,o)},e.prototype.updateChildField=function(t,e,i,o,s,a){var l;if(h(t))return l;for(var c=0,d=t.length;c<d;c++){var p=n(e.id,t[c]);if(t[c]&&p&&p.toString()===i)return a?l=t.splice(c,1):(r(this.getMapperProp(e,o),s,t[c]),l=[]),l;if("string"!=typeof e.child||h(n(e.child,t[c]))){if(this.fields.dataSource instanceof ox&&!h(n("child",t[c]))){var u=n("child",t[c]);if(void 0!==(l=this.updateChildField(u,this.getChildMapper(e),i,o,s,a)))break}}else{var g=n(e.child,t[c]);if(void 0!==(l=this.updateChildField(g,this.getChildMapper(e),i,o,s,a)))break}}return l},e.prototype.triggerEvent=function(t,e){if(this.renderReactTemplates(),"addNodes"===t){for(var i=[],r=0;r<e.length;r++)i.push(this.getNode(this.getElement(h(e[r][this.fields.id])?n(this.fields.id,e[r]).toString():null)));e=i}var o={data:this.treeData,action:t,nodeData:e};this.trigger("dataSourceChanged",o)},e.prototype.wireInputEvents=function(t){Ep.add(t,"blur",this.inputFocusOut,this)},e.prototype.wireEditingEvents=function(t){var e=this;if(t&&!this.disabled){var i=this;this.touchEditObj=new yu(this.element,{tap:function(t){e.isDoubleTapped(t)&&2===t.tapCount&&(t.originalEvent.preventDefault(),i.editingHandler(t.originalEvent))}})}else this.touchEditObj&&this.touchEditObj.destroy()},e.prototype.wireClickEvent=function(t){if(t){var e=this;this.touchClickObj=new yu(this.element,{tap:function(t){e.clickHandler(t)}})}else this.touchClickObj&&this.touchClickObj.destroy()},e.prototype.wireExpandOnEvent=function(t){var e=this;if(t){var i=this;this.touchExpandObj=new yu(this.element,{tap:function(t){("Click"===e.expandOnType||"DblClick"===e.expandOnType&&e.isDoubleTapped(t)&&2===t.tapCount)&&3!==t.originalEvent.which&&i.expandHandler(t)}})}else this.touchExpandObj&&this.touchExpandObj.destroy()},e.prototype.mouseDownHandler=function(t){this.mouseDownStatus=!0,(t.shiftKey||t.ctrlKey)&&t.preventDefault(),t.ctrlKey&&this.allowMultiSelection&&Ep.add(this.element,"contextmenu",this.preventContextMenu,this)},e.prototype.preventContextMenu=function(t){t.preventDefault()},e.prototype.wireEvents=function(){Ep.add(this.element,"mousedown",this.mouseDownHandler,this),this.wireClickEvent(!0),"None"!==this.expandOnType&&this.wireExpandOnEvent(!0),Ep.add(this.element,"mouseover",this.onMouseOver,this),Ep.add(this.element,"mouseout",this.onMouseLeave,this),this.keyboardModule=new pu(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},e.prototype.unWireEvents=function(){Ep.remove(this.element,"mousedown",this.mouseDownHandler),this.wireClickEvent(!1),this.wireExpandOnEvent(!1),Ep.remove(this.element,"mouseover",this.onMouseOver),Ep.remove(this.element,"mouseout",this.onMouseLeave),this.disabled||this.keyboardModule.destroy()},e.prototype.parents=function(t,e){for(var i=[],n=t.parentNode;!h(n);)B(n,e)&&i.push(n),n=n.parentNode;return i},e.prototype.isDoubleTapped=function(t){var e,i=t.originalEvent.target;return i&&t.tapCount&&(1===t.tapCount?this.firstTap=j(i,"."+YD):2===t.tapCount&&(e=j(i,"."+YD))),this.firstTap===e},e.prototype.isDescendant=function(t,e){for(var i=e.parentNode;!h(i);){if(i===t)return!0;i=i.parentNode}return!1},e.prototype.showSpinner=function(t){I([t],GD),ki({target:t,width:Np.isDevice?16:14},this.createElement),Qi(t)},e.prototype.hideSpinner=function(t){qi(t),t.innerHTML="",x([t],GD)},e.prototype.setCheckedNodes=function(t){t=JSON.parse(JSON.stringify(t)),this.uncheckAll(this.checkedNodes),this.setIndeterminate(t),t.length>0&&this.checkAll(t)},e.prototype.setValidCheckedNode=function(t){if(1===this.dataType){var e=this.fields,i=new ox(this.treeData).executeLocal((new QI).where(e.id,"equal",t,!0));if(i[0]&&(this.setChildCheckState(i,t,i[0]),this.autoCheck)){for(var r=i[0][this.fields.parentID]?i[0][this.fields.parentID].toString():null,o=this.getChildNodes(this.treeData,r),s=0,a=0;a<o.length;a++){var l=o[a][this.fields.id].toString();-1!==this.checkedNodes.indexOf(l)&&s++}s===o.length&&-1===this.checkedNodes.indexOf(r)&&r&&this.checkedNodes.push(r)}}else if(2===this.dataType)for(var h=0;h<this.treeData.length;h++){if((this.treeData[h][this.fields.id]?this.treeData[h][this.fields.id].toString():"")===t&&-1===this.checkedNodes.indexOf(t)){this.checkedNodes.push(t);break}var c=n(this.fields.child.toString(),this.treeData[h]);c&&this.setChildCheckState(c,t,this.treeData[h])}},e.prototype.setChildCheckState=function(t,e,i){var r,o=0;if(1===this.dataType){i&&(r=i[this.fields.id]?i[this.fields.id].toString():null);for(var s=0;s<t.length;s++){var a=t[s][this.fields.id]?t[s][this.fields.id].toString():null;i&&r&&this.autoCheck&&-1!==this.checkedNodes.indexOf(r)&&-1===this.checkedNodes.indexOf(a)&&this.checkedNodes.push(a),a===e&&-1===this.checkedNodes.indexOf(e)&&this.checkedNodes.push(e);(h=this.getChildNodes(this.treeData,a))&&this.setChildCheckState(h,e,i)}}else{i&&(r=i[this.fields.id]?i[this.fields.id].toString():"");for(s=0;s<t.length;s++){var l=t[s][this.fields.id]?t[s][this.fields.id].toString():"";i&&r&&this.autoCheck&&-1!==this.checkedNodes.indexOf(r)&&-1===this.checkedNodes.indexOf(l)&&this.checkedNodes.push(l),l===e&&-1===this.checkedNodes.indexOf(e)&&this.checkedNodes.push(e);var h;(h=n(this.fields.child.toString(),t[s]))&&this.setChildCheckState(h,e,t[s]),-1!==this.checkedNodes.indexOf(l)&&this.autoCheck&&o++,o===t.length&&-1===this.checkedNodes.indexOf(r)&&this.autoCheck&&this.checkedNodes.push(r)}}},e.prototype.setIndeterminate=function(t){for(var e=0;e<t.length;e++)this.setValidCheckedNode(t[e])},e.prototype.updatePosition=function(t,e,i,n){if(1===this.dataType){var r=this.getDataPos(this.treeData,this.fields,t);if(this.treeData.splice(r,1,e),i){this.removeChildNodes(t);for(var o=0;o<n.length;o++)this.treeData.splice(r,0,n[o]),r++}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}else this.updateChildPosition(this.treeData,this.fields,t,[e],void 0)},e.prototype.updateChildPosition=function(t,e,i,r,o){for(var s,a=0,l=t.length;a<l;a++){var c=n(e.id,t[a]);if(t[a]&&c&&c.toString()===i)return t[a]=r[0],!0;if("string"!=typeof e.child||h(n(e.child,t[a]))){if(this.fields.dataSource instanceof ox&&!h(n("child",t[a]))){var d=n("child",t[a]);if(void 0!==(s=this.updateChildPosition(d,this.getChildMapper(e),i,r,o)))break}}else{var p=n(e.child,t[a]);if(void 0!==(s=this.updateChildPosition(p,this.getChildMapper(e),i,r,o)))break}}return s},e.prototype.dynamicState=function(){this.setDragAndDrop(this.allowDragAndDrop),this.wireEditingEvents(this.allowEditing),this.disabled?(this.unWireEvents(),this.rippleFn(),this.rippleIconFn()):(this.wireEvents(),this.setRipple())},e.prototype.crudOperation=function(t,e,i,n,r,o,s){var a,l=this,c=this.fields.dataSource,d=[],p=this.getQuery(this.fields),u=this.fields.id,g={addedRecords:[],deletedRecords:[],changedRecords:[]},m=[];e?m=this.nodeType(e):i&&("string"==typeof i?m[0]=i.toString():"object"==typeof i&&(m[0]=i.getAttribute("data-uid").toString()));for(var f=0,v=m.length;f<v;f++){if(!h(this.getElement(m[f]))){var y=this.getNodeObject(m[f]);d.push(y)}}switch(t){case"delete":1==e.length?a=c.remove(u,d[0],p.fromTable,p):(g.deletedRecords=d,a=c.saveChanges(g,u,p.fromTable,p)),a.then(function(t){return l.deleteSuccess(m)}).catch(function(t){return l.dmFailure(t)});break;case"update":d[0][this.fields.text]=n,(a=c.update(u,d[0],p.fromTable,p)).then(function(t){return l.editSucess(i,n,s)}).catch(function(t){return l.dmFailure(t,i,s)});break;case"insert":if(1==r.length)a=c.insert(r[0],p.fromTable,p);else{var b=[];for(f=0,v=r.length;f<v;f++)b.push(r[f]);g.addedRecords=b,a=c.saveChanges(g,u,p.fromTable,p)}a.then(function(t){var e=l.getElement(i);l.addSuccess(r,e,o),l.preventExpand=!1}).catch(function(t){return l.dmFailure(t)})}},e.prototype.deleteSuccess=function(t){for(var e=[],i=0,n=t.length;i<n;i++){var r=this.getElement(t[i]);e.push(this.getNode(r)),h(r)||this.removeNode(r)}this.updateInstance(),1===this.dataType&&(this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)),this.triggerEvent("removeNode",e)},e.prototype.editSucess=function(t,e,i){var n=this.getElement(t),r=A("."+WD,n);this.appendNewText(n,r,e,i)},e.prototype.addSuccess=function(t,e,i){var n,r=e?e.querySelector(".e-icons"):null,o=this;e&&r&&r.classList.contains(FD)&&null===e.querySelector("."+QD)?o.renderChildNodes(e,null,function(){n=e.querySelector("."+QD),o.addGivenNodes(t,e,i,!0,n),o.triggerEvent("addNodes",t)}):(this.addGivenNodes(t,e,i,!0),this.triggerEvent("addNodes",t))},e.prototype.dmFailure=function(t,e,i){e&&this.updatePreviousText(e,i),this.trigger("actionFailure",{error:t})},e.prototype.updatePreviousText=function(t,e){var i=this.getElement(t),n=A("."+WD,i);this.updateText(i,n,this.oldText,e)},e.prototype.getHierarchicalParentId=function(t,e,i){var r=this,o=e.findIndex(function(e){return e[r.fields.id]&&e[r.fields.id].toString()===t});if(-1==o)for(var s=0;s<e.length;s++){var a=n(this.fields.child.toString(),e[s]);if(!h(a)){if(-1!=(o=a.findIndex(function(e){return e[r.fields.id]&&e[r.fields.id].toString()===t}))){i.push(e[s][this.fields.id].toString()),this.getHierarchicalParentId(e[s][this.fields.id].toString(),this.treeData,i);break}this.getHierarchicalParentId(t,a,i)}}return i},e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"allowDragAndDrop":this.setDragAndDrop(this.allowDragAndDrop);break;case"dragArea":this.allowDragAndDrop&&(this.dragObj.dragArea=this.dragArea);break;case"allowEditing":this.wireEditingEvents(this.allowEditing);break;case"allowMultiSelection":if(this.selectedNodes.length>1){var r=this.getElement(this.selectedNodes[0]);this.isLoaded=!1,this.removeSelectAll(),this.selectNode(r,null),this.isLoaded=!0}this.setMultiSelect(this.allowMultiSelection),this.addMultiSelect(this.allowMultiSelection);break;case"allowTextWrap":this.setTextWrap(),this.updateWrap();break;case"checkedNodes":this.showCheckBox&&(this.checkedNodes=e.checkedNodes,this.setCheckedNodes(t.checkedNodes));break;case"autoCheck":this.showCheckBox&&(this.autoCheck=t.autoCheck,this.ensureIndeterminate());break;case"cssClass":this.setCssClass(e.cssClass,t.cssClass);break;case"enableRtl":this.setEnableRtl();break;case"expandedNodes":this.isAnimate=!1,this.setProperties({expandedNodes:[]},!0),this.collapseAll(),this.isInitalExpand=!0,this.setProperties({expandedNodes:h(t.expandedNodes)?[]:t.expandedNodes},!0),this.doExpandAction(),this.isInitalExpand=!1,this.isAnimate=!0;break;case"expandOn":this.wireExpandOnEvent(!1),this.setExpandOnType(),"None"===this.expandOnType||this.disabled||this.wireExpandOnEvent(!0);break;case"disabled":this.setDisabledMode(),this.dynamicState();break;case"fields":this.isAnimate=!1,this.isFieldChange=!0,this.initialRender=!0,this.reRenderNodes(),this.initialRender=!1,this.isAnimate=!0,this.isFieldChange=!1;break;case"fullRowSelect":this.setFullRow(this.fullRowSelect),this.addFullRow(this.fullRowSelect),this.allowTextWrap&&(this.setTextWrap(),this.updateWrap());break;case"loadOnDemand":if(!1===this.loadOnDemand&&!this.onLoaded){for(var o=this.element.querySelectorAll("li"),s=0;s<o.length;)"true"!==o[s].getAttribute("aria-expanded")&&this.renderChildNodes(o[s],!0,null,!0),s++;this.onLoaded=!0}break;case"nodeTemplate":this.hasTemplate=!1,this.nodeTemplateFn=this.templateComplier(this.nodeTemplate),this.reRenderNodes();break;case"selectedNodes":this.removeSelectAll(),this.setProperties({selectedNodes:t.selectedNodes},!0),this.doSelectionAction();break;case"showCheckBox":case"sortOrder":this.reRenderNodes();break;case"fullRowNavigable":this.setProperties({fullRowNavigable:t.fullRowNavigable},!0),this.listBaseOption.itemNavigable=t.fullRowNavigable,this.reRenderNodes()}}},e.prototype.destroy=function(){this.clearTemplate(),this.element.removeAttribute("aria-activedescendant"),this.unWireEvents(),this.wireEditingEvents(!1),this.disabled||(this.rippleFn(),this.rippleIconFn()),this.setCssClass(this.cssClass,null),this.setDragAndDrop(!1),this.setFullRow(!1),this.ulElement&&this.ulElement.parentElement&&this.ulElement.parentElement.removeChild(this.ulElement),t.prototype.destroy.call(this)},e.prototype.addNodes=function(t,e,i,r){if(!h(t)){t=JSON.parse(JSON.stringify(t));var o=this.getElement(e);if(this.preventExpand=r,this.fields.dataSource instanceof ox)this.isOffline?this.addSuccess(t,o,i):this.crudOperation("insert",null,e,null,t,i,this.preventExpand);else if(2===this.dataType)this.addGivenNodes(t,o,i);else{if(o)this.addGivenNodes(t,o,i);else{t=this.getSortedData(t);for(var s=0;s<t.length;s++){var a=n(this.fields.parentID,t[s]);o=a?this.getElement(a.toString()):a,this.addGivenNodes([t[s]],o,i)}}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}this.updateCheckedStateFromDS(),this.showCheckBox&&o&&this.ensureParentCheckState(o),this.fields.dataSource instanceof ox==!1&&(this.preventExpand=!1,this.triggerEvent("addNodes",t))}},e.prototype.beginEdit=function(t){var e=this.getElement(t);h(e)||this.disabled||this.createTextbox(e,null)},e.prototype.checkAll=function(t){this.showCheckBox&&this.doCheckBoxAction(t,!0)},e.prototype.collapseAll=function(t,e,i){h(t)?e>0?this.collapseByLevel(A("."+QD,this.element),e,i):this.collapseAllNodes(i):this.doGivenAction(t,_D,!1)},e.prototype.disableNodes=function(t){h(t)||this.doDisableAction(t)},e.prototype.enableNodes=function(t){h(t)||this.doEnableAction(t)},e.prototype.ensureVisible=function(t){var e=[];if(1==this.dataType)for(var i=this.getTreeData(t);0!=i.length&&!h(i[0][this.fields.parentID]);)e.push(i[0][this.fields.parentID].toString()),i=this.getTreeData(i[0][this.fields.parentID].toString());else 2==this.dataType&&(e=this.getHierarchicalParentId(t,this.treeData,e).reverse());this.expandAll(e);var n=this.getElement(t);if(!h(n)){if("object"==typeof t){var r=this.parents(n,"."+YD);this.expandAll(r)}setTimeout(function(){n.scrollIntoView({behavior:"smooth"})},450)}},e.prototype.expandAll=function(t,e,i){h(t)?e>0?this.expandByLevel(A("."+QD,this.element),e,i):this.expandAllNodes(i):this.doGivenAction(t,FD,!0)},e.prototype.getAllCheckedNodes=function(){return this.checkedNodes},e.prototype.getDisabledNodes=function(){return this.disableNode},e.prototype.getNode=function(t){var e=this.getElement(t);return this.getNodeData(e,!0)},e.prototype.getTreeData=function(t){var e=this.getId(t);if(this.updatePersistProp(),h(e))return this.treeData;var i=this.getNodeObject(e);return h(i)?[]:[i]},e.prototype.moveNodes=function(t,e,i,n){var r=this.getElement(e),o=[];if(!h(r)){for(var s=0;s<t.length;s++){var a=this.getElement(t[s]);o.push(this.getNode(a)),h(a)||r.isSameNode(a)||this.isDescendant(a,r)||(this.preventExpand=n,this.dropAsChildNode(a,r,this,i))}this.fields.dataSource instanceof ox==!1&&(this.preventExpand=!1),this.triggerEvent("moveNodes",o)}},e.prototype.refreshNode=function(t,e){if(!h(t)&&!h(e)){var i,r=!1;if(1==this.dataType&&e.length>1)r=!0;else if(2==this.dataType&&1===e.length){h(n(this.fields.child.toString(),e[0]))||(r=!0)}var o=this.getElement(t);i=o?o.getAttribute("data-uid"):t?t.toString():null,this.refreshData=this.getNodeObject(i),e=JSON.parse(JSON.stringify(e));var s,c;if(1==this.dataType&&r){for(var d=0;d<e.length;d++)if(h(e[d][this.fields.parentID])){c=e[d],e.splice(d,1);break}s=l({},this.refreshData,c)}else s=l({},this.refreshData,e[0]);if(h(o))this.updatePosition(i,s,r,e);else{this.isRefreshed=!0;var p=parseFloat(o.getAttribute("aria-level")),u=uy.createListItemFromJson(this.createElement,[s],this.listBaseOption,p),g=A("."+QD,o),m=n(this.fields.child.toString(),s);if(r&&g||r&&!h(m)){var f=o.parentElement,v=Array.prototype.indexOf.call(f.childNodes,o);O(o),f.insertBefore(u[0],f.childNodes[v]),this.updatePosition(i,s,r,e),r&&g&&this.expandAll([i])}else{var y=A("."+KD,o),b=A("."+KD,u[0]),S=A("div.e-icons",y),w=A("div.e-icons",b);S&&w&&(w.classList.contains(FD)&&S.classList.contains(_D)?(x([w],FD),I([w],_D)):w.classList.contains(_D)&&S.classList.contains(FD)?(x([w],_D),I([w],FD)):S.classList.contains("interaction")&&I([w],"interaction")),O(y);var M=A("."+nT,o);M.parentNode.insertBefore(b,M.nextSibling),this.updatePosition(i,s,r,e)}if(o=this.getElement(t),s[this.fields.tooltip]&&o.setAttribute("title",s[this.fields.tooltip]),s.hasOwnProperty(this.fields.htmlAttributes)&&s[this.fields.htmlAttributes]){var C={};a(C,s[this.fields.htmlAttributes]),C.class?(I([o],C.class.split(" ")),delete C.class):L(o,C)}-1!==this.selectedNodes.indexOf(i)&&(o.setAttribute("aria-selected","true"),I([o],qD)),this.isRefreshed=!1,this.triggerEvent("refreshNode",[this.getNode(o)])}}},e.prototype.removeNodes=function(t){h(t)||(this.fields.dataSource instanceof ox&&!this.isOffline?this.crudOperation("delete",t):this.deleteSuccess(t))},e.prototype.updateNode=function(t,e){var i=this;if(!h(t)&&!h(e)&&this.allowEditing){var n=this.getElement(t);if(!h(n)){var r=A("."+WD,n);this.updateOldText(n);var o=this.getEditEvent(n,null,null);this.trigger("nodeEditing",o,function(o){o.cancel||(i.fields.dataSource instanceof ox&&!i.isOffline?i.crudOperation("update",null,t,e,null,null,!1):i.appendNewText(n,r,e,!1))})}}},e.prototype.uncheckAll=function(t){this.showCheckBox&&this.doCheckBoxAction(t,!1)};var i;UD([W(!1)],e.prototype,"allowDragAndDrop",void 0),UD([W(!1)],e.prototype,"allowEditing",void 0),UD([W(!1)],e.prototype,"allowMultiSelection",void 0),UD([W(!1)],e.prototype,"allowTextWrap",void 0),UD([Q({},fT)],e.prototype,"animation",void 0),UD([W()],e.prototype,"checkedNodes",void 0),UD([W("")],e.prototype,"cssClass",void 0),UD([W(!1)],e.prototype,"disabled",void 0),UD([W(null)],e.prototype,"dragArea",void 0),UD([W(!1)],e.prototype,"enableHtmlSanitizer",void 0),UD([W(!1)],e.prototype,"enablePersistence",void 0),UD([W()],e.prototype,"expandedNodes",void 0),UD([W("Auto")],e.prototype,"expandOn",void 0),UD([Q({},gT)],e.prototype,"fields",void 0),UD([W(!0)],e.prototype,"fullRowSelect",void 0),UD([W(!0)],e.prototype,"loadOnDemand",void 0),UD([W()],e.prototype,"locale",void 0),UD([W()],e.prototype,"nodeTemplate",void 0),UD([W()],e.prototype,"selectedNodes",void 0),UD([W("None")],e.prototype,"sortOrder",void 0),UD([W(!1)],e.prototype,"showCheckBox",void 0),UD([W(!0)],e.prototype,"autoCheck",void 0),UD([W(!1)],e.prototype,"fullRowNavigable",void 0),UD([Z()],e.prototype,"actionFailure",void 0),UD([Z()],e.prototype,"created",void 0),UD([Z()],e.prototype,"dataBound",void 0),UD([Z()],e.prototype,"dataSourceChanged",void 0),UD([Z()],e.prototype,"drawNode",void 0),UD([Z()],e.prototype,"destroyed",void 0),UD([Z()],e.prototype,"keyPress",void 0),UD([Z()],e.prototype,"nodeChecked",void 0),UD([Z()],e.prototype,"nodeChecking",void 0),UD([Z()],e.prototype,"nodeClicked",void 0),UD([Z()],e.prototype,"nodeCollapsed",void 0),UD([Z()],e.prototype,"nodeCollapsing",void 0),UD([Z()],e.prototype,"nodeDragging",void 0),UD([Z()],e.prototype,"nodeDragStart",void 0),UD([Z()],e.prototype,"nodeDragStop",void 0),UD([Z()],e.prototype,"nodeDropped",void 0),UD([Z()],e.prototype,"nodeEdited",void 0),UD([Z()],e.prototype,"nodeEditing",void 0),UD([Z()],e.prototype,"nodeExpanded",void 0),UD([Z()],e.prototype,"nodeExpanding",void 0),UD([Z()],e.prototype,"nodeSelected",void 0),UD([Z()],e.prototype,"nodeSelecting",void 0),e=i=UD([$],e)}(Kp),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),yT=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},bT="e-close",ST="e-open",wT="e-transition",IT="e-sidebar-overlay",xT="e-visibility",MT="e-disable-animation",CT="e-sidebar-context",NT="e-sidebar-absolute",ET=(function(t){function e(e,i){return t.call(this,e,i)||this}vT(e,t),e.prototype.preRender=function(){this.setWidth()},e.prototype.render=function(){this.initialize(),this.wireEvents(),this.renderComplete()},e.prototype.initialize=function(){this.setTarget(),this.addClass(),this.setZindex(),this.enableDock&&this.setDock(),this.isOpen?(this.show(),this.firstRender=!0):this.setMediaQuery(),this.checkType(!0),this.setType(this.type),this.setCloseOnDocumentClick(),this.setEnableRTL(),Np.isDevice&&(this.windowWidth=window.innerWidth)},e.prototype.setEnableRTL=function(){(this.enableRtl?I:x)([this.element],"e-rtl")},e.prototype.setTarget=function(){this.targetEle=this.element.nextElementSibling,this.sidebarEleCopy=this.element.cloneNode(!0),"string"==typeof this.target&&this.setProperties({target:document.querySelector(this.target)},!0),this.target&&(this.target.insertBefore(this.element,this.target.children[0]),I([this.element],NT),I([this.target],CT),this.targetEle=this.getTargetElement())},e.prototype.getTargetElement=function(){for(var t=this.element.nextElementSibling;!h(t)&&t.classList.contains("e-sidebar");)t=t.nextElementSibling;return t},e.prototype.setCloseOnDocumentClick=function(){this.closeOnDocumentClick?Ep.add(document,"mousedown touchstart",this.documentclickHandler,this):Ep.remove(document,"mousedown touchstart",this.documentclickHandler)},e.prototype.setWidth=function(){this.enableDock&&"Left"===this.position?P(this.element,{width:this.setDimension(this.dockSize)}):this.enableDock&&"Right"===this.position?P(this.element,{width:this.setDimension(this.dockSize)}):this.enableDock||P(this.element,{width:this.setDimension(this.width)})},e.prototype.setDimension=function(t){return t="number"==typeof t?m(t):"string"==typeof t?t.match(/px|%|em/)?t:m(t):"100%"},e.prototype.setZindex=function(){P(this.element,{"z-index":""+this.zIndex})},e.prototype.addClass=function(){"EJS-SIDEBAR"===this.element.tagName&&I([this.element],"e-sidebar-display");var t=document.querySelector(".e-main-content");h(t||this.targetEle)||I([t||this.targetEle],["e-content-animation"]),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):null,this.enableDock||"Auto"===this.type||I([this.element],[xT]),x([this.element],[ST,bT,"e-right","e-left","e-slide","e-push","e-over"]),this.element.classList.add("e-sidebar"),I([this.element],"Right"===this.position?"e-right":"e-left"),this.enableDock&&I([this.element],"e-dock"),h(this.tabIndex)||this.element.setAttribute("tabindex",this.tabIndex),"Auto"!==this.type||Np.isDevice?this.isOpen||I([this.element],bT):this.show()},e.prototype.checkType=function(t){"Push"!==this.type&&"Over"!==this.type&&"Slide"!==this.type?this.type="Auto":this.element.classList.contains(bT)||t||this.hide()},e.prototype.transitionEnd=function(t){this.setDock(),h(t)||this.firstRender||this.triggerChange(),this.firstRender=!1,Ep.remove(this.element,"transitionend",this.transitionEnd)},e.prototype.destroyBackDrop=function(){var t=document.querySelector(".e-main-content")||this.targetEle;this.target&&this.showBackdrop&&t&&!h(this.defaultBackdropDiv)?x([this.defaultBackdropDiv],IT):this.showBackdrop&&this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null)},e.prototype.hide=function(t){var e=this,i={model:this,element:this.element,cancel:!1,isInteracted:!h(t),event:t||null};this.trigger("close",i,function(t){if(!t.cancel){if(e.element.classList.contains(bT))return;e.element.classList.contains(ST)&&!e.animate&&e.triggerChange(),I([e.element],bT),x([e.element],ST),P(e.element,{width:m(e.enableDock?e.dockSize:e.width)}),e.setType(e.type);var i=document.querySelector(".e-main-content")||e.targetEle;!e.enableDock&&i&&(i.style.transform="translateX(0px)",i.style["Left"===e.position?"marginLeft":"marginRight"]="0px"),e.destroyBackDrop(),e.setAnimation(),"Slide"===e.type&&document.body.classList.remove("e-sidebar-overflow"),e.setProperties({isOpen:!1},!0),e.enableDock&&setTimeout(function(){return e.setTimeOut()},50),Ep.add(e.element,"transitionend",e.transitionEnd,e)}})},e.prototype.setTimeOut=function(){var t=document.querySelector(".e-main-content")||this.targetEle,e=this.element.getBoundingClientRect().width;!this.element.classList.contains(ST)||!t||"Over"===this.type&&this.enableDock?this.element.classList.contains(bT)&&t&&("Left"===this.position?t.style.marginLeft=this.setDimension("auto"===this.dockSize?e:this.dockSize):t.style.marginRight=this.setDimension("auto"===this.dockSize?e:this.dockSize)):"Left"===this.position?t.style.marginLeft=this.setDimension("auto"===this.width?e:this.width):t.style.marginRight=this.setDimension("auto"===this.width?e:this.width)},e.prototype.show=function(t){var e=this,i={model:this,element:this.element,cancel:!1,isInteracted:!h(t),event:t||null};this.trigger("open",i,function(t){if(!t.cancel){if(x([e.element],xT),e.element.classList.contains(ST))return;e.element.classList.contains(bT)&&!e.animate&&e.triggerChange(),I([e.element],[ST,wT]),P(e.element,{transform:""}),x([e.element],bT),P(e.element,{width:m(e.width)}),e.setType(e.type),e.createBackDrop(),e.setAnimation(),"Slide"===e.type&&document.body.classList.add("e-sidebar-overflow"),e.setProperties({isOpen:!0},!0),Ep.add(e.element,"transitionend",e.transitionEnd,e)}})},e.prototype.setAnimation=function(){this.animate?x([this.element],MT):I([this.element],MT)},e.prototype.triggerChange=function(){var t={name:"change",element:this.element};this.trigger("change",t)},e.prototype.setDock=function(){this.enableDock&&"Left"===this.position&&!this.getState()?P(this.element,{transform:"translateX(-100%) translateX("+this.setDimension(this.dockSize)+")"}):this.enableDock&&"Right"===this.position&&!this.getState()&&P(this.element,{transform:"translateX(100%) translateX(-"+this.setDimension(this.dockSize)+")"}),this.element.classList.contains(bT)&&this.enableDock&&P(this.element,{width:this.setDimension(this.dockSize)})},e.prototype.createBackDrop=function(){if(this.target&&this.showBackdrop&&this.getState()){var t=this.target,e=document.querySelector(".e-main-content")||this.targetEle;this.defaultBackdropDiv=this.createElement("div"),I([this.defaultBackdropDiv],IT),P(this.defaultBackdropDiv,{height:t.style.height}),e.appendChild(this.defaultBackdropDiv)}else this.showBackdrop&&!this.modal&&this.getState()&&(this.modal=this.createElement("div"),this.modal.className=IT,this.modal.style.display="block",document.body.appendChild(this.modal))},e.prototype.getPersistData=function(){return this.addOnPersist(["type","position","isOpen"])},e.prototype.getModuleName=function(){return"sidebar"},e.prototype.toggle=function(){this.element.classList.contains(ST)?this.hide():this.show()},e.prototype.getState=function(){return!!this.element.classList.contains(ST)},e.prototype.setMediaQuery=function(){if(this.mediaQuery){("string"==typeof this.mediaQuery?window.matchMedia(this.mediaQuery).matches:this.mediaQuery.matches)&&this.windowWidth!==window.innerWidth?this.show():this.getState()&&this.windowWidth!==window.innerWidth&&this.hide()}},e.prototype.resize=function(){"Auto"===this.type&&(Np.isDevice?I([this.element],"e-over"):I([this.element],"e-push")),this.setMediaQuery(),Np.isDevice&&(this.windowWidth=window.innerWidth)},e.prototype.documentclickHandler=function(t){j(t.target,".e-control.e-sidebar")||this.hide(t)},e.prototype.enableGestureHandler=function(t){!this.isOpen&&"Left"===this.position&&"Right"===t.swipeDirection&&t.startX<=20&&t.distanceX>=50&&t.velocity>=.5?this.show():this.isOpen&&"Left"===this.position&&"Left"===t.swipeDirection?this.hide():this.isOpen&&"Right"===this.position&&"Right"===t.swipeDirection?this.hide():!this.isOpen&&"Right"===this.position&&"Left"===t.swipeDirection&&window.innerWidth-t.startX<=20&&t.distanceX>=50&&t.velocity>=.5&&this.show()},e.prototype.setEnableGestures=function(){this.enableGestures?(this.mainContentEle=new yu(document.body,{swipe:this.enableGestureHandler.bind(this)}),this.sidebarEle=new yu(this.element,{swipe:this.enableGestureHandler.bind(this)})):this.mainContentEle&&this.sidebarEle&&(this.mainContentEle.destroy(),this.sidebarEle.destroy())},e.prototype.wireEvents=function(){this.setEnableGestures(),Ep.add(window,"resize",this.resize,this)},e.prototype.unWireEvents=function(){Ep.remove(window,"resize",this.resize),Ep.remove(document,"mousedown touchstart",this.documentclickHandler),this.mainContentEle&&this.mainContentEle.destroy(),this.sidebarEle&&this.sidebarEle.destroy()},e.prototype.onPropertyChanged=function(e,i){for(var n=document.querySelector(".e-main-content")||this.targetEle,r=this.isServerRendered,o=0,s=Object.keys(e);o<s.length;o++){switch(s[o]){case"isOpen":this.isOpen?this.show():this.hide();break;case"width":this.setWidth(),this.getState()||this.setDock();break;case"animate":this.setAnimation();break;case"type":this.checkType(!1),x([this.element],[xT]),this.addClass(),I([this.element],"Auto"===this.type?Np.isDevice?["e-over"]:["e-push"]:["e-"+this.type.toLowerCase()]);break;case"position":this.element.style.transform="",this.setDock(),n&&(n.style["Left"===this.position?"marginRight":"marginLeft"]="0px"),"Right"===this.position?(x([this.element],"e-left"),I([this.element],"e-right")):(x([this.element],"e-right"),I([this.element],"e-left")),this.setType(this.type);break;case"showBackdrop":this.showBackdrop?this.createBackDrop():this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null);break;case"target":"string"==typeof this.target&&this.setProperties({target:document.querySelector(this.target)},!0),h(this.target)&&(x([this.element],NT),x([i.target],CT),P(n,{"margin-left":0,"margin-right":0}),document.body.insertAdjacentElement("afterbegin",this.element)),this.isServerRendered=!1,t.prototype.refresh.call(this),this.isServerRendered=r;break;case"closeOnDocumentClick":this.setCloseOnDocumentClick();break;case"enableDock":this.getState()||this.setDock();break;case"zIndex":this.setZindex();break;case"mediaQuery":this.setMediaQuery();break;case"enableGestures":this.setEnableGestures();break;case"enableRtl":this.setEnableRTL()}}},e.prototype.setType=function(t){var e=this.element.getBoundingClientRect().width;this.setZindex();var i=document.querySelector(".e-main-content")||this.targetEle;i&&(i.style.transform="translateX(0px)",Np.isDevice||"Auto"===this.type||"Over"===this.type&&this.enableDock||(i.style["Left"===this.position?"marginLeft":"marginRight"]="0px"));var n=(this.position,e+"px"),r="Left"===this.position?e:-e;switch(x([this.element],["e-push","e-over","e-slide"]),t){case"Push":I([this.element],["e-push"]),i&&(this.enableDock||this.element.classList.contains(ST))&&(i.style["Left"===this.position?"marginLeft":"marginRight"]=n);break;case"Slide":I([this.element],["e-slide"]),i&&(this.enableDock||this.element.classList.contains(ST))&&(i.style.transform="translateX("+r+"px)");break;case"Over":I([this.element],["e-over"]),this.enableDock&&(this.element.classList.contains(bT)||this.isOpen)&&i&&(i.style["Left"===this.position?"marginLeft":"marginRight"]=this.setDimension(this.dockSize));break;case"Auto":I([this.element],[wT]),Np.isDevice?i&&this.enableDock&&!this.getState()?(i.style["Left"===this.position?"marginLeft":"marginRight"]=n,I([this.element],"e-push")):I([this.element],"e-over"):(I([this.element],"e-push"),i&&(this.enableDock||this.element.classList.contains(ST))&&(i.style["Left"===this.position?"marginLeft":"marginRight"]=n)),this.createBackDrop()}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.target&&x([this.target],CT),this.destroyBackDrop(),this.element&&(x([this.element],[ST,bT,"e-push","e-slide","e-over","e-left","e-right",wT]),x([this.element],NT),this.element.style.width="",this.element.style.zIndex="",this.element.style.transform="",h(this.sidebarEleCopy.getAttribute("tabindex"))?this.element.removeAttribute("tabindex"):this.element.setAttribute("tabindex",this.tabIndex)),this.windowWidth=null;var e=document.querySelector(".e-main-content")||this.targetEle;h(e)||(e.style.margin="",e.style.transform=""),this.unWireEvents()},yT([W("auto")],e.prototype,"dockSize",void 0),yT([W(null)],e.prototype,"mediaQuery",void 0),yT([W(!1)],e.prototype,"enableDock",void 0),yT([W("en-US")],e.prototype,"locale",void 0),yT([W(!1)],e.prototype,"enablePersistence",void 0),yT([W(!0)],e.prototype,"enableGestures",void 0),yT([W(!1)],e.prototype,"isOpen",void 0),yT([W(!1)],e.prototype,"enableRtl",void 0),yT([W(!0)],e.prototype,"animate",void 0),yT([W("auto")],e.prototype,"height",void 0),yT([W(!1)],e.prototype,"closeOnDocumentClick",void 0),yT([W("Left")],e.prototype,"position",void 0),yT([W(null)],e.prototype,"target",void 0),yT([W(!1)],e.prototype,"showBackdrop",void 0),yT([W("Auto")],e.prototype,"type",void 0),yT([W("auto")],e.prototype,"width",void 0),yT([W(1e3)],e.prototype,"zIndex",void 0),yT([Z()],e.prototype,"created",void 0),yT([Z()],e.prototype,"close",void 0),yT([Z()],e.prototype,"open",void 0),yT([Z()],e.prototype,"change",void 0),yT([Z()],e.prototype,"destroyed",void 0),e=yT([$],e)}(Kp),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),DT=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},TT="e-icon-right",OT="e-breadcrumb-text",LT="e-breadcrumb-icon",AT="e-breadcrumb-menu",zT="e-breadcrumb-item",kT="e-breadcrumb-wrap-mode",jT="e-breadcrumb-scroll-mode",PT="e-disabled",RT="aria-disabled";!function(t){t.Hidden="Hidden",t.Collapsed="Collapsed",t.Menu="Menu",t.Wrap="Wrap",t.Scroll="Scroll",t.None="None"}(BD||(BD={}));var BT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ET(e,t),DT([W("")],e.prototype,"text",void 0),DT([W("")],e.prototype,"url",void 0),DT([W(null)],e.prototype,"iconCss",void 0),DT([W(!1)],e.prototype,"disabled",void 0),e}(Rp),HT=(function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.isPopupCreated=!1,n}ET(e,t),e.prototype.preRender=function(){},e.prototype.render=function(){this.initialize(),this.renderItems(this.items),this.wireEvents()},e.prototype.initialize=function(){this._maxItems=this.maxItems,this.element.setAttribute("aria-label","breadcrumb"),this.cssClass&&I([this.element],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.enableRtl&&this.element.classList.add("e-rtl"),this.disabled&&(this.element.classList.add(PT),this.element.setAttribute(RT,"true")),"Wrap"===this.overflowMode?this.element.classList.add(kT):"Scroll"===this.overflowMode&&this.element.classList.add(jT),this.initItems(),this.initPvtProps()},e.prototype.initPvtProps=function(){"Hidden"===this.overflowMode&&this._maxItems>0&&(this.endIndex=this.getEndIndex(),this.startIndex=this.endIndex+1-(this._maxItems-1)),"Menu"===this.overflowMode&&(this._maxItems>=0?(this.startIndex=this._maxItems>1?1:0,this.endIndex=this.getEndIndex(),this.popupUl=this.createElement("ul",{attrs:{TABINDEX:"0",role:"menu"}})):this.startIndex=this.endIndex=null)},e.prototype.getEndIndex=function(){var t,e=this;return this.activeItem?this.items.forEach(function(i,n){i.url!==e.activeItem&&i.text!==e.activeItem||(t=n)}):t=this.items.length-1,t},e.prototype.initItems=function(){if(!this.items.length){var t=void 0,e=void 0,i=[];if(this.url){var n=new URL(this.url,window.location.origin);t=n.origin+"/",e=n.href.split(t)[1].split("/")}else t=window.location.origin+"/",e=window.location.href.split(t)[1].split("/");i.push({iconCss:"e-icons e-home",url:t});for(var r=0;r<e.length;r++)e[r]&&(i.push({text:e[r],url:t+e[r]}),t+=e[r]+"/");this.setProperties({items:i},!0)}},e.prototype.renderItems=function(t){var e,i,n=this,r=this.element.classList.contains(TT),o=t.length;if(o){var s,a=void 0,h=void 0,c=0,d=void 0,p=2*o-1,u=!1,g=this.createElement("ol",{className:"Wrap"===this.overflowMode?"e-breadcrumb-wrapped-ol":""}),m=this.createElement("ol",{className:"Wrap"===this.overflowMode?"e-breadcrumb-first-ol":""}),f=this.hasField(t,"iconCss"),v="Collapsed"===this.overflowMode&&this._maxItems>0&&o>this._maxItems&&!this.isExpanded,y="Hidden"===this.overflowMode&&this._maxItems>0;"Menu"===this.overflowMode&&this.popupUl&&(this.popupUl.innerHTML="");for(var b={moduleName:this.getModuleName(),showIcon:f,itemNavigable:!0,itemCreated:function(t){var e=t.curData.isLastItem;e&&t.item.children.length&&!n.itemTemplate&&(delete t.curData.isLastItem,s||n.enableActiveItemNavigation||(t.item.innerHTML=n.createElement("span",{className:OT,innerHTML:t.item.children[0].innerHTML}).outerHTML)),!t.curData.iconCss||t.curData.text||n.itemTemplate||t.item.classList.add("e-icon-item"),y&&t.item.setAttribute("item-index",c.toString());var i={item:l({},t.curData.properties?t.curData.properties:t.curData),element:t.item,cancel:!1};n.trigger("beforeItemRender",i),u=i.cancel;var o=r||i.element.classList.contains(TT);o&&t.curData.iconCss&&!n.itemTemplate&&t.item.querySelector(".e-anchor-wrap").appendChild(t.item.querySelector("."+LT)),i.item.disabled&&(t.item.setAttribute(RT,"true"),t.item.classList.add(PT)),(i.item.disabled||n.disabled)&&t.item.children.length&&!n.itemTemplate&&t.item.children[0].setAttribute("tabindex","-1"),t.curData.isEmptyUrl&&(t.item.children[0].removeAttribute("href"),!(!e||e&&n.enableActiveItemNavigation)||i.item.disabled||n.disabled||(t.item.children[0].setAttribute("tabindex","0"),Ep.add(t.item.children[0],"keydown",n.keyDownHandler,n))),t.item.removeAttribute("role"),e&&t.item.setAttribute("data-active-item",""),n.itemTemplate||n.beforeItemRenderChanges(t.curData,i.item,t.item,o)}},S=0;S<p;S%2&&c++,S++)if(a=this.activeItem&&(this.activeItem===t[c].url||this.activeItem===t[c].text),!(v&&S>1&&S<p-2)&&(!y||!(c<this.startIndex||c>this.endIndex)||S%2&&c===this.startIndex-1||0===c)){S%2?(d=this.createElement("div",{className:"e-breadcrumb-item-wrapper"}),b.template=this.separatorTemplate?this.separatorTemplate:"/",b.itemClass="e-breadcrumb-separator",i=!1,e=[{previousItem:t[c],nextItem:t[c+1]}]):(b.itemClass="",this.itemTemplate?(b.template=this.itemTemplate,i=!1):i=!0,(e=[l({},t[c].properties?t[c].properties:t[c])])[0].url||this.itemTemplate||(e=[l({},e[0],{isEmptyUrl:!0,url:"#"})]),h=(y||"Menu"===this.overflowMode)&&c===this.endIndex,((S===p-1||h)&&!this.itemTemplate||a)&&(e[0].isLastItem=!0));var w=g,I=this.startIndex+this.endIndex-this._maxItems;if("Menu"===this.overflowMode&&(c>=this.startIndex&&c<=I&&(!(S%2)||c!==I)&&this.endIndex>=this._maxItems&&this._maxItems>0||0===this._maxItems)){if(S%2)continue;w=this.popupUl,h&&(s=!0)}else"Wrap"===this.overflowMode&&(w=0===S?m:d);var x=uy.createList(this.createElement,e,b,i,this).childNodes;if(u){if(y||v||"Menu"===this.overflowMode||"Wrap"===this.overflowMode)return t.splice(c,1),this.initPvtProps(),this.reRenderItems();(S===p-1||h)&&O(w.lastElementChild)}else E(x,w);if("Wrap"===this.overflowMode&&0!==S&&S%2==0&&g.appendChild(d),v&&1===S){var M=this.createElement("li",{className:"e-icons e-breadcrumb-collapsed",attrs:{TABINDEX:"0"}});Ep.add(M,"keyup",this.expandHandler,this),g.appendChild(M)}if("Menu"===this.overflowMode&&this.startIndex===S&&this.endIndex>=this._maxItems&&this._maxItems>=0){var C=this.getMenuElement();Ep.add(C,"keyup",this.keyDownHandler,this),g.appendChild(C)}if(a||h)break;u&&S++}this.isReact&&this.renderReactTemplates(),"Wrap"===this.overflowMode&&this.element.appendChild(m),this.element.appendChild(g),this.calculateMaxItems()}},e.prototype.calculateMaxItems=function(){if("Hidden"===this.overflowMode||"Collapsed"===this.overflowMode||"Menu"===this.overflowMode){var t=void 0,e=this.element.offsetWidth,i=[].slice.call(this.element.children[0].children).reverse(),n="Menu"===this.overflowMode?0:i[i.length-1].offsetWidth+(i[i.length-2]?i[i.length-2].offsetWidth:0);if("Menu"===this.overflowMode){var r=this.getMenuElement();this.element.appendChild(r),n+=r.offsetWidth,O(r)}for(var o=0;o<i.length-2;o++){if(n>e){if(t=Math.ceil((o-1)/2)+("Menu"===this.overflowMode&&o<=2?0:1),(this.maxItems>t&&!(this.maxItems>-1&&-1===t)||-1===this.maxItems)&&this._maxItems!==t)return this._maxItems=t,this.initPvtProps(),this.reRenderItems();break}if("Menu"===this.overflowMode&&2===o&&(n+=i[i.length-1].offsetWidth+i[i.length-2].offsetWidth)>e)return this._maxItems=1,this.initPvtProps(),this.reRenderItems();"Menu"===this.overflowMode&&i[o].classList.contains(AT)||(n+=i[o].offsetWidth)}}else if(("Wrap"===this.overflowMode||"Scroll"===this.overflowMode)&&this._maxItems>0){e=0;if((i=this.element.querySelectorAll("."+zT)).length>this._maxItems+this._maxItems-1){for(o="Wrap"===this.overflowMode?1:0;o<this._maxItems+this._maxItems-1;o++)e+=i[o].offsetWidth;e=e+5+2*parseInt(getComputedStyle(this.element.children[0]).paddingLeft,10),"Wrap"===this.overflowMode?this.element.querySelector(".e-breadcrumb-wrapped-ol").style.width=e+"px":this.element.style.width=e+"px"}}},e.prototype.hasField=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i][""+e])return!0;return!1},e.prototype.getMenuElement=function(){return this.createElement("li",{className:"e-icons e-breadcrumb-menu",attrs:{TABINDEX:"0"}})},e.prototype.beforeItemRenderChanges=function(t,e,i,n){var r=i.querySelector(".e-anchor-wrap");if(e.text!==t.text&&r.childNodes.forEach(function(t){t.nodeType===Node.TEXT_NODE&&(t.textContent=e.text)}),e.iconCss!==t.iconCss&&r){var o=i.querySelector("."+LT);if(o)e.iconCss?(x([o],t.iconCss.split(" ")),I([o],e.iconCss.split(" "))):O(o);else if(e.iconCss){var s=this.createElement("span",{className:LT+" "+e.iconCss});n?E([s],r):r.insertBefore(s,r.childNodes[0])}}if(e.url!==t.url&&this.enableNavigation){var a=i.querySelector("a."+OT);a&&(e.url?a.setAttribute("href",e.url):a.removeAttribute("href"))}},e.prototype.reRenderItems=function(){this.element.innerHTML="",this.renderItems(this.items)},e.prototype.clickHandler=function(t){var e=j(t.target,"."+zT+":not(.e-breadcrumb-separator)");if(this.enableNavigation||t.preventDefault(),e&&(j(t.target,"."+OT)||this.itemTemplate)){var i=void 0;i="Wrap"===this.overflowMode?[].slice.call(this.element.querySelectorAll("."+zT)).indexOf(e):[].slice.call(e.parentElement.children).indexOf(e),"Menu"===this.overflowMode?j(t.target,".e-breadcrumb-popup")?(i+=this.startIndex,this.endIndex=i,"keydown"===t.type&&this.documentClickHandler(t)):this.element.querySelector("."+AT)?i>[].slice.call(this.element.children[0].children).indexOf(this.element.querySelector("."+AT))?(i+=2*this.popupUl.childElementCount-2,i=Math.floor(i/2),this.endIndex=i):this.startIndex=this.endIndex=i:(i=Math.floor(i/2),this.startIndex=this.endIndex=i):i=Math.floor(i/2),"Hidden"===this.overflowMode&&this._maxItems>0&&0!==this.endIndex&&(i=parseInt(e.getAttribute("item-index"),10),this.startIndex>1&&(this.startIndex-=this.endIndex-i),this.endIndex=i),this.trigger("itemClick",{element:e,item:this.items[i],event:t}),this.activeItem=this.items[i].url||this.items[i].text,this.dataBind()}t.target.classList.contains("e-breadcrumb-collapsed")&&(this.isExpanded=!0,this.reRenderItems()),t.target.classList.contains(AT)&&!this.isPopupCreated&&this.renderPopup()},e.prototype.renderPopup=function(){var t=this,e=this.createElement("div",{className:"e-breadcrumb-popup "+this.cssClass+(this.enableRtl?" e-rtl":"")});document.body.appendChild(e),this.isPopupCreated=!0,this.popupObj=new Am(e,{content:this.popupUl,relateTo:this.element.querySelector("."+AT),enableRtl:this.enableRtl,position:{X:"left",Y:"bottom"},collision:{X:"fit",Y:"flip"},open:function(){t.popupUl.focus()}}),this.popupWireEvents(),this.popupObj.show()},e.prototype.documentClickHandler=function(t){"Menu"===this.overflowMode&&this.popupObj&&this.popupObj.element.classList.contains("e-popup-open")&&!j(t.target,"."+AT)&&(this.popupObj.hide(),this.popupObj.destroy(),this.isPopupCreated=!1,T(this.popupObj.element))},e.prototype.resize=function(){this._maxItems=this.maxItems,this.initPvtProps(),this.reRenderItems()},e.prototype.expandHandler=function(t){"Enter"===t.key&&(this.isExpanded=!0,this.reRenderItems())},e.prototype.keyDownHandler=function(t){"Enter"===t.key&&this.clickHandler(t)},e.prototype.popupKeyDownHandler=function(t){"Escape"===t.key&&this.documentClickHandler(t)},e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"items":case"enableActiveItemNavigation":this.reRenderItems();break;case"activeItem":this._maxItems=this.maxItems,this.initPvtProps(),this.reRenderItems();break;case"overflowMode":case"maxItems":this._maxItems=this.maxItems,this.initPvtProps(),this.reRenderItems(),"Wrap"===e.overflowMode?this.element.classList.remove(kT):"Wrap"===t.overflowMode&&this.element.classList.add(kT),"Scroll"===e.overflowMode?this.element.classList.remove(jT):"Scroll"===t.overflowMode&&this.element.classList.add(jT);break;case"url":this.initItems(),this.reRenderItems();break;case"cssClass":e.cssClass&&x([this.element],e.cssClass.split(" ")),t.cssClass&&I([this.element],t.cssClass.replace(/\s+/g," ").trim().split(" ")),(e.cssClass&&e.cssClass.indexOf(TT)>-1&&!(t.cssClass&&t.cssClass.indexOf(TT)>-1)||!(e.cssClass&&e.cssClass.indexOf(TT)>-1)&&t.cssClass&&t.cssClass.indexOf(TT)>-1)&&this.reRenderItems();break;case"enableRtl":this.element.classList.toggle("e-rtl");break;case"disabled":this.element.classList.toggle(PT),this.element.setAttribute(RT,t.disabled+"")}}},e.prototype.wireEvents=function(){this.delegateClickHanlder=this.documentClickHandler.bind(this),Ep.add(document,"click",this.delegateClickHanlder,this),Ep.add(this.element,"click",this.clickHandler,this),window.addEventListener("resize",this.resize.bind(this))},e.prototype.popupWireEvents=function(){Ep.add(this.popupObj.element,"click",this.clickHandler,this),Ep.add(this.popupObj.element,"keydown",this.popupKeyDownHandler,this)},e.prototype.unWireEvents=function(){Ep.remove(document,"click",this.delegateClickHanlder),Ep.remove(this.element,"click",this.clickHandler),window.removeEventListener("resize",this.resize.bind(this)),this.popupObj&&(Ep.remove(this.popupObj.element,"click",this.clickHandler),Ep.remove(this.popupObj.element,"keydown",this.popupKeyDownHandler))},e.prototype.getPersistData=function(){return this.addOnPersist(["activeItem"])},e.prototype.getModuleName=function(){return"breadcrumb"},e.prototype.destroy=function(){var e=this,i=[],n=["aria-label"];this.cssClass&&i.concat(this.cssClass.split(" ")),this.enableRtl&&i.push("e-rtl"),this.disabled&&(i.push(PT),n.push(RT)),"Wrap"===this.overflowMode?i.push(kT):"Scroll"===this.overflowMode&&i.push(jT),this.unWireEvents(),this.element.innerHTML="",x([this.element],i),n.forEach(function(t){e.element.removeAttribute(t)}),t.prototype.destroy.call(this)},DT([W("")],e.prototype,"url",void 0),DT([q([],BT)],e.prototype,"items",void 0),DT([W("")],e.prototype,"activeItem",void 0),DT([W(-1)],e.prototype,"maxItems",void 0),DT([W("Menu")],e.prototype,"overflowMode",void 0),DT([W("")],e.prototype,"cssClass",void 0),DT([W(null)],e.prototype,"itemTemplate",void 0),DT([W("/")],e.prototype,"separatorTemplate",void 0),DT([W(!0)],e.prototype,"enableNavigation",void 0),DT([W(!1)],e.prototype,"enableActiveItemNavigation",void 0),DT([W(!1)],e.prototype,"disabled",void 0),DT([W("")],e.prototype,"locale",void 0),DT([Z()],e.prototype,"beforeItemRender",void 0),DT([Z()],e.prototype,"itemClick",void 0),DT([Z()],e.prototype,"created",void 0),e=DT([$],e)}(Kp),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),UT=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},VT="e-active",_T="e-carousel-slide-container",FT="e-carousel-items",YT="e-carousel-item",WT="e-previous",QT="e-carousel-navigators",XT="e-carousel-indicators",qT="e-indicator-bar",GT="e-play-pause",ZT="e-play-icon",$T="e-pause-icon",KT="e-previous-button",JT="e-next-button",tO="e-play-button",eO="e-hover-arrows",iO="e-carousel-hover",nO="e-template",rO="e-carousel-slide-animation",oO="e-carousel-fade-animation",sO="e-carousel-custom-animation",aO="e-carousel-animation-none",lO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return HT(e,t),UT([W()],e.prototype,"cssClass",void 0),UT([W()],e.prototype,"interval",void 0),UT([W()],e.prototype,"template",void 0),UT([W()],e.prototype,"htmlAttributes",void 0),e}(Rp),hO=(function(t){function e(e,i){return t.call(this,e,i)||this}HT(e,t),e.prototype.getModuleName=function(){return"e-carousel".replace("e-","")},e.prototype.getPersistData=function(){return this.addOnPersist(["selectedIndex"])},e.prototype.preRender=function(){this.keyConfigs={home:"home",end:"end",space:"space",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow"};this.localeObj=new uu(this.getModuleName(),{nextSlide:"Next slide",of:"of",pauseSlideTransition:"Pause slide transition",playSlideTransition:"Play slide transition",previousSlide:"Previous slide",slide:"Slide",slideShow:"Slide show"},this.locale)},e.prototype.render=function(){this.initialize(),this.renderSlides(),this.renderNavigators(),this.renderPlayButton(),this.renderIndicators(),this.applyAnimation(),this.wireEvents()},e.prototype.onPropertyChanged=function(t,e){for(var i,n,r=0,o=Object.keys(t);r<o.length;r++){switch(o[r]){case"animationEffect":this.applyAnimation();break;case"cssClass":R(this.element,[t.cssClass],[e.cssClass]);break;case"selectedIndex":this.setActiveSlide(this.selectedIndex,e.selectedIndex>this.selectedIndex?"Previous":"Next"),this.autoSlide();break;case"htmlAttributes":h(this.htmlAttributes)||this.setHtmlAttributes(this.htmlAttributes,this.element);break;case"enableTouchSwipe":!this.enableTouchSwipe&&this.touchModule&&this.touchModule.destroy(),this.element.querySelector("."+FT)&&this.renderTouchActions();break;case"loop":this.loop&&h(this.autoSlideInterval)&&this.applySlideInterval(),this.handleNavigatorsActions(this.selectedIndex),this.partialVisible&&this.reRenderSlides();break;case"enableRtl":if((n=[].slice.call(this.element.querySelectorAll("."+KT+",\n                ."+JT+", ."+tO))).push(this.element),this.enableRtl?I(n,"e-rtl"):x(n,"e-rtl"),this.partialVisible){var s=this.element.querySelector("."+FT),a=this.loop?2:0,l=s.firstElementChild.clientWidth;s.style.transform=this.getTranslateX(l,this.selectedIndex+a)}break;case"buttonsVisibility":if(i=this.element.querySelector("."+QT))switch(this.buttonsVisibility){case"Hidden":this.resetTemplates(["previousButtonTemplate","nextButtonTemplate"]),O(i);break;case"VisibleOnHover":I([].slice.call(i.childNodes),eO);break;case"Visible":x([].slice.call(i.childNodes),eO)}else this.renderNavigators(),this.renderPlayButton();break;case"width":P(this.element,{width:m(this.width)});break;case"height":P(this.element,{height:m(this.height)});break;case"autoPlay":this.showPlayButton&&h(this.playButtonTemplate)&&this.playButtonClickHandler(null,!0),this.autoSlide();break;case"interval":this.autoSlide();break;case"showIndicators":i=this.element.querySelector("."+XT),!this.showIndicators&&i&&(this.resetTemplates(["indicatorsTemplate"]),O(i)),this.renderIndicators();break;case"showPlayButton":i=this.element.querySelector("."+GT),!this.showPlayButton&&i&&(O(i),this.resetTemplates(["playButtonTemplate"])),this.renderPlayButton();break;case"items":case"dataSource":this.reRenderSlides();break;case"partialVisible":this.partialVisible?I([this.element],"e-partial"):x([this.element],"e-partial"),this.reRenderSlides()}}},e.prototype.reRenderSlides=function(){var t=this.element.querySelector("."+FT);t&&(this.resetTemplates(["itemTemplate"]),O(t)),this.renderSlides()},e.prototype.initialize=function(){var t=[];this.cssClass&&t.push(this.cssClass),this.enableRtl&&t.push("e-rtl"),this.partialVisible&&t.push("e-partial"),I([this.element],t),P(this.element,{width:m(this.width),height:m(this.height)}),L(this.element,{tabindex:"0","aria-roledescription":"carousel","aria-label":this.localeObj.getConstant("slideShow")}),h(this.htmlAttributes)||this.setHtmlAttributes(this.htmlAttributes,this.element)},e.prototype.renderSlides=function(){var t=this,e=this.element.querySelector("."+_T);e||(e=this.createElement("div",{className:_T}),this.element.appendChild(e));var i=this.createElement("div",{className:FT,attrs:{"aria-live":this.autoPlay?"off":"polite"}});if(e.appendChild(i),this.partialVisible&&this.loop&&(this.items.length>0?this.items.slice(-2).forEach(function(e,n){t.renderSlide(e,e.template,n,i,!0)}):this.dataSource.length>0&&this.dataSource.slice(-2).forEach(function(e,n){t.renderSlide(e,t.itemTemplate,n,i,!0)})),this.items.length>0?(this.slideItems=this.items,this.items.forEach(function(e,n){t.renderSlide(e,e.template,n,i)})):this.dataSource.length>0&&(this.slideItems=this.dataSource,this.dataSource.forEach(function(e,n){t.renderSlide(e,t.itemTemplate,n,i)})),this.partialVisible&&this.loop&&(this.items.length>0?this.items.slice(0,2).forEach(function(e,n){t.renderSlide(e,e.template,n,i,!0)}):this.dataSource.length>0&&this.dataSource.slice(0,2).forEach(function(e,n){t.renderSlide(e,t.itemTemplate,n,i,!0)})),this.renderTemplates(),this.partialVisible){i.style.setProperty("--carousel-items-count",""+i.children.length);var n=i.firstElementChild.clientWidth,r=this.loop?2:0;i.style.transitionProperty="none",i.style.transform=this.getTranslateX(n,this.selectedIndex+r)}this.autoSlide(),this.renderTouchActions(),this.renderKeyboardActions()},e.prototype.getTranslateX=function(t,e){return void 0===e&&(e=1),this.enableRtl?"translateX("+t*e+"px)":"translateX("+-t*e+"px)"},e.prototype.renderSlide=function(t,e,i,n,r){void 0===r&&(r=!1);var o=this.createElement("div",{id:d("carousel_item"),className:YT+" "+(t.cssClass?t.cssClass:"")+" "+(this.selectedIndex!==i||r?"":VT),attrs:{"aria-hidden":this.selectedIndex!==i||r?"true":"false","data-index":i.toString(),"aria-role":"group","aria-roledescription":"slide"}});r&&o.classList.add("e-cloned"),h(t.htmlAttributes)||this.setHtmlAttributes(t.htmlAttributes,o);var s=this.element.id+"_template";E(this.templateParser(e)(t,this,"itemTemplate",s,!1),o),n.appendChild(o)},e.prototype.renderNavigators=function(){if("Hidden"!==this.buttonsVisibility){var t=this.createElement("div",{className:QT});this.element.querySelector("."+_T).insertAdjacentElement("afterend",t),!h(this.slideItems)&&this.slideItems.length>1&&(this.renderNavigatorButton("Previous"),this.renderNavigatorButton("Next")),this.renderTemplates()}},e.prototype.renderNavigatorButton=function(t){var e=this.createElement("div",{className:("Previous"===t?WT:"e-next")+" "+("VisibleOnHover"===this.buttonsVisibility?eO:"")});if("Previous"===t&&this.previousButtonTemplate){I([e],nO);var i=this.element.id+"_previousButtonTemplate";E(this.templateParser(this.previousButtonTemplate)({type:"Previous"},this,"previousButtonTemplate",i,!1),e)}else if("Next"===t&&this.nextButtonTemplate){I([e],nO);i=this.element.id+"_nextButtonTemplate";E(this.templateParser(this.nextButtonTemplate)({type:"Next"},this,"nextButtonTemplate",i,!1),e)}else{var n=this.createElement("button",{attrs:{"aria-label":this.localeObj.getConstant("Previous"===t?"previousSlide":"nextSlide"),type:"button"}});new Um({cssClass:"e-flat e-round "+("Previous"===t?KT:JT),iconCss:"e-icons "+("Previous"===t?"e-previous-icon":"e-next-icon"),enableRtl:this.enableRtl,disabled:!this.loop&&this.selectedIndex===("Previous"===t?0:this.slideItems.length-1)}).appendTo(n),e.appendChild(n)}this.element.querySelector("."+QT).appendChild(e),Ep.add(e,"click",this.navigatorClickHandler,this)},e.prototype.renderPlayButton=function(){if(!(h(this.slideItems)||"Hidden"===this.buttonsVisibility||!this.showPlayButton||this.slideItems.length<=1)){var t=this.createElement("div",{className:GT+" "+("VisibleOnHover"===this.buttonsVisibility?eO:"")});if(this.playButtonTemplate){I([t],nO);var e=this.element.id+"_playButtonTemplate";E(this.templateParser(this.playButtonTemplate)({},this,"playButtonTemplate",e,!1),t)}else{var i=this.createElement("button",{attrs:{"aria-label":this.localeObj.getConstant(this.autoPlay?"pauseSlideTransition":"playSlideTransition"),type:"button"}}),n=this.selectedIndex===this.slideItems.length-1&&!this.loop,r=new Um({cssClass:"e-flat e-round "+tO,iconCss:"e-icons "+(this.autoPlay&&!n?$T:ZT),isToggle:!0,enableRtl:this.enableRtl});if(n){this.setProperties({autoPlay:!1},!0),i.setAttribute("aria-label",this.localeObj.getConstant("playSlideTransition"));this.element.querySelector("."+FT).setAttribute("aria-live","polite")}r.appendTo(i),t.appendChild(i)}var o=this.element.querySelector("."+QT);o.insertBefore(t,o.lastElementChild),this.renderTemplates(),Ep.add(t,"click",this.playButtonClickHandler,this)}},e.prototype.renderIndicators=function(){var t=this;if(this.showIndicators){var e=this.createElement("div",{className:XT}),i=this.createElement("div",{className:"e-indicator-bars"});e.appendChild(i),this.slideItems&&this.slideItems.forEach(function(e,n){var r=t.createElement("div",{className:qT+" "+(t.selectedIndex===n?VT:""),attrs:{"data-index":n.toString(),"aria-current":t.selectedIndex===n?"true":"false"}});if(t.indicatorsTemplate){I([r],nO);var o=t.element.id+"_indicatorsTemplate";E(t.templateParser(t.indicatorsTemplate)({index:n,selectedIndex:t.selectedIndex},t,"indicatorsTemplate",o,!1),r)}else{var s=t.createElement("button",{className:"e-indicator",attrs:{type:"button","aria-label":t.localeObj.getConstant("slide")+" "+(n+1)+" "+t.localeObj.getConstant("of")+" "+t.slideItems.length}});r.appendChild(s),s.appendChild(t.createElement("div",{}));new Um({cssClass:"e-flat e-small"}).appendTo(s)}i.appendChild(r),Ep.add(r,"click",t.indicatorClickHandler,t)}),this.element.appendChild(e)}},e.prototype.renderKeyboardActions=function(){this.keyModule=new pu(this.element,{keyAction:this.keyHandler.bind(this),keyConfigs:this.keyConfigs})},e.prototype.renderTouchActions=function(){this.enableTouchSwipe&&(this.touchModule=new yu(this.element,{swipe:this.swipeHandler.bind(this)}))},e.prototype.applyAnimation=function(){switch(x([this.element],[sO,oO,rO,aO]),this.animationEffect){case"Slide":I([this.element],rO);break;case"Fade":I([this.element],oO);break;case"None":I([this.element],aO);break;case"Custom":I([this.element],sO)}},e.prototype.autoSlide=function(){h(this.slideItems)||this.slideItems.length<=1||(this.resetSlideInterval(),this.applySlideInterval())},e.prototype.autoSlideChange=function(){var t=this.element.querySelector("."+VT);if(!h(t)){var e=parseInt(t.dataset.index,10);if(this.loop||e!==this.slideItems.length-1){var i=(e+1)%this.slideItems.length;this.element.classList.contains(iO)||this.setActiveSlide(i,"Next"),this.autoSlide()}else this.resetSlideInterval()}},e.prototype.applySlideInterval=function(){var t=this;if(this.autoPlay&&!this.element.classList.contains(iO)){var e=this.interval;this.items.length>0&&!h(this.items[this.selectedIndex].interval)&&(e=this.items[this.selectedIndex].interval),this.autoSlideInterval=setInterval(function(){return t.autoSlideChange()},e)}},e.prototype.resetSlideInterval=function(){clearInterval(this.autoSlideInterval),this.autoSlideInterval=null},e.prototype.getSlideIndex=function(t){var e=this.selectedIndex;return"Previous"===t?--e<0&&(e=this.slideItems.length-1):++e===this.slideItems.length&&(e=0),e},e.prototype.setActiveSlide=function(t,e,i){var n=this;if(void 0===i&&(i=!1),!(this.element.querySelectorAll("."+YT+".e-prev,."+YT+".e-next").length>0)){var r=[].slice.call(this.element.querySelectorAll("."+YT+":not(.e-cloned)")),o=this.element.querySelector("."+YT+"."+VT);if(h(o)&&this.showIndicators){var s=this.element.querySelector("."+qT+"."+VT),a=parseInt(s.dataset.index,10);I([r[parseInt(a.toString(),10)]],VT)}else if(h(o))I([r[parseInt(t.toString(),10)]],VT);else{var l=parseInt(o.dataset.index,10),c=r[parseInt(t.toString(),10)],d={currentIndex:l,nextIndex:t,currentSlide:o,nextSlide:c,slideDirection:e,isSwiped:i,cancel:!1};this.trigger("slideChanging",d,function(o){if(!o.cancel){n.setProperties({selectedIndex:t},!0),L(o.currentSlide,{"aria-hidden":"true"}),L(o.nextSlide,{"aria-hidden":"false"});var s=[].slice.call(n.element.querySelectorAll("."+qT));if(s.length>0&&(L(s[parseInt(l.toString(),10)],{"aria-current":"false"}),L(s[parseInt(t.toString(),10)],{"aria-current":"true"}),x(s,VT),I([s[parseInt(t.toString(),10)]],VT)),n.slideChangedEventArgs={currentIndex:o.nextIndex,previousIndex:o.currentIndex,currentSlide:o.nextSlide,previousSlide:o.currentSlide,slideDirection:e,isSwiped:i},n.partialVisible){var a=n.element.querySelector("."+FT),h=r[parseInt(t.toString(),10)].clientWidth;a.style.transitionProperty="transform",n.loop?0===n.slideChangedEventArgs.currentIndex&&"Next"===n.slideChangedEventArgs.slideDirection?a.style.transform=n.getTranslateX(h,r.length+2):n.slideChangedEventArgs.currentIndex===n.slideItems.length-1&&"Previous"===n.slideChangedEventArgs.slideDirection?a.style.transform=n.getTranslateX(h):a.style.transform=n.getTranslateX(h,t+2):a.style.transform=n.getTranslateX(h,t)}"Slide"===n.animationEffect?"Previous"===e?(I([o.nextSlide],"e-prev"),o.nextSlide.setAttribute("data-slide-height",o.nextSlide.offsetHeight.toString()),I([o.currentSlide,o.nextSlide],"e-transition-end")):(I([o.nextSlide],"e-next"),o.nextSlide.setAttribute("data-slide-height",o.nextSlide.offsetHeight.toString()),I([o.currentSlide,o.nextSlide],"e-transition-start")):"Fade"===n.animationEffect?(x([o.currentSlide],VT),I([o.nextSlide],VT)):"Custom"===n.animationEffect?"Previous"===e?(I([o.nextSlide],"e-next"),I([o.currentSlide],"e-prev")):(I([o.currentSlide],"e-prev"),I([o.nextSlide],"e-next")):n.onTransitionEnd(),n.handleNavigatorsActions(t)}})}}},e.prototype.onTransitionEnd=function(){var t=this;if(this.slideChangedEventArgs){if(this.partialVisible&&this.loop&&(0===this.slideChangedEventArgs.currentIndex&&"Next"===this.slideChangedEventArgs.slideDirection||this.slideChangedEventArgs.currentIndex===this.slideItems.length-1&&"Previous"===this.slideChangedEventArgs.slideDirection)){var e=this.element.querySelector("."+FT),i=this.slideChangedEventArgs.currentSlide.clientWidth;e.style.transitionProperty="none",e.style.transform=this.getTranslateX(i,this.slideChangedEventArgs.currentIndex+2)}I([this.slideChangedEventArgs.currentSlide],VT),x([this.slideChangedEventArgs.previousSlide],VT),this.trigger("slideChanged",this.slideChangedEventArgs,function(){x(t.element.querySelectorAll("."+YT),["e-prev","e-next","e-transition-start","e-transition-end"]),t.slideChangedEventArgs=null})}},e.prototype.setHtmlAttributes=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){var r=n[i];"class"===r?I([e],t[""+r]):e.setAttribute(r,t[""+r])}},e.prototype.templateParser=function(t){if(t)try{return document.querySelectorAll(t).length?gt(document.querySelector(t).innerHTML.trim()):gt(t)}catch(e){return gt(t)}},e.prototype.getNavigatorState=function(t,e){var i=t.querySelector("."+(e?KT:JT));if(i){return y(i,Um).disabled}return!1},e.prototype.navigatorClickHandler=function(t){var e=t.currentTarget;if(!this.getNavigatorState(e,e.classList.contains(WT))){var i=e.classList.contains(WT)?"Previous":"Next";this.setActiveSlide(this.getSlideIndex(i),i),this.autoSlide()}},e.prototype.indicatorClickHandler=function(t){var e=j(t.target,"."+qT),i=parseInt(e.dataset.index,10);this.selectedIndex!==i&&(this.setActiveSlide(i,this.selectedIndex>i?"Previous":"Next"),this.autoSlide())},e.prototype.playButtonClickHandler=function(t,e){void 0===e&&(e=!1);var i=this.element.querySelector("."+tO);if(i){var n=y(i,Um);e||this.setProperties({autoPlay:!this.autoPlay},!0),i.setAttribute("aria-label",this.localeObj.getConstant(this.autoPlay?"pauseSlideTransition":"playSlideTransition")),n.iconCss="e-icons "+(this.autoPlay?$T:ZT),n.dataBind();this.element.querySelector("."+FT).setAttribute("aria-live",this.autoPlay?"off":"polite"),this.autoPlay&&!this.loop&&this.selectedIndex===this.slideItems.length-1&&this.setActiveSlide(0,"Next"),this.autoSlide()}},e.prototype.keyHandler=function(t){var e,i,n=!1,r=t.target;switch(t.preventDefault(),t.action){case"space":this.showIndicators&&r.classList.contains("e-indicator")?r.click():r.classList.contains("e-carousel")||r.classList.contains(tO)?this.playButtonClickHandler(t):r.classList.contains(JT)?this.next():r.classList.contains(KT)&&this.prev();break;case"end":i=this.slideItems.length-1,e="Next",n=!0;break;case"home":i=0,e="Previous",n=!0;break;case"moveUp":case"moveLeft":case"moveDown":case"moveRight":this.showIndicators&&h(this.indicatorsTemplate)&&this.element.focus(),e="moveUp"===t.action||"moveLeft"===t.action?"Previous":"Next",i=this.getSlideIndex(e),n=!this.isSuspendSlideTransition(i,e)}n&&(this.setActiveSlide(i,e),this.autoSlide(),n=!1)},e.prototype.swipeHandler=function(t){if(!(this.element.classList.contains(iO)||h(this.slideItems)||this.slideItems.length<=1)){var e="Right"===t.swipeDirection?"Previous":"Next",i=this.getSlideIndex(e);this.isSuspendSlideTransition(i,e)||(this.setActiveSlide(i,e,!0),this.autoSlide())}},e.prototype.isSuspendSlideTransition=function(t,e){return!this.loop&&("Next"===e&&0===t||"Previous"===e&&t===this.slideItems.length-1)},e.prototype.handleNavigatorsActions=function(t){if("Hidden"!==this.buttonsVisibility){if(this.showPlayButton){var e=this.element.querySelector("."+tO),i=this.selectedIndex===this.slideItems.length-1&&!this.loop,n=h(this.playButtonTemplate)&&e&&i;if(h(this.playButtonTemplate)&&e&&!i&&(n=!e.classList.contains(VT)),n){this.setProperties({autoPlay:!i},!0),e.setAttribute("aria-label",this.localeObj.getConstant(this.autoPlay?"pauseSlideTransition":"playSlideTransition"));this.element.querySelector("."+FT).setAttribute("aria-live",this.autoPlay?"off":"polite");(s=y(e,Um)).iconCss="e-icons "+(this.autoPlay?$T:ZT),s.dataBind()}}var r=this.element.querySelector("."+KT);if(r&&h(this.previousButtonTemplate)){(s=y(r,Um)).disabled=!this.loop&&0===t,s.dataBind()}var o=this.element.querySelector("."+JT);if(o&&h(this.nextButtonTemplate)){var s;(s=y(o,Um)).disabled=!this.loop&&t===this.slideItems.length-1,s.dataBind()}}},e.prototype.onHoverActions=function(t){var e=this.element.querySelector("."+QT);switch(t.type){case"mouseenter":"VisibleOnHover"===this.buttonsVisibility&&e&&x([].slice.call(e.childNodes),eO),this.pauseOnHover&&I([this.element],iO);break;case"mouseleave":"VisibleOnHover"===this.buttonsVisibility&&e&&I([].slice.call(e.childNodes),eO),x([this.element],iO)}this.autoSlide()},e.prototype.onFocusActions=function(t){switch(t.type){case"focusin":I([this.element],iO);break;case"focusout":x([this.element],iO)}this.autoSlide()},e.prototype.destroyButtons=function(){for(var t=0,e=[].slice.call(this.element.querySelectorAll(".e-control.e-btn"));t<e.length;t++){var i=y(e[t],Um);i&&i.destroy()}},e.prototype.wireEvents=function(){Ep.add(this.element,"focusin focusout",this.onFocusActions,this),Ep.add(this.element,"mouseenter mouseleave",this.onHoverActions,this),Ep.add(this.element.firstElementChild,"animationend",this.onTransitionEnd,this),Ep.add(this.element.firstElementChild,"transitionend",this.onTransitionEnd,this)},e.prototype.unWireEvents=function(){var t=this;[].slice.call(this.element.querySelectorAll("."+qT)).forEach(function(e){Ep.remove(e,"click",t.indicatorClickHandler)});[].slice.call(this.element.querySelectorAll(".e-previous,.e-next")).forEach(function(e){Ep.remove(e,"click",t.navigatorClickHandler)});var e=this.element.querySelector("."+GT);e&&Ep.remove(e,"click",this.playButtonClickHandler),Ep.remove(this.element.firstElementChild,"animationend",this.onTransitionEnd),Ep.remove(this.element.firstElementChild,"transitionend",this.onTransitionEnd),Ep.clearEvents(this.element)},e.prototype.prev=function(){if(this.loop||0!==this.selectedIndex){var t=0===this.selectedIndex?this.slideItems.length-1:this.selectedIndex-1;this.setActiveSlide(t,"Previous"),this.autoSlide()}},e.prototype.next=function(){if(this.loop||this.selectedIndex!==this.slideItems.length-1){var t=this.selectedIndex===this.slideItems.length-1?0:this.selectedIndex+1;this.setActiveSlide(t,"Next"),this.autoSlide()}},e.prototype.play=function(){var t=this.element.querySelector("."+ZT);if(this.showPlayButton&&t){R(t,[$T],[ZT]);this.element.querySelector("."+tO).setAttribute("aria-label",this.localeObj.getConstant("pauseSlideTransition"))}this.setProperties({autoPlay:!0},!0);this.element.querySelector("."+FT).setAttribute("aria-live","off"),this.applySlideInterval()},e.prototype.pause=function(){var t=this.element.querySelector("."+$T);if(this.showPlayButton&&t){this.element.querySelector("."+tO).setAttribute("aria-label",this.localeObj.getConstant("playSlideTransition")),R(t,[ZT],[$T])}this.setProperties({autoPlay:!1},!0);this.element.querySelector("."+FT).setAttribute("aria-live","off"),this.resetSlideInterval()},e.prototype.renderTemplates=function(){(this.isAngular||this.isReact)&&this.renderReactTemplates()},e.prototype.resetTemplates=function(t){(this.isAngular||this.isReact)&&this.clearTemplate(t)},e.prototype.destroy=function(){var e=this;this.resetTemplates(),this.touchModule&&(this.touchModule.destroy(),this.touchModule=null),this.keyModule.destroy(),this.keyModule=null,this.resetSlideInterval(),this.destroyButtons(),this.unWireEvents(),[].slice.call(this.element.children).forEach(function(t){e.element.removeChild(t)}),x([this.element],["e-carousel",this.cssClass,"e-rtl"]),["tabindex","role","style"].forEach(function(t){e.element.removeAttribute(t)}),t.prototype.destroy.call(this)},UT([q([],lO)],e.prototype,"items",void 0),UT([W("Slide")],e.prototype,"animationEffect",void 0),UT([W()],e.prototype,"previousButtonTemplate",void 0),UT([W()],e.prototype,"nextButtonTemplate",void 0),UT([W()],e.prototype,"indicatorsTemplate",void 0),UT([W()],e.prototype,"playButtonTemplate",void 0),UT([W()],e.prototype,"cssClass",void 0),UT([W([])],e.prototype,"dataSource",void 0),UT([W()],e.prototype,"itemTemplate",void 0),UT([W(0)],e.prototype,"selectedIndex",void 0),UT([W("100%")],e.prototype,"width",void 0),UT([W("100%")],e.prototype,"height",void 0),UT([W(5e3)],e.prototype,"interval",void 0),UT([W(!0)],e.prototype,"autoPlay",void 0),UT([W(!0)],e.prototype,"pauseOnHover",void 0),UT([W(!0)],e.prototype,"loop",void 0),UT([W(!1)],e.prototype,"showPlayButton",void 0),UT([W(!0)],e.prototype,"enableTouchSwipe",void 0),UT([W(!0)],e.prototype,"showIndicators",void 0),UT([W("Visible")],e.prototype,"buttonsVisibility",void 0),UT([W(!1)],e.prototype,"partialVisible",void 0),UT([W()],e.prototype,"htmlAttributes",void 0),UT([Z()],e.prototype,"slideChanging",void 0),UT([Z()],e.prototype,"slideChanged",void 0),e=UT([$],e)}(Kp),function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),cO=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},dO="e-horizontal-bottom",pO=(function(t){function e(e,i){return t.call(this,e,i)||this}hO(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.element.classList.remove("e-appbar"),this.element.removeAttribute("style"),this.element.removeAttribute("role")},e.prototype.getModuleName=function(){return"appbar"},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.preRender=function(){},e.prototype.render=function(){"HEADER"!==this.element.tagName&&this.element.setAttribute("role","header"),this.cssClass&&I([this.element],this.cssClass.split(" ")),"Bottom"===this.position&&this.element.classList.add(dO),this.isSticky&&this.element.classList.add("e-sticky"),this.enableRtl&&this.element.classList.add("e-rtl"),this.setHeightMode(),this.setColorMode(),h(this.htmlAttributes)||this.setHtmlAttributes(this.htmlAttributes,this.element)},e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"mode":x([this.element],["e-dense","e-prominent"]),this.setHeightMode();break;case"position":"Bottom"===this.position?I([this.element],dO):x([this.element],dO);break;case"cssClass":e.cssClass&&x([this.element],e.cssClass.split(" ")),t.cssClass&&I([this.element],t.cssClass.split(" "));break;case"isSticky":this.isSticky?I([this.element],"e-sticky"):x([this.element],"e-sticky");break;case"htmlAttributes":if(!h(this.htmlAttributes)){if(!h(e.htmlAttributes))for(var r=0,o=Object.keys(e.htmlAttributes);r<o.length;r++){var s=o[r];"class"===s?x([this.element],e.htmlAttributes[""+s]):this.element.removeAttribute(s)}this.setHtmlAttributes(t.htmlAttributes,this.element)}break;case"colorMode":x([this.element],["e-dark","e-primary","e-inherit","e-light"]),this.setColorMode();break;case"enableRtl":this.enableRtl?I([this.element],"e-rtl"):x([this.element],"e-rtl")}}},e.prototype.setHtmlAttributes=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){var r=n[i];"class"===r?I([e],t[""+r]):e.setAttribute(r,t[""+r])}},e.prototype.setHeightMode=function(){"Prominent"===this.mode?this.element.classList.add("e-prominent"):"Dense"===this.mode&&this.element.classList.add("e-dense")},e.prototype.setColorMode=function(){switch(this.colorMode){case"Light":this.element.classList.add("e-light");break;case"Dark":this.element.classList.add("e-dark");break;case"Primary":this.element.classList.add("e-primary");break;case"Inherit":this.element.classList.add("e-inherit")}},cO([W("Regular")],e.prototype,"mode",void 0),cO([W("Top")],e.prototype,"position",void 0),cO([W()],e.prototype,"cssClass",void 0),cO([W(!1)],e.prototype,"isSticky",void 0),cO([W()],e.prototype,"htmlAttributes",void 0),cO([W("Light")],e.prototype,"colorMode",void 0),cO([Z()],e.prototype,"created",void 0),cO([Z()],e.prototype,"destroyed",void 0),e=cO([$],e)}(Kp),function(t,e,i,n){return new(i||(i=Promise))(function(r,o){function s(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){t.done?r(t.value):new i(function(e){e(t.value)}).then(s,a)}l((n=n.apply(t,e||[])).next())})}),uO=function(t,e){function i(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}var n,r,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},gO={content:".e-diagramcontent",copy:"e-copy",paste:"e-paste",undo:"e-undo",redo:"e-redo",cut:"e-cut",selectAll:"e-selectall",grouping:"e-grouping",group:"e-group",unGroup:"e-ungroup",bringToFront:"e-bringfront",sendToBack:"e-sendback",moveForward:"e-bringforward",sendBackward:"e-sendbackward",order:"e-order"},mO=function(){function t(t,e){this.defaultItems={},this.disableItems=[],this.hiddenItems=[],this.localeText=this.setLocaleKey(),this.parent=t,this.serviceLocator=e,this.addEventListener()}return t.prototype.addEventListener=function(){this.parent.isDestroyed||this.parent.on("initial-load",this.render,this)},t.prototype.removeEventListener=function(){this.parent.isDestroyed||this.parent.off("initial-load",this.render)},t.prototype.render=function(){if(this.l10n=this.serviceLocator.getService("localization"),!f()){this.element=Ks("ul",{id:this.parent.element.id+"_contextMenu"}),this.parent.element.appendChild(this.element);var t="#"+this.parent.element.id;this.contextMenu=new JM({items:this.getMenuItems(),enableRtl:this.parent.enableRtl,enablePersistence:this.parent.enablePersistence,locale:this.parent.locale,target:t,select:this.contextMenuItemClick.bind(this),beforeOpen:this.contextMenuBeforeOpen.bind(this),onOpen:this.contextMenuOpen.bind(this),beforeItemRender:this.BeforeItemRender.bind(this),onClose:this.contextMenuOnClose.bind(this),cssClass:"e-diagram-menu",animationSettings:{effect:"None"}}),this.contextMenu.appendTo(this.element)}},t.prototype.getMenuItems=function(){var t=[],e=[],i=[];if(!this.parent.contextMenuSettings.showCustomMenuOnly){for(var n=0,r=this.getDefaultItems();n<r.length;n++){var o=r[n];-1!==o.toLocaleLowerCase().indexOf("group")?"grouping"!==o.toLocaleLowerCase()&&i.push(this.buildDefaultItems(o)):-1!==o.toLocaleLowerCase().indexOf("order")?"order"!==o.toLocaleLowerCase()&&e.push(this.buildDefaultItems(o)):t.push(this.buildDefaultItems(o))}if(i.length>0){(s=this.buildDefaultItems("grouping")).items=i,t.push(s)}if(e.length>0){var s;(s=this.buildDefaultItems("order")).items=e,t.push(s)}}if(this.parent.contextMenuSettings.items)for(var a=0,l=this.parent.contextMenuSettings.items;a<l.length;a++){var h=l[a];t.push(h)}return t},t.prototype.contextMenuOpen=function(){this.isOpen=!0},t.prototype.BeforeItemRender=function(t){this.parent.trigger(Ug,t)},t.prototype.contextMenuItemClick=function(t){document.getElementById(this.parent.element.id+"content").focus(),this.parent.trigger(Bg,t);var e=this.getKeyFromId(t.item.id);if(!t.cancel)switch(e){case"cut":this.parent.cut();break;case"copy":this.parent.copy();break;case"undo":this.parent.undo();break;case"redo":this.parent.redo();break;case"paste":this.parent.paste();break;case"selectAll":this.parent.selectAll();break;case"group":this.parent.group();break;case"unGroup":this.parent.unGroup();break;case"bringToFrontOrder":this.parent.bringToFront();break;case"moveForwardOrder":this.parent.moveForward();break;case"sendToBackOrder":this.parent.sendToBack();break;case"sendBackwardOrder":this.parent.sendBackward()}},t.prototype.contextMenuOnClose=function(t){t.items.length>0&&t.items[0].parentObj instanceof JM&&this.updateItemStatus()},t.prototype.getLocaleText=function(t){return this.l10n.getConstant(this.localeText[""+t])},t.prototype.updateItemStatus=function(){this.contextMenu.showItems(this.hiddenItems,!0),this.contextMenu.enableItems(this.disableItems,!1,!0),this.hiddenItems=[],this.disableItems=[],this.isOpen=!1},t.prototype.ensureItems=function(t,e){var i=this.getKeyFromId(t.id);this.defaultItems[""+i];-1!==this.getDefaultItems().indexOf(i)&&t.target&&(e||this.parent.checkMenu)&&!this.ensureTarget(t)&&this.hiddenItems.push(t.id)},t.prototype.refreshItems=function(){this.updateItems(),this.contextMenu.refresh()},t.prototype.updateItems=function(){for(var t=!0,e=0;e<this.parent.contextMenuSettings.items.length;e++){for(var i=this.parent.contextMenuSettings.items[parseInt(e.toString(),10)],n=0;n<this.contextMenu.items.length;n++)this.contextMenu.items[parseInt(n.toString(),10)].text===this.parent.contextMenuSettings.items[parseInt(e.toString(),10)].text&&(t=!1);t&&this.contextMenu.insertAfter([i],this.contextMenu.items[this.contextMenu.items.length-1].text)}},t.prototype.contextMenuBeforeOpen=function(t){return pO(this,void 0,void 0,function(){var e,i,n,r,o,s,a,l,h,c;return uO(this,function(d){switch(d.label){case 0:for(this.parent.checkMenu||-1===window.navigator.userAgent.indexOf("Linux")&&-1===window.navigator.userAgent.indexOf("X11")||(this.parent.checkMenu=t.cancel=!0),this.parent.checkMenu&&(this.hiddenItems=[]),(e=t).hiddenItems=[],i=0,n=t.items;i<n.length;i++)if(c=n[i],this.ensureItems(c,t.event),c.items.length)for(r=0,o=c.items;r<o.length;r++)s=o[r],this.ensureItems(s,t.event);return this.eventArgs=t.event,f()?[4,this.parent.trigger(Hg,e)]:[3,2];case 1:return"string"==typeof(e=d.sent()||e)&&(e=JSON.parse(e)),[3,3];case 2:this.parent.trigger(Hg,e),d.label=3;case 3:for(a=!0,this.hiddenItems=this.hiddenItems.concat(e.hiddenItems),this.contextMenu.enableItems(this.disableItems,!1,!0),l=this,h=0;h<t.items.length;h++)c=t.items[parseInt(h.toString(),10)],l.hiddenItems.indexOf(c.id)>-1&&l.contextMenu.hideItems([c.id],!0);for(h=0;h<l.contextMenu.items.length;h++)c=l.contextMenu.items[parseInt(h.toString(),10)],-1===l.hiddenItems.indexOf(c.id)&&(a=!1,l.contextMenu.showItems([c.id],!0));return a&&(e.cancel=a,this.hiddenItems=[]),this.parent.selectedItems.nodes.length&&this.parent.selectedItems.nodes[0].isPhase&&!this.parent.contextMenuSettings.showCustomMenuOnly&&(t.cancel=!0),[2]}})})},t.prototype.ensureTarget=function(t){var e=this.parent.selectedItems.nodes.length+this.parent.selectedItems.connectors.length,i=!1;switch(this.getKeyFromId(t.id)){case"undo":i=!(!this.parent.historyManager||!this.parent.historyManager.canUndo);break;case"redo":i=!(!this.parent.historyManager||!this.parent.historyManager.canRedo);break;case"paste":i=!!this.parent.commandHandler.clipboardData.clipObject;break;case"selectAll":i=!!(this.parent.nodes.length+this.parent.connectors.length);break;case"grouping":i=!!(e>1||this.parent.selectedItems.nodes[0]&&this.parent.selectedItems.nodes[0].children&&this.parent.selectedItems.nodes[0].children.length>1);break;case"group":i=e>1;break;case"unGroup":i=!!(this.parent.selectedItems.nodes[0]&&this.parent.selectedItems.nodes[0].children&&this.parent.selectedItems.nodes[0].children.length>1);break;case"cut":case"copy":case"order":case"bringToFrontOrder":case"moveForwardOrder":case"sendToBackOrder":case"sendBackwardOrder":i=!!e}return i},t.prototype.destroy=function(){f()||(this.contextMenu.destroy(),O(this.element)),this.removeEventListener()},t.prototype.getModuleName=function(){return"contextMenu"},t.prototype.generateID=function(t){return this.parent.element.id+"_contextMenu_"+t},t.prototype.getKeyFromId=function(t){return t.replace(this.parent.element.id+"_contextMenu_","")},t.prototype.buildDefaultItems=function(t){var e;switch(t){case"copy":e={target:gO.content,iconCss:gO.copy};break;case"cut":e={target:gO.content,iconCss:gO.cut};break;case"paste":e={target:gO.content,iconCss:gO.paste};break;case"undo":e={target:gO.content,iconCss:gO.undo};break;case"redo":e={target:gO.content,iconCss:gO.redo};break;case"grouping":e={target:gO.content};break;case"group":e={target:gO.content,iconCss:gO.group};break;case"unGroup":e={target:gO.content,iconCss:gO.unGroup};break;case"order":e={target:gO.content,iconCss:gO.order};break;case"bringToFrontOrder":e={target:gO.content,iconCss:gO.bringToFront};break;case"moveForwardOrder":e={target:gO.content,iconCss:gO.moveForward};break;case"sendToBackOrder":e={target:gO.content,iconCss:gO.sendToBack};break;case"sendBackwardOrder":e={target:gO.content,iconCss:gO.sendBackward};break;case"selectAll":e={target:gO.content}}return this.defaultItems[""+t]={text:this.getLocaleText(t),id:this.generateID(t),target:e.target,iconCss:e.iconCss?"e-icons "+e.iconCss:""},this.defaultItems[""+t]},t.prototype.getDefaultItems=function(){return["copy","cut","paste","undo","redo","selectAll","grouping","group","unGroup","order","bringToFrontOrder","moveForwardOrder","sendToBackOrder","sendBackwardOrder"]},t.prototype.setLocaleKey=function(){return{copy:"Copy",cut:"Cut",paste:"Paste",undo:"Undo",redo:"Redo",selectAll:"SelectAll",grouping:"Grouping",group:"Group",unGroup:"UnGroup",order:"Order",bringToFrontOrder:"BringToFront",moveForwardOrder:"MoveForward",sendToBackOrder:"SendToBack",sendBackwardOrder:"SendBackward"}},t}(),fO=function(){function t(){this.annotationObjects={}}return Object.defineProperty(t.prototype,"textAnnotationConnectors",{get:function(){for(var t=[],e=0,i=Object.keys(this.annotationObjects);e<i.length;e++)for(var n=i[e],r=this.annotationObjects[""+n],o=0,s=Object.keys(r);o<s.length;o++){var a=s[o];t.push(r[""+a].connector)}return t},enumerable:!0,configurable:!0}),t.prototype.getTextAnnotationConn=function(t){var e=[];if("Bpmn"===t.shape.type&&0!==t.shape.annotations.length)for(var i=this.annotationObjects[t.id],n=0,r=Object.keys(i);n<r.length;n++){var o=r[n];e.push(i[""+o].connector)}return e},t.prototype.getSize=function(t,e){var i=new Qu(t.width,t.height);if(void 0===i.width||void 0===i.height){if(e instanceof rm||(i.width=i.width||50,i.height=i.height||50),e.actualSize.width&&e.actualSize.height)return e.actualSize;e.measure(new Qu),i.width=i.width||e.desiredSize.width,i.height=i.height||e.desiredSize.height,void 0!==t.maxWidth&&(i.width=Math.min(i.width,t.maxWidth)),void 0!==t.maxHeight&&(i.height=Math.min(i.height,t.maxHeight)),void 0!==t.minWidth&&(i.width=Math.max(i.width,t.minWidth)),void 0!==t.minHeight&&(i.height=Math.max(i.height,t.minHeight))}return i},t.prototype.initBPMNContent=function(t,e,i){var n=(f(),e.shape),r=f()?e.shape.bpmnShape:e.shape.shape;if("Event"===r&&(t=this.getBPMNEventShape(e,n.event)),"Gateway"===r&&(t=this.getBPMNGatewayShape(e)),"DataObject"===r&&(t=this.getBPMNDataObjectShape(e)),"Message"!==r&&"DataSource"!==r||(t=this.getBPMNShapes(e)),"Activity"===r&&(t=this.getBPMNActivityShape(e)),"TextAnnotation"===r&&(t=this.renderBPMNTextAnnotation(i,e,t)),n.annotations.length>0){for(var o=0;o<n.annotations.length&&n.annotations[parseInt(o.toString(),10)].text;o++)t.children.push(this.getBPMNTextAnnotation(e,i,n.annotations[parseInt(o.toString(),10)],t));t.style.strokeDashArray="2 2 6 2"}return t},t.prototype.getBPMNShapes=function(t){var e=new rm;this.setStyle(e,t),0!=(t.constraints&wg.Shadow)&&(e.shadow=t.shadow);var i=pl(f()?t.shape.bpmnShape:t.shape.shape);return e.data=i,e.id=t.id+"_"+(f()?t.shape.bpmnShape:t.shape.shape),void 0!==t.width&&void 0!==t.height&&(e.width=t.width,e.height=t.height),e},t.prototype.getBPMNGatewayShape=function(t){var e=new em,i=new rm;i.id=t.id+"_0_gateway",i.offsetX=t.offsetX,i.offsetY=t.offsetY,i.data="M 40 20 L 20 40 L 0 20 L 20 0 L 40 20 Z",this.setStyle(i,t);var n=new rm;n.id=t.id+"_1_gatewayType",n.style.opacity=t.style.opacity,n.style.strokeColor=t.style.strokeColor,n.horizontalAlignment="Center",n.verticalAlignment="Center",n.relativeMode="Object";var r=t.shape.gateway,o=gl(r.type);"EventBased"===r.type||"ExclusiveEventBased"===r.type||"ParallelEventBased"===r.type?n.style.fill="white":n.style.fill="black",n.data=o,e.style.fill="transparent",e.style.strokeColor="transparent",e.style.strokeWidth=0,e.children=[i,n];var s=this.getSize(t,i);return this.setSizeForBPMNGateway(t.shape.gateway,e,s.width,s.height),e},t.prototype.getBPMNDataObjectShape=function(t){var e=new em,i=t.shape.dataObject,n=new rm;n.id=t.id+"_0_dataobj",n.data="M29.904,5 L7.853,5 L7.853,45 L42.147,45 L42.147,17.242,L29.932,5,L29.932,17.242,L42.147,17.242";var r=this.getSize(t,n);n.width=r.width,n.height=r.height,this.setStyle(n,t);var o=new rm;o.id=t.id+"_1_type",o.width=25,o.height=20,o.margin.left=5,o.margin.top=5,o.data="M 3 9.4 l 6 0 v 2.4 l 3.6 -4 L 9 4 v 2.5 H 3 V 9.4 Z",o.style.opacity=t.style.opacity;var s=new rm;switch(s.id=t.id+"_2_collection",s.width=7.5,s.height=15,s.style.fill="black",s.visible=!0,s.horizontalAlignment="Center",s.verticalAlignment="Bottom",s.relativeMode="Object",s.style.opacity=t.style.opacity,s.data="M 0 0 L 0.1 0 L 0.1 2 L 0 2 Z M 0.4 0 L 0.6 0 L 0.6 2 L0.4 2 Z M 0.9 0 L 1 0 L 1 2 L 0.9 2 Z",i.type){case"None":o.visible=!1;break;case"Input":o.style.fill="white";break;case"Output":o.style.fill="black"}return!1===i.collection&&(s.visible=!1),e.style.fill="transparent",e.style.strokeColor="transparent",e.style.strokeWidth=0,e.children=[n,o,s],e},t.prototype.getBPMNTaskShape=function(t){var e=t.shape.activity.task,i=new em,n=new Gg;n.cornerRadius=10;var r=this.getSize(t,n);n.id=t.id+"_0_task",n.width=r.width,n.height=r.height,this.setStyle(n,t),void 0!==e.call&&!0===e.call&&(n.style.strokeWidth=4),i.width=r.width,i.height=r.height;var o,s=this.getTaskChildCount(t),a=12*s,l=r.width/2-a;o=1===s?l+8:l+8*(s-1);var h=new rm;"Receive"===e.type||"Send"===e.type?(h.width=18,h.height=16):"Manual"===e.type?(h.width=16,h.height=11):(h.width=20,h.height=20),h.id=t.id+"_1_tasktType",h.margin.left=5,h.margin.top=5;var c=ml(e.type);if(h.data=c,h.style.fill="transparent",h.style.opacity=t.style.opacity,"Send"===e.type&&(h.style.fill="black"),i.style.fill="transparent",i.style.strokeColor="transparent",i.style.strokeWidth=0,i.children=[n,h],"Service"===e.type){var d=new rm;d.id=t.id+"_1_taskTypeService",d.data=c,d.margin.left=h.margin.left+9,d.margin.top=h.margin.top+9,d.style.fill="white",d.style.opacity=t.style.opacity,i.children.push(d)}var p=e.loop,u=new rm,g=fl(p);u.data=g,u.style.fill="black",u.visible="None"!==p,1===s&&(o=l+9),u.margin.left=o,!0===u.visible&&(o+=20),u.width=12,u.height=12,u.margin.bottom=5,u.id=t.id+"_2_loop",u.horizontalAlignment="Left",u.verticalAlignment="Bottom",u.setOffsetWithRespectToBounds(0,1,"Fraction"),u.relativeMode="Point",u.style.fill="transparent",h.style.opacity=t.style.opacity,i.children.push(u);var m=new rm;return m=this.getBPMNCompensationShape(t,m),!0===e.compensation?m.visible=!0:m.visible=!1,1===s&&(o=l+9),m.margin.left=o-3,o+=18,i.children.push(m),i},t.prototype.getBPMNEventShape=function(t,e,i,n){var r,o,s,a,l=new em;n=n||t.id;var h="M164.1884,84.6909000000001C156.2414,84.6909000000001,149.7764,78.2259000000001,149.7764,70.2769000000001C149.7764,62.3279000000001,156.2414,55.8629000000001,164.1884,55.8629000000001C172.1354,55.8629000000001,178.6024,62.3279000000001,178.6024,70.2769000000001C178.6024,78.2259000000001,172.1354,84.6909000000001,164.1884,84.6909000000001",c=t.shape.event;if((!f()&&"Event"===t.shape.shape||f()&&"Event"===t.shape.bpmnShape)&&(r=c.event,o=c.trigger),s=e.width,a=e.height,i)s=s||20,a=a||20;else if(void 0===e.width||void 0===e.height){var d=new rm;d.data=h;var p=this.getSize(t,d);s=p.width,a=p.height}var u=t.shape.activity;if(!f()&&"Activity"===t.shape.shape||f()&&"Activity"===t.shape.bpmnShape){u.subProcess;r=e.event,o=e.trigger}var g=new rm;g.data=h,g.id=n+"_0_event",g.width=s,g.height=a,g.horizontalAlignment="Center",g.verticalAlignment="Center",g.relativeMode="Object",this.setStyle(g,t);var m=new rm;m.data=h,m.id=n+"_1_event",m.style.gradient=t.style.gradient,m.horizontalAlignment="Center",m.verticalAlignment="Center",m.relativeMode="Object",m.style.strokeColor=t.style.strokeColor,m.style.opacity=t.style.opacity;var v=new rm,y=ul(o);switch(v.data=y,v.id=n+"_2_trigger",v.horizontalAlignment="Center",v.verticalAlignment="Center",v.relativeMode="Object",v.style.strokeColor=t.style.strokeColor,v.style.opacity=t.style.opacity,r){case"Start":m.visible=!1;break;case"NonInterruptingStart":g.style.strokeDashArray="2 3",m.visible=!1;break;case"Intermediate":g.style.fill=t.style.fill,g.style.gradient=null;break;case"NonInterruptingIntermediate":g.style.fill=t.style.fill,g.style.gradient=null,g.style.strokeDashArray="2 3",m.style.strokeDashArray="2 3";break;case"ThrowingIntermediate":case"End":g.style.fill="End"!==r?t.style.fill:"white"!==t.style.fill?t.style.fill:"black",g.style.gradient=null,v.style.fill="black",v.style.strokeColor="white"}return l.style.fill="transparent",l.style.strokeColor="transparent",l.style.strokeWidth=0,l.children=[g,m,v],this.setSizeForBPMNEvents(c,l,s,a),l},t.prototype.setEventVisibility=function(t,e){var i=t.shape.event.event,n=e[0],r=e[1];e[2];switch(i){case"Start":r.visible=!1;break;case"NonInterruptingStart":n.style.strokeDashArray="2 3",r.visible=!1}},t.prototype.setSubProcessVisibility=function(t){var e=t.shape.activity.subProcess,i=e.events.length,n="Transaction"===t.shape.activity.subProcess.type?2:0,r=t.wrapper.children[0].children[0];if(!1===e.adhoc&&(r.children[3+n+i].visible=!1),!1===e.compensation&&(r.children[4+n+i].visible=!1),i>0)for(var o=0;o<i;o++)this.setEventVisibility(t,r.children[2+o].children)},t.prototype.getBPMNSubProcessShape=function(t){var e,i,n,r=new em,o=new rm,s=(new em,new rm),a=t.shape.activity,l=a.subProcess,h=this.getSubprocessChildCount(t),c=new Gg;c.id=t.id+"_0_Subprocess",c.style.fill="transparent",c.cornerRadius=10;var d=this.getSize(t,c);c.width=d.width,c.height=d.height,r.children=[c],"Transaction"===a.subProcess.type&&this.getBPMNSubProcessTransaction(t,t.shape,r);var p=12*h,u=d.width/2;n=1===h?u-6:u-p/2-4*(h-1)/2,this.setStyle(c,t),0!=(t.constraints&wg.Shadow)&&(r.shadow=t.shadow);var g=new rm;if(g.id=t.id+"_0_collapsed",g.width=12,g.height=12,g.style.fill="black",g.style.strokeColor=t.style.strokeColor,g.margin.bottom=5,g.horizontalAlignment="Left",g.verticalAlignment="Bottom",g.setOffsetWithRespectToBounds(0,1,"Fraction"),g.relativeMode="Point",g.data=pl("collapsedShape"),g.margin.left=n,!0!==l.collapsed||l.processes?g.visible=!1:g.visible=!0,!0===g.visible&&(n+=18),r.children.push(g),"Event"===l.type){c.style.strokeWidth=1,c.style.strokeDashArray="2 2",e=l.events;for(var m=0;m<e.length;m++)i=e[parseInt(m.toString(),10)],this.getBPMNSubEvent(i,t,r)}s=this.getBPMNSubProcessLoopShape(t),1===h&&(n=u+8),s.margin.left=n,!0===s.visible&&(n+=16),r.children.push(s),c.id=t.id+"_boundary","Default"===l.boundary&&(c.style.strokeWidth=1,c.style.strokeDashArray="1 0"),"Call"===l.boundary&&(c.style.strokeWidth=4,c.style.strokeDashArray="1 0"),"Event"===l.boundary&&(c.style.strokeWidth=1,c.style.strokeDashArray="2 2"),o=this.getBPMNAdhocShape(t,o,l),1===h&&(n=u+8),o.margin.left=n,!0===o.visible&&(n+=16),r.children.push(o);var f=new rm;return!0===l.compensation?f.visible=!0:f.visible=!1,f=this.getBPMNCompensationShape(t,f),1===h&&(n=u+8),f.margin.left=n,!0===f.visible&&(n+=16),r.children.push(f),r.style.strokeColor="transparent",r.style.strokeWidth=0,r.style.fill="transparent",r},t.prototype.getBPMNSubEvent=function(t,e,i,n){i.children=i.children||[];var r=this.getBPMNEventShape(e,t,!0,n);this.getBPMNSubprocessEvent(e,r,t),r.id=n||e.id+"_subprocessEvents",r.width=t.width||20,r.height=t.height||20,r.setOffsetWithRespectToBounds(t.offset.x,t.offset.y,"Fraction"),r.relativeMode="Point",r.margin=t.margin,r.horizontalAlignment=t.horizontalAlignment,r.verticalAlignment=t.verticalAlignment,r.style.fill="transparent",r.style.strokeColor="transparent",r.style.strokeWidth=0,i.children.push(r)},t.prototype.getBPMNSubProcessTransaction=function(t,e,i){var n=i.children[0].width,r=i.children[0].height,o=new Gg;o.margin={left:3,right:0,top:3,bottom:0},o.id=t.id+"_0_Subprocess_innnerRect",o.cornerRadius=10,o.width=n-6,o.height=r-6,i.children.push(o);var s=new em;s.id=t.id+"_transaction_events",s.style.gradient=t.style.gradient;var a=e.activity.subProcess.transaction;this.getBPMNSubEvent(a.success,t,s,t.id+"_success"),this.getBPMNSubEvent(a.cancel,t,s,t.id+"_cancel"),this.getBPMNSubEvent(a.failure,t,s,t.id+"_failure"),this.updateDiagramContainerVisibility(s.children[0],a.success.visible),this.updateDiagramContainerVisibility(s.children[1],a.cancel.visible),this.updateDiagramContainerVisibility(s.children[2],a.failure.visible),s.float=!0,s.width=n,s.height=r,s.style.fill=s.style.strokeColor="transparent",i.children.push(s)},t.prototype.getBPMNSubProcessLoopShape=function(t){var e,i,n=t.shape.activity,r=new rm;return e=n.subProcess.loop,i=fl(e),r.visible="None"!==e,r.id=t.id+"_loop",r.data=i,r.style.fill="black",r.width=12,r.height=12,r.horizontalAlignment="Left",r.verticalAlignment="Bottom",r.setOffsetWithRespectToBounds(0,1,"Fraction"),r.relativeMode="Point",r.margin.bottom=5,r.style.fill="transparent",r.style.strokeColor=t.style.strokeColor,r},t.prototype.drag=function(t,e,i,n){var r=n.nameTable[t.processId];t.margin.top+i>=0&&n.nodePropertyChange(t,{},{margin:{top:t.margin.top+i}}),t.margin.left+e>=0&&n.nodePropertyChange(t,{},{margin:{left:t.margin.left+e}});var o=this.getChildrenBound(r,t.id,n);this.updateSubProcessess(o,t,n),r.wrapper.measure(new Qu(void 0,void 0)),r.wrapper.arrange(r.wrapper.desiredSize),n.refreshCanvasLayers(),n.updateSelector(),this.updateDocks(t,n)},t.prototype.dropBPMNchild=function(t,e,i){if(e&&"Bpmn"===e.shape.type&&"Bpmn"===t.shape.type&&(!f()&&"TextAnnotation"!==e.shape.shape||f()&&"TextAnnotation"!==e.shape.bpmnShape)){var n=i.nameTable[t.id].shape.activity.subProcess;if(i.currentSymbol&&"Bpmn"===t.shape.type&&!n.collapsed)return void(e.processId=t.id);if(n.processes=n.processes||[],n.processes&&-1===n.processes.indexOf(e.id)&&!n.collapsed){n.processes.push(e.id);var r=fa(e),o=i.nameTable[e.id].wrapper,s=i.nameTable[t.id].wrapper;o.margin.top=o.offsetY-o.actualSize.height/2-(t.offsetY-t.actualSize.height/2),o.margin.left=o.offsetX-o.actualSize.width/2-(t.offsetX-t.actualSize.width/2),o.margin.top=o.margin.top<0?0:o.margin.top,o.margin.left=o.margin.left<0?0:o.margin.left,i.nameTable[e.id].processId=t.id,s.children.push(i.nameTable[e.id].wrapper);var a=this.getChildrenBound(t,e.id,i);this.updateSubProcessess(a,e,i),s.measure(new Qu(void 0,void 0)),s.arrange(s.desiredSize),i.refreshCanvasLayers(),i.updateSelector();for(var l=[],h=(l=l.concat(e.outEdges,e.inEdges)).length-1;h>=0;h--)-1===i.bpmnModule.textAnnotationConnectors.indexOf(i.nameTable[l[parseInt(h.toString(),10)]])&&i.remove(i.nameTable[l[parseInt(h.toString(),10)]]);var c={type:"PositionChanged",undoObject:{nodes:[r]},redoObject:{nodes:[fa(e)]},category:"Internal"};i.addHistoryEntry(c),"SVG"===i.mode&&e.zIndex<t.zIndex&&(i.updateProcesses(e),this.updateSubprocessNodeIndex(e,i,t)),this.updateDocks(e,i)}}},t.prototype.updateIndex=function(t,e){var i=e,n=t.getIndex(i,i.id);t.nodes.splice(Number(n),1),i.zIndex=t.nodes[t.nodes.length-1].zIndex+1,t.nodes.push(i)},t.prototype.updateSubprocessNodeIndex=function(t,e,i){if(t.shape.activity.subProcess.processes&&t.shape.activity.subProcess.processes.length>0)for(var n=0;n<t.shape.activity.subProcess.processes.length;n++){this.updateIndex(e,t);var r=t.shape.activity.subProcess.processes[parseInt(n.toString(),10)];if(e.nameTable[""+r].shape.activity.subProcess.processes.length>0)this.updateSubprocessNodeIndex(e.nameTable[""+r],e,i);else{var o=e.nameTable[t.shape.activity.subProcess.processes[parseInt(n.toString(),10)]];this.updateIndex(e,o)}}else this.updateIndex(e,t)},t.prototype.updateDocks=function(t,e){if("Bpmn"===t.shape.type&&t.shape.activity.subProcess.processes&&!t.shape.activity.subProcess.collapsed)for(var i=0,n=t.shape.activity.subProcess.processes;i<n.length;i++){var r=n[i],o=e.nameTable[""+r];o&&(e.updateConnectorEdges(o),o.wrapper.measure(new Qu(o.wrapper.width,o.wrapper.height)),o.wrapper.arrange(o.wrapper.desiredSize),o.shape.activity.subProcess.processes&&o.shape.activity.subProcess.processes.length&&this.updateDocks(o,e))}},t.prototype.removeBpmnProcesses=function(t,e){var i=e.nameTable[t.processId];if("Bpmn"===t.shape.type&&t.shape.activity.subProcess.processes&&t.shape.activity.subProcess.processes.length>0)for(var n=(r=t.shape.activity.subProcess.processes).length-1;n>=0;n--)e.remove(e.nameTable[r[parseInt(n.toString(),10)]]);if(i){e.removeDependentConnector(t);var r=i.shape.activity.subProcess.processes;this.removeChildFromBPMN(i.wrapper,t.id);var o=r.indexOf(t.id);r.splice(o,1)}},t.prototype.removeChildFromBPMN=function(t,e){for(var i=0,n=t.children;i<n.length;i++){var r=n[i];r.id===e?t.children.splice(t.children.indexOf(r),1):r.children&&this.removeChildFromBPMN(r,e)}},t.prototype.removeProcess=function(t,e){var i=e.nameTable[""+t];if(i){var n=e.nameTable[i.processId];if(n&&"Bpmn"===n.shape.type){var r=n.shape.activity.subProcess.processes;e.removeDependentConnector(i),this.removeChildFromBPMN(n.wrapper,t);var o=r.indexOf(t);r.splice(o,1),i.processId="",e.refreshDiagramLayer(),e.updateSelector()}}},t.prototype.addProcess=function(t,e,i){t.id=t.id||da();var n=t.id,r=i.nameTable[""+n];r||i.add(t),t.processId=e;var o=i.nameTable[""+e],s=o.shape.activity.subProcess;if(r&&o&&"Bpmn"===o.shape.type&&"Bpmn"===r.shape.type&&s.processes){r.processId=e;var a=o.shape.activity.subProcess.processes;if(a.indexOf(n)<0&&a.push(n),o.wrapper.children.push(r.wrapper),o.wrapper.measure(new Qu),o.wrapper.arrange(o.wrapper.desiredSize),i.bpmnModule.updateDocks(o,i),i.refreshDiagramLayer(),"SVG"===i.mode&&r.shape&&r.shape.activity&&!r.shape.activity.subProcess.processes){Us(e+"_groupElement").appendChild(Us(t.id+"_groupElement"))}}},t.prototype.getChildrenBound=function(t,e,i){var n,r=t.shape.activity.subProcess.processes;if(r&&r.length)for(var o=0,s=r;o<s.length;o++){var a=s[o];e!==a&&(n=n?i.nameTable[""+a].wrapper.bounds.uniteRect(n):i.nameTable[""+a].wrapper.bounds)}return n||i.nameTable[""+e].wrapper.bounds},t.prototype.updateSubProcessess=function(t,e,i){var n,r,o,s,a=i.nameTable[e.processId],l={x:.5,y:.5};a.wrapper.bounds.left+e.margin.left+e.width>a.wrapper.bounds.right&&(o=!0),a.wrapper.bounds.top+e.margin.top+e.height>a.wrapper.bounds.bottom&&(s=!0),o&&(l.x=0),s&&(l.y=0);var h=a.wrapper.actualSize;o&&(n=(e.wrapper.margin.left+e.wrapper.bounds.width)/h.width),s&&(r=(e.wrapper.margin.top+e.wrapper.bounds.height)/h.height),(n>0||r>0)&&i.commandHandler.scale(i.nameTable[e.processId],n||1,r||1,l)},t.prototype.getBPMNCompensationShape=function(t,e){return e.id=t.id+"_0_compensation",e.width=12,e.height=12,e.margin.bottom=5,e.style.fill="transparent",e.style.strokeColor=t.style.strokeColor,e.horizontalAlignment="Left",e.verticalAlignment="Bottom",e.relativeMode="Object",e.data="M 22.462 18.754 l -6.79 3.92 l 6.79 3.92 V 22.89 l 6.415 3.705 v -7.841 l -6.415 3.705 V 18.754 Z M 28.331 19.701 v 5.947 l -5.149 -2.973 L 28.331 19.701 Z M 21.916 25.647 l -5.15 -2.973 l 5.15 -2.973 V 25.647 Z M 22.275 12.674 c -5.513 0 -9.999 4.486 -9.999 9.999 c 0 5.514 4.486 10.001 9.999 10.001 c 5.514 0 9.999 -4.486 9.999 -10.001 C 32.274 17.16 27.789 12.674 22.275 12.674 Z M 22.275 32.127  c -5.212 0 -9.453 -4.241 -9.453 -9.454 c 0 -5.212 4.241 -9.453 9.453 -9.453 c 5.212 0 9.453 4.241 9.453 9.453 C 31.728 27.887 27.487 32.127 22.275 32.127 Z",e},t.prototype.getBPMNActivityShape=function(t){var e,i=new em,n=t.shape.activity,r=n.activity,o=n.subProcess;n.activity;return"Task"===r&&(e=this.getBPMNTaskShape(t)),"SubProcess"===r&&o&&(e=this.getBPMNSubProcessShape(t)),e.id=r+t.id,i.children=[e],i.style.fill="transparent",i.style.strokeColor="transparent",i.style.strokeWidth=0,i},t.prototype.getBPMNSubprocessEvent=function(t,e,i){var n,r;if(0!==i.annotations.length)for(var o=0;o<i.annotations.length;o++){var s=i.annotations[parseInt(o.toString(),10)];(n=t.initAnnotationWrapper(s)).width=i.width,n.height=i.height,e.children.push(n)}if(0!==i.ports.length)for(o=0;o<i.ports.length;o++){var a=i.ports[parseInt(o.toString(),10)];r=t.initPortWrapper(a),e.children.push(r)}},t.prototype.getBPMNAdhocShape=function(t,e,i){return e.id=t.id+"_0_adhoc",e.width=12,e.height=8,e.style.fill="black",e.style.strokeColor=t.style.strokeColor,e.margin.bottom=5,e.horizontalAlignment="Left",e.verticalAlignment="Bottom",e.relativeMode="Object",e.data="M 49.832 76.811 v -2.906 c 0 0 0.466 -1.469 1.931 -1.5 c 1.465 -0.031 2.331 1.219 2.897 1.688 s 1.06 0.75 1.526 0.75 c 0.466 0 1.548 -0.521 1.682 -1.208 s 0.083 3.083 0.083 3.083 s -0.76 0.969 -1.859 0.969 c -1.066 0 -1.865 -0.625 -2.464 -1.438 s -1.359 -0.998 -2.064 -0.906 C 50.598 75.467 49.832 76.811 49.832 76.811 Z",i&&!0===i.adhoc?e.visible=!0:e.visible=!1,e},t.prototype.getBPMNTextAnnotation=function(t,e,i,n){i.id=i.id||da(),i.nodeId=t.id;var r=new em,o=new rm,s=new Jg;o.id=t.id+"_"+i.id+"_path",o.width=i.width,o.height=i.height,o.relativeMode="Object",s.id=t.id+"_"+i.id+"_text",s.content=i.text;var a=t.style;s.style={fontSize:a.fontSize,italic:a.italic,gradient:null,opacity:a.opacity,bold:a.bold,textWrapping:a.textWrapping,color:a.color,fill:"white",fontFamily:a.fontFamily,whiteSpace:a.whiteSpace,textOverflow:"Wrap",strokeColor:"none",strokeWidth:0,strokeDashArray:a.strokeDashArray,textAlign:a.textAlign,textDecoration:a.textDecoration},s.horizontalAlignment="Center",s.verticalAlignment="Center",s.relativeMode="Object",s.margin={left:5,right:5,top:5,bottom:5},r.offsetX=t.offsetX+i.length*Math.cos(i.angle*(Math.PI/180)),r.offsetY=t.offsetY+i.length*Math.sin(i.angle*(Math.PI/180)),r.float=!0,r.transform=Ng.Self,r.id=t.id+"_textannotation_"+i.id,r.style.strokeColor="transparent",r.margin={left:10,right:10,top:10,bottom:10},r.relativeMode="Object",r.rotateAngle=0,r.children=[o,s];var l=new Pw(t.shape,"annotations",{id:r.id,shape:{type:"Bpmn",shape:"TextAnnotation"}},!0);l.ports=[{id:o.id+"_port",shape:"Square",offset:{x:0,y:.5}}],l.offsetX=r.offsetX,l.offsetY=r.offsetY,l.text=i.text,l.angle=i.angle,l.length=i.length,l.width=i.width,l.height=i.height,l.wrapper=r,r.children.push(l.initPortWrapper(l.ports[0]));var h=new Zu(0,0,0,0),c=t.width||t.minWidth||0,d=t.height||t.minHeight||0;void 0!==c&&void 0!==d&&(h=new Zu(t.offsetX-c/2,t.offsetY-d/2,c,d)),this.setAnnotationPath(h,r,{x:l.offsetX,y:l.offsetY},l,i.length,i.angle);var p={id:t.id+"_"+i.id+"_connector",constraints:bg.Default&~(bg.DragTargetEnd|bg.Drag),sourceID:t.id,targetID:r.id,targetDecorator:{shape:"None"}},u=new ES(t.shape,"annotations",p,!0);u.targetPortID=l.ports[0].id,u.init(e),u.wrapper.float=!1,u.wrapper.transform=Ng.Self,n.children.push(u.wrapper),u.zIndex=1e4;var g=this.annotationObjects[t.id];g||(g={}),g[i.id]||(g[i.id]={});return g[i.id].node=l,g[i.id].connector=u,this.annotationObjects[t.id]=g,e.initObject(l,void 0,!1),l.zIndex=1e4,r},t.prototype.renderBPMNTextAnnotation=function(t,e,i){e.id=e.id||da();var n=new em,r=new rm,o=new Jg;r.id="_"+e.id+"_path",r.width=e.width,r.height=e.height,r.relativeMode="Object",o.id=e.id+"_text",o.content=e.shape.annotation.text;var s=e.style;o.style={fontSize:s.fontSize,italic:s.italic,gradient:null,opacity:s.opacity,bold:s.bold,textWrapping:s.textWrapping,color:s.color,fill:"white",fontFamily:s.fontFamily,whiteSpace:s.whiteSpace,textOverflow:"Wrap",strokeColor:"none",strokeWidth:0,strokeDashArray:s.strokeDashArray,textAlign:s.textAlign,textDecoration:s.textDecoration},o.horizontalAlignment="Left",o.verticalAlignment="Center",o.relativeMode="Object",o.margin={left:5,right:5,top:5,bottom:5},n.offsetX=e.offsetX+e.shape.annotation.length*Math.cos(e.shape.annotation.angle*(Math.PI/180)),n.offsetY=e.offsetY+e.shape.annotation.length*Math.sin(e.shape.annotation.angle*(Math.PI/180)),n.float=!0,n.id=e.id+"_textannotation_"+e.id,n.style.strokeColor="transparent",n.margin={left:10,right:10,top:10,bottom:10},n.relativeMode="Object",n.rotateAngle=0,n.children=[r,o];var a=new Pw(e.shape,"annotations",{id:n.id,shape:{type:"Bpmn",shape:"TextAnnotation"}},!0);a.ports=[{id:r.id+"_port",shape:"Square",offset:{x:0,y:.5}}],a.offsetX=n.offsetX,a.offsetY=n.offsetY,a.shape&&a.shape.annotation&&(a.text=e.shape.annotation.text,a.angle=e.shape.annotation.angle,a.length=e.shape.annotation.length),a.width=e.width,a.height=e.height,a.wrapper=n,n.children.push(a.initPortWrapper(a.ports[0]));var l=new Zu(0,0,0,0),h=e.width||0,c=e.height||0;return void 0!==h&&void 0!==c&&(l=new Zu(e.offsetX-h/2,e.offsetY-c/2,h,c)),this.setAnnotationPath(l,n,{x:a.offsetX,y:a.offsetY},a,e.length,e.angle),n},t.prototype.getTextAnnotationWrapper=function(t,e){if(t&&"Bpmn"===t.shape.type){if("TextAnnotation"===(f()?t.shape.bpmnShape:t.shape.shape))return t.wrapper.children[1];if(this.annotationObjects[t.id]&&this.annotationObjects[t.id][""+e]){var i=this.annotationObjects[t.id][""+e].node;return this.getTextAnnotationWrapper(i,e)}}return null},t.prototype.addAnnotation=function(t,e,i){var n=t.wrapper.children[0],r=t.shape;e.nodeId=t.id;var o=new Mw(r,"annotations",e,!0);return r.annotations.push(o),n.children.push(this.getBPMNTextAnnotation(t,i,e,n)),t.wrapper.measure(new Qu),t.wrapper.arrange(t.wrapper.desiredSize),this.annotationObjects[t.id][e.id].connector},t.prototype.clearAnnotations=function(t,e){var i=t.shape;if(i.annotations.length)for(var n=i.annotations.length-1;n>=0;n--){var r=i.annotations[parseInt(n.toString(),10)];this.removeAnnotationObjects(t,r,e)}delete this.annotationObjects[t.id]},t.prototype.checkAndRemoveAnnotations=function(t,e){if("Bpmn"===t.shape.type)if(!f()&&"TextAnnotation"===t.shape.shape||f()&&"TextAnnotation"===t.shape.bpmnShape)for(var i=t.id.split("_"),n=i[i.length-1],r=i[i.length-3]||i[0],o=e.nameTable[""+r],s=o.shape,a=0,l=s.annotations;a<l.length;a++){var h=l[a];if(h.id===n){if(-1!==s.annotations.indexOf(h))return e.removeDependentConnector(t),this.removeAnnotationObjects(o,h,e),!0}}else t.shape.annotations&&t.shape.annotations.length&&this.clearAnnotations(t,e);return!1},t.prototype.removeAnnotationObjects=function(t,e,i){var n=t.shape,r=n.annotations.indexOf(e);if(-1!==r){if(!(i.diagramActions&Og.UndoRedo||i.diagramActions&Og.Group)){var o={type:"CollectionChanged",changeType:"Remove",undoObject:fa(e),redoObject:fa(e),category:"Internal"};i.addHistoryEntry(o)}n.annotations.splice(r,1);var s=this.annotationObjects[t.id];if(s&&s[e.id]){var a=s[e.id].node,l=s[e.id].connector;i.removeElements(a),i.removeElements(l);var h=t.wrapper.children[0];r=h.children.indexOf(a.wrapper),h.children.splice(r,1),r=h.children.indexOf(l.wrapper),h.children.splice(r,1),i.removeFromAQuad(a),i.removeFromAQuad(l),delete i.nameTable[a.id],delete i.nameTable[l.id],delete s[e.id]}}},t.prototype.setAnnotationPath=function(t,e,i,n,r,o){var s=this.getAnnotationPathAngle(i,t),a="",l=e.children[0],h=e.children[2],c=e.children[1];l.horizontalAlignment="Stretch",l.verticalAlignment="Stretch",c.margin.left=c.margin.right=5,c.margin.top=c.margin.bottom=5;var d,p;0===s?(a="M10,20 L0,20 L0,0 L10,0",l.width=10,l.horizontalAlignment="Left",h.setOffsetWithRespectToBounds(0,.5,"Fraction"),c.margin.top=c.margin.bottom=10,d=t.middleRight,p={x1:t.right,y1:t.top,x2:t.right,y2:t.bottom}):180===s?(a="M0,0 L10,0 L10,20 L0,20",l.width=10,l.horizontalAlignment="Right",h.setOffsetWithRespectToBounds(1,.5,"Fraction"),c.margin.top=c.margin.bottom=10,d=t.middleLeft,p={x1:t.left,y1:t.top,x2:t.left,y2:t.bottom}):90===s?(a="M20,10 L20,0 L0,0 L0,10",l.height=10,l.verticalAlignment="Top",h.setOffsetWithRespectToBounds(.5,0,"Fraction"),c.margin.left=c.margin.right=10,d=t.bottomCenter,p={x1:t.right,y1:t.bottom,x2:t.left,y2:t.bottom}):(a="M0,0 L0,10 L20,10 L20,0",l.height=10,l.verticalAlignment="Bottom",h.setOffsetWithRespectToBounds(.5,1,"Fraction"),c.margin.left=c.margin.right=10,d=t.topCenter,p={x1:t.right,y1:t.top,x2:t.left,y2:t.top});var u=t.center;d=be(p,[u,Gu.transform(i,o,Math.max(t.width,t.height))],0,u),l.data=a,void 0!==r&&void 0!==o&&(d=Gu.transform(d,o,r),e.offsetX=n.offsetX=d.x,e.offsetY=n.offsetY=d.y)},t.prototype.isBpmnTextAnnotation=function(t,e){if(this.annotationObjects){var i=t.parentId,n=t.id,r=e.nameTable[""+i];return r&&"Bpmn"===r.shape.type&&this.annotationObjects[""+i]&&this.annotationObjects[""+i][""+n]?r:null}return null},t.prototype.updateTextAnnotationContent=function(t,e,i,n){var r=e.parentId,o=e.id;if(this.annotationObjects[""+r]&&this.annotationObjects[""+r][""+o])for(var s=0,a=t.shape.annotations;s<a.length;s++){var l=a[s];if(l.id===o){l.text=i;var h=this.annotationObjects[""+r][""+o].node.wrapper.children[1];h.content=i,h.visible=!0,t.wrapper.measure(new Qu),t.wrapper.arrange(t.wrapper.desiredSize)}}},t.prototype.updateQuad=function(t,e){var i,n=t.shape.annotations;if(n&&n.length>0)for(var r=0;r<n.length;r++)i=this.annotationObjects[t.id][n[parseInt(r.toString(),10)].id].node,e.updateQuad(i)},t.prototype.updateTextAnnotationProp=function(t,e,i,n){if("Bpmn"===t.shape.type){var r=t.shape.annotations;if(r&&r.length>0)for(var o=0;o<t.wrapper.children[0].children.length;o++)for(var s=0;s<r.length;s++){var a=t.wrapper.children[0].children[parseInt(o.toString(),10)].id.split("_");if(a[a.length-1]===r[parseInt(s.toString(),10)].id){var l=this.annotationObjects[t.id][r[parseInt(s.toString(),10)].id].node,h=this.annotationObjects[t.id][r[parseInt(s.toString(),10)].id].connector,c=(Ae(h.targetPoint,t.wrapper.bounds,t.wrapper.bounds),h.sourcePoint);c={x:h.sourcePoint.x+(n?t.wrapper.offsetX:t.offsetX)-e.offsetX,y:h.sourcePoint.y+(n?t.wrapper.offsetY:t.offsetY)-e.offsetY},c=Gu.transform(c,r[parseInt(s.toString(),10)].angle,r[parseInt(s.toString(),10)].length),t.wrapper.children[0].children[parseInt(o.toString(),10)].offsetX=l.offsetX=c.x,t.wrapper.children[0].children[parseInt(o.toString(),10)].offsetY=l.offsetY=c.y,i.updateQuad(l)}}}},t.prototype.getSubprocessChildCount=function(t){var e=0,i=t.shape.activity.subProcess,n=i.loop;return void 0!==n&&"None"!==n&&e++,void 0!==i.compensation&&!0===i.compensation&&e++,void 0!==i.collapsed&&!0===i.collapsed&&e++,void 0!==i.adhoc&&!0===i.adhoc&&e++,e},t.prototype.getTaskChildCount=function(t){var e=0,i=t.shape.activity.task;return void 0!==i.compensation&&!0===i.compensation&&e++,void 0!==i.loop&&"None"!==i.loop&&e++,e},t.prototype.setStyle=function(t,e){t.style.fill=e.style.fill,t.style.strokeColor=e.style.strokeColor,t.style.strokeWidth=e.style.strokeWidth,t.style.strokeDashArray=e.style.strokeDashArray,t.style.opacity=e.style.opacity,t.style.gradient=e.style.gradient,0!=(e.constraints&wg.Shadow)&&(t.shadow=e.shadow)},t.prototype.updateBPMN=function(t,e,i,n){var r=t.shape||{},o=i.wrapper.children[0],s=i.shape.shape||i.shape.bpmnShape,a=void 0!==t.width||void 0!==t.height;if((f()&&"Gateway"===r.bpmnShape||"Gateway"===r.shape)&&r.gateway)this.removeBPMNElementFromDOM(i,n),i.wrapper.children[0]=this.getBPMNGatewayShape(i);else if((f()&&"DataObject"===r.bpmnShape||"DataObject"===r.shape)&&r.dataObject)this.removeBPMNElementFromDOM(i,n),i.wrapper.children[0]=this.getBPMNDataObjectShape(i);else if((f()&&"Activity"===r.bpmnShape||"Activity"===r.shape)&&r.activity)this.removeBPMNElementFromDOM(i,n),i.wrapper.children[0]=this.getBPMNActivityShape(i);else if((f()&&"Event"===r.bpmnShape||"Event"===i.shape.bpmnShape||"Event"===i.shape.shape||"Event"===r.shape)&&r.event){this.removeBPMNElementFromDOM(i,n);var l=r.event;i.wrapper.children[0]=this.getBPMNEventShape(i,l)}else f()&&"Message"===r.bpmnShape||"Message"===r.shape||f()&&"DataSource"===r.bpmnShape||"DataSource"===r.shape?(this.removeBPMNElementFromDOM(i,n),i.wrapper.children[0]=this.getBPMNShapes(i)):void 0!==r.gateway||"Gateway"===s&&a?this.updateBPMNGateway(i,t):void 0!==r.dataObject||"DataObject"===s&&a?this.updateBPMNDataObject(i,t,e):void 0!==r.activity||"Activity"===s&&a?this.updateBPMNActivity(i,t,e,n):(void 0!==r.event||"Event"===s&&a)&&this.updateBPMNEvent(i,t,e);if(i.wrapper.children[0].id=i.wrapper.children[0].id||o.id,t.style&&(qo(t.style,o instanceof $g?!f()&&"Activity"===i.shape.shape||f()&&"Activity"===i.shape.bpmnShape?o.children[0].children[0]:o.children[0]:o),t.style&&t.style.strokeColor&&o.children.length>0))if((!f()&&"Activity"===i.shape.shape||f()&&"Activity"===i.shape.bpmnShape)&&"SubProcess"===i.shape.activity.activity){var h=o.children[0];this.updateBPMNStyle(h,t.style.strokeColor)}else(!f()&&"Gateway"===i.shape.shape||f()&&"Gateway"===i.shape.bpmnShape||!f()&&"Event"===i.shape.shape||f()&&"Event"===i.shape.bpmnShape)&&this.updateBPMNStyle(o,t.style.strokeColor)},t.prototype.removeBPMNElementFromDOM=function(t,e){for(var i=0,n=e.views;i<n.length;i++){var r=n[i];na(t.id+"_groupElement",r)}},t.prototype.updateBPMNStyle=function(t,e){for(var i=0;i<t.children.length;i++){qo({strokeColor:e},t.children[parseInt(i.toString(),10)])}},t.prototype.updateBPMNGateway=function(t,e){var i=t.shape,n=t.wrapper.children[0];if(i){qo(t.style,n.children[0]);var r=gl(i.gateway.type),o=this.updateGatewaySubType(n,t,r);na(n.children[1].id),n.children.splice(1,1),n.children.push(o)}void 0===e.width&&void 0===e.height||this.setSizeForBPMNGateway(t.shape.gateway,n,e.width||t.width,e.height||t.height)},t.prototype.updateGatewaySubType=function(t,e,i){var n=new rm;return n.id=e.id+"_1_gatewayType",n.width=t.children[1].width,n.height=t.children[1].height,n.margin.left=t.children[1].margin.left,n.margin.top=t.children[1].margin.top,n.data=i,n.offsetX=t.children[1].offsetX,n.offsetY=t.children[1].offsetY,n.style=t.children[1].style,n.horizontalAlignment=t.children[1].horizontalAlignment,n.verticalAlignment=t.children[1].verticalAlignment,n.relativeMode=t.children[1].relativeMode,n.transform=t.children[1].transform,n},t.prototype.updateBPMNDataObject=function(t,e,i){var n=e.shape,r=t.wrapper.children[0];if(n){var o=r.children[1],s=r.children[2];if(void 0!==e.style&&(qo(e.style,r.children[0]),o.style.opacity=t.style.opacity,s.style.opacity=t.style.opacity),n.dataObject){switch(n.dataObject.type){case"None":o.visible=!1;break;case"Input":o.style.fill="white";break;case"Output":o.style.fill="black"}"None"===i.shape.dataObject.type&&(o.visible=!0),void 0!==e.shape.dataObject.collection&&(s.visible=n.dataObject.collection)}}void 0===e.width&&void 0===e.height||this.setSizeForBPMNDataObjects(t.shape.dataObject,r,e.width||t.width,e.height||t.height)},t.prototype.getEvent=function(t,e,i,n,r,o){switch(i){case"Start":r.visible=!1,n.style.strokeDashArray="",o.style.fill="white",o.style.strokeColor="black",n.style.fill="white";break;case"NonInterruptingStart":n.style.strokeDashArray="2 3",o.style.fill="white",n.style.fill="white",o.style.strokeColor="black",r.visible=!1;break;case"Intermediate":n.style.strokeDashArray="",n.style.fill="white",r.style.strokeDashArray="",n.style.gradient=null,o.style.fill="white",o.style.strokeColor="black",this.updateEventVisibility(e,r);break;case"NonInterruptingIntermediate":n.style.fill="white",n.style.gradient=null,o.style.fill="white",o.style.strokeColor="black",n.style.strokeDashArray="2 3",r.style.strokeDashArray="2 3",this.updateEventVisibility(e,r);break;case"ThrowingIntermediate":case"End":n.style.fill="End"!==i?"white":"black",n.style.strokeDashArray="",r.style.strokeDashArray="",n.style.gradient=null,o.style.fill="black",this.updateEventVisibility(e,r),o.style.strokeColor=t.style.fill}},t.prototype.updateEventVisibility=function(t,e){t.shape.activity&&t.shape.activity.subProcess&&t.shape.activity.subProcess.events&&void 0!==t.shape.activity.subProcess.events[0]&&void 0!==t.shape.activity.subProcess.events[0].event?"NonInterruptingStart"!==t.shape.activity.subProcess.events[0].event&&"Start"!==t.shape.activity.subProcess.events[0].event||(e.visible=!0):void 0!==t.shape.event&&("NonInterruptingStart"!==t.shape.event.event&&"Start"!==t.shape.event.event||(e.visible=!0))},t.prototype.updateBPMNEvent=function(t,e,i){var n,r=e.shape,o=t.wrapper.children[0];if(r){var s=o.children[0],a=o.children[1],l=o.children[2];void 0!==e.style&&(qo(t.style,o.children[0]),void 0===e.style.opacity&&void 0===e.style.strokeColor||(a.style.opacity=t.style.opacity,a.style.strokeColor=t.style.strokeColor));var h=r.event.event;n=r.event.trigger,void 0!==h&&this.getEvent(t,i,h,s,a,l),void 0!==n&&this.updateBPMNEventTrigger(t,e)}void 0===e.width&&void 0===e.height&&void 0===n||this.setSizeForBPMNEvents(t.shape.event,o,e.width||t.width,e.height||t.height)},t.prototype.updateBPMNEventTrigger=function(t,e){var i=t.shape,n=t.wrapper.children[0].children[2];n.canMeasurePath=!0,!e.style||void 0===e.style.strokeColor&&void 0===e.style.opacity||qo(t.style,n);var r=ul(i.event.trigger);n.data=r},t.prototype.updateBPMNActivity=function(t,e,i,n){var r=e.shape,o=t.wrapper.children[0],s=this.getSize(t,o.children[0].children[0]);if(r){var a=i.shape.activity.activity,l=t.shape.activity.activity;if("SubProcess"!==a&&"Task"!==a||"SubProcess"!==l&&"Task"!==l){if("Task"===l&&void 0!==r.activity.task){this.updateBPMNActivityTask(t,e);var h=this.getTaskChildCount(t),c=void 0,d=12*h,p=s.width/2-d;c=1===h?p+8:p+8*(h-1),void 0!==r.activity.task.loop&&this.updateBPMNActivityTaskLoop(t,e,c,h,p,2)}"SubProcess"===l&&void 0!==r.activity.subProcess&&this.updateBPMNActivitySubProcess(t,e,i,n)}else n.removeElements(t),t.wrapper.children[0]=this.getBPMNActivityShape(t);this.setSizeForBPMNActivity(t.shape.activity,o,e.width||s.width,e.height||s.height,t)}void 0===e.width&&void 0===e.height||this.setSizeForBPMNActivity(t.shape.activity,o,e.width||s.width,e.height||s.height,t)},t.prototype.updateBPMNActivityTask=function(t,e){for(var i=e.shape,n=t.wrapper.children[0].children[0],r=i.activity.task,o=0;o<n.children.length;o++)if(n.children[parseInt(o.toString(),10)].id===t.id+"_1_taskTypeService"){n.children.splice(o,1);(a=document.getElementById(t.id+"_1_taskTypeService")).parentNode.removeChild(a)}if("Receive"===r.type||"Send"===r.type?n.children[1].height=14:n.children[1].height=20,void 0!==r.type){var s=ml(r.type);n.children[1].data=s;for(o=0;o<n.children.length;o++)if(n.children[parseInt(o.toString(),10)].id===t.id+"_1_tasktType"){n.children.splice(o,1);var a;(a=document.getElementById(t.id+"_1_tasktType")).parentNode.removeChild(a)}var l=new rm;if(l.id=t.id+"_1_tasktType",l.margin.left=5,l.margin.top=5,l.data=s,l.style.fill="transparent",l.style.opacity=t.style.opacity,"Receive"===r.type||"Send"===r.type)l.width=18,l.height=16,"Send"===r.type&&(l.style.fill="black"),n.children.splice(1,0,l);else if("Manual"===r.type)l.width=16,l.height=11,n.children.splice(1,0,l);else if("Service"!==r.type)l.width=20,l.height=20,n.children.splice(1,0,l);else{l.width=20,l.height=20,n.children.splice(1,0,l);var h=new rm;h.id=t.id+"_1_taskTypeService",h.data=s,h.margin.left=n.children[1].margin.left+9,h.margin.top=n.children[1].margin.top+9,h.style.fill="white",h.style.opacity=t.style.opacity,n.children.splice(2,0,h)}}void 0!==i.activity.task.call&&(!1!==i.activity.task.call?n.children[0].style.strokeWidth=4:n.children[0].style.strokeWidth=1),void 0!==i.activity.task.compensation&&(!0===i.activity.task.compensation?n.children[3].visible=!0:n.children[3].visible=!1)},t.prototype.updateBPMNActivityTaskLoop=function(t,e,i,n,r,o){var s,a,l=e.shape,h=t.wrapper.children[0].children[0],c=l.activity,d=0;if(void 0!==c.subProcess){var p=c.subProcess;d="Transaction"===c.subProcess.type?2:0,a=fl(s=p.loop),h.children[2+d].data=a,h.children[2+d].visible="None"!==s}else void 0!==c.task&&void 0!==c.task.loop&&(a=fl(c.task.loop),h.children[2].data=a,h.children[2].visible="None"!==c.task.loop);this.updateChildMargin(h,n,r,i,o+d)},t.prototype.updateChildMargin=function(t,e,i,n,r){if(1===e)for(var o=r;o<t.children.length;o++)2!==o&&!0===t.children[parseInt(o.toString(),10)].visible&&(t.children[parseInt(o.toString(),10)].margin.left=n,n=i+8);else{n=i+8*(e-1);for(o=r;o<t.children.length;o++)2!==o&&!0===t.children[parseInt(o.toString(),10)].visible&&(t.children[parseInt(o.toString(),10)].margin.left=n,n+=20)}},t.prototype.updateBPMNActivitySubProcess=function(t,e,i,n){var r,o=e.shape,s=t.wrapper.children[0],a=this.getSize(t,s.children[0].children[0]),l=o.activity.subProcess,h=this.getSubprocessChildCount(t),c=12*h,d=a.width/2-c;r=1===h?d+8:d+8*(h-1),qo(t.style,s.children[0].children[0]),void 0!==l.events&&this.updateBPMNSubProcessEvent(t,e,i,n),void 0!==l.adhoc&&this.updateBPMNSubProcessAdhoc(t,i,l,r,h,d),void 0!==l.boundary&&this.updateBPMNSubProcessBoundary(t,l),void 0!==l.collapsed&&this.updateBPMNSubProcessCollapsed(t,i,l,r,h,d,n),void 0!==l.compensation&&this.updateBPMNSubProcessCompensation(t,i,l,r,h,d),void 0!==l.loop&&this.updateBPMNSubProcessLoop(t,i,l,r,h,d),void 0!==l.transaction&&this.updateBPMNSubProcessTransaction(t,e,i,n)},t.prototype.updateBPMNSubProcessEvent=function(t,e,i,n){for(var r=e.shape,o=t.wrapper.children[0],s=o.children[0],a=(o.children[0].children.length,r.activity.subProcess),l=0,h=Object.keys(a.events);l<h.length;l++){var c=h[l],d=Number(c),p=s.children[d+2],u=t.shape.activity.subProcess.events[parseInt(d.toString(),10)];this.updateBPMNSubEvent(t,a.events[parseInt(d.toString(),10)],u,p,e,i,n)}},t.prototype.updateBPMNSubEvent=function(t,e,i,n,r,o,s){var a,l,h=t.wrapper.children[0],c=r.shape,d=n.children[0],p=n.children[1],u=n.children[2];if(r.style&&(void 0===r.style.strokeColor&&void 0===r.style.opacity||(h.children[0].children[1].style.strokeColor=r.style.strokeColor,h.children[0].children[1].style.opacity=r.style.opacity)),void 0!==c.activity.subProcess&&(a=e.event,l=e.trigger),void 0!==a&&this.getEvent(r,o,a,d,p,u),void 0!==l){r.style&&qo(r.style,h.children[0]);var g=ul(l);n.children[2].data=g}if(void 0===e.height&&void 0===e.width||this.getEventSize(e,n),void 0!==e.id&&(n.id=e.id),void 0!==e.margin&&(n.margin=e.margin),void 0!==e.horizontalAlignment&&(n.horizontalAlignment=e.horizontalAlignment),void 0!==e.verticalAlignment&&(n.verticalAlignment=e.verticalAlignment),void 0!==e.offset&&(n.setOffsetWithRespectToBounds(i.offset.x,i.offset.y,"Fraction"),n.relativeMode="Point"),void 0!==e.annotations){var m=void 0,f=h.children[0].children[2];n.children[3]&&n.children.length>3&&(m=n.children[3],s.updateAnnotation(e.annotations[0],m,f))}if(void 0!==e.ports){var v=void 0,y=h.children[0].children[2];n.children[4]&&n.children.length>4&&(v=n.children[4],s.updatePort(e.ports[0],v,y))}void 0!==e.visible&&this.updateDiagramContainerVisibility(n,e.visible)},t.prototype.updateBPMNSubProcessTransaction=function(t,e,i,n){var r,o=e.shape.activity.subProcess.transaction,s=t.wrapper.children[0].children[0].children[2];void 0!==o.success&&(r=t.shape.activity.subProcess.transaction.success,this.updateBPMNSubEvent(t,o.success,r,s.children[0],e,i,n)),void 0!==o.cancel&&(r=t.shape.activity.subProcess.transaction.cancel,this.updateBPMNSubEvent(t,o.cancel,r,s.children[1],e,i,n)),void 0!==o.failure&&(r=t.shape.activity.subProcess.transaction.failure,this.updateBPMNSubEvent(t,o.failure,r,s.children[2],e,i,n));for(var a=0,l=t.outEdges;a<l.length;a++){var h=l[a],c=n.nameTable[""+h];switch(c.sourcePortID){case"success":o.success&&void 0!==o.success.visible&&n.connectorPropertyChange(c,{},{sourcePortID:"success"});break;case"cancel":o.cancel&&void 0!==o.cancel.visible&&n.connectorPropertyChange(c,{},{sourcePortID:"cancel"});break;case"failure":o.failure&&void 0!==o.failure.visible&&n.connectorPropertyChange(c,{},{sourcePortID:"failure"})}}},t.prototype.getEventSize=function(t,e){void 0!==t.height&&(e.height=t.height,e.children[0].height=t.height,e.children[1].height=.85*t.height,e.children[2].height=.54*t.height),void 0!==t.width&&(e.width=t.width,e.children[0].width=t.width,e.children[1].width=.85*t.width,e.children[2].width=.54*t.width)},t.prototype.updateBPMNSubProcessAdhoc=function(t,e,i,n,r,o){t.shape;var s=t.wrapper.children[0].children[0],a="Transaction"===t.shape.activity.subProcess.type?2:0;!1===i.adhoc?s.children[3+a].visible=!1:s.children[3+a].visible=!0,this.updateChildMargin(s,r,o,n,3+a)},t.prototype.updateBPMNSubProcessBoundary=function(t,e){t.shape;var i=t.wrapper.children[0].children[0].children[0];"Default"===e.boundary&&(i.style.strokeWidth=1,i.style.strokeDashArray="1 0"),"Call"===e.boundary&&(i.style.strokeWidth=4,i.style.strokeDashArray="1 0"),"Event"===e.boundary&&(i.style.strokeWidth=1,i.style.strokeDashArray="2 2")},t.prototype.updateElementVisibility=function(t,e,i){if(t.shape.activity.subProcess.processes&&t.shape.activity.subProcess.processes.length>0)for(var n=t.shape.activity.subProcess.processes,r=n.length-1;r>=0;r--){var o=i.nameTable[n[parseInt(r.toString(),10)]];o.visible=e,i.updateElementVisibility(o.wrapper,o,e),e&&((!f()&&"Event"===o.shape.shape||f()&&"Event"===o.shape.bpmnShape)&&this.setEventVisibility(o,o.wrapper.children[0].children),"SubProcess"===o.shape.activity.activity&&this.setSubProcessVisibility(o));for(var s=o.inEdges.concat(o.outEdges),a=s.length-1;a>=0;a--){var l=i.nameTable[s[parseInt(a.toString(),10)]];l.visible=e,i.updateElementVisibility(l.wrapper,l,e)}}e&&((!f()&&"Event"===t.shape.shape||f()&&"Event"===t.shape.bpmnShape)&&this.setEventVisibility(t,t.wrapper.children[0].children),"SubProcess"===t.shape.activity.activity&&this.setSubProcessVisibility(t),"Task"===t.shape.activity.activity&&(!f()&&"Activity"===t.shape.shape||f()&&"Activity"===t.shape.bpmnShape)&&"None"===t.shape.activity.subProcess.loop&&(t.wrapper.children[0].children[0].children[3].visible=!1))},t.prototype.updateBPMNSubProcessCollapsed=function(t,e,i,n,r,o,s){var a=t.shape.activity.subProcess.events.length,l=t.wrapper.children[0].children[0],h="Transaction"===t.shape.activity.subProcess.type?3:1;!1===i.collapsed?(this.updateElementVisibility(t,!0,s),l.children[h+a].visible=!1):(this.updateElementVisibility(t,!1,s),l.children[h+a].visible=!0),this.updateChildMargin(l,r,o,n,3+a)},t.prototype.updateBPMNSubProcessCompensation=function(t,e,i,n,r,o){var s=t.wrapper.children[0].children[0],a="Transaction"===t.shape.activity.subProcess.type?2:0;!1===i.compensation?s.children[4+a].visible=!1:s.children[4+a].visible=!0,this.updateChildMargin(s,r,o,n,4+a)},t.prototype.updateBPMNSubProcessLoop=function(t,e,i,n,r,o){this.updateBPMNActivityTaskLoop(t,t,n,r,o,1)},t.prototype.updateBPMNConnector=function(t,e,i,n){var r=i.shape,o=t.shape.flow;return"Sequence"!==r.flow&&!r.sequence||"Sequence"!==o||(t=this.getSequence(t,e,i,n)),"Association"!==r.flow&&!r.association||"Association"!==o||(t=this.getAssociation(t,e,i,n)),"Message"!==r.flow&&!r.message||"Message"!==o||(t=this.getMessage(t,e,i,n)),t},t.prototype.getSequence=function(t,e,i,n){if("Normal"!==i.shape.sequence&&"Normal"!==t.shape.sequence||(t.targetDecorator.shape="Arrow",t.sourceDecorator.shape="None",t.style.strokeDashArray="None",t.targetDecorator.style.fill="black",t.targetDecorator.width=10,t.targetDecorator.height=10,n.connectorPropertyChange(t,e,{targetDecorator:{shape:"Arrow",style:{fill:"black"},height:10,width:10},sourceDecorator:{shape:"None"},style:{strokeDashArray:"None"}}),t.wrapper.children[3].visible=!1),"Default"===i.shape.sequence||"Default"===t.shape.sequence){t.targetDecorator.shape="Arrow",t.sourceDecorator.shape="None",t.style.strokeDashArray="None",t.targetDecorator.style.fill="black",t.targetDecorator.width=10,t.targetDecorator.height=10,n.connectorPropertyChange(t,e,{style:{strokeDashArray:"None"},targetDecorator:{shape:"Arrow",style:{fill:"black"},height:10,width:10},sourceDecorator:{shape:"None"}});var r=new rm,o=(new rm,void 0);r=t.getSegmentElement(t,r);for(var s=t.intermediatePoints,a=0;a<s.length-1;a++)length+=t.distance(s[parseInt(a.toString(),10)],s[a+1]),o=t.findPath(s[parseInt(a.toString(),10)],s[a+1]);var l=new rm;l.data=o[0],l.id=t.id+"_"+i.shape.sequence||t.shape.sequence,l.offsetX=o[1].x,l.offsetY=o[1].y,l.rotateAngle=45,l.transform=Ng.Self,this.removeDomElement(t,n,l)}return"Conditional"!==i.shape.sequence&&"Conditional"!==t.shape.sequence||(t.sourceDecorator.shape="Diamond",t.sourceDecorator.width=20,t.sourceDecorator.height=10,t.sourceDecorator.style.fill="white",t.targetDecorator.style.fill="black",t.style.strokeDashArray="None",t.targetDecorator.shape="Arrow",n.connectorPropertyChange(t,e,{style:{strokeDashArray:"None"},targetDecorator:{shape:"Arrow",style:{fill:"black"},height:10,width:10},sourceDecorator:{shape:"Diamond",width:20,height:10,style:{fill:"white"}}}),t.wrapper.children[3].visible=!1),t},t.prototype.getAssociation=function(t,e,i,n){return"Default"!==i.shape.association&&"Default"!==t.shape.association||(t.sourceDecorator.shape="None",t.targetDecorator.shape="None",t.style.strokeDashArray="2 2",n.connectorPropertyChange(t,e,{style:{strokeDashArray:"2 2"},targetDecorator:{shape:"None"},sourceDecorator:{shape:"None"}}),t.wrapper.children[3].visible=!1),"Directional"!==i.shape.association&&"Directional"!==t.shape.association||(t.sourceDecorator.shape="None",t.style.strokeDashArray="2 2",t.targetDecorator.shape="OpenArrow",t.targetDecorator.width=10,t.targetDecorator.height=10,n.connectorPropertyChange(t,e,{style:{strokeDashArray:"2 2"},targetDecorator:{shape:"OpenArrow",width:10,height:10},sourceDecorator:{shape:"None"}}),t.wrapper.children[3].visible=!1),"BiDirectional"!==i.shape.association&&"BiDirectional"!==t.shape.association||(t.sourceDecorator.shape="OpenArrow",t.targetDecorator.shape="OpenArrow",t.sourceDecorator.width=10,t.sourceDecorator.height=10,t.sourceDecorator.style.fill="black",n.connectorPropertyChange(t,e,{style:{strokeDashArray:"2 2"},targetDecorator:{shape:"OpenArrow",width:10,height:10},sourceDecorator:{shape:"OpenArrow",width:10,height:10,style:{fill:"black"}}}),t.wrapper.children[3].visible=!1),t},t.prototype.getMessage=function(t,e,i,n){var r,o;t.sourceDecorator.shape="Circle",t.sourceDecorator.width=10,t.targetDecorator.shape="Arrow",t.sourceDecorator.height=10,t.sourceDecorator.style.fill="White",t.targetDecorator.style.fill="White",n.connectorPropertyChange(t,e,{sourceDecorator:{shape:"Circle",style:{fill:"White"},width:10,height:10},targetDecorator:{shape:"Arrow",style:{fill:"white"}}});for(var s=t.intermediatePoints,a=0,l=0;l<s.length-1;l++){var h=.5*(a+=t.distance(s[l],s[l+1]));a>=h&&(r=ge(s[parseInt(l.toString(),10)],s[l+1]),o=Gu.transform(s[parseInt(l.toString(),10)],r,h))}var c=new rm;return t.wrapper.children[0].style.strokeDashArray=" 4 4",t.style.strokeDashArray="4 4",c.id=t.id+"_"+i.shape.message||t.shape.message,c.width=25,c.height=15,c.data="M0,0 L19.8,12.8 L40,0 L0, 0 L0, 25.5 L40, 25.5 L 40, 0",c.horizontalAlignment="Center",c.verticalAlignment="Center",c.transform=Ng.Self,c.style.fill="NonInitiatingMessage"===i.shape.message?"lightgrey":"white",c.offsetX=o.x,c.offsetY=o.y,"Default"!==i.shape.message&&void 0!==i.shape.message||"Default"!==t.shape.message?c.style.fill="NonInitiatingMessage"===(i.shape.message||t.shape.message)?"lightgrey":"white":c.visible=!1,this.removeDomElement(t,n,c),t},t.prototype.removeDomElement=function(t,e,i){for(var n=0,r=e.views;n<r.length;n++){var o=r[n];na(t.id+"_groupElement",o),na(t.id+"_content_groupElement",o),na(t.id+"_html_element",o)}t.wrapper.children.splice(3,1),t.wrapper.children.splice(3,0,i)},t.prototype.setSizeForBPMNEvents=function(t,e,i,n){e.children[0].width=i,e.children[0].height=n;var r=e.children[1];r.width=.85*i,r.height=.85*n;var o=e.children[2];"Message"===t.trigger?(o.width=.54*i,o.height=.4*n):(o.width=.5*i,o.height=.5*n)},t.prototype.updateAnnotationDrag=function(t,e,i,n){var r=t.id.split("_");if("textannotation"===r[1])for(var o=void 0,s=0;s<t.inEdges.length;s++){var a=e.nameTable[t.inEdges[parseInt(s.toString(),10)]];a&&(o=e.nameTable[a.sourceID]);var l={x:t.offsetX+i,y:t.offsetY+n},h=a.sourcePoint,c=Gu.findLength(l,h),d=Gu.findAngle(h,l);if(o.shape.annotations)for(var p=0;p<o.shape.annotations.length;p++)if(o.shape.annotations[parseInt(p.toString(),10)].id===r[r.length-1])return o.shape.annotations[parseInt(p.toString(),10)].length=c,o.shape.annotations[parseInt(p.toString(),10)].angle=d,this.setAnnotationPath(o.wrapper.bounds,t.wrapper,l,t),!1}return!!t.processId&&(this.drag(t,i,n,e),!0)},t.prototype.getAnnotationPathAngle=function(t,e){var i=0;switch(Ae(t,e,e)){case"Right":i=0;break;case"Left":i=180;break;case"Bottom":i=90;break;case"Top":i=270}return i},t.prototype.setSizeForBPMNGateway=function(t,e,i,n){e.children[0].width=i,e.children[0].height=n,e.children[1].width=.45*i,e.children[1].height=.45*n},t.prototype.setSizeForBPMNDataObjects=function(t,e,i,n){e.children[0].width=i,e.children[0].height=n},t.prototype.setSizeForBPMNActivity=function(t,e,i,n,r){e.children[0].width=i,e.children[0].height=n,e.children[0].children[0].width=i,e.children[0].children[0].height=n,"Transaction"===t.subProcess.type&&(e.children[0].children[1].width=Math.max(i-6,1),e.children[0].children[1].height=Math.max(n-6,1),e.children[0].children[2].width=i,e.children[0].children[2].height=n);var o,s,a=new Gg,l=this.getSize(r,a),h=12*(s="Task"===t.activity?this.getTaskChildCount(r):this.getSubprocessChildCount(r)),c=(i||l.width)/2;o=1===s?c-6:c-h/2-4*(s-1)/2;for(var d=0;d<e.children[0].children.length;d++)e.children[0].children[parseInt(d.toString(),10)].visible&&(e.children[0].children[parseInt(d.toString(),10)].id.indexOf("_loop")>-1||e.children[0].children[parseInt(d.toString(),10)].id.indexOf("_0_compensation")>-1||e.children[0].children[parseInt(d.toString(),10)].id.indexOf("_0_adhoc")>-1||e.children[0].children[parseInt(d.toString(),10)].id.indexOf("_0_collapsed")>-1)&&(e.children[0].children[parseInt(d.toString(),10)].margin.left=o,o+=e.children[0].children[parseInt(d.toString(),10)].actualSize.width+4)},t.prototype.updateDiagramContainerVisibility=function(t,e){if(t instanceof $g)for(var i=0;i<t.children.length;i++)this.updateDiagramContainerVisibility(t.children[parseInt(i.toString(),10)],e);t.visible=e},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"Bpmn"},t}(),vO={Event:"M80.5,12.5 C80.5,19.127417 62.59139,24.5 40.5,24.5 C18.40861,24.5 0.5,19.127417 0.5,12.5C0.5,5.872583 18.40861,0.5 40.5,0.5 C62.59139,0.5 80.5,5.872583 80.5,12.5 z",Message:"M0,0L19.8,12.8L40,0L0,0L0,25.5L40,25.5L40,0z",DataSource:"M 0 10.6 c 0 5.9 16.8 10.6 37.5 10.6 S 75 16.4 75 10.6 v 0 v 68.9 v -0.1 C 75 85.3 58.2 90 37.5 90 S 0 85.3 0 79.4 l 0 0.1 V 56 V 40.6 L 0 10.6 C 0 4.7 16.8 0 37.5 0 S 75 4.7 75 10.6 S 58.2 21.2 37.5 21.2S 0 16.5 0 10.6 l 0 6.7 v -0.2 c 0 5.9 16.8 10.6 37.5 10.6 S 75 22.9 75 17.1 v 6.8 v -0.1 c 0 5.9 -16.8 10.6 -37.5 10.6 S 0 29.6 0 23.8",SubProcess:"M100,100 h200 a20,20 0 0 1 20,20 v200 a20,20 0 0 1 -20,20 h-200 a20,20 0 0 1 -20,-20 v-200 a20,20 0 0 1 20,-20 z",collapsedShape:"M 8.13789 15 H 0 V 0 H 8.13789 V 15 Z M 0.625991 13.75 H 7.51189 V 1.25 H 0.625991 V 13.75 Z M 2.18095 7.03125 L 5.95631 7.03125 L 5.95631 7.46875 L 2.18095 7.46875 Z M 3.8342 3.73 L 4.30369 3.73 L 4.30369 11.2687 L 3.8342 11.2687 Z"},yO={Message:"M0,0 L19.8,12.8 L40,0 L0, 0 L0, 25.5 L40, 25.5 L 40, 0",Timer:"M40,20c0,8.654-5.496,16.024-13.189,18.81C24.685,39.58,22.392,40,20,40C8.954,40,0,31.046,0,20S8.954,0,20,0S40,8.954,40,20z M20,0 L20,2.583 L20,5.283 M10.027,2.681L11.659,5.507 L12.669,7.257 M2.731,9.989 L6.014,11.885 L7.307,12.631 M0.067,19.967 L2.667,19.967 L5.35,19.967M2.748,29.939 L5.731,28.217 L7.323,27.298 M10.056,37.236 L11.292,35.095 L12.698,32.66 M20.033,39.9 L20.033,36.417 L20.033,34.617M30.006,37.219 L28.893,35.292 L27.364,32.643 M37.302,29.911 L34.608,28.355 L32.727,27.269M39.967,19.933 L37.417,19.933 L34.683,19.933 M37.286,9.961 L34.583,11.521 L32.71,12.602 M29.977,2.664 L28.653,4.957 L27.336,7.24 M22.104,8.5 L19.688,20 L24.75,20 L31.604,20 L24.75,20 L19.688,20z",Error:"M 23.77 18.527 l -7.107 27.396 l 8.507 -17.247 L 36.94 40.073 l 6.394 -25.997 l -8.497 15.754 L 23.77 18.527 Z",Escalation:"M 30.001 8.098 L 11.842 43.543 l 18.159 -18.882 l 18.162 18.882 L 30.001 8.098 Z ",Cancel:"M 3.5 16 L 0 12.6 L 4.6 8 L 0 3.5 L 3.4 0 L 8 4.6 l 4.5 -4.5 L 16 3.5 L 11.5 8 l 4.5 4.5 l -3.4 3.5 L 8 11.4 L 3.5 16 Z",Compensation:"M 25.7086 0 L 0 25 L 25.7086 50 V 26.3752 L 50 50 V 0 L 25.7086 23.6248 V 0 Z ",Conditional:"M 0 0 H 16 V 16 H 0 z M 1.14 3.2 H 14.85 M 1.14 6.4 H 14.85 M 1.14 9.6 H 14.85 M 1.14 12.8 H 14.85",Link:"M 32.014 19.258 v 5.992 H 9.373 v 9.504 h 22.641 v 5.988 L 50.622 30 L 32.014 19.258 Z",Signal:"M 50 50 H 0 L 25.0025 0 L 50 50 Z",Terminate:"M 25 50 C 11.21 50 0 38.79 0 25 C 0 11.21 11.21 0 25 0 C 38.78 0 50 11.21 50 25 C 50 38.79 38.78 50 25 50",Multiple:"M 17.784 48.889 H 42.21 l 7.548 -23.23 L 29.997 11.303 L 10.236 25.658 L 17.784 48.889 Z",Parallel:"M 27.276 49.986 h 5.58 v -17.15 h 17.146 V 27.17 h -17.15 l 0.004 -17.15 h -5.58 l -0.004 17.15 H 9.994 v 5.666 h 17.278 L 27.276 49.986 Z"},bO={None:"",Exclusive:"M 11.196 29.009 l 6.36 -9.712 l -5.764 -8.899 h 4.393 l 3.732 5.979 l 3.656 -5.979 h 4.354 l -5.789 9.039l 6.36 9.572 h -4.532 l -4.126 -6.437 l -4.139 6.437 H 11.196 Z",Inclusive:"M 20.323 31.333 c -6.625 0 -12.015 -5.39 -12.015 -12.015 s 5.39 -12.015 12.015 -12.015 s 12.016 5.39 12.016 12.015 S 26.948 31.333 20.323 31.333 Z M 20.323 9.303 c -5.522 0 -10.015 4.493 -10.015 10.015 s 4.492 10.015 10.015 10.015 s 10.016 -4.493 10.016 -10.015 S 25.846 9.303 20.323 9.303 Z",Parallel:"M 18.394 29.542 v -8.833 H 9.626 v -3.691 h 8.768 V 8.251 h 3.734 v 8.767 h 8.768 v 3.691 h -8.768 v 8.833 H 18.394 Z",Complex:"M29.198,19.063L23.089,19.063L27.794,14.358L26.38,12.944L21.223,18.101L21.223,10.443L19.223,10.443L19.223,17.976L14.022,12.776L12.608,14.19L17.48,19.063L10.365,19.063L10.365,21.063L18.261,21.063L12.392,26.932L13.806,28.346L19.223,22.929L19.223,30.225L21.223,30.225L21.223,22.805L25.925,27.507L27.339,26.093L22.309,21.063L29.198,21.063z",EventBased:"M 20.322 29.874 c -5.444 0 -9.873 -4.43 -9.873 -9.874 s 4.429 -9.874 9.873 -9.874 s 9.874 4.429 9.874 9.874 S 25.767 29.874 20.322 29.874 Z M 20.322 32.891 c -7.107 0 -12.89 -5.783 -12.89 -12.891 c 0 -7.107 5.782 -12.89 12.89 -12.89 c 7.108 0 12.891 5.783 12.891 12.89 C 33.213 27.108 27.431 32.891 20.322 32.891 Z M 24.191 25.386 h -7.984 l -2.469 -7.595 l 6.461 -4.693 l 6.461 4.693 L 24.191 25.386 Z",ExclusiveEventBased:"M 30 15 C 30 23.28 23.28 30 15 30 S 0 23.28 0 15 S 6.72 0 15 0 S 30 6.72 30 15 z M 15 5 L 5 12.5 L 8 22.5 H 22 L 25 12.5 z",ParallelEventBased:"M 35 17.5 C 35 27.16 27.16 35 17.5 35 S 0 27.16 0 17.5 S 7.84 0 17.5 0 S 35 7.84 35 17.5 z M 14.58 5.83 V 14.58 H 5.83 V 20.42 H 14.58 V 29.17 H 20.42 V 20.42 H 29.17 V 14.58 H 20.42 V 5.83 z"},SO={None:"",Service:"M 32.699 20.187 v -4.005 h -3.32 c -0.125 -0.43 -0.292 -0.83 -0.488 -1.21 l 2.373 -2.375 l -2.833 -2.83 l -2.333 2.333 c -0.44 -0.253 -0.9 -0.448 -1.387 -0.595 v -3.32 h -4.003 v 3.32 c -0.46 0.137 -0.890.322 -1.3 0.537 l -2.285 -2.275 l -2.833 2.83 l 2.285 2.278 c -0.235 0.42 -0.41 0.847 -0.547 1.307 h -3.33 v 4.005 h 3.33 c 0.148 0.488 0.343 0.955 0.588 1.395 l -2.325 2.325 l 2.822 2.832 l 2.373 -2.382 c 0.392 0.205 0.792 0.37 1.212 0.497 v 3.33 h 4.003 v -3.33 c 0.46 -0.138 0.89 -0.323 1.3 -0.547 l 2.43 2.432 l 2.822 -2.832 l -2.42 -2.422 c 0.222 -0.41 0.4 -0.85 0.535-1.297 H 32.699 Z M 22.699 21.987 c -2.1 0 -3.803 -1.703 -3.803 -3.803 c 0 -2.1 1.703 -3.803 3.803 -3.803 c 2.1 0 3.803 1.703 3.803 3.803 C 26.502 20.285 24.8 21.987 22.699 21.987 Z",Receive:"M 12.217 12.134 v 13.334 h 20 V 12.134 H 12.217 Z M 30.44 13.007 l -8.223 5.35 l -8.223 -5.35 H 30.44 Z M 13.09 24.594 V 13.459 l 9.127 5.94 l 9.127 -5.94 v 11.135 H 13.09 Z",Send:"M0,1.2260086 L8.0000002,8.3380068 16,1.2260086 16,12.000007 0,12.000007 z M1.6300015,0 L14.371001,0 8.0000055,5.662 z",InstantiatingReceive:"M 16.306 17.39 v 8.79 h 13.198 v -8.79 H 16.306 Z M 28.375 17.946 l -5.47 3.558 l -5.47 -3.558 H 28.375 Z M 28.948 25.625 H 16.861 v -7.389 l 6.043 3.931 l 6.043 -3.931 V 25.625 Z M 22.905 11.785c -5.514 0 -9.999 4.486 -9.999 10 c 0 5.514 4.485 10 9.999 10 s 9.999 -4.486 9.999 -10 C 32.904 16.272 28.419 11.785 22.905 11.785 Z M 22.905 31.239 c -5.212 0 -9.453 -4.241 -9.453 -9.454c 0 -5.212 4.241 -9.453 9.453 -9.453 s 9.452 4.241 9.452 9.453 C 32.357 26.998 28.117 31.239 22.905 31.239 Z",Manual:"M9.21 612 L5.82 612 L1.07 612 a1.07317 1 -180 0 1 -1.07317 -1 L0 604.75 A3.42007 1.59344 -180 0 0 1.61 604 L2.6 604 L5.99 604 a0.721171 0.672 0 0 1 0.721171 0.672 a0.721171 0.672 0 0 1 -0.721171 0.672 L2.6 605.34 a0.48818 0.183302 -90 0 0 0.0837073 0.342385 L5.63 605.69 a0.721171 0.672 0 0 1 0.184585 -0.0223847 L10.28 605.66 a0.721171 0.672 0 0 1 0.721171 0.672 a0.721171 0.672 0 0 1 -0.721171 0.672 L5.82 607.01 a0.721171 0.672 0 0 1 -0.184585 -0.0223847 L5.63 607.35 a0.721171 0.672 0 0 1 0.184585 -0.0223847 L10.01 607.33 a0.721171 0.672 0 0 1 0.721171 0.672 a0.721171 0.672 0 0 1 -0.721171 0.672 L5.82 608.67 a0.721171 0.672 0 0 1 -0.184585 -0.0223847 L5.63 609.01 a0.721171 0.672 0 0 1 0.184585 -0.0223847 L9.47 608.99 a0.721171 0.672 0 0 1 0.721171 0.672 a0.721171 0.672 0 0 1 -0.721171 0.672 L5.82 610.34 a0.721171 0.672 0 0 1 -0.184585 -0.0223847 L5.63 610.68 a0.721171 0.672 0 0 1 0.184585 -0.0223847 L9.21 610.66 a0.721171 0.672 0 0 1 0.721171 0.672 a0.721171 0.672 0 0 1 -0.721171 0.672",BusinessRule:"M 32.844 13.245 h -0.089 v 0 H 13.764 v -0.015 h -1.009 v 16.989 h 0.095 v 0.011 h 19.716 v -0.011 h 0.278 V 13.245 Z M 31.844 14.229 v 4.185 h -18.08 v -4.185 H 31.844 Z M 18.168 25.306 v 3.938 h -4.404 v -3.938 H 18.168 Z M 13.764 24.322 v -4.923 h 4.404 v 4.923 H 13.764 Z M 19.177 25.306 h 12.667 v 3.938 H 19.177 V 25.306 Z M 19.177 24.322v -4.923 h 12.667 v 4.923 H 19.177 Z",User:"M8.6751149,13.75 L10.79009,18.703003 11.664047,18.696991 13.792084,13.75 13.824066,13.75 C18.177001,13.75 21.709022,17.259003 21.748998,21.60199 21.748998,21.649994 21.743993,21.700012 21.735021,21.747009 21.137981,24.774994 18.775997,27.144989 15.74904,27.75 L6.7491024,27.75 C3.7231224,27.144989 1.3601628,24.774994 0.76312089,21.747009 0.75414884,21.700012 0.74914402,21.649994 0.75012076,21.60199 0.78912175,17.259003 4.3221171,13.75 8.6751149,13.75 z M11.249014,0.75 C14.287014,0.75 16.749015,3.2119999 16.749015,6.25 16.749015,9.2880001 14.287014,11.75 11.249014,11.75 8.211015,11.75 5.7490147,9.2880001 5.7490147,6.25 5.7490147,3.2119999 8.211015,0.75 11.249014,0.75 z",Script:"M22.3,80.4 A82.9529,77.0159,-180,0,0,10.3,46.7 A69.8467,64.8477,0,0,1,0,19.7 A27.6207,25.6439,0,0,1,12.1,0 L84.7,0 A37.4124,34.7347,-180,0,0,77.7,19.6 A82.8871,76.9547,-180,0,0,89.7,53.3 A69.8146,64.81790000000001,0,0,1,100,80.3 A27.603399999999997,25.6278,0,0,1,87.9,100 L15.3,100 A37.4265,34.7479,-180,0,0,22.3,80.4 M12.5,28.6 L67.3,28.6 M18.3,42.9 L72.1,42.9 M80.8,57.1 L26,57.1 M85.6,71.4 L32.6,71.4"},wO={None:"",Standard:"M 52.002 73.379 c -2.494 -2.536 -6.55 -2.534 -9.043 0 c -1.208 1.228 -1.874 2.861 -1.874 4.598 c 0 1.225 0.337 2.395 0.957 3.411 l -1.167 1.186 l 2.071 0.458 l 2.071 0.458 l -0.45 -2.106 l -0.45 -2.106 l -1.292 1.314c -1.119 -2.065 -0.842 -4.709 0.877 -6.458 c 2.084 -2.119 5.475 -2.117 7.557 0 c 2.083 2.119 2.083 5.565 0 7.685c -0.976 0.992 -2.272 1.557 -3.65 1.59 l 0.025 1.068 c 1.65 -0.041 3.2 -0.716 4.368 -1.903 c 1.208 -1.228 1.874 -2.861 1.874 -4.597 C 53.875 76.24 53.209 74.607 52.002 73.379 Z",ParallelMultiInstance:"M 51.5,69.5 L52.5,69.5 L52.5,84.5 L51.5 84.5 Z M 46.5,69.5 L47.5,69.5 L47.5,84.5 L46.5 84.5 Z M 41.5,69.5 L42.5,69.5 L42.5,84.5 L41.5 84.5 Z  ",SequenceMultiInstance:"M 40.375,71.5 L 55.375,71.5 L 55.375,72.5 L 40.375,72.5 Z M 40.375,76.5 L 55.375,76.5 L 55.375,77.5 L 40.375,77.5 Z M 40.375,76.5 L 55.375,76.5 L 55.375,77.5 L 40.375,77.5 Z M 40.375,81.5 L 55.375,81.5L 55.375,82.5 L 40.375,82.5 Z"},IO=function(){function t(){}return t.prototype.updateBridging=function(t,e){var i,n=[];if(t.bridges=[],function(t,e){return t.constraints&bg.Bridging?t.constraints&bg.Bridging:t.constraints&bg.InheritBridging?e.constraints&Mg.Bridging:0}(t,e)){var r=this.getPoints(t);i=Zu.toBounds(r);for(var o=t.bridgeSpace,s=e.bridgeDirection,a=-1,l=e.connectors,h=0;h<l.length;h++){var c=l[parseInt(h.toString(),10)];if(t&&c&&t.id!==c.id){var d=this.getPoints(c),p=Zu.toBounds(d);if(this.intersectsRect(i,p)){var u=this.intersect(r,d,!1,s,!0);if(u.length>0)for(var g=0;g<u.length;g++){var m=0,f=0,v=0,y=this.getLengthAtFractionPoint(t,u[parseInt(g.toString(),10)]);if(-1!==y.pointIndex){m=y.lengthFractionIndex,y.fullLength,f=y.segmentIndex,v=y.pointIndex;var b=this.getPointAtLength(m-o/2,r),S=this.getPointAtLength(m+o/2,r);this.isEmptyPoint(S)&&(S=b);var w=void 0,I=t.sourcePoint;w="Straight"===t.type?t.targetPoint:t.intermediatePoints[parseInt(v.toString(),10)];var x=this.angleCalculation(I,w);if(n.length){var M=t.sourcePoint,C=Math.abs(this.lengthCalculation(M,S)),N=0,E=-1;a=-1;for(var D=0;D<n[parseInt(f.toString(),10)].bridges.length;D++){a++;var T=n[parseInt(f.toString(),10)].bridges[parseInt(D.toString(),10)];if(N=Math.abs(this.lengthCalculation(M,T.endPoint)),C<N){E=a;break}}if(E>=0){(O=this.createSegment(b,S,x,s,v,t,e)).target=c.id,n[parseInt(f.toString(),10)].bridges.splice(E,0,O),n[parseInt(f.toString(),10)].bridges.join(),n[parseInt(f.toString(),10)].bridgeStartPoint.splice(E,0,b),n[parseInt(f.toString(),10)].bridgeStartPoint.join(),n[parseInt(f.toString(),10)].segmentIndex=f}else{var O;(O=this.createSegment(b,S,x,s,v,t,e)).target=c.id,n[parseInt(f.toString(),10)].bridges.push(O),n[parseInt(f.toString(),10)].bridgeStartPoint.push(b),n[parseInt(f.toString(),10)].segmentIndex=f}}else if(!isNaN(b.x)&&!isNaN(b.y)&&!this.isEmptyPoint(S)){var L=this.createSegment(b,S,x,s,v,t,e),A={bridges:[],bridgeStartPoint:[],segmentIndex:f};L.target=c.id;var z=[];z.push(b),[].push(S),n[parseInt(f.toString(),10)]=A,n[parseInt(f.toString(),10)].bridges.push(L),n[parseInt(f.toString(),10)].bridgeStartPoint=z,n[parseInt(f.toString(),10)].segmentIndex=f}}}}}}0!==n.length&&this.firstBridge(n,t,o)}},t.prototype.firstBridge=function(t,e,i){for(var n=0;n<t.length;n++){for(var r=t[parseInt(n.toString(),10)],o=1;o<r.bridges.length;o++)if(Gu.findLength(r.bridges[parseInt(o.toString(),10)].endPoint,r.bridges[o-1].endPoint)<i){r.bridges[o-1].endPoint=r.bridges[parseInt(o.toString(),10)].endPoint;var s=r.bridges[o-1],a=this.createBridgeSegment(s.startPoint,s.endPoint,s.angle,i,s.sweep);r.bridges[o-1].path=a,r.bridges.splice(o,1),r.bridgeStartPoint.splice(o,1),o--}e.sourcePoint;for(var l=0;l<r.bridges.length;l++){(s=r.bridges[parseInt(l.toString(),10)]).endPoint,e.bridges.push(s)}}},t.prototype.createSegment=function(t,e,i,n,r,o,s){var a={angle:0,endPoint:{x:0,y:0},target:"",path:"",segmentPointIndex:-1,startPoint:{x:0,y:0},sweep:1,rendered:!1},l=this.sweepDirection(i,n,o,s),h=this.createBridgeSegment(t,e,i,o.bridgeSpace,l);return a.path=h,a.startPoint=t,a.endPoint=e,a.angle=i,a.segmentPointIndex=r,a.sweep=l,a},t.prototype.createBridgeSegment=function(t,e,i,n,r){return"A "+n/2+" "+n/2+" "+i+" , 1 "+r+" "+e.x+","+e.y},t.prototype.sweepDirection=function(t,e,i,n){var r,o=Math.abs(t);switch(e){case"Top":case"Bottom":r=1,o>=0&&o<=90&&(r=0);break;case"Left":case"Right":r=1,t<0&&t>=-180&&(r=0)}return"Right"!==e&&"Bottom"!==e||(r=0===r?1:0),r},t.prototype.getPointAtLength=function(t,e){for(var i,n=0,r={x:0,y:0},o=0;o<e.length;o++){var s=e[parseInt(o.toString(),10)];if(i){var a=this.lengthCalculation(i,s);if(n+a>t){var l=t-n,h=Gu.findAngle(i,s),c=l*Math.cos(h*Math.PI/180),d=l*Math.sin(h*Math.PI/180);r={x:i.x+c,y:i.y+d};break}n+=a,i=s}else i=s}return r},t.prototype.getPoints=function(t){var e=[];if(t.intermediatePoints&&("Straight"===t.type||"Orthogonal"===t.type))for(var i=0;i<t.intermediatePoints.length;i++)e.push(t.intermediatePoints[parseInt(i.toString(),10)]);return e},t.prototype.intersectsRect=function(t,e){return e.x<t.x+t.width&&t.x<e.x+e.width&&e.y<t.y+t.height&&t.y<e.y+e.height},t.prototype.intersect=function(t,e,i,n,r){i&&e.length>=2&&(e.splice(0,1),e.splice(0,1));for(var o=[],s=0;s<t.length-1;s++){var a=this.inter1(t[parseInt(s.toString(),10)],t[s+1],e,r,n);if(a.length>0)for(var l=0;l<a.length;l++)o.push(a[parseInt(l.toString(),10)]);i&&e.length>=1&&e.splice(0,1)}return o},t.prototype.inter1=function(t,e,i,n,r){for(var o=[],s=0;s<i.length-1;s++){var a=Oo(t,e,i[parseInt(s.toString(),10)],i[s+1]);if(!this.isEmptyPoint(a)){var l=this.angleCalculation(t,e),h=this.angleCalculation(i[parseInt(s.toString(),10)],i[s+1]);switch(l=this.checkForHorizontalLine(l),h=this.checkForHorizontalLine(h),r){case"Left":case"Right":l>h&&o.push(a);break;case"Top":case"Bottom":l<h&&o.push(a)}l===h&&n&&o.push(a)}}return o},t.prototype.checkForHorizontalLine=function(t){var e=Math.abs(t);return e>90?180-e:e},t.prototype.isEmptyPoint=function(t){return 0===t.x&&0===t.y},t.prototype.getLengthAtFractionPoint=function(t,e){for(var i=100,n=-1,r=0,o=-1,s=0,a=0,l=t.sourcePoint,h=l,c=[],d=0;d<t.intermediatePoints.length;d++){var p=t.intermediatePoints[parseInt(d.toString(),10)];c.push(p)}for(var u=0;u<c.length;u++){var g=c[parseInt(u.toString(),10)],m=this.getSlope(g,l,e,t);m<i&&(i=m,a=r+this.lengthCalculation(e,h),o=s,n=u),r+=Gu.findLength(g,l),l=g,h=g}s++;return{lengthFractionIndex:a,fullLength:r,segmentIndex:o,pointIndex:n}},t.prototype.getSlope=function(t,e,i,n){var r=Math.abs(t.x-e.x),o=Math.abs(t.y-e.y),s=(i.y-t.y)/(e.y-t.y),a=(i.x-t.x)/(e.x-t.x);if(!isFinite(s)||!isFinite(a)||isNaN(s)||isNaN(a)){if(t.x===e.x){if(t.y===e.y)return 1e4;if(t.y>i.y&&i.y>e.y||t.y<i.y&&i.y<e.y)return Math.abs(t.x-i.x)}else if(t.y===e.y&&(t.x>i.x&&i.x>e.x||t.x<i.x&&i.x<e.x))return Math.abs(t.y-i.y)}else if((t.x>=i.x&&i.x>=e.x||t.x<=i.x&&i.x<=e.x||r<3)&&(t.y>=i.y&&i.y>=e.y||t.y<=i.y&&i.y<=e.y||o<3))return Math.abs(s-a);return 1e4},t.prototype.angleCalculation=function(t,e){var i=t.x-e.x,n=t.y-e.y;return Math.atan2(n,i)*(180/Math.PI)},t.prototype.lengthCalculation=function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"Bridging"},t}(),xO=function(){function t(t){this.line=[],this.diagram=t}return t.prototype.canSnap=function(){return 0!=(this.diagram.snapSettings.constraints&(mg.SnapToObject|mg.SnapToLines))},t.prototype.getWrapperObject=function(t,e){if(t.nodes&&t.nodes.length>0&&(this.diagram.snapSettings.constraints&mg.SnapToLines||this.diagram.snapSettings.constraints&mg.SnapToObject))for(var i=0;i<t.nodes.length;i++)return("SwimLane"===t.nodes[parseInt(i.toString(),10)].shape.type||t.nodes[parseInt(i.toString(),10)].isLane||""!==t.nodes[parseInt(i.toString(),10)].parentId&&e[t.nodes[parseInt(i.toString(),10)].parentId]&&e[t.nodes[parseInt(i.toString(),10)].parentId].isLane)&&e.helper?e.helper.wrapper:t.wrapper;return t.wrapper},t.prototype.setSnapLineColor=function(){return this.diagram.snapSettings.snapLineColor},t.prototype.snapPoint=function(t,e,i,n,r,o,s){var a=this.diagram.snapSettings,l=this.diagram.scroller.currentZoom,h={x:0,y:0},c=ma(this.getWrapperObject(e,t.nameTable)),d={snapped:!1,offset:0},p={snapped:!1,offset:0};if(this.diagram.snapSettings.constraints&mg.SnapToObject){var u=document.createElementNS("http://www.w3.org/2000/svg","g");u.setAttribute("id","_SnappingLines"),u.setAttribute("shapeRendering","crispEdges"),this.getAdornerLayerSvg().appendChild(u),this.snapObject(t,e,u,d,p,r,o===s)}var g=c.x+r.x,m=c.y+r.y,f=c.x+c.width+r.x,v=c.y+c.height+r.y,y=a.verticalGridlines.scaledIntervals,b=this.round(f,y,l),S=this.round(g,y,l);y=a.horizontalGridlines.scaledIntervals;var w=this.round(m,y,l),I=this.round(v,y,l),x=c.x+c.width,M=c.y+c.height;return d.snapped?this.diagram.snapSettings.constraints&mg.SnapToObject?h.x=d.offset:h.x=s.x-o.x:this.diagram.snapSettings.constraints&mg.SnapToVerticalLines?Math.abs(r.x)>=1&&(i?Math.abs(b-x)>Math.abs(S-c.x)?h.x+=S-c.x:h.x+=b-x:Math.abs(b-x)<Math.abs(S-c.x)?h.x+=b-x:h.x+=S-c.x):h.x=s.x-o.x,p.snapped?h.y=p.offset:this.diagram.snapSettings.constraints&mg.SnapToHorizontalLines?Math.abs(r.y)>=1&&(n?Math.abs(I-M)>Math.abs(w-c.y)?h.y+=w-c.y:h.y+=I-M:Math.abs(I-M)<Math.abs(w-c.y)?h.y+=I-M:h.y+=w-c.y):h.y=s.y-o.y,h},t.prototype.round=function(t,e,i){i=1===i?Math.pow(2,Math.floor(Math.log(i)/Math.log(2))):i;var n=0,r=0;for(r=0;r<e.length;r++)n+=e[parseInt(r.toString(),10)];var o=t%(n/=i),s=Math.floor(Math.abs(t)/n)*n;if(s!==t)if(t>=0)for(r=0;r<e.length;r++){if(o<=e[parseInt(r.toString(),10)]/i)return s+(o<e[parseInt(r.toString(),10)]/(2*i)?0:e[parseInt(r.toString(),10)]/i);s+=e[parseInt(r.toString(),10)]/i,o-=e[parseInt(r.toString(),10)]/i}else for(s*=-1,r=e.length-1;r>=0;r--){if(Math.abs(o)<=e[parseInt(r.toString(),10)]/i)return s-(Math.abs(o)<e[parseInt(r.toString(),10)]/(2*i)?0:e[parseInt(r.toString(),10)]/i);s-=e[parseInt(r.toString(),10)]/i,o+=e[parseInt(r.toString(),10)]/i}return t},t.prototype.snapObject=function(t,e,i,n,r,o,s){var a,l,h,c=null,d=this.diagram.scroller,p=this.diagram.snapSettings,u=[],g=[],m=[],f=[],v=ma(this.getWrapperObject(e,t.nameTable)),y=t.scroller.currentZoom,b=-d.horizontalOffset,S=-d.verticalOffset,w=p.snapObjectDistance/y,I=new Zu(0,0,d.viewPortWidth,d.viewPortHeight),x=new Zu(b/y,v.y-w-5,I.width/y,v.height+2*w+10),M=new Zu(v.x-w-5,S/y,v.width+2*w+10,I.height/y);I=new Zu(b/y,S/y,I.width/y,I.height/y);var C,N,E,D=this.findNodes(t.spatialSearch,e,M,I),T=t.nameTable;for(C=0;C<D.length;C++)N=D[parseInt(C.toString(),10)],this.canBeTarget(t,N)&&(this.diagram.nameTable[N.id]instanceof ES||!this.canConsider(T,e,N)||((E=N.bounds).height+E.y<o.y+v.y?m.push({obj:N,distance:Math.abs(v.y+o.y-E.y-E.height)}):E.y>v.y+o.y+v.height&&f.push({obj:N,distance:Math.abs(v.y+o.y+v.height-E.y)}),(null==c||c>Math.abs(E.y-v.y-o.y))&&(Math.abs(E.x+E.width/2-(v.x+v.width/2+o.x))<=w?(l=this.createSnapObject(E,v,"centerX"),c=Math.abs(E.y-v.y)):Math.abs(E.x+E.width-(v.x+v.width+o.x))<=w?(l=this.createSnapObject(E,v,"right"),c=Math.abs(E.y-v.y)):Math.abs(E.x-(v.x+o.x))<=w?(l=this.createSnapObject(E,v,"left"),c=Math.abs(E.y-v.y)):Math.abs(E.x-(v.x+v.width+o.x))<=w?(l=this.createSnapObject(E,v,"rightLeft"),c=Math.abs(E.y-v.y)):Math.abs(E.x+E.width-(v.x+o.x))<=w&&(l=this.createSnapObject(E,v,"leftRight"),c=Math.abs(E.y-v.y)))));D=this.findNodes(t.spatialSearch,e,x,I);for(var O=0;O<D.length;O++)N=D[parseInt(O.toString(),10)],this.canBeTarget(t,N)&&(this.diagram.nameTable[N.id]instanceof ES||!this.canConsider(T,e,N)||((E=N.bounds).x+E.width<v.x+o.x&&(u[u.length]={obj:N,distance:Math.abs(v.x+o.x-E.x-E.width)}),E.x>v.x+o.x+v.width&&(g[g.length]={obj:N,distance:Math.abs(v.x+o.x+v.width-E.x)}),(null==a||a>Math.abs(E.x-v.x-o.x))&&(Math.abs(E.y+E.height/2-(v.y+v.height/2+o.y))<=w?(h=this.createSnapObject(E,v,"centerY"),a=Math.abs(E.x-v.x)):Math.abs(E.y-v.y-o.y)<=w?(h=this.createSnapObject(E,v,"top"),a=Math.abs(E.x-v.x)):Math.abs(E.y+E.height-(v.y+v.height+o.y))<=w?(h=this.createSnapObject(E,v,"bottom"),a=Math.abs(E.x-v.x)):Math.abs(E.y+E.height-v.y-o.y)<=w?(h=this.createSnapObject(E,v,"topBottom"),a=Math.abs(E.x-v.x)):Math.abs(E.y-(v.y+v.height+o.y))<=w&&(h=this.createSnapObject(E,v,"bottomTop"),a=Math.abs(E.x-v.x)))));this.createGuidelines(t,l,h,i,n,r,s),n.snapped||this.createHSpacingLines(t,i,e,u,g,n,r,s,o,w),r.snapped||this.createVSpacingLines(t,i,e,m,f,n,r,s,o,w)},t.prototype.snapConnectorEnd=function(t){var e=this.diagram.snapSettings,i=this.diagram.scroller.currentZoom;return e.constraints&mg.SnapToLines&&(t.x=this.round(t.x,e.verticalGridlines.scaledIntervals,i),t.y=this.round(t.y,e.horizontalGridlines.scaledIntervals,i)),t},t.prototype.canBeTarget=function(t,e){return e=this.diagram.nameTable[e.id],!Jr(this.diagram,e,!1)},t.prototype.snapSize=function(t,e,i,n,r,o,s,a){var l,h,c,d,p=this.diagram.snapSettings,u=this.diagram.scroller,g=ma(s.wrapper),m=t.nameTable,f=[],v=[],y=t.scroller.currentZoom,b=-u.horizontalOffset,S=-u.verticalOffset,w=p.snapObjectDistance/y,I=new Zu(0,0,u.viewPortWidth,u.viewPortHeight),x=new Zu(b/y,(g.y-5)/y,I.width/y,(g.height+10)/y),M=new Zu((g.x-5)/y,S/y,(g.width+10)/y,I.height/y);I=new Zu(b/y,S/y,I.width/y,I.height/y);var C,N,E,D=[],T=this.findNodes(t.spatialSearch,s,M,I,D);for(C=0;C<T.length;C++)N=T[parseInt(C.toString(),10)],!this.canConsider(m,s,N)||this.diagram.nameTable[N.id]instanceof ES||(E=N.bounds,(null==l||l>Math.abs(E.y-g.y))&&(e.left?Math.abs(g.x+r-E.x)<=w?(c=this.createSnapObject(E,g,"left"),l=Math.abs(E.y-g.y)):Math.abs(g.x+r-E.x-E.width)<=w&&(c=this.createSnapObject(E,g,"leftRight"),l=Math.abs(E.y-g.y)):e.right&&(Math.abs(g.x+r+g.width-E.x-E.width)<=w?(c=this.createSnapObject(E,g,"right"),l=Math.abs(E.y-g.y)):Math.abs(g.x+r+g.width-E.x)<=w&&(c=this.createSnapObject(E,g,"rightLeft"),l=Math.abs(E.y-g.y)))));T=this.findNodes(t.spatialSearch,s,x,I);for(var O=0;O<T.length;O++){var L=T[parseInt(O.toString(),10)];if(this.canConsider(m,s,L)&&!(this.diagram.nameTable[L.id]instanceof ES)){var A=L.bounds;(null==h||h>Math.abs(A.x-g.x))&&(i.top?Math.abs(g.y+o-A.y)<=w?(d=this.createSnapObject(A,g,"top"),h=Math.abs(A.x-g.x)):Math.abs(g.y+o-A.y-A.height)<=w&&(d=this.createSnapObject(A,g,"topBottom"),h=Math.abs(A.x-g.x)):i.bottom&&(Math.abs(g.y+g.height+o-A.y-A.height)<=w?(d=this.createSnapObject(A,g,"bottom"),h=Math.abs(A.x-g.x)):Math.abs(g.y+g.height+o-A.y)<=w&&(d=this.createSnapObject(A,g,"bottomTop"),h=Math.abs(A.x-g.x))))}}for(C=0;C<D.length;C++)if(N=D[parseInt(C.toString(),10)],this.canConsider(m,s,N)){var z=N.bounds,k=e.left?-r:r,j=Math.abs(g.width+k-z.width),P=void 0;j<=w&&(P=e.left?-z.width+g.width:z.width-g.width,f[f.length]={source:N,difference:j,offset:P}),k=i.top?-o:o;var R=Math.abs(g.height+k-z.height);R<=w&&(P=i.top?-z.height+g.height:z.height-g.height,v[v.length]={source:N,difference:R,offset:P})}if(!t.getTool)this.createGuidelines(t,c,d,n,e,i,a);!e.snapped&&f.length>0&&(e.left||e.right)&&this.addSameWidthLines(t,n,f,e,a,s),!i.snapped&&v.length>0&&(i.top||i.bottom)&&this.addSameHeightLines(t,n,v,i,a,s)},t.prototype.snapTop=function(t,e,i,n,r,o,s,a){var l=r;e.top=!0;var h;t.left=t.right=!1;var c=this.diagram.scroller.currentZoom;if(this.diagram.snapSettings.constraints&mg.SnapToObject&&!o.rotateAngle&&(h=a.y-a.height*o.pivot.y+r-(o.offsetY-o.height*o.pivot.y),this.snapSize(this.diagram,t,e,i,n,h,this.diagram.selectedItems,s)),e.snapped)l=r-h+e.offset;else if(this.diagram.snapSettings.constraints&mg.SnapToHorizontalLines){var d=a.y-a.height*o.pivot.y,p=d+r;l=this.round(p,this.diagram.snapSettings.horizontalGridlines.scaledIntervals,c)-d}return l},t.prototype.snapRight=function(t,e,i,n,r,o,s,a){var l,h=n;t.right=!0,e.top=e.bottom=!1;var c=this.diagram.scroller.currentZoom;if(this.diagram.snapSettings.constraints&mg.SnapToObject&&!o.rotateAngle&&(l=a.x+a.width*(1-o.pivot.x)+n-(o.offsetX+o.width*(1-o.pivot.x)),this.snapSize(this.diagram,t,e,i,l,r,this.diagram.selectedItems,s)),t.snapped)h=n-l+t.offset;else if(this.diagram.snapSettings.constraints&mg.SnapToVerticalLines){var d=a.x+a.width*(1-o.pivot.x),p=d+n;h=this.round(p,this.diagram.snapSettings.verticalGridlines.scaledIntervals,c)-d}return h},t.prototype.snapLeft=function(t,e,i,n,r,o,s,a){var l=n,h=0;t.left=!0,e.top=e.bottom=!1;var c=this.diagram.scroller.currentZoom;if(this.diagram.snapSettings.constraints&mg.SnapToObject&&!o.rotateAngle&&(h=a.x-a.width*o.pivot.x+n-(o.offsetX-o.width*o.pivot.x),this.snapSize(this.diagram,t,e,i,h,r,this.diagram.selectedItems,s)),t.snapped)l=n-h+t.offset;else if(this.diagram.snapSettings.constraints&mg.SnapToVerticalLines){var d=a.x-a.width*o.pivot.x,p=d+n;l=this.round(p,this.diagram.snapSettings.horizontalGridlines.scaledIntervals,c)-d}return l},t.prototype.snapBottom=function(t,e,i,n,r,o,s,a){var l=r;e.bottom=!0,t.left=t.right=!1;var h=this.diagram.scroller.currentZoom,c=0;this.diagram.snapSettings.constraints&mg.SnapToObject&&!o.rotateAngle&&(c=a.y+a.height*(1-o.pivot.y)+r-(o.offsetY+o.height*(1-o.pivot.y)),this.snapSize(this.diagram,t,e,i,n,c,this.diagram.selectedItems,s));ma(o instanceof Jg||o instanceof Cb?o:o.wrapper);if(e.snapped)l=r-c+e.offset;else if(this.diagram.snapSettings.constraints&mg.SnapToHorizontalLines){var d=a.y+a.height*(1-o.pivot.y),p=d+r;l=this.round(p,this.diagram.snapSettings.horizontalGridlines.scaledIntervals,h)-d}return l},t.prototype.createGuidelines=function(t,e,i,n,r,o,s){return e&&(r.offset=e.offsetX,r.snapped=!0,s||(e.type,this.renderAlignmentLines(e.start,e.end,n,t.scroller.transform))),i&&(o.offset=i.offsetY,o.snapped=!0,s||(i.type,this.renderAlignmentLines(i.start,i.end,n,t.scroller.transform))),n},t.prototype.renderAlignmentLines=function(t,e,i,n){t={x:(t.x+n.tx)*n.scale,y:(t.y+n.ty)*n.scale},e={x:(e.x+n.tx)*n.scale,y:(e.y+n.ty)*n.scale};var r={stroke:this.setSnapLineColor(),strokeWidth:1,startPoint:{x:t.x,y:t.y},endPoint:{x:e.x,y:e.y},fill:this.setSnapLineColor(),dashArray:"",width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,opacity:1,id:da()},o=0;for(this.line.push(r),o=0;o<this.line.length;o++)this.diagram.diagramRenderer.drawLine(i,this.line.pop())},t.prototype.createHSpacingLines=function(t,e,i,n,r,o,s,a,l,h){var c=0;this.sortByDistance(n,"distance",!0),this.sortByDistance(r,"distance",!0);var d,p=[];d=t.selectedObject.helperObject?ma(t.selectedObject.helperObject.wrapper):ma(i.wrapper);var u,g,m,f;if(n.length>0&&(p[p.length]=n[0],c=(u=n[0].obj.bounds).y,n.length>1?(m=n[1].obj.bounds,f=u.x-m.x-m.width,Math.abs(f-n[0].distance)<=h?c=this.findEquallySpacedNodesAtLeft(n,f,c,p):f=n[0].distance):f=n[0].distance),this.sortByDistance(p,"distance"),p[p.length]={obj:i,distance:0},c=d.y<c||!c?d.y:c,r.length>0){var v=void 0;if(g=r[0].obj.bounds,c=g.y<c?g.y:c,r.length>1&&(v=(m=r[1].obj.bounds).x-g.x-g.width),n.length>0)if(Math.abs(r[0].distance-n[0].distance)<=h){var y=Math.abs(r[0].distance-n[0].distance)/2;r[0].distance<n[0].distance?f-=y:f+=y,p[p.length]=r[0]}else 1===n.length&&(u=void 0,p.splice(0,1),p[p.length]=r[0],f=v);else f=v,p[p.length]=r[0];r.length>1&&g.x+g.width<m.x&&(c=this.findEquallySpacedNodesAtRight(r,v,c,p,h))}if(p.length>2){this.addHSpacingLines(t,e,p,a,c);var b=0;a&&(b=l.x),u?o.offset=f-Math.abs(d.x+b-u.x-u.width)+b:g&&(o.offset=Math.abs(d.x+d.width+b-g.x)-f+b),o.snapped=!0}},t.prototype.createVSpacingLines=function(t,e,i,n,r,o,s,a,l,h){var c=0;this.sortByDistance(n,"distance",!0),this.sortByDistance(r,"distance",!0);var d,p,u,g,m=[],f=ma(this.getWrapperObject(i,t.nameTable));n.length>0&&(m[m.length]=n[0],c=(d=n[0].obj.bounds).x+d.width,n.length>1?(u=n[1].obj.bounds,g=d.y-u.y-u.height,Math.abs(g-n[0].distance)<=h?c=this.findEquallySpacedNodesAtTop(n,g,c,m):g=n[0].distance):g=n[0].distance),this.sortByDistance(m,"distance"),m[m.length]={obj:i,distance:0},c=f.x+f.width>c||!c?f.x+f.width:c;var v;if(r.length>0){if(p=r[0].obj.bounds,c=p.x+p.width>c?p.x+p.width:c,r.length>1&&(v=(u=r[1].obj.bounds).y-p.y-p.height),n.length>0)if(Math.abs(r[0].distance-n[0].distance)<=h){var y=Math.abs(r[0].distance-n[0].distance)/2;r[0].distance<n[0].distance?g-=y:g+=y,m[m.length]=r[0]}else 1===n.length&&(d=void 0,m.splice(0,1),m[m.length]=r[0],g=v);else g=v,m[m.length]=r[0];r.length>1&&u.y>p.y+p.height&&(c=this.findEquallySpacedNodesAtBottom(r,v,c,m,h))}if(m.length>2){this.addVSpacingLines(t,e,m,a,c);var b=0;a&&(b=l.y),d?s.offset=g-Math.abs(f.y+b-d.y-d.height)+b:p&&(s.offset=Math.abs(f.y+f.height+b-p.y)-g+b),s.snapped=!0}},t.prototype.addHSpacingLines=function(t,e,i,n,r){var o,s,a;if(!n)for(o=0;o<i.length-1;o++){var l=i[parseInt(o.toString(),10)].obj instanceof _w?ma(i[parseInt(o.toString(),10)].obj.wrapper):i[parseInt(o.toString(),10)].obj.bounds,h=i[o+1].obj instanceof _w?ma(i[o+1].obj.wrapper):i[o+1].obj.bounds;s={x:l.x+l.width,y:r-15},a={x:h.x,y:r-15},this.renderSpacingLines(s,a,e,this.getAdornerLayerSvg(),t.scroller.transform)}},t.prototype.addVSpacingLines=function(t,e,i,n,r){var o,s;if(!n)for(var a=0;a<i.length-1;a++){var l=i[parseInt(a.toString(),10)].obj instanceof _w?ma(i[parseInt(a.toString(),10)].obj.wrapper):i[parseInt(a.toString(),10)].obj.bounds,h=i[a+1].obj instanceof _w?ma(i[a+1].obj.wrapper):i[a+1].obj.bounds;o={x:r+15,y:l.y+l.height},s={x:r+15,y:h.y},this.renderSpacingLines(o,s,e,this.getAdornerLayerSvg(),t.scroller.transform)}},t.prototype.addSameWidthLines=function(t,e,i,n,r,o){this.sortByDistance(i,"offset");var s,a,l=ma(o.wrapper),h=i[0],c=h.source.bounds,d=[];d.push(i[0]);var p;for(p=1;p<i.length;p++)i[parseInt(p.toString(),10)].source.bounds.width===c.width&&d.push(i[parseInt(p.toString(),10)]);if(!r)for(s={x:l.x+h.offset,y:l.y-15},a={x:l.x+l.width+h.offset,y:l.y-15},this.renderSpacingLines(s,a,e,this.getAdornerLayerSvg(),t.scroller.transform),p=0;p<d.length;p++)s={x:(l=d[parseInt(p.toString(),10)].source.bounds).x,y:l.y-15},a={x:l.x+l.width,y:l.y-15},this.renderSpacingLines(s,a,e,this.getAdornerLayerSvg(),t.scroller.transform);n.offset=h.offset,n.snapped=!0},t.prototype.addSameHeightLines=function(t,e,i,n,r,o){this.sortByDistance(i,"offset");var s,a,l=ma(o.wrapper),h=i[0],c=h.source.bounds,d=[];d.push(i[0]);var p;for(p=0;p<i.length;p++)i[parseInt(p.toString(),10)].source.bounds.height===c.height&&d.push(i[parseInt(p.toString(),10)]);if(!r)for(s={x:l.x+l.width+15,y:l.y+h.offset},a={x:l.x+l.width+15,y:l.y+h.offset+l.height},this.renderSpacingLines(s,a,e,this.getAdornerLayerSvg(),t.scroller.transform),p=0;p<d.length;p++)s={x:(l=d[parseInt(p.toString(),10)].source.bounds).x+l.width+15,y:l.y},a={x:l.x+l.width+15,y:l.y+l.height},this.renderSpacingLines(s,a,e,this.getAdornerLayerSvg(),t.scroller.transform);n.offset=h.offset,n.snapped=!0},t.prototype.renderSpacingLines=function(t,e,i,n,r){var o,s,a=new rm,l={};t={x:(t.x+r.tx)*r.scale,y:(t.y+r.ty)*r.scale},e={x:(e.x+r.tx)*r.scale,y:(e.y+r.ty)*r.scale},t.x===e.x?(o="M"+(t.x-5)+" "+(t.y+5)+"L"+t.x+" "+t.y+"L"+(t.x+5)+" "+(t.y+5)+"zM"+(e.x-5)+" "+(e.y-5)+" L"+e.x+" "+e.y+" L"+(e.x+5)+" "+(e.y-5)+"z",s={startPoint:{x:t.x-8,y:t.y-1},endPoint:{x:t.x+8,y:t.y-1},stroke:this.setSnapLineColor(),strokeWidth:1,fill:this.setSnapLineColor(),dashArray:"",width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,opacity:1,id:da()},a.data=o,l.data=a.data,l.angle=0,l.pivotX=0,l.pivotY=0,l.x=0,l.y=0,l.height=0,l.width=1,l.id=da(),this.diagram.diagramRenderer.drawPath(i,l),this.line.push(s),this.diagram.diagramRenderer.drawLine(i,this.line.pop()),s={startPoint:{x:e.x-8,y:e.y+1},endPoint:{x:e.x+8,y:e.y+1},stroke:this.setSnapLineColor(),strokeWidth:1,fill:this.setSnapLineColor(),dashArray:"",width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,opacity:1,id:this.getAdornerLayerSvg().id+"spacing"},this.line.push(s),this.diagram.diagramRenderer.drawLine(i,this.line.pop())):(o="M"+(t.x+5)+" "+(t.y+5)+" L"+t.x+" "+t.y+" L"+(t.x+5)+" "+(t.y-5)+"zM"+(e.x-5)+" "+(e.y-5)+" L"+e.x+" "+e.y+" L"+(e.x-5)+" "+(e.y+5)+"z",a.data=o,l.data=o,l.angle=0,l.pivotX=0,l.pivotY=0,l.x=0,l.y=0,l.height=0,l.width=1,l.id=da(),this.diagram.diagramRenderer.drawPath(i,l),s={visible:!0,opacity:1,id:da(),startPoint:{x:t.x-1,y:t.y-8},endPoint:{x:t.x-1,y:t.y+8},stroke:this.setSnapLineColor(),strokeWidth:1,fill:this.setSnapLineColor(),dashArray:"0",width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0},this.line.push(s),this.diagram.diagramRenderer.drawLine(i,this.line.pop()),s={width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,opacity:1,id:da(),startPoint:{x:e.x+1,y:e.y-8},endPoint:{x:e.x+1,y:e.y+8},stroke:this.setSnapLineColor(),strokeWidth:1,fill:this.setSnapLineColor(),dashArray:"0"},this.line.push(s),this.diagram.diagramRenderer.drawLine(i,this.line.pop())),s={startPoint:{x:t.x,y:t.y},endPoint:{x:e.x,y:e.y},stroke:this.setSnapLineColor(),strokeWidth:1,fill:this.setSnapLineColor(),dashArray:"0",width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,opacity:1,id:da()},this.line.push(s),this.diagram.diagramRenderer.drawLine(i,this.line.pop())},t.prototype.createSnapObject=function(t,e,i){var n;switch(i){case"left":n={start:{x:t.x,y:Math.min(t.y,e.y)},end:{x:t.x,y:Math.max(t.y+t.height,e.y+e.height)},offsetX:t.x-e.x,offsetY:0,type:"sideAlign"};break;case"right":n={type:"sideAlign",start:{x:t.x+t.width,y:Math.min(t.y,e.y)},offsetX:t.x+t.width-e.x-e.width,offsetY:0,end:{x:t.x+t.width,y:Math.max(t.y+t.height,e.y+e.height)}};break;case"top":n={offsetY:t.y-e.y,offsetX:0,type:"sideAlign",start:{x:Math.min(t.x,e.x),y:t.y},end:{x:Math.max(t.x+t.width,e.x+e.width),y:t.y}};break;case"bottom":n={type:"sideAlign",offsetY:t.y+t.height-e.y-e.height,offsetX:0,end:{x:Math.max(t.x+t.width,e.x+e.width),y:t.y+t.height},start:{x:Math.min(t.x,e.x),y:t.y+t.height}};break;case"topBottom":n={start:{x:Math.min(t.x,e.x),y:t.y+t.height},end:{x:Math.max(t.x+t.width,e.x+e.width),y:t.y+t.height},offsetY:t.y+t.height-e.y,offsetX:0,type:"sideAlign"};break;case"bottomTop":n={start:{x:Math.min(t.x,e.x),y:t.y},end:{x:Math.max(t.x+t.width,e.x+e.width),y:t.y},offsetY:t.y-e.y-e.height,offsetX:0,type:"sideAlign"};break;case"leftRight":n={start:{x:t.x+t.width,y:Math.min(t.y,e.y)},end:{x:t.x+t.width,y:Math.max(t.y+t.height,e.y+e.height)},offsetX:t.x+t.width-e.x,offsetY:0,type:"sideAlign"};break;case"rightLeft":n={start:{x:t.x,y:Math.min(t.y,e.y)},end:{x:t.x,y:Math.max(t.y+t.height,e.y+e.height)},offsetX:t.x-e.x-e.width,offsetY:0,type:"sideAlign"};break;case"centerX":n={start:{x:t.x+t.width/2,y:Math.min(t.y,e.y)},end:{x:t.x+t.width/2,y:Math.max(t.y+t.height,e.y+e.height)},offsetX:t.x+t.width/2-(e.x+e.width/2),offsetY:0,type:"centerAlign"};break;case"centerY":n={start:{x:Math.min(t.x,e.x),y:t.y+t.height/2},end:{x:Math.max(t.x+t.width,e.x+e.width),y:t.y+t.height/2},offsetY:t.y+t.height/2-(e.y+e.height/2),offsetX:0,type:"centerAlign"}}return n},t.prototype.snapAngle=function(t,e){var i=this.diagram.snapSettings.snapAngle,n=e%(i||0);return n>=i/2?e+i-n:e-n},t.prototype.canConsider=function(t,e,i){return!this.diagram.selectedItems.nodes.length||this.diagram.selectedItems.nodes[0].id!==i.id},t.prototype.findNodes=function(t,e,i,n,r){for(var o,s,a=[],l=t.findQuads(r?n:i),h=0;h<l.length;h++){var c=l[parseInt(h.toString(),10)];if(c.objects.length>0)for(var d=0;d<c.objects.length;d++)o=c.objects[parseInt(d.toString(),10)],this.diagram.nameTable[o.id]instanceof ES||!o.visible||"SwimLane"===this.diagram.nameTable[o.id].shape.type||this.diagram.nameTable[o.id].isLane||this.diagram.nameTable[o.id].isPhase||this.diagram.nameTable[o.id].isHeader||"helper"==o.id||(s=ma(o),-1===a.indexOf(o)&&this.intersectsRect(i,s)&&a.push(o),r&&r.indexOf(o)&&this.intersectsRect(n,s)&&r.push(o))}return a},t.prototype.intersectsRect=function(t,e){return e.x<t.x+t.width&&t.x<e.x+e.width&&e.y<t.y+t.height&&t.y<e.y+e.height},t.prototype.getAdornerLayerSvg=function(){return this.diagram.diagramRenderer.adornerSvgLayer},t.prototype.removeGuidelines=function(t){var e=this.getAdornerLayerSvg().getElementById("_SnappingLines"),i=this.getAdornerLayerSvg().getElementById("pivotLine");e&&e.parentNode.removeChild(e),i&&i.parentNode.removeChild(i)},t.prototype.sortByDistance=function(t,e,i){var n,r,o;if(i)for(n=0;n<t.length;n++)for(r=n+1;r<t.length;r++)t[parseInt(n.toString(),10)][""+e]>t[parseInt(r.toString(),10)][""+e]&&(o=t[parseInt(n.toString(),10)],t[parseInt(n.toString(),10)]=t[parseInt(r.toString(),10)],t[parseInt(r.toString(),10)]=o);else for(n=0;n<t.length;n++)for(r=n+1;r<t.length;r++)t[parseInt(n.toString(),10)][""+e]<t[parseInt(r.toString(),10)][""+e]&&(o=t[parseInt(n.toString(),10)],t[parseInt(n.toString(),10)]=t[parseInt(r.toString(),10)],t[parseInt(r.toString(),10)]=o)},t.prototype.findEquallySpacedNodesAtLeft=function(t,e,i,n){var r,o,s,a;for(a=1;a<t.length&&(r=t[a-1].obj.bounds,o=t[parseInt(a.toString(),10)].obj.bounds,s=r.x-o.x-o.width,Math.abs(s-e)<=1);a++)n[n.length]=t[parseInt(a.toString(),10)],o.y<i&&(i=o.y);return i},t.prototype.findEquallySpacedNodesAtRight=function(t,e,i,n,r){var o,s,a,l,h=t[0].distance;if(Math.abs(e-h)<=r)for(var c=0;c<t.length-1&&(o=t[parseInt(c.toString(),10)].obj,s=t[c+1].obj.bounds,a=o.bounds,l=s.x-a.x-a.width,Math.abs(l-e)<=1);c++)n[n.length]=t[c+1],a.y<i&&(i=a.y);return i},t.prototype.findEquallySpacedNodesAtTop=function(t,e,i,n){for(var r,o,s,a=1;a<t.length&&(r=t[a-1].obj.bounds,o=t[parseInt(a.toString(),10)].obj.bounds,s=r.y-o.y-o.height,Math.abs(s-e)<=1);a++)n[n.length]=t[parseInt(a.toString(),10)],o.x+o.width>i&&(i=o.x+o.width);return i},t.prototype.findEquallySpacedNodesAtBottom=function(t,e,i,n,r){var o,s,a,l,h=t[0].distance;if(Math.abs(e-h)<=r)for(var c=0;c<t.length-1&&(o=t[parseInt(c.toString(),10)].obj,s=t[c+1].obj.bounds,a=o.bounds,l=s.y-a.y-a.height,Math.abs(l-e)<=1);c++)n[n.length]=t[c+1],a.x+a.width>i&&(i=a.x+a.width);return i},t.prototype.getLayer=function(){var t;return this.diagram.snapSettings.constraints&mg.SnapToObject&&((t=document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("id","_SnappingLines"),t.setAttribute("shapeRendering","crispEdges"),this.getAdornerLayerSvg().appendChild(t)),t},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"Snapping"},t}(),MO=function(){function t(){this.groupUndo=!1,this.childTable=[],this.historyCount=0,this.hasGroup=!1,this.groupCount=0}return t.prototype.initHistory=function(t){t.historyManager={canRedo:!1,canUndo:!1,currentEntry:null,push:t.addHistoryEntry.bind(t),undo:Function,redo:Function,startGroupAction:t.startGroupAction.bind(t),endGroupAction:t.endGroupAction.bind(t),canLog:null,undoStack:[],redoStack:[],stackLimit:t.historyManager?t.historyManager.stackLimit:void 0}},t.prototype.addHistoryEntry=function(t,e){var i=null;if(e.historyManager.canLog){if(!0===e.historyManager.canLog(t).cancel)return}if(e.historyManager&&e.historyManager.canUndo&&e.historyManager.currentEntry&&((i=e.historyManager.currentEntry).next?i.previous&&(i.next.previous=null,i.next=t,t.previous=i):(i.next=t,t.previous=i)),e.historyManager.currentEntry=t,e.historyManager.stackLimit){if("StartGroup"===t.type||"EndGroup"===t.type){var n="EndGroup"===t.type;this.setEntryLimit(n)}this.hasGroup||0!==this.groupCount||(this.historyCount<e.historyManager.stackLimit?this.historyCount++:this.applyLimit(e.historyManager.currentEntry,e.historyManager.stackLimit,e))}this.getHistoryList(e),e.historyManager.canUndo=!0,e.historyManager.canRedo=!1},t.prototype.applyLimit=function(t,e,i,n){if(t&&t.previous){if("StartGroup"===t.type||"EndGroup"===t.type){var r="StartGroup"===t.type;this.setEntryLimit(r)}this.hasGroup||0!==this.groupCount||e--,0===e?(n&&this.limitHistoryStack(t.previous,i),i.historyManager.stackLimit<this.historyCount&&(this.historyCount=i.historyManager.stackLimit),delete t.previous):t.previous&&this.applyLimit(t.previous,e,i,n)}this.groupCount=0},t.prototype.clearHistory=function(t){var e=t.historyManager;e.currentEntry=void 0,e.canUndo=!1,e.canRedo=!1,this.historyCount=0,this.groupCount=0,t.historyManager.undoStack=[],t.historyManager.redoStack=[]},t.prototype.setEntryLimit=function(t){t?this.groupCount--:this.groupCount++,this.hasGroup=t?!t:t},t.prototype.limitHistoryStack=function(t,e){"StartGroup"!==t.type&&"EndGroup"!==t.type&&(this.removeFromStack(e.historyManager.undoStack,t),this.removeFromStack(e.historyManager.redoStack,t)),t.previous&&this.limitHistoryStack(t.previous,e)},t.prototype.removeFromStack=function(t,e){if(t.length)for(var i=0;i<=t.length;i++)if(t[parseInt(i.toString(),10)].undoObject===e.undoObject&&t[parseInt(i.toString(),10)].redoObject===e.redoObject){t.splice(i,1);break}},t.prototype.undo=function(t){var e=this.getUndoEntry(t),i=0;if(e)if("Internal"===e.category)"EndGroup"===e.type?(i++,this.groupUndo=!0,f()&&(t.blazorActions|=$u.GroupingInProgress)):this.undoEntry(e,t),this.groupUndo&&(this.undoGroupAction(e,t,i),this.groupUndo=!1);else{f()||t.historyManager.undo(e);var n={entryType:"undo",oldValue:e.undoObject,newValue:e.redoObject};f()&&(n={entryType:"undo",oldValue:this.getHistoryChangeEvent(e.undoObject,e.blazorHistoryEntryType),newValue:this.getHistoryChangeEvent(e.redoObject,e.blazorHistoryEntryType)}),t.triggerEvent(jg.historyStateChange,n)}},t.prototype.getHistoryChangeEvent=function(t,e){var i={};switch(e){case"Node":i.node=t;break;case"Connector":i.connector=t;break;case"Selector":i.selector=t;break;case"Diagram":i.diagram=t;break;case"ShapeAnnotation":i.shapeAnnotation=t;break;case"PathAnnotation":i.pathAnnotation=t;break;case"PortObject":i.pointPortModel=t;break;case"Object":i.object=t}return i},t.prototype.getHistoryList=function(t){var e,i,n=[],r=[],o=t.historyManager.currentEntry;for(o=t.historyManager.currentEntry,t.historyManager.canUndo||0===t.historyManager.undoStack.length?this.getHistroyObject(n,o):this.getHistroyObject(r,o);o&&o.previous;)e=o.previous,this.getHistroyObject(n,e),o=o.previous;for(o=t.historyManager.currentEntry;o&&o.next;)i=o.next,this.getHistroyObject(r,i),o=o.next;t.historyManager.undoStack=n,t.historyManager.redoStack=r},t.prototype.getHistroyObject=function(t,e){e&&"StartGroup"!==e.type&&"EndGroup"!==e.type&&t.push({redoObject:e.redoObject?e.redoObject:null,undoObject:e.undoObject?e.undoObject:null,type:e.type?e.type:null,category:e.category?e.category:null})},t.prototype.undoGroupAction=function(t,e,i){for(;0!==i;)this.undoEntry(t,e),"StartGroup"===(t=this.getUndoEntry(e)).type?i--:"EndGroup"===t.type&&i++;i=0},t.prototype.undoEntry=function(t,e){var i,n;if("PropertyChanged"!==t.type&&"CollectionChanged"!==t.type&&"LabelCollectionChanged"!==t.type&&(i=t.undoObject,n=t.undoObject),"StartGroup"!==t.type&&"EndGroup"!==t.type&&e.historyManager.undoStack.length>0){var r=e.historyManager.undoStack.splice(0,1);e.historyManager.redoStack.splice(0,0,r[0]),n=t.undoObject}switch(e.protectPropertyChange(!0),e.diagramActions|=Og.UndoRedo,f()&&t.previous&&"StartGroup"===t.previous.type&&(e.blazorActions&=~$u.GroupingInProgress),t.type){case"PositionChanged":case"Align":case"Distribute":this.recordPositionChanged(i,e);break;case"SizeChanged":case"Sizing":this.recordSizeChanged(i,e,t);break;case"RotationChanged":this.recordRotationChanged(i,e,t);break;case"ConnectionChanged":this.recordConnectionChanged(i,e);break;case"PropertyChanged":this.recordPropertyChanged(t,e,!1);break;case"CollectionChanged":if(t&&t.next&&"AddChildToGroupNode"===t.next.type&&"Insert"===t.next.changeType){var o=e.getObject(t.next.undoObject.id);e.insertValue(fa(o),!0)}if(t.isUndo=!0,this.recordCollectionChanged(t,e),t.isUndo=!1,t&&t.next&&"AddChildToGroupNode"===t.next.type&&"Insert"===t.next.changeType){(o=e.getObject(t.next.undoObject.id)).wrapper.measure(new Qu),o.wrapper.arrange(o.wrapper.desiredSize),e.updateDiagramObject(o)}break;case"LabelCollectionChanged":t.isUndo=!0,this.recordLabelCollectionChanged(t,e),t.isUndo=!1;break;case"PortCollectionChanged":t.isUndo=!0,this.recordPortCollectionChanged(t,e),t.isUndo=!1;break;case"Group":this.unGroup(t,e);break;case"UnGroup":this.group(t,e);break;case"SegmentChanged":this.recordSegmentChanged(i,e);break;case"PortPositionChanged":this.recordPortChanged(t,e,!1);break;case"AnnotationPropertyChanged":this.recordAnnotationChanged(t,e,!1);break;case"ChildCollectionChanged":this.recordChildCollectionChanged(t,e,!1);break;case"StackChildPositionChanged":this.recordStackPositionChanged(t,e,!1);break;case"RowHeightChanged":this.recordGridSizeChanged(t,e,!1,!0);break;case"ColumnWidthChanged":this.recordGridSizeChanged(t,e,!1,!1);break;case"LanePositionChanged":this.recordLanePositionChanged(t,e,!1);break;case"LaneCollectionChanged":case"PhaseCollectionChanged":t.isUndo=!0,this.recordLaneOrPhaseCollectionChanged(t,e,!1),t.isUndo=!1;break;case"SendToBack":case"SendForward":case"SendBackward":case"BringToFront":this.recordOrderCommandChanged(t,e,!1);break;case"AddChildToGroupNode":this.recordAddChildToGroupNode(t,e,!1)}if(e.diagramActions&=~Og.UndoRedo,e.protectPropertyChange(!1),e.historyChangeTrigger(t,"Undo"),n){var s=this.checkNodeObject(n,e);if(s){var a=Oa(e.updateSelection);a&&a(s,e)}}},t.prototype.checkNodeObject=function(t,e){var i;if(t.id)i=e.nameTable[t.id];else if(t.nodes&&t.nodes.length>0||t.connectors&&t.connectors.length>0)for(var n=0,r=t.nodes.length>0?t.nodes:t.connectors;n<r.length;n++)i=r[n],i=e.nameTable[i.id];else{var o=t.nodes?t.nodes:t.connectors;if(o)for(var s=0,a=Object.keys(o);s<a.length;s++){var l=a[s],h=Number(l);i=t.nodes?e.nodes[parseInt(h.toString(),10)]:e.connectors[parseInt(h.toString(),10)]}}return i},t.prototype.group=function(t,e){e.add(t.undoObject)},t.prototype.unGroup=function(t,e){t.redoObject=fa(t.undoObject);var i=t.undoObject;e.commandHandler.unGroup(i)},t.prototype.ignoreProperty=function(t){return"zIndex"===t||"wrapper"===t||"parentObj"===t||"controlParent"===t},t.prototype.getProperty=function(t,e){for(var i=0,n=Object.keys(e);i<n.length;i++){var r=n[i];t&&(this.ignoreProperty(r)||(e[""+r]instanceof Object?this.getProperty(t[""+r],e[""+r]):t[""+r]=e[""+r]))}},t.prototype.recordLaneOrPhaseCollectionChanged=function(t,e,i){var n=t.redoObject,r=t.undoObject;if("Remove"===(t.isUndo?"Insert"===t.changeType?"Remove":"Insert":t.changeType))e.remove(n);else if(n.isPhase){var o=e.nameTable[n.parentId];e.addPhases(o,[r])}else{var s=fr(o=e.nameTable[n.parentId],n);e.addLanes(o,[r],s)}e.clearSelection()},t.prototype.recordAnnotationChanged=function(t,e,i){var n=i?t.redoObject:t.undoObject;if(e.canEnableBlazorObject){var r=fa(e.nameTable[n.id]);e.insertValue(r,r instanceof Pw)}var o=cs(n,t.objectId),s=e.commandHandler.getAnnotationChanges(e.nameTable[n.id],o),a=e.nameTable[n.id],l=cs(a,t.objectId);l.offset=o.offset,l.margin=o.margin,l.width=o.width,l.height=o.height,l.rotateAngle=o.rotateAngle,l.margin=o.margin,a instanceof Pw?e.nodePropertyChange(a,{},s):e.connectorPropertyChange(a,{},s)},t.prototype.recordChildCollectionChanged=function(t,e,i){var n=i?t.redoObject:t.undoObject,r=e.nameTable[n.parentId],o=e.nameTable[n.id];r?Fr(e,r,o,!i,"AddNodeToLane"===t.historyAction):(o.parentId&&((r=e.nameTable[o.parentId]).children.splice(r.children.indexOf(o.id),1),r.wrapper.children.splice(r.wrapper.children.indexOf(o.wrapper),1)),n.parentId&&""!==n.parentId&&((r=e.nameTable[n.parentId]).children.push(n.id),r.wrapper.children.push(o.wrapper)),o.parentId=n.parentId,e.removeElements(o),e.updateDiagramObject(o))},t.prototype.recordStackPositionChanged=function(t,e,i){var n=i?t.redoObject:t.undoObject;if(n.source){var r=e.nameTable[n.source.parentId];r&&(n.target?(r.wrapper.children.splice(n.targetIndex,1),r.wrapper.children.splice(n.sourceIndex,0,n.source.wrapper)):void 0!==n.sourceIndex?(e.nameTable[n.source.id]||e.add(n.source),r.wrapper.children.splice(n.sourceIndex,0,e.nameTable[n.source.id].wrapper),e.nameTable[n.source.id].parentId=r.id):(r.wrapper.children.splice(r.wrapper.children.indexOf(e.nameTable[n.source.id].wrapper),1),e.nameTable[n.source.id].parentId=""),i&&"UmlClassifier"===r.shape.type&&e.remove(n.source),r.wrapper.measure(new Qu),r.wrapper.arrange(r.wrapper.desiredSize),e.updateDiagramObject(r),e.updateSelector())}},t.prototype.recordGridSizeChanged=function(t,e,i,n){var r=i?t.redoObject:t.undoObject,o=i?t.undoObject:t.redoObject;if(r.parentId){var s=e.nameTable[r.parentId],a=e.nameTable[r.id],l=s.wrapper.bounds.x,h=s.wrapper.bounds.y;if("SwimLane"===s.shape.type){var c=s.wrapper.children[0],d=s.shape.padding;mr(e,o,s,r),n?(c.updateRowHeight(r.rowIndex,r.wrapper.actualSize.height,!0,d),s.height=s.wrapper.height=c.height):(c.updateColumnWidth(r.columnIndex,r.wrapper.actualSize.width,!0,d),s.width=s.wrapper.width=c.width,r.isPhase&&(a.maxWidth=a.wrapper.maxWidth=r.wrapper.actualSize.width)),ar(s);var p=l-s.wrapper.bounds.x,u=h-s.wrapper.bounds.y;e.drag(s,p,u),e.clearSelection(),e.updateDiagramObject(s)}}},t.prototype.recordLanePositionChanged=function(t,e,i){var n=i?t.redoObject:t.undoObject;if(n.source){var r=e.nameTable[n.source.parentId];r&&"SwimLane"===r.shape.type&&(gr(e,n.target,n.source),e.clearSelection())}},t.prototype.recordPortChanged=function(t,e,i){var n=i?t.redoObject.nodes[0]:t.undoObject.nodes[0];if(e.canEnableBlazorObject){var r=fa(e.nameTable[n.id]);e.insertValue(r,!0)}var o=ds(n,t.objectId),s=e.commandHandler.getPortChanges(e.nameTable[n.id],o),a=e.nameTable[n.id];ds(a,t.objectId).offset=o.offset,e.nodePropertyChange(a,{},s),a.parentId&&e.updateConnectorEdges(e.nameTable[a.parentId])},t.prototype.recordPropertyChanged=function(t,e,i){var n=t.redoObject,r=t.undoObject;if(f())for(var o=0,s=Object.keys(r);o<s.length;o++){var a=void 0;switch(s[o]){case"nodes":for(var l=0,h=Object.keys(r.nodes);l<h.length;l++){var c=h[l];e.canEnableBlazorObject&&(a=fa(e.nodes[Number(c)]),e.insertValue(a,!0))}break;case"connectors":for(var d=0,p=Object.keys(r.connectors);d<p.length;d++){c=p[d];e.canEnableBlazorObject&&(a=fa(e.connectors[Number(c)]),e.insertValue(a,!1))}}}this.getProperty(e,i?n:r),i?e.onPropertyChanged(n,r):e.onPropertyChanged(r,n),e.diagramActions=e.diagramActions|Og.UndoRedo},t.prototype.recordOrderCommandChanged=function(t,e,i){var n=t.redoObject,r=t.undoObject;e.commandHandler.orderCommands(i,i?n:r,t.type),e.diagramActions=e.diagramActions|Og.UndoRedo},t.prototype.recordAddChildToGroupNode=function(t,e,i){var n=e.nameTable[t.undoObject.id],r=e.nameTable[t.objectId];i&&"Insert"===t.changeType&&e.addChildToGroup(n,r.id)},t.prototype.recordSegmentChanged=function(t,e){var i,n=0;if(t.connectors&&t.connectors.length>0)for(n=0;n<t.connectors.length;n++)i=t.connectors[parseInt(n.toString(),10)],this.segmentChanged(i,e)},t.prototype.segmentChanged=function(t,e){var i=e.nameTable[t.id];i.segments=t.segments,e.commandHandler.updateEndPoint(i)},t.prototype.recordPositionChanged=function(t,e){var i,n,r=0;if(t.nodes&&t.nodes.length>0)for(r=0;r<t.nodes.length;r++)i=t.nodes[parseInt(r.toString(),10)],this.positionChanged(i,e);if(t.connectors&&t.connectors.length>0)for(r=0;r<t.connectors.length;r++)n=t.connectors[parseInt(r.toString(),10)],this.connectionChanged(n,e)},t.prototype.positionChanged=function(t,e){var i=e.nameTable[t.id];if(t.processId&&!i.processId&&e.addProcess(t,t.processId),!t.processId&&i.processId&&e.removeProcess(t.id),i.processId){var n=t.margin.left-i.margin.left,r=t.margin.top-i.margin.top;e.drag(i,n,r)}else{if(i.parentId){var o=e.nameTable[i.parentId];o.isLane&&(t.wrapper.offsetX=t.width/2+(o.wrapper.bounds.x+t.margin.left),t.wrapper.offsetY=t.height/2+(o.wrapper.bounds.y+t.margin.top))}n=t.wrapper.offsetX-i.offsetX,r=t.wrapper.offsetY-i.offsetY;e.drag(i,n,r)}e.bpmnModule&&e.bpmnModule.updateDocks(i,e)},t.prototype.recordSizeChanged=function(t,e,i){var n,r,o=0;if(t&&t.nodes&&t.nodes.length>0)for(o=0;o<t.nodes.length;o++)if((r=t.nodes[parseInt(o.toString(),10)]).children&&!r.container)for(var s=e.commandHandler.getAllDescendants(r,[]),a=0;a<s.length;a++){var l=i.childTable[s[parseInt(a.toString(),10)].id];VS(l)===Pw?(this.sizeChanged(l,e,i),this.positionChanged(l,e)):this.connectionChanged(l,e,i)}else this.sizeChanged(r,e),this.positionChanged(r,e);if(t&&t.connectors&&t.connectors.length>0){var h=t.connectors;for(o=0;o<h.length;o++)n=h[parseInt(o.toString(),10)],this.connectionChanged(n,e)}},t.prototype.sizeChanged=function(t,e,i){var n=e.nameTable[t.id],r=t.wrapper.actualSize.width/n.wrapper.actualSize.width,o=t.wrapper.actualSize.height/n.wrapper.actualSize.height;i&&i.childTable&&(i.childTable[t.id]=fa(n)),e.scale(n,r,o,{x:t.wrapper.offsetX/n.wrapper.offsetX,y:t.wrapper.offsetY/n.wrapper.offsetY})},t.prototype.recordRotationChanged=function(t,e,i){var n,r,o=0,s=e.selectedItems;if(s.rotateAngle=t.rotateAngle,s&&s.wrapper&&(s.wrapper.rotateAngle=t.rotateAngle),t&&t.nodes&&t.nodes.length>0)for(o=0;o<t.nodes.length;o++)n=t.nodes[parseInt(o.toString(),10)],this.rotationChanged(n,e),this.positionChanged(n,e);if(t&&t.connectors&&t.connectors.length>0)for(o=0;o<t.connectors.length;o++)r=t.connectors[parseInt(o.toString(),10)],this.connectionChanged(r,e)},t.prototype.rotationChanged=function(t,e){var i=e.nameTable[t.id];e.rotate(i,t.rotateAngle-i.rotateAngle)},t.prototype.recordConnectionChanged=function(t,e){var i;(i=t&&t.connectors?t.connectors[0]:t).sourceID&&e.nameTable[i.sourceID]&&e.insertValue(e.nameTable[i.sourceID],!0),i.targetID&&e.nameTable[i.targetID]&&e.insertValue(e.nameTable[i.targetID],!0),this.connectionChanged(i,e)},t.prototype.connectionChanged=function(t,e,i){var n,r=e.nameTable[t.id];t.sourcePortID!==r.sourcePortID&&(e.removePortEdges(e.nameTable[r.sourceID],r.sourcePortID,r.id,!1),r.sourcePortID=t.sourcePortID,e.connectorPropertyChange(r,{},{sourcePortID:t.sourcePortID})),t.targetPortID!==r.targetPortID&&(e.removePortEdges(e.nameTable[r.targetID],r.targetPortID,r.id,!0),r.targetPortID=t.targetPortID,e.connectorPropertyChange(r,{},{targetPortID:t.targetPortID})),t.sourceID!==r.sourceID&&(""===t.sourceID?ns((n=e.nameTable[r.sourceID]).outEdges,t.id):((n=e.nameTable[t.sourceID]).outEdges.push(t.id),e.updatePortEdges(n,t,!1)),r.sourceID=t.sourceID,e.connectorPropertyChange(r,{},{sourceID:t.sourceID})),t.targetID!==r.targetID&&(""===t.targetID?ns((n=e.nameTable[r.targetID]).inEdges,t.id):((n=e.nameTable[t.targetID]).inEdges.push(t.id),e.updatePortEdges(n,t,!0)),r.targetID=t.targetID,e.connectorPropertyChange(r,{},{targetID:t.targetID})),i&&i.childTable&&(i.childTable[t.id]=fa(r));var o=t.sourcePoint.x-r.sourcePoint.x,s=t.sourcePoint.y-r.sourcePoint.y;0===o&&0===s||e.dragSourceEnd(r,o,s);var a=t.targetPoint.x-r.targetPoint.x,l=t.targetPoint.y-r.targetPoint.y;0===a&&0===l||e.dragTargetEnd(r,a,l),e.updateSelector(),"SVG"!==e.mode&&e.refreshDiagramLayer()},t.prototype.recordCollectionChanged=function(t,e){var i=t.undoObject;if(t&&t.changeType){if("Remove"===(t.isUndo?"Insert"===t.changeType?"Remove":"Insert":t.changeType))i.nodeId?e.remove(e.nameTable[i.nodeId+"_textannotation_"+i.id]):(e.remove(i),e.clearSelectorLayer());else{if(e.clearSelectorLayer(),i.parentId){var n=e.nameTable[i.parentId];n?e.addChild(n,i):e.add(i)}else i.nodeId?e.addTextAnnotation(i,e.nameTable[i.nodeId]):e.nameTable[i.id]||(i&&i.shape&&"SwimLane"===i.shape.type&&t.isUndo&&Cr(i,void 0,void 0,void 0,void 0,!0),e.add(i));i.processId&&e.nameTable[i.processId]&&e.addProcess(i,i.processId)}"SVG"!==e.mode&&e.refreshDiagramLayer()}},t.prototype.recordLabelCollectionChanged=function(t,e){var i=t.undoObject,n=t.redoObject,r=e.nameTable[n.id];if(t&&t.changeType){"Remove"===(t.isUndo?"Insert"===t.changeType?"Remove":"Insert":t.changeType)?(e.removeLabels(r,[i]),e.clearSelectorLayer()):(e.clearSelectorLayer(),e.addLabels(r,[i])),"SVG"!==e.mode&&e.refreshDiagramLayer()}},t.prototype.recordPortCollectionChanged=function(t,e){var i=t.undoObject,n=t.redoObject,r=e.nameTable[n.id];if(t&&t.changeType){"Remove"===(t.isUndo?"Insert"===t.changeType?"Remove":"Insert":t.changeType)?(e.removePorts(r,[i]),e.clearSelectorLayer()):(e.clearSelectorLayer(),e.addPorts(r,[i])),"SVG"!==e.mode&&e.refreshDiagramLayer()}},t.prototype.redo=function(t){var e=this.getRedoEntry(t),i=0;if(e)if("Internal"===e.category)"StartGroup"===e.type?(i++,this.groupUndo=!0,f()&&(t.blazorActions|=$u.GroupingInProgress)):this.redoEntry(e,t),this.groupUndo&&(this.redoGroupAction(e,t,i),this.groupUndo=!1);else{f()||t.historyManager.redo(e);var n={entryType:"redo",oldValue:e.redoObject,newValue:e.undoObject};f()&&(n={entryType:"redo",oldValue:this.getHistoryChangeEvent(e.redoObject,e.blazorHistoryEntryType),newValue:this.getHistoryChangeEvent(e.undoObject,e.blazorHistoryEntryType)}),t.triggerEvent(jg.historyStateChange,n)}},t.prototype.redoGroupAction=function(t,e,i){for(;0!==i;)this.redoEntry(t,e),"EndGroup"===(t=this.getRedoEntry(e)).type?i--:"StartGroup"===t.type&&i++;i=0},t.prototype.redoEntry=function(t,e){var i,n;if("PropertyChanged"!==t.type&&"CollectionChanged"!==t.type&&(i=t.redoObject,n=t.redoObject),e.diagramActions|=Og.UndoRedo,"StartGroup"!==t.type&&"EndGroup"!==t.type&&e.historyManager.redoStack.length>0){var r=e.historyManager.redoStack.splice(0,1);e.historyManager.undoStack.splice(0,0,r[0]),n=t.redoObject}switch(e.protectPropertyChange(!0),f()&&t.next&&"EndGroup"===t.next.type&&(e.blazorActions&=~$u.GroupingInProgress),t.type){case"PositionChanged":case"Align":case"Distribute":this.recordPositionChanged(i,e);break;case"SizeChanged":case"Sizing":this.recordSizeChanged(i,e,t);break;case"RotationChanged":this.recordRotationChanged(i,e,t);break;case"ConnectionChanged":this.recordConnectionChanged(i,e);break;case"PropertyChanged":this.recordPropertyChanged(t,e,!0);break;case"CollectionChanged":this.recordCollectionChanged(t,e);break;case"LabelCollectionChanged":this.recordLabelCollectionChanged(t,e);break;case"PortCollectionChanged":this.recordPortCollectionChanged(t,e);break;case"Group":this.group(t,e);break;case"UnGroup":this.unGroup(t,e);break;case"SegmentChanged":this.recordSegmentChanged(i,e);break;case"PortPositionChanged":this.recordPortChanged(t,e,!0);break;case"AnnotationPropertyChanged":this.recordAnnotationChanged(t,e,!0);break;case"ChildCollectionChanged":this.recordChildCollectionChanged(t,e,!0);break;case"StackChildPositionChanged":this.recordStackPositionChanged(t,e,!0);break;case"RowHeightChanged":this.recordGridSizeChanged(t,e,!0,!0);break;case"ColumnWidthChanged":this.recordGridSizeChanged(t,e,!0,!1);break;case"LanePositionChanged":this.recordLanePositionChanged(t,e,!0);break;case"LaneCollectionChanged":case"PhaseCollectionChanged":this.recordLaneOrPhaseCollectionChanged(t,e,!0);break;case"SendToBack":case"SendForward":case"SendBackward":case"BringToFront":this.recordOrderCommandChanged(t,e,!0);break;case"AddChildToGroupNode":this.recordAddChildToGroupNode(t,e,!0)}if(e.protectPropertyChange(!1),e.diagramActions&=~Og.UndoRedo,e.historyChangeTrigger(t,"Redo"),n){var o=this.checkNodeObject(n,e);if(o){var s=Oa(e.updateSelection);s&&s(o,e)}}},t.prototype.getUndoEntry=function(t){var e,i=null,n=t.historyManager;return n.canUndo&&(i=n.currentEntry,(e=n.currentEntry.previous)?(n.currentEntry=e,n.canRedo||(n.canRedo=!0)):(n.canRedo=!0,n.canUndo=!1)),i},t.prototype.getRedoEntry=function(t){var e,i=null,n=t.historyManager;return n.canRedo&&((e=n.currentEntry.previous||n.canUndo?n.currentEntry.next:n.currentEntry)&&(n.currentEntry=e,n.canUndo||(n.canUndo=!0),e.next||(n.canRedo=!1,n.canUndo=!0)),i=n.currentEntry),i},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"UndoRedo"},t}(),CO=function(){function t(){this.protectChange=!1}return t.prototype.expand=function(t,e,i,n){var r=this,o={},s=0;if(n.realActions=n.realActions|Ag.AnimationClick,o[parseInt((0).toString(),10)]=setInterval(function(){return s++,r.layoutAnimation(e,o,6===s,n,i)},20),i.isExpanded){var a=.2;this.protectChange=n.isProtectedOnChange,n.protectPropertyChange(!1);var l={};t&&(this.updateOpacity(i,a,n),l[parseInt((0).toString(),10)]=setInterval(function(){n.allowServerDataBinding=!1,a<=1?r.updateOpacity(i,a,n):clearInterval(l[0]),a+=.2,n.allowServerDataBinding=!0},20))}},t.prototype.layoutAnimation=function(t,e,i,n,r){if(!i)for(var o=0;o<t.objects.length;o++){var s=n.nameTable[t.objects[parseInt(o.toString(),10)].id];s.offsetX+=t.objects[parseInt(o.toString(),10)].differenceX/5,s.offsetY+=t.objects[parseInt(o.toString(),10)].differenceY/5}if(i){clearInterval(e[0]),n.realActions=n.realActions&~Ag.AnimationClick,n.refreshCanvasLayers(),n.protectPropertyChange(!0),n.triggerEvent(jg.animationComplete,void 0),n.organizationalChartModule.isAnimation=!1,n.layout.fixedNode="",n.protectPropertyChange(this.protectChange);var a={element:xs(fa(r)),state:!!r.isExpanded};n.triggerEvent(jg.expandStateChange,a),n.lineRoutingModule&&n.constraints&Mg.LineRouting&&n.resetSegments()}},t.prototype.updateOpacity=function(t,e,i){for(var n=0;n<t.outEdges.length;n++){var r=i.nameTable[t.outEdges[parseInt(n.toString(),10)]],o=i.nameTable[r.targetID];r.style.opacity=e;for(var s=0;s<r.wrapper.children.length;s++)r.wrapper.children[parseInt(s.toString(),10)].style.opacity=e,o.style.opacity=e,o.wrapper instanceof $g&&i.updateNodeProperty(o.wrapper,void 0,e);this.updateOpacity(o,e,i)}},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"LayoutAnimate"},t}(),NO=function(){function t(){this.size=20,this.intermediatePoints=[],this.gridCollection=[],this.startArray=[],this.targetGridCollection=[],this.sourceGridCollection=[],this.considerWalkable=[]}return t.prototype.lineRouting=function(t){var e=t.connectors.length;if(this.renderVirtualRegion(t),e>0)for(var i=0;i<e;i++){var n=t.connectors[parseInt(i.toString(),10)];"Orthogonal"===n.type&&n.visible&&this.refreshConnectorSegments(t,n,!0)}},t.prototype.renderVirtualRegion=function(t,e){var i=this.size;(t.spatialSearch.pageTop<0||t.spatialSearch.pageLeft<0)&&(i=this.size+this.size/2);var n=t.spatialSearch.pageRight+i,r=t.spatialSearch.pageBottom+i,o=t.spatialSearch.pageLeft-i,s=t.spatialSearch.pageTop-i;if(o=o<0?o-20:0,s=s<0?s-20:0,e&&(this.width!==n-o||this.height!==r-s||this.diagramStartX!==o||this.diagramStartY!==s)||void 0===e){this.width=n-o,this.height=r-s,this.diagramStartX=o,this.diagramStartY=s,this.gridCollection=[],this.noOfRows=this.width/this.size,this.noOfCols=this.height/this.size;for(var a=this.size,l=this.diagramStartX<0?this.diagramStartX:0,h=this.diagramStartY<0?this.diagramStartY:0,c=0;c<this.noOfCols;c++){for(var d=0;d<this.noOfRows;d++){0===c&&this.gridCollection.push([0]);var p={x:l,y:h,width:a,height:a,gridX:d,gridY:c,walkable:!0,tested:void 0,nodeId:[]};this.gridCollection[parseInt(d.toString(),10)][parseInt(c.toString(),10)]=p,l+=a}l=this.diagramStartX<0?this.diagramStartX:0,h+=a}}var u=this.findNodes(t.nodes);this.updateNodesInVirtualRegion(u)},t.prototype.findNodes=function(t){for(var e,i=[],n=0;n<t.length;n++)"SwimLane"===(e=t[parseInt(n.toString(),10)]).shape.type||e.isLane||e.isPhase||e.isHeader||!e.visible||i.push(e);return i},t.prototype.updateNodesInVirtualRegion=function(t){for(var e=this.size,i=this.diagramStartX<0?this.diagramStartX:0,n=this.diagramStartY<0?this.diagramStartY:0,r=0;r<this.noOfCols;r++){for(var o=0;o<this.noOfRows;o++){var s=this.gridCollection[parseInt(o.toString(),10)][parseInt(r.toString(),10)],a=new Zu(i,n,this.size,this.size),l=void 0,h=void 0;for(s.walkable=!0,s.tested=void 0,s.nodeId=[],h=0;h<t.length;h++)t[parseInt(h.toString(),10)].wrapper.bounds&&(l=this.intersectRect(a,t[parseInt(h.toString(),10)].wrapper.bounds)),l&&(s.nodeId.push(t[parseInt(h.toString(),10)].id),s.walkable=!1,""!==t[parseInt(h.toString(),10)].parentId&&(s.parentNodeId=t[parseInt(h.toString(),10)].parentId));i+=e}i=this.diagramStartX<0?this.diagramStartX:0,n+=e}},t.prototype.intersectRect=function(t,e){return!(e.left>=t.right||e.right<=t.left||e.top>=t.bottom||e.bottom<=t.top)},t.prototype.findEndPoint=function(t,e,i){var n,r;if(e&&""!==t.sourcePortID&&t.sourcePortWrapper||!e&&""!==t.targetPortID&&t.targetPortWrapper){r=Ae(n=e?{x:t.sourcePortWrapper.offsetX,y:t.sourcePortWrapper.offsetY}:{x:t.targetPortWrapper.offsetX,y:t.targetPortWrapper.offsetY},void 0,e?t.sourceWrapper.bounds:t.targetWrapper.bounds);var o=e?t.sourcePortWrapper.bounds:t.targetPortWrapper.bounds;n=i?"Top"===r?{x:o.topCenter.x,y:o.topCenter.y}:"Left"===r?{x:o.middleLeft.x,y:o.middleLeft.y}:"Right"===r?{x:o.middleRight.x,y:o.middleRight.y}:{x:o.bottomCenter.x,y:o.bottomCenter.y}:{x:o.center.x,y:o.center.y}}else n=e&&this.startNode||!e&&this.targetNode?e?{x:this.startNode.wrapper.offsetX,y:this.startNode.wrapper.offsetY}:{x:this.targetNode.wrapper.offsetX,y:this.targetNode.wrapper.offsetY}:e?{x:t.sourcePoint.x,y:t.sourcePoint.y}:{x:t.targetPoint.x,y:t.targetPoint.y};return n},t.prototype.refreshConnectorSegments=function(t,e,i){var n,r,o,s,a,l,h,c,d,p,u,g=e.sourceID,m=e.targetID,f=e.sourcePortID,v=e.targetPortID;if(function(t,e){var i=0;return t.constraints&bg.LineRouting?i=t.constraints&bg.LineRouting:t.constraints&bg.InheritLineRouting&&(i=e.constraints&Mg.LineRouting),i}(e,t)){this.startNode=t.nameTable[""+g],this.targetNode=t.nameTable[""+m],this.intermediatePoints=[],this.startArray=[],this.targetGridCollection=[],this.sourceGridCollection=[],this.startGrid=void 0,this.targetGrid=void 0;for(var y=0;y<this.noOfCols;y++)for(var b=0;b<this.noOfRows;b++)this.gridCollection[parseInt(b.toString(),10)][parseInt(y.toString(),10)].tested=this.gridCollection[parseInt(b.toString(),10)][parseInt(y.toString(),10)].parent=void 0,this.gridCollection[parseInt(b.toString(),10)][parseInt(y.toString(),10)].previousDistance=this.gridCollection[parseInt(b.toString(),10)][parseInt(y.toString(),10)].afterDistance=void 0,this.gridCollection[parseInt(b.toString(),10)][parseInt(y.toString(),10)].totalDistance=void 0;n=this.findEndPoint(e,!0),r=this.findEndPoint(e,!1);for(y=0;y<this.noOfRows;y++)for(b=0;b<this.noOfCols;b++){o=this.gridCollection[parseInt(y.toString(),10)][parseInt(b.toString(),10)];var S=new Zu(o.x,o.y,o.width,o.height);if(!S.containsPoint(n)||this.startGrid||-1===o.nodeId.indexOf(g)&&""!==g||(this.startGrid=(f&&this.startGrid,o)),!S.containsPoint(r)||this.targetGrid||-1===o.nodeId.indexOf(m)&&""!==m||(this.targetGrid=(v&&this.targetGrid,o)),!f&&this.startNode){var w=this.startNode.wrapper.bounds;S.containsPoint(w.topCenter)&&!s&&(s=o),S.containsPoint(w.middleLeft)&&!l&&(l=o),S.containsPoint(w.middleRight)&&!h&&(h=o),S.containsPoint(w.bottomCenter)&&!a&&(a=o)}if(!v&&this.targetNode){w=this.targetNode.wrapper.bounds;S.containsPoint(w.topCenter)&&!d&&(d=o),S.containsPoint(w.middleLeft)&&!u&&(u=o),S.containsPoint(w.middleRight)&&!c&&(c=o),S.containsPoint({x:w.bottomCenter.x,y:w.bottomCenter.y})&&!p&&(p=o)}}this.findEdgeBoundary(f,l,h,s,a,!0),this.findEdgeBoundary(v,u,c,d,p,!1),this.startGrid.totalDistance=0,this.startGrid.previousDistance=0,this.intermediatePoints.push({x:this.startGrid.gridX,y:this.startGrid.gridY}),this.startArray.push(this.startGrid),e&&u&&c&&d&&p&&this.checkObstacles(e,t,u,c,d,p);t:for(;this.startArray.length>0;){var I=this.startArray.pop();for(y=0;y<this.targetGridCollection.length;y++){var x=this.targetGridCollection[parseInt(y.toString(),10)];if(I.gridX===x.gridX&&I.gridY===x.gridY){if(this.getIntermediatePoints(I),this.updateConnectorSegments(t,this.intermediatePoints,this.gridCollection,e,i)){this.considerWalkable=[];break t}this.targetGridCollection.splice(this.targetGridCollection.indexOf(x),1),I=this.startArray.pop()}}this.findPath(I)}}},t.prototype.checkChildNodes=function(t,e){var i=!1,n=!1;if(t.nodeId.length>=1&&!e)for(var r=0;r<t.nodeId.length;r++){for(var o=t.nodeId[parseInt(r.toString(),10)],s=0;s<t.nodeId.length;s++)this.targetNode.parentId===t.nodeId[parseInt(s.toString(),10)]&&(n=!0);i=!n&&this.targetNode.id===o}else 1===t.nodeId.length&&(i=!0);return i},t.prototype.findEdgeBoundary=function(t,e,i,n,r,o){var s,a=o?this.sourceGridCollection:this.targetGridCollection;if(!t&&(o?this.startNode:this.targetNode)){for(var l=e.gridX;l<=i.gridX;l++)s=this.gridCollection[parseInt(l.toString(),10)][e.gridY],(this.checkChildNodes(s,o)&&(l===e.gridX||l===i.gridX)||l!==e.gridX&&l!==i.gridX)&&a.push(s);for(l=n.gridY;l<=r.gridY;l++)s=this.gridCollection[n.gridX][parseInt(l.toString(),10)],(this.checkChildNodes(s,o)&&(l===n.gridY||l===r.gridY)||l!==n.gridY&&l!==r.gridY)&&-1===a.indexOf(s)&&a.push(s)}else a.push(o?this.startGrid:this.targetGrid)},t.prototype.checkObstacles=function(t,e,i,n,r,o){var s=this.findNearestNeigbours(this.startGrid,this.gridCollection,!0);if(0===s.length)if(""!==t.sourcePortID){"Top"===(a=Ae({x:t.sourcePortWrapper.offsetX,y:t.sourcePortWrapper.offsetY},void 0,t.sourceWrapper.bounds))?this.resetGridColl(this.startGrid,"top",!0):"Right"===a?this.resetGridColl(this.startGrid,"right",!0):"Bottom"===a?this.resetGridColl(this.startGrid,"bottom",!0):this.resetGridColl(this.startGrid,"left",!0)}else this.resetGridColl(this.startGrid,"top",!0),this.resetGridColl(this.startGrid,"right",!0),this.resetGridColl(this.startGrid,"bottom",!0),this.resetGridColl(this.startGrid,"left",!0);if(0===(s=this.findNearestNeigbours(this.targetGrid,this.gridCollection,!1)).length)if(""!==t.targetPortID){var a;"Top"===(a=Ae({x:t.targetPortWrapper.offsetX,y:t.targetPortWrapper.offsetY},void 0,t.targetWrapper.bounds))?this.resetGridColl(this.targetGrid,"top",!0):"Right"===a?this.resetGridColl(this.targetGrid,"right",!0):"Bottom"===a?this.resetGridColl(this.targetGrid,"bottom",!0):this.resetGridColl(this.targetGrid,"left",!0)}else this.resetGridColl(this.targetGrid,"top",!1),this.resetGridColl(this.targetGrid,"right",!1),this.resetGridColl(this.targetGrid,"bottom",!1),this.resetGridColl(this.targetGrid,"left",!1);if(this.targetGridCollection.length>0&&this.targetGridCollection[0].nodeId.length>1)for(var l=0;l<=1;l++){for(var h=this.targetGridCollection[parseInt(l.toString(),10)].gridX,c=this.targetGridCollection[parseInt(l.toString(),10)].gridY,d=this.targetGridCollection[parseInt(l.toString(),10)].nodeId,p=void 0,u=0;u<d.length;u++)if(this.targetNode.id!=d[parseInt(u.toString(),10)]){p=d[parseInt(u.toString(),10)];break}var g=void 0,m=void 0,f=void 0;e.nameTable[this.targetNode.id]&&(g=e.nameTable[this.targetNode.id].wrapper),e.nameTable[""+p]&&(m=e.nameTable[""+p].wrapper),g&&m&&(f=this.contains(m.bounds,g.bounds));for(var v=void 0,y=0;y<d.length;y++)this.targetNode.parentId===d[parseInt(y.toString(),10)]&&(v=!0);if(!this.gridCollection[parseInt(h.toString(),10)][parseInt(c.toString(),10)].walkable&&f&&!v){var b=void 0,S=void 0;b=this.getEndvalue(i,"left"),S=i.gridX-b.gridX,this.changeValue(i,S,"left"),S=(b=this.getEndvalue(n,"right")).gridX-n.gridX,this.changeValue(n,S,"right"),b=this.getEndvalue(r,"top"),S=r.gridY-b.gridY,this.changeValue(r,S,"top"),b=this.getEndvalue(o,"bottom"),S=o.gridY-b.gridY,this.changeValue(o,S,"top")}}},t.prototype.contains=function(t,e){return t.left<=e.left&&t.right>=e.right&&t.top<=e.top&&t.bottom>=e.bottom},t.prototype.getEndvalue=function(t,e){return this.gridCollection[t.gridX][t.gridY].walkable?t:"left"===e?this.getEndvalue(this.gridCollection[t.gridX-1][t.gridY],e):"right"===e?this.getEndvalue(this.gridCollection[t.gridX+1][t.gridY],e):"top"===e?this.getEndvalue(this.gridCollection[t.gridX][t.gridY-1],e):"bottom"===e?this.getEndvalue(this.gridCollection[t.gridX][t.gridY+1],e):t},t.prototype.changeValue=function(t,e,i){t.walkable||this.considerWalkable.push(t);for(var n,r=0;r<=e;r++)"left"===i?n=this.gridCollection[t.gridX-r][t.gridY]:"right"===i?n=this.gridCollection[t.gridX+r][t.gridY]:"top"===i?n=this.gridCollection[t.gridX][t.gridY-r]:"bottom"===i&&(n=this.gridCollection[t.gridX][t.gridY+r]),n.walkable||this.considerWalkable.push(n)},t.prototype.getIntermediatePoints=function(t){var e;for(this.intermediatePoints=[];t;)this.intermediatePoints.push({x:t.gridX,y:t.gridY}),t=t.parent;this.intermediatePoints.reverse(),this.intermediatePoints.length>=1&&(this.intermediatePoints[0].x===this.intermediatePoints[1].x?this.intermediatePoints[0].y<this.intermediatePoints[1].y?(e=this.neigbour(this.startGrid,"bottom",void 0,!0),this.intermediatePoints[0].y+=e-1):(e=this.neigbour(this.startGrid,"top",void 0,!0),this.intermediatePoints[0].y-=e-1):this.intermediatePoints[0].x<this.intermediatePoints[1].x?(e=this.neigbour(this.startGrid,"right",void 0,!0),this.intermediatePoints[0].x+=e-1):(e=this.neigbour(this.startGrid,"left",void 0,!0),this.intermediatePoints[0].x-=e-1))},t.prototype.updateConnectorSegments=function(t,e,i,n,r){var o,s,a,l,h,c,d,p,u,g=[],m=[],f=n.targetWrapper,v=n.sourceWrapper,y=this.findEndPoint(n,!0);""===n.targetPortID&&n.targetWrapper||(s=this.findEndPoint(n,!1,!0));for(var b=0;b<e.length;b++)a=(h=i[e[parseInt(b.toString(),10)].x][e[parseInt(b.toString(),10)].y]).x+h.width/2,l=h.y+h.height/2,m.push({x:a,y:l}),b>=1&&(p=m[m.length-2].x!==m[m.length-1].x?m[m.length-2].x>m[m.length-1].x?"Left":"Right":m[m.length-2].y>m[m.length-1].y?"Top":"Bottom"),b>=2&&u===p&&m.splice(m.length-2,1),u=p;for(var S=0;S<m.length-1;S++)m[parseInt(S.toString(),10)].x!==m[S+1].x?(0===S&&""===n.sourcePortID&&v&&(y=m[parseInt(S.toString(),10)].x>m[S+1].x?v.bounds.middleLeft:v.bounds.middleRight),S===m.length-2&&""===n.targetPortID&&f&&(s=m[parseInt(S.toString(),10)].x>m[S+1].x?f.bounds.middleRight:f.bounds.middleLeft),0===S&&y&&(m[parseInt(S.toString(),10)].x=y.x,m[parseInt(S.toString(),10)].y=m[S+1].y=y.y),S===m.length-2&&s&&(s.x-m[S+1].x<0&&Math.abs(s.x-m[parseInt(S.toString(),10)].x)<n.targetDecorator.width+1&&(m[parseInt(S.toString(),10)].x=m[S-1].x-=this.size/2),s.x-m[S+1].x>0&&Math.abs(s.x-m[parseInt(S.toString(),10)].x)<n.targetDecorator.width+1&&(m[parseInt(S.toString(),10)].x=m[S-1].x+=this.size/2),m[S+1].x=s.x,m[parseInt(S.toString(),10)].y=m[S+1].y=s.y)):(0===S&&v&&(y=m[parseInt(S.toString(),10)].y>m[S+1].y?v.bounds.topCenter:v.bounds.bottomCenter),S===m.length-2&&""===n.targetPortID&&f&&(s=m[parseInt(S.toString(),10)].y>m[S+1].y?f.bounds.bottomCenter:f.bounds.topCenter),0===S&&y&&(m[parseInt(S.toString(),10)].y=y.y,m[parseInt(S.toString(),10)].x=m[S+1].x=y.x),S===m.length-2&&s&&(s.y-m[S+1].y<0&&Math.abs(s.y-m[parseInt(S.toString(),10)].y)<n.targetDecorator.height+1&&(m[parseInt(S.toString(),10)].y=m[S-1].y-=this.size/2),s.y-m[S+1].y>0&&Math.abs(s.y-m[parseInt(S.toString(),10)].y)<n.targetDecorator.width+1&&(m[parseInt(S.toString(),10)].y=m[S-1].y+=this.size/2),m[S+1].y=s.y,m[parseInt(S.toString(),10)].x=m[S+1].x=s.x));for(S=0;S<m.length-1;S++)m[parseInt(S.toString(),10)].x!==m[S+1].x?m[parseInt(S.toString(),10)].x>m[S+1].x?(c="Left",d=m[parseInt(S.toString(),10)].x-m[S+1].x):(c="Right",d=m[S+1].x-m[parseInt(S.toString(),10)].x):m[parseInt(S.toString(),10)].y>m[S+1].y?(c="Top",d=m[parseInt(S.toString(),10)].y-m[S+1].y):(c="Bottom",d=m[S+1].y-m[parseInt(S.toString(),10)].y),o={type:"Orthogonal",length:d,direction:c},g.push(o);var w=g[g.length-1];return 1===g.length&&(w.length-=20),w.length<10&&2===g.length&&(g.pop(),g[0].length-=20,w=g[0]),(("Top"===w.direction||"Bottom"===w.direction)&&w.length>n.targetDecorator.height+1||("Right"===w.direction||"Left"===w.direction)&&w.length>n.targetDecorator.width+1)&&(n.segments=g,r&&t.connectorPropertyChange(n,{},{type:"Orthogonal",segments:g}),!0)},t.prototype.findPath=function(t){for(var e,i=[],n=this.findNearestNeigbours(t,this.gridCollection,!0),r=0;r<n.length;r++)if(null!==(e=this.findIntermediatePoints(n[parseInt(r.toString(),10)].gridX,n[parseInt(r.toString(),10)].gridY,t.gridX,t.gridY,this.targetGrid.gridX,this.targetGrid.gridY))){var o=this.gridCollection[e.x][e.y],s=this.octile(Math.abs(e.x-t.gridX),Math.abs(e.y-t.gridY)),a=t.previousDistance+s;o.previousDistance&&!(o.previousDistance>a)||e.x===t.gridX&&e.y===t.gridY||(i.push(e),o.previousDistance=a,o.afterDistance=o.afterDistance||this.manhattan(Math.abs(e.x-this.targetGrid.gridX),Math.abs(e.y-this.targetGrid.gridY)),o.totalDistance=o.previousDistance+o.afterDistance,o.parent=t)}if(i.length>0)for(r=0;r<i.length;r++){o=this.gridCollection[i[parseInt(r.toString(),10)].x][i[parseInt(r.toString(),10)].y];-1===this.startArray.indexOf(o)&&this.startArray.push(o)}this.sorting(this.startArray)},t.prototype.sorting=function(t){for(var e=!1;!e;){e=!0;for(var i=1;i<t.length;i+=1)if(t[i-1].totalDistance<t[parseInt(i.toString(),10)].totalDistance){e=!1;var n=t[i-1];t[i-1]=t[parseInt(i.toString(),10)],t[parseInt(i.toString(),10)]=n}}return t},t.prototype.octile=function(t,e){var i=Math.SQRT2-1;return e>t?i*t+e:i*e+t},t.prototype.manhattan=function(t,e){return t+e},t.prototype.findNearestNeigbours=function(t,e,i){var n=[],r=t.parent;if(r){var o=(t.gridX-r.gridX)/Math.max(Math.abs(t.gridX-r.gridX),1),s=(t.gridY-r.gridY)/Math.max(Math.abs(t.gridY-r.gridY),1);0!==o?(this.isWalkable(t.gridX,t.gridY-1,!0)&&-1===this.sourceGridCollection.indexOf(e[t.gridX][t.gridY-1])&&n.push(e[t.gridX][t.gridY-1]),this.isWalkable(t.gridX,t.gridY+1,!0)&&this.sourceGridCollection.indexOf(e[t.gridX][t.gridY+1])&&n.push(e[t.gridX][t.gridY+1]),this.isWalkable(t.gridX+o,t.gridY,!0)&&-1===this.sourceGridCollection.indexOf(e[t.gridX+o][t.gridY])&&n.push(e[t.gridX+o][t.gridY])):0!==s&&(this.isWalkable(t.gridX-1,t.gridY,!0)&&-1===this.sourceGridCollection.indexOf(e[t.gridX-1][t.gridY])&&n.push(e[t.gridX-1][t.gridY]),this.isWalkable(t.gridX+1,t.gridY,!0)&&-1===this.sourceGridCollection.indexOf(e[t.gridX+1][t.gridY])&&n.push(e[t.gridX+1][t.gridY]),this.isWalkable(t.gridX,t.gridY+s,!0)&&-1===this.sourceGridCollection.indexOf(e[t.gridX][t.gridY+s])&&n.push(e[t.gridX][t.gridY+s]))}else this.neigbour(t,"top",n,i),this.neigbour(t,"right",n,i),this.neigbour(t,"bottom",n,i),this.neigbour(t,"left",n,i);return n},t.prototype.neigbour=function(t,e,i,n){for(var r,o=1;o>0;){var s="top"===e||"bottom"===e?t.gridX:"left"===e?t.gridX-o:t.gridX+o,a="right"===e||"left"===e?t.gridY:"top"===e?t.gridY-o:t.gridY+o;if((r=this.gridCollection[parseInt(s.toString(),10)][parseInt(a.toString(),10)])&&(n&&-1===this.sourceGridCollection.indexOf(r)||!n&&-1===this.targetGridCollection.indexOf(r)))return i&&this.isWalkable(s,a)&&i.push(r),o;if(!(s>0&&a>0))break;o++}return null},t.prototype.resetGridColl=function(t,e,i){for(var n,r=1;r>0;){var o="top"===e||"bottom"===e?t.gridX:"left"===e?t.gridX-r:t.gridX+r,s="right"===e||"left"===e?t.gridY:"top"===e?t.gridY-r:t.gridY+r;if((n=this.gridCollection[parseInt(o.toString(),10)][parseInt(s.toString(),10)])&&(i&&-1===this.sourceGridCollection.indexOf(n)||!i&&-1===this.targetGridCollection.indexOf(n))){if(this.isWalkable(o,s))break;var a=this.gridCollection[parseInt(o.toString(),10)][parseInt(s.toString(),10)];this.considerWalkable.push(a)}if(!(o>0&&s>0))break;"top"===e||"left"===e?r--:r++}return null},t.prototype.isWalkable=function(t,e,i){if(t>=0&&t<this.noOfRows&&e>=0&&e<this.noOfCols){var n=this.gridCollection[parseInt(t.toString(),10)][parseInt(e.toString(),10)];if(n&&(n.walkable||(1===n.nodeId.length||2===n.nodeId.length&&n.parentNodeId||-1!==this.considerWalkable.indexOf(n))&&(-1!==this.sourceGridCollection.indexOf(n)||-1!==this.targetGridCollection.indexOf(n)||-1!==this.considerWalkable.indexOf(n)))&&(i&&!n.parent||!i))return!0}return!1},t.prototype.findIntermediatePoints=function(t,e,i,n,r,o){for(var s=t-i,a=e-n,l=t,h=e,c=0;c<this.targetGridCollection.length;c++)if(t===this.targetGridCollection[parseInt(c.toString(),10)].gridX&&e===this.targetGridCollection[parseInt(c.toString(),10)].gridY)return{x:t,y:e};if(!this.isWalkable(t,e))return null;var d=this.gridCollection[parseInt(t.toString(),10)][parseInt(e.toString(),10)];if(d.tested)return{x:t,y:e};if(d.tested=!0,0!==s&&(s=s>0?1:-1,this.isWalkable(l,h-1)&&!this.isWalkable(l-s,h-1)||this.isWalkable(l,h+1)&&!this.isWalkable(l-s,h+1)))return{x:t,y:e};if(0!==a){if(a=a>0?1:-1,this.isWalkable(l-1,h)&&!this.isWalkable(l-1,h-a)||this.isWalkable(l+1,h)&&!this.isWalkable(l+1,h-a))return{x:t,y:e};if(this.findIntermediatePoints(l+1,h,l,h,r,o)||this.findIntermediatePoints(l-1,h,l,h,r,o))return{x:t,y:e}}return this.findIntermediatePoints(l+s,h+a,l,h,r,o)},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"LineRouting"},t}(),EO=function(){function t(){}return t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"LineDistribution"},t.prototype.initLineDistribution=function(t,e){var i="Bottom";if(this.diagram=e,"DifferentPoint"===e.layout.connectionPointOrigin||e.layout.enableRouting){var n="Top";"BottomToTop"===t.orientation?(i="Top",n="Bottom"):"RightToLeft"===t.orientation?(i="Left",n="Right"):"LeftToRight"===t.orientation&&(i="Right",n="Left");var r=e.nodes;if(r.length>0)for(var o=0;o<r.length;o++){var s=e.nameTable[r[parseInt(o.toString(),10)].id];this.addDynamicPortandDistrrbuteLine(t,s,i,n,e)}}},t.prototype.ObstacleSegment=function(t){return t.direction=GS(t.startpt,t.endpt),t.distance=Gu.findLength(t.startpt,t.endpt),t.orientation="Left"===t.direction||"Right"===t.direction?"horizontal":"vertical",t.id=t.id,"horizontal"===t.orientation?(t.coord=t.startpt.y,"Left"===t.direction?(t.start=t.endpt.x,t.end=t.startpt.x):(t.start=t.startpt.x,t.end=t.endpt.x)):(t.coord=t.startpt.x,"Top"===t.direction?(t.start=t.endpt.y,t.end=t.startpt.y):(t.start=t.startpt.y,t.end=t.endpt.y)),t},t.prototype.distributeLines=function(t,e){for(var i="LeftToRight"===t.orientation||"RightToLeft"===t.orientation,n="obstaclePointCollection",r=(i?t.horizontalSpacing:t.verticalSpacing)-8-10,o=[],s=[],a=e.connectors,l=0;l<a.length;l++){for(var h=a[parseInt(l.toString(),10)],c=[],d=0;d<h.segments.length;d++)for(var p=h.segments[parseInt(d.toString(),10)],u=0;u<p.points.length;u++){var g=p.points[parseInt(u.toString(),10)];0!==c.length&&Gu.equals(g,c[c.length-1])||c.push(g)}for(var m=[],f=1;f<c.length;f++){var v=this.ObstacleSegment({startpt:c[f-1],endpt:c[parseInt(f.toString(),10)],id:h.id});m.push(v)}var y={wrapper:h,segments:m},b=[];if(i)for(d=0;d<y.segments.length;d++){"vertical"===(v=y.segments[parseInt(d.toString(),10)]).orientation&&b.push(v)}else for(var d=0;d<y.segments.length;d++){"horizontal"===(v=y.segments[parseInt(d.toString(),10)]).orientation&&b.push(v)}for(f=0;f<b.length;f++){var S=b[parseInt(f.toString(),10)];this.containsValue(o,S.coord)||o.push({key:S.coord,value:[]});var w=void 0;for(u=0;u<o.length;u++){d=o[parseInt(u.toString(),10)].key;if(Number(d)===S.coord){w=u;break}}o[parseInt(w.toString(),10)].value.push(S)}s.push(y)}for(var I=[],x=0;x<o.length;x++){var M=o[parseInt(x.toString(),10)],C=M.value;C.sort();var N=void 0;N=[];w=0;var E=Number.MIN_VALUE;N.push([]);for(var D=0;D<C.length;D++){S=C[parseInt(D.toString(),10)];!(N[parseInt(w.toString(),10)].length>0)||E>=S.start?(N[parseInt(w.toString(),10)].push(S),E=Math.max(E,N[parseInt(w.toString(),10)][N[parseInt(w.toString(),10)].length-1].end)):(w++,N.push([]),N[parseInt(w.toString(),10)].push(S),E=N[parseInt(w.toString(),10)][N[parseInt(w.toString(),10)].length-1].end)}for(D=0;D<N.length;D++){var T=N[parseInt(D.toString(),10)],O=[];for(f=0;f<T.length;f++){(k=T[parseInt(f.toString(),10)]).start&&O.push(k)}var L=i?"Bottom":"Right",A=[];for(f=0;f<O.length;f++){(k=O[parseInt(f.toString(),10)]).direction===L&&A.push(k)}var z=[];for(f=0;f<O.length;f++){var k;(k=O[parseInt(f.toString(),10)]).direction!==L&&z.push(k)}var j=[];if(A.length>0){var P=A[0].start;for(f=0;f<z.length;)z[parseInt(f.toString(),10)].end>P?(j.push(z[parseInt(f.toString(),10)]),z.splice(f,1)):f++}var R=[];R=this.updateSegmentRow(j,R);var B=[];B=[],B=this.updateSegmentRow(z,B),A.reverse(),B=this.updateSegmentRow(A,B),R[R.length-1].length>0||R.splice(R.length-1,1),B[B.length-1].length>0||B.splice(B.length-1,1);var H=[];if(j.length>0&&(O[0].direction===j[0].direction||O[O.length-1].direction===j[j.length-1].direction)){H=B;for(var U=0;U<R.length;U++){var V=R[parseInt(U.toString(),10)];H[H.length]=V}}else{H=R;for(U=0;U<B.length;U++){V=B[parseInt(U.toString(),10)];H[H.length]=V}}if(H.length>1){var _=1;"BottomToTop"!==t.orientation&&"RightToLeft"!==t.orientation||(_=-1);var F=M.key-_*r/2,Y=r/H.length;for(l=0;l<H.length;l++){var W=F+l*Y*_;for(U=0;U<H[parseInt(l.toString(),10)].length;U++){(S=H[parseInt(l.toString(),10)][parseInt(U.toString(),10)]).coord=W,this.containsValue(I,S.coord)||I.push({key:S.coord,value:[]});var Q=void 0;for(u=0;u<I.length;u++){if(I[parseInt(u.toString(),10)].key===S.coord){Q=u;break}}I[parseInt(Q.toString(),10)].value.push(S)}}}}}for(x=0;x<s.length;x++){for(y=s[parseInt(x.toString(),10)],c=[],l=0;l<y.segments.length;l++)0===l?c.push(this.getObstacleStartPoint(y.segments[parseInt(l.toString(),10)])):i?"vertical"===y.segments[parseInt(l.toString(),10)].orientation&&(c[c.length-1]=this.getObstacleStartPoint(y.segments[parseInt(l.toString(),10)])):i||"horizontal"===y.segments[parseInt(l.toString(),10)].orientation&&(c[c.length-1]=this.getObstacleStartPoint(y.segments[parseInt(l.toString(),10)])),c.push(this.getObstacleEndPoint(y.segments[parseInt(l.toString(),10)]));y.wrapper[""+n]=[];for(f=0;f<c.length;f++){var X=c[parseInt(f.toString(),10)];(0===f||f>0&&!Gu.equals(X,c[f-1]))&&y.wrapper[""+n].push(this.getPointvalue(X.x,X.y))}"Orthogonal"===y.wrapper&&this.resetConnectorPoints(y.wrapper,e)}},t.prototype.inflate=function(t,e,i){return t.x-=e,t.y-=i,t.width+=2*e,t.height+=2*i,t},t.prototype.updateConnectorPoints=function(t,e,i,n,r){var o=n,s="LeftToRight"===r||"RightToLeft"===r,a=t;if(a.length>2){var l=Gu.transform(a[0],Gu.findAngle(a[0],a[1]),e),h=Gu.transform(l,Gu.findAngle(a[1],a[2]),Gu.findLength(a[1],a[2]));if(a.splice(1,2,l,h),null!=i){var c=a.length,d=Gu.transform(a[c-1],Gu.findAngle(a[c-1],a[c-2]),e);for(a.splice(c-1,0,d);2<a.length-2;)a.splice(2,1);var p=i;this.inflate(o,o.width,o.height);var u=[];u[0]=this.getPointvalue(p.x,o.y),u[1]=this.getPointvalue(p.x,o.y+o.height);var g=[];g[0]=this.getPointvalue(o.x,a[1].y),g[1]=this.getPointvalue(o.x+o.width,a[1].y);var m=[];m[0]=this.getPointvalue(o.x,d.y),m[1]=this.getPointvalue(o.x+o.width,d.y),s&&(u[0]=this.getPointvalue(o.x,p.y),u[1]=this.getPointvalue(o.x+o.width,p.y),g[0]=this.getPointvalue(a[1].x,o.y),g[1]=this.getPointvalue(a[1].x,o.y+o.height),m[0]=this.getPointvalue(d.x,o.y),g[1]=this.getPointvalue(d.x,o.y+o.height));var f=[Oo(u[0],u[1],g[0],g[1])],v=[Oo(u[0],u[1],m[0],m[1])];v.length>0&&a.splice(2,0,v[0]),f.length>0&&a.splice(2,0,f[0])}}for(var y=1;y<a.length-1;)Gu.equals(a[y-1],a[parseInt(y.toString(),10)])?a.splice(y,1):Gu.findAngle(a[y-1],a[parseInt(y.toString(),10)])===Gu.findAngle(a[parseInt(y.toString(),10)],a[y+1])?a.splice(y,1):y++;return a},t.prototype.resetConnectorPoints=function(t,e){var i="obstaclePointCollection";if(t.segments[0].points&&t.segments[0].points.length>0&&t[""+i]){var n=t;n.sourcePoint=t[""+i][0],n.targetPoint=t[""+i][t[""+i].length-1];var r=void 0;r=[];for(var o=0;o<t[""+i].length-1;o++){var s=t[""+i][parseInt(o.toString(),10)],a=t[""+i][o+1],l=ZS(s,a),h=GS(s,a);o===t[""+i].length-2&&("RightToLeft"===e.layout.orientation&&"Left"===h||"LeftToRight"===e.layout.orientation&&"Right"===h||"TopToBottom"===e.layout.orientation&&"Bottom"===h||"BottomToTop"===e.layout.orientation&&"Top"===h)&&(l/=2);var c=new wS(t,"segments",{type:"Orthogonal"},!0);c.length=l,c.direction=h,r.push(c)}n.segments=r,n.type="Orthogonal",e.connectorPropertyChange(n,{},{type:"Orthogonal",segments:n.segments})}},t.prototype.getObstacleEndPoint=function(t){return"horizontal"===t.orientation?"Left"===t.direction?this.getPointvalue(t.start,t.coord):this.getPointvalue(t.end,t.coord):"Top"===t.direction?this.getPointvalue(t.coord,t.start):this.getPointvalue(t.coord,t.end)},t.prototype.getObstacleStartPoint=function(t){return"horizontal"===t.orientation?"Left"===t.direction?this.getPointvalue(t.end,t.coord):this.getPointvalue(t.start,t.coord):"Top"===t.direction?this.getPointvalue(t.coord,t.end):this.getPointvalue(t.coord,t.start)},t.prototype.updateSegmentRow=function(t,e){var i=0;e.length>0||(e[0]=[]);for(var n=0;n<t.length;n++)for(var r=t[parseInt(n.toString(),10)];i<e.length;){if(i===e.length-1&&(e[i+1]=[]),!(e[parseInt(i.toString(),10)].length>0)||e[parseInt(i.toString(),10)][e[parseInt(i.toString(),10)].length-1].end<r.start){e[parseInt(i.toString(),10)].push(r);break}i++}return e},t.prototype.portOffsetCalculation=function(t,e,i,n){"Top"===i&&(t.offset={x:(n+1)*(1/(e+1)),y:0}),"Bottom"===i&&(t.offset={x:(n+1)*(1/(e+1)),y:1}),"Left"===i&&(t.offset={x:0,y:(n+1)*(1/(e+1))}),"Right"===i&&(t.offset={x:1,y:(n+1)*(1/(e+1))})},t.prototype.addDynamicPortandDistrrbuteLine=function(t,e,i,n,r){if(e.ports&&e.ports.length>0){var o=e.ports;r.removePorts(e,o)}e.ports;var s=e.outEdges,a=e.inEdges;this.initPort(s,r,e,i,!1),this.initPort(a,r,e,n,!0)},t.prototype.initPort=function(t,e,i,n,r){var o=t;t.length>1&&r&&(t=this.sortObjects(o,r,e));for(var s=0;s<=t.length-1;s++){var a=e.nameTable[t[parseInt(s.toString(),10)]];a.obstaclePointCollection=[];var l=ds(i,r?a.targetPortID:a.sourcePortID),h=n;void 0===l&&((l=new pm(i,"ports","",!0)).id=da()+"_LineDistribution",r?a.targetPortID=l.id:a.sourcePortID=l.id),this.portOffsetCalculation(l,t.length,h,s),i.ports.push(l);var c=i.initPortWrapper(i.ports[i.ports.length-1]);i.wrapper.children.push(c),i.wrapper.measure(new Qu(i.width,i.height),i.id),i.wrapper.arrange(i.wrapper.desiredSize),e.connectorPropertyChange(a,r?{targetPortID:""}:{sourcePortID:""},r?{targetPortID:l.id}:{sourcePortID:l.id})}},t.prototype.sortObjects=function(t,e,i){for(var n,r=0;r<t.length;r++)for(var o=r+1;o<t.length;o++){var s=i.nameTable[t[parseInt(r.toString(),10)]],a=i.nameTable[t[parseInt(o.toString(),10)]];if(e){var l=i.nameTable[s.sourceID],h=i.nameTable[a.sourceID];"LeftToRight"===i.layout.orientation||"RightToLeft"===i.layout.orientation?l.offsetY>h.offsetY&&(n=t[parseInt(r.toString(),10)],t[parseInt(r.toString(),10)]=t[parseInt(o.toString(),10)],t[parseInt(o.toString(),10)]=n):l.offsetX>h.offsetX&&(n=t[parseInt(r.toString(),10)],t[parseInt(r.toString(),10)]=t[parseInt(o.toString(),10)],t[parseInt(o.toString(),10)]=n)}}return t},t.prototype.shiftMatrixCells=function(t,e,i,n,r){if(0!==t){for(var o=r.matrix[e.level].value,s=o.indexOf(e),a=s;a<o.length;a++)o[parseInt(a.toString(),10)].offset+=t;if(i)if(e.visitedChildren.length>0)this.shiftMatrixCells(t,e.visitedChildren[0],!0,e,r);else{a=1;for(var l=null;s+a<o.length;){var h=o[s+a];if(null!=n&&this.containsValue(h.visitedParents,n)){if(!(h.visitedChildren.length>0)){a++;continue}l=h}break}null!=l&&this.shiftMatrixCells(t,l.visitedChildren[0],!0,l,r)}}},t.prototype.arrangeMatrix=function(t,e,i){var n=i.model.layout,r="LeftToRight"===n.orientation||"RightToLeft"===n.orientation?n.verticalSpacing:n.horizontalSpacing,o=i.matrix[t.level].value,s=o.indexOf(t);if(t.visitedParents.length>0&&(1===t.visitedParents.length&&(t.initialOffset=t.offset),s+1<o.length)){if(o[s+1].visitedParents.length>0&&!this.containsValue(t.visitedParents,e))return t.visitedParents.push(e),void e.ignoredChildren.push(t)}if(t.children.length>0){for(var a=0;a<t.children.length;a++){var l=t.children[parseInt(a.toString(),10)];this.containsValue(t.visitedChildren,l)||(this.arrangeMatrix(l,t,i),t.visitedChildren.push(l))}if(t.visitedChildren.length>0){var h=t.visitedChildren.slice();for(a=0;a<t.ignoredChildren.length;a++)h.splice(0,1),t.visitedChildren.splice(0,1);if(h.length>0){var c=t.visitedChildren[0],d=t.visitedChildren[t.visitedChildren.length-1],p=(c.offset-c.size/2+(d.offset+d.size/2))/2;p<t.offset?this.shiftMatrixCells(t.offset-p,c,!0,t,i):p>t.offset&&this.shiftMatrixCells(p-t.offset,t,!1,null,i)}}}else{var u=t.offset;if(s>0){var g=o[s-1];u=g.offset+g.size/2+r+t.size/2}this.shiftMatrixCells(u-t.offset,t,!1,null,i)}this.containsValue(t.visitedParents,e)||t.visitedParents.push(e)},t.prototype.getFixedTerminalPoint=function(){return null},t.prototype.setAbsoluteTerminalPoint=function(t,e,i){var n="absolutePoints";e?(null==i[""+n]&&(i[""+n]=[]),0===i[""+n].length?i[""+n].push(t):i[""+n][0]=t):null==i[""+n]?(i[""+n]=[],i[""+n].push(null),i[""+n].push(t)):1===i[""+n].length?i[""+n].push(t):i[""+n][i[""+n].length-1]=t},t.prototype.updateFixedTerminalPoint=function(t,e){this.setAbsoluteTerminalPoint(this.getFixedTerminalPoint(),e,t)},t.prototype.updateFixedTerminalPoints=function(t,e){this.updateFixedTerminalPoint(t,!0),this.updateFixedTerminalPoint(t,!1)},t.prototype.updatePoints=function(t,e){var i="absolutePoints";if(null!=t){var n=[];n.push(t[""+i][0]);for(var r=0;r<e.length;r++)if(null!=e[parseInt(r.toString(),10)]){var o=e[parseInt(r.toString(),10)];n.push(o)}var s=t[""+i];n.push(s[s.length-1]),t[""+i]=n}},t.prototype.updateFloatingTerminalPoint=function(t,e,i,n){this.setAbsoluteTerminalPoint(this.getFloatingTerminalPoint(t,e,i,n),n,t)},t.prototype.getNextPoint=function(t,e,i){var n=t.absolutePoints,r=null;if(null!=n&&n.length>=2){var o=n.length;r=n[i?Math.min(1,o-1):Math.max(0,o-2)]}return r},t.prototype.getCenterX=function(t){return t.offsetX?t.offsetX+t.width:t.x+t.width},t.prototype.getCenterY=function(t){return t.offsetY?t.offsetY+t.height:t.y+t.height},t.prototype.getPerimeterBounds=function(t){return t.wrapper.outerBounds},t.prototype.getPerimeterFunction=function(t,e,i){var n=this.getCenterX(t),r=this.getCenterY(t),o=e.x-n,s=e.y-r,a=Math.atan2(s,o),l=this.getPointvalue(0,0),h=Math.PI,c=Math.PI/2-a,d=Math.atan2(t.height,t.width);return a<-h+d||a>h-d?(l.x=t.x,l.y=r-t.width*Math.tan(a)/2):a<-d?(l.y=t.y,l.x=n-t.height*Math.tan(c)/2):a<d?(l.x=t.x+t.width,l.y=r+t.width*Math.tan(a)/2):(l.y=t.y+t.height,l.x=n+t.height*Math.tan(c)/2),i&&(e.x>=t.x&&e.x<=t.x+t.width?l.x=e.x:e.y>=t.y&&e.y<=t.y+t.height&&(l.y=e.y),e.x<t.x?l.x=t.x:e.x>t.x+t.width&&(l.x=t.x+t.width),e.y<t.y?l.y=t.y:e.y>t.y+t.height&&(l.y=t.y+t.height)),l},t.prototype.getPerimeterPoint=function(t,e,i){var n=null;if(null!=t&&null!=e){var r=this.getPerimeterBounds(t);(r.width>0||r.height>0)&&(n=this.getPointvalue(e.x,e.y),n=this.getPerimeterFunction(r,n,i))}return n},t.prototype.getFloatingTerminalPoint=function(t,e,i,n){e=e;var r=this.getNextPoint(t,i,n);return this.getPerimeterPoint(e,r,1)},t.prototype.updateFloatingTerminalPoints=function(t,e,i){var n=t.absolutePoints,r=n[0];null==n[n.length-1]&&null!=i&&this.updateFloatingTerminalPoint(t,i,e,!1),null==r&&null!=e&&this.updateFloatingTerminalPoint(t,e,i,!0)},t.prototype.getConnectorPoints=function(t,e){var i="absolutePoints";this.updateFixedTerminalPoints(t,e),this.updatePoints(t,t.geometry.points),this.updateFloatingTerminalPoints(t,e.nameTable[t.sourceID],e.nameTable[t.targetID]),t[""+i][0].y=t.sourcePoint.y,t[""+i][t[""+i].length-1].y=t.targetPoint.y},t.prototype.adjustSegmentPoints=function(t,e,i){"TopToBottom"!==i.layout.orientation&&"BottomToTop"!==i.layout.orientation||(t[0].x=e[0].x,t[1].x=e[1].x,t[t.length-1].x=e[e.length-1].x,t[t.length-2].x=e[e.length-2].x,"TopToBottom"===i.layout.orientation?(t[t.length-2].y=t[t.length-1].y-i.layout.verticalSpacing/2,t[1].y=t[0].y+i.layout.verticalSpacing/2):(t[1].y=t[0].y-i.layout.verticalSpacing/2,t[t.length-2].y=t[t.length-1].y+i.layout.verticalSpacing/2),t[2].y=t[1].y,t[t.length-3].y=t[t.length-2].y),"RightToLeft"!==i.layout.orientation&&"LeftToRight"!==i.layout.orientation||(t[0]=e[0],t[1]=e[1],t[t.length-1]=e[e.length-1],t[t.length-2]=e[e.length-2],"RightToLeft"===i.layout.orientation&&(t[1].x=t[0].x-i.layout.verticalSpacing/2),"LeftToRight"===i.layout.orientation&&(t[1].x=t[0].x+i.layout.verticalSpacing/2),t[2].x=t[1].x,"RightToLeft"===i.layout.orientation&&(t[t.length-2].x=t[t.length-1].x+i.layout.verticalSpacing/2),"LeftToRight"===i.layout.orientation&&(t[t.length-2].x=t[t.length-1].x-i.layout.verticalSpacing/2),t[t.length-3].x=t[t.length-2].x)},t.prototype.updateConnectorSegmentPoints=function(t,e){if(t.length>1)if("TopToBottom"===e.layout.orientation||"BottomToTop"===e.layout.orientation)for(var i=1;i<t.length-1;i+=2)t[parseInt(i.toString(),10)].y===t[i+1].y||"TopToBottom"!==e.layout.orientation&&"BottomToTop"!==e.layout.orientation||(t[i+1].y=t[parseInt(i.toString(),10)].y);else{var n=!1;for(i=t.length-1;i>1;i=i-=2)"RightToLeft"===e.layout.orientation||"LeftToRight"===e.layout.orientation?n?(t[i-2].x=t[i-1].x,n=!1):(t[i-1].x=t[i-2].x,n=!0):t[i+1].x=t[parseInt(i.toString(),10)].x}},t.prototype.updateConnectorSegmentPoint=function(t,e){for(var i="absolutePoints",n=[],r=0;r<t[""+i].length-1;r++){var o=t[""+i][parseInt(r.toString(),10)],s=t[""+i][r+1],a=ZS(o,s),l=GS(o,s);r===t[""+i].length-2&&("TopToBottom"===e.layout.orientation&&"Bottom"===l||"RightToLeft"===e.layout.orientation&&"Left"===l||"LeftToRight"===e.layout.orientation&&"Right"===l||"BottomToTop"===e.layout.orientation&&"Top"===l)&&(a/=2);var h=new wS(t,"segments",{type:"Orthogonal"},!0);h.length=a,h.direction=l,n.push(h)}t.segments=n,t.type="Orthogonal",e.connectorPropertyChange(t,{},{type:"Orthogonal",segments:t.segments})},t.prototype.resetConnectorSegments=function(t){for(var e=t.segments,i=e.length;i>1;i--)e.splice(i-1,1)},t.prototype.resetRoutingSegments=function(t,e,i){if(t.levelSkip){this.getConnectorPoints(t,e);var n=t.absolutePoints;this.updateConnectorSegmentPoints(n,e),this.adjustSegmentPoints(n,i,e),this.updateConnectorSegmentPoint(t,e)}},t.prototype.arrangeElements=function(t,e){var i=t.model.layout,n="LeftToRight"===e.orientation||"RightToLeft"===e.orientation?i.verticalSpacing:i.horizontalSpacing;this.groupLayoutCells(t),this.createMatrixCells(t);for(var r=0;r<t.matrix.length;r++)for(var o=t.matrix[parseInt(r.toString(),10)].key,s=t.matrix[parseInt(o.toString(),10)].value,a=1;a<s.length;a++){var l=s[parseInt(a.toString(),10)],h=s[a-1];l.offset+=h.offset+h.size/2+n+l.size/2}for(r=0;r<t.matrix[0].value.length;r++){var c=t.matrix[0].value[parseInt(r.toString(),10)];this.arrangeMatrix(c,null,t)}for(var d=0;d<t.matrix.length;d++){var p=t.matrix[parseInt(d.toString(),10)].value;for(a=0;a<p.length;a++){if((l=p[parseInt(a.toString(),10)]).visitedParents.length>1){var u=l.visitedParents[0],g=l.visitedParents[l.visitedParents.length-1],m=this.findParentVertexCellGroup(u),f=this.findParentVertexCellGroup(g);u!==m&&m.offset<u.offset&&(u=m),g!==f&&f.offset>g.offset&&(g=m);var v=(u.offset+g.offset)/2,y=l.initialOffset,b=l.offset;b!==y&&(v>=y&&v<=b?this.translateMatrixCells(v-l.offset,l):v<y&&this.translateMatrixCells(y-l.offset,l))}}}this.setXYforMatrixCell(t)},t.prototype.findParentVertexCellGroup=function(t){return t.cells[0]?t:t.parents.length>0?this.findParentVertexCellGroup(t.parents[0]):t},t.prototype.setXYforMatrixCell=function(t){for(var e=t.model.layout,i="LeftToRight"===e.orientation||"RightToLeft"===e.orientation,n=i?e.verticalSpacing:e.horizontalSpacing,r=0;r<t.matrix.length;r++)for(var o=t.matrix[parseInt(r.toString(),10)].value,s=0;s<o.length;s++)for(var a=o[parseInt(s.toString(),10)],l=a.offset-a.size/2,h=0;h<a.cells.length;h++){var c=a.cells[parseInt(h.toString(),10)],d=this.getType(c.type);if("internalVertex"===d){var p=c,u=p.cell.geometry.width,g=p.cell.geometry.height;p.cell.geometry=i?new Zu(t.rowOffset[a.level]-u/2,l,u,g):new Zu(l,t.rowOffset[a.level]-g/2,u,g),l+=(i?g:u)+n}else if("internalEdge"===d){var m=c,f=a.visitedParents[0];if(f)for(var v=0;v<f.visitedChildren.length;v++){for(var y=f.visitedChildren[parseInt(v.toString(),10)],b=[],S=0;S<y.cells.length;S++){var w=y.cells[parseInt(S.toString(),10)];"internalVertex"===this.getType(w.type)&&b.push(w)}if(b.length>0)break}for(S=0;S<m.edges.length;S++){var I=m.edges[parseInt(S.toString(),10)],x=this.getPointvalue(l+.5,t.rowOffset[a.level]);if(i&&(x=this.getPointvalue(t.rowOffset[a.level],l+.5)),this.containsValue(this.getEdgeMapper(),I)){var M=void 0;for(v=0;v<this.getEdgeMapper().length;v++)if(this.getEdgeMapper()[parseInt(v.toString(),10)].key===I){M=v;break}this.getEdgeMapper()[parseInt(M.toString(),10)].value.push(x)}l+=6}l+=n}}},t.prototype.getEdgeMapper=function(){return this.edgeMapper},t.prototype.setEdgeMapper=function(t){this.edgeMapper.push(t)},t.prototype.translateMatrixCells=function(t,e){if(0!==t&&(e.offset+=t,e.visitedChildren.length>0))for(var i=0;i<e.visitedChildren.length;i++){var n=e.visitedChildren[parseInt(i.toString(),10)];this.translateMatrixCells(t,n)}},t.prototype.groupLayoutCells=function(t){for(var e=t.model.ranks,i=e.length-1;i>=0;i--){for(var n=[],r=0;r<e[parseInt(i.toString(),10)].length;r++){var o=e[parseInt(i.toString(),10)][parseInt(r.toString(),10)];"internalVertex"===this.getType(o.type)&&n.push(e[parseInt(i.toString(),10)][parseInt(r.toString(),10)])}for(var s=[],a=0;a<e[parseInt(i.toString(),10)].length;a++){o=e[parseInt(i.toString(),10)][parseInt(a.toString(),10)];"internalEdge"===this.getType(o.type)&&s.push(o)}for(;n.length>1;){for(var l=n[0],h=this.selectIds(l.connectsAsTarget,!0),c=this.selectIds(l.connectsAsSource,!1);n.length>1;){var d=n[1],p=this.selectIds(d.connectsAsTarget,!0),u=this.selectIds(d.connectsAsSource,!1),g=this.compareLists(h,p),m=this.compareLists(c,u);if(!g||!m)break;this.updateMutualSharing(n[0],d.id),this.updateMutualSharing(n[1],l.id),n.splice(1,1)}n.splice(0,1)}for(;s.length>1;){var f=s[0],v=f.source,y=f.target;if(null!=v.identicalSibiling){for(var b=[],S=0;S<s.length;S++){var w=s[parseInt(S.toString(),10)];w.target===y&&b.push(w)}for(S=0;S<b.length;S++){var I=b[parseInt(S.toString(),10)];this.containsValue(v.identicalSibiling,I.source.id)&&(I.source.identicalSibiling=null)}f.source.identicalSibiling=null}s.splice(0,1)}}},t.prototype.getType=function(t){return"internalVertex"===t?"internalVertex":"internalEdge"},t.prototype.selectIds=function(t,e){for(var i=[],n=0;n<t.length;n++){var r=t[parseInt(n.toString(),10)];e?i.push(r.source.id):i.push(r.target.id)}return i},t.prototype.compareLists=function(t,e){var i=t.slice(),n=e.slice();if(i.length===n.length){if(0===i.length)return!0;for(var r=!0,o=0;o<n.length;o++){var s=n[parseInt(o.toString(),10)];if(-1===i.indexOf(s)){r=!1;break}}return r}return!1},t.prototype.updateMutualSharing=function(t,e){null!=t.identicalSibiling?t.identicalSibiling.push(e):(t.identicalSibiling=[],t.identicalSibiling.push(e))},t.prototype.matrixCellGroup=function(t){return t.level=t.level,t.parents=t.parents,t.children=t.children,t.visitedChildren=t.visitedChildren,t.visitedParents=t.visitedParents,t.ignoredChildren=t.ignoredChildren,t.cells=t.cells,t.offset=t.offset,t.initialOffset=t.initialOffset,t},t.prototype.getPointvalue=function(t,e){return{x:Number(t)||0,y:Number(e)||0}},t.prototype.containsValue=function(t,e){for(var i=0;i<t.length;i++)if(t[parseInt(i.toString(),10)].key===e||t[parseInt(i.toString(),10)]===e)return!0;return!1},t.prototype.createMatrixCells=function(t){for(var e=t.model.layout,i="LeftToRight"===e.orientation||"RightToLeft"===e.orientation,n=i?e.verticalSpacing:e.horizontalSpacing,r=i?e.horizontalSpacing:e.verticalSpacing,o=t.model.ranks,s=[],a=-r,l=o.length-1;l>=0;l--){var h=0,c=o.length-1-l,d=o[parseInt(l.toString(),10)].slice(),p=[];t.matrix.push({key:c,value:p});var u=[];for(s.push({index:c,value:u});d.length>0;){var g=d[0],m=this.matrixCellGroup({level:c,parents:[],children:[],visitedParents:[],visitedChildren:[],ignoredChildren:[],cells:[],size:0,offset:0,initialOffset:0});p.push(m);var f=this.getType(g.type);if("internalVertex"===f){if(m.cells.push(g),null!=g.identicalSibiling)for(var v=0;v<d.length;v++){var y=d[parseInt(v.toString(),10)];if("internalVertex"===this.getType(y.type)&&this.containsValue(g.identicalSibiling,y.id)&&(m.cells.push(y),m.cells.length>g.identicalSibiling.length))break}for(v=0;v<m.cells.length;v++){y=m.cells[parseInt(v.toString(),10)];if("internalVertex"===this.getType(y.type)){var b=y.cell.geometry;if(m.size+=i?b.height:b.width,h=Math.max(h,i?b.width:b.height),u.push({key:y.id,value:m}),y.connectsAsTarget.length>0)for(var S=0;S<y.connectsAsTarget.length;S++){var w=y.connectsAsTarget[parseInt(S.toString(),10)],I=null;if(this.containsValue(s[c-1].value,w.ids)?I=w.ids:this.containsValue(s[c-1].value,w.source.id)&&(I=w.source.id),null!=I){for(var x=s[c-1].value,M=void 0,C=0;C<x.length;C++)if(x[parseInt(C.toString(),10)].key===I){M=x[parseInt(C.toString(),10)].value;break}this.containsValue(m.parents,M)||m.parents.push(M),this.containsValue(M.children,m)||M.children.push(m)}}d.reverse(),d.pop(),d.reverse()}}m.size+=(m.cells.length-1)*n}else if("internalEdge"===f){m.cells.push(g);for(v=0;v<m.cells.length;v++){var N=m.cells[parseInt(v.toString(),10)];if("internalEdge"===this.getType(N.type)&&null!=N.edges){var E=-5;for(S=0;S<N.edges.length;S++)E+=6;m.size+=E}u.push({key:N.ids,value:m});I=null;if(this.containsValue(s[c-1].value,N.ids)?I=N.ids:this.containsValue(s[c-1].value,N.source.id)&&(I=N.source.id),null!=I){var D=s[c-1].value;for(M=void 0,C=0;C<D.length;C++)if(D[parseInt(C.toString(),10)].key===I){M=D[parseInt(C.toString(),10)].value;break}this.containsValue(m.parents,M)||m.parents.push(M),this.containsValue(M.children,m)||M.children.push(m)}d.reverse(),d.pop(),d.reverse()}m.size+=(m.cells.length-1)*n}}t.rowOffset.push(a+h/2+r),a+=h+r}},t.prototype.updateLayout=function(t,e,i,n,r,o){var s=(t.x-e.width)/2-e.x,a=(t.y-e.height)/2-e.y;s=Math.round(s),a=Math.round(a);for(var l=[],h=new Zu(e.x+s,e.y+a,e.width,e.height),c=i.margin,d="RightToLeft"===n.orientation||"LeftToRight"===n.orientation?n.horizontalSpacing:n.verticalSpacing,p=0;p<r.length;p++){var u=r[p];if(null!=u.outEdges&&u.outEdges.length>0)for(var g=u.outEdges.length,m=0;m<g;m++){if((L=o[u.outEdges[m]]).pointCollection=[],g>1){for(var f=d/2,v=null,y=void 0,b=this.getEdgeMapper(),S=0;S<b.length;S++)if(b[S].key===L){y=S;break}if(b[y].value.length>0){var w=b[y].value[0],I=w.x+c.left,x=w.y+c.top,M=I,C=x;"BottomToTop"===n.orientation?C=e.height-x:"RightToLeft"===n.orientation&&(M=e.width-I),M+=s,C+=a,v=this.getPointvalue(M,C)}for(var N=[],E=0;E<L.segments.length;E++){var D=L.segments[E].points;for(var T in D)N.push(D[T])}N=this.updateConnectorPoints(N,f,v,h,n.orientation);for(var O=0;O<N.length;O++){D=N[O];L.pointCollection.push(this.getPointvalue(D.x,D.y))}this.resetConnectorPoints(L,this.diagram)}l.push(L)}if(null!=u.inEdges&&u.inEdges.length>1)for(g=u.inEdges.length,b=this.getEdgeMapper(),m=0;m<g;m++){var L=o[u.inEdges[m]];if(this.containsValue(l,L)||(L.pointCollection=[]),g>1){f=d/2,v=null,y=void 0,S=void 0;for(S=0;S<b.length;S++)if(b[S].key===L){y=S;break}if(b[y].value.length>0&&!this.containsValue(l,L)){var A=b[S].value[0],z=A.x+c.left,k=A.y+c.top;M=z,C=k;"BottomToTop"===n.orientation?C=e.height-k:"RightToLeft"===n.orientation&&(M=e.width-z),M+=s,C+=a,v=this.getPointvalue(M,C)}for(N=[],O=0;O<L.segments.length;O++){D=L.segments[O].points;for(var T in D)N.push(D[T])}N.reverse(),(N=this.updateConnectorPoints(N,f,v,h,i.orientation)).reverse(),L.pointCollection=[];for(O=0;O<N.length;O++){D=N[O];L.pointCollection.push(this.getPointvalue(D.x,D.y))}this.resetConnectorPoints(L,this.diagram)}}}},t}(),DO=function(){function t(){this.isAnimation=!1}return t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"OrganizationalChart"},t.prototype.updateLayout=function(t,e,i,n,r,o){var s={type:i.type,connectionPointOrigin:i.connectionPointOrigin,nameTable:e,anchorX:0,anchorY:0,firstLevelNodes:[],centerNode:null,levels:[],maxLevel:0,graphNodes:{},orientation:i.orientation,horizontalSpacing:i.horizontalSpacing,verticalSpacing:i.verticalSpacing,verticalAlignment:i.verticalAlignment,horizontalAlignment:i.horizontalAlignment,fixedNode:i.fixedNode,getLayoutInfo:Oa(i.getLayoutInfo),layoutInfo:i.layoutInfo,margin:i.margin,bounds:i.bounds,objects:[],root:i.root};return this.doLayout(s,t,n,r,o),s},t.prototype.doLayout=function(t,e,i,n,r){var o,s,a={},l=[];for(t.nameTable[t.root]&&t.firstLevelNodes.push(t.nameTable[t.root]),s=0;s<e.length;s++)if(!((o=e[parseInt(s.toString(),10)]).excludeFromLayout||(a=t.graphNodes[o.id]=this.setUpLayoutInfo(t,o),a.tree.hasSubTree=!1,t.nameTable[t.root]||o.inEdges&&o.inEdges.length))){o.parentId||o.processId||l.push(o),o.data&&String(o.data[""+n])===t.root&&t.firstLevelNodes.push(o)}for(0===t.firstLevelNodes.length&&(t.firstLevelNodes=l),s=0;s<t.firstLevelNodes.length;s++)o=t.firstLevelNodes[parseInt(s.toString(),10)],this.updateEdges(t,o,1,r,e);if(t.firstLevelNodes.length>0){t.rootNode=t.firstLevelNodes[0];var h=0,c=0,d=void 0,p=void 0,u=void 0,g=void 0,m=void 0;for(s=0;s<t.firstLevelNodes.length;s++){m=this.updateTree(t,h,c,t.firstLevelNodes[parseInt(s.toString(),10)],0,t.firstLevelNodes[s-1]);var f=t.graphNodes[t.firstLevelNodes[parseInt(s.toString(),10)].id];m.y=Math.min(m.y,f.y),m.x=Math.min(m.x,f.x),-1!==t.orientation.indexOf("Left")?c=m.right+t.horizontalSpacing:h=m.right+t.horizontalSpacing,0===s?(d=m.x,g=m.y,u=m.right,p=m.bottom):(d=Math.min(d,m.x),g=Math.min(g,m.y),u=Math.max(u,m.right),p=Math.max(p,m.bottom))}for(this.updateAnchor(t,{x:d,y:g,right:u,bottom:p},i),s=0;s<t.firstLevelNodes.length;s++)this.updateNodes(t,t.firstLevelNodes[parseInt(s.toString(),10)],0);for(s=0;s<t.firstLevelNodes.length;s++)this.updateConnectors(t,t.firstLevelNodes[parseInt(s.toString(),10)],1)}},t.prototype.getBounds=function(t){var e=t.offsetX-t.actualSize.width*t.pivot.x,i=t.offsetY-t.actualSize.height*t.pivot.y;return new Zu(e,i,t.actualSize.width,t.actualSize.height)},t.prototype.updateTree=function(t,e,i,n,r,o,s){var a,l,h={},c=this.getDimensions(t,n,e,i,r);h=t.graphNodes[n.id],t.maxLevel=Math.max(t.maxLevel,r),a=r;var d=this.hasChild(t,n);if(d||h.tree.assistants.length){var p=void 0,u=void 0,g=void 0,m=void 0,f=void 0,v=void 0;v=c.y+c.height+t.verticalSpacing,h.tree.assistants.length&&(a=(l=this.setDepthSpaceForAssitants(t,n,v,c.height,r,t.verticalSpacing)).level,v=l.bottom),h.tree.assistants.length||"Horizontal"===h.tree.orientation||(v=c.y+c.height+t.verticalSpacing/2),h.tree.children.length&&(p="Horizontal"!==h.tree.orientation||"Balanced"===h.tree.type&&1!==h.tree.children.length?"Balanced"===h.tree.type?this.updateHorizontalTreeWithMultipleRows(t,n,o,c.x,v,a):this.updateVerticalTree(t,n,c.x,v,a,s):this.updateHorizontalTree(t,n,o,c.x,v,a)),h.y&&h.y>c.y||(h.y=c.y),h.mid&&(e=h.mid),h.tree.assistants.length&&(f=void 0!==e?e:c.x,m=this.setBreadthSpaceForAssistants(t,n,c,f,v,r),d||(e=((u=p=m).x+u.right)/2-c.width/2,p=u),g=m?m.canMoveBy:void 0),h.x=e,h.translate||(h.treeWidth=p.right-p.x);var y={layout:t,shape:n,shapeBounds:{x:e,y:c.y,right:e+c.width,bottom:c.y+c.height},treeBounds:p,dim:c,level:r};return this.translateSubTree(y,g,void 0!==o,s),h.firstChild&&"string"!=typeof h.firstChild&&(h.firstChild.x+=h.subTreeTranslation),n.treeBounds=p,p}return n.treeBounds=this.updateLeafNode(t,n,o,c,r,s),n.treeBounds},t.prototype.updateLeafNode=function(t,e,i,n,r,o){var s=t.graphNodes[e.id];s.x=n.x,s.y&&s.y>n.y||(s.y=n.y,s.maxLevel=Math.max(r,s.maxLevel||0));var a={x:n.x,y:n.y,right:n.x+n.width,bottom:n.y+n.height};s.maxLevel=Math.max(s.maxLevel||0,r);var l={layout:t,shape:e,shapeBounds:a,treeBounds:a,dim:n,level:r};return this.translateSubTree(l,void 0,void 0!==i,o),{x:s.x,y:s.y,right:s.x+n.width,bottom:s.y+n.height}},t.prototype.setUpLayoutInfo=function(t,e){var i={};return i.subTreeTranslation=0,"OrganizationalChart"===t.type?i.tree={orientation:"Vertical",type:"Alternate",offset:20,enableRouting:!0}:i.tree={orientation:"Horizontal",type:"Center",enableRouting:!0},i.tree.children=[],i.tree.assistants=[],i.tree.level=0,i.translate=!0,i},t.prototype.translateSubTree=function(t,e,i,n){var r=t.layout,o=t.shape,s=t.shapeBounds,a=t.treeBounds,l=t.level,h=t.dim,c=r.graphNodes[o.id],d=r.nameTable[c.firstChild?c.firstChild.child:c.tree.children[0]],p=d?r.graphNodes[d.id]:null,u=this.hasChild(r,o),g=this.findIntersectingLevels(r,s,l,c.actualLevel),m=this.findIntersectingLevels(r,a,l,c.actualLevel),f=[];g.length&&c.translate?(c.intersect=g,this.spaceLeftFromPrevSubTree(r,o,s),c.canMoveBy=c.diff,void 0!==e&&(c.canMoveBy=Math.min(e,c.canMoveBy)),d&&void 0!==p.canMoveBy&&(p.canMoveBy>=c.canMoveBy&&(c.translated=!0),c.canMoveBy=Math.min(c.canMoveBy,p.canMoveBy)),i&&(c.x-=c.canMoveBy,c.subTreeTranslation-=c.canMoveBy,u&&(this.shiftSubordinates(r,m,c.canMoveBy),a.x=Math.min(a.x,c.x),a.right=Math.max(a.right,c.x+h.width),a.bottom=Math.max(a.bottom,c.y+h.height),a.x-=c.canMoveBy,a.right-=c.canMoveBy),d&&p.canMoveBy>c.canMoveBy?c.canMoveBy=p.canMoveBy-c.canMoveBy:d&&void 0!==c.canMoveBy&&(c.canMoveBy=0))):(u&&(a.x=Math.min(a.x,s.x),a.right=Math.max(a.right,s.x+h.width),a.bottom=Math.max(a.bottom,c.y+h.height)),c.translate||(c.canMoveBy=0,c.subTreeTranslation=0)),n||(s={x:c.x,y:h.y,right:c.x+h.width,bottom:h.y+h.height},f.push({rBounds:s}),this.updateRearBounds(r,o,f,l))},t.prototype.updateRearBounds=function(t,e,i,n,r){var o,s,a,l,h=!0,c={};e&&(r=(c=t.graphNodes[e.id]).intersect,h=!c.tree.children.length&&!c.tree.assistants.length);var d=i[0].rBounds,p=i[i.length-1].rBounds;if(r&&r.length){for(l=(o=t.levels[r[0]].rBounds).bottom,o.y<d.y&&(o.bottom=d.y,i.splice(0,0,{rBounds:o})),l>p.bottom?i.push({rBounds:{x:o.x,right:o.right,y:d.bottom,bottom:l}}):(o=t.levels[r[r.length-1]].rBounds,h&&o.bottom>p.bottom&&(o.y=p.bottom,i.push({rBounds:o}))),s=r[0],a=i.length-1;a>=0;a--)t.levels.splice(s,0,i[parseInt(a.toString(),10)]);s+=i.length,t.levels.splice(s,r.length)}else for(s=this.findLevel(t,i[i.length-1].rBounds,n),a=i.length-1;a>=0;a--)t.levels.splice(s,0,i[parseInt(a.toString(),10)])},t.prototype.shiftSubordinates=function(t,e,i){var n;if(0!==i)for(n=0;n<e.length;n++)t.levels[e[parseInt(n.toString(),10)]].rBounds&&(t.levels[e[parseInt(n.toString(),10)]].rBounds.x-=i,t.levels[e[parseInt(n.toString(),10)]].rBounds.right-=i)},t.prototype.setDepthSpaceForAssitants=function(t,e,i,n,r,o){var s,a,l,h,c=t.graphNodes[e.id],d={};for(h=i,a=0;a<c.tree.assistants.length;a++)(d=t.graphNodes[c.tree.assistants[parseInt(a.toString(),10)]])&&(d.tree.children=d.tree.assistants=[],d.y=i,s=(l=t.nameTable[c.tree.assistants[parseInt(a.toString(),10)]]).actualSize.height,-1!==t.orientation.indexOf("Left")&&(s=l.actualSize.width),h=i+s+o/2,t.maxLevel=r+1,a%2==1&&a!==c.tree.assistants.length-1&&(i=h,r++));return{level:t.maxLevel,bottom:i+s+o}},t.prototype.setBreadthSpaceForAssistants=function(t,e,i,n,r,o){var s,a,l,h,c,d,p,u={},g=t.graphNodes[e.id],m=o,f={x:0,y:0,right:0,bottom:0};for(h=0;h<g.tree.assistants.length;h++)(u=t.graphNodes[g.tree.assistants[parseInt(h.toString(),10)]])&&(s=(l=t.nameTable[g.tree.assistants[parseInt(h.toString(),10)]]).actualSize.width,-1!==t.orientation.indexOf("Left")&&(s=l.actualSize.height),c=h%2==0?n+i.width/2-20-s:n+i.width/2+20,a=this.updateTree(t,c,u.y,t.nameTable[g.tree.assistants[parseInt(h.toString(),10)]],m+1),this.hasChild(t,e)||(0===h?f=a:this.uniteRects(f,a)),h%2==0&&u.prevBounds&&(d=void 0===d?u.canMoveBy:Math.min(d,u.canMoveBy)),h%2!=1&&h!==g.tree.assistants.length-1||(p=this.findIntersectingLevels(t,a,m+1),this.updateRearBounds(t,null,[{rBounds:a}],m+1,p),m++));return f&&(f.canMoveBy=d),f},t.prototype.getDimensions=function(t,e,i,n,r){var o;o=e.actualSize.width;var s;if(s=e.actualSize.height,-1!==t.orientation.indexOf("Left")){if(!r){var a=i;i=n,n=a}s=e.actualSize.width,o=e.actualSize.height}return{x:i,y:n,width:o,height:s}},t.prototype.hasChild=function(t,e){var i=t.graphNodes[e.id];return i?i.tree.children&&i.tree.children.length:0},t.prototype.updateHorizontalTree=function(t,e,i,n,r,o){var s=this.getDimensions(t,e,n,r,o),a={},l=(a=t.graphNodes[e.id]).tree.type,h=o,c=0;c=n;var d,p,u,g,m,f,v,y,b,S,w,I,x,M,C=r;t.levels.slice(0,t.levels.length);if(this.hasChild(t,e)){var N=-1!==t.orientation.indexOf("Left");for(I=0;I<a.tree.children.length;I++){d=(u=t.nameTable[a.tree.children[parseInt(I.toString(),10)]]).actualSize.width,p=u.actualSize.height,m=N?p:d,f=N?d:p;t.levels[h+1]&&t.levels[h+1].rBounds;if(g=this.updateTree(t,c,C,u,h+1,t.nameTable[a.tree.children[I-1]]),x=t.graphNodes[u.id],a.maxLevel=Math.max(a.maxLevel||0,x.maxLevel||0),y={x:x.x,y:x.y,right:x.x+m,bottom:x.y+f},0===I&&(v={x:Math.min(x.x,g.x),y:Math.min(x.y,g.y),right:g.right,bottom:g.bottom},M=x),w?(w.x=y.x,w.y=y.y,y.right>w.right&&(w.right=y.right),w.bottom=y.bottom):w=y,0===I&&(a.firstChild={x:x.x,canMoveBy:x.canMoveBy,child:u.id}),this.hasChild(t,u))if(!a.firstChild||a.firstChild.x>=x.firstChild.x){x.firstChild&&a.firstChild.canMoveBy<x.canMoveBy&&(S=a.firstChild.canMoveBy,x.canMoveBy=S,t.graphNodes[a.firstChild.child].canMoveBy=S,a.firstChild.canMoveBy=S);var E=void 0!==S?S:x.canMoveBy;a.firstChild={x:x.firstChild.x,canMoveBy:E,child:u.id}}else x.firstChild&&x.translated&&a.firstChild.canMoveBy>x.canMoveBy&&(a.firstChild.canMoveBy=t.graphNodes[a.firstChild.child].canMoveBy=x.canMoveBy);b=b?Math.max(x.maxLevel,b):x.maxLevel,this.uniteRects(v,g),c=0!==I&&!this.hasChild(t,u)&&x.subTreeTranslation<0?g.right-x.subTreeTranslation+t.horizontalSpacing:g.right+t.horizontalSpacing}isNaN(void 0)||(M.canMoveBy=void 0),a.mid=(M.x+w.right)/2-s.width/2,"Left"===l?a.mid=y.right-s.width:"Right"===l&&(a.mid=n)}return v},t.prototype.updateHorizontalTreeWithMultipleRows=function(t,e,i,n,r,o){var s,a,l,h,c,d,p,u,g,m,f,v=this.getDimensions(t,e,n,r,o),y=t.graphNodes[e.id],b=(y.tree.type,o),S=n,w=r,I=(t.levels.slice(0,t.levels.length),0);if(this.hasChild(t,e)){var x=-1!==t.orientation.indexOf("Left"),M=void 0,C=this.splitChildrenInRows(t,e),N=5===y.tree.children.length&&3===C[0].length,E=[],D=[];N?D=C:this.splitRows(C,E,D);var T={leftTree:E,rows:C,rightTree:D,dimensions:v},O=this.updateLeftTree(t,T,e,n,w,b);c=T.bounds;var L=void 0,A=(O||0)+(void 0!==O?t.horizontalSpacing/2:0);void 0!==O&&(y.mid=A-v.width/2,L=O+t.horizontalSpacing),w=r;var z=void 0;for(z=[],g=0;g<D.length;g++)for(S=C[g].length%2==1&&g===D.length-1||N?n:L||n,0!==g&&(w=z[g-1].bottom+t.verticalSpacing),u=0;u<D[g].length;u++)d=(s=t.nameTable[D[g][u]]).actualSize.width,p=s.actualSize.height,h=x?p:d,(a=t.graphNodes[s.id]).actualLevel=b+1+g,0===u&&E[g]&&E[g].length&&(a.translate=!1),N&&1===g&&(0===u&&m+h+t.horizontalSpacing<=f&&(M=!0,S=m-h/2),M&&1===u&&(S=f-h/2)),l=this.updateTree(t,S,w,s,b+1,t.nameTable[D[g][u-1]]),N&&u<=2&&0===g&&1===u&&(m=l.x-t.horizontalSpacing/2,f=l.x+h+t.horizontalSpacing/2),0===u?z[g]={x:l.x,y:l.y,right:l.right,bottom:l.bottom}:this.uniteRects(z[g],l),c||(c={x:z[g].x,y:z[g].y,right:z[g].right,bottom:z[g].bottom}),this.uniteRects(c,z[g]),S=l.right+t.horizontalSpacing,(!y.firstChild||(g===D.length-1&&C[g].length%2==1||N)&&0===u&&void 0!==a.canMoveBy&&I>a.canMoveBy)&&(I=Math.min(I,a.canMoveBy||0),y.firstChild={x:a.x,child:s.id,canMoveBy:a.canMoveBy}),T.leftCenter=m,T.rightCenter=f,T.align=M,T.level=b,T.rightBounds=z,this.alignRowsToCenter(t,g,e,T,L)}return c},t.prototype.updateLeftTree=function(t,e,i,n,r,o){for(var s,a,l,h,c,d=e.leftTree,p=t.graphNodes[i.id],u=[],g=-1!==t.orientation.indexOf("Left"),m=0;m<d.length&&d[parseInt(m.toString(),10)].length;m++){s=n,u[m-1]&&(r=u[m-1].bottom+t.verticalSpacing);for(var f=0;f<d[parseInt(m.toString(),10)].length;f++){var v=t.nameTable[d[parseInt(m.toString(),10)][parseInt(f.toString(),10)]],y=(g?v.actualSize.height:v.actualSize.width,g?v.actualSize.width:v.actualSize.height,t.graphNodes[v.id]);y.actualLevel=o+1+m,h=this.updateTree(t,s,r,v,o+1,t.nameTable[d[parseInt(m.toString(),10)][f-1]]),0===f?u[parseInt(m.toString(),10)]={x:h.x,y:h.y,right:h.right,bottom:h.bottom}:this.uniteRects(u[parseInt(m.toString(),10)],h),0===m&&0===f?(a=y.canMoveBy,p.firstChild={x:y.x,child:v.id,canMoveBy:y.canMoveBy}):0===f&&void 0!==y.canMoveBy&&a>y.canMoveBy&&(a=Math.min(a,y.canMoveBy||0),p.firstChild={x:y.x,child:v.id,canMoveBy:y.canMoveBy}),s=h.right+t.horizontalSpacing}l=0===m?u[parseInt(m.toString(),10)].right:Math.max(l,u[parseInt(m.toString(),10)].right)}for(m=0;m<d.length&&d[parseInt(m.toString(),10)].length;m++){if(l!==u[parseInt(m.toString(),10)].right){var b=l-u[parseInt(m.toString(),10)].right;for(f=0;f<d[parseInt(m.toString(),10)].length;f++){t.nameTable[d[parseInt(m.toString(),10)][parseInt(f.toString(),10)]];t.graphNodes[d[parseInt(m.toString(),10)][parseInt(f.toString(),10)]].x+=b}}0===m?c={x:u[0].x,y:u[0].y,right:u[0].right,bottom:u[0].bottom}:this.uniteRects(c,u[parseInt(m.toString(),10)])}return e.bounds=c,l},t.prototype.alignRowsToCenter=function(t,e,i,n,r){var o,s,a,l=t.graphNodes[i.id],h=n.rows,c=n.rightTree,d=n.leftCenter,p=n.rightCenter,u=n.align,g=n.rightBounds,m=n.dimensions,f=n.level,v=5===l.tree.children.length&&3===h[0].length;if(v&&1===e&&(o=g[0].right-g[0].x>=g[1].right-g[1].x?0:1),e===h.length-1&&(h[parseInt(e.toString(),10)].length%2==1||v&&1===e)){s=c[parseInt(e.toString(),10)][Math.floor(c[parseInt(e.toString(),10)].length/2)];var y=t.nameTable[""+s],b=t.graphNodes[""+s].x,S=t.graphNodes[""+s].y,w=this.getDimensions(t,y,b,S,f+1);a=void 0,!u&&v?(1===o&&(e=0),a=(g[parseInt(o.toString(),10)].x+g[parseInt(o.toString(),10)].right)/2-(g[parseInt(e.toString(),10)].x+g[parseInt(e.toString(),10)].right)/2,0===e&&(l.mid+=a)):v||void 0===r||(a=r-t.horizontalSpacing/2-(b+w.width/2)),void 0!==a&&this.updateRearBoundsOfTree(t,c[parseInt(e.toString(),10)],a,m),v&&(l.mid=(p+d)/2+(0===e?a:0)-m.width/2),void 0===l.mid&&t.graphNodes[""+s]&&(l.mid=b),u=!1,e++}},t.prototype.updateRearBoundsOfTree=function(t,e,i,n){for(var r=0;r<e.length;r++){var o=t.graphNodes[e[parseInt(r.toString(),10)]];if(o.x+=i,o.canMoveBy+=i,r===e.length-1){var s={x:o.x,y:o.y,right:o.x+n.width,bottom:o.y+n.height},a=this.findIntersectingLevels(t,s,o.actualLevel);this.updateRearBounds(t,null,[{rBounds:s}],o.actualLevel,a)}}},t.prototype.splitRows=function(t,e,i){for(var n=0;n<t.length;n++){e[parseInt(n.toString(),10)]=[],i[parseInt(n.toString(),10)]=[];var r=void 0;if(r=t[parseInt(n.toString(),10)].length,t[parseInt(n.toString(),10)].length%2!=1){r=Math.ceil(t[parseInt(n.toString(),10)].length/2);for(var o=0;o<r;o++)e[parseInt(n.toString(),10)].push(t[parseInt(n.toString(),10)][parseInt(o.toString(),10)])}for(var s=e[parseInt(n.toString(),10)].length;s<t[parseInt(n.toString(),10)].length;s++)i[parseInt(n.toString(),10)].push(t[parseInt(n.toString(),10)][parseInt(s.toString(),10)])}},t.prototype.updateVerticalTree=function(t,e,i,n,r,o){var s,a,l,h,c,d,p,u,g,m,f,v,y,b,S=t.graphNodes[e.id],w=t.nameTable[S.tree.children[0]],I=-1!==t.orientation.indexOf("Left"),x="Left"===S.tree.type?-1:0,M=i,C=n,N=r,E=[],D=[];for(f=0;f<S.tree.children.length;f++){if("Alternate"===S.tree.type&&(y=f%2==0&&S.tree.children.length>2?"Left":"Right",x=f%2==0&&S.tree.children.length>2?-1:0),M=i+this.findOffset(t,e,S,y),s=t.nameTable[S.tree.children[parseInt(f.toString(),10)]],h=I?s.actualSize.height:s.actualSize.width,c=I?s.actualSize.width:s.actualSize.height,l=this.updateTree(t,M+x*h,C,s,r+1,void 0,!0),a=t.graphNodes[s.id],u={x:a.x,y:a.y,right:a.x+h,bottom:a.y+c},0===f?(this.uniteRects(l,u),p=l):this.uniteRects(p,l),!a.prevBounds||"Alternate"===S.tree.type&&f%2==1&&S.tree.children.length>2||(b=void 0!==b?Math.min(a.canMoveBy,b):a.canMoveBy),S.maxLevel=Math.max(S.maxLevel||0,a.maxLevel||0),"Alternate"===S.tree.type&&S.tree.children.length>2&&f%2==0?(0!==f&&(C=d.bottom+t.verticalSpacing/2),D.push({rBounds:u}),a.levelBounds&&(D=D.concat(a.levelBounds))):(C="Alternate"===S.tree.type&&S.tree.children.length>2?Math.max(l.bottom,d.bottom)+t.verticalSpacing/2:l.bottom+t.verticalSpacing/2,r=S.maxLevel,E.push({rBounds:u}),m?this.uniteRects(m,u):m={x:a.x,y:a.y,right:a.x+h,bottom:a.y+c},a.levelBounds&&(E=E.concat(a.levelBounds))),0===f&&(S.firstChild={x:a.x,canMoveBy:a.canMoveBy,child:s.id}),this.hasChild(t,s))if(!S.firstChild||S.firstChild.x>=a.firstChild.x){if(a.firstChild&&S.firstChild.canMoveBy<a.canMoveBy){var T=S.firstChild.canMoveBy;a.canMoveBy=T,t.graphNodes[S.firstChild.child].canMoveBy=T,S.firstChild.canMoveBy=T}S.firstChild={x:a.firstChild.x,canMoveBy:void 0!==b?b:a.canMoveBy,child:s.id}}else a.firstChild&&a.translated&&S.firstChild.canMoveBy>a.canMoveBy&&(S.firstChild.canMoveBy=t.graphNodes[S.firstChild.child].canMoveBy=a.canMoveBy);d=u}return o?S.levelBounds=E:("Alternate"===S.tree.type&&S.tree.children.length>2&&(g={x:D[0].rBounds.x,y:D[0].rBounds.y,right:D[D.length-1].rBounds.right,bottom:D[D.length-1].rBounds.bottom},v=this.findIntersectingLevels(t,g,N+1),this.updateRearBounds(t,null,D,N+1,v)),v=this.findIntersectingLevels(t,m||p,N+1),this.updateRearBounds(t,null,m?E:[{rBounds:p}],N+1,v)),isNaN(b)||(t.graphNodes[w.id].canMoveBy=b),S.childBounds=p,S.mid=i,p},t.prototype.splitChildrenInRows=function(t,e){var i,n=t.graphNodes[e.id];i=4;var r,o=[];r=n.tree.children.length;var s=this.extend(n.tree.children);if(n.tree.rows){n.tree.children.length;var a=n.tree.rows;i=a%2==0?a:a-1}else 3===n.tree.children.length||4===n.tree.children.length?i=2:5===n.tree.children.length&&(i=3);for(;r>0;)o[o.length]=s.splice(0,i),(r-=i)<i&&(r%2==0?i=r:1!==r&&(i=r-1),r<i&&(i=r));return o},t.prototype.extend=function(t){var e,i=[];for(e=0;e<t.length;e++)i[parseInt(e.toString(),10)]=t[parseInt(e.toString(),10)];return i},t.prototype.findOffset=function(t,e,i,n){var r=0,o=-1!==t.orientation.indexOf("Left")?e.actualSize.height:e.actualSize.width,s=n||i.tree.type;switch(r=i.tree.offset||20,"Alternate"===i.tree.type&&r>=t.horizontalSpacing&&(r=t.horizontalSpacing/2),s){case"Left":r=o/2-r;break;case"Right":r+=o/2}return r},t.prototype.uniteRects=function(t,e){t.x=Math.min(t.x,e.x),t.right=Math.max(t.right,e.right),t.bottom=Math.max(t.bottom,e.bottom)},t.prototype.spaceLeftFromPrevSubTree=function(t,e,i){for(var n,r,o=t.graphNodes[e.id],s=t.horizontalSpacing,a=0;a<o.intersect.length;a++)r=t.levels[o.intersect[parseInt(a.toString(),10)]].rBounds,n=i.x-(r.right+s),(void 0===o.diff||n<o.diff)&&(o.diff=n,o.prevBounds=t.levels[o.intersect[parseInt(a.toString(),10)]].rBounds)},t.prototype.findIntersectingLevels=function(t,e,i,n){var r={x:e.x,y:e.y,right:e.right,bottom:e.bottom};r.y-=t.verticalSpacing/2,r.bottom+=t.verticalSpacing/2;var o,s,a=[];s=void 0!==n?n:i,o=t.levels[parseInt(s.toString(),10)]?t.levels[parseInt(s.toString(),10)].rBounds:null;do{if(o&&(r.y<o.y&&r.bottom>o.y||r.y<o.bottom&&o.bottom<r.bottom||r.y>=o.y&&r.bottom<=o.bottom||r.y<o.y&&r.bottom>o.bottom)){a.splice(0,0,s)}else if(o&&o.bottom<r.y)break;s--,o=t.levels[parseInt(s.toString(),10)]?t.levels[parseInt(s.toString(),10)].rBounds:null}while(s>=0);s=(void 0!==n?n:i)+1,o=t.levels[parseInt(s.toString(),10)]?t.levels[parseInt(s.toString(),10)].rBounds:null;do{if(o&&(r.y<o.y&&r.bottom>o.y||r.y<o.bottom&&o.bottom<r.bottom||r.y>=o.y&&r.bottom<=o.bottom||r.y<o.y&&r.bottom>o.bottom))a.push(s);else if(o&&o.y>r.bottom)break;s++,o=t.levels[parseInt(s.toString(),10)]?t.levels[parseInt(s.toString(),10)].rBounds:null}while(s<=t.levels.length);return a},t.prototype.findLevel=function(t,e,i){var n,r=e;n=0;var o;for(o=t.levels[parseInt(n.toString(),10)]?t.levels[parseInt(n.toString(),10)].rBounds:null;n<t.levels.length;){if(o&&r.bottom<o.y)return n;n++,o=t.levels[parseInt(n.toString(),10)]?t.levels[parseInt(n.toString(),10)].rBounds:null}return n},t.prototype.getParentNode=function(t,e){return t.nameTable[t.nameTable[e.inEdges[0]].sourceID]},t.prototype.updateEdges=function(t,e,i,n,r){var o,s=t.graphNodes[e.id];if(e.outEdges&&e.outEdges.length&&(e.isExpanded||n===Og.Render))for(o=0;o<e.outEdges.length;o++){var a=t.nameTable[t.nameTable[e.outEdges[parseInt(o.toString(),10)]].targetID];a&&!a.excludeFromLayout&&(-1===s.tree.children.indexOf(a.id)&&s.tree.children.push(a.id),a.outEdges&&a.outEdges.length&&a.isExpanded&&(s.tree.hasSubTree=!0),this.updateEdges(t,a,i+1,n,r))}s.tree.level=i,s.tree.hasSubTree&&(s.tree.orientation="Horizontal",s.tree.type="Center"),(t.getLayoutInfo||t.layoutInfo)&&"OrganizationalChart"===t.type&&(t.getLayoutInfo?t.getLayoutInfo(e,s.tree):Eo(s.tree,t.layoutInfo,r,e),"Balanced"===s.tree.type&&s.tree.hasSubTree&&(s.tree.type="Center",s.tree.orientation="Horizontal")),t.level&&"Alternate"!==s.tree.type&&i>=t.level&&(s.tree.hasSubTree=!1)},t.prototype.updateAnchor=function(t,e,i){var n,r,o=0,s=0,a=0,l=0,h=new Zu(0,0,i.x,i.y),c=t.bounds?t.bounds:h,d=t.orientation;if(t.fixedNode){o=(r=t.nameTable[t.fixedNode]).actualSize.width,s=r.actualSize.height,t.anchorX=r.offsetX,t.anchorY=r.offsetY;var p=r.pivot;for(t.anchorX+="RightToLeft"===t.orientation?o*p.x:-o*p.x,t.anchorY+="BottomToTop"===t.orientation?s*p.y:-s*p.y,n=r,a=0;n.inEdges.length;)n=this.getParentNode(t,n),a+=t.graphNodes[n.id].subTreeTranslation||0;-1!==t.orientation.indexOf("Left")?(l=t.graphNodes[r.id].y,"LeftToRight"===d?t.anchorX-=l:t.anchorX+=l,t.anchorY-=t.graphNodes[r.id].x+a):(l=t.graphNodes[r.id].y,t.anchorX-=t.graphNodes[r.id].x+a,"TopToBottom"===d?t.anchorY-=l:t.anchorY+=l)}else if("TopToBottom"===d||"BottomToTop"===d){switch(t.horizontalAlignment){case"Left":t.anchorX=c.x-e.x+t.margin.left;break;case"Right":t.anchorX=c.x+c.width-t.margin.right-e.right;break;case"Auto":case"Center":t.anchorX=c.x+c.width/2-(e.x+e.right)/2}switch(t.verticalAlignment){case"Auto":case"Top":var u;u=c.y+t.margin.top,t.anchorY="TopToBottom"===d?u:e.bottom+u;break;case"Bottom":var g=void 0;g=c.y+c.height-t.margin.bottom,t.anchorY="TopToBottom"===d?g-e.bottom:g;break;case"Center":var m=void 0;m=c.y+c.height/2,t.anchorY="TopToBottom"===t.orientation?m-(e.y+e.bottom)/2:m+(e.y+e.bottom)/2}}else{switch(t.horizontalAlignment){case"Auto":case"Left":var f=void 0;f=c.x+t.margin.left,t.anchorX="LeftToRight"===d?f:e.bottom+f;break;case"Right":var v=void 0;v=c.x+c.width-t.margin.right,t.anchorX="LeftToRight"===d?v-e.bottom:v;break;case"Center":m=void 0;m=c.width/2+c.x,t.anchorX="LeftToRight"===t.orientation?m-(e.y+e.bottom)/2:m+(e.y+e.bottom)/2}switch(t.verticalAlignment){case"Top":t.anchorY=c.y+t.margin.top-e.x;break;case"Auto":case"Center":t.anchorY=c.y+c.height/2-(e.right+e.x)/2;break;case"Bottom":t.anchorY=c.y+c.height-t.margin.bottom-e.right}}},t.prototype.updateConnectors=function(t,e,i){var n,r,o,s=t.graphNodes[e.id];if(e.outEdges.length)for(n=0;n<e.outEdges.length;n++)if(o=t.nameTable[e.outEdges[parseInt(n.toString(),10)]],o.points=[],r=t.nameTable[o.targetID],o.visible){if(o.visited=!0,t.getConnectorSegments)t.getConnectorSegments(o);else s&&-1!==s.tree.children.indexOf(o.targetID)&&("Bezier"===o.type&&"SamePoint"==t.connectionPointOrigin&&(o.segments=[],o.segments.push(new SS(o,"segments",{type:"Bezier"},!0))),"OrganizationalChart"===t.type&&"Orthogonal"===o.type&&(o.segments=[],this.updateSegments(t,o,e,r,n)));r&&(r.isExpanded||this.hasChild(t,r))&&this.updateConnectors(t,r,i+1)}if(s&&s.tree.assistants.length)for(n=0;n<s.tree.assistants.length;n++)r=t.nameTable[s.tree.assistants[parseInt(n.toString(),10)]],o=t.nameTable[r.inEdges[0]],this.get3Points(t,e,r,o),(r.isExpanded||this.hasChild(t,r))&&this.updateConnectors(t,r,i+1)},t.prototype.updateSegments=function(t,e,i,n,r){var o=t.graphNodes[i.id];o.tree.assistants.length?this.updateSegmentsForHorizontalOrientation(t,i,n,e):"Horizontal"===o.tree.orientation&&"Balanced"===o.tree.type?this.updateSegmentsForBalancedTree(t,e,i,n,r):"Horizontal"===o.tree.orientation?this.updateSegmentsForHorizontalOrientation(t,i,n,e):o.tree.offset<5?this.get5Points(t,i,n,e):this.get3Points(t,i,n,e)},t.prototype.updateSegmentsForBalancedTree=function(t,e,i,n,r){var o,s=t.graphNodes[i.id];if(5===s.tree.children.length&&r>2){o=s.tree.children[1],isNaN(t.graphNodes[""+o].treeWidth)&&(t.graphNodes[""+o].treeWidth=t.nameTable[""+o].actualSize.width);var a=3!==r?1:-1;if(-1!==t.orientation.indexOf("Left"))t.nameTable[""+o].offsetY-t.graphNodes[""+o].treeWidth/2-t.verticalSpacing*a/2;else t.nameTable[""+o].offsetX,t.graphNodes[""+o].treeWidth,t.horizontalSpacing;this.getSegmentsForMultipleRows(t,i,n,e)}else s.tree.children.length>5?r<4||r<s.tree.rows?this.getSegmentsForMultipleRows(t,i,n,e):this.updateSegmentsForHorizontalOrientation(t,i,n,e):4===s.tree.children.length?r<2||r<s.tree.rows?this.getSegmentsForMultipleRows(t,i,n,e):this.updateSegmentsForHorizontalOrientation(t,i,n,e):this.getSegmentsForMultipleRows(t,i,n,e)},t.prototype.get3Points=function(t,e,i,n){var r=[],o=this.getBounds(e),s=this.getBounds(i);if(-1!==t.orientation.indexOf("Top")){var a=0===t.orientation.indexOf("Top")?o.bottomCenter:o.topCenter,l=e.offsetX>i.offsetX?s.middleRight:s.middleLeft;r.push(a,{x:o.bottomCenter.x,y:l.y},l)}else{a=0===t.orientation.indexOf("Left")?o.middleRight:o.middleLeft,l=e.offsetY>i.offsetY?s.bottomCenter:s.topCenter;r.push(a,{x:s.bottomCenter.x,y:o.middleRight.y},l)}this.getSegmentsFromPoints(r,n)},t.prototype.get5Points=function(t,e,i,n){var r,o,s,a,l=[],h=this.getBounds(e),c=this.getBounds(i);-1!==t.orientation.indexOf("Top")?(r=e.offsetY<i.offsetY?h.bottomCenter:h.topCenter,a=t.verticalSpacing/4*(e.offsetY<i.offsetY?1:-1),s=t.horizontalSpacing/2*(e.offsetX>i.offsetX?1:-1),o=e.offsetX>i.offsetX?c.middleRight:c.middleLeft,l.push(r,{x:r.x,y:r.y+a},{x:o.x+s,y:r.y+a},{x:o.x+s,y:o.y},o)):(r=e.offsetX>i.offsetX?h.middleLeft:h.middleRight,o=e.offsetY>i.offsetY?c.bottomCenter:c.topCenter,s=t.horizontalSpacing/4*(e.offsetX<i.offsetX?1:-1),a=t.verticalSpacing/2*(e.offsetY>i.offsetY?1:-1),l.push(r,{x:r.x+s,y:r.y},{x:r.x+s,y:r.y+a},{x:o.x,y:r.y+a},o)),this.getSegmentsFromPoints(l,n)},t.prototype.getSegmentsFromPoints=function(t,e){for(var i,n=[],r=0;r<t.length-2;r++)(i=new wS(e,"segments",{type:"Orthogonal"},!0)).direction=Gu.direction(t[parseInt(r.toString(),10)],t[r+1]),i.length=Gu.distancePoints(t[parseInt(r.toString(),10)],t[r+1]),n.push(i);e.segments=n},t.prototype.getSegmentsForMultipleRows=function(t,e,i,n){var r,o,s=[],a=this.getBounds(i),l=this.getBounds(e);switch(t.orientation){case"TopToBottom":r={x:l.bottomCenter.x,y:l.bottomCenter.y+t.verticalSpacing/4},(o=new wS(n,"segments",{type:"Orthogonal"},!0)).direction=Gu.direction(l.bottomCenter,r),o.length=Gu.distancePoints(l.bottomCenter,r),s.push(o);break;case"BottomToTop":r={x:l.bottomCenter.x,y:l.topCenter.y-t.verticalSpacing/4},(o=new wS(n,"segments",{type:"Orthogonal"},!0)).direction=Gu.direction(l.topCenter,r),o.length=Gu.distancePoints(l.topCenter,r),s.push(o);break;case"LeftToRight":if(r={x:l.middleRight.x+t.verticalSpacing/4,y:l.middleRight.y},o=new wS(n,"segments",{type:"Orthogonal"},!0),o.direction=Gu.direction(l.middleRight,r),o.length=Gu.distancePoints(l.middleRight,r),s.push(o),a.center.y!==l.center.y){var h={x:l.middleRight.x+t.verticalSpacing/4,y:a.middleLeft.y};(o=new wS(n,"segments",{type:"Orthogonal"},!0)).direction=Gu.direction(r,h),o.length=Gu.distancePoints(r,h),s.push(o)}break;case"RightToLeft":if(r={x:l.middleLeft.x-t.verticalSpacing/4,y:l.middleRight.y},o=new wS(n,"segments",{type:"Orthogonal"},!0),o.direction=Gu.direction(l.middleLeft,r),o.length=Gu.distancePoints(l.middleLeft,r),s.push(o),a.center.y!==l.center.y){var c={x:l.middleLeft.x-t.verticalSpacing/4,y:a.middleLeft.y};(o=new wS(n,"segments",{type:"Orthogonal"},!0)).direction=Gu.direction(c,c),o.length=Gu.distancePoints(c,c),s.push(o)}}n.segments=s},t.prototype.updateSegmentsForHorizontalOrientation=function(t,e,i,n){var r,o,s=[],a=this.getBounds(e),l=this.getBounds(i);switch(t.orientation){case"TopToBottom":r={x:a.bottomCenter.x,y:l.topCenter.y-t.verticalSpacing/2},(o=new wS(n,"segments",{type:"Orthogonal"},!0)).direction=Gu.direction(a.bottomCenter,r),o.length=Gu.distancePoints(a.bottomCenter,r),s.push(o);break;case"BottomToTop":r={x:a.topCenter.x,y:l.bottomCenter.y+t.verticalSpacing/2},(o=new wS(n,"segments",{type:"Orthogonal"},!0)).direction=Gu.direction(a.topCenter,r),o.length=Gu.distancePoints(a.topCenter,r),s.push(o);break;case"LeftToRight":if(r={x:l.middleLeft.x-t.verticalSpacing/2,y:a.middleRight.y},o=new wS(n,"segments",{type:"Orthogonal"},!0),o.direction=Gu.direction(a.middleRight,r),o.length=Gu.distancePoints(a.middleRight,r),s.push(o),l.center.y!==a.center.y){var h={x:l.middleLeft.x-t.verticalSpacing/2,y:l.middleLeft.y};(o=new wS(n,"segments",{type:"Orthogonal"},!0)).direction=Gu.direction(r,h),o.length=Gu.distancePoints(r,h),s.push(o)}break;case"RightToLeft":if(r={x:l.middleRight.x+t.verticalSpacing/2,y:a.middleRight.y},o=new wS(n,"segments",{type:"Orthogonal"},!0),o.direction=Gu.direction(a.middleLeft,r),o.length=Gu.distancePoints(a.middleLeft,r),s.push(o),l.center.y!==a.center.y){var c={x:l.middleRight.x+t.verticalSpacing/2,y:l.middleLeft.y};(o=new wS(n,"segments",{type:"Orthogonal"},!0)).direction=Gu.direction(r,c),o.length=Gu.distancePoints(r,c),s.push(o)}}return n.segments=s,[]},t.prototype.updateNodes=function(t,e,i,n,r,o){var s,a,l,h,c,d;if(e&&!e.excludeFromLayout){l=e.actualSize.width,h=e.actualSize.height,c=t.anchorX,d=t.anchorY,"LeftToRight"===t.orientation?(c+=t.graphNodes[e.id].y+l/2,d+=t.graphNodes[e.id].x+i+h/2):"RightToLeft"===t.orientation?(c-=t.graphNodes[e.id].y+l/2,d+=t.graphNodes[e.id].x+i+h/2):"TopToBottom"===t.orientation?(c+=t.graphNodes[e.id].x+i+l/2,d+=t.graphNodes[e.id].y+h/2):(c+=t.graphNodes[e.id].x+i+l/2,d-=t.graphNodes[e.id].y+h/2),t.graphNodes&&(c+=r=r||0,d+=o=o||0,this.isAnimation||(e.offsetX=c,e.offsetY=d));var p={id:e.id,differenceX:c-e.offsetX,differenceY:d-e.offsetY};t.objects.push(p);var u=[];if(this.hasChild(t,e))for(s=0;s<t.graphNodes[e.id].tree.children.length;s++)a=t.nameTable[t.graphNodes[e.id].tree.children[parseInt(s.toString(),10)]],this.updateNodes(t,a,i+(t.graphNodes[e.id].subTreeTranslation||0),n,r,o),u.push(a);if(t.graphNodes[e.id].tree.assistants.length)for(s=0;s<t.graphNodes[e.id].tree.assistants.length;s++)a=t.nameTable[t.graphNodes[e.id].tree.assistants[parseInt(s.toString(),10)]],this.updateNodes(t,a,i+(t.graphNodes[e.id].subTreeTranslation||0),null,r,o)}},t}(),TO=function(){function t(){this.isAnimation=!1}return t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"MindMapChart"},t.prototype.updateLayout=function(t,e,i,n,r,o){var s=this.checkRoot(t,i,r,o,e);if(s)i.fixedNode=s;else for(var a=0,l=t;a<l.length;a++){if(!((f=l[a]).excludeFromLayout||f.inEdges&&f.inEdges.length)){i.fixedNode=f.id;break}}var h=e[i.fixedNode],c=this.findFirstLevelNodes(h,i,e),d=[],p=[],u=Oa(i.getBranch);u=u||Oa(this.getBranch);for(var g=0,m=c;g<m.length;g++){var f,v=u(f=m[g],c);"Left"===(v=f&&f.branch?f.branch:v)?d.push(f):p.push(f)}var y=new Zu(0,0,n.x,n.y);e[i.fixedNode].offsetX=y.x+y.width/2,e[i.fixedNode].offsetY=y.y+y.height/2,d.length&&this.updateMindMapBranch(t,p,e,i,n,r,"Left"),p.length&&this.updateMindMapBranch(t,d,e,i,n,r,"Right")},t.prototype.checkRoot=function(t,e,i,n,r){for(var o=0,s=t;o<s.length;o++){var a=s[o];if(!a.excludeFromLayout){if(a.data&&(a.data[""+i].toString()===n||a.data[""+i].toString()===e.root))return a.id;if(!a.data&&a.id===e.root)return a.id}}return""},t.prototype.updateMindMapBranch=function(t,e,i,n,r,o,s){var a={type:"HierarchicalTree",horizontalSpacing:n.verticalSpacing,verticalSpacing:n.horizontalSpacing,verticalAlignment:n.verticalAlignment,horizontalAlignment:n.horizontalAlignment,fixedNode:n.fixedNode,getLayoutInfo:Oa(n.getLayoutInfo),layoutInfo:n.layoutInfo,margin:n.margin,orientation:n.orientation,root:n.fixedNode};a.orientation="Left"===s?"LeftToRight":"RightToLeft",this.excludeFromLayout(e,i,!0);(new DO).updateLayout(t,i,a,r,o),this.excludeFromLayout(e,i,!1)},t.prototype.getBranch=function(t,e){return e.indexOf(t)%2==0?"Left":"Right"},t.prototype.excludeFromLayout=function(t,e,i){for(var n=0,r=t;n<r.length;n++){e[r[n].id].excludeFromLayout=i}},t.prototype.findFirstLevelNodes=function(t,e,i){var n=[];if(t&&t.outEdges.length)for(var r=0,o=t.outEdges;r<o.length;r++){var s=o[r];n.push(i[i[""+s].targetID])}return n},t}(),OO=function(){function t(){}return t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"RadialTree"},t.prototype.updateLayout=function(t,e,i,n){var r={type:i.type,nameTable:e,anchorX:0,anchorY:0,firstLevelNodes:[],centerNode:null,levels:[],maxLevel:0,graphNodes:{},layoutNodes:[],orientation:i.orientation,horizontalSpacing:i.horizontalSpacing,verticalSpacing:i.verticalSpacing,verticalAlignment:i.verticalAlignment,horizontalAlignment:i.horizontalAlignment,fixedNode:i.fixedNode,margin:i.margin,bounds:i.bounds,objects:[],root:i.root};this.doLayout(r,t,e,n)},t.prototype.doLayout=function(t,e,i,n){for(var r,o=0;o<e.length;o++)(r=e[parseInt(o.toString(),10)]).excludeFromLayout||(t.graphNodes[r.id]=this.setUpLayoutInfo(t,r),r.inEdges&&r.inEdges.length||t.firstLevelNodes.push(r));t.root&&i[t.root]?t.centerNode=i[t.root]:t.firstLevelNodes.length&&(t.centerNode=t.firstLevelNodes[0],t.root=t.centerNode.id),t.centerNode&&(this.updateEdges(t,t.centerNode,0,i),this.depthFirstAllignment(t,t.centerNode,0,0),this.populateLevels(t),this.transformToCircleLayout(t),this.updateAnchor(t,n),this.updateNodes(t,t.centerNode,i))},t.prototype.updateEdges=function(t,e,i,n){var r=t.graphNodes[e.id];t.layoutNodes.push(r),r.level=i,r.visited=!0,t.maxLevel=Math.max(t.maxLevel,i);for(var o=0;o<e.outEdges.length;o++){var s=n[n[e.outEdges[parseInt(o.toString(),10)]].targetID];s.excludeFromLayout||s.visited||(r.children.push(s),this.updateEdges(t,s,i+1,n))}},t.prototype.depthFirstAllignment=function(t,e,i,n){var r,o=t.graphNodes[e.id];if(o.children.length){n+=300;for(var s=0;s<o.children.length;s++)i=(r=this.depthFirstAllignment(t,o.children[parseInt(s.toString(),10)],i,n)).x,n=r.y;o.children=o.children.sort(function(e,i){return t.graphNodes[e.id].x-t.graphNodes[i.id].x});var a=t.graphNodes[o.children[0].id].min,l=t.graphNodes[o.children[o.children.length-1].id].max;if(o.x=a+(l-a)/2,i=l+t.horizontalSpacing,o.segmentOffset=l+t.horizontalSpacing,o.x-=o.width/2,o.y-=o.height/2,o.min=a,o.max=l,o.x<a&&o.visited){o.x=a,i=o.x+o.width/2-(l-a)/2,o.visited=!1;for(s=0;s<o.children.length;s++)r=this.depthFirstAllignment(t,o.children[parseInt(s.toString(),10)],i,n);o.visited=!0,i=o.x+o.width+t.horizontalSpacing}i=i<(l=t.graphNodes[o.children[o.children.length-1].id].segmentOffset)?l:i,n-=300,o.y=n}else o.x=i,o.y=n,o.min=i,o.max=i+o.width,i+=o.width+t.horizontalSpacing;return{x:i,y:n}},t.prototype.populateLevels=function(t){var e=[],i=Math.min.apply(Math,t.layoutNodes.map(function(t){return t.x})),n=Math.max.apply(Math,t.layoutNodes.map(function(e){return e.x+e.width+t.horizontalSpacing}))-i;t.levels=[];for(var r=function(r){var o={};e=(e=t.layoutNodes.filter(function(t){return t.level===r?t:null})).sort(function(t,e){return t.x-e.x}),o.min=e[0].x,o.max=e[e.length-1].x+e[e.length-1].width+t.horizontalSpacing,o.actualCircumference=0,o.height=0;for(var s=0;s<e.length;s++)e[parseInt(s.toString(),10)].height>o.height&&(o.height=e[parseInt(s.toString(),10)].height),o.actualCircumference+=Math.max(e[parseInt(s.toString(),10)].width,e[parseInt(s.toString(),10)].height),s!==e.length-1&&(o.actualCircumference+=t.horizontalSpacing);o.circumference=o.max-o.min,o.actualCircumference<o.circumference&&(o.circumference=(o.circumference+o.actualCircumference)/2),o.radius=o.circumference/(2*Math.PI)+o.height,o.nodes=[],r>1&&t.levels[r-1].radius+t.levels[r-1].height>=o.radius&&(o.radius=t.levels[r-1].radius+t.levels[r-1].height);for(var a=0;a<e.length;a++)e[parseInt(a.toString(),10)].ratio=Math.abs(e[parseInt(a.toString(),10)].x+e[parseInt(a.toString(),10)].width/2-i)/n,o.nodes.push(e[parseInt(a.toString(),10)]);t.levels.push(o)},o=0;o<=t.maxLevel;o++)r(o)},t.prototype.transformToCircleLayout=function(t){var e=t.graphNodes[t.centerNode.id];e.x=0,e.y=0;for(var i=1;i<t.levels.length;i++)for(var n=0;n<t.levels[parseInt(i.toString(),10)].nodes.length;n++){var r=t.levels[parseInt(i.toString(),10)].nodes[parseInt(n.toString(),10)];r.x=Math.cos(360*r.ratio*Math.PI/180)*(t.levels[parseInt(i.toString(),10)].radius+t.verticalSpacing*i),r.y=Math.sin(360*r.ratio*Math.PI/180)*(t.levels[parseInt(i.toString(),10)].radius+t.verticalSpacing*i),t.anchorX=Math.min(t.anchorX,r.x),t.anchorY=Math.min(t.anchorY,r.y)}},t.prototype.updateAnchor=function(t,e){t.anchorX=t.centerNode.offsetX||e.x/2,t.anchorY=t.centerNode.offsetY||e.y/2},t.prototype.updateNodes=function(t,e,i){var n=t.graphNodes[e.id],r=n.x+t.anchorX,o=n.y+t.anchorY;e.offsetX=r,e.offsetY=o;for(var s=0;s<n.children.length;s++){var a=n.children[parseInt(s.toString(),10)];this.updateNodes(t,i[a.id],i)}},t.prototype.setUpLayoutInfo=function(t,e){var i={};return i.name=e.id,i.x=0,i.y=0,i.min=0,i.max=0,i.width=e.actualSize.width,i.height=e.actualSize.height,i.children=[],i.level=0,i.ratio=0,i.visited=!1,i},t}(),LO=function(){function t(t){this.velocityX=0,this.velocityY=0,this.nodes=[],this.graphNode=t;var e=vl(this.graphNode);this.location=e.center,this.nodes=[],t.treeInfo.parents||(t.treeInfo.parents=[]),t.treeInfo.children||(t.treeInfo.children=[]),this.nodes=t.treeInfo.parents.concat(t.treeInfo.children)}return t.prototype.applyChanges=function(){this.graphNode.treeInfo.center=this.location},t}(),AO=function(){function t(){this.cdCOEF=.442,this.cfMAXVELOCITY=50,this.cnMAXITERACTION=1e3,this.cnSPRINGLENGTH=100,this.mszMaxForceVelocity={width:this.cfMAXVELOCITY,height:this.cfMAXVELOCITY},this.springLength=0,this.springFactor=this.cdCOEF,this.maxIteration=this.cnMAXITERACTION,this.springLength=this.cnSPRINGLENGTH}return t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"SymmetricalLayout"},t.prototype.doGraphLayout=function(t){var e=this.selectedNode;e.treeInfo.Bounds=t.getModelBounds(t.nodes);var i=e.treeInfo.GraphNodes,n=this.convertGraphNodes(i),r=n.length;r=Math.min(this.maxIteration,r*r*r),this.preLayoutNodes(n,e.treeInfo.Bounds);for(var o=0,s=r;o<s;o++)this.makeSymmetricLayout(n),this.appendForces(n);this.resetGraphPosition(n,e)},t.prototype.preLayoutNodes=function(t,e){for(var i=Math.max(e?e.width:25,e?e.height:25),n=i/2,r=i/2,o=2*Math.PI/t.length,s=o,a=0;a<t.length;a++){var l=t[parseInt(a.toString(),10)];this.getForceNode(l).location={x:n+i*Number(Math.cos(s).toFixed(2)),y:r+i*Number(Math.sin(s).toFixed(2))},s-=o}},t.prototype.doLayout=function(t){this.selectedNode=t.selectedNode,this.doGraphLayout(t)},t.prototype.makeSymmetricLayout=function(t){for(var e,i,n=0;n<t.length;n++){for(var r=t[parseInt(n.toString(),10)],o=(e=this.getForceNode(r)).nodes,s=0;s<o.length;s++){yl((g=o[parseInt(s.toString(),10)]).id,t)&&this.calcNodesForce(e,this.getForceNode(g))}for(var a=0,l=o.length;a<l&&!(l<2);a++){var h=this.getForceNode(o[parseInt(a.toString(),10)]),c=a+1>=l?this.getForceNode(o[0]):this.getForceNode(o[a+1]),d=360/o.length/2*Math.PI/180,p=2*this.springLength*Math.sin(d);this.calcRelatesForce(h,c,p)}for(var u=0;u<t.length;u++){var g;yl((g=t[parseInt(u.toString(),10)]).id,o)||g.id===r.id||(i=this.getForceNode(g),this.updateNeigbour(e,i))}}},t.prototype.appendForces=function(t){for(var e=null,i=0;i<t.length;i++){var n=t[parseInt(i.toString(),10)],r=(e=this.getForceNode(n)).location;r.x+=Math.min(e.velocityX,this.mszMaxForceVelocity.width),r.y+=Math.min(e.velocityY,this.mszMaxForceVelocity.height),e.velocityX=0,e.velocityY=0,e.location=r}},t.prototype.resetGraphPosition=function(t,e){for(var i,n={width:Number.MAX_VALUE,height:Number.MAX_VALUE},r=null,o=0;o<t.length;o++){i=t[parseInt(o.toString(),10)];var s={x:(r=this.getForceNode(i)).location.x-i.actualSize.width/2,y:r.location.y-i.actualSize.height/2};n.width=Math.min(n.width,s.x),n.height=Math.min(n.height,s.y)}for(o=0;o<t.length;o++){i=t[parseInt(o.toString(),10)];(s=(r=this.getForceNode(i)).location).x-=n.width-(e.treeInfo.location?e.treeInfo.location.x:0),s.y-=n.height-(e.treeInfo.location?e.treeInfo.location.y:0),r.location=s,r.applyChanges()}},t.prototype.convertGraphNodes=function(t){for(var e=[],i=0,n=Object.keys(t);i<n.length;i++){var r=n[i];if(t[""+r]){var o=t[""+r],s=new LO(o);o.treeInfo.tag=s,e.push(o)}}return e},t.prototype.getForceNode=function(t){return t.treeInfo.tag},t.prototype.updateNeigbour=function(t,e){if(null!=e&&null!=t){var i=this.pointDistance(t.location,e.location),n=this.lineAngle(t.location,e.location),r=.9*this.springLength;i<r&&this.calcForce(i,r,n,e)}},t.prototype.lineAngle=function(t,e){var i=0,n=e.x-t.x,r=e.y-t.y;return 0===n?i=r<=0?3*Math.PI/2:Math.PI/2:0===r?i=n<0?Math.PI:0:(i=Math.atan(r/n),n<0&&r>0?i=Math.PI+i:n<0&&r<0?i=Math.PI+i:n>0&&r<0&&(i=2*Math.PI+i)),i},t.prototype.pointDistance=function(t,e){var i=0,n=e.x-t.x,r=e.y-t.y,o=n*n+r*r;return o>0&&(i=Math.sqrt(o)),i},t.prototype.calcRelatesForce=function(t,e,i){var n=this.pointDistance(t.location,e.location),r=this.lineAngle(t.location,e.location);n<i&&this.calcForce(n,i,r,e)},t.prototype.updateLayout=function(t,e,i,n,r,o){(new zO).updateLayout(t,e,i,n,r,o)},t.prototype.calcNodesForce=function(t,e){var i=this.pointDistance(t.location,e.location),n=this.lineAngle(t.location,e.location);(i>this.springLength||i<this.springLength)&&this.calcForce(i,this.springLength,n,e)},t.prototype.calcForce=function(t,e,i,n){var r=n.nodes.length,o=t-e,s=this.springFactor/(r*r)*Math.sqrt(r);if(0!==o){var a=o*s,l=Math.cos(i)*a,h=Math.sin(i)*a;n.velocityX-=l,n.velocityY-=h}},t}(),zO=function(){function t(){this.visitedStack=[],this.cycleEdgesCollection=[],this.graphObjects=[],this.passedNodes=[]}return t.prototype.updateLayout=function(t,e,i,n,r,o){this.nameTable=n,this.nodes=t,this.connectors=e;var s=t;s.length>0&&(this.mhelperSelectedNode=fa(s[0]));for(var a=0,l=t;a<l.length;a++){var h=m=l[a];h.treeInfo={},h.treeInfo.graphType="Node",this.graphObjects.push(h)}for(var c=0,d=e;c<d.length;c++){var p=d[c];p.treeInfo={},p.treeInfo.graphType="Connector",this.graphObjects.push(p)}this.updateLayout1(this.graphObjects,i);for(var u=this.getModelBounds(s),g=0;g<s.length;g++){var m=s[parseInt(g.toString(),10)],f=(o.x-u.width)/2,v=r.margin||{};v.left=v.left||0,v.right=v.right||0,v.top=v.top||0,v.bottom=v.bottom||0,r.margin.left&&(v.left=r.margin.left),r.margin.top&&(v.top=r.margin.top);var y=m.treeInfo.tag.location.x-(m.offsetX-m.actualSize.width/2)-u.x+f+v.left,b=m.treeInfo.tag.location.y-(m.offsetY-m.actualSize.height/2)-u.y+v.top;m.offsetX+=y,m.offsetY+=b,delete m.treeInfo}return!0},t.prototype.getModelBounds=function(t){t=t.slice();for(var e,i=null,n=null,r=0;r<t.length;r++){var o=vl(e=t[parseInt(r.toString(),10)]);i=new Zu(e.treeInfo.tag?e.treeInfo.tag.location.x:o.x,e.treeInfo.tag?e.treeInfo.tag.location.y:o.y,e.actualSize.width,e.actualSize.height),n=n?n.uniteRect(i):i}return n},t.prototype.updateLayout1=function(t,e){this.detectCyclesInGraph(t);var i=t.length;if(i>0){for(var n=[],r=[],o=[],s=0;s<t.length;s++){var a=t[parseInt(s.toString(),10)];void 0===a.treeInfo.isCycleEdge&&(a.treeInfo.isCycleEdge=!1),"Connector"!==a.treeInfo.graphType||a.treeInfo.isCycleEdge?"Connector"===a.treeInfo.graphType?n.push(a):o.push(a):r.push(a)}for(r=r.concat(o),r=n.concat(r);i>this.dictionaryLength(this.passedNodes);)if(this.getNodesToPosition(r),null!=this.selectedNode){e.doLayout(this),this.selectedNode=null,this.visitedStack=[];for(var l=0,h=this.cycleEdgesCollection;l<h.length;l++){h[l].treeInfo.isCycleEdge=!1}}this.passedNodes=null,this.selectedNode=null}return!1},t.prototype.getNodesToPosition=function(t){for(var e=0;e<t.length;e++){var i=t[parseInt(e.toString(),10)];if(!yl(i.id,this.passedNodes)){i&&this.selectNodes(i);break}}},t.prototype.selectNodes=function(t){var e=t;"Connector"===t.treeInfo.graphType?this.exploreGraphEdge(t):null!=e&&this.addNode(t,"passed")&&(this.addNode(t,"selected"),this.isConnectedToAnotherNode(e)?(this.selectedNode={treeInfo:{}},this.selectedNode.treeInfo.LeftMargin=10,this.selectedNode.treeInfo.TopMargin=10,this.selectConnectedNodes(e)):this.selectedNode=t)},t.prototype.selectConnectedNodes=function(t){var e=this.selectedNode;e.treeInfo.GraphNodes||(e.treeInfo.GraphNodes={});var i=t;if(null!=i&&this.addNode(i,"passed")){var n=i.id;if(this.dictionaryContains(e.treeInfo.GraphNodes,i)){var r=e.treeInfo.GraphNodes[""+n];r.treeInfo.Added&&(r.treeInfo.Added=!1,this.getConnectedRelatives(r),this.exploreRelatives(t))}else{var o=this.addGraphNode(i);this.getConnectedRelatives(o),this.exploreRelatives(t)}}},t.prototype.exploreRelatives=function(t){this.exploreRelatives1(t,"Parents"),this.exploreRelatives1(t,"Children")},t.prototype.exploreRelatives1=function(t,e){var i=[];"Parents"===e?i=t.inEdges:"Children"===e&&(i=t.outEdges);for(var n=0;n<i.length;n++){var r=this.nameTable[i[parseInt(n.toString(),10)]];if(this.addNode(r,"passed")){var o=this.nameTable[r.sourceID],s=this.nameTable[r.targetID];"Parents"===e&&null!=o&&yl(o.id,this.nodes)?this.selectConnectedNodes(this.nameTable[r.sourceID]):"Children"===e&&null!=s&&yl(s.id,this.nodes)&&this.selectConnectedNodes(this.nameTable[r.targetID])}}},t.prototype.getConnectedRelatives=function(t){this.getConnectedParents(t),this.getConnectedChildren(t)},t.prototype.dictionaryContains=function(t,e){for(var i=Object.keys(t),n=0;n<i.length;n++)if(i[parseInt(n.toString(),10)]===e.id)return!0;return!1},t.prototype.dictionaryLength=function(t){return Object.keys(t).length},t.prototype.getConnectedChildren=function(t){for(var e=this.selectedNode,i=t,n=0;n<i.outEdges.length;n++){var r=this.nameTable[i.outEdges[parseInt(n.toString(),10)]];if(!r.treeInfo.isCycleEdge){var o=this.nameTable[r.targetID];if(yl(o.id,this.nodes)&&null!=o&&o.visible){var s=void 0;this.dictionaryContains(e.treeInfo.GraphNodes,o)?s=e.treeInfo.GraphNodes[o.id]:(s=this.addGraphNode(o)).treeInfo.Added=!0,t.treeInfo.children||(t.treeInfo.children=[]),s.treeInfo.parents||(s.treeInfo.parents=[]),this.setNode(s.treeInfo.parents,t),this.findNode(t.treeInfo.children,s.id)<0&&t.treeInfo.children.push(s)}}}},t.prototype.getConnectedParents=function(t){for(var e=this.selectedNode,i=t,n=0;n<i.inEdges.length;n++){var r=this.nameTable[i.inEdges[parseInt(n.toString(),10)]];if(!r.treeInfo.isCycleEdge){var o=this.nameTable[r.sourceID];if(yl(o.id,this.nodes)&&null!=o&&o.visible){var s=void 0;this.dictionaryContains(e.treeInfo.GraphNodes,o)?s=e.treeInfo.GraphNodes[o.id]:(s=this.addGraphNode(o)).treeInfo.Added=!0,t.treeInfo.parents||(t.treeInfo.parents=[]),s.treeInfo.children||(s.treeInfo.children=[]),this.setNode(s.treeInfo.children,t),this.findNode(t.treeInfo.parents,s.id)<0&&t.treeInfo.parents.push(s)}}}},t.prototype.setNode=function(t,e){var i=this.findNode(t,e.id);i>=0&&i<t.length?t[parseInt(i.toString(),10)]=e:t.push(e)},t.prototype.findNode=function(t,e){var i=-1;if(null!=t&&""!==e)for(var n=0,r=t.length;n<r;n++){var o=t[parseInt(n.toString(),10)];if("string"==typeof o&&o===e){i=n;break}if(null!=o&&o.id===e){i=n;break}}return i},t.prototype.addGraphNode=function(t){var e=this.selectedNode;e.treeInfo.GraphNodes||(e.treeInfo.GraphNodes={});var i=t;if(null!=e){e.treeInfo.GraphNodes[i.id]=i;var n=this.mhelperSelectedNode;null!=n&&t.id===n.id&&(this.mhelperSelectedNode=i)}return i},t.prototype.isConnectedToAnotherNode=function(t){var e=!1;return t.inEdges.concat(t.outEdges).length>0&&(null!=t.inEdges&&t.inEdges.length>0&&(e=this.searchEdgeCollection(t.inEdges,"FromNode")),!e&&null!=t.outEdges&&t.outEdges.length>0&&(e=this.searchEdgeCollection(t.outEdges,"ToNode"))),e},t.prototype.searchEdgeCollection=function(t,e){for(var i=!1,n=0;n<t.length-1;n++){var r=this.nameTable[t[parseInt(n.toString(),10)]];if(this.addNode(r,"passed")&&(!r.treeInfo.isCycleEdge&&("FromNode"===e&&null!=this.nameTable[r.sourceID]||"ToNode"===e&&null!=this.nameTable[r.targetID]))){i=!0;break}}return i},t.prototype.exploreGraphEdge=function(t){var e=t;if(null!=e&&!e.treeInfo.isCycleEdge&&this.addNode(t,"passed")){this.addNode(t,"selected");var i=this.nameTable[e.sourceID],n=this.nameTable[e.targetID];null!=i?this.selectNodes(i):null!=n?this.selectNodes(n):this.selectedNode=t}},t.prototype.addNode=function(t,e){var i=t;return"passed"!==e&&i.visible||this.dictionaryContains(this.passedNodes,i)||(this.passedNodes[i.id]=i),!!i.visible},t.prototype.detectCyclesInGraph=function(t){for(var e=[],i=[],n=0;n<t.length;n++)"Connector"!==t[parseInt(n.toString(),10)].treeInfo.graphType&&e.push(t[parseInt(n.toString(),10)]);if(e.length>0)for(i.push(e[0]),this.visitedStack.push(e[0]);i.length>0;){var r=i[i.length-1],o=this.getUnVisitedChildNodes(r);if(o.length>0){var s=o[0],a=o[o.length-1];yl(s.id,this.visitedStack)?(a.treeInfo.isCycleEdge=!0,this.cycleEdgesCollection.push(a)):(i.push(s),this.visitedStack.splice(0,0,s))}else i.pop()}},t.prototype.getUnVisitedChildNodes=function(t){var e=[];if(t.outEdges.length>0){for(var i=0;i<t.outEdges.length;i++){var n=this.nameTable[t.outEdges[parseInt(i.toString(),10)]];if(!yl(n.id,this.visitedStack)){var r=this.nameTable[n.targetID];return null!=r&&e.push(r),e.push(n),this.visitedStack.splice(0,0,n),e}}return e}return e},t}(),kO=function(){function t(){}return t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"ComplexHierarchicalTree"},t.prototype.doLayout=function(t,e,i,n,r){(new jO).doLayout(t,e,i,n,r)},t.prototype.getLayoutNodesCollection=function(t){for(var e,i=[],n=0;n<t.length;n++)(e=t[parseInt(n.toString(),10)]).inEdges.length+e.outEdges.length>0&&!e.parentId&&!e.processId&&i.push(e);return i},t}(),jO=function(){function t(){this.nameTable={},this.crossReduction=new RO,this.previousEdgeOffset=6,this.previousEdgeDistance=5,this.jettyPositions={},this.rankBottomY=null,this.limitX=null,this.rankTopY=null,this.parallelEdgeSpacing=10,this.minEdgeJetty=12}return t.prototype.createVertex=function(t,e,i,n,r,o){return{value:e,geometry:{x:i,y:n,width:r,height:o},name:e,vertex:!0,inEdges:t.inEdges.slice(),outEdges:t.outEdges.slice()}},t.prototype.getEdges=function(t){var e=[];if(t){for(var i=0;t.inEdges.length>0&&i<t.inEdges.length;i++)e.push(this.nameTable[t.inEdges[parseInt(i.toString(),10)]]);for(i=0;t.outEdges.length>0&&i<t.outEdges.length;i++)e.push(this.nameTable[t.outEdges[parseInt(i.toString(),10)]])}return e},t.prototype.findRoots=function(t){for(var e=[],i=null,n=-1e5,r=0,o=Object.keys(t);r<o.length;r++){for(var s=t[""+o[r]],a=this.getEdges(s),l=0,h=0,c=0;c<a.length;c++){this.getVisibleTerminal(a[parseInt(c.toString(),10)],!0).name===s.name?l++:h++}0===h&&l>0&&e.push(s);var d=l-h;d>n&&(n=d,i=s)}return 0===e.length&&null!=i&&e.push(i),e},t.prototype.getVisibleTerminal=function(t,e){var i=this.nameTable[t.targetID];e&&(i=this.nameTable[t.sourceID]);for(var n=0;n<this.vertices.length;n++)if(this.vertices[parseInt(n.toString(),10)].name===i.id)return this.vertices[parseInt(n.toString(),10)];return null},t.prototype.traverse=function(t,e,i,n,r,o){if(null!=t){var s=t.name;if(null==o||null!=o[""+s]){null==n[""+s]&&(n[""+s]=t),null!=o&&delete o[""+s];for(var a=this.getEdges(t),l=[],h=0;h<a.length;h++)l[parseInt(h.toString(),10)]=this.getVisibleTerminal(a[parseInt(h.toString(),10)],!0)===t;for(h=0;h<a.length;h++)if(!e||l[parseInt(h.toString(),10)]){for(var c=this.getVisibleTerminal(a[parseInt(h.toString(),10)],!l[parseInt(h.toString(),10)]),d=1,p=0;p<a.length;p++)if(p!==h){var u=l[parseInt(p.toString(),10)];this.getVisibleTerminal(a[parseInt(p.toString(),10)],!u)===c&&(u?d++:d--)}d>=0&&(n=this.traverse(c,e,a[parseInt(h.toString(),10)],n,r,o))}}else if(null==n[""+s])for(h=0;h<r.length;h++){var g=r[parseInt(h.toString(),10)];if(null!=g[""+s]){for(var m=0,f=Object.keys(g);m<f.length;m++){var v=f[m];n[""+v]=g[""+v]}return r.splice(h,1),n}}}return n},t.prototype.getModelBounds=function(t){t=t.slice();for(var e=null,i=null,n=0;n<t.length;n++)if(e=t[parseInt(n.toString(),10)].geometry,i){var r=Math.max(i.x+i.width,e.x+e.width),o=Math.max(i.y+i.height,e.y+e.height);i.x=Math.min(i.x,e.x),i.y=Math.min(i.y,e.y),i.width=r-i.x,i.height=o-i.y}else i={x:e.x,y:e.y,width:e.width,height:e.height};return i},t.prototype.doLayout=function(t,e,i,n,r){this.nameTable=e;var o,s=i.enableRouting,a={horizontalSpacing:i.horizontalSpacing,verticalSpacing:i.verticalSpacing,orientation:i.orientation,marginX:i.margin.left,marginY:i.margin.top,enableLayoutRouting:s};r&&(r.edgeMapper=[]);var l=[];this.vertices=[];for(var h={},c=0;c<t.length;c++){var d=this.createVertex(t[parseInt(c.toString(),10)],t[parseInt(c.toString(),10)].id,0,0,t[parseInt(c.toString(),10)].actualSize.width,t[parseInt(c.toString(),10)].actualSize.height);if(this.vertices.push(d),(t[parseInt(c.toString(),10)].inEdges.length>0||t[parseInt(c.toString(),10)].outEdges.length>0)&&l.push(t[parseInt(c.toString(),10)]),h[d.name]=d,r)for(var p=t[parseInt(c.toString(),10)].outEdges.slice(),u=0;u<p.length;u++){var g=e[p[parseInt(u.toString(),10)]];r.setEdgeMapper({key:g,value:[]})}}var m=[],f=this.findRoots(h);for(c=0;c<f.length;c++){var v={};m.push(v),this.traverse(f[parseInt(c.toString(),10)],!0,null,v,m,h)}var y,b={marginX:0,marginY:0},S=[],w=!1;for(c=0;c<m.length;c++){v=m[parseInt(c.toString(),10)];for(var I=0,x=Object.keys(v);I<x.length;I++){var M=x[I];S.push(v[""+M])}("Linear"===i.arrangement&&c===m.length-1||s)&&(w=!0),o=new PO(this,S,f,a),this.cycleStage(o),this.layeringStage(o),r&&"DifferentPoint"===i.connectionPointOrigin||w?(y=this.matrixModel({model:o,matrix:[],rowOffset:[]}),r.arrangeElements(y,i)):"Nonlinear"===i.arrangement&&(this.crossingStage(o),b=this.placementStage(o,b.marginX,b.marginY),S=[])}var C=this.getModelBounds(this.vertices);this.updateMargin(i,a,C,n);for(c=0;c<this.vertices.length;c++){if(V=this.vertices[parseInt(c.toString(),10)]){var N=this.nameTable[V.name];N.offsetX=0,N.offsetY=0;var E=V.geometry.x-(N.offsetX-N.actualSize.width/2)+a.marginX,D=V.geometry.y-(N.offsetY-N.actualSize.height/2)+a.marginY,T=E,O=D;"BottomToTop"===a.orientation?(s&&(V.geometry.y=C.height-D-N.actualSize.height/2),O=C.height-D):"RightToLeft"===a.orientation&&(T=C.width-E),N.offsetX+=T-N.offsetX,N.offsetY+=O-N.offsetY}}if(!w)for(c=0;c<this.vertices.length;c++)this.isNodeOverLap(this.nameTable[this.vertices[parseInt(c.toString(),10)].name],i);if((r&&"DifferentPoint"===i.connectionPointOrigin||s)&&r.updateLayout(n,C,i,a,l,e),s){for(var L={},A=void 0,z=0;z<y.matrix.length;z++){A=y.matrix[parseInt(z.toString(),10)].value;for(var k=0;k<A.length;k++)for(var j=A[parseInt(k.toString(),10)],P=0;P<j.cells.length;P++){var R=j.cells[parseInt(P.toString(),10)];if("internalVertex"===this.getType(R.type)){var B=R;L[B.id]=B}}}this.updateRankValuess(o);c=0;for(var H=Object.keys(L);c<H.length;c++){M=H[parseInt(c.toString(),10)];this.setVertexLocationValue(L[""+M],i.orientation,C)}this.localEdgeProcessing(o,L),this.assignRankOffset(o),this.updateEdgeSetXYValue(o);var U=this.getValues(o.edgeMapper);for(c=0;c<U.length;c++){if(U[parseInt(c.toString(),10)].x.length>0)for(u=0;u<U[parseInt(c.toString(),10)].x.length;u++)"RightToLeft"!==i.orientation&&"LeftToRight"!==i.orientation?U[parseInt(c.toString(),10)].x[parseInt(u.toString(),10)]=U[parseInt(c.toString(),10)].x[parseInt(u.toString(),10)]+a.marginX:(i.orientation,U[parseInt(c.toString(),10)].x[parseInt(u.toString(),10)]=U[parseInt(c.toString(),10)].x[parseInt(u.toString(),10)]+i.verticalSpacing/2);this.setEdgePosition(U[parseInt(c.toString(),10)],o,a)}for(z=0;z<this.vertices.length;z++){var V;(V=this.vertices[parseInt(z.toString(),10)]).outEdges.length>1&&this.updateMultiOutEdgesPoints(V)}}},t.prototype.setEdgeXY=function(t,e,i,n){if(t&&e.source.id){for(var r=void 0,o=void 0,s=0;s<t.length;s++)for(var a=0;a<t[parseInt(s.toString(),10)].length;a++)t[parseInt(s.toString(),10)][parseInt(a.toString(),10)].id!==e.target.id&&t[parseInt(s.toString(),10)][parseInt(a.toString(),10)].id!==e.source.id||(t[parseInt(s.toString(),10)][parseInt(a.toString(),10)].id===e.target.id&&void 0===r&&(r=s),t[parseInt(s.toString(),10)][parseInt(a.toString(),10)].id===e.source.id&&void 0===o&&(o=s));for(var l=void 0,h=r;h<=o;h++)void 0===l&&(l=this[h+"_RankOffset"]),void 0!==l&&l<this[h+"_RankOffset"]&&(l=this[h+"_RankOffset"]);void 0===this.edges&&(this.edges={}),this.edges[e.ids[0]]={x:e.x,y:0};var c=this.resetOffsetXValue(l,i/10);e.x[n-e.minRank-1]=c;for(a=0;a<e.edges.length;a++)e.edges[parseInt(a.toString(),10)].levelSkip=!0}},t.prototype.resetOffsetXValue=function(t,e){for(var i=0,n=Object.keys(this.edges);i<n.length;i++)for(var r=n[parseInt(i.toString(),10)],o=this.edges[""+r].x,s=0;s<o.length;s++){var a=void 0;if(this.edges[""+r].x[parseInt(s.toString(),10)]===t)return a=t+e,a=this.resetOffsetXValue(a,e)}return t},t.prototype.setEdgePosition=function(t,e,i){var n=0;if(101207!==t.temp[0]){void 0===t.maxRank&&(t.maxRank=-1),void 0===t.minRank&&(t.minRank=-1);var r=t.maxRank,o=t.minRank;r===o&&(r=t.source.maxRank,o=t.target.minRank);var s=0,a=this.jettyPositions[t.ids[0]];void 0===t.isReversed?t.isReversed=!1:t.isReversed=!0;var l=t.isReversed?t.target.cell:t.source.cell,h=!1;"TopToBottom"===e.layout.orientation||"LeftToRight"===e.layout.orientation?("TopToBottom"===e.layout.orientation&&(h=!1),"LeftToRight"===e.layout.orientation&&(h=(t.isReversed,!1))):t.isReversed||(h=!0);for(var c=0;c<t.edges.length;c++){var d=t.edges[parseInt(c.toString(),10)],p=this.getVisibleTerminal(d,!0),u=[],g=t.isReversed;if(p!==l&&(g=!g),null!=a){var m=g?2:0,f=g?h?this.rankBottomY[parseInt(o.toString(),10)]:this.rankTopY[parseInt(o.toString(),10)]:h?this.rankTopY[parseInt(r.toString(),10)]:this.rankBottomY[parseInt(r.toString(),10)],v=a[4*s+1+m];g!==h&&(v=-v),"TopToBottom"!==i.orientation&&"BottomToTop"!==i.orientation||(f+=v);var y=a[4*s+m];"TopToBottom"===i.orientation||"BottomToTop"===i.orientation?u.push(this.getPointvalue(y,f+i.marginY)):"LeftToRight"===i.orientation?u.push(this.getPointvalue(f+v,y+i.marginY)):u.push(this.getPointvalue(f,y+i.marginY))}var b=t.x.length-1,S=-1,w=-1,I=t.maxRank-1;g&&(b=0,S=t.x.length,w=1,I=t.minRank+1);for(var x=b;t.maxRank!==t.minRank&&x!==S;x+=w){var M=t.x[parseInt(x.toString(),10)]+n,C=(this.rankTopY[parseInt(I.toString(),10)]+this.rankBottomY[I+1])/2,N=(this.rankTopY[I-1]+this.rankBottomY[parseInt(I.toString(),10)])/2;if(g){var E=C;C=N,N=E}"TopToBottom"===i.orientation||"BottomToTop"===i.orientation?(u.push(this.getPointvalue(M,C+i.marginY)),u.push(this.getPointvalue(M,N+i.marginY))):(u.push(this.getPointvalue(C,M+i.marginY)),u.push(this.getPointvalue(N,M+i.marginY))),this.limitX=Math.max(this.limitX,M),I+=w}if(null!=a){m=g?2:0;var D=g?h?this.rankTopY[parseInt(r.toString(),10)]:this.rankBottomY[parseInt(r.toString(),10)]:h?this.rankBottomY[parseInt(o.toString(),10)]:this.rankTopY[parseInt(o.toString(),10)];v=a[4*s+3-m];g!==h&&(v=-v);f=D-v,y=a[4*s+2-m];"TopToBottom"===i.orientation||"BottomToTop"===i.orientation?u.push(this.getPointvalue(y,f+i.marginY)):u.push(this.getPointvalue(f,y+i.marginY))}this.setEdgePoints(d,u,e),n=0===n?this.parallelEdgeSpacing:n>0?-n:-n+this.parallelEdgeSpacing,s++}t.temp[0]=101207}},t.prototype.getPointvalue=function(t,e){return{x:Number(t)||0,y:Number(e)||0}},t.prototype.updateEdgeSetXYValue=function(t){if(t.layout.enableLayoutRouting){var e=!1;"LeftToRight"!==t.layout.orientation&&"RightToLeft"!==t.layout.orientation||(e=!0);for(var i=0;i<t.ranks.length;i++)for(var n=t.ranks[parseInt(i.toString(),10)],r=0;r<n.length;r++){var o=n[parseInt(r.toString(),10)];if(o.edges&&o.edges.length>0){var s=t.layout.horizontalSpacing>0?t.layout.horizontalSpacing/2:15,a=!0;o.minRank!==i-1&&o.maxRank!==i-1&&(a=!1),a&&this.setXY(o,i,void 0,!!e,t.ranks,s)}}}},t.prototype.getPreviousLayerConnectedCells=function(t,e){if(null==e.previousLayerConnectedCells){e.previousLayerConnectedCells=[],e.previousLayerConnectedCells[0]=[];for(var i=0;i<e.connectsAsSource.length;i++){var n=e.connectsAsSource[parseInt(i.toString(),10)];-1===n.minRank||n.minRank===t-1?e.previousLayerConnectedCells[0].push(n.target):e.previousLayerConnectedCells[0].push(n)}}return e.previousLayerConnectedCells[0]},t.prototype.compare=function(t,e){if(null!=t&&null!=e){if(e.weightedValue>t.weightedValue)return-1;if(e.weightedValue<t.weightedValue)return 1}return 0},t.prototype.localEdgeProcessing=function(t,e){for(var i=0;i<t.ranks.length;i++)for(var n=t.ranks[parseInt(i.toString(),10)],r=0;r<n.length;r++){var o=n[parseInt(r.toString(),10)];if(this.crossReduction.isVertex(o))for(var s=this.getPreviousLayerConnectedCells(i,o),a=i-1,l=0;l<2;l++){if(a>-1&&a<t.ranks.length&&null!=s&&s.length>0){for(var h=[],c=0;c<s.length;c++){var d=this.weightedCellSorter(s[parseInt(c.toString(),10)],this.getX(a,s[parseInt(c.toString(),10)]));h.push(d)}h.sort(this.compare),o.width=e[o.id].cell.geometry.width,o.height=e[o.id].cell.geometry.height;var p=void 0;"TopToBottom"===t.layout.orientation||"BottomToTop"===t.layout.orientation?(o.x[0]=e[o.id].cell.geometry.x+e[o.id].cell.geometry.width/2,p=o.x[0]-o.width/2+e[o.id].cell.geometry.height/2):(o.x[0]=e[o.id].cell.geometry.y,p=o.x[0]);var u=p+o.width,g=0,m=[];for(c=0;c<h.length;c++){var f=h[parseInt(c.toString(),10)].cell,v=void 0;if(this.crossReduction.isVertex(f)){v=0===l?o.connectsAsSource:o.connectsAsTarget;for(var y=0;y<v.length;y++)v[parseInt(y.toString(),10)].source!==f&&v[parseInt(y.toString(),10)].target!==f||(g+=v[parseInt(y.toString(),10)].edges.length,m.push(v[parseInt(y.toString(),10)]))}else g+=f.edges.length,m.push(f)}var b=(g+1)*this.previousEdgeDistance;o.width>b+2*this.previousEdgeDistance&&(p+=this.previousEdgeDistance,u-=this.previousEdgeDistance);var S=(u-p)/g,w=p+S/2,I=this.minEdgeJetty-this.previousEdgeOffset;for(c=0;c<m.length;c++){var x=m[parseInt(c.toString(),10)].edges.length;void 0===this.jettyPositions&&(this.jettyPositions={});var M=this.jettyPositions[m[parseInt(c.toString(),10)].ids[0]];null==M&&(M=[],this.jettyPositions[m[parseInt(c.toString(),10)].ids[0]]=M),c<g/2?I+=this.previousEdgeOffset:c>g/2&&(I-=this.previousEdgeOffset);for(var C=0;C<x;C++)M[4*C+2*l]=w,w+=S,M[4*C+2*l+1]=I}}s=this.getNextLayerConnectedCells(i,o),a=i+1}}},t.prototype.updateMultiOutEdgesPoints=function(t){for(var e=0;e<t.outEdges.length/2;e++){var i=this.nameTable[t.outEdges[parseInt(e.toString(),10)]];this.nameTable[t.outEdges[t.outEdges.length-(e+1)]].geometry.points[0].y=i.geometry.points[0].y}},t.prototype.getNextLayerConnectedCells=function(t,e){if(null==e.nextLayerConnectedCells){e.nextLayerConnectedCells=[],e.nextLayerConnectedCells[0]=[];for(var i=0;i<e.connectsAsTarget.length;i++){var n=e.connectsAsTarget[parseInt(i.toString(),10)];-1===n.maxRank||n.maxRank===t+1?e.nextLayerConnectedCells[0].push(n.source):e.nextLayerConnectedCells[0].push(n)}}return e.nextLayerConnectedCells[0]},t.prototype.getX=function(t,e){return this.crossReduction.isVertex(e)?e.x[0]:this.crossReduction.isVertex(e)?0:e.x[t-e.minRank-1]||e.temp[t-e.minRank-1]},t.prototype.getGeometry=function(t){return t.geometry},t.prototype.setEdgePoints=function(t,e,i){if(null!=t){var n=this.getGeometry(t);if(null!=e)for(var r=0;r<e.length;r++)e[r].x=e[r].x,e[r].y=e[r].y;n.points=e,t.geometry=n}},t.prototype.assignRankOffset=function(t){if(t)for(var e=0;e<t.ranks.length;e++)this.rankCoordinatesAssigment(e,t)},t.prototype.rankCoordinatesAssigment=function(t,e){for(var i,n=e.ranks[parseInt(t.toString(),10)],r=e.layout.horizontalSpacing,o=0;o<n.length;o++)void 0===this[t+"_RankOffset"]&&(this[t+"_RankOffset"]=0),i=n[parseInt(o.toString(),10)].x[0],this[t+"_RankOffset"]<i&&(this[t+"_RankOffset"]=i+n[parseInt(o.toString(),10)].width/2+r)},t.prototype.getType=function(t){return"internalVertex"===t?"internalVertex":"internalEdge"},t.prototype.updateRankValuess=function(t){this.rankTopY=[],this.rankBottomY=[];for(var e=0;e<t.ranks.length;e++)this.rankTopY[parseInt(e.toString(),10)]=Number.MAX_VALUE,this.rankBottomY[parseInt(e.toString(),10)]=-Number.MAX_VALUE},t.prototype.setVertexLocationValue=function(t,e,i){var n,r=t.cell.geometry;"TopToBottom"===e||"BottomToTop"===e?(r.x,n=r.y):(r.y,n=r.x),"RightToLeft"===e?(r.y,n=i.width-r.x-r.height,this.rankBottomY[t.minRank]=Math.max(this.rankBottomY[t.minRank],n),this.rankTopY[t.minRank]=Math.min(this.rankTopY[t.minRank],n+r.height)):(this.rankTopY[t.minRank]=Math.min(this.rankTopY[t.minRank],n),this.rankBottomY[t.minRank]=Math.max(this.rankBottomY[t.minRank],n+r.height))},t.prototype.matrixModel=function(t){return t.model=t.model,t.matrix=t.matrix||[],t.rowOffset=t.rowOffset||[],t},t.prototype.calculateRectValue=function(t){var e={x:0,y:0,right:0,bottom:0,height:0,width:0};return e.x=t.offsetX-t.actualSize.width/2,e.right=t.offsetX+t.actualSize.width/2,e.y=t.offsetY-t.actualSize.height/2,e.bottom=t.offsetY+t.actualSize.height/2,e},t.prototype.isNodeOverLap=function(t,e){for(var i={x:0,y:0,right:0,bottom:0,height:0,width:0},n=0;n<this.vertices.length;n++){var r={x:0,y:0,width:0,height:0},o=this.nameTable[this.vertices[parseInt(n.toString(),10)].value];t.id!==o.id&&0!==o.offsetX&&0!==o.offsetY&&(i=this.calculateRectValue(t),r=this.calculateRectValue(o),this.isIntersect(r,i,e)&&("TopToBottom"===e.orientation||"BottomToTop"===e.orientation?t.offsetX+=e.horizontalSpacing:t.offsetY+=e.verticalSpacing,this.isNodeOverLap(t,e)))}},t.prototype.isIntersect=function(t,e,i){return!(Math.floor(t.right+i.horizontalSpacing)<=Math.floor(e.x)||Math.floor(t.x-i.horizontalSpacing)>=Math.floor(e.right)||Math.floor(t.y-i.verticalSpacing)>=Math.floor(e.bottom)||Math.floor(t.bottom+i.verticalSpacing)<=Math.floor(e.y))},t.prototype.updateMargin=function(t,e,i,n){var r={x:0,y:0,width:n.x,height:n.y},o=i.x,s=i.y,a=i.x+i.width,l=i.y+i.height,h=t.bounds?t.bounds:r;if("TopToBottom"===e.orientation||"BottomToTop"===e.orientation){switch(t.horizontalAlignment){case"Auto":case"Left":e.marginX=h.x-o+t.margin.left;break;case"Right":e.marginX=h.x+h.width-t.margin.right-a;break;case"Center":e.marginX=h.x+h.width/2-(o+a)/2}switch(t.verticalAlignment){case"Top":var c=h.y+t.margin.top;e.marginY="TopToBottom"===e.orientation?c:-c;break;case"Bottom":var d=h.y+h.height-t.margin.bottom;e.marginY="TopToBottom"===e.orientation?d-l:-(d-l);break;case"Auto":case"Center":var p=h.y+h.height/2;e.marginY="TopToBottom"===e.orientation?p-(s+l)/2:(s+l)/2-p}}else{switch(t.horizontalAlignment){case"Auto":case"Left":var u=h.x+t.margin.left;e.marginX="LeftToRight"===e.orientation?u:-u;break;case"Right":var g=void 0;g=h.x+h.width-t.margin.right,e.marginX="LeftToRight"===e.orientation?g-a:a-g;break;case"Center":p=void 0;p=h.width/2+h.x,e.marginX="LeftToRight"===e.orientation?p-(s+l)/2:(o+a)/2-p}switch(t.verticalAlignment){case"Top":e.marginY=h.y+t.margin.top-o;break;case"Auto":case"Center":e.marginY=h.y+h.height/2-(s+l)/2;break;case"Bottom":e.marginY=h.y+h.height-t.margin.bottom-l}}},t.prototype.placementStage=function(t,e,i){var n=this.coordinateAssignment(e,i,parent,t);return n.model=t,n.widestRankValue=null,this.placementStageExecute(n),{marginX:n.marginX+t.layout.horizontalSpacing,marginY:n.marginY+t.layout.verticalSpacing}},t.prototype.coordinateAssignment=function(t,e,i,n){var r={};return"TopToBottom"===n.layout.orientation||"BottomToTop"===n.layout.orientation?(r.horizontalSpacing=n.layout.horizontalSpacing,r.verticalSpacing=n.layout.verticalSpacing):(r.horizontalSpacing=n.layout.verticalSpacing,r.verticalSpacing=n.layout.horizontalSpacing),r.orientation="north",r.marginX=r.marginX=t,r.marginY=r.marginY=e,r},t.prototype.calculateWidestRank=function(t,e,i){var n=!1;"LeftToRight"!==t.model.layout.orientation&&"RightToLeft"!==t.model.layout.orientation||(n=!0);var r=-t.verticalSpacing,o=0;t.rankSizes=[],t.rankOffset=[];for(var s=i.maxRank;s>=0;s--){for(var a=0,l=i.ranks[parseInt(s.toString(),10)],h=n?t.marginY:t.marginX,c=0;c<l.length;c++){var d=l[parseInt(c.toString(),10)];if(this.crossReduction.isVertex(d)){var p=d;if(p.cell&&(p.cell.inEdges||p.cell.outEdges)){var u=this.nameTable[p.cell.name];p.width=u.actualSize.width,p.height=u.actualSize.height,a=Math.max(a,n?p.width:p.height)}}else if(d){var g=d,m=1;null!=g.edges&&(m=g.edges.length),d.width=10*(m-1)}n&&(d.height||(d.height=0)),h+=(n?d.height:d.width)/2,this.setXY(d,s,h,!!n),this.setTempVariable(d,s,h),(h+=(n?d.height:d.width)/2+t.horizontalSpacing)>t.widestRankValue&&(t.widestRankValue=h,t.widestRank=s),t.rankSizes[parseInt(s.toString(),10)]=h}t.rankOffset[parseInt(s.toString(),10)]=r;var f=a/2+o/2+t.verticalSpacing;o=a,"north"===t.orientation||"west"===t.orientation?r+=f:r-=f;for(c=0;c<l.length;c++){var v=l[parseInt(c.toString(),10)];this.setXY(v,s,r,!n)}}},t.prototype.setTempVariable=function(t,e,i){this.crossReduction.isVertex(t)?t.temp[0]=i:t.temp[e-t.minRank-1]=i},t.prototype.setXY=function(t,e,i,n,r,o){t&&t.cell?t.cell.inEdges||t.cell.outEdges?n?t.y[0]=i:t.x[0]=i:n?t.y[e-t.minRank-1]=i:t.x[e-t.minRank-1]=i:this.setEdgeXY(r,t,o,e)},t.prototype.rankCoordinates=function(t,e,i,n){var r=!1;"LeftToRight"!==t.model.layout.orientation&&"RightToLeft"!==t.model.layout.orientation||(r=!0);for(var o=n.ranks[parseInt(e.toString(),10)],s=0,a=(r?t.marginY:t.marginX)+(t.widestRankValue-t.rankSizes[parseInt(e.toString(),10)])/2,l=0;l<o.length;l++){var h=o[parseInt(l.toString(),10)];if(this.crossReduction.isVertex(h)){var c=this.nameTable[h.cell.name];h.width=c.actualSize.width,h.height=c.actualSize.height,s=Math.max(s,h.height)}else{var d=h,p=1;null!=d.edges&&(p=d.edges.length),r?h.height=10*(p-1):h.width=10*(p-1)}var u=(r?h.height:h.width)/2;a+=u,this.setXY(h,e,a,!!r),this.setTempVariable(h,e,a),a+=u+t.horizontalSpacing}},t.prototype.initialCoords=function(t,e,i){this.calculateWidestRank(t,e,i);for(var n=t.widestRank;n>=0;n--)n<i.maxRank&&this.rankCoordinates(t,n,e,i);for(n=t.widestRank+1;n<=i.maxRank;n++)n>0&&this.rankCoordinates(t,n,e,i)},t.prototype.isAncestor=function(t,e){if(null!=e&&null!=t.hashCode&&null!=e.hashCode&&t.hashCode.length<e.hashCode.length){if(t.hashCode===e.hashCode)return!0;if(null==t.hashCode||null==t.hashCode)return!1;for(var i=0;i<t.hashCode.length;i++)if(t.hashCode[parseInt(i.toString(),10)]!==e.hashCode[parseInt(i.toString(),10)])return!1;return!0}return!1},t.prototype.weightedCellSorter=function(t,e){var i={};return i.cell=t||null,i.weightedValue=e||0,i.visited=!1,i.rankIndex=null,i},t.prototype.minNode=function(t,e){for(var i=[],n={map:{}},r=[],o=0;o<=e.maxRank;o++){r[parseInt(o.toString(),10)]=e.ranks[parseInt(o.toString(),10)];for(var s=0;s<r[parseInt(o.toString(),10)].length;s++){var a=r[parseInt(o.toString(),10)][parseInt(s.toString(),10)],l=this.weightedCellSorter(a,o);l.rankIndex=s,l.visited=!0,i.push(l),e.setDictionaryForSorter(n,a,l,!0)}}for(var h=10*i.length,c=0;i.length>0&&c<=h;){var d=i.shift(),p=d.cell,u=d.weightedValue,g=d.rankIndex,m=this.crossReduction.getConnectedCellsOnLayer(p,u),f=this.crossReduction.getConnectedCellsOnLayer(p,u,!0),v=m.length,y=f.length,b=this.medianXValue(t,m,u+1),S=this.medianXValue(t,f,u-1),w=v+y,I=this.crossReduction.getTempVariable(p,u),x=I;w>0&&(x=(b*v+S*y)/w),1===v&&1===y?x=S*y/y:1===v&&(x=b*v/v);var M=!1,C=void 0;if(x<I-1)if(0===g)C=x,M=!0;else{var N=r[parseInt(u.toString(),10)][g-1],E=this.crossReduction.getTempVariable(N,u);(E=E+N.width/2+t.intraCellSpacing+p.width/2)<x?(C=x,M=!0):E<this.crossReduction.getTempVariable(p,u)-1&&(C=E,M=!0)}else if(x>I+1){if(g===r[parseInt(u.toString(),10)].length-1)C=x,M=!0;else{var D=r[parseInt(u.toString(),10)][g+1],T=this.crossReduction.getTempVariable(D,u);(T=T-D.width/2-t.intraCellSpacing-p.width/2)>x?(C=x,M=!0):T>this.crossReduction.getTempVariable(p,u)+1&&(C=T,M=!0)}}M&&(this.setTempVariable(p,u,C),this.updateNodeList(i,n,m,e),this.updateNodeList(i,n,f,e)),this.crossReduction.isVertex(d.cell)&&(d.visited=!1),c++}},t.prototype.updateNodeList=function(t,e,i,n){for(var r=0;r<i.length;r++){var o=i[parseInt(r.toString(),10)],s=n.getDictionaryForSorter(e,o);null!=s&&!1===s.visited&&(s.visited=!0,t.push(s))}},t.prototype.medianXValue=function(t,e,i){if(0===e.length)return 0;for(var n=[],r=0;r<e.length;r++)n[parseInt(r.toString(),10)]=this.crossReduction.getTempVariable(e[parseInt(r.toString(),10)],i);if(n.sort(function(t,e){return t-e}),e.length%2==1)return n[Math.floor(e.length/2)];var o=e.length/2;return(n[o-1]+n[parseInt(o.toString(),10)])/2},t.prototype.placementStageExecute=function(t){var e=!1;"LeftToRight"!==t.model.layout.orientation&&"RightToLeft"!==t.model.layout.orientation||(e=!0),t.jettyPositions={};var i=t.model;e?t.currentYDelta=0:t.currentXDelta=0,this.initialCoords(t,{model:i},i),this.minNode(t,i);var n=1e8;t.maxIterations||(t.maxIterations=8);for(var r=0;r<t.maxIterations;r++){if((e?t.currentYDelta:t.currentXDelta)<n){for(var o=0;o<i.ranks.length;o++)for(var s=i.ranks[parseInt(o.toString(),10)],a=0;a<s.length;a++){var l=s[parseInt(a.toString(),10)];this.setXY(l,o,this.crossReduction.getTempVariable(l,o),!!e)}n=e?t.currentYDelta:t.currentXDelta}e?t.currentYDelta=0:t.currentXDelta=0}this.setCellLocations(t,i)},t.prototype.setCellLocations=function(t,e){for(var i=this.getValues(e.vertexMapper),n=0;n<i.length;n++)this.setVertexLocation(t,i[parseInt(n.toString(),10)])},t.prototype.garphModelsetVertexLocation=function(t,e,i,n){var r=e.geometry,o=null;return null!=r&&(o={x:i,y:n,width:r.width,height:r.height},r.x===i&&r.y===n||(e.geometry=o)),o},t.prototype.setVertexLocation=function(t,e){var i=!1;"LeftToRight"!==t.model.layout.orientation&&"RightToLeft"!==t.model.layout.orientation||(i=!0);var n=e.cell,r=e.x[0]-e.width/2,o=e.y[0]-e.height/2;this.garphModelsetVertexLocation(t,n,r,o),i?(t.marginY||(t.marginY=0),t.marginY=Math.max(t.marginY,o+e.height)):(t.marginX||(t.marginX=0),t.marginX=Math.max(t.marginX,r+e.width))},t.prototype.getValues=function(t){var e=[];if(t.map)for(var i=0,n=Object.keys(t.map);i<n.length;i++){var r=n[i];e.push(t.map[""+r])}return e},t.prototype.crossingStage=function(t){this.crossReduction.execute(t)},t.prototype.layeringStage=function(t){this.initialRank(t),this.fixRanks(t)},t.prototype.initialRank=function(t){for(var e=t.startNodes,i=t.getDictionaryValues(t.vertexMapper),n=e.slice();e.length>0;){for(var r=(d=e[0]).connectsAsTarget,o=d.connectsAsSource,s=!0,a=1e8,l=0;l<r.length;l++){if(5270620!==(g=r[parseInt(l.toString(),10)]).temp[0]){s=!1;break}var h=g.source;a=Math.min(a,h.temp[0]-1)}if(s){if(d.temp[0]=a,t.maxRank||(t.maxRank=1e8),t.maxRank=Math.min(t.maxRank,a),null!=o)for(l=0;l<o.length;l++){(g=o[parseInt(l.toString(),10)]).temp[0]=5270620;-1===(h=g.target).temp[0]&&(e.push(h),h.temp[0]=-2)}e.shift()}else{var c=e.shift();if(e.push(d),c===d&&1===e.length)break}}for(l=0;l<i.length;l++)i[parseInt(l.toString(),10)].temp[0]-=t.maxRank;for(l=0;l<n.length;l++)for(var d,p=0,u=(r=(d=n[parseInt(l.toString(),10)]).connectsAsSource,0);u<r.length;u++){var g;h=(g=r[parseInt(u.toString(),10)]).target;d.temp[0]=Math.max(p,h.temp[0]+1),p=d.temp[0]}t.maxRank=1e8-t.maxRank},t.prototype.fixRanks=function(t){t.fixRanks()},t.prototype.cycleStage=function(t){var e={};t.startNodes=[];for(var i=t.getDictionaryValues(t.vertexMapper),n=[],r=0;r<i.length;r++)i[parseInt(r.toString(),10)].temp[0]=-1,n[i[parseInt(r.toString(),10)].id]=i[parseInt(r.toString(),10)];var o=null;if(null!=t.roots){var s=t.roots;o=[];for(r=0;r<s.length;r++)o[parseInt(r.toString(),10)]=t.getDictionary(t.vertexMapper,s[parseInt(r.toString(),10)]),null!=o[parseInt(r.toString(),10)]&&t.startNodes.push(o[parseInt(r.toString(),10)])}t.visit("removeParentConnection",o,!0,null,{seenNodes:e,unseenNodes:n});var a=t.clone(e,null,!0);t.visit("removeNodeConnection",n,!0,a,{seenNodes:e,unseenNodes:n})},t.prototype.remove=function(t,e){var i=e.indexOf(t);return-1!==i&&e.splice(i,1),t},t.prototype.invert=function(t,e){var i=t.source;t.source=t.target,t.target=i,t.isReversed=!t.isReversed},t.prototype.getEdgesBetween=function(t,e,i){i=null!=i&&i;for(var n=this.getEdges(t),r=[],o=0;o<n.length;o++){var s=this.getVisibleTerminal(n[parseInt(o.toString(),10)],!0),a=this.getVisibleTerminal(n[parseInt(o.toString(),10)],!1);(s===t&&a===e||!i&&s===e&&a===t)&&r.push(n[parseInt(o.toString(),10)])}return r},t}(),PO=function(){function t(t,e,i,n){this.multiObjectIdentityCounter=0,this.dfsCount=0,this.hierarchicalUtil=new jO,this.roots=i,this.vertexMapper={map:{}};var r=[];this.layout=n,this.maxRank=1e8,this.edgeMapper={map:{}},this.hierarchicalLayout=t,this.createInternalCells(t,e,r,n);for(var o=0;o<e.length;o++){for(var s=r[parseInt(o.toString(),10)].connectsAsSource,a=0;a<s.length;a++){var l=s[parseInt(a.toString(),10)],h=l.edges;if(null!=h&&h.length>0){var c=h[0],d=t.getVisibleTerminal(c,!1),p=this.getDictionary(this.vertexMapper,d);r[parseInt(o.toString(),10)]===p&&(d=t.getVisibleTerminal(c,!0),p=this.getDictionary(this.vertexMapper,d)),null!=p&&r[parseInt(o.toString(),10)]!==p&&(l.target=p,0===p.connectsAsTarget.length&&(p.connectsAsTarget=[]),p.connectsAsTarget.indexOf(l)<0&&p.connectsAsTarget.push(l))}}r[parseInt(o.toString(),10)].temp[0]=1}}return t.prototype.resetEdge=function(t){var e={x:0,y:0,width:0,height:0,relative:!0};return t.geometry=e,t},t.prototype.createInternalCells=function(t,e,i,n){for(var r=0;r<e.length;r++){i[parseInt(r.toString(),10)]={x:[],y:[],temp:[],cell:e[parseInt(r.toString(),10)],id:e[parseInt(r.toString(),10)].name,connectsAsTarget:[],connectsAsSource:[],type:"internalVertex"},this.setDictionary(this.vertexMapper,e[parseInt(r.toString(),10)],i[parseInt(r.toString(),10)]);var o=t.getEdges(e[parseInt(r.toString(),10)]);i[parseInt(r.toString(),10)].connectsAsSource=[];for(var s=0;s<o.length;s++){var a=t.getVisibleTerminal(o[parseInt(s.toString(),10)],!1);if(a!==e[parseInt(r.toString(),10)]){var l=t.getEdgesBetween(e[parseInt(r.toString(),10)],a,!1),h=t.getEdgesBetween(e[parseInt(r.toString(),10)],a,!0);if(null!=l&&l.length>0&&2*h.length>=l.length){var c={x:[],y:[],temp:[],edges:l,ids:[]};if(n.enableLayoutRouting)for(var d=0;d<l.length;d++){var p=l[parseInt(d.toString(),10)];this.setDictionary(this.edgeMapper,void 0,c,p.id),this.resetEdge(p)}c.source=i[parseInt(r.toString(),10)];for(var u=0;u<l.length;u++)c.ids.push(l[parseInt(u.toString(),10)].id);c.source=i[parseInt(r.toString(),10)],i[parseInt(r.toString(),10)].connectsAsSource||(i[parseInt(r.toString(),10)].connectsAsSource=[]),i[parseInt(r.toString(),10)].connectsAsSource.indexOf(c)<0&&i[parseInt(r.toString(),10)].connectsAsSource.push(c)}}}i[parseInt(r.toString(),10)].temp[0]=0}},t.prototype.fixRanks=function(){var t=[];this.ranks=[];for(var e=0;e<this.maxRank+1;e++)t[parseInt(e.toString(),10)]=[],this.ranks[parseInt(e.toString(),10)]=t[parseInt(e.toString(),10)];var i=null;if(null!=this.roots){var n=this.roots;i=[];for(e=0;e<n.length;e++){var r=n[parseInt(e.toString(),10)],o=this.getDictionary(this.vertexMapper,r);i[parseInt(e.toString(),10)]=o}}this.visit("updateMinMaxRank",i,!1,null,{seenNodes:null,unseenNodes:null,rankList:t})},t.prototype.updateMinMaxRank=function(t,e,i){var n=i.parent,r=i.root,o=i.edge,s=i.rankList;if(r.maxRank||0===r.maxRank||(r.maxRank=-1),r.minRank||0===r.minRank||(r.minRank=-1),0===e&&r.maxRank<0&&r.minRank<0&&(s[r.temp[0]].push(r),r.maxRank=r.temp[0],r.minRank=r.temp[0],r.temp[0]=s[r.maxRank].length-1),null!=n&&null!=o){if(n.maxRank-r.maxRank>1){o.maxRank=n.maxRank,o.minRank=r.maxRank,o.temp=[],o.x=[],o.y=[];for(var a=o.minRank+1;a<o.maxRank;a++)s[parseInt(a.toString(),10)].push(o),this.hierarchicalUtil.setTempVariable(o,a,s[parseInt(a.toString(),10)].length-1)}}},t.prototype.setDictionary=function(t,e,i,n){if(n){o=t.map[""+n];return t.map[""+n]=i,o}var r=e.name,o=t.map[""+r];return t.map[""+r]=i,o},t.prototype.setDictionaryForSorter=function(t,e,i,n){var r=e.id,o=t.map[""+r];return t.map[""+r]=i,o},t.prototype.getDictionary=function(t,e){this.multiObjectIdentityCounter||0===this.multiObjectIdentityCounter||(this.multiObjectIdentityCounter=0);var i=e.name;return i?t.map[""+i]:e.layoutObjectId?t.map[e.layoutObjectId]:(e.layoutObjectId="graphHierarchyNode#"+this.multiObjectIdentityCounter++,e.layoutObjectId)},t.prototype.getDictionaryForSorter=function(t,e){this.multiObjectIdentityCounter||0===this.multiObjectIdentityCounter||(this.multiObjectIdentityCounter=0);var i=e.id;return i?t.map[""+i]:e.layoutObjectId?t.map[e.layoutObjectId]:(e.layoutObjectId="graphHierarchyNode#"+this.multiObjectIdentityCounter++,e.layoutObjectId)},t.prototype.getDictionaryValues=function(t){for(var e=[],i=0,n=Object.keys(t.map);i<n.length;i++){var r=n[i];e.push(t.map[""+r])}return e},t.prototype.visit=function(t,e,i,n,r){if(null!=e){for(var o=0;o<e.length;o++){var s=e[parseInt(o.toString(),10)];null!=s&&(null==n&&(n=new Object),r.parent=null,r.root=s,r.edge=null,i?(s.hashCode=[],s.hashCode[0]=this.dfsCount,s.hashCode[1]=o,this.extendedDfs(t,n,o,0,r)):this.depthFirstSearch(t,n,0,r))}this.dfsCount++}},t.prototype.depthFirstSearch=function(t,e,i,n){var r=n.root;if(null!=r){var o=r.id;if(null==e[""+o]){e[""+o]=r,this.updateConnectionRank(t,i,0,n);for(var s=r.connectsAsSource.slice(),a=0;a<s.length;a++){var l=s[parseInt(a.toString(),10)],h=l.target;n.parent=r,n.root=h,n.edge=l,this.depthFirstSearch(t,e,i+1,n)}}else this.updateConnectionRank(t,i,1,n)}},t.prototype.updateConnectionRank=function(t,e,i,n){var r=n.parent,o=n.root,s=n.edge;if("removeParentConnection"===t||"removeNodeConnection"===t){var a="removeNodeConnection"===t;this.removeConnectionEdge(r,o,s,e,n,a)}"updateMinMaxRank"===t&&this.updateMinMaxRank(e,i,n)},t.prototype.removeConnectionEdge=function(t,e,i,n,r,o){var s=r.seenNodes,a=r.unseenNodes;this.hierarchicalUtil.isAncestor(e,t)&&(this.hierarchicalUtil.invert(i,0),this.hierarchicalUtil.remove(i,t.connectsAsSource),o?(e.connectsAsSource.push(i),t.connectsAsTarget.push(i),this.hierarchicalUtil.remove(i,e.connectsAsTarget)):(t.connectsAsTarget.push(i),this.hierarchicalUtil.remove(i,e.connectsAsTarget),e.connectsAsSource.push(i))),s[e.id]=e,delete a[e.id]},t.prototype.extendedDfs=function(t,e,i,n,r){var o=r.parent,s=r.root;r.edge;if(null!=s){if(null!=o&&(null==s.hashCode||s.hashCode[0]!==o.hashCode[0])){var a=o.hashCode.length+1;s.hashCode=o.hashCode.slice(),s.hashCode[a-1]=i}var l=s.id;if(null==e[""+l]){e[""+l]=s,this.updateConnectionRank(t,n,0,r);for(var h=s.connectsAsSource.slice(),c=0;c<h.length;c++){var d=h[parseInt(c.toString(),10)],p=d.target;r.parent=s,r.root=p,r.edge=d,this.extendedDfs(t,e,c,n+1,r)}}else this.updateConnectionRank(t,n,1,r)}},t.prototype.clone=function(t,e,i){if(i=null!=i&&i,null!=t&&"function"==typeof t.constructor){for(var n=t.constructor(),r=0,o=Object.keys(t);r<o.length;r++){var s=o[r];"layoutObjectId"!==s&&(null==e||e.indexOf(s)<0)&&(i||"object"!=typeof t[""+s])&&(n[""+s]=t[""+s])}return n}return null},t}(),RO=function(){function t(){}return t.prototype.calculateCrossings=function(t){for(var e=t.ranks.length,i=0,n=1;n<e;n++)i+=this.calculateRankCrossing(n,t);return i},t.prototype.getTempVariable=function(t,e){return t?this.isVertex(t)?t.temp[0]:t.temp[e-t.minRank-1]:0},t.prototype.calculateRankCrossing=function(t,e){for(var i=0,n=e.ranks[parseInt(t.toString(),10)],r=e.ranks[t-1],o=[],s=0;s<n.length;s++){for(var a=n[parseInt(s.toString(),10)],l=this.getTempVariable(a,t),h=this.getConnectedCellsOnLayer(a,t,!0),c=[],d=0;d<h.length;d++){var p=h[parseInt(d.toString(),10)],u=this.getTempVariable(p,t-1);c.push(u)}c.sort(function(t,e){return t-e}),o[parseInt(l.toString(),10)]=c}var g=[];for(s=0;s<o.length;s++)g=g.concat(o[parseInt(s.toString(),10)]);for(var m=1;m<r.length;)m<<=1;var f=2*m-1;m-=1;var v=[];for(s=0;s<f;++s)v[parseInt(s.toString(),10)]=0;for(s=0;s<g.length;s++){var y=g[parseInt(s.toString(),10)]+m;for(++v[parseInt(y.toString(),10)];y>0;)y%2&&(i+=v[y+1]),y=y-1>>1,++v[parseInt(y.toString(),10)]}return i},t.prototype.execute=function(t){this.nestedBestRanks=[];for(var e=0;e<t.ranks.length;e++)this.nestedBestRanks[parseInt(e.toString(),10)]=t.ranks[parseInt(e.toString(),10)].slice();var i=0,n=this.calculateCrossings(t);for(e=0;e<24&&i<2;e++){this.weightedMedian(e,t);var r=this.calculateCrossings(t);if(r<n){n=r,i=0;for(var o=0;o<this.nestedBestRanks.length;o++)for(var s=t.ranks[parseInt(o.toString(),10)],a=0;a<s.length;a++){var l=s[parseInt(a.toString(),10)],h=this.nestedBestRanks[parseInt(o.toString(),10)][l.temp[0]],c=!0;l.edges&&h&&!h.edges&&(c=!1),h&&c&&(this.nestedBestRanks[parseInt(o.toString(),10)][l.temp[0]]=l)}}else{i++;for(o=0;o<this.nestedBestRanks.length;o++)for(s=t.ranks[parseInt(o.toString(),10)],a=0;a<s.length;a++){l=s[parseInt(a.toString(),10)];this.setTempVariable(l,o,a)}}if(0===n)break}var d=[],p=[];for(e=0;e<t.maxRank+1;e++)p[parseInt(e.toString(),10)]=[],d[parseInt(e.toString(),10)]=p[parseInt(e.toString(),10)];for(e=0;e<this.nestedBestRanks.length;e++)for(o=0;o<this.nestedBestRanks[parseInt(e.toString(),10)].length;o++)p[parseInt(e.toString(),10)].push(this.nestedBestRanks[parseInt(e.toString(),10)][parseInt(o.toString(),10)]);t.ranks=d},t.prototype.isVertex=function(t){return!(!t||!t.cell||!t.cell.inEdges&&!t.cell.outEdges)},t.prototype.weightedMedian=function(t,e){var i=t%2==0;if(i)for(var n=e.maxRank-1;n>=0;n--)this.medianRank(n,i);else for(n=1;n<e.maxRank;n++)this.medianRank(n,i)},t.prototype.getConnectedCellsOnLayer=function(t,e,i){void 0===i&&(i=!1);var n="nextLayerConnectedCells",r="connectsAsTarget";if(i&&(n="previousLayerConnectedCells",r="connectsAsSource"),t){if(this.isVertex(t)){if(null==t[""+n]){t[""+n]=[],t[""+n][0]=[];for(var o=0;o<t[""+r].length;o++){var s=t[""+r][parseInt(o.toString(),10)];void 0===s.maxRank&&(s.maxRank=-1),-1===s.maxRank||(i?s.minRank===e-1:s.maxRank===e+1)?t[""+n][0].push(i?s.target:s.source):t[""+n][0].push(s)}}return t[""+n][0]}if(null==t[""+n]){t[""+n]=[];for(o=0;o<t.temp.length;o++)t[""+n][parseInt(o.toString(),10)]=[],o===(i?0:t.temp.length-1)?t[""+n][parseInt(o.toString(),10)].push(i?t.target:t.source):t[""+n][parseInt(o.toString(),10)].push(t)}return t[""+n][e-t.minRank-1]}return null},t.prototype.medianValue=function(t,e){for(var i=[],n=0,r=0;r<t.length;r++){var o=t[parseInt(r.toString(),10)];i[n++]=this.getTempVariable(o,e)}if(i.sort(function(t,e){return t-e}),n%2==1)return i[Math.floor(n/2)];if(2===n)return(i[0]+i[1])/2;var s=n/2,a=i[s-1]-i[0],l=i[n-1]-i[parseInt(s.toString(),10)];return(i[s-1]*l+i[parseInt(s.toString(),10)]*a)/(a+l)},t.prototype.setTempVariable=function(t,e,i){t&&(t.temp[0]=i)},t.prototype.medianRank=function(t,e){for(var i=this.nestedBestRanks[parseInt(t.toString(),10)].length,n=[],r=[],o=0;o<i;o++){var s=this.nestedBestRanks[parseInt(t.toString(),10)][parseInt(o.toString(),10)],a={medianValue:0};a.cell=s;var l=void 0;l=e?this.getConnectedCellsOnLayer(s,t):this.getConnectedCellsOnLayer(s,t,!0);var h=void 0;h=e?t+1:t-1,null!=l&&0!==l.length?(a.medianValue=this.medianValue(l,h),n.push(a)):r[this.getTempVariable(s,t)]=!0}n.sort(this.compare);for(o=0;o<i;o++)if(null==r[parseInt(o.toString(),10)]&&n.length>0){s=n.shift().cell;this.setTempVariable(s,t,o)}},t.prototype.compare=function(t,e){if(null!=t&&null!=e){if(e.medianValue>t.medianValue)return-1;if(e.medianValue<t.medianValue)return 1}return 0},t}(),BO=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),HO=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},UO=function(t){var e=t;return e.sourcePoint||e.targetPoint||e.sourceID||e.targetID||e.sourcePortID||e.targetPortID||e.sourceDecorator||e.targetDecorator?ES:(t.shape&&(t.shape instanceof lw||t.shape.type),Pw)},VO=function(t){function e(e,i,n,r){return t.call(this,e,i,n,r)||this}return BO(e,t),HO([W("")],e.prototype,"id",void 0),HO([W()],e.prototype,"height",void 0),HO([W(!0)],e.prototype,"expanded",void 0),HO([W("")],e.prototype,"iconCss",void 0),HO([W("")],e.prototype,"title",void 0),HO([G(UO)],e.prototype,"symbols",void 0),e}(Rp),_O=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return BO(e,t),HO([W()],e.prototype,"width",void 0),HO([W()],e.prototype,"height",void 0),e}(Rp),FO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return BO(e,t),HO([W()],e.prototype,"width",void 0),HO([W()],e.prototype,"height",void 0),HO([Q({},Gu)],e.prototype,"offset",void 0),e}(Rp),YO=function(t){function e(e,i){var n=t.call(this,e,i)||this;n.symbolTable={},n.childTable={},n.info="info",n.oldObject=null,n.laneTable={},n.isExpand=!1,n.isExpandMode=!1,n.isMethod=!1,n.paletteid=88123,n.checkOnRender=!1,n.helper=function(t){var e,i=n.selectedSymbol&&n.selectedSymbol.id||t.sender.target.id.split("_container")[0],r=n.symbolTable[""+i];return r&&n.selectedSymbol&&(n.selectedSymbols=n.selectedSymbol.id===r.id?r:n.selectedSymbol,(e=n.getSymbolPreview(n.selectedSymbols,t.sender,n.element)).setAttribute("paletteId",n.element.id)),e};for(var r,o,s=0;n&&n.palettes&&s<n.palettes.length;s++)for(var a=0;a<n.palettes[parseInt(s.toString(),10)].symbols.length;a++)r=n.palettes[parseInt(s.toString(),10)].symbols[parseInt(a.toString(),10)],o=e.palettes[parseInt(s.toString(),10)].symbols[parseInt(a.toString(),10)],r&&"UmlActivity"===r.shape.type&&wo(o,r),(n.nodeDefaults||n.connectorDefaults)&&No(r,o,r instanceof Pw?n.nodeDefaults:n.connectorDefaults);return n}return BO(e,t),e.prototype.onPropertyChanged=function(t,e){for(var i=!1,n=0,r=Object.keys(t);n<r.length;n++){switch(r[n]){case"width":this.element.style.width=this.width.toString();break;case"height":this.element.style.height=this.height.toString();break;case"symbolPreview":break;case"symbolWidth":case"symbolHeight":case"getSymbolInfo":i=!this.isReact;break;case"enableSearch":if(t.enableSearch&&!f())this.createTextbox();else{var o=document.getElementById(this.element.id+"_search");o&&o.parentNode.removeChild(o)}break;case"palettes":for(var s=0,a=Object.keys(t.palettes);s<a.length;s++){var l=a[s],h=Number(l);if(f()||this.accordionElement.items[parseInt(h.toString(),10)]||(this.accordionElement.items[parseInt(h.toString(),10)]={header:t.palettes[parseInt(h.toString(),10)].title||"",expanded:t.palettes[parseInt(h.toString(),10)].expanded,iconCss:t.palettes[parseInt(h.toString(),10)].iconCss||""}),t.palettes[parseInt(h.toString(),10)].height){document.getElementById(this.palettes[parseInt(h.toString(),10)].id+"_content").style.height=t.palettes[parseInt(h.toString(),10)].height+"px"}void 0!==t.palettes[parseInt(h.toString(),10)].iconCss&&(f()||(this.accordionElement.items[parseInt(h.toString(),10)].iconCss=t.palettes[parseInt(h.toString(),10)].iconCss||"",i=!0)),void 0===t.palettes[parseInt(h.toString(),10)].expanded||f()||(this.palettes[parseInt(h.toString(),10)].isInteraction?this.palettes[parseInt(h.toString(),10)].isInteraction=!1:(this.accordionElement.items[parseInt(h.toString(),10)].expanded=t.palettes[parseInt(h.toString(),10)].expanded,this.isExpand=!0),this.isExpandMode||this.isMethod||this.isExpand||(this.isExpand=!0)),f()&&null!==t.palettes[parseInt(h.toString(),10)].symbols&&(i=!0),f()&&null===t.palettes[parseInt(h.toString(),10)].symbols&&this.updateBlazorProperties(t)}break;case"enableAnimation":f()||(this.enableAnimation?this.accordionElement.animation={expand:{duration:400},collapse:{duration:400}}:this.accordionElement.animation={expand:{duration:0},collapse:{duration:0}});break;case"expandMode":f()||(this.accordionElement.expandMode=this.expandMode,i=!0,this.isExpandMode=!0);break;case"allowDrag":this.allowDrag=t.allowDrag,this.allowDrag?(this.initDraggable(),this.draggable.helper=this.helper):this.draggable.helper=function(){return null}}}if(i&&this.refreshPalettes(),this.isExpand&&!i){this.refresh(),this.isExpand=!1;for(var c=0;c<this.palettes.length;c++){var d=this.palettes[parseInt(c.toString(),10)].id;window[""+d]&&window[""+d].length>1&&(window[""+d][1].parentNode.removeChild(window[""+d][1]),window[""+d][1]=null)}}this.isMethod=!1},e.prototype.updateBlazorProperties=function(t){if(window&&window.Blazor){var e={methodName:"UpdateBlazorProperties",paletteobj:{palette:t.palettes}};window.sfBlazor.updateBlazorProperties(e,this)}},e.prototype.getPersistData=function(){return this.addOnPersist(["loaded"])},e.prototype.preRender=function(){var t=this;if(this.l10n=new uu(this.getModuleName(),this.defaultLocale(),this.locale),""===this.element.id){var e=document.getElementsByClassName("e-symbolpalette").length;this.element.id="symbolpalette_"+this.paletteid+"_"+e}if(this.element.style.overflow="auto",this.element.style.height=this.height.toString(),this.element.style.width=this.width.toString(),this.enableSearch&&!f()&&this.createTextbox(),!f()){var i=Ks("div",{id:this.element.id+"_container"});this.accordionElement=new ZM({expandMode:this.expandMode}),this.enableAnimation||(this.accordionElement.animation={expand:{duration:0},collapse:{duration:0}}),this.accordionElement.created=function(){t.checkOnRender=!0},this.accordionElement.expanded=function(e){var i=t.accordionElement.items.indexOf(e.item),n=t.allowServerDataBinding;t.allowServerDataBinding=!1,t.palettes[parseInt(i.toString(),10)].expanded=e.isExpanded,t.palettes[parseInt(i.toString(),10)].isInteraction=!0,t.allowServerDataBinding=n},this.accordionElement.expanding=function(e){if(t.checkOnRender){var i={element:e.element,content:e.content,index:e.index,cancel:!1,isExpanded:e.isExpanded,palette:t.palettes[e.index]};t.trigger("paletteExpanding",i),e.cancel=i.cancel}},this.element.appendChild(i)}window.measureElement&&(window.measureElement=null),la(),this.unWireEvents(),this.wireEvents()},e.prototype.defaultLocale=function(){return{SearchShapes:"Search Shapes"}},e.prototype.render=function(){this.diagramRenderer=new Ww(this.element.id,new Yw,!1),this.svgRenderer=new Ww(this.element.id,new Yw,!0),this.updatePalettes(),f()||this.accordionElement.appendTo("#"+this.element.id+"_container"),this.renderComplete(),f()&&this.element.classList.remove("e-symbolpalette-hidden")},e.prototype.getModuleName=function(){return"SymbolPalette"},e.prototype.requiredModules=function(){var t=[];return t.push({member:"Bpmn",args:[]}),t},e.prototype.destroy=function(){if(this.allowDrag){this.draggable.destroy(),this.unWireEvents(),this.notify("destroy",{}),t.prototype.destroy.call(this);var e=document.getElementById(this.element.id+"_container");if(e){this.element.removeChild(e);var i="measureElement";if(window[""+i]){window[""+i].usageCount-=1;var n="measureElementCount";window[""+n]--,0===window[""+n]&&(window[""+i].parentNode.removeChild(window[""+i]),window[""+i]=null)}}(e=document.getElementById(this.element.id+"_search"))&&e.parentNode.removeChild(e),this.element.classList.remove("e-symbolpalette")}},e.prototype.addPalettes=function(t){for(var e,i=0;i<t.length;i++){var n=this.allowServerDataBinding;this.isProtectedOnChange=!0,this.allowServerDataBinding=!1,e=new VO(this,"palettes",t[parseInt(i.toString(),10)],!0),this.palettes.push(e),this.initSymbols(e),this.allowServerDataBinding=n,this.isProtectedOnChange=!1,this.renderPalette(e)}this.bulkChanges={},f()||this.accordionElement.refresh()},e.prototype.removePalette=function(t){for(var e=0;e<this.palettes.length;e++)if(this.palettes[parseInt(e.toString(),10)].id===t){this.palettes.splice(e,1),f()||this.accordionElement.items.splice(e,1);break}},e.prototype.removePalettes=function(t){var e=this.allowServerDataBinding;this.allowServerDataBinding=!1;for(var i=0;i<t.length;i++)this.removePalette(t[parseInt(i.toString(),10)]);f()?this.updatePalettes():this.accordionElement.refresh(),this.allowServerDataBinding=e},e.prototype.initSymbols=function(t){for(var e=[],i=0,n=0,r=0,o=t.symbols;r<o.length;r++){if("SwimLane"===(x=o[r]).shape.type){var s=x,a=x.shape,l="Horizontal"===a.orientation;if(a.isLane){i=l?this.symbolHeight-this.symbolHeight/2:this.symbolHeight-this.symbolHeight/4,n=l?this.symbolWidth-this.symbolWidth/4:this.symbolWidth-this.symbolWidth/2,this.laneTable[x.id]={height:i,width:n};var h=a.lanes[0].header,c=a.lanes[0].style,d=h.style,p={id:"header"+da(),shape:{type:"Basic",shape:"Rectangle"},width:l?h.width:s.width,height:l?s.height:h.height,style:d,annotations:[{content:h.annotation.content}]};p.offsetX=p.width/2,p.offsetY=p.height/2,this.addPaletteItem(t.id,p);var u={id:"lane"+da(),shape:{type:"Basic",shape:"Rectangle"},width:l?s.width-h.width:s.width,height:l?s.height:s.height-h.height,style:c};u.offsetX=l?p.width+u.width/2:u.width/2,u.offsetY=l?u.height/2:p.height+u.height/2,this.addPaletteItem(t.id,u),s.children=[p.id,u.id]}else a.isPhase&&(i=s.height?s.height:this.symbolHeight,n=s.width?s.width:this.symbolWidth,x.shape.type="Path",x.shape.data=l?"M0,0 L"+n+",0":"M0,0 L0,"+n)}if(x instanceof Pw){var g=Oa(this.getNodeDefaults);g&&g(x,this)}else if(x instanceof ES){var m=Oa(this.getConnectorDefaults);m&&m(x,this)}this.symbolTable[x.id]=x,x instanceof Pw&&x.children&&e.push(x)}for(var f=0;f<e.length;f++)for(var v=void 0,y=0;y<e[parseInt(f.toString(),10)].children.length;y++)(v=this.symbolTable[e[parseInt(f.toString(),10)].children[parseInt(y.toString(),10)]])&&(this.childTable[v.id]=v,v.parentId=e[parseInt(f.toString(),10)].id);for(var b=0,S=t.symbols;b<S.length;b++){(x=S[b])instanceof Pw&&x.children||this.prepareSymbol(x)}for(var w=0,I=e;w<I.length;w++){var x=I[w];this.prepareSymbol(x)}},e.prototype.renderPalette=function(t){var e=f()?"overflow:auto;":"display:none;overflow:auto;";t.height&&(e+="height:"+t.height+"px");var i,n=document.getElementById(t.id);if(f()&&null!=n?(i=Ks("div",{id:t.id+"_content",style:e,class:"e-remove-palette"}),n.appendChild(i)):(i=Ks("div",{id:t.id,style:e,class:"e-remove-palette"}),this.element.appendChild(i)),!f()){var r={header:t.title,expanded:t.expanded,content:"#"+t.id,iconCss:t.iconCss};this.accordionElement.items.push(r)}this.renderSymbols(t,i)},e.prototype.addPaletteItem=function(t,e,i){e=fa(e);for(var n=0;n<this.palettes.length;n++){var r=this.palettes[parseInt(n.toString(),10)];if(-1!==r.id.indexOf(t)){for(var o=[void 0,r,"symbols",{},!0],s=new(Function.prototype.bind.apply(UO(e),o)),a=0;a<Object.keys(e).length;a++){var l=this.allowServerDataBinding;this.allowServerDataBinding=!1,s[Object.keys(e)[parseInt(a.toString(),10)]]=e[Object.keys(e)[parseInt(a.toString(),10)]],this.allowServerDataBinding=l}No(s,e,s instanceof Pw?this.nodeDefaults:this.connectorDefaults),r.symbols.push(s);var h=this.allowServerDataBinding;if(this.allowServerDataBinding=!1,this.prepareSymbol(s),this.allowServerDataBinding=h,this.symbolTable[s.id]=s,i)this.childTable[s.id]=s;else{var c=void 0;(c=f()?document.getElementById(r.id+"_content"):document.getElementById(r.id))&&c.appendChild(this.getSymbolContainer(s,c))}break}}},e.prototype.removePaletteItem=function(t,e){for(var i,n=0;n<this.palettes.length;n++){var r=this.palettes[parseInt(n.toString(),10)];if(-1!==r.id.indexOf(t))for(var o=0,s=r.symbols;o<s.length;o++){var a=s[o];if(-1!==a.id.indexOf(e)){var l=r.symbols.indexOf(a);if(r.symbols.splice(l,1),a.children)for(var h=a.children,c=0;c<h.length;c++)delete this.symbolTable[h[parseInt(c.toString(),10)]];delete this.symbolTable[a.id];var d=document.getElementById(a.id+"_container");d.parentNode.removeChild(d),i=!0;break}}if(i)break}},e.prototype.prepareSymbol=function(t){var e,i,n,r,o,s=new ew,a=t,l=new em,h=t instanceof Pw?t.initContainer():null;h&&!h.children&&(h.children=[]);var c=Oa(this.getSymbolTemplate);if(c&&(o=c(t)),o||(a.children?o=this.getContainer(a,h):(o=t.init(this),t instanceof Pw&&t.parentId&&h.children.push(o))),!t.parentId){var d={width:this.symbolWidth,height:this.symbolHeight},p=Oa(this.getSymbolInfo);if(p?d=p(t):f()&&(d=this.getBlazorSymbolInfo(t,d)),d=d||this.symbolInfo||{},t.shape&&t.shape.isPhase&&(d.width=d.width||this.symbolWidth,d.height=d.height||this.symbolHeight),o.relativeMode="Object",o.horizontalAlignment=o.verticalAlignment="Center",l.style.strokeColor=l.style.fill="none",l.children=[o],o.measure(new Qu),o.arrange(o.desiredSize),e=d.width=d.width||(void 0!==a.width?o.actualSize.width:void 0)||this.symbolWidth,n=d.height=d.height||(void 0!==a.height?o.actualSize.height:void 0)||this.symbolHeight,void 0!==e&&void 0!==n){var u=e,g=n,m=!!t.shape.isPhase;void 0!==this.symbolWidth?u=this.symbolWidth-this.symbolMargin.left-this.symbolMargin.right:e+=a.style.strokeWidth,void 0!==this.symbolHeight?g=this.symbolHeight-this.symbolMargin.top-this.symbolMargin.bottom:n+=a.style.strokeWidth,d.description&&""!==d.description.text&&(g-=20),i=u/(!m&&o.width||e),r=g/(!m&&o.height||n),d.fit&&(i=u/d.width,r=g/d.height),e=u,n=g,i=r=Math.min(i,r),l.width=e,l.height=n,o.width=d.width,o.height=d.height,this.scaleSymbol(t,l,i,r,e,n)}else{var v=void 0;t instanceof ES&&(v=ze(t)),o.width=t.width||v?v.width:o.actualSize.width,o.height=t.height||v?v.height:o.actualSize.height}t.wrapper=s,s.children=[l],o.pivot=s.pivot={x:0,y:0},s.id=o.id+"_symbol",s.style.fill=s.style.strokeColor="transparent",t instanceof Pw?(s.offsetX=t.style.strokeWidth/2,s.offsetY=t.style.strokeWidth/2):(s.offsetX=.5,s.offsetY=.5),this.getSymbolDescription(d,e,s),s.measure(new Qu),s.arrange(s.desiredSize),d.width=d.width||o.actualSize.width,d.height=d.height||o.actualSize.height,t[this.info]=d}t.parentId&&(h.measure(new Qu(a.width,a.height)),h.arrange(h.desiredSize))},e.prototype.getBlazorSymbolInfo=function(t,e){var i=t.symbolInfo;return i&&(e.description=i.description||this.symbolInfo.description,e.fit=i.fit||this.symbolInfo.fit,e.height=i.height||this.symbolInfo.height,e.width=i.width||this.symbolInfo.width,e.tooltip=i.tooltip||this.symbolInfo.tooltip,e.template=i.template||this.symbolInfo.template),e},e.prototype.getContainer=function(t,e){e.measureChildren=!1;var i,n=t.children;e.children=[];for(var r=0;r<n.length;r++)this.symbolTable[n[parseInt(r.toString(),10)]]&&e.children.push(this.symbolTable[n[parseInt(r.toString(),10)]].wrapper);return e.measure(new Qu(t.width,t.height)),e.arrange(e.desiredSize),0===e.bounds.x&&0===e.bounds.y||(fs(t,(i=e.bounds).x,i.y,this.symbolTable,!1,this),e=this.getContainer(t,e)),e},e.prototype.getSymbolDescription=function(t,e,i){if(t&&t.description&&t.description.text){var n=new Jg;t.description.overflow=t.description.overflow||"Ellipsis",t.description.wrap=t.description.wrap||"WrapWithOverflow",n.id=i.id+"_text",n.content=t.description.text,n.width=e,n.height=20,n.style.strokeColor="transparent",n.style.color=t.description.color||"black",n.style.fill=t.description.fill||"transparent",n.style.fontFamily=t.description.fontFamily||"Arial",n.style.fontSize=t.description.fontSize||12,n.style.bold=t.description.bold||!1,n.style.italic=t.description.italic||!1,n.style.textDecoration=t.description.textDecoration||"None",n.style.strokeWidth=0,n.style.textWrapping=t.description.wrap,n.style.textOverflow=t.description.overflow,n.margin={left:0,right:0,top:t.description.margin?t.description.margin.top:0,bottom:t.description.margin?t.description.margin.bottom:5},i.children.push(n)}},e.prototype.renderSymbols=function(t,e){for(var i=0,n=t.symbols;i<n.length;i++){var r=n[i];r.parentId||this.getSymbolContainer(r,e)}},e.prototype.getSymbolPreview=function(t,e,i){this.allowServerDataBinding=!1;var n,r,o,s=t.wrapper.children[0].desiredSize.width+t.style.strokeWidth,a=t.wrapper.children[0].desiredSize.height+t.style.strokeWidth,l=t.wrapper.children[0].children[0],h=t.previewSize;if(t&&(h.width||h.height)||void 0!==this.symbolPreview.width||void 0!==this.symbolPreview.height){s=(h.width||this.symbolPreview.width||s)-t.style.strokeWidth,a=(h.height||this.symbolPreview.height||a)-t.style.strokeWidth,t instanceof ES&&(l.actualSize.width<=t.style.strokeWidth&&(l.actualSize.width=this.symbolWidth),l.actualSize.height<=t.style.strokeWidth&&(l.actualSize.height=this.symbolHeight)),r=s/l.actualSize.width,o=a/l.actualSize.height,r=o=Math.min(r,o);var c=l.actualSize.width*r,d=l.actualSize.height*o;t.wrapper.children[0].width=s,t.wrapper.children[0].height=a,this.measureAndArrangeSymbol(l,t instanceof Pw),this.scaleSymbol(t,t.wrapper.children[0],r,o,c,d,!0),s=c,a=d}var p={x:l.offsetX,y:l.offsetY};l.offsetX=l.offsetY=t.style.strokeWidth/2,l.pivot={x:0,y:0},this.measureAndArrangeSymbol(l,t instanceof Pw);var u,g=Ks("div",{draggable:"true",class:"e-dragclone",style:"pointer-events:none"});document.body.appendChild(g);var m="margin:5px;";if("Native"===t.shape.type){n=Js("svg",{id:t.id+"_preview",width:Math.ceil(s)+1,height:Math.ceil(a)+1});var f=Js("g",{id:t.id+"_g"});n.appendChild(f),g.appendChild(n),this.svgRenderer.renderElement(l,f,void 0,void 0,n)}else if("HTML"===t.shape.type)u=this.getHtmlSymbol(t,n,g,a,s,!0);else if(t.children&&t.children.length>0&&Co(t,"HTML",this.childTable))u=this.getGroupParent(t,n,g,t.wrapper.actualSize.height,t.wrapper.actualSize.width,!0);else{n=Fw.createCanvas(t.id+"_preview",2*(Math.ceil(s)+t.style.strokeWidth+1),2*(Math.ceil(a)+t.style.strokeWidth+1)),g.appendChild(n),"Basic"===t.shape.type||"Flow"===t.shape.type?m+="transform: scale(0.5) translate(-"+n.width/2+"px, -"+n.height/2+"px);":m+="transform:scale(0.5);",n.setAttribute("transform-origin","0 0");var v=2;t instanceof ES&&(v=1.9),n.getContext("2d").setTransform(v,0,0,v,0,0),this.diagramRenderer.renderElement(l,n,void 0)}return sa(u&&("HTML"===t.shape.type||t.children&&t.children.length>0)?u:n,m),l.offsetX=p.x,l.offsetY=p.y,this.allowServerDataBinding=!0,g},e.prototype.measureAndArrangeSymbol=function(t,e){t.children&&!e&&(t.children[0].transform=Ng.Self),t.measure(new Qu),t.arrange(t.desiredSize),t.children&&(t.children[0].transform=Ng.Parent)},e.prototype.updateSymbolSize=function(t,e,i){var n=t.wrapper.children[0].children[0],r=t.style.strokeWidth;n.width=(e||n.width)-(r+1),n.height=(i||n.height)-(r+1),t.wrapper.measure(new Qu),t.wrapper.arrange(t.wrapper.desiredSize)},e.prototype.getSymbolContainer=function(t,e,i){var n=this.symbolTable[t.id][this.info],r=this.getSymbolSize(t,n),o=r.width+1,s=r.height+1,a=Ks("div",{id:t.id+"_container",style:"width:"+o+"px;height:"+s+"px;float:left;overflow:hidden",title:n.tooltip?n.tooltip:t.id});e.appendChild(a);var l,h,c;if("Native"===t.shape.type)l=Js("svg",{id:t.id,width:Math.ceil(t.wrapper.actualSize.width)+1,height:Math.ceil(t.wrapper.actualSize.height)+1}),h=Js("g",{id:t.id+"_g"}),l.appendChild(h),a.appendChild(l),this.updateSymbolSize(t),this.svgRenderer.renderElement(t.wrapper,h,void 0,void 0,l);else if("HTML"===t.shape.type)c=this.getHtmlSymbol(t,l,a,t.wrapper.actualSize.height,t.wrapper.actualSize.width,!1);else if(t.children&&t.children.length>0&&Co(t,"HTML",this.childTable))c=this.getGroupParent(t,l,a,t.wrapper.actualSize.height,t.wrapper.actualSize.width,!1);else{l=Fw.createCanvas(t.id,Math.ceil(2*(t.wrapper.actualSize.width+t.style.strokeWidth))+1,Math.ceil(2*(t.wrapper.actualSize.height+t.style.strokeWidth))+1),a.appendChild(l);var d=2;t instanceof ES&&(d=1.9),l.getContext("2d").setTransform(d,0,0,d,0,0),this.diagramRenderer.renderElement(t.wrapper,h||l,void 0,void 0,void 0,void 0,!0,void 0,!0)}if(!i){var p=t.wrapper.actualSize.width+t.style.strokeWidth,u=t.wrapper.actualSize.height+t.style.strokeWidth,g="pointer-events:none;transform-origin:0 0;overflow:hidden;";return t.shape.isPhase?"Horizontal"===t.shape.orientation?g+="margin-left:"+Math.max(this.symbolMargin.left,(o-p)/2)+"px;margin-top:"+r.height/2+"px;":g+="margin-left:"+r.width/2+"px;margin-top:"+Math.max(this.symbolMargin.top,(s-u)/2)+"px;":g+="margin-left:"+Math.max(this.symbolMargin.left,(o-p)/2)+"px;margin-top:"+Math.max(this.symbolMargin.top,(s-u)/2)+"px;",l instanceof HTMLCanvasElement&&(g+="transform:scale(.5,.5);"),"HTML"===t.shape.type&&(g+="transform:scale(.5,.5);"),sa(c&&("HTML"===t.shape.type||t.children&&t.children.length>0)?c:l,g),a.classList.add("e-symbol-draggable"),a}return l},e.prototype.getGroupParent=function(t,e,i,n,r,o){var s=Ks("div",{id:t.id+(o?"_html_div_preview":"_html_div")}),a=Ks("div",{id:t.id+(o?"_htmlLayer_preview":"_htmlLayer"),style:"width:"+Math.ceil(r+1)+"px;height:"+Math.ceil(n+1)+"px;position:absolute",class:"e-html-layer"}),l=Ks("div",{id:t.id+(o?"_htmlLayer_div_preview":"_htmlLayer_div"),style:"width:"+Math.ceil(r+1)+"px;height:"+Math.ceil(n+1)+"px;position:absolute"});return a.appendChild(l),s.appendChild(a),e=Fw.createCanvas(o?t.id+"_preview":t.id,Math.ceil(r)+1,Math.ceil(n)+1),s.appendChild(e),i.appendChild(s),this.diagramRenderer.renderElement(t.wrapper.children[0].children[0],e,a),s},e.prototype.getHtmlSymbol=function(t,e,i,n,r,o){var s=Ks("div",{id:t.id+(o?"_html_div_preview":"_html_div")}),a=Ks("div",{id:t.id+(o?"_htmlLayer_preview":"_htmlLayer"),style:"width:"+Math.ceil(r+1)+"px;height:"+Math.ceil(n+1)+"px;position:absolute",class:"e-html-layer"}),l=Ks("div",{id:t.id+(o?"_htmlLayer_div_preview":"_htmlLayer_div"),style:"width:"+Math.ceil(r+1)+"px;height:"+Math.ceil(n+1)+"px;position:absolute"});return a.appendChild(l),s.appendChild(a),e=Fw.createCanvas(t.id,Math.ceil(2*(t.wrapper.actualSize.width+t.style.strokeWidth))+1,Math.ceil(2*(t.wrapper.actualSize.height+t.style.strokeWidth))+1),i.appendChild(e),e.getContext("2d").setTransform(2,0,0,2,0,0),s.appendChild(e),i.appendChild(s),o?this.diagramRenderer.renderElement(t.wrapper.children[0].children[0],e,a):this.diagramRenderer.renderElement(t.wrapper,e,a),s},e.prototype.getSymbolSize=function(t,e){var i=t.wrapper.actualSize.width,n=t.wrapper.actualSize.height;return this.symbolWidth||this.symbolHeight?(i=this.symbolWidth,n=Math.max(this.symbolHeight,n)):(i+=this.symbolMargin.left+this.symbolMargin.right+t.style.strokeWidth,n+=this.symbolMargin.top+this.symbolMargin.bottom+t.style.strokeWidth),new Qu(i,n)},e.prototype.getMousePosition=function(t){var e,i,n;if(-1!==t.type.indexOf("touch")){var r=(n=t).changedTouches[0].clientY,o=n.changedTouches[0].clientX;e=r-this.element.offsetTop,i=o-this.element.offsetLeft}else e=t.clientY-this.element.offsetTop,i=t.clientX-this.element.offsetLeft;return{x:i,y:e}},e.prototype.mouseMove=function(t,e){!this.highlightedSymbol||this.selectedSymbol&&this.selectedSymbol.id+"_container"===this.highlightedSymbol.id||(this.highlightedSymbol.classList.remove("e-symbol-hover"),this.highlightedSymbol.style.backgroundColor="",this.highlightedSymbol=null);var i=t.target.id.split("_container")[0];if(this.symbolTable[""+i]){var n=document.getElementById(i+"_container");n.classList.add("e-symbol-hover"),this.highlightedSymbol=n}t.preventDefault()},e.prototype.mouseUp=function(t){if(this.isMethod=!0,t&&t.target)if("iconSearch"===t.srcElement.id){var e=document.getElementById("iconSearch");e.classList.contains("e-clear-searchtext")&&(e.className="e-input-group-icon e-search e-icons",document.getElementById("textEnter").value="",f()&&document.getElementById(this.element.id+"_search_content").classList.add("e-symbolpalette-search-hidden"),this.searchPalette(""))}else{var i=t.target.id.split("_container")[0];if(i&&this.selectedSymbol){var n={oldValue:this.oldObject,newValue:i};this.trigger("paletteSelectionChange",n),this.oldObject=i,t.preventDefault()}else""!==this.oldObject&&(this.oldObject="")}},e.prototype.keyUp=function(t){var e=this;if(this.enableSearch){var i=this;document.getElementById("iconSearch").className="e-input-group-icon e-clear-searchtext e-icons",f()&&t.target instanceof HTMLInputElement&&(""===t.target.value?document.getElementById(this.element.id+"_search_content").classList.add("e-symbolpalette-search-hidden"):document.getElementById(this.element.id+"_search_content").classList.remove("e-symbolpalette-search-hidden")),!t||"Enter"!==t.key&&13!==t.keyCode?(this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){t.target instanceof HTMLInputElement&&(i.searchPalette(t.target.value),e.timer=null)},500)):t.target instanceof HTMLInputElement&&this.searchPalette(t.target.value)}},e.prototype.mouseDown=function(t){var e=t.target.id.split("_container")[0];if(this.selectedSymbol){var i=document.getElementById(this.selectedSymbol.id+"_container");e!==this.selectedSymbol.id&&i&&i.classList.remove("e-symbol-selected");(n=document.getElementById(this.selectedSymbol.id+"_container"))&&(n.style.backgroundColor=""),this.selectedSymbol=null}if(this.symbolTable[""+e]){var n;(n=document.getElementById(e+"_container")).classList.add("e-symbol-selected"),this.selectedSymbol=this.symbolTable[""+e],t.preventDefault()}},e.prototype.keyDown=function(t){if(t&&"Escape"===t.key){var e=this.draggable.helperElement;e&&e.parentNode&&(e.parentNode.removeChild(e),this.draggable.intDestroy())}},e.prototype.initDraggable=function(){this.allowDrag&&(this.draggable=new ou(this.element,{dragTarget:".e-symbol-draggable",helper:this.helper,dragStart:this.dragStart,preventDefault:!1,dragStop:this.dragStop,drag:function(t){var e=ta(t.target,"e-droppable");if(e&&e.classList.contains("e-diagram")){e.ej2_instances[0].droppable.over(t)}},cursorAt:{left:this.symbolPreview.offset.x,top:this.symbolPreview.offset.y}}))},e.prototype.dragStart=function(t){var e=this.helper[0];e&&e.setAttribute("paletteId",this.element.id),f()&&t.bindEvents(t.dragElement)},e.prototype.dragStop=function(t){ta(t.target,"e-diagram")||O(t.helper)},e.prototype.scaleSymbol=function(t,e,i,n,r,o,s){if(t instanceof ES){var a=t.wrapper;t.wrapper=e.children[0];for(var l=t.scale(i,n,r,o,e.children[0]),h=r/2-e.children[0].children[0].offsetX+l.x/2,c=o/2-e.children[0].children[0].offsetY+l.y/2,d=0,p=e.children[0].children;d<p.length;d++){var u=p[d];u.offsetX+=h,u.offsetY+=c,u.staticSize=!1}t.wrapper=a}else if("Bpmn"===t.shape.type&&this.bpmnModule){a=t.wrapper;t.wrapper=e,e.children[0].width=r,e.children[0].height=o,this.bpmnModule.updateBPMN({width:r,height:o},t,t,null),t.wrapper=a}else if(t.children){var g=t.children,m=0,f=0;if(!s)for(var v=void 0,y=void 0,b=0;b<g.length;b++)(y=e.children[0].children[parseInt(b.toString(),10)])&&(y.children[0].children&&this.measureChild(y),v=this.symbolTable[y.id],y.width=v.width,y.height=v.height,y.measure(new Qu),y.arrange(y.children[0].desiredSize));if(m=r/e.children[0].desiredSize.width,f=o/e.children[0].desiredSize.height,e.children[0].measure(new Qu),e.children[0].arrange(e.children[0].desiredSize),!s){var S=void 0;for(b=0;b<g.length;b++)(S=e.children[0].children[parseInt(b.toString(),10)])&&(S.children[0].children&&this.scaleChildren(S,m,f,t),this.scaleGroup(S,m,f,t))}if(s){var w=void 0,I=void 0;for(S=void 0,b=0;b<g.length;b++)w=r/t.wrapper.children[0].desiredSize.width,I=o/t.wrapper.children[0].desiredSize.height,(S=e.children[0].children[parseInt(b.toString(),10)])&&(S.children[0].children&&this.scaleChildren(S,w,I,t,!0),this.scaleGroup(S,w,I,t,!0));t.wrapper.children[0].measure(new Qu),t.wrapper.children[0].arrange(t.wrapper.children[0].desiredSize)}}else ms(e.children[0],i,n,e)},e.prototype.scaleChildren=function(t,e,i,n,r){for(var o,s=0;s<t.children.length;s++)(o=t.children[parseInt(s.toString(),10)]).children[0].children?this.scaleChildren(o,e,i,n,r):this.scaleGroup(o,e,i,n,r)},e.prototype.measureChild=function(t){for(var e,i,n=0;n<t.children.length;n++)(e=t.children[parseInt(n.toString(),10)]).children[0].children?this.measureChild(e):(i=this.symbolTable[e.id],e.width=i.width,e.height=i.height,e.measure(new Qu),e.arrange(e.children[0].desiredSize))},e.prototype.scaleGroup=function(t,e,i,n,r){t.width=t.width*e,t.height=t.height*i,t.offsetX=r?t.offsetX*e-n.style.strokeWidth:t.offsetX*e+n.style.strokeWidth/2,t.offsetY=r?t.offsetY*i-n.style.strokeWidth:t.offsetY*i+n.style.strokeWidth/2,t.measure(new Qu),t.arrange(t.children[0].desiredSize)},e.prototype.refreshPalettes=function(){f()||(this.accordionElement.items=[]),function(t,e){var i;for(i=e&&document.getElementById(e).classList.contains(t)?document.getElementById(e).getElementsByClassName(t):document.getElementsByClassName(t);i.length>0;)i[0].parentNode.removeChild(i[0])}("e-remove-palette",this.element.id),this.updatePalettes(),f()||this.accordionElement.dataBind()},e.prototype.updatePalettes=function(){for(var t=0;t<this.palettes.length;t++){var e=this.palettes[parseInt(t.toString(),10)];this.initSymbols(e),this.renderPalette(e)}},e.prototype.createTextbox=function(){var t=Ks("div",{id:this.element.id+"_search"});sa(t,"backgroundColor:white;height:30px"),t.className="e-input-group",this.element.appendChild(t);var e=Ks("input",{});e.placeholder=this.l10n.getConstant("SearchShapes"),e.id="textEnter",sa(e,"width:100%;height:auto"),e.className="e-input",t.appendChild(e);var i=Ks("span",{id:"iconSearch",className:"e-input-group-icon e-search e-icons"});t.appendChild(i)},e.prototype.getFilterSymbol=function(t){for(var e=[],i=0;i<t.length;i++)for(var n=0;n<this.ignoreSymbolsOnSearch.length;n++)this.ignoreSymbolsOnSearch[parseInt(n.toString(),10)]!==t[parseInt(i.toString(),10)].id&&e.push(t[0]);return e},e.prototype.searchPalette=function(t){var e,i=[],n=document.getElementById("SearchPalette");if(n)for(var r=n.children.length-1;r>=0;r--)n.removeChild(n.children[parseInt(r.toString(),10)]);for(var o=0;o<this.palettes.length;o++)for(var s=this.palettes[parseInt(o.toString(),10)],a=0;a<s.symbols.length;a++){var l=s.symbols[parseInt(a.toString(),10)];""!==t&&-1!==l.id.toLowerCase().indexOf(t.toLowerCase())&&i.push(l)}var h=Oa(this.filterSymbols);if(h&&(i=h(i)||[]),this.ignoreSymbolsOnSearch&&this.ignoreSymbolsOnSearch.length>0&&(i=this.getFilterSymbol(i)),n||f()||(n=e=this.createSearchPalette(e)),i.length>0)for(var c=0,d=i;c<d.length;c++){var p=d[c];""===p.parentId&&this.getSymbolContainer(p,n)}else if(""!==t){var u=Ks("div",{id:"EmptyDiv",style:"text-align:center;font-style:italic"});u.innerHTML="No Items To Display",n.appendChild(u)}else{if(document.getElementById("iconSearch").className="e-input-group-icon e-search e-icons",!f()){this.accordionElement.removeItem(0);var g=document.getElementById("SearchPalette");g&&g.remove()}}},e.prototype.createSearchPalette=function(t){t=Ks("div",{id:"SearchPalette",style:"display:none;overflow:auto;"}),this.element.appendChild(t);return this.accordionElement.addItem({header:"Search Results",expanded:!0,content:"#SearchPalette"},0),t},e.prototype.wireEvents=function(){var t=Np.touchStartEvent,e=Np.touchEndEvent,i=Np.touchMoveEvent;Ep.add(this.element,t,this.mouseDown,this),Ep.add(this.element,i,this.mouseMove,this),Ep.add(this.element,e,this.mouseUp,this),Ep.add(this.element,"keyup",this.keyUp,this),Ep.add(document,"keydown",this.keyDown,this),this.initDraggable()},e.prototype.unWireEvents=function(){var t=Np.touchStartEvent,e=Np.touchEndEvent,i=Np.touchMoveEvent;Ep.remove(this.element,t,this.mouseDown),Ep.remove(this.element,i,this.mouseMove),Ep.remove(this.element,e,this.mouseUp),Ep.remove(this.element,"keyup",this.keyUp),Ep.remove(document,"keydown",this.keyDown)},HO([W("S")],e.prototype,"accessKey",void 0),HO([W("100%")],e.prototype,"width",void 0),HO([W("100%")],e.prototype,"height",void 0),HO([q([],VO)],e.prototype,"palettes",void 0),HO([W()],e.prototype,"getSymbolInfo",void 0),HO([W({fit:!0})],e.prototype,"symbolInfo",void 0),HO([W()],e.prototype,"filterSymbols",void 0),HO([W()],e.prototype,"ignoreSymbolsOnSearch",void 0),HO([W()],e.prototype,"getSymbolTemplate",void 0),HO([W()],e.prototype,"symbolWidth",void 0),HO([W()],e.prototype,"symbolHeight",void 0),HO([Q({left:10,right:10,top:10,bottom:10},ng)],e.prototype,"symbolMargin",void 0),HO([W(!0)],e.prototype,"allowDrag",void 0),HO([Q({},FO)],e.prototype,"symbolPreview",void 0),HO([Q({},_O)],e.prototype,"symbolDragSize",void 0),HO([W(!1)],e.prototype,"enableSearch",void 0),HO([W(!0)],e.prototype,"enableAnimation",void 0),HO([W("Multiple")],e.prototype,"expandMode",void 0),HO([Z()],e.prototype,"paletteSelectionChange",void 0),HO([Z()],e.prototype,"paletteExpanding",void 0),HO([W()],e.prototype,"getNodeDefaults",void 0),HO([W()],e.prototype,"nodeDefaults",void 0),HO([W()],e.prototype,"getConnectorDefaults",void 0),HO([W()],e.prototype,"connectorDefaults",void 0),e}(Kp),WO=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),QO=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},XO=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.mode="Canvas",n.id="overview",n.actionName="",n.startPoint=null,n.currentPoint=null,n.prevPoint=null,n.scale=null,n.inAction=!1,n.viewPortRatio=1,n.horizontalOffset=0,n.verticalOffset=0,n.model={},n.event=!0,n.overviewid=88123,n.model={width:n.width,height:n.height},n}return WO(e,t),e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"sourceID":this.setParent(t.sourceID);break;case"width":case"height":this.renderCanvas(),this.setParent(this.sourceID)}}},e.prototype.getPersistData=function(){return this.addOnPersist(["loaded"])},e.prototype.preRender=function(){if(""===this.element.id){var t=document.getElementsByClassName("e-overview").length;this.element.id="overview_"+this.overviewid+"_"+t}this.id=this.element.id?this.element.id:this.id,this.element.style.background="transparent",this.unWireEvents(),this.wireEvents()},e.prototype.render=function(){this.diagramRenderer=new Ww(this.element.id,new Yw,!1),this.renderCanvas(),this.setParent(this.sourceID),this.renderComplete()},e.prototype.getSizeValue=function(t){return t.toString().indexOf("px")>0||t.toString().indexOf("%")>0?t.toString():t.toString()+"px"},e.prototype.renderCanvas=function(t){var e=document.getElementById(this.element.id+"_canvas");e||(e=Ks("div",{}),this.element.appendChild(e));aa(e,{id:this.element.id+"_canvas",class:"drawing",style:"position:relative; height:"+this.getSizeValue(this.model.height)+"; width:"+this.getSizeValue(this.model.width)+";style:-ms-touch-action: none;touch-action: none;"}),this.element.setAttribute("tabindex",String(0)),this.element.style.overflow="hidden",this.element.style.height=String(this.model.height),this.element.style.width=String(this.model.width),this.canvas=e},e.prototype.setParent=function(t){var e=document.getElementById(t);if(this.parent){var i=this.parent;this.parent=null,i.setOverview(null,this.element.id),this.removeDocument(this)}this.parent=this.getDiagram(e,"ej2_instances"),this.parent&&this.parent.setOverview(this)},e.prototype.getDiagram=function(t,e){for(var i,n=t[""+e].length,r=0;r<n;r++)if(ea(t[""+e][parseInt(r.toString(),10)].element,"e-diagram")){i=t[""+e][parseInt(r.toString(),10)];break}return i},e.prototype.unWireEvents=function(){var t=Np.touchStartEvent,e=Np.touchMoveEvent,i=Np.isPointer?"pointerleave":"mouseleave",n=Np.touchEndEvent;Ep.remove(this.element,t,this.mouseDown),Ep.remove(this.element,e,this.mouseMove),Ep.remove(this.element,n,this.mouseUp),Ep.remove(this.element,i,this.documentMouseUp),Ep.remove(window,"resize",this.windowResize);var r=document.getElementById(this.sourceID+"content");r&&Ep.remove(r,"scroll",this.scrolled)},e.prototype.wireEvents=function(){var t=Np.touchStartEvent,e=Np.touchEndEvent,i=Np.touchMoveEvent,n=Np.isPointer?"pointerleave":"mouseleave";Ep.add(this.element,t,this.mouseDown,this),Ep.add(this.element,i,this.mouseMove,this),Ep.add(this.element,e,this.mouseUp,this),Ep.add(this.element,n,this.documentMouseUp,this),Ep.add(window,"resize",this.windowResize,this);var r=document.getElementById(this.sourceID+"content");r&&Ep.add(r,"scroll",this.scrolled,this)},e.prototype.renderDocument=function(t){t.canvas=this.canvas;var e=document.getElementById(this.canvas.id+"_svg");e&&e.parentNode.removeChild(e);var i=Js("svg",{id:this.canvas.id+"_svg",version:"1.1",class:"overview_svg"});this.svg=i,t.svg=i,t.canvas.appendChild(i);var n=document.getElementById(this.element.id),r=n.clientWidth,o=n.clientHeight,s=n.getBoundingClientRect(),a=window.screenX<0?-1*window.screenX:window.screenX,l=window.screenY<0?-1*window.screenY:window.screenY;if(0===r){var h=Math.floor(window.innerWidth-a-Math.floor(s.left));r=h>0?h:Math.floor(window.innerWidth)}if(0===o){var c=Math.floor(window.innerHeight-l-Math.floor(s.top));o=c>0?c:Math.floor(window.innerHeight)}r>0&&(i.setAttribute("width",String(r)),this.model.height=o),o>0&&(i.setAttribute("height",String(o)),this.model.width=r),t.diagramLayerDiv||(t.diagramLayerDiv=Ks("div",{}),t.diagramLayer=Fw.createCanvas(this.element.id+"_diagramLayer",this.model.width,this.model.height),t.diagramLayer.setAttribute("style","position:absolute; left:0px;  top:0px "),t.diagramLayerDiv.appendChild(t.diagramLayer),t.canvas.appendChild(t.diagramLayerDiv));var d={id:this.element.id+"_diagramLayer_div",style:"width:"+this.model.width+"px; height:"+this.model.height+"px;position:absolute;top:0px;left:0px"};aa(t.diagramLayerDiv,d),this.renderHtmlLayer(t.canvas),this.renderNativeLayer(t.canvas,t),this.addOverviewRectPanel(t)},e.prototype.removeDocument=function(t){var e=document.getElementById(this.canvas.id+"_svg");this.canvas.removeChild(e);var i=document.getElementById(this.element.id+"_htmlLayer");this.canvas.removeChild(i);var n=document.getElementById(this.element.id+"_diagramLayer_div");this.canvas.removeChild(n),t.diagramLayerDiv=null,t.diagramLayer=null;window.domTable[this.id+"html_layer"]=null},e.prototype.renderHtmlLayer=function(t){var e=Ks("div",{id:this.element.id+"_htmlLayer",class:"e-html-layer",style:"pointer-events:none;position:absolute;top:0px;left:0px;"}),i=Ks("div",{id:this.element.id+"_htmlLayer_div",style:"position:absolute;top:0px;left:0px;"});return e.appendChild(i),t.appendChild(e),e},e.prototype.renderNativeLayer=function(t,e){if(!document.getElementById(this.element.id+"_nativeLayer_svg")){var i=this.parent.createSvg(this.element.id+"_nativeLayer_svg",this.model.width,this.model.height),n=Js("g",{id:this.element.id+"_nativeLayer"});i.appendChild(n),e.diagramLayerDiv.appendChild(i),oa(i,{class:"e-native-layer"})}},e.prototype.addOverviewRectPanel=function(t){var e=document.getElementById(this.canvas.id+"_overviewsvg");e&&e.parentNode.removeChild(e);e=Js("svg",{id:this.canvas.id+"_overviewsvg",class:"overviewsvg",version:"1.1",style:"position:absolute;left:0px;top:0px; aria-label:Specifies overview",width:this.model.width,height:this.model.height}),t.canvas.appendChild(e);var i=Js("g",{id:this.element.id+"_overviewlayer",style:"pointer-events:none"});e.appendChild(i);var n=Js("rect",{fill:"transparent",width:"100%",height:"100%",class:"overviewbackrect",id:this.canvas.id+"overviewbackrect"});n.setAttribute("style"," pointer-events: none; "),i.appendChild(n);var r=Js("g",{id:this.canvas.id+"overviewhandle",style:"pointer-events:all"});i.appendChild(r);var o=Js("rect",{id:this.canvas.id+"overviewrect",fill:"transparent"});r.appendChild(o),this.renderOverviewCorner("left",r),this.renderOverviewCorner("right",r),this.renderOverviewCorner("top",r),this.renderOverviewCorner("bottom",r),this.renderOverviewCorner("topleft",r),this.renderOverviewCorner("topright",r),this.renderOverviewCorner("bottomleft",r),this.renderOverviewCorner("bottomright",r)},e.prototype.renderOverviewCorner=function(t,e){this.svg;var i,n=Js(i="top"===t||"bottom"===t||"right"===t||"left"===t?"rect":"circle",{id:this.canvas.id+"visible"+t});e.appendChild(n);var r=Js(i,{id:this.canvas.id+t,class:"overviewresizer",fill:"transparent"});e.appendChild(r)},e.prototype.updateOverviewRectangle=function(){var t=this.currentPoint.x-this.prevPoint.x,e=this.currentPoint.y-this.prevPoint.y,i=new Qu;i.width=0,i.height=0;var n=0,r=0;switch(this.resizeDirection){case"left":i.width-=t,i.height-=t/this.viewPortRatio,n=t,r=t/this.viewPortRatio,r/=2;break;case"right":i.width+=t,i.height+=t/this.viewPortRatio,r=t/this.viewPortRatio,r/=-2;break;case"top":i.height-=e,i.width-=e*this.viewPortRatio,r=e,n=e*this.viewPortRatio,n/=2;break;case"bottom":i.height+=e,i.width+=e*this.viewPortRatio,n=e*this.viewPortRatio,n/=-2;break;case"topleft":Math.abs(e)>Math.abs(t)?t=e*this.viewPortRatio:e=t/this.viewPortRatio,i.width-=t,i.height-=e,n=t,r=e;break;case"topright":Math.abs(e)>Math.abs(t)?t=-e*this.viewPortRatio:e=-t/this.viewPortRatio,r=e,i.width+=t,i.height-=e;break;case"bottomleft":Math.abs(e)>Math.abs(t)?t=-e*this.viewPortRatio:e=-t/this.viewPortRatio,n=t,i.width-=t,i.height+=e;break;case"bottomright":Math.abs(e)>Math.abs(t)?t=e*this.viewPortRatio:e=t/this.viewPortRatio,i.width+=t,i.height+=e}this.updateHelper(n,r,i,void 0,void 0)},e.prototype.updateHelper=function(t,e,i,n,r){var o,s,a,l=this.element.getElementsByTagName("svg")[2].getElementById("helper");if(i)o=(a=l.getBBox()).x+t,s=a.y+e,n=a.width+i.width,r=a.height+i.height;else{var h;h=this.currentPoint.x>this.startPoint.x?this.currentPoint.x-this.prevPoint.x:this.prevPoint.x-this.currentPoint.x;var c;c=this.currentPoint.y>this.startPoint.y?this.currentPoint.y-this.prevPoint.y:this.prevPoint.y-this.currentPoint.y,Math.abs(c)>Math.abs(h)?h=this.viewPortRatio*c:c=h/this.viewPortRatio,a=l.getBBox(),o=this.startPoint.x>this.currentPoint.x?a.x-h:a.x,s=this.startPoint.y>this.currentPoint.y?a.y-c:a.y,n=a.width+h,r=a.height+c}oa(this.helper,{id:this.helper.id,x:o,y:s,width:Math.max(0,n),height:Math.max(0,r)})},e.prototype.updateOverviewrect=function(t,e,i,n){aa(document.getElementById(this.canvas.id+"overviewrect"),{x:t,y:e,width:Math.max(1,i),height:Math.max(1,n)}),this.updateOverviewCorner("top",t+8,e+1,Math.max(0,i-16),2),this.updateOverviewCorner("bottom",t+8,e+n+3,Math.max(0,i-16),2),this.updateOverviewCorner("left",t-2,e+11,2,Math.max(0,n-16)),this.updateOverviewCorner("right",t+i,e+11,2,Math.max(0,n-16)),this.updateOverviewCorner("topleft",t,e+3,5,5),this.updateOverviewCorner("topright",t+i,e+3,5,5),this.updateOverviewCorner("bottomleft",t,e+n+3,5,5),this.updateOverviewCorner("bottomright",t+i,e+n+3,5,5)},e.prototype.updateOverviewCorner=function(t,e,i,n,r){var o,s,a="visible"+t,l=document.getElementById(this.canvas.id+a);"top"===t||"bottom"===t||"right"===t||"left"===t?(o={x:e,y:i,width:n,height:r,fill:"#ED1C24"},s={x:e-2,y:i-2,width:2===n?4:n,height:2===r?4:r}):(o={cx:e,cy:i,r:4,fill:"#ED1C24"},s={cx:e,cy:i,r:6,fill:"transparent"}),aa(l,o);aa(document.getElementById(this.canvas.id+t),s)},e.prototype.translateOverviewRectangle=function(){Number(this.model.width),Number(this.model.height);var t=this.currentPoint.x-this.prevPoint.x,e=this.currentPoint.y-this.prevPoint.y,i=this.element.getElementsByClassName("overviewsvg")[0].getElementById(this.canvas.id+"overviewrect").getBBox(),n=i.x+t,r=i.y+e,o=i.width,s=i.height;this.updateOverviewrect(n,r,o,s),this.updateParentView(this.parent.scroller.currentZoom,n,r,o,s,null)},e.prototype.renderOverviewRect=function(t,e,i,n){var r=Number(this.model.width),o=Number(this.model.height),s=i/r*this.contentWidth,a=n/o*this.contentHeight,l=Math.max(this.parent.scroller.viewPortWidth/s,this.parent.scroller.viewPortHeight/a);if(l>=.25&&l<=30){this.updateParentView(l,t,e,i,n,{x:0,y:0});var h=this.scrollOverviewRect(this.parent.scroller.horizontalOffset,this.parent.scroller.verticalOffset,this.parent.scroller.currentZoom,!0);if(this.helper){var c=this.element.getElementsByTagName("rect")[10].getBBox();h.x=c.x,h.y=c.y}this.updateOverviewrect(h.x,h.y,h.width,h.height)}},e.prototype.scrollOverviewRect=function(t,e,i,n){if(!this.actionName||n){var r=Number(this.model.width),o=Number(this.model.height),s=Math.min(this.contentWidth/r,this.contentHeight/o),a=new Zu,l=a.x=t/i/s,h=a.y=e/i/s,c=a.width=this.parent.scroller.viewPortWidth/i/s,d=a.height=this.parent.scroller.viewPortHeight/i/s;if(n){var p=new Zu;return p.x=l,p.y=h,p.width=c,p.height=d,p}this.updateOverviewrect(-l,-h,c,d)}return null},e.prototype.updateParentView=function(t,e,i,n,r,o){var s,a,l=Number(this.model.width),h=Number(this.model.height),c=e*(this.contentWidth/l)*t,d=i*(this.contentHeight/h)*t;this.parent.scroller.getPageBounds();1===t&&"pan"!==this.actionName||(s=-c-this.parent.scroller.horizontalOffset,a=-d-this.parent.scroller.verticalOffset),this.parent.setBlazorDiagramProps(!0),this.parent.realActions|=Ag.OverViewAction;"scale"===this.actionName||"draw"===this.actionName?this.parent.scroller.zoom(t/this.parent.scroller.currentZoom,s,a,o):f()?this.parent.scroller.zoom(1,s,a,o):this.parent.pan(s,a,o,!0)},e.prototype.updateHtmlLayer=function(t){var e=$s(t.element.id),i=this.parent.scroller.getPageBounds(!0),n=i.width,r=i.height,o=Math.max(n,this.parent.scroller.viewPortWidth),s=Math.max(r,this.parent.scroller.viewPortHeight/this.parent.scroller.currentZoom),a=Math.min(Number(this.model.width)/o,Number(this.model.height)/s);e.style.transform="scale("+a+") translate("+this.parent.scroller.transform.tx+"px,"+this.parent.scroller.transform.ty+"px)"},e.prototype.updateView=function(t){var e=this.parent.scroller.getPageBounds(),i=this.parent.scroller.viewPortWidth/this.parent.scroller.currentZoom,n=this.parent.scroller.viewPortHeight/this.parent.scroller.currentZoom,r=0,o=0;this.parent.scroller.currentZoom<1&&i>e.width&&n>e.height&&(r=(i-e.width)/2,o=(n-e.height)/2);var s=e.width,a=e.height,l=Number(this.model.width),h=Number(this.model.height),c=Math.max(s,this.parent.scroller.viewPortWidth),d=Math.max(a,this.parent.scroller.viewPortHeight/this.parent.scroller.currentZoom);this.contentWidth=c=Math.max(c,l/h*d),this.contentHeight=d=Math.max(d,h/l*c);var p=Math.min(l/c,h/d),u=document.getElementById(this.element.id+"_htmlLayer");u.style.webkitTransform="scale("+p+") translate("+-e.x+"px,"+-e.y+"px)",u.style.transform="scale("+p+") translate("+(-e.x+r)+"px,"+(-e.y+o)+"px)";document.getElementById(this.element.id+"_overviewlayer").setAttribute("transform","translate("+-e.x*p+","+-e.y*p+")"),this.horizontalOffset=e.x*p,this.verticalOffset=e.y*p;var g=document.getElementById(this.element.id+"_diagramLayer"),m=Zs(this.element.id),f=g.getContext("2d"),v=Number(this.model.width)/this.contentWidth,y=Number(this.model.height)/this.contentHeight;v=Math.min(v,y);var b=this.parent.scroller.transform,S=b.tx,w=b.ty;m.setAttribute("transform","translate("+S*v+","+w*y+"),scale("+v+")"),f.setTransform(v,0,0,v,0,0),f.fillStyle="red",this.scrollOverviewRect(this.parent.scroller.horizontalOffset,this.parent.scroller.verticalOffset,this.parent.scroller.currentZoom)},e.prototype.scrolled=function(t){if(this.event){var e=this.scrollOverviewRect(this.parent.scroller.horizontalOffset,this.parent.scroller.verticalOffset,this.parent.scroller.currentZoom,!0);this.updateOverviewrect(-e.x,-e.y,e.width,e.height),this.updateView(this)}},e.prototype.updateCursor=function(t){if(ea(t.target,"overviewresizer"))switch(t.target.id){case this.canvas.id+"left":this.canvas.style.cursor="w-resize";break;case this.canvas.id+"right":this.canvas.style.cursor="e-resize";break;case this.canvas.id+"top":this.canvas.style.cursor="n-resize";break;case this.canvas.id+"bottom":this.canvas.style.cursor="s-resize";break;case this.canvas.id+"topleft":this.canvas.style.cursor="nw-resize";break;case this.canvas.id+"topright":this.canvas.style.cursor="ne-resize";break;case this.canvas.id+"bottomleft":this.canvas.style.cursor="sw-resize";break;case this.canvas.id+"bottomright":this.canvas.style.cursor="se-resize"}else this.canvas.style.cursor="default"},e.prototype.mouseMove=function(t){if(this.event=!1,this.updateCursor(t),this.currentPoint=this.mousePosition(t),this.actionName)switch(this.actionName){case"draw":this.inAction||this.startPoint.x===this.currentPoint.x&&this.startPoint.y===this.currentPoint.y||(this.initHelper(),this.inAction=!0),this.inAction&&this.updateHelper();break;case"scale":this.inAction||(this.initHelper(),this.inAction=!0),this.updateOverviewRectangle();break;case"pan":(this.startPoint.x!==this.currentPoint.x||this.startPoint.y===this.currentPoint.y||this.inAction)&&(this.inAction=!0,this.translateOverviewRectangle())}this.prevPoint=this.currentPoint},e.prototype.documentMouseUp=function(t){this.inAction=!1,this.actionName="",this.helper&&(this.helper.parentNode.removeChild(this.helper),this.helper=null),this.event=!0,document.getElementById(this.canvas.id+"overviewhandle").style.pointerEvents="all"},e.prototype.windowResize=function(t){var e=this;return this.resizeTo&&clearTimeout(this.resizeTo),this.resizeTo=setTimeout(function(){var t=document.getElementById(e.element.id).getBoundingClientRect();e.model.width=t.width>0?t.width:e.model.width,e.model.height=t.height>0?t.height:e.model.height,e.renderCanvas(),e.setParent(e.sourceID)},10),!1},e.prototype.mouseDown=function(t){if(t.target.id===this.canvas.id+"_overviewsvg"&&(this.actionName="draw"),t.target.id===this.canvas.id+"overviewrect"&&(this.actionName="pan"),ea(t.target,"overviewresizer"))switch(this.actionName="scale",t.target.id){case this.canvas.id+"left":this.resizeDirection="left";break;case this.canvas.id+"right":this.resizeDirection="right";break;case this.canvas.id+"top":this.resizeDirection="top";break;case this.canvas.id+"bottom":this.resizeDirection="bottom";break;case this.canvas.id+"topleft":this.resizeDirection="topleft";break;case this.canvas.id+"topright":this.resizeDirection="topright";break;case this.canvas.id+"bottomleft":this.resizeDirection="bottomleft";break;case this.canvas.id+"bottomright":this.resizeDirection="bottomright"}this.startPoint=this.prevPoint=this.mousePosition(t),this.viewPortRatio=this.parent.scroller.viewPortWidth/this.parent.scroller.viewPortHeight;document.getElementById(this.canvas.id+"overviewhandle").style.pointerEvents="none"},e.prototype.mouseUp=function(t){if(this.currentPoint=this.mousePosition(t),this.actionName)if(this.startPoint.x!==this.currentPoint.x||this.startPoint.y!==this.currentPoint.y){if("pan"===this.actionName);else if(this.helper){var e=this.element.getElementsByTagName("rect")[10].getBBox();this.resizeDirection=this.resizeDirection||"";var i=e.x,n=e.y,r=e.width,o=e.height;"topleft"===this.resizeDirection||"topright"===this.resizeDirection||"bottomleft"===this.resizeDirection||this.resizeDirection;this.renderOverviewRect(i,n,r,o)}}else if(t.target.id===this.canvas.id+"_overviewsvg"||"helper"===t.target.id){r=(e=this.element.getElementsByTagName("svg")[2].getElementById(this.canvas.id+"overviewrect").getBBox()).width,o=e.height;this.inAction=!0,this.actionName="pan",this.renderOverviewRect(this.currentPoint.x-r/2,this.currentPoint.y-o/2,r,o),this.inAction=!1}this.helper&&(this.helper.parentNode.removeChild(this.helper),this.helper=null),this.actionName="",this.startPoint=null,this.currentPoint=null,this.prevPoint=null,this.helper=null,this.viewPortRatio=1,this.resizeDirection="",this.inAction=!1,this.event=!0,document.getElementById(this.canvas.id+"overviewhandle").style.pointerEvents="all"},e.prototype.initHelper=function(){var t=this.element.getElementsByTagName("svg")[2],e=this.startPoint.x,i=this.startPoint.y,n=1,r=1;if("scale"===this.actionName){var o=t.getElementById(this.canvas.id+"overviewrect").getBBox();e=o.x,i=o.y,n=o.width,r=o.height}var s=Js("rect",{id:"helper",x:e,y:i,width:n,height:r,fill:"transparent",stroke:"gray","stroke-dasharray":"2 2","shape-rendering":"crispEdges"});t.getElementById(this.element.id+"_overviewlayer").appendChild(s),this.helper=s},e.prototype.mousePosition=function(t){var e,i,n;if(-1!==t.type.indexOf("touch")){var r=(e=t).changedTouches[0].clientX,o=e.changedTouches[0].clientY;i=r-this.element.offsetLeft,n=o-this.element.offsetTop}else i=t.clientX,n=t.clientY;var s=this.element.getBoundingClientRect();return i-=s.left,n-=s.top,{x:i+this.horizontalOffset,y:n+this.verticalOffset}},e.prototype.destroy=function(){if(this.unWireEvents(),this.notify("destroy",{}),t.prototype.destroy.call(this),document.getElementById(this.element.id)){this.element.classList.remove("e-overview");var e=document.getElementById(this.element.id+"_canvas");e&&this.element.removeChild(e)}this.parent.views.splice(this.parent.views.indexOf(this.element.id),1),this.diagramLayerDiv=null,this.canvas=null,this.parent=null},e.prototype.getModuleName=function(){return"Overview"},QO([W("100%")],e.prototype,"width",void 0),QO([W("100%")],e.prototype,"height",void 0),QO([W("")],e.prototype,"sourceID",void 0),QO([Z()],e.prototype,"created",void 0),e}(Kp),qO=Object.freeze({}),GO=Object.prototype.toString,ZO=Ll("slot,component",!0),$O=Ll("key,ref,slot,slot-scope,is"),KO=Object.prototype.hasOwnProperty,JO=/-(\w)/g,tL=kl(function(t){return t.replace(JO,function(t,e){return e?e.toUpperCase():""})}),eL=kl(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}),iL=/\B([A-Z])/g,nL=kl(function(t){return t.replace(iL,"-$1").toLowerCase()}),rL=Function.prototype.bind?function(t,e){return t.bind(e)}:function(t,e){function i(i){var n=arguments.length;return n?n>1?t.apply(e,arguments):t.call(e,i):t.call(e)}return i._length=t.length,i},oL=function(t,e,i){return!1},sL=function(t){return t},aL="data-server-rendered",lL=["component","directive","filter"],hL=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],cL={optionMergeStrategies:Object.create(null),silent:!1,productionTip:"production"!==process.env.NODE_ENV,devtools:"production"!==process.env.NODE_ENV,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:oL,isReservedAttr:oL,isUnknownElement:oL,getTagNamespace:Bl,parsePlatformTagName:sL,mustUseProp:oL,async:!0,_lifecycleHooks:hL},dL=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/,pL=new RegExp("[^"+dL.source+".$_\\d]"),uL="__proto__"in{},gL="undefined"!=typeof window,mL="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,fL=mL&&WXEnvironment.platform.toLowerCase(),vL=gL&&window.navigator.userAgent.toLowerCase(),yL=vL&&/msie|trident/.test(vL),bL=vL&&vL.indexOf("msie 9.0")>0,SL=vL&&vL.indexOf("edge/")>0,wL=(vL&&vL.indexOf("android"),vL&&/iphone|ipad|ipod|ios/.test(vL)||"ios"===fL),IL=(vL&&/chrome\/\d+/.test(vL),vL&&/phantomjs/.test(vL),vL&&vL.match(/firefox\/(\d+)/)),xL={}.watch,ML=!1;if(gL)try{var CL={};Object.defineProperty(CL,"passive",{get:function(){ML=!0}}),window.addEventListener("test-passive",null,CL)}catch(t){}var NL,EL,DL=function(){return void 0===NL&&(NL=!gL&&!mL&&"undefined"!=typeof global&&(global.process&&"server"===global.process.env.VUE_ENV)),NL},TL=gL&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__,OL="undefined"!=typeof Symbol&&Yl(Symbol)&&"undefined"!=typeof Reflect&&Yl(Reflect.ownKeys);EL="undefined"!=typeof Set&&Yl(Set)?Set:function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(t){return!0===this.set[t]},t.prototype.add=function(t){this.set[t]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var LL=Bl,AL=Bl,zL=Bl,kL=Bl;if("production"!==process.env.NODE_ENV){var jL="undefined"!=typeof console,PL=/(?:^|[-_])(\w)/g;LL=function(t,e){var i=e?zL(e):"";cL.warnHandler?cL.warnHandler.call(null,t,e,i):jL&&!cL.silent&&console.error("[Vue warn]: "+t+i)},AL=function(t,e){jL&&!cL.silent&&console.warn("[Vue tip]: "+t+(e?zL(e):""))},kL=function(t,e){if(t.$root===t)return"<Root>";var i="function"==typeof t&&null!=t.cid?t.options:t._isVue?t.$options||t.constructor.options:t,n=i.name||i._componentTag,r=i.__file;if(!n&&r){var o=r.match(/([^/\\]+)\.vue$/);n=o&&o[1]}return(n?"<"+function(t){return t.replace(PL,function(t){return t.toUpperCase()}).replace(/[-_]/g,"")}(n)+">":"<Anonymous>")+(r&&!1!==e?" at "+r:"")};zL=function(t){if(t._isVue&&t.$parent){for(var e=[],i=0;t;){if(e.length>0){var n=e[e.length-1];if(n.constructor===t.constructor){i++,t=t.$parent;continue}i>0&&(e[e.length-1]=[n,i],i=0)}e.push(t),t=t.$parent}return"\n\nfound in\n\n"+e.map(function(t,e){return""+(0===e?"---\x3e ":function(t,e){for(var i="";e;)e%2==1&&(i+=t),e>1&&(t+=t),e>>=1;return i}(" ",5+2*e))+(Array.isArray(t)?kL(t[0])+"... ("+t[1]+" recursive calls)":kL(t))}).join("\n")}return"\n\n(found in "+kL(t)+")"}}var RL=0,BL=function(){this.id=RL++,this.subs=[]};BL.prototype.addSub=function(t){this.subs.push(t)},BL.prototype.removeSub=function(t){Al(this.subs,t)},BL.prototype.depend=function(){BL.target&&BL.target.addDep(this)},BL.prototype.notify=function(){var t=this.subs.slice();"production"===process.env.NODE_ENV||cL.async||t.sort(function(t,e){return t.id-e.id});for(var e=0,i=t.length;e<i;e++)t[e].update()},BL.target=null;var HL=[],UL=function(t,e,i,n,r,o,s,a){this.tag=t,this.data=e,this.children=i,this.text=n,this.elm=r,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=s,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=a,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},VL={child:{configurable:!0}};VL.child.get=function(){return this.componentInstance},Object.defineProperties(UL.prototype,VL);var _L=function(t){void 0===t&&(t="");var e=new UL;return e.text=t,e.isComment=!0,e},FL=Array.prototype,YL=Object.create(FL);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(t){var e=FL[t];Fl(YL,t,function(){for(var i=[],n=arguments.length;n--;)i[n]=arguments[n];var r,o=e.apply(this,i),s=this.__ob__;switch(t){case"push":case"unshift":r=i;break;case"splice":r=i.slice(2)}return r&&s.observeArray(r),s.dep.notify(),o})});var WL=Object.getOwnPropertyNames(YL),QL=!0,XL=function(t){this.value=t,this.dep=new BL,this.vmCount=0,Fl(t,"__ob__",this),Array.isArray(t)?(uL?function(t,e){t.__proto__=e}(t,YL):function(t,e,i){for(var n=0,r=i.length;n<r;n++){var o=i[n];Fl(t,o,e[o])}}(t,YL,WL),this.observeArray(t)):this.walk(t)};XL.prototype.walk=function(t){for(var e=Object.keys(t),i=0;i<e.length;i++)$l(t,e[i])},XL.prototype.observeArray=function(t){for(var e=0,i=t.length;e<i;e++)Zl(t[e])};var qL=cL.optionMergeStrategies;"production"!==process.env.NODE_ENV&&(qL.el=qL.propsData=function(t,e,i,n){return i||LL('option "'+n+'" can only be used during instance creation with the `new` keyword.'),ZL(t,e)}),qL.data=function(t,e,i){return i?ih(t,e,i):e&&"function"!=typeof e?("production"!==process.env.NODE_ENV&&LL('The "data" option should be a function that returns a per-instance value in component definitions.',i),t):ih(t,e)},hL.forEach(function(t){qL[t]=nh}),lL.forEach(function(t){qL[t+"s"]=rh}),qL.watch=function(t,e,i,n){if(t===xL&&(t=void 0),e===xL&&(e=void 0),!e)return Object.create(t||null);if("production"!==process.env.NODE_ENV&&sh(n,e,i),!t)return e;var r={};Pl(r,t);for(var o in e){var s=r[o],a=e[o];s&&!Array.isArray(s)&&(s=[s]),r[o]=s?s.concat(a):Array.isArray(a)?a:[a]}return r},qL.props=qL.methods=qL.inject=qL.computed=function(t,e,i,n){if(e&&"production"!==process.env.NODE_ENV&&sh(n,e,i),!t)return e;var r=Object.create(null);return Pl(r,t),e&&Pl(r,e),r},qL.provide=ih;var GL,ZL=function(t,e){return void 0===e?t:e},$L=/^(String|Number|Boolean|Function|Symbol|BigInt)$/,KL=/^\s*function (\w+)/,JL=["string","number","boolean"],tA=!1,eA=[],iA=!1;if("undefined"!=typeof Promise&&Yl(Promise)){var nA=Promise.resolve();GL=function(){nA.then(bh),wL&&setTimeout(Bl)},tA=!0}else if(yL||"undefined"==typeof MutationObserver||!Yl(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())GL="undefined"!=typeof setImmediate&&Yl(setImmediate)?function(){setImmediate(bh)}:function(){setTimeout(bh,0)};else{var rA=1,oA=new MutationObserver(bh),sA=document.createTextNode(String(rA));oA.observe(sA,{characterData:!0}),GL=function(){rA=(rA+1)%2,sA.data=String(rA)},tA=!0}var aA;if("production"!==process.env.NODE_ENV){var lA=Ll("Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,require"),hA=function(t,e){LL('Property or method "'+e+'" is not defined on the instance but referenced during render. Make sure that this property is reactive, either in the data option, or for class-based components, by initializing the property. See: https://vuejs.org/v2/guide/reactivity.html#Declaring-Reactive-Properties.',t)},cA=function(t,e){LL('Property "'+e+'" must be accessed with "$data.'+e+'" because properties starting with "$" or "_" are not proxied in the Vue instance to prevent conflicts with Vue internals. See: https://vuejs.org/v2/api/#data',t)},dA="undefined"!=typeof Proxy&&Yl(Proxy);if(dA){var pA=Ll("stop,prevent,self,ctrl,shift,alt,meta,exact");cL.keyCodes=new Proxy(cL.keyCodes,{set:function(t,e,i){return pA(e)?(LL("Avoid overwriting built-in modifier in config.keyCodes: ."+e),!1):(t[e]=i,!0)}})}var uA={has:function(t,e){var i=e in t,n=lA(e)||"string"==typeof e&&"_"===e.charAt(0)&&!(e in t.$data);return i||n||(e in t.$data?cA(t,e):hA(t,e)),i||!n}},gA={get:function(t,e){return"string"!=typeof e||e in t||(e in t.$data?cA(t,e):hA(t,e)),t[e]}};aA=function(t){if(dA){var e=t.$options,i=e.render&&e.render._withStripped?gA:uA;t._renderProxy=new Proxy(t,i)}else t._renderProxy=t}}var mA,fA,vA=new EL;if("production"!==process.env.NODE_ENV){var yA=gL&&window.performance;yA&&yA.mark&&yA.measure&&yA.clearMarks&&yA.clearMeasures&&(mA=function(t){return yA.mark(t)},fA=function(t,e,i){yA.measure(t,e,i),yA.clearMarks(e),yA.clearMarks(i)})}var bA=kl(function(t){var e="&"===t.charAt(0),i="~"===(t=e?t.slice(1):t).charAt(0),n="!"===(t=i?t.slice(1):t).charAt(0);return t=n?t.slice(1):t,{name:t,once:i,capture:n,passive:e}});Gh(Zh.prototype);var SA,wA={init:function(t,e){if(t.componentInstance&&!t.componentInstance._isDestroyed&&t.data.keepAlive){var i=t;wA.prepatch(i,i)}else{(t.componentInstance=function(t,e){var i={_isComponent:!0,_parentVnode:t,parent:e},n=t.data.inlineTemplate;return Sl(n)&&(i.render=n.render,i.staticRenderFns=n.staticRenderFns),new t.componentOptions.Ctor(i)}(t,NA)).$mount(e?t.elm:void 0,e)}},prepatch:function(t,e){var i=e.componentOptions;!function(t,e,i,n,r){"production"!==process.env.NODE_ENV&&(EA=!0);var o=n.data.scopedSlots,s=t.$scopedSlots,a=!!(o&&!o.$stable||s!==qO&&!s.$stable||o&&t.$scopedSlots.$key!==o.$key||!o&&t.$scopedSlots.$key),l=!!(r||t.$options._renderChildren||a);if(t.$options._parentVnode=n,t.$vnode=n,t._vnode&&(t._vnode.parent=n),t.$options._renderChildren=r,t.$attrs=n.data.attrs||qO,t.$listeners=i||qO,e&&t.$options.props){Gl(!1);for(var h=t._props,c=t.$options._propKeys||[],d=0;d<c.length;d++){var p=c[d],u=t.$options.props;h[p]=hh(p,u,e,t)}Gl(!0),t.$options.propsData=e}i=i||qO;var g=t.$options._parentListeners;t.$options._parentListeners=i,ac(t,i,g),l&&(t.$slots=Lh(r,n.context),t.$forceUpdate()),"production"!==process.env.NODE_ENV&&(EA=!1)}(e.componentInstance=t.componentInstance,i.propsData,i.listeners,e,i.children)},insert:function(t){var e=t.context,i=t.componentInstance;i._isMounted||(i._isMounted=!0,pc(i,"mounted")),t.data.keepAlive&&(e._isMounted?function(t){t._inactive=!1,OA.push(t)}(i):cc(i,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?dc(e,!0):e.$destroy())}},IA=Object.keys(wA),xA=1,MA=2,CA=null,NA=null,EA=!1,DA=100,TA=[],OA=[],LA={},AA={},zA=!1,kA=!1,jA=0,PA=0,RA=Date.now;if(gL&&!yL){var BA=window.performance;BA&&"function"==typeof BA.now&&RA()>document.createEvent("Event").timeStamp&&(RA=function(){return BA.now()})}var HA=0,UA=function(t,e,i,n,r){this.vm=t,r&&(t._watcher=this),t._watchers.push(this),n?(this.deep=!!n.deep,this.user=!!n.user,this.lazy=!!n.lazy,this.sync=!!n.sync,this.before=n.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=i,this.id=++HA,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new EL,this.newDepIds=new EL,this.expression="production"!==process.env.NODE_ENV?e.toString():"","function"==typeof e?this.getter=e:(this.getter=function(t){if(!pL.test(t)){var e=t.split(".");return function(t){for(var i=0;i<e.length;i++){if(!t)return;t=t[e[i]]}return t}}}(e),this.getter||(this.getter=Bl,"production"!==process.env.NODE_ENV&&LL('Failed watching path: "'+e+'" Watcher only accepts simple dot-delimited paths. For full control, use a function instead.',t))),this.value=this.lazy?void 0:this.get()};UA.prototype.get=function(){Wl(this);var t,e=this.vm;try{t=this.getter.call(e,e)}catch(t){if(!this.user)throw t;mh(t,e,'getter for watcher "'+this.expression+'"')}finally{this.deep&&wh(t),Ql(),this.cleanupDeps()}return t},UA.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},UA.prototype.cleanupDeps=function(){for(var t=this.deps.length;t--;){var e=this.deps[t];this.newDepIds.has(e.id)||e.removeSub(this)}var i=this.depIds;this.depIds=this.newDepIds,this.newDepIds=i,this.newDepIds.clear(),i=this.deps,this.deps=this.newDeps,this.newDeps=i,this.newDeps.length=0},UA.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():function(t){var e=t.id;if(null==LA[e]){if(LA[e]=!0,kA){for(var i=TA.length-1;i>jA&&TA[i].id>t.id;)i--;TA.splice(i+1,0,t)}else TA.push(t);if(!zA){if(zA=!0,"production"!==process.env.NODE_ENV&&!cL.async)return void uc();Sh(uc)}}}(this)},UA.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||xl(t)||this.deep){var e=this.value;if(this.value=t,this.user){var i='callback for watcher "'+this.expression+'"';fh(this.cb,this.vm,[t,e],this.vm,i)}else this.cb.call(this.vm,t,e)}}},UA.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},UA.prototype.depend=function(){for(var t=this.deps.length;t--;)this.deps[t].depend()},UA.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||Al(this.vm._watchers,this);for(var t=this.deps.length;t--;)this.deps[t].removeSub(this);this.active=!1}};var VA={enumerable:!0,configurable:!0,get:Bl,set:Bl},_A={lazy:!0},FA=0;!function(t){t.prototype._init=function(t){this._uid=FA++;var e,i;"production"!==process.env.NODE_ENV&&cL.performance&&mA&&(e="vue-perf-start:"+this._uid,i="vue-perf-end:"+this._uid,mA(e)),this._isVue=!0,t&&t._isComponent?function(t,e){var i=t.$options=Object.create(t.constructor.options),n=e._parentVnode;i.parent=e.parent,i._parentVnode=n;var r=n.componentOptions;i.propsData=r.propsData,i._parentListeners=r.listeners,i._renderChildren=r.children,i._componentTag=r.tag,e.render&&(i.render=e.render,i.staticRenderFns=e.staticRenderFns)}(this,t):this.$options=ah(Sc(this.constructor),t||{},this),"production"!==process.env.NODE_ENV?aA(this):this._renderProxy=this,this._self=this,function(t){var e=t.$options,i=e.parent;if(i&&!e.abstract){for(;i.$options.abstract&&i.$parent;)i=i.$parent;i.$children.push(t)}t.$parent=i,t.$root=i?i.$root:t,t.$children=[],t.$refs={},t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}(this),function(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&ac(t,e)}(this),function(t){t._vnode=null,t._staticTrees=null;var e=t.$options,i=t.$vnode=e._parentVnode,n=i&&i.context;t.$slots=Lh(e._renderChildren,n),t.$scopedSlots=qO,t._c=function(e,i,n,r){return tc(t,e,i,n,r,!1)},t.$createElement=function(e,i,n,r){return tc(t,e,i,n,r,!0)};var r=i&&i.data;"production"!==process.env.NODE_ENV?($l(t,"$attrs",r&&r.attrs||qO,function(){!EA&&LL("$attrs is readonly.",t)},!0),$l(t,"$listeners",e._parentListeners||qO,function(){!EA&&LL("$listeners is readonly.",t)},!0)):($l(t,"$attrs",r&&r.attrs||qO,null,!0),$l(t,"$listeners",e._parentListeners||qO,null,!0))}(this),pc(this,"beforeCreate"),function(t){var e=Oh(t.$options.inject,t);e&&(Gl(!1),Object.keys(e).forEach(function(i){"production"!==process.env.NODE_ENV?$l(t,i,e[i],function(){LL('Avoid mutating an injected value directly since the changes will be overwritten whenever the provided component re-renders. injection being mutated: "'+i+'"',t)}):$l(t,i,e[i])}),Gl(!0))}(this),mc(this),function(t){var e=t.$options.provide;e&&(t._provided="function"==typeof e?e.call(t):e)}(this),pc(this,"created"),"production"!==process.env.NODE_ENV&&cL.performance&&mA&&(this._name=kL(this,!1),mA(i),fA("vue "+this._name+" init",e,i)),this.$options.el&&this.$mount(this.$options.el)}}(wc),function(t){var e={};e.get=function(){return this._data};var i={};i.get=function(){return this._props},"production"!==process.env.NODE_ENV&&(e.set=function(){LL("Avoid replacing instance root $data. Use nested data properties instead.",this)},i.set=function(){LL("$props is readonly.",this)}),Object.defineProperty(t.prototype,"$data",e),Object.defineProperty(t.prototype,"$props",i),t.prototype.$set=Kl,t.prototype.$delete=Jl,t.prototype.$watch=function(t,e,i){if(Cl(e))return bc(this,t,e,i);(i=i||{}).user=!0;var n=new UA(this,t,e,i);if(i.immediate){var r='callback for immediate watcher "'+n.expression+'"';Wl(),fh(e,this,[n.value],this,r),Ql()}return function(){n.teardown()}}}(wc),function(t){var e=/^hook:/;t.prototype.$on=function(t,i){if(Array.isArray(t))for(var n=0,r=t.length;n<r;n++)this.$on(t[n],i);else(this._events[t]||(this._events[t]=[])).push(i),e.test(t)&&(this._hasHookEvent=!0);return this},t.prototype.$once=function(t,e){function i(){n.$off(t,i),e.apply(n,arguments)}var n=this;return i.fn=e,n.$on(t,i),n},t.prototype.$off=function(t,e){if(!arguments.length)return this._events=Object.create(null),this;if(Array.isArray(t)){for(var i=0,n=t.length;i<n;i++)this.$off(t[i],e);return this}var r=this._events[t];if(!r)return this;if(!e)return this._events[t]=null,this;for(var o,s=r.length;s--;)if((o=r[s])===e||o.fn===e){r.splice(s,1);break}return this},t.prototype.$emit=function(t){if("production"!==process.env.NODE_ENV){var e=t.toLowerCase();e!==t&&this._events[e]&&AL('Event "'+e+'" is emitted in component '+kL(this)+' but the handler is registered for "'+t+'". Note that HTML attributes are case-insensitive and you cannot use v-on to listen to camelCase events when using in-DOM templates. You should probably use "'+nL(t)+'" instead of "'+t+'".')}var i=this._events[t];if(i){i=i.length>1?jl(i):i;for(var n=jl(arguments,1),r='event handler for "'+t+'"',o=0,s=i.length;o<s;o++)fh(i[o],this,n,this,r)}return this}}(wc),function(t){t.prototype._update=function(t,e){var i=this.$el,n=this._vnode,r=lc(this);this._vnode=t,this.$el=n?this.__patch__(n,t):this.__patch__(this.$el,t,e,!1),r(),i&&(i.__vue__=null),this.$el&&(this.$el.__vue__=this),this.$vnode&&this.$parent&&this.$vnode===this.$parent._vnode&&(this.$parent.$el=this.$el)},t.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},t.prototype.$destroy=function(){if(!this._isBeingDestroyed){pc(this,"beforeDestroy"),this._isBeingDestroyed=!0;var t=this.$parent;!t||t._isBeingDestroyed||this.$options.abstract||Al(t.$children,this),this._watcher&&this._watcher.teardown();for(var e=this._watchers.length;e--;)this._watchers[e].teardown();this._data.__ob__&&this._data.__ob__.vmCount--,this._isDestroyed=!0,this.__patch__(this._vnode,null),pc(this,"destroyed"),this.$off(),this.$el&&(this.$el.__vue__=null),this.$vnode&&(this.$vnode.parent=null)}}}(wc),function(t){Gh(t.prototype),t.prototype.$nextTick=function(t){return Sh(t,this)},t.prototype._render=function(){var t=this,e=t.$options,i=e.render,n=e._parentVnode;n&&(t.$scopedSlots=kh(n.data.scopedSlots,t.$slots,t.$scopedSlots)),t.$vnode=n;var r;try{CA=t,r=i.call(t._renderProxy,t.$createElement)}catch(e){if(mh(e,t,"render"),"production"!==process.env.NODE_ENV&&t.$options.renderError)try{r=t.$options.renderError.call(t._renderProxy,t.$createElement,e)}catch(e){mh(e,t,"renderError"),r=t._vnode}else r=t._vnode}finally{CA=null}return Array.isArray(r)&&1===r.length&&(r=r[0]),r instanceof UL||("production"!==process.env.NODE_ENV&&Array.isArray(r)&&LL("Multiple root nodes returned from render function. Render function should return a single root node.",t),r=_L()),r.parent=n,r}}(wc);var YA=[String,RegExp,Array],WA={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:YA,exclude:YA,max:[String,Number]},methods:{cacheVNode:function(){var t=this.cache,e=this.keys,i=this.vnodeToCache,n=this.keyToCache;if(i){var r=i.tag,o=i.componentInstance,s=i.componentOptions;t[n]={name:xc(s),tag:r,componentInstance:o},e.push(n),this.max&&e.length>parseInt(this.max)&&Nc(t,e[0],e,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var t in this.cache)Nc(this.cache,t,this.keys)},mounted:function(){var t=this;this.cacheVNode(),this.$watch("include",function(e){Cc(t,function(t){return Mc(e,t)})}),this.$watch("exclude",function(e){Cc(t,function(t){return!Mc(e,t)})})},updated:function(){this.cacheVNode()},render:function(){var t=this.$slots.default,e=nc(t),i=e&&e.componentOptions;if(i){var n=xc(i),r=this.include,o=this.exclude;if(r&&(!n||!Mc(r,n))||o&&n&&Mc(o,n))return e;var s=this.cache,a=this.keys,l=null==e.key?i.Ctor.cid+(i.tag?"::"+i.tag:""):e.key;s[l]?(e.componentInstance=s[l].componentInstance,Al(a,l),a.push(l)):(this.vnodeToCache=e,this.keyToCache=l),e.data.keepAlive=!0}return e||t&&t[0]}}};!function(t){var e={};e.get=function(){return cL},"production"!==process.env.NODE_ENV&&(e.set=function(){LL("Do not replace the Vue.config object, set individual fields instead.")}),Object.defineProperty(t,"config",e),t.util={warn:LL,extend:Pl,mergeOptions:ah,defineReactive:$l},t.set=Kl,t.delete=Jl,t.nextTick=Sh,t.observable=function(t){return Zl(t),t},t.options=Object.create(null),lL.forEach(function(e){t.options[e+"s"]=Object.create(null)}),t.options._base=t,Pl(t.options.components,WA),function(t){t.use=function(t){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(t)>-1)return this;var i=jl(arguments,1);return i.unshift(this),"function"==typeof t.install?t.install.apply(t,i):"function"==typeof t&&t.apply(null,i),e.push(t),this}}(t),function(t){t.mixin=function(t){return this.options=ah(this.options,t),this}}(t),Ic(t),function(t){lL.forEach(function(e){t[e]=function(t,i){return i?("production"!==process.env.NODE_ENV&&"component"===e&&oh(t),"component"===e&&Cl(i)&&(i.name=i.name||t,i=this.options._base.extend(i)),"directive"===e&&"function"==typeof i&&(i={bind:i,update:i}),this.options[e+"s"][t]=i,i):this.options[e+"s"][t]}})}(t)}(wc),Object.defineProperty(wc.prototype,"$isServer",{get:DL}),Object.defineProperty(wc.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(wc,"FunctionalRenderContext",{value:Zh}),wc.version="2.6.14";var QA,XA,qA,GA=Ll("style,class"),ZA=Ll("input,textarea,option,select,progress"),$A=Ll("contenteditable,draggable,spellcheck"),KA=Ll("events,caret,typing,plaintext-only"),JA=function(t,e){return rz(e)||"false"===e?"false":"contenteditable"===t&&KA(e)?e:"true"},tz=Ll("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),ez="http://www.w3.org/1999/xlink",iz=function(t){return":"===t.charAt(5)&&"xlink"===t.slice(0,5)},nz=function(t){return iz(t)?t.slice(6,t.length):""},rz=function(t){return null==t||!1===t},oz={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},sz=Ll("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),az=Ll("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),lz=function(t){return sz(t)||az(t)},hz=Object.create(null),cz=Ll("text,number,password,search,email,tel,url"),dz=Object.freeze({createElement:function(t,e){var i=document.createElement(t);return"select"!==t?i:(e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&i.setAttribute("multiple","multiple"),i)},createElementNS:function(t,e){return document.createElementNS(oz[t],e)},createTextNode:function(t){return document.createTextNode(t)},createComment:function(t){return document.createComment(t)},insertBefore:function(t,e,i){t.insertBefore(e,i)},removeChild:function(t,e){t.removeChild(e)},appendChild:function(t,e){t.appendChild(e)},parentNode:function(t){return t.parentNode},nextSibling:function(t){return t.nextSibling},tagName:function(t){return t.tagName},setTextContent:function(t,e){t.textContent=e},setStyleScope:function(t,e){t.setAttribute(e,"")}}),pz={create:function(t,e){Lc(e)},update:function(t,e){t.data.ref!==e.data.ref&&(Lc(t,!0),Lc(e))},destroy:function(t){Lc(t,!0)}},uz=new UL("",{},[]),gz=["create","activate","update","remove","destroy"],mz={create:kc,update:kc,destroy:function(t){kc(t,uz)}},fz=Object.create(null),vz=[pz,mz],yz={create:Rc,update:Rc},bz={create:Uc,update:Uc},Sz="__r",wz="__c",Iz=tA&&!(IL&&Number(IL[1])<=53),xz={create:Yc,update:Yc},Mz={create:Wc,update:Wc},Cz=kl(function(t){var e={},i=/:(.+)/;return t.split(/;(?![^(]*\))/g).forEach(function(t){if(t){var n=t.split(i);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}),Nz=/^--/,Ez=/\s*!important$/,Dz=function(t,e,i){if(Nz.test(e))t.style.setProperty(e,i);else if(Ez.test(i))t.style.setProperty(nL(e),i.replace(Ez,""),"important");else{var n=Oz(e);if(Array.isArray(i))for(var r=0,o=i.length;r<o;r++)t.style[n]=i[r];else t.style[n]=i}},Tz=["Webkit","Moz","ms"],Oz=kl(function(t){if(qA=qA||document.createElement("div").style,"filter"!==(t=tL(t))&&t in qA)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),i=0;i<Tz.length;i++){var n=Tz[i]+e;if(n in qA)return n}}),Lz={create:qc,update:qc},Az=/\s+/,zz=kl(function(t){return{enterClass:t+"-enter",enterToClass:t+"-enter-to",enterActiveClass:t+"-enter-active",leaveClass:t+"-leave",leaveToClass:t+"-leave-to",leaveActiveClass:t+"-leave-active"}}),kz=gL&&!bL,jz="transition",Pz="animation",Rz="transition",Bz="transitionend",Hz="animation",Uz="animationend";kz&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Rz="WebkitTransition",Bz="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Hz="WebkitAnimation",Uz="webkitAnimationEnd"));var Vz=gL?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()},_z=/\b(transform|all)(,|$)/,Fz=function(t){function e(t){var e=x.parentNode(t);Sl(e)&&x.removeChild(e,t)}function i(t,e){return!e&&!t.ns&&!(cL.ignoredElements.length&&cL.ignoredElements.some(function(e){return Nl(e)?e.test(t.tag):e===t.tag}))&&cL.isUnknownElement(t.tag)}function n(t,e,n,a,c,d,p){if(Sl(t.elm)&&Sl(d)&&(t=d[p]=ql(t)),t.isRootInsert=!c,!function(t,e,i,n){var s=t.data;if(Sl(s)){var a=Sl(t.componentInstance)&&s.keepAlive;if(Sl(s=s.hook)&&Sl(s=s.init)&&s(t,!1),Sl(t.componentInstance))return r(t,e),o(i,t.elm,n),wl(a)&&function(t,e,i,n){for(var r,s=t;s.componentInstance;)if(s=s.componentInstance._vnode,Sl(r=s.data)&&Sl(r=r.transition)){for(r=0;r<w.activate.length;++r)w.activate[r](uz,s);e.push(s);break}o(i,t.elm,n)}(t,e,i,n),!0}}(t,e,n,a)){var u=t.data,g=t.children,m=t.tag;Sl(m)?("production"!==process.env.NODE_ENV&&(u&&u.pre&&M++,i(t,M)&&LL("Unknown custom element: <"+m+'> - did you register the component correctly? For recursive components, make sure to provide the "name" option.',t.context)),t.elm=t.ns?x.createElementNS(t.ns,m):x.createElement(m,t),h(t),s(t,g,e),Sl(u)&&l(t,e),o(n,t.elm,a),"production"!==process.env.NODE_ENV&&u&&u.pre&&M--):wl(t.isComment)?(t.elm=x.createComment(t.text),o(n,t.elm,a)):(t.elm=x.createTextNode(t.text),o(n,t.elm,a))}}function r(t,e){Sl(t.data.pendingInsert)&&(e.push.apply(e,t.data.pendingInsert),t.data.pendingInsert=null),t.elm=t.componentInstance.$el,a(t)?(l(t,e),h(t)):(Lc(t),e.push(t))}function o(t,e,i){Sl(t)&&(Sl(i)?x.parentNode(i)===t&&x.insertBefore(t,e,i):x.appendChild(t,e))}function s(t,e,i){if(Array.isArray(e)){"production"!==process.env.NODE_ENV&&m(e);for(var r=0;r<e.length;++r)n(e[r],i,t.elm,null,!0,e,r)}else Il(t.text)&&x.appendChild(t.elm,x.createTextNode(String(t.text)))}function a(t){for(;t.componentInstance;)t=t.componentInstance._vnode;return Sl(t.tag)}function l(t,e){for(var i=0;i<w.create.length;++i)w.create[i](uz,t);Sl(b=t.data.hook)&&(Sl(b.create)&&b.create(uz,t),Sl(b.insert)&&e.push(t))}function h(t){var e;if(Sl(e=t.fnScopeId))x.setStyleScope(t.elm,e);else for(var i=t;i;)Sl(e=i.context)&&Sl(e=e.$options._scopeId)&&x.setStyleScope(t.elm,e),i=i.parent;Sl(e=NA)&&e!==t.context&&e!==t.fnContext&&Sl(e=e.$options._scopeId)&&x.setStyleScope(t.elm,e)}function c(t,e,i,r,o,s){for(;r<=o;++r)n(i[r],s,t,e,!1,i,r)}function d(t){var e,i,n=t.data;if(Sl(n))for(Sl(e=n.hook)&&Sl(e=e.destroy)&&e(t),e=0;e<w.destroy.length;++e)w.destroy[e](t);if(Sl(e=t.children))for(i=0;i<t.children.length;++i)d(t.children[i])}function p(t,i,n){for(;i<=n;++i){var r=t[i];Sl(r)&&(Sl(r.tag)?(u(r),d(r)):e(r.elm))}}function u(t,i){if(Sl(i)||Sl(t.data)){var n,r=w.remove.length+1;for(Sl(i)?i.listeners+=r:i=function(t,i){function n(){0==--n.listeners&&e(t)}return n.listeners=i,n}(t.elm,r),Sl(n=t.componentInstance)&&Sl(n=n._vnode)&&Sl(n.data)&&u(n,i),n=0;n<w.remove.length;++n)w.remove[n](t,i);Sl(n=t.data.hook)&&Sl(n=n.remove)?n(t,i):i()}else e(t.elm)}function g(t,e,i,r,o){var s,a,l,h=0,d=0,u=e.length-1,g=e[0],v=e[u],y=i.length-1,b=i[0],S=i[y],w=!o;for("production"!==process.env.NODE_ENV&&m(i);h<=u&&d<=y;)bl(g)?g=e[++h]:bl(v)?v=e[--u]:Ac(g,b)?(f(g,b,r,i,d),g=e[++h],b=i[++d]):Ac(v,S)?(f(v,S,r,i,y),v=e[--u],S=i[--y]):Ac(g,S)?(f(g,S,r,i,y),w&&x.insertBefore(t,g.elm,x.nextSibling(v.elm)),g=e[++h],S=i[--y]):Ac(v,b)?(f(v,b,r,i,d),w&&x.insertBefore(t,v.elm,g.elm),v=e[--u],b=i[++d]):(bl(s)&&(s=zc(e,h,u)),bl(a=Sl(b.key)?s[b.key]:function(t,e,i,n){for(var r=i;r<n;r++){var o=e[r];if(Sl(o)&&Ac(t,o))return r}}(b,e,h,u))?n(b,r,t,g.elm,!1,i,d):Ac(l=e[a],b)?(f(l,b,r,i,d),e[a]=void 0,w&&x.insertBefore(t,l.elm,g.elm)):n(b,r,t,g.elm,!1,i,d),b=i[++d]);h>u?c(t,bl(i[y+1])?null:i[y+1].elm,i,d,y,r):d>y&&p(e,h,u)}function m(t){for(var e={},i=0;i<t.length;i++){var n=t[i],r=n.key;Sl(r)&&(e[r]?LL("Duplicate keys detected: '"+r+"'. This may cause an update error.",n.context):e[r]=!0)}}function f(t,e,i,n,r,o){if(t!==e){Sl(e.elm)&&Sl(n)&&(e=n[r]=ql(e));var s=e.elm=t.elm;if(wl(t.isAsyncPlaceholder))Sl(e.asyncFactory.resolved)?y(t.elm,e,i):e.isAsyncPlaceholder=!0;else if(wl(e.isStatic)&&wl(t.isStatic)&&e.key===t.key&&(wl(e.isCloned)||wl(e.isOnce)))e.componentInstance=t.componentInstance;else{var l,h=e.data;Sl(h)&&Sl(l=h.hook)&&Sl(l=l.prepatch)&&l(t,e);var d=t.children,u=e.children;if(Sl(h)&&a(e)){for(l=0;l<w.update.length;++l)w.update[l](t,e);Sl(l=h.hook)&&Sl(l=l.update)&&l(t,e)}bl(e.text)?Sl(d)&&Sl(u)?d!==u&&g(s,d,u,i,o):Sl(u)?("production"!==process.env.NODE_ENV&&m(u),Sl(t.text)&&x.setTextContent(s,""),c(s,null,u,0,u.length-1,i)):Sl(d)?p(d,0,d.length-1):Sl(t.text)&&x.setTextContent(s,""):t.text!==e.text&&x.setTextContent(s,e.text),Sl(h)&&Sl(l=h.hook)&&Sl(l=l.postpatch)&&l(t,e)}}}function v(t,e,i){if(wl(i)&&Sl(t.parent))t.parent.data.pendingInsert=e;else for(var n=0;n<e.length;++n)e[n].data.hook.insert(e[n])}function y(t,e,n,o){var a,h=e.tag,c=e.data,d=e.children;if(o=o||c&&c.pre,e.elm=t,wl(e.isComment)&&Sl(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if("production"!==process.env.NODE_ENV&&!function(t,e,n){return Sl(e.tag)?0===e.tag.indexOf("vue-component")||!i(e,n)&&e.tag.toLowerCase()===(t.tagName&&t.tagName.toLowerCase()):t.nodeType===(e.isComment?8:3)}(t,e,o))return!1;if(Sl(c)&&(Sl(a=c.hook)&&Sl(a=a.init)&&a(e,!0),Sl(a=e.componentInstance)))return r(e,n),!0;if(Sl(h)){if(Sl(d))if(t.hasChildNodes())if(Sl(a=c)&&Sl(a=a.domProps)&&Sl(a=a.innerHTML)){if(a!==t.innerHTML)return"production"===process.env.NODE_ENV||"undefined"==typeof console||C||(C=!0,console.warn("Parent: ",t),console.warn("server innerHTML: ",a),console.warn("client innerHTML: ",t.innerHTML)),!1}else{for(var p=!0,u=t.firstChild,g=0;g<d.length;g++){if(!u||!y(u,d[g],n,o)){p=!1;break}u=u.nextSibling}if(!p||u)return"production"===process.env.NODE_ENV||"undefined"==typeof console||C||(C=!0,console.warn("Parent: ",t),console.warn("Mismatching childNodes vs. VNodes: ",t.childNodes,d)),!1}else s(e,d,n);if(Sl(c)){var m=!1;for(var f in c)if(!N(f)){m=!0,l(e,n);break}!m&&c.class&&wh(c.class)}}else t.data!==e.text&&(t.data=e.text);return!0}var b,S,w={},I=t.modules,x=t.nodeOps;for(b=0;b<gz.length;++b)for(w[gz[b]]=[],S=0;S<I.length;++S)Sl(I[S][gz[b]])&&w[gz[b]].push(I[S][gz[b]]);var M=0,C=!1,N=Ll("attrs,class,staticClass,staticStyle,key");return function(t,e,i,r){if(!bl(e)){var o=!1,s=[];if(bl(t))o=!0,n(e,s);else{var l=Sl(t.nodeType);if(!l&&Ac(t,e))f(t,e,s,null,null,r);else{if(l){if(1===t.nodeType&&t.hasAttribute(aL)&&(t.removeAttribute(aL),i=!0),wl(i)){if(y(t,e,s))return v(e,s,!0),t;"production"!==process.env.NODE_ENV&&LL("The client-side rendered virtual DOM tree is not matching server-rendered content. This is likely caused by incorrect HTML markup, for example nesting block-level elements inside <p>, or missing <tbody>. Bailing hydration and performing full client-side render.")}t=function(t){return new UL(x.tagName(t).toLowerCase(),{},[],void 0,t)}(t)}var h=t.elm,c=x.parentNode(h);if(n(e,s,h._leaveCb?null:c,x.nextSibling(h)),Sl(e.parent))for(var u=e.parent,g=a(e);u;){for(var m=0;m<w.destroy.length;++m)w.destroy[m](u);if(u.elm=e.elm,g){for(var b=0;b<w.create.length;++b)w.create[b](uz,u);var S=u.data.hook.insert;if(S.merged)for(var I=1;I<S.fns.length;I++)S.fns[I]()}else Lc(u);u=u.parent}Sl(c)?p([t],0,0):Sl(t.tag)&&d(t)}}return v(e,s,o),e.elm}Sl(t)&&d(t)}}({nodeOps:dz,modules:[yz,bz,xz,Mz,Lz,gL?{create:cd,activate:cd,remove:function(t,e){!0!==t.data.show?sd(t,e):e()}}:{}].concat(vz)});bL&&document.addEventListener("selectionchange",function(){var t=document.activeElement;t&&t.vmodel&&vd(t,"input")});var Yz={inserted:function(t,e,i,n){"select"===i.tag?(n.elm&&!n.elm._vOptions?Ch(i,"postpatch",function(){Yz.componentUpdated(t,e,i)}):dd(t,e,i.context),t._vOptions=[].map.call(t.options,gd)):("textarea"===i.tag||cz(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("compositionstart",md),t.addEventListener("compositionend",fd),t.addEventListener("change",fd),bL&&(t.vmodel=!0)))},componentUpdated:function(t,e,i){if("select"===i.tag){dd(t,e,i.context);var n=t._vOptions,r=t._vOptions=[].map.call(t.options,gd);if(r.some(function(t,e){return!Hl(t,n[e])})){(t.multiple?e.value.some(function(t){return ud(t,r)}):e.value!==e.oldValue&&ud(e.value,r))&&vd(t,"change")}}}},Wz={model:Yz,show:{bind:function(t,e,i){var n=e.value,r=(i=yd(i)).data&&i.data.transition,o=t.__vOriginalDisplay="none"===t.style.display?"":t.style.display;n&&r?(i.data.show=!0,od(i,function(){t.style.display=o})):t.style.display=n?o:"none"},update:function(t,e,i){var n=e.value;if(!n!=!e.oldValue){(i=yd(i)).data&&i.data.transition?(i.data.show=!0,n?od(i,function(){t.style.display=t.__vOriginalDisplay}):sd(i,function(){t.style.display="none"})):t.style.display=n?t.__vOriginalDisplay:"none"}},unbind:function(t,e,i,n,r){r||(t.style.display=t.__vOriginalDisplay)}}},Qz={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]},Xz=function(t){return t.tag||zh(t)},qz=function(t){return"show"===t.name},Gz={name:"transition",props:Qz,abstract:!0,render:function(t){var e=this,i=this.$slots.default;if(i&&(i=i.filter(Xz)).length){"production"!==process.env.NODE_ENV&&i.length>1&&LL("<transition> can only be used on a single element. Use <transition-group> for lists.",this.$parent);var n=this.mode;"production"!==process.env.NODE_ENV&&n&&"in-out"!==n&&"out-in"!==n&&LL("invalid <transition> mode: "+n,this.$parent);var r=i[0];if(function(t){for(;t=t.parent;)if(t.data.transition)return!0}(this.$vnode))return r;var o=bd(r);if(!o)return r;if(this._leaving)return wd(t,r);var s="__transition-"+this._uid+"-";o.key=null==o.key?o.isComment?s+"comment":s+o.tag:Il(o.key)?0===String(o.key).indexOf(s)?o.key:s+o.key:o.key;var a=(o.data||(o.data={})).transition=Sd(this),l=this._vnode,h=bd(l);if(o.data.directives&&o.data.directives.some(qz)&&(o.data.show=!0),h&&h.data&&!function(t,e){return e.key===t.key&&e.tag===t.tag}(o,h)&&!zh(h)&&(!h.componentInstance||!h.componentInstance._vnode.isComment)){var c=h.data.transition=Pl({},a);if("out-in"===n)return this._leaving=!0,Ch(c,"afterLeave",function(){e._leaving=!1,e.$forceUpdate()}),wd(t,r);if("in-out"===n){if(zh(o))return l;var d,p=function(){d()};Ch(a,"afterEnter",p),Ch(a,"enterCancelled",p),Ch(c,"delayLeave",function(t){d=t})}}return r}}},Zz=Pl({tag:String,moveClass:String},Qz);delete Zz.mode;var $z={Transition:Gz,TransitionGroup:{props:Zz,beforeMount:function(){var t=this,e=this._update;this._update=function(i,n){var r=lc(t);t.__patch__(t._vnode,t.kept,!1,!0),t._vnode=t.kept,r(),e.call(t,i,n)}},render:function(t){for(var e=this.tag||this.$vnode.data.tag||"span",i=Object.create(null),n=this.prevChildren=this.children,r=this.$slots.default||[],o=this.children=[],s=Sd(this),a=0;a<r.length;a++){var l=r[a];if(l.tag)if(null!=l.key&&0!==String(l.key).indexOf("__vlist"))o.push(l),i[l.key]=l,(l.data||(l.data={})).transition=s;else if("production"!==process.env.NODE_ENV){var h=l.componentOptions,c=h?h.Ctor.options.name||h.tag||"":l.tag;LL("<transition-group> children must be keyed: <"+c+">")}}if(n){for(var d=[],p=[],u=0;u<n.length;u++){var g=n[u];g.data.transition=s,g.data.pos=g.elm.getBoundingClientRect(),i[g.key]?d.push(g):p.push(g)}this.kept=t(e,null,d),this.removed=p}return t(e,null,o)},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";t.length&&this.hasMove(t[0].elm,e)&&(t.forEach(Id),t.forEach(xd),t.forEach(Md),this._reflow=document.body.offsetHeight,t.forEach(function(t){if(t.data.moved){var i=t.elm,n=i.style;Jc(i,e),n.transform=n.WebkitTransform=n.transitionDuration="",i.addEventListener(Bz,i._moveCb=function t(n){n&&n.target!==i||n&&!/transform$/.test(n.propertyName)||(i.removeEventListener(Bz,t),i._moveCb=null,td(i,e))})}}))},methods:{hasMove:function(t,e){if(!kz)return!1;if(this._hasMove)return this._hasMove;var i=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach(function(t){Zc(i,t)}),Gc(i,e),i.style.display="none",this.$el.appendChild(i);var n=id(i);return this.$el.removeChild(i),this._hasMove=n.hasTransform}}}};wc.config.mustUseProp=function(t,e,i){return"value"===i&&ZA(t)&&"button"!==e||"selected"===i&&"option"===t||"checked"===i&&"input"===t||"muted"===i&&"video"===t},wc.config.isReservedTag=lz,wc.config.isReservedAttr=GA,wc.config.getTagNamespace=function(t){return az(t)?"svg":"math"===t?"math":void 0},wc.config.isUnknownElement=function(t){if(!gL)return!0;if(lz(t))return!1;if(t=t.toLowerCase(),null!=hz[t])return hz[t];var e=document.createElement(t);return t.indexOf("-")>-1?hz[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:hz[t]=/HTMLUnknownElement/.test(e.toString())},Pl(wc.options.directives,Wz),Pl(wc.options.components,$z),wc.prototype.__patch__=gL?Fz:Bl,wc.prototype.$mount=function(t,e){return t=t&&gL?function(t){if("string"==typeof t){var e=document.querySelector(t);return e||("production"!==process.env.NODE_ENV&&LL("Cannot find element: "+t),document.createElement("div"))}return t}(t):void 0,function(t,e,i){t.$el=e,t.$options.render||(t.$options.render=_L,"production"!==process.env.NODE_ENV&&(t.$options.template&&"#"!==t.$options.template.charAt(0)||t.$options.el||e?LL("You are using the runtime-only build of Vue where the template compiler is not available. Either pre-compile the templates into render functions, or use the compiler-included build.",t):LL("Failed to mount component: template or render function not defined.",t))),pc(t,"beforeMount");var n;return n="production"!==process.env.NODE_ENV&&cL.performance&&mA?function(){var e=t._name,n=t._uid,r="vue-perf-start:"+n,o="vue-perf-end:"+n;mA(r);var s=t._render();mA(o),fA("vue "+e+" render",r,o),mA(r),t._update(s,i),mA(o),fA("vue "+e+" patch",r,o)}:function(){t._update(t._render(),i)},new UA(t,n,Bl,{before:function(){t._isMounted&&!t._isDestroyed&&pc(t,"beforeUpdate")}},!0),i=!1,null==t.$vnode&&(t._isMounted=!0,pc(t,"mounted")),t}(this,t,e)},gL&&setTimeout(function(){cL.devtools&&(TL?TL.emit("init",wc):"production"!==process.env.NODE_ENV&&"test"!==process.env.NODE_ENV&&console[console.info?"info":"log"]("Download the Vue Devtools extension for a better development experience:\nhttps://github.com/vuejs/vue-devtools")),"production"!==process.env.NODE_ENV&&"test"!==process.env.NODE_ENV&&!1!==cL.productionTip&&"undefined"!=typeof console&&console[console.info?"info":"log"]("You are running Vue in development mode.\nMake sure to turn on production mode when deploying for production.\nSee more tips at https://vuejs.org/guide/deployment.html")},0);var Kz=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[""+i]=t[""+i]);return e.default=t,e}(Object.freeze({default:wc})),Jz=!(parseInt(Kz.version)>2),tk=Jz?Kz.default.default?Kz.default.default:Kz.default:Kz,ek=Kz.h,ik=function(t){return Jz?tk.extend(t):tk.defineComponent(t)},nk=ik({name:"ComponentBase",data:function(){return{ej2Instances:{},tagMapper:{},tagNameMapper:{},hasInjectedModules:!1,hasChildDirective:!1,childDirObjects:"",propKeys:{},isDecorator:!1}},created:function(){var t=this;if(this.propKeys){for(var e=function(e){i.ej2Instances.addEventListener(e,function(i){t.$emit(e,i)})},i=this,r=0,o=this.propKeys;r<o.length;r++){e(o[r])}var s=n("$root.$options.provide",this),a=n("$parent.$options.provide",this);if(a=h(a)?n("$.parent.provides",this):a,this.hasInjectedModules&&!Jz){var l=[];s&&s.managed?(this.isDecorator=!0,l=this.getInjectedServices()||[]):s?l=s[this.ej2Instances.getModuleName()]||[]:a&&(l=this.getInjectedServices()||[]);for(var c=0,d=this.ej2Instances.getInjectedModules()||[];c<d.length;c++){var p=d[c];-1===l.indexOf(p)&&l.push(p)}this.ej2Instances.injectedModules=l}}},mounted:function(){var t=this.$el?this.$el.querySelectorAll("div.e-directive"):null;if(!Jz&&t)for(var e=0;e<t.length;e++)t[parseInt(e.toString(),10)].parentElement&&t[parseInt(e.toString(),10)].parentElement.removeChild(t[parseInt(e.toString(),10)]);this.ej2Instances.isVue=!0,this.ej2Instances.isVue3=this.isVue3,this.ej2Instances.vueInstance=this,this.isVue3&&(this.ej2Instances.ej2Instances=this.ej2Instances,this.ej2Instances.referModels=this.models,this.setModelValue()),this.ej2Instances.appendTo(this.$el)},updated:function(){if(this.isVue3&&this.setModelValue(),this.hasChildDirective){var t={};this.fetchChildPropValues(t);var e=JSON.stringify(t);this.childDirObjects!==e&&(this.childDirObjects=e,this.assignValueToWrapper(t,!1))}},beforeDestroy:function(){this.destroyComponent()},beforeUnmount:function(){this.destroyComponent()},methods:{setModelValue:function(){if(!h(this.modelValue)||!h(this.$attrs.modelValue)){var t=(this.models.toString().match(/checked|value/)||[])[0];h(t)||(this.ej2Instances[""+t]=h(this.modelValue)?this.$attrs.modelValue:this.modelValue)}},updated:function(){if(this.isVue3&&this.setModelValue(),this.hasChildDirective){var t={};this.fetchChildPropValues(t);var e=JSON.stringify(t);this.childDirObjects!==e&&(this.childDirObjects=e,this.assignValueToWrapper(t,!1))}},getInjectedServices:function(){var t,e=[];if(this.$root&&this.isDecorator?t=n("$root.$options.provide",this):this.$vnode?t=n("$vnode.context.$options.provide",this):this.$parent&&(t=n("$parent.$options.provide",this)),h(t)&&!h(this.$)&&(t=n("$.parent.provides",this)),t){var i=t;if("function"==typeof t)if(t.managed){var r=t.managed,o=Object.keys(r),s=void 0;this.$root&&this.isDecorator?s=Object.keys(this.$root):this.$vnode?s=Object.keys(this.$vnode.context):this.$parent&&(s=Object.keys(this.$parent));for(var a=0;a<o.length;a++)for(var l=0;l<s.length;l++)-1!==s[parseInt(l.toString(),10)].indexOf(o[parseInt(a.toString(),10)])&&(this.$root&&this.isDecorator?r[o[parseInt(l.toString(),10)]]=this.$root[s[parseInt(a.toString(),10)]]:this.$vnode?r[o[parseInt(a.toString(),10)]]=this.$vnode.context[s[parseInt(l.toString(),10)]]:this.$parent&&(r[o[parseInt(a.toString(),10)]]=this.$parent[s[parseInt(l.toString(),10)]]),i=r)}else this.$vnode?i=this.$vnode.context.$options.provide():this.$parent&&(i=this.$parent.$options.provide());e=i[this.ej2Instances.getModuleName()]||[]}return this.isDecorator=!1,e},destroyComponent:function(){var t=this;t.ej2Instances.destroy(),t.$el.style.visibility="hidden",t=null},bindProperties:function(){for(var t={},e=0,i=this.propKeys;e<i.length;e++){var n=i[e];h(this[""+n])?!this[0]||h(this[0][0])||h(this[0][0][""+n])||(t[""+n]=this[0][0][""+n]):t[""+n]=this[""+n]}if(this.hasChildDirective&&this.fetchChildPropValues(t),this.hasInjectedModules){for(var r=this.getInjectedServices()||[],o=0,s=this.ej2Instances.getInjectedModules()||[];o<s.length;o++){var a=s[o];-1===r.indexOf(a)&&r.push(a)}this.ej2Instances.injectedModules=r}this.assignValueToWrapper(t)},assignValueToWrapper:function(t,e){this.ej2Instances.setProperties(l({},{},t,!0),!!h(e)||e)},fetchChildPropValues:function(t){var e={};if(this.isVue3){var i=void 0;if(this[0]&&this[0][1].slots.default?i=this[0][1].slots.default():this&&this.$&&this.$.slots&&this.$.slots.default&&(i=this.$.slots.default()),!i)return;for(var n=0;n<i.length;n++)if(i[parseInt(n.toString(),10)].type.methods||"e-seriescollection"===i[parseInt(n.toString(),10)].type){var r="e-seriescollection"===i[parseInt(n.toString(),10)].type?"series-collection":i[parseInt(n.toString(),10)].type.methods.getTag().replace("e-",""),o=this.resolveArrayDirectives(i[parseInt(n.toString(),10)].children,r),s=r.split("-"),a=this.ej2Instances.getModuleName().toLowerCase(),l=s.length>1&&a.indexOf(s[0])>-1?s[1]:s[0];l=l.replace(a,""),"splitter"==a&&"panes"==l?l="paneSettings":"bulletchart"==a&&"range"==l?l="ranges":"schedule"==a&&"header"==l&&(l="headerRows"),e[""+l]=o[""+r]}}else e=this.getDirectiveValues(this.$slots.default,this.tagMapper||{},this.tagNameMapper||{});this.childDirObjects||(this.childDirObjects=JSON.stringify(e));for(var h=0,c=Object.keys(e);h<c.length;h++){var d=c[h];t[""+d]=e[""+d]}},resolveArrayDirectives:function(t,e){var i,n=[];n=t.default?t.default():t;var r={};r[""+e]=[];for(var o=function(t){var n={},o=t.type.methods?t.type.methods.getTag():e;if(t.children){var a=void 0;if((i=s.resolveComplexDirs(t.children,s.tagMapper["e-"+e],o)).length)n=i;else for(var l=0;l<Object.keys(i).length;l++)a=Object.keys(i)[parseInt(l.toString(),10)],n[""+a]=i[""+a]}t.props&&Object.keys(t.props).forEach(function(e){var i=e.replace(/-[a-z]/g,function(t){return t[1].toUpperCase()});i&&(n[""+i]=t.props[""+e])}),/[s]\b/.test(o)&&i&&(!/[s]\b/.test(e)||i.length)?Array.isArray(n)?n.forEach(function(t){r[""+e].push(t)}):r[""+e].push(n):n&&0!==Object.keys(n).length&&r[""+e].push(n)},s=this,a=0,l=n;a<l.length;a++){o(l[a])}return r},resolveComplexDirs:function(t,e,i){for(var n,r=[],o={},s=function(t){var s=void 0;if(e[""+i]){s=Object.keys(e[""+i]).find(function(n){return e[""+i][""+n]===t.type.methods.getTag().replace(/[s]\b/,"")});var l=a.ej2Instances.getModuleName().toLowerCase();s=s?s.replace("e-",""):t.type.methods.getTag().replace("ribbon"===l?"e-ribbon-":"e-",""),"diagram"==a.ej2Instances.getModuleName().toLowerCase()&&-1!=s.indexOf("annotations")&&(s="annotations")}t.children&&(n=a.resolveComplexInnerDirs(t.children,e[""+i],t.type.methods.getTag()),o[""+s]||(o[""+s]=[]),n.length>1?o[""+s]=n:o[""+s].push(n)),t.props&&(t.props=a.getCamelCaseProps(t.props)),r.length>1?(o=0!=Object.keys(o).length||o.length?o:[],t.props&&o.push(t.props)):o=t.props?Object.assign(o,t.props):o},a=this,l=0,h=r=t.default?t.default():t;l<h.length;l++){s(h[l])}return o},resolveComplexInnerDirs:function(t,e,i){for(var n,r=[],o=(r=t.default?t.default():t).length>1?[]:{},s=0,a=r;s<a.length;s++){var l=a[s],h="ribbon"==this.ej2Instances.getModuleName().toLowerCase(),c=l.type.methods.getTag().replace(h?"e-ribbon-":"e-","");l.children&&(n=this.resolveMultilevelComplexInnerDirs(l.children,e[""+i],l.type.methods.getTag()),/[s]\b/.test(c)||r.length>1?/[s]\b/.test(c)?(o[""+c]=o[""+c]?o[""+c]:[],n.length?o[""+c]=n:o[""+c].push(n)):!n||h&&n.hasOwnProperty("collections")||o.push(n):o=n||o),l.props&&(l.props=this.getCamelCaseProps(l.props)),r.length>1&&l.props?h&&n&&n.hasOwnProperty("collections")?(n=l.props?Object.assign(n,l.props):n,o.push(n)):o.length>=0?o.push(l.props):o=l.props?Object.assign(o,l.props):o:o=l.props?Object.assign(o,l.props):o}return o},resolveMultilevelComplexInnerDirs:function(t,e,i){for(var n,r=[],o=(r=t.default?t.default():t).length>1?[]:{},s=0,a=r;s<a.length;s++){var l=a[s],h=this.ej2Instances.getModuleName().toLowerCase(),c=l.type.methods.getTag().replace("ribbon"===h?"e-ribbon-":"e-","");l.children&&(n=this.resolveComplexInnerDirs(l.children,e[""+i],l.type.methods.getTag())),l.props&&(l.props=this.getCamelCaseProps(l.props)),/[s]\b/.test(c)?(o[""+c]=o[""+c]?o[""+c]:[],n.length?o[""+c]=n:o[""+c].push(n),l.props&&o[""+c].push(l.props)):(o=n,o=l.props?Object.assign(o,l.props):o)}return o},getDirectiveValues:function(t,e,i){var n=Object.keys(e),r={};if(t)for(var o=0,s=t;o<s.length;o++){var a=s[o];if(a.componentOptions&&a.componentOptions.children&&a.componentOptions.tag||"e-seriescollection"===a.tag&&a.children){var l=a.componentOptions?a.componentOptions.tag:a.tag;if(l="e-seriescollection"===l?"e-seriesCollection":l,-1!==n.indexOf(l)){var h=i[""+l]?i[""+l]:l;r[h.replace("e-","")]=[];for(var c=0,d=a.componentOptions?a.componentOptions.children:a.children;c<d.length;c++){var p=d[c],u=this.getVNodeValue(p,e[""+l],i);0!==Object.keys(u).length&&r[h.replace("e-","")].push(u)}}}}return r},getMultiLevelDirValue:function(t,e,i){for(var n={},r=0,o=t;r<o.length;r++){var s=o[r],a=void 0,l=void 0;if(s.componentOptions?(a=s.componentOptions.tag,s.componentOptions.children&&(l=s.componentOptions.children)):"e-markersettings"!==s.tag&&"e-markersetting"!==s.tag||!s.children||(a="e-markersettings"===s.tag?"e-markerSettings":"e-markerSetting",l=s.children),a){var h=i[""+a]?i[""+a]:a;if(n[h.replace("e-","")]=[],l)for(var c=0,d=l;c<d.length;c++){var p=d[c],u=this.getVNodeValue(p,e[""+a],i);0!==Object.keys(u).length&&n[h.replace("e-","")].push(u)}}}return n},getVNodeValue:function(t,e,i){var n={};if(t.componentOptions||("e-markersettings"===t.tag||"e-markersetting"===t.tag)&&t.context){var r=void 0;r=t.componentOptions?t.componentOptions.tag:"e-markersettings"===t.tag?"e-markerSettings":"e-markerSetting","string"==typeof e&&r===e&&t.data?n=t.data.attrs?this.getCamelCaseProps(t.data.attrs):this.getCamelCaseProps(t.data):"object"==typeof e&&(t.componentOptions.children&&-1!==Object.keys(e).indexOf(r)?n=this.getMultiLevelDirValue(t.componentOptions.children,e[""+r],i):!t.children||-1===Object.keys(e).indexOf(r)||"e-markersettings"!==r&&"e-markersetting"!==r||(n=this.getMultiLevelDirValue(t.children,e[""+r],i)),t.data&&t.data.attrs&&(n=l(n,this.getCamelCaseProps(t.data.attrs))))}return n},getCamelCaseProps:function(t){for(var e={},i=0,n=Object.keys(t);i<n.length;i++){var r=n[i];e[r.replace(/-[a-z]/g,function(t){return t[1].toUpperCase()})]=t[""+r]}return e},dataBind:function(){this.ej2Instances.dataBind()},setProperties:function(t,e){return this.ej2Instances.setProperties(t,e)}}}),rk=function(){return(rk=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++){e=arguments[i];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t}).apply(this,arguments)},ok=yt();vt({compile:function(t,e){var i=this;return function(r,o,s,a,h){var c;if(o){var p=o.vueInstance?o.vueInstance.plugins:null,u=d("templateParentDiv"),g=d("templateDiv"),m=w("div",{id:u,innerHTML:'<div id="'+g+'"></div>'});if(document.body.appendChild(m),Jz||"string"!=typeof t)if(Jz)if("string"==typeof t){var f=function(t,e,i){if(t||i&&i.vueInstance)return Ed(i&&i.vueInstance?i.vueInstance:t,e)}(o.vueInstance,t,h);if(!f)return T(m),ok(t,e)(r);var v={},y=function(t){t.$parent&&y(t.$parent),t._provided&&Object.keys(t._provided).length>0&&(v=rk({},v,t._provided))},b=o.vueInstance?o.vueInstance:h&&h.vueInstance?h.vueInstance:null;b&&y(b),new tk({provide:rk({},v),render:function(){return f[""+t]({data:r})}}).$mount("#"+g),c=m.childNodes,T(m)}else{var S=(x=t.call(i,{})).template;if(C=n("template.propsData",x),N={data:{data:l(x.data||{},r)},parent:o.vueInstance},C&&(S=x.template.extends,N.propsData=C),"function"!=typeof S&&(S=tk.extend(S)),new S(N).$mount("#"+g),c=m.childNodes,o.vueInstance){var I=o.vueInstance.templateCollection;I||(o.vueInstance.templateCollection={},I=o.vueInstance.templateCollection),s&&(I[""+s]||(I[""+s]=[]),I[""+s].push(c[0]))}T(m)}else{var x,M=x=t.call(i,{}),C=n("template.propsData",x),N={data:{data:l(x.data||{},r)},parent:o.vueInstance};M.template||(M.template=M[Object.keys(M)[0]]);var E=void 0;if(M.template.extends)E=M.template.extends._context.components.template;else if(!(E=M.template._context.components[t.name])){var D=Object.keys(M.template._context.components)[0];E=M.template._context.components[""+D]}var O;if(C)O=Object.assign(E.data(),C);else if(O=Object.assign(E.data(),N.data),E.components)for(var L=function(t){var e=E.components[""+t];if(e&&e.data){var i=Object.assign(e.data(),N.data);e.data=function(){return i}}},A=0,z=Object.keys(E.components)||[];A<z.length;A++)L(z[A]);if(E.data=function(){return O},j=tk.createApp(E),p)for(P=0;P<p.length;P++)j.use(p[parseInt(P.toString(),10)]);Nd(j,o.vueInstance,h),j.mount("#"+u),c=m.childNodes,T(m)}else{var k=function(t,e,i){if(t||i&&i.vueInstance)return Td(i&&i.vueInstance?i.vueInstance.$slots:t.$slots,e)}(o.vueInstance,t,h);if(!k)return T(m),ok(t,e)(r);var j=tk.createApp({render:function(){return k[""+t]({data:r})}});if(p)for(var P=0;P<p.length;P++)j.use(p[parseInt(P.toString(),10)]);Nd(j,o.vueInstance,h),j.mount("#"+u),c=m.childNodes,T(m)}}return c||[]}}});var sk=ik({inject:{custom:{default:null}},render:function(t){if(!Jz){var e=Jz?t:ek,i=null;return h(this.$slots.default)||(i=Jz?this.$slots.default:this.$slots.default()),e("div",{class:"e-directive"},i)}},updated:function(){!Jz&&this.custom&&this.custom()},methods:{getTag:function(){return"e-layers"}}}),ak={name:"e-layers",install:function(t){t.component(ak.name,sk)}},lk=ik({render:function(){},methods:{getTag:function(){return"e-layer"}}}),hk={name:"e-layer",install:function(t){t.component(hk.name,lk)}},ck=ik({inject:{custom:{default:null}},render:function(t){if(!Jz){var e=Jz?t:ek,i=null;return h(this.$slots.default)||(i=Jz?this.$slots.default:this.$slots.default()),e("div",{class:"e-directive"},i)}},updated:function(){!Jz&&this.custom&&this.custom()},methods:{getTag:function(){return"e-cursormaps"}}}),dk={name:"e-cursormaps",install:function(t){t.component(dk.name,ck)}},pk=ik({render:function(){},methods:{getTag:function(){return"e-cursormap"}}}),uk={name:"e-cursormap",install:function(t){t.component(uk.name,pk)}},gk=ik({inject:{custom:{default:null}},render:function(t){if(!Jz){var e=Jz?t:ek,i=null;return h(this.$slots.default)||(i=Jz?this.$slots.default:this.$slots.default()),e("div",{class:"e-directive"},i)}},updated:function(){!Jz&&this.custom&&this.custom()},methods:{getTag:function(){return"e-connector-fixeduserhandles"}}}),mk={name:"e-connector-fixeduserhandles",install:function(t){t.component(mk.name,gk)}},fk=ik({render:function(){},methods:{getTag:function(){return"e-connector-fixeduserhandle"}}}),vk={name:"e-connector-fixeduserhandle",install:function(t){t.component(vk.name,fk)}},yk=ik({inject:{custom:{default:null}},render:function(t){if(!Jz){var e=Jz?t:ek,i=null;return h(this.$slots.default)||(i=Jz?this.$slots.default:this.$slots.default()),e("div",{class:"e-directive"},i)}},updated:function(){!Jz&&this.custom&&this.custom()},methods:{getTag:function(){return"e-connector-annotations"}}}),bk={name:"e-connector-annotations",install:function(t){t.component(bk.name,yk)}},Sk=ik({render:function(){},methods:{getTag:function(){return"e-connector-annotation"}}}),wk={name:"e-connector-annotation",install:function(t){t.component(wk.name,Sk)}},Ik=ik({inject:{custom:{default:null}},render:function(t){if(!Jz){var e=Jz?t:ek,i=null;return h(this.$slots.default)||(i=Jz?this.$slots.default:this.$slots.default()),e("div",{class:"e-directive"},i)}},updated:function(){!Jz&&this.custom&&this.custom()},methods:{getTag:function(){return"e-connectors"}}}),xk={name:"e-connectors",install:function(t){t.component(xk.name,Ik)}},Mk=ik({render:function(){},methods:{getTag:function(){return"e-connector"}}}),Ck={name:"e-connector",install:function(t){t.component(Ck.name,Mk)}},Nk=ik({inject:{custom:{default:null}},render:function(t){if(!Jz){var e=Jz?t:ek,i=null;return h(this.$slots.default)||(i=Jz?this.$slots.default:this.$slots.default()),e("div",{class:"e-directive"},i)}},updated:function(){!Jz&&this.custom&&this.custom()},methods:{getTag:function(){return"e-node-fixeduserhandles"}}}),Ek={name:"e-node-fixeduserhandles",install:function(t){t.component(Ek.name,Nk)}},Dk=ik({render:function(){},methods:{getTag:function(){return"e-node-fixeduserhandle"}}}),Tk={name:"e-node-fixeduserhandle",install:function(t){t.component(Tk.name,Dk)}},Ok=ik({inject:{custom:{default:null}},render:function(t){if(!Jz){var e=Jz?t:ek,i=null;return h(this.$slots.default)||(i=Jz?this.$slots.default:this.$slots.default()),e("div",{class:"e-directive"},i)}},updated:function(){!Jz&&this.custom&&this.custom()},methods:{getTag:function(){return"e-node-annotations"}}}),Lk={name:"e-node-annotations",install:function(t){t.component(Lk.name,Ok)}},Ak=ik({render:function(){},methods:{getTag:function(){return"e-node-annotation"}}}),zk={name:"e-node-annotation",install:function(t){t.component(zk.name,Ak)}},kk=ik({inject:{custom:{default:null}},render:function(t){if(!Jz){var e=Jz?t:ek,i=null;return h(this.$slots.default)||(i=Jz?this.$slots.default:this.$slots.default()),e("div",{class:"e-directive"},i)}},updated:function(){!Jz&&this.custom&&this.custom()},methods:{getTag:function(){return"e-node-ports"}}}),jk={name:"e-node-ports",install:function(t){t.component(jk.name,kk)}},Pk=ik({render:function(){},methods:{getTag:function(){return"e-node-port"}}}),Rk={name:"e-node-port",install:function(t){t.component(Rk.name,Pk)}},Bk=ik({inject:{custom:{default:null}},render:function(t){if(!Jz){var e=Jz?t:ek,i=null;return h(this.$slots.default)||(i=Jz?this.$slots.default:this.$slots.default()),e("div",{class:"e-directive"},i)}},updated:function(){!Jz&&this.custom&&this.custom()},methods:{getTag:function(){return"e-nodes"}}}),Hk={name:"e-nodes",install:function(t){t.component(Hk.name,Bk)}},Uk=ik({render:function(){},methods:{getTag:function(){return"e-node"}}}),Vk={name:"e-node",install:function(t){t.component(Vk.name,Uk)}},_k=["isLazyUpdate","plugins","addInfo","annotationTemplate","backgroundColor","bridgeDirection","commandManager","connectorDefaults","connectors","constraints","contextMenuSettings","customCursor","dataSourceSettings","diagramSettings","drawingObject","enableConnectorSplit","enablePersistence","enableRtl","getConnectorDefaults","getCustomCursor","getCustomProperty","getCustomTool","getDescription","getNodeDefaults","height","historyManager","layers","layout","locale","mode","nodeDefaults","nodeTemplate","nodes","pageSettings","rulerSettings","scrollSettings","segmentThumbShape","selectedItems","serializationSettings","setNodeTemplate","snapSettings","tool","tooltip","updateSelection","userHandleTemplate","width","animationComplete","click","collectionChange","commandExecute","connectionChange","contextMenuBeforeItemRender","contextMenuClick","contextMenuOpen","created","dataLoaded","doubleClick","dragEnter","dragLeave","dragOver","drop","expandStateChange","fixedUserHandleClick","historyChange","historyStateChange","keyDown","keyUp","mouseEnter","mouseLeave","mouseOver","mouseWheel","onImageLoad","onUserHandleMouseDown","onUserHandleMouseEnter","onUserHandleMouseLeave","onUserHandleMouseUp","positionChange","propertyChange","rotateChange","scrollChange","segmentChange","segmentCollectionChange","selectionChange","sizeChange","sourcePointChange","targetPointChange","textEdit","elementDraw"],Fk=[],Yk=Cd({props:_k}),Wk=Yk[0],Qk=Yk[1],Xk=Object.keys(Qk);Xk.push("modelchanged","update:modelValue");for(var qk=0,Gk=Fk;qk<Gk.length;qk++){var Zk=Gk[qk];Xk.push("update:"+Zk)}var $k=ik({name:"DiagramComponent",mixins:[nk],props:Wk,watch:Qk,emits:Xk,provide:function(){return{custom:this.custom}},data:function(){return{ej2Instances:new YI({}),propKeys:_k,models:Fk,hasChildDirective:!0,hasInjectedModules:!0,tagMapper:{"e-layers":"e-layer","e-cursormaps":"e-cursormap","e-connectors":{"e-connector":{"e-connector-fixeduserhandles":"e-connector-fixeduserhandle","e-connector-annotations":"e-connector-annotation"}},"e-nodes":{"e-node":{"e-node-fixeduserhandles":"e-node-fixeduserhandle","e-node-annotations":"e-node-annotation","e-node-ports":"e-node-port"}}},tagNameMapper:{"e-cursormaps":"e-customCursor","e-connector-fixeduserhandles":"e-fixedUserHandles","e-connector-annotations":"e-annotations","e-node-fixeduserhandles":"e-fixedUserHandles","e-node-annotations":"e-annotations","e-node-ports":"e-ports"},isVue3:!Jz,templateCollection:{}}},created:function(){this.bindProperties(),this.ej2Instances._setProperties=this.ej2Instances.setProperties,this.ej2Instances.setProperties=this.setProperties,this.ej2Instances.clearTemplate=this.clearTemplate,this.updated=this.updated},render:function(t){var e=Jz?t:ek,i=null;return h(this.$slots.default)||(i=Jz?this.$slots.default:this.$slots.default()),e("div",i)},methods:{clearTemplate:function(t){if(t||(t=Object.keys(this.templateCollection||{})),t.length&&this.templateCollection)for(var e=0,i=t;e<i.length;e++){var r=i[e],o=this.templateCollection[r];if(o&&o.length){for(var s=0,a=o;s<a.length;s++){var l=a[s];n("__vue__.$destroy",l)&&l.__vue__.$destroy(),l.innerHTML&&(l.innerHTML="")}delete this.templateCollection[r]}}},setProperties:function(t,e){var i=this;this.isVue3&&(this.models=this.models?this.models:this.ej2Instances.referModels),this.ej2Instances&&this.ej2Instances._setProperties&&this.ej2Instances._setProperties(t,e),t&&this.models&&this.models.length&&Object.keys(t).map(function(e){i.models.map(function(n){e!==n||/datasource/i.test(e)||(i.isVue3?i.ej2Instances.vueInstance.$emit("update:"+e,t[e]):(i.$emit("update:"+e,t[e]),i.$emit("modelchanged",t[e])))})})},custom:function(){this.updated()},add:function(t,e){return this.ej2Instances.add(t,e)},addChildToGroup:function(t,e){return this.ej2Instances.addChildToGroup(t,e)},addConnector:function(t){return this.ej2Instances.addConnector(t)},addConnectorLabels:function(t,e){return this.ej2Instances.addConnectorLabels(t,e)},addConstraints:function(t,e){return this.ej2Instances.addConstraints(t,e)},addCustomHistoryEntry:function(t){return this.ej2Instances.addCustomHistoryEntry(t)},addHistoryEntry:function(t,e){return this.ej2Instances.addHistoryEntry(t,e)},addLabels:function(t,e){return this.ej2Instances.addLabels(t,e)},addLanes:function(t,e,i){return this.ej2Instances.addLanes(t,e,i)},addLayer:function(t,e){return this.ej2Instances.addLayer(t,e)},addNode:function(t,e){return this.ej2Instances.addNode(t,e)},addNodeLabels:function(t,e){return this.ej2Instances.addNodeLabels(t,e)},addNodeToLane:function(t,e,i){return this.ej2Instances.addNodeToLane(t,e,i)},addPhases:function(t,e){return this.ej2Instances.addPhases(t,e)},addPorts:function(t,e){return this.ej2Instances.addPorts(t,e)},addProcess:function(t,e){return this.ej2Instances.addProcess(t,e)},addTextAnnotation:function(t,e){return this.ej2Instances.addTextAnnotation(t,e)},align:function(t,e,i){return this.ej2Instances.align(t,e,i)},bringIntoView:function(t){return this.ej2Instances.bringIntoView(t)},bringLayerForward:function(t){return this.ej2Instances.bringLayerForward(t)},bringToCenter:function(t){return this.ej2Instances.bringToCenter(t)},bringToFront:function(){return this.ej2Instances.bringToFront()},clear:function(){return this.ej2Instances.clear()},clearHistory:function(){return this.ej2Instances.clearHistory()},clearSelection:function(){return this.ej2Instances.clearSelection()},cloneLayer:function(t){return this.ej2Instances.cloneLayer(t)},copy:function(){return this.ej2Instances.copy()},cut:function(){return this.ej2Instances.cut()},distribute:function(t,e){return this.ej2Instances.distribute(t,e)},doLayout:function(){return this.ej2Instances.doLayout()},drag:function(t,e,i){return this.ej2Instances.drag(t,e,i)},dragSourceEnd:function(t,e,i){return this.ej2Instances.dragSourceEnd(t,e,i)},dragTargetEnd:function(t,e,i){return this.ej2Instances.dragTargetEnd(t,e,i)},endGroupAction:function(){return this.ej2Instances.endGroupAction()},exportDiagram:function(t){return this.ej2Instances.exportDiagram(t)},exportImage:function(t,e){return this.ej2Instances.exportImage(t,e)},findElementUnderMouse:function(t,e,i){return this.ej2Instances.findElementUnderMouse(t,e,i)},findObjectUnderMouse:function(t,e,i){return this.ej2Instances.findObjectUnderMouse(t,e,i)},findObjectsUnderMouse:function(t,e){return this.ej2Instances.findObjectsUnderMouse(t,e)},findTargetObjectUnderMouse:function(t,e,i,n,r){return this.ej2Instances.findTargetObjectUnderMouse(t,e,i,n,r)},fitToPage:function(t){return this.ej2Instances.fitToPage(t)},getActiveLayer:function(){return this.ej2Instances.getActiveLayer()},getConnectorObject:function(t){return this.ej2Instances.getConnectorObject(t)},getCursor:function(t,e){return this.ej2Instances.getCursor(t,e)},getDiagramAction:function(t){return this.ej2Instances.getDiagramAction(t)},getDiagramBounds:function(){return this.ej2Instances.getDiagramBounds()},getDiagramContent:function(t){return this.ej2Instances.getDiagramContent(t)},getEdges:function(t){return this.ej2Instances.getEdges(t)},getHistoryStack:function(t){return this.ej2Instances.getHistoryStack(t)},getNodeObject:function(t){return this.ej2Instances.getNodeObject(t)},getObject:function(t){return this.ej2Instances.getObject(t)},getParentId:function(t){return this.ej2Instances.getParentId(t)},getTool:function(t){return this.ej2Instances.getTool(t)},group:function(){return this.ej2Instances.group()},hideTooltip:function(t){return this.ej2Instances.hideTooltip(t)},insertData:function(t){return this.ej2Instances.insertData(t)},loadDiagram:function(t){return this.ej2Instances.loadDiagram(t)},moveForward:function(){return this.ej2Instances.moveForward()},moveObjects:function(t,e){return this.ej2Instances.moveObjects(t,e)},moveObjectsUp:function(t,e){return this.ej2Instances.moveObjectsUp(t,e)},nudge:function(t,e,i){return this.ej2Instances.nudge(t,e,i)},pan:function(t,e,i,n){return this.ej2Instances.pan(t,e,i,n)},paste:function(t){return this.ej2Instances.paste(t)},print:function(t){return this.ej2Instances.print(t)},printImage:function(t,e){return this.ej2Instances.printImage(t,e)},redo:function(){return this.ej2Instances.redo()},remove:function(t){return this.ej2Instances.remove(t)},removeConstraints:function(t,e){return this.ej2Instances.removeConstraints(t,e)},removeData:function(t){return this.ej2Instances.removeData(t)},removeLabels:function(t,e){return this.ej2Instances.removeLabels(t,e)},removeLane:function(t,e){return this.ej2Instances.removeLane(t,e)},removeLayer:function(t){return this.ej2Instances.removeLayer(t)},removePhase:function(t,e){return this.ej2Instances.removePhase(t,e)},removePorts:function(t,e){return this.ej2Instances.removePorts(t,e)},removeProcess:function(t){return this.ej2Instances.removeProcess(t)},reset:function(){return this.ej2Instances.reset()},resetSegments:function(){return this.ej2Instances.resetSegments()},rotate:function(t,e,i){return this.ej2Instances.rotate(t,e,i)},sameSize:function(t,e){return this.ej2Instances.sameSize(t,e)},saveDiagram:function(){return this.ej2Instances.saveDiagram()},scale:function(t,e,i,n){return this.ej2Instances.scale(t,e,i,n)},select:function(t,e,i){return this.ej2Instances.select(t,e,i)},selectAll:function(){return this.ej2Instances.selectAll()},sendBackward:function(){return this.ej2Instances.sendBackward()},sendLayerBackward:function(t){return this.ej2Instances.sendLayerBackward(t)},sendToBack:function(){return this.ej2Instances.sendToBack()},setActiveLayer:function(t){return this.ej2Instances.setActiveLayer(t)},setStackLimit:function(t){return this.ej2Instances.setStackLimit(t)},showTooltip:function(t){return this.ej2Instances.showTooltip(t)},startGroupAction:function(){return this.ej2Instances.startGroupAction()},startTextEdit:function(t,e){return this.ej2Instances.startTextEdit(t,e)},unGroup:function(){return this.ej2Instances.unGroup()},unSelect:function(t){return this.ej2Instances.unSelect(t)},undo:function(){return this.ej2Instances.undo()},updateData:function(t){return this.ej2Instances.updateData(t)},updateViewPort:function(){return this.ej2Instances.updateViewPort()},zoom:function(t,e){return this.ej2Instances.zoom(t,e)},zoomTo:function(t){return this.ej2Instances.zoomTo(t)}}}),Kk={name:"ejs-diagram",install:function(t){t.component(Kk.name,$k),t.component(hk.name,lk),t.component(ak.name,sk),t.component(uk.name,pk),t.component(dk.name,ck),t.component(Ck.name,Mk),t.component(xk.name,Ik),t.component(vk.name,fk),t.component(mk.name,gk),t.component(wk.name,Sk),t.component(bk.name,yk),t.component(Vk.name,Uk),t.component(Hk.name,Bk),t.component(Tk.name,Dk),t.component(Ek.name,Nk),t.component(zk.name,Ak),t.component(Lk.name,Ok),t.component(Rk.name,Pk),t.component(jk.name,kk)}},Jk=ik({inject:{custom:{default:null}},render:function(t){if(!Jz){var e=Jz?t:ek,i=null;return h(this.$slots.default)||(i=Jz?this.$slots.default:this.$slots.default()),e("div",{class:"e-directive"},i)}},updated:function(){!Jz&&this.custom&&this.custom()},methods:{getTag:function(){return"e-palettes"}}}),tj={name:"e-palettes",install:function(t){t.component(tj.name,Jk)}},ej=ik({render:function(){},methods:{getTag:function(){return"e-palette"}}}),ij={name:"e-palette",install:function(t){t.component(ij.name,ej)}},nj=["isLazyUpdate","plugins","accessKey","allowDrag","connectorDefaults","enableAnimation","enablePersistence","enableRtl","enableSearch","expandMode","filterSymbols","getConnectorDefaults","getNodeDefaults","getSymbolInfo","getSymbolTemplate","height","ignoreSymbolsOnSearch","locale","nodeDefaults","palettes","symbolDragSize","symbolHeight","symbolInfo","symbolMargin","symbolPreview","symbolWidth","width","paletteExpanding","paletteSelectionChange"],rj=[],oj=Cd({props:nj}),sj=oj[0],aj=oj[1],lj=Object.keys(aj);lj.push("modelchanged","update:modelValue");for(var hj=0,cj=rj;hj<cj.length;hj++){var dj=cj[hj];lj.push("update:"+dj)}var pj=ik({name:"SymbolPaletteComponent",mixins:[nk],props:sj,watch:aj,emits:lj,provide:function(){return{custom:this.custom}},data:function(){return{ej2Instances:new YO({}),propKeys:nj,models:rj,hasChildDirective:!0,hasInjectedModules:!0,tagMapper:{"e-palettes":"e-palette"},tagNameMapper:{},isVue3:!Jz,templateCollection:{}}},created:function(){this.bindProperties(),this.ej2Instances._setProperties=this.ej2Instances.setProperties,this.ej2Instances.setProperties=this.setProperties,this.ej2Instances.clearTemplate=this.clearTemplate,this.updated=this.updated},render:function(t){var e=Jz?t:ek,i=null;return h(this.$slots.default)||(i=Jz?this.$slots.default:this.$slots.default()),e("div",i)},methods:{clearTemplate:function(t){if(t||(t=Object.keys(this.templateCollection||{})),t.length&&this.templateCollection)for(var e=0,i=t;e<i.length;e++){var r=i[e],o=this.templateCollection[r];if(o&&o.length){for(var s=0,a=o;s<a.length;s++){var l=a[s];n("__vue__.$destroy",l)&&l.__vue__.$destroy(),l.innerHTML&&(l.innerHTML="")}delete this.templateCollection[r]}}},setProperties:function(t,e){var i=this;this.isVue3&&(this.models=this.models?this.models:this.ej2Instances.referModels),this.ej2Instances&&this.ej2Instances._setProperties&&this.ej2Instances._setProperties(t,e),t&&this.models&&this.models.length&&Object.keys(t).map(function(e){i.models.map(function(n){e!==n||/datasource/i.test(e)||(i.isVue3?i.ej2Instances.vueInstance.$emit("update:"+e,t[e]):(i.$emit("update:"+e,t[e]),i.$emit("modelchanged",t[e])))})})},custom:function(){this.updated()},addPaletteItem:function(t,e,i){return this.ej2Instances.addPaletteItem(t,e,i)},addPalettes:function(t){return this.ej2Instances.addPalettes(t)},removePaletteItem:function(t,e){return this.ej2Instances.removePaletteItem(t,e)},removePalettes:function(t){return this.ej2Instances.removePalettes(t)}}}),uj={name:"ejs-symbolpalette",install:function(t){t.component(uj.name,pj),t.component(ij.name,ej),t.component(tj.name,Jk)}},gj=["isLazyUpdate","plugins","enablePersistence","enableRtl","height","locale","sourceID","width","created"],mj=[],fj=Cd({props:gj}),vj=fj[0],yj=fj[1],bj=Object.keys(yj);bj.push("modelchanged","update:modelValue");for(var Sj=0,wj=mj;Sj<wj.length;Sj++){var Ij=wj[Sj];bj.push("update:"+Ij)}var xj=ik({name:"OverviewComponent",mixins:[nk],props:vj,watch:yj,emits:bj,provide:function(){return{custom:this.custom}},data:function(){return{ej2Instances:new XO({}),propKeys:gj,models:mj,hasChildDirective:!0,hasInjectedModules:!1,tagMapper:{},tagNameMapper:{},isVue3:!Jz,templateCollection:{}}},created:function(){this.bindProperties(),this.ej2Instances._setProperties=this.ej2Instances.setProperties,this.ej2Instances.setProperties=this.setProperties,this.ej2Instances.clearTemplate=this.clearTemplate,this.updated=this.updated},render:function(t){var e=Jz?t:ek,i=null;return h(this.$slots.default)||(i=Jz?this.$slots.default:this.$slots.default()),e("div",i)},methods:{clearTemplate:function(t){if(t||(t=Object.keys(this.templateCollection||{})),t.length&&this.templateCollection)for(var e=0,i=t;e<i.length;e++){var r=i[e],o=this.templateCollection[r];if(o&&o.length){for(var s=0,a=o;s<a.length;s++){var l=a[s];n("__vue__.$destroy",l)&&l.__vue__.$destroy(),l.innerHTML&&(l.innerHTML="")}delete this.templateCollection[r]}}},setProperties:function(t,e){var i=this;this.isVue3&&(this.models=this.models?this.models:this.ej2Instances.referModels),this.ej2Instances&&this.ej2Instances._setProperties&&this.ej2Instances._setProperties(t,e),t&&this.models&&this.models.length&&Object.keys(t).map(function(e){i.models.map(function(n){e!==n||/datasource/i.test(e)||(i.isVue3?i.ej2Instances.vueInstance.$emit("update:"+e,t[e]):(i.$emit("update:"+e,t[e]),i.$emit("modelchanged",t[e])))})})},custom:function(){this.updated()},updateHtmlLayer:function(t){return this.ej2Instances.updateHtmlLayer(t)}}}),Mj={name:"ejs-overview",install:function(t){t.component(Mj.name,xj)}};YI.Inject(DO,TO,OO,kO,ax,xO,WI,fO,AO,IO,MO,CO,mO,NO,bI),YO.Inject(fO);var Cj=Object.freeze({LayersDirective:sk,LayerDirective:lk,LayersPlugin:ak,LayerPlugin:hk,CustomCursorsDirective:ck,CustomCursorDirective:pk,CustomCursorsPlugin:dk,CustomCursorPlugin:uk,ConnectorFixedUserHandlesDirective:gk,ConnectorFixedUserHandleDirective:fk,ConnectorFixedUserHandlesPlugin:mk,ConnectorFixedUserHandlePlugin:vk,ConnectorAnnotationsDirective:yk,ConnectorAnnotationDirective:Sk,ConnectorAnnotationsPlugin:bk,ConnectorAnnotationPlugin:wk,ConnectorsDirective:Ik,ConnectorDirective:Mk,ConnectorsPlugin:xk,ConnectorPlugin:Ck,NodeFixedUserHandlesDirective:Nk,NodeFixedUserHandleDirective:Dk,NodeFixedUserHandlesPlugin:Ek,NodeFixedUserHandlePlugin:Tk,NodeAnnotationsDirective:Ok,NodeAnnotationDirective:Ak,NodeAnnotationsPlugin:Lk,NodeAnnotationPlugin:zk,PortsDirective:kk,PortDirective:Pk,PortsPlugin:jk,PortPlugin:Rk,NodesDirective:Bk,NodeDirective:Uk,NodesPlugin:Hk,NodePlugin:Vk,DiagramComponent:$k,DiagramPlugin:Kk,PalettesDirective:Jk,PaletteDirective:ej,PalettesPlugin:tj,PalettePlugin:ij,SymbolPaletteComponent:pj,SymbolPalettePlugin:uj,OverviewComponent:xj,OverviewPlugin:Mj,Diagram:YI,PrintAndExport:WI,Size:Qu,Rect:Zu,get MatrixTypes(){return Jp},Matrix:Ku,identityMatrix:Lt,transformPointByMatrix:At,transformPointsByMatrix:zt,rotateMatrix:kt,scaleMatrix:jt,translateMatrix:Pt,multiplyMatrix:Rt,Point:Gu,get BlazorAction(){return $u},get PortVisibility(){return gg},get SnapConstraints(){return mg},get SelectorConstraints(){return fg},get ConnectionPointOrigin(){return vg},get ChildArrangement(){return yg},get ConnectorConstraints(){return bg},get AnnotationConstraints(){return Sg},get NodeConstraints(){return wg},get ElementAction(){return Ig},get ThumbsConstraints(){return xg},get DiagramConstraints(){return Mg},get DiagramTools(){return Cg},get Transform(){return Ng},get RenderMode(){return Eg},get KeyModifiers(){return Dg},get Keys(){return Tg},get DiagramAction(){return Og},get RendererAction(){return Lg},get RealAction(){return Ag},get ScrollActions(){return zg},get NoOfSegments(){return kg},get DiagramEvent(){return jg},get PortConstraints(){return Pg},contextMenuClick:Bg,contextMenuOpen:Hg,contextMenuBeforeItemRender:Ug,get ControlPointsVisibility(){return Rg},get BezierSmoothness(){return Vg},Thickness:ig,Margin:ng,Shadow:rg,Stop:og,Gradient:sg,DiagramGradient:ag,LinearGradient:lg,RadialGradient:hg,ShapeStyle:cg,StrokeStyle:dg,TextStyle:pg,DiagramShapeStyle:ug,DiagramElement:Gg,PathElement:rm,ImageElement:sm,TextElement:Jg,Container:$g,Canvas:em,GridPanel:Ab,RowDefinition:zb,ColumnDefinition:kb,GridRow:jb,GridCell:Pb,StackPanel:ew,findConnectorPoints:Xt,swapBounds:ne,findMargin:ue,findAngle:ge,findPoint:me,getIntersection:ve,getIntersectionPoints:be,orthoConnection2Segment:xe,getPortDirection:Ae,getOuterBounds:ze,getOppositeDirection:ke,processPathData:bt,parsePathData:St,getRectanglePath:wt,getPolygonPath:It,getFreeHandPath:xt,pathSegmentCollection:Mt,transformPath:Ct,updatedSegment:Nt,scalePathData:Et,splitArrayCollection:Dt,getPathString:Tt,getString:Ot,randomId:da,getIndex:pa,templateCompiler:ua,cornersPointsBeforeRotation:ga,getBounds:ma,cloneObject:fa,getInternalProperties:va,cloneArray:ya,extendObject:ba,extendArray:Sa,textAlignToString:wa,wordBreakToString:Ia,bBoxText:xa,middleElement:Ma,overFlow:Ca,whiteSpaceToString:Na,rotateSize:Ea,rotatePoint:Da,getOffset:Ta,getFunction:Oa,completeRegion:go,findNodeByName:mo,findObjectType:fo,setSwimLaneDefaults:vo,getSpaceValue:yo,getInterval:bo,setPortsEdges:So,setUMLActivityDefaults:wo,setConnectorDefaults:Io,findNearestPoint:xo,isDiagramChild:Mo,groupHasType:Co,updateDefaultValues:No,updateLayoutValue:Eo,isPointOverConnector:Do,intersect3:To,intersect2:Oo,getLineSegment:Lo,getPoints:Ao,getTooltipOffset:zo,initfixedUserHandlesSymbol:jo,sort:Po,getAnnotationPosition:Ro,getOffsetOfConnector:Bo,getAlignedPosition:Ho,alignLabelOnSegments:Uo,getBezierDirection:Vo,removeChildNodes:_o,getChild:Fo,serialize:Yo,deserialize:Qo,upgrade:Xo,updateStyle:qo,updateHyperlink:Go,updateShapeContent:Zo,updateShape:$o,updateContent:Ko,updateUmlActivityNode:Jo,getUMLFinalNode:ts,getUMLActivityShapes:es,removeGradient:is,removeItem:ns,updateConnector:rs,getUserHandlePosition:os,canResizeCorner:ss,canShowCorner:as,canShowControlPoints:ls,checkPortRestriction:hs,findAnnotation:cs,findPort:ds,getInOutConnectPorts:ps,findObjectIndex:us,getObjectFromCollection:gs,scaleElement:ms,arrangeChild:fs,insertObject:vs,getElement:ys,getCollectionChangeEventArguements:Ss,getDropEventArguements:ws,getPoint:Is,getObjectType:VS,flipConnector:_S,updatePortEdges:FS,alignElement:YS,cloneSelectedObjects:WS,updatePathElement:QS,checkPort:XS,findPath:qS,getConnectorDirection:GS,findDistance:ZS,cloneBlazorObject:xs,checkBrowserInfo:Ms,canMeasureDecoratorPath:Cs,getPreviewSize:Ns,getSymbolSize:Es,findParentInSwimlane:Ds,selectionHasConnector:Ts,CanvasRenderer:Fw,DiagramRenderer:Ww,DataBinding:ax,getBasicShape:Ut,getPortShape:Vt,getDecoratorShape:_t,getSegmentThumbShapeHorizontal:Ft,getSegmentThumbShapeVertical:Yt,getIconShape:Wt,getFlowShape:Qt,Hyperlink:mm,Annotation:fm,ShapeAnnotation:vm,PathAnnotation:ym,Port:dm,PointPort:pm,menuClass:gO,DiagramContextMenu:mO,Shape:lw,Path:hw,Native:cw,Html:dw,Image:pw,Text:uw,BasicShape:gw,FlowShape:mw,BpmnGateway:fw,BpmnDataObject:vw,BpmnTask:yw,BpmnEvent:bw,BpmnSubEvent:Sw,BpmnTransactionSubProcess:ww,BpmnSubProcess:Iw,BpmnActivity:xw,BpmnAnnotation:Mw,BpmnShape:Cw,UmlActivityShape:Nw,MethodArguments:Ew,UmlClassAttribute:Dw,UmlClassMethod:Tw,UmlClass:Ow,UmlInterface:Lw,UmlEnumerationMember:Aw,UmlEnumeration:zw,UmlClassifierShape:kw,DiagramShape:jw,Node:Pw,Header:Rw,Lane:Bw,Phase:Hw,SwimLane:Uw,ChildContainer:Vw,Selector:_w,BpmnDiagrams:fO,getBpmnShapePathData:pl,getBpmnTriggerShapePathData:ul,getBpmnGatewayShapePathData:gl,getBpmnTaskShapePathData:ml,getBpmnLoopShapePathData:fl,Decorator:pS,Vector:uS,BezierSettings:gS,ConnectorShape:mS,ActivityFlow:fS,BpmnFlow:vS,ConnectorSegment:yS,StraightSegment:bS,BezierSegment:SS,OrthogonalSegment:wS,DiagramConnectorSegment:IS,getDirection:eo,isEmptyVector:io,getBezierPoints:no,getBezierBounds:ro,bezierPoints:oo,MultiplicityLabel:xS,ClassifierMultiplicity:MS,RelationShip:CS,DiagramConnectorShape:NS,Connector:ES,ConnectorBridging:IO,Snapping:xO,UndoRedo:MO,DiagramTooltip:fb,initTooltip:Sn,updateTooltip:xn,LayoutAnimation:CO,SymbolSize:bb,SymbolPaletteInfo:Sb,FixedUserHandle:Db,NodeFixedUserHandle:Tb,ConnectorFixedUserHandle:Ob,UserHandle:zS,ToolBase:Fb,SelectTool:Yb,FixedUserHandleTool:Wb,ConnectTool:Qb,MoveTool:Xb,RotateTool:qb,ResizeTool:Gb,NodeDrawingTool:Zb,ConnectorDrawingTool:$b,TextDrawingTool:Kb,ZoomPanTool:Jb,ExpandTool:tS,LabelTool:eS,PolygonDrawingTool:iS,PolyLineDrawingTool:nS,LabelDragTool:rS,LabelResizeTool:oS,LabelRotateTool:sS,FreeHandTool:aS,DiagramEventHandler:SI,CommandHandler:EI,findToolToActivate:qr,findPortToolToActivate:Gr,contains:Zr,hasSelection:$r,hasSingleConnection:Kr,isSelected:Jr,getCursor:to,ConnectorEditing:bI,updateCanvasBounds:jr,removeChildInContainer:Pr,findBounds:Rr,createHelper:Br,renderContainerHelper:Hr,checkParentAsContainer:Ur,checkChildNodeInContainer:Vr,addChildToContainer:Fr,updateLaneBoundsAfterAddChild:Wr,renderStackHighlighter:Qr,moveChildInStack:Xr,LineRouting:NO,LineDistribution:EO,CrudAction:pI,ConnectionDataSource:uI,DataSource:gI,Gridlines:eI,SnapSettings:iI,KeyGesture:RS,Command:BS,CommandManager:HS,ContextMenuSettings:US,CustomCursorAction:PI,DataMappingItems:hI,BlazorAnimation:nb,BlazorTooltip:ub,Layout:vI,MindMap:TO,HierarchicalTree:DO,RadialTree:OO,GraphForceNode:LO,SymmetricLayout:AO,GraphLayoutManager:zO,ComplexHierarchicalTree:kO,Palette:VO,SymbolDragSize:_O,SymbolPreview:FO,SymbolPalette:YO,Ruler:OS,Overview:XO});return t.base=Wu,t.diagrams=Cj,t}({});this.ejs=ej,"object"==typeof module&&"object"==typeof module.exports&&(module.exports={ej:ej}),"function"==typeof define&&define.amd&&define("ej",[],function(){return{ej:ej}});
